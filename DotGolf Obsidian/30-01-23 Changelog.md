- Remove line height for content tiles control modal description (#1650)
- content tiles control modal description remove line height for EG
- DG-8287 #55596 Fix PGA member sign up (#1649)
- Merge branch 'main' into feature/DG-8287_Fix_pga_member_sign_up
- DG-8287 Fix PGA member sign up Fix where a PGA member signing up on MyGolf doesn't have PGA number or Club Number. updated Logic to use DatabaseAssociationIds.
- update sct clubcms bindings (#1647)
- update sct clubcms bindings
- Delete DotGolf.ReverseProxy directory (#1646)
- Merge branch 'main' into norwd-patch-5
- Delete DotGolf.Lambda.EmailViewer directory (#1645)
- Merge branch 'main' into norwd-patch-3
- Delete DotGolf.InteropCentralDirectory directory (#1644)
- Merge branch 'main' into norwd-patch-2
- Delete Other/ExceptionLogToElastic directory (#1642)
- Delete DotGolf.ReverseProxy directory
- Delete DotGolf.Lambda.EmailViewer directory
- Delete DotGolf.InteropCentralDirectory directory
- Delete Other/ExceptionLogToElastic directory
- DG-8248 Tournament registration DOB validation fix and NonAffiliate record insert fix (#1640)
- Merge branch 'main' into hotfix/DG-8248-tournament-reg-form-validation-improvements
- Tournament registration: null out the Association ID when inserting a NonAffiliate record
- Fix the tournament registration DOB validation
- No longer add an AssociationId to anonymous guest NonAffiliate records. (#1638)
- No longer add an AssociationId to anonymous guest NonAffiliate records.
- Also disallow casual golfers going into NonAffiliate (#1636)
- Merge branch 'main' into feature/store-anon-guests-in-nonaffiliate-again
- Also disallow casual golfers going into NonAffiliate
- Fix defunct or incorrect draw times showing in draw sheet ui (#1633)
- Merge branch 'main' into hotfix/org-draw-sheet
- Fix defunct draw times showing in draw sheet ui
- DG-8276: Fix the country displayed on SG Clubhouse Tournament - Manage Players (#1631)
- Merge branch 'main' into hotfix/DG-8276-clubhouse-sg-tournaments
- Remove the hardcoded "New Zealand" condition
- Replace the hardcoded "New Zealand" country name and "nz" country code
- Remove the hardcoded NZ Auckland Region ID (#1629)
- Merge branch 'main' into hotfix/DG-8248-sg-tournament-reg-guest
- Apply misc code cleanups from #1397 (#1630)
- Fix bug in string.ToGender() due to `ToUpper()`
- Support "F", "Male" and "Female" in string.ToGender().
- Use dapper for InsertNonAffiliateAndPersonClubDetail query
- Merge branch 'main' into hotfix/DG-8248-sg-tournament-reg-guest
- Remove the hardcoded NZ Auckland Region ID when inserting tournament guests / non-affiliates
- Store anonymous guests in NonAffiliate again - see comments posted on #1397 for info (#1628)
- Store anonymous guests in NonAffiliate again - see comments posted on #1397 for info
- Better error message when opening member page of deleted person (#1627)
- Merge branch 'main' into feature/better-deleted-person-error
- Fix "Request is not available in this context" error in bulk renewals (#1625)
- Fix "Request is not available in this context" error in bulk renewals
- Better error message for member page of deleted people
- Hash out DOB, mobile number, profile photo and email in GetFriend API call (#1622)
- Merge branch 'main' into fix/data-disclosure-SEC-20230127-01
- Hash out DOB, mobile number, profile photo and email in GetFriend API call
- DG-8248: Fix the tournament billing card display on My Account (#1620)
- Merge branch 'main' into hotfix/DG-8248-my-account-tournament-billing-card
- Allow online registrations via the app if it's enabled at the club level (#1621)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: Missing "!" in the if condition - We should allow online registrations via the app if it's allowed at the club level.
- Merge branch 'main' into hotfix/DG-8248-my-account-tournament-billing-card
- Fix tournament billing card display
- DG-8080: VisitorsByRegionCounts fix (#1619)
- Merge branch 'main' into feature/DG-8080_VisitorCountByRegion_report_fix
- DG-8080: VisitorsByRegionCounts fix Fix when we're tallying up the numbers we were not considering the "excludeFromGroupBooking.Count" to be null so handling this now to return 0. else the SQL arithmetic falls over
- Fix instagram posts in Tournament Event feed (#1617)
- Merge branch 'main' into hotfix/tournament-event-feed-instagram-not-loading
- Fix instagram posts in Tournament Event feed
- Fix error trying to invoke settings explorer from manual journal page (#1614)
- Merge branch 'main' into hotfix/manual-journal
- Fix Legacy apply-booking-changes endpoint - use payment provider when setting card transaction (#1615)
- Merge branch 'main' into hotfix/app-legacy-apply-booking-changes-use-payment-provider
- Fix Legacy apply-booking-changes endpoint - setup transaction now using payment provider.
- Fix error trying to invoke settings explorer from manual journal page
- Fix error when trying to void member's billing token in Live (#1612)
- Fix error when trying to void member's billing token in Live
- Remove Contact Number as mandatory from Group Booking (#1607)
- Merge branch 'main' into feature/DG-8084_Remove_mandatory_contact_number_for_group_booking
- Add a default txt for websites that doesn't have it's own file (#1609)
- Merge branch 'main' into hotfix/fix-adstxt-failed-requests
- Simplify UnitConversion.cs by converting everything to metres first (#1598)
- Merge branch 'main' into feature/DG-8084_Remove_mandatory_contact_number_for_group_booking
- Merge branch 'main' into feature/simplify-unitconversion
- Remove redundant test case
- Add a default txt for websites that doesn't have it's own file inside /adstxt folder
- Tidy up test data table to allow single precession setting
- Remove explicit precision limiters
- Convert last edge cases to theory (unit conversion within precision)
- Fix teebooking [apply|save]-booking-changes endpoint ORNS bug (#1606)
- Merge branch 'main' into hotfix/api-teebooking-save-changes-orns
- Mod: Live: DG-8084: Removed Contact Number as mandatory from Group Booking
- Fix teebooking [apply|save]-booking-changes endpoint ORNS bug.
- Fix string or binary data would be truncated error (#1605)
- Fix string or binary data would be truncated - ellipsis when news article title too long
- Add test for converting between identical units
- Add test case for converting null values between length units
- Extract simple unit conversion tests to theory
- Fix SectionControlRec incorrectly being cast to DataRow (#1603)
- Merge branch 'main' into fix/clubcms/datarow-invalid-cast-exception
- Fix SectionControlRec incorrectly being cast to DataRow
- Fix newtonsoft assembly redirects (#1602)
- Merge branch 'main' into fix/newtonsoft-redirects
- Fix newtonsoft assembly redirects
- Fix newtonsoft assembly redirects
- Fix error viewing outstanding levies (#1600)
- Merge branch 'main' into hotfix/org
- Fix newtonsoft assembly redirects
- fix error viewing outstanding levies
- Merge branch 'main' into feature/simplify-unitconversion
- Allow exclusion of base subs item check in the Live subs renewals query (#1594)
- Merge branch 'main' into feature/simplify-unitconversion
- Merge branch 'main' into feature/DG-8242-live-subs-renewals
- Ensure if subs payment is retried, we retry at the original amount. (#1597)
- Fix nullables, simplified some of the overloads
- Merge branch 'main' into feature/DG-8244-iGolf-Subs-Increase-Investigate-Renewals-Using-Original-Amount
- Ensure if subs payment is retried, we retry at the original amount. (If the subs are has changed between retries)
- Scotland: Add production SNS ARNs for iOS and Android push notifications to work (#1595)
- Merge remote-tracking branch 'origin/main' into feature/simplify-unitconversion
- Simplify unit conversion code by converting to metres first
- Scotland: Add production SNS ARNs for iOS and Android push notifications to work
- Merge branch 'main' into feature/DG-8242-live-subs-renewals
- Allow exclusion of base subs item check in the Live subs renewals query
- Add `skip-changelog` label to pull requests not targeting main (#1593)
- Add `skip-changelog` label to PRs not targeting main (#1592)
- Add `skip-changelog` label to PRs not targeting main
- Admin page - UI for video block gallery control. (#1586)
- Merge branch 'main' into features/DG-8175b
- Rename 4455 CWControl - New Admin control for Video Block Gallery.sql to 4460 CWControl - New Admin control for Video Block Gallery.sql
- Rename 4454 CWControlProperty Property updates for Video Block Gallery.sql to 4459 CWControlProperty Property updates for Video Block Gallery.sql
- Fix not implemented exception in NZ Prod (#1590)
- Fix not implemented exception in NZ Prod
- Decommission Hotfix Workflows (#1589)
- Make end-of-sprint workflow create Pre-Release instead of draft (#1588)
- Make end-of-sprint workflow create Pre-Release instead of draft
- Add new scotland website domains for go live (#1587)
- New scotland website domains for go live
- Admin - UI for video block gallery control.
- DG-8232: tournament registration (#1584)
- Merge branch 'main' into DG-8232-tournament-registration
- Replace hardcoded dollar signs
- Select the corresponding country by default
- SG tournament registration style update
- Tournament registration email stylesheet
- Delete Other/PackageVersionChecker directory (#1573)
- Merge branch 'main' into norwd-patch-1
- Delete Other/SqlTraceToElastic directory (#1574)
- Merge branch 'main' into norwd-patch-2
- Delete Other/StatsDPerfMon directory (#1575)
- Merge branch 'main' into norwd-patch-3
- Delete Other/WCREVReplacer directory (#1576)
- Merge branch 'main' into norwd-patch-4
- Delete Other/TrackerLogToElastic directory (#1577)
- Merge branch 'main' into norwd-patch-5
- Delete Other/MetricMonitor directory (#1578)
- Merge branch 'main' into norwd-patch-6
- Delete Other/DotGolf.DrawCardPrinter/Trunk directory (#1579)
- Merge branch 'main' into norwd-patch-7
- EG Casual Golfers can create scorecards now (#1583)
- Merge branch 'main' into feature/DG-8111-EG-casual-golfers-scores-invalid-for-handicapping
- Merge branch 'main' into norwd-patch-7
- Delete Other/AssemblyInfoGenerator directory (#1581)
- Merge branch 'main' into feature/DG-8111-EG-casual-golfers-scores-invalid-for-handicapping
- Merge branch 'main' into norwd-patch-8
- Delete Other/AWSPrep directory (#1582)
- EG Casual Golfers can create scorecards now
- Delete Other/AWSPrep directory
- Disable deletion of team if it's already been scheduled on Interclub Tournament (#1580)
- Merge branch 'main' into hotfix/interclub-teams-showing-zero-scores
- disable deletion of team if it's already been scheduled on Interclub Tournament
- Delete Other/AssemblyInfoGenerator directory
- Delete Other/DotGolf.DrawCardPrinter/Trunk directory
- Delete Other/MetricMonitor directory
- Delete Other/TrackerLogToElastic directory
- Delete Other/WCREVReplacer directory
- Delete Other/StatsDPerfMon directory
- Delete Other/SqlTraceToElastic directory
- Return data (if any) for non-production environments so we can continue testing event registrations in the app (#1572)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Delete Other/PackageVersionChecker directory
- Ensure Nunit test setup can handle casual golfers from member table (#1571)
- Mod: API: events/eligible-competitions endpoint - Return data (if any) for non-production environments so we can continue testing event registrations in the app.
- Merge branch 'main' into feature/DG-8111-EG-casual-golfers-scores-invalid-for-handicapping
- Delete Other/BuildTimeZoneData directory (#1570)
- Rename 4456 rename constraint on score table.sql to 4457 rename constraint on score table.sql
- Rename 4457 Alter view ClubMember.sql to 4458 Alter view ClubMember.sql
- Merge branch 'main' into norwd-patch-1
- Delete Other/DevPCBuildScript directory (#1569)
- Ensure Nunit test setup can handle casual golfers from member table
- Delete Other/BuildTimeZoneData directory
- Delete Other/DevPCBuildScript directory
- Add script to prevent gap in the numbering sequence (#1567)
- Merge branch 'main' into fix/gap-in-sql-script
- Reveal venue image (#1565)
- Merge branch 'main' into fix/gap-in-sql-script
- Merge branch 'main' into fix/reveal-tournament-venue-image
- DG-8232: Tournament registration form changes (#1566)
- Add script to prevent gap in the numbering sequence
- Rephrase field label
- Merge branch 'main' into fix/reveal-tournament-venue-image
- Reveal venue image
- Code tidy up
- Handicap index - handle empty string
- Copy shared contents so Adweb knockout works again (#1564)
- Merge branch 'main' into fix/adweb-shared-copy-ts-js-files
- DG-8232: tournament registration form changes (#1563)
- Align whitespace so properties are all parallel
- Remove extra whitespace
- Copy shared contents so Adweb knockout works again
- Merge branch 'main' into feature/DG-8232-registration-form-changes
- Update the sql file number
- Tournament registration guest fields
- Hide Stripe settings for countries that don't use Stripe (#1562)
- Merge branch 'main' into fix/hide-stripe-for-non-stripe-countries
- Add Features.IsEnabled that operates only for ool features
- CSS change to highlight Tournament Registration tick T&Cs (#1561)
- Merge branch 'main' into feature/css-change-to-highlight-required-t&cs
- Hide Stripe settings if we have the `EnableSlicer` feature
- Add `feature` attribute so we can filter settings by config profile feature flags
- Refactor settings permissions so there is only one permission function to maintain
- Allow looking up config profile features by name
- Fix stale review dismissal (#1560)
- Merge branch 'main' into feature/css-change-to-highlight-required-t&cs
- change css selector
- CSS change to highlight Tournament Registration tick T&Cs
- Fix stale review dismissal
- Creating scores supports new @ForceIneligibleForHandicappingReason parameter (#1550)
- Rename 4454 api_AddScore.sql to 4455 api_AddScore.sql
- Merge branch 'main' into feature/DG-8111-EG-casual-golfers-scores-invalid-for-handicapping
- Added a Scotland Club Website domains for go live (#1559)
- Added a Scotland Club Website domains for go live
- Added a control property to the Registration control
- Other Membership Number
- Birthday picker CSS fix
- Stop results tests throwing ORNS because of handicap allowances (#1558)
- Merge branch 'main' into hotfix/results
- stop results tests throwing ORNS because of handicap allowances
- Improve RecalculatePlayerSegmentEntries performance (#1557)
- Add control property to hide / show the PGA membership fields
- Improve RecalculatePlayerSegmentEntries performance stop locking temp DB with "select into" clauses, add index to help CalculateCompetitionRoundSegmentForPlayer be less slow for large comps remove redundant CalculateCompetitionRoundSegmentForPlayer call
- Tournament registration: replace Residency Status options
- Org Tournament Registration: Residency Status options
- DG-8223: SG tournament payment fixes (#1551)
- Merge branch 'main' into hotfix/DG-8223-sg-tournament-payment
- Fix compile error introduced in fed2d43 (#1556)
- Fix compile error introduced in fed2d43
- Remove stage branch from release archive (#1555)
- Merge branch 'main' into github/decommission-stage-branch
- Backmerge stage to main (#1554)
- Merge branch 'main' into release/stage
- Remove stage branch from release archive
- Delete Other/WypRevisionUpdater directory (#1529)
- Merge branch 'main' into github/move-wyp-revision-updater-to-separate-repo
- Release Main to Stage (#1553)
- Fix deploy loop end brace - app pool was being recycled a lot (#1552)
- Fix deploy loop end brace; it was doing a lot of stuff a lot more times than necessary
- Merge branch 'main' into feature/DG-8111-EG-casual-golfers-scores-invalid-for-handicapping
- Merge branch 'main' into hotfix/DG-8223-sg-tournament-payment
- Get the Email address from session.CustomerDetails.Email
- ConnectAsAssociation
- api_addscore supports new @ForceIneligibleForHandicappingReason parameter
- Refactor Numeric String Comparison (#1541)
- Merge branch 'main' into hotfix/fix-the-use-of-NumberAndStringComparer
- Fix a bug where a tee booking is not finalised after the user chooses to pay with the existing card option (See #1547) (#1549)
- Teebooking: Fix bug where booking is not finalised after user choose pay with existing card option.
- Casual golfer creation in ENG works again, fixed tests (#1546)
- Merge branch 'main' into hotfix/eg-casual-golf-creation
- Fix casual golf tests again after i deleted too much code
- Fix errors caused by association not having a logo image (#1545)
- Merge branch 'main' into hotfix/eg-oom
- Merge branch 'main' into hotfix/fix-the-use-of-NumberAndStringComparer
- Fix null bug in SemiNumericComparer (not really a bug, but behaves differently to old code).  Simplified comparer code.
- Ensure comp vs general scores report doesn't error when no rows returned (#1544)
- Add unit tests for SemiNumericComparer
- Ensure comp vs general scores report doesn't error when no rows returned
- Fix errors caused by association not having a logo image
- Speed up incremental Core builds (#1543)
- Merge branch 'main' into fix/build-speed
- Fix tabs
- Speed up incremental builds by fixing typo in ISVAPI swagger path.  Also delete .g.cs files when rebuilding because NSwag doesn't touch file times if there are no changes.
- Portrait aspect-ratio for modal and iframe implementations. (#1542)
- Portrait aspect-ratio for modal and iframe implementations.
- Set to empty string if Contest Name is null
- Use a different comparer to avoid possible deadlock
- Display Stripe badge for Scotland
- Remove uneeded join in prev GetMemberCompetitions commit  (#1540)
- uneeded join in prev commit
- Added the Stripe badge (image file) to the project
- Hotfix member competions sql (#1539)
- Hotfix member competions sql
- Revert prev redis mod (#1538)
- Revert prev redis mod
- Rename CSS class name
- Attempt to stop redis bleeding 2023/01/23 3:22pm (#1537)
- Attempt to stop redis bleeding 2023/01/23 3:22pm
- Casual golfer creation in ENG works again, fixed tests
- Replace hardcoded currency symbol
- EG Casual Golfers' scores invalid for handicapping (#1536)
- Add trailing comma to England Features
- update Pocos to latest verson
- Ensure EG casual golf scores are not valid for handicapping
- Add column to score table for ineligible for handicapping reason
- Prefer explicit member names in anonymous objects (#1535)
- Prefer explicit member names in anonymous objects
- Add the ability to turn on/off comp registrations via the app on a club level (#1532)
- API: Set clubId-HasTBP cache to expire in a minute.
- API: Mod after code reviews. Return an empty list if the current user does not have active club memberships.
- Add Scotland Club Website domain (#1530)
- Add Scotland Club Website domain
- API: Add the ability to turn on/off comp registrations via the app on a club level. False by default. API: MobileAppEventsManager - Remove Old_RegistrationApplyChanges and Old_RegistrationApplyChangesConfirm
- Delete Other/WypRevisionUpdater directory
- Add Scotland Club Websites domains for Go live (#1526)
- Fix GI levy invoice numbers (#1527)
- Fix GI levy invoice numbers
- Add Scotland Club Websites domains for Go live
- Org course name page update for Scottish Golf - Leven Links (#1525)
- Allow union to Save a club's details even if existing courses have bad names. Ran into an issue in SCT with Leven Links golf course which doesn't have it's own club, but is played by Leven Golfing Society and Leven Thistle, neither of which want to see the other's name on their scoring records. So I've manually updated the course name in debugmode to Leven Links. But we don't want this to prevent unions saving this page in future.
- levy invoice report update
- Correct GI Levies numbers (#1524)
- Ensure levy numbers exclude people who are resigned this snapshot and resigned last snapshot
- resolve sql error in GI levies report
- Fix GI levies - were not including people who used to members last snapshot but have resigned this snapshot (#1523)
- Fix GI levies - were not including people who used to members last snapshot but have resigned this snapshot
- CentralMemberCode should always be from our union if possible (#1522)
- Ensure draw sheet generation works in SCT when comp has divisions (#1507)
- Ensure UnionAPI tests don't hit the live test interop direction URL
- CentralMemberCode should always be from our union, unless person is not a member in our union
- DG-8213: my account fixes (#1520)
- Merge branch 'main' into hotfix/DG-8213-my-account
- If there are existing instalments for the invoice, make the Instalment Schedule link work
- Video portrait ratio tested, and mobile viewport tested. (#1519)
- Merge branch 'main' into features/DG-8103b
- Remove extra whitespace
- Video portrait ratio tested, and mobile viewport tested.
- Replaced hardcoded single Schedule ID
- Fix typo error
- Fix: don't need to get the credit card transaction fee value from the hidden field; use TransactionFeeCreditCard
- Fix incorrect centralmembercodes from overseas people who've joined us
- DG-8211: If Slicer is disabled we do not add any transaction fee (#1518)
- If Slicer is disabled we do not add any transaction fee
- Delete Other/SqlBackupUtility directory (#1517)
- Delete Other/SqlBackupUtility directory
- Speed up sql checks by cancelling previous runs for the same PR (#1516)
- Update name to be whitespace safe and readable
- Speed up sql checks by cancelling previous runs for the same PR
- Avoid byte order mark problems on cs/csproj files (#1514)
- Avoid byte order mark problems on cs/csproj files
- Remove www for as they are not pointed to DG yet (#1512)
- Merge branch 'main' into fix/remove-www-domains-for-scotland-cw
- Ensure org dashboard club select excludes Scottish clubs (#1513)
- Merge branch 'main' into hotfix/clubs-select-org
- Ensure org dashboard club select excludes Scottish clubs
- Unhardcode members widget SecondaryNzgaCategoryId (#1511)
- Remove www for as they are not pointed to DG yet
- Merge branch 'main' into hotfix/membership-stats-widget
- Unhardcode members widget secondarynzgacategoryid
- Add rule suggesting fix to IDE2002 (#1510)
- Add rule suggesting fix to IDE2002
- Fix sql syntax error
- DG-8094 Add/update Stripe billing card confirmation message (#1508)
- Show a confirmation message after adding a Stripe billing card
- Ensure draw sheet generation works in SCT when comp has divisions (old wa_GetMemberHandicapIndex method doesn't work with WHS)
- DG-8161: My Account - instalment amount (#1439)
- Merge branch 'main' into feature/DG-8161-subs-instalment-payment
- Fix type and not saving Competition Setup due to null SocialFeedKeyword (#1436)
- Merge branch 'main' into hotfix/typo-and-competition-setup-not-saving
- My Account - Instalment Amount
- Remove scotland CW domain not yet point to DG (#1437)
- Merge branch 'main' into hotfix/typo-and-competition-setup-not-saving
- Remove scotland CW domain not yet point to DG
- Fix type and not saving Competition Setup due to null SocialFeedKeyword
- API: Mod: Provide the booked time slot if a player has a teebooking at the club (#1434)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- API: Mod: Provide the booked time slot information if a player has a teebooking at the club.
- Remove CODEOWNERS rule for WHSAPI (#1432)
- Merge branch 'main' into github/remove-unneeded-rules-for-whsapi
- Remove CODEOWNERS rule for WHSAPI
- Go live with a number of Scotland club websites (#1431)
- Payment schedule radio button styling improvements
- Merge branch 'main' into feature/scotland-club-websites-go-live
- Go live with Scotland Club Websites juniortourscotland.com, leventhistlegc.co.uk, bassrockgolfclub.co.uk, stboswellsgolfclub.co.uk, linlithgowgolf.co.uk, lanarkshiregolf.com
- Specify which repository to create labels in (#1430)
- Specify which repository to create labels in
- Set GH_TOKEN globally (#1429)
- Set GH_TOKEN globally
- Fix messy json redirection (#1428)
- Fix messy json redirection
- Label pull requests with jira cards from branch name (#1427)
- Fix mistaken correction: if no label matching a name exists we want to created it then, not when it does exist
- Fix incorrect check for existing labels
- Create and apply jira card labels from branch
- Update labeler.yml
- Remove debugger from JS (#1425)
- Merge branch 'main' into marcus-equals-coffee-patch-1
- Ensure subs renewals reminder email checks deleted dates of items (#1424)
- Update Default.aspx
- Merge branch 'main' into hotfix/subs-renewal-reminder-email
- Prevent POS comp select erroring after date fixes for SCT (#1423)
- Ensure subs renewals reminder email checks deleted dates of items
- My Account - instalment amount
- Prevent POS comp select erroring after date fixes for SCT
- Fix: Fix SQL connection leak because of a missing "using" statement (#1421)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: Fix SQL connection leak because of a missing "using" statement.
- API: Fix /eligible-competitions endpoint to only return competitions that the logged in user is registered to for that day (#1419)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- API: Fix get eligible rounds - the endpoint should only return competitions that the logged in user is registered to for that day.
- Regenerate the WHS client (#1418)
- regen WHS client
- Fix typo in hotfix workflow error message (#1417)
- Fix typo in hotfix workflow error message
- Update WHSAPI Swagger Definition (#1416)
- Merge branch 'main' into hotfix/update-whsapi-swaggerfile-0f21b0481c793ba980b72cacfba57ca1920f3886-8-1
- Fix typo in hotfix workflow error message (#1415)
- Regenerate whsapi swaggerfile
- Fix typo in hotfix workflow error message
- Scotland: Enabled events in the mobile app for the production environment (#1413)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- ClubCMS: Add redirect links for the Scottish Golf app.
- Scotland: Enable events in the mobile app for all environments. Before it was turned on for dev and staging environments.
- Fix ORNS in xero subs sync (#1411)
- Merge branch 'main' into hotfix/xero-subs-sync
- Fix ORNS in xero subs sync
- Hotfix 429s due to xero subs sync (#1410)
- Hotfix 429s due to xero subs sync
- Fix sql syntax error in scheduled task (#1408)
- Merge branch 'main' into hotfix/send-welcome-emails
- Correct SCT dev API url in configprofile (#1407)
- Fix sql syntax error in scheduled task
- Correct SCT dev API url in configprofile
- Hotfix/dg 8186 deleted clubs and courses showing in reports (#1406)
- Merge branch 'main' into hotfix/DG-8186-deleted-clubs-and-courses-showing-in-reports
- FIX: Clubhouse: Create Club - Cancel button redirect fix. (#1405)
- FIX: Clubhouse: Course dropdown showing deleted clubs
- FIX: Clubhouse: MemberCounts.ByClub showing deleted clubs
- FIX: Clubhouse: Cancel button redirect fix.
- FIX: SQL Syntax error member search. (#1403)
- FIX: SQL Syntax error member search.
- Fix sql syntax error caused by #1387 DG-8184 (#1402)
- FIX: DG-8184: Revert code.
- Live: Add refund logic for when a player (who register via the app) is removed from the competition (#1401)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Mod: Live: Add refund logic for when a player (who register via the app) is removed from the competition.
- Add new video control for "Get Into Golf" GolfNZ page (#1399)
- Rename 4450 CWControlProperty New properties for Video Block Gallery.sql to 4451 CWControlProperty New properties for Video Block Gallery.sql
- Rename 4449 CWControl - New Video Block Gallery control.sql to 4450 CWControl - New Video Block Gallery control.sql
- Initial commits.
- Release Main to Stage (#1396)
- Allow debugging of aws ssm command in jenkins log (#1395)
- Allow debugging of aws ssm command in jenkins log
- API: Fix SQL syntax error in the "WHERE IN" clause - parenthesis not required.
- Filter by ClubId when inserting levy movements (#1375)
- Merge branch 'main' into fix/correct-levy-snapshot-selection-bug
- Handle failed rebill transactions with Stripe (#1383)
- Merge branch 'main' into feature/sg-stripe-failed-rebill
- Update subs renewals unit tests
- Fix: replace subAutoRenewalRetryId with renewalCategoryId
- Add business logic around refunds and mandatory competition cancellations (#1392)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix/hardcoded membercode length label (#1391)
- Merge branch 'main' into fix/hardcoded-membercode-length-label
- Fix hardcoded member code length
- Merge changes from main
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- API: Mod: Get event detail: Add AutoEntry flag - set to true if it's a mandatory competition.
- Fixed igolf voucher purchases throwing errors (#1386)
- Merge branch 'main' into hotfix/igolfvoucher-error
- Increase recent bulkemails list to 30 and improve perf (#1389)
- Merge branch 'main' into hotfix/ireland-bulkemail-recent
- Increase recent bulkemails list to 30 and improve perf
- Ensure scottish clubs don't show up in Org Update Club page (#1387)
- Mod: API: Refunds are now processed per registration entry. Previously, we could not refund only a portion of that total amount if one of the players in the registration batch is cancelled.
- Ensure scottish clubs don't show up in Org Update Club page
- Merge branch 'main' into hotfix/igolfvoucher-error
- Fixed igolf voucher purchases throwing errors
- Merge branch 'main' into feature/sg-stripe-failed-rebill
- Show better error when saving subs instalments missing a due date (#1376)
- Merge branch 'main' into hotfix/subs-create-schedule-error
- Allow DotGolf OTP to work more stably with nzg logins (#1373)
- Merge branch 'main' into hotfix/sso-otp-not-working-for-nzg-users
- Fix a bunch of old Newtonsoft redirects (#1385)
- Merge branch 'main' into fix/newtonsoft-assembly-redirects
- Fix a bunch of old Newtonsoft redirects
- Fix the manager name source (#1384)
- Merge branch 'main' into fix/change-manager-name-in-club-detail-page
- Fix the manager name source
- Fix source of email address in Club site's footer (#1382)
- Fix to remove the 4th post address
- Fix source of email address in Club site's footer
- Update Analytics Newtonsoft reference to avoid build error (#1381)
- Merge branch 'main' into fix/analytics/correct-newtonsoft-binding-version
- Update Analytics Newtonsoft reference to avoid build error.
- Change to Config instead of Club Products (#1378)
- Merge branch 'main' into fix/interclub-changes-for-club-users
- Facility other recommendations section script filter changes. (#1380)
- Revert accidental user properties change
- Facility filter script changes.
- Facility other recommendations section script filter changes.
- MOD: Clubhouse: DG-8064: Report enhancements to include total scores … (#1379)
- MOD: Clubhouse: DG-8064: Report enhancements to include total scores + name changes.
- Handling of failed renewal
- Rename DPSBillingId to PaymentProviderBillingId
- Rename variable
- Change to Config instead of Club Products
- Merge branch 'main' into hotfix/subs-create-schedule-error
- Fix subs instalment text for calculated due dates to match old text
- Hide Setup, Delete Comp and Reports tab for Club users (#1377)
- Hide Setup, Delete Comp and Reports tab for Club users
- Show better error when saving subs instalments missing a due date and allow deleting un-saved schedules. Default 'due' method for new subs instalment to Calculated (more appropriate for cyclical billing, which is SCT default)
- Handle failed Stripe rebill (house account)
- Handle failed Stripe rebill transaction
- Filter by ClubId when inserting levy movements + reformatted script.
- Sync xero payments since 2019 line-in-sand (will not hit rate limit) (#1374)
- Sync xero payments since 2019 line-in-sand (will not hit rate limit)
- Update DotGolf.SSO/DotGolf.SSO/SSO.cs
- Import prepayment/overpayment refunds in Xero subs sync (#1372)
- Simplify loop conditional
- Add braces to `if` statements
- Merge branch 'feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG' of https://github.com/dotgolf/DotGolf.Trunk into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- No longer use while(true) in GetPaymentsModifiedSince, todos for others
- Allow DotGolf otp to work more stably with nzg logins
- Merge branch 'main' into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- Import prepayment/overpayment refunds in Xero subs sync #54238
- Fix Ages Subscriptions report to handle credit note refund payments (#1367)
- Merge branch 'main' into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- Make the club weather icon smaller (#1366)
- Merge branch 'main' into fix/adjust-weather-icon-image
- Feature: Speed up ClubCMS page rendering by bulk querying page control settings (#1363)
- Merge branch 'main' into feature/speed-up-clubcms-page-rendering
- Breakdown sprint.yml workflow into distinct components (#1371)
- Merge branch 'main' into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- Delete sprint.yml
- Create release.yml
- Update workflow name to be more terse
- Create draft-release.yml
- Merge branch 'main' into feature/speed-up-clubcms-page-rendering
- Correct typos in CONTRIBUTING.md + suggest removing `git switch` (#1369)
- Merge branch 'main' into feature/speed-up-clubcms-page-rendering
- Merge branch 'main' into documentation/add-commit-and-pull-request-title-conventions-to-contribution-document
- Update .github/CONTRIBUTING.md
- Bug fixes and improvements - comp registrations via the app (#1370)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: Scorecards business logic - Convert DateTime.Now to DBTime before using that value in the SQL statement.
- Fix: API: Get eligible competition rounds to return one record per competition. Fix: API: Load all competitions that the user is registered in for the current day. Fix: API: Add PreRegistered flag - set to true when the user has registered online for a comp.
- Typos corrected
- We don't use git switch do we?  Also typos corrected.
- Add commit and pull request title conventions to contribution document (#1365)
- Merge branch 'main' into documentation/add-commit-and-pull-request-title-conventions-to-contribution-document
- Fix: Windcave Shop Dev credentials (#1368)
- Merge branch 'main' into hotfix/windcave-cred
- Fix: Windcave credentials
- Bug fixes and improvements around competition registrations via the app (#1362)
- Remove commented sql
- Merge remote-tracking branch 'origin/main' into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- Aged subs report now handles credit note refunds
- make the icon smaller
- Merge branch 'main' into documentation/add-commit-and-pull-request-title-conventions-to-contribution-document
- Fix misspelled words
- Move footnote back to the commit section
- Move PR guidelines above commit guidelines
- Restructure markdown to list all reference links in one place
- Remove extra whitespace
- Add guidelines on PR titles and descriptions
- Add an example multiline commit message
- Add guidelines on multiline commit messages
- Add convention on commit message length
- Add examples of bad commit messages
- Add examples of good commit messages
- Add simple commit message conventions
- Add instructions for setting up NuGet package source
- Add steps to get started by cloning and branching
- Add introductory blurb to contribution guidelines
- Avoid SQL queries within `foreach` loops, should give us better page rendering performance.
- Delete pr-title.yml
- Remove duplicate documentation of induction manual
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Fix: API: Tee time select option in the app is now driven by CanEditTimeSlot flag. Fix: API: Add ability to link an existing tee time to a new registration. Fix: API: Registration now works for competition with $0 comp fee.
- Backmerge Stage to Main (#1361)
- Merge branch 'main' into release/stage
- Require signoff from the infrastructure team on CI/CD changes (#1360)
- Merge branch 'main' into github/require-signoff-from-the-infrastructure-team-on-CICD-changes
- Rewrite hotfix workflow to cherry-pick directly to target prod branch (#1359)
- Release Main to Stage (#1356)
- Require signoff from the infrastructure team on CI/CD changes
- Merge branch 'main' into github/make-hotfixes-cherry-pick-directly-to-target-prod-branch
- Rewrite hotfix workflow to cherry-pick directly to target prod branch
- Add gourockgolfclub.com to the bindings for Scotland. (#1357)
- Merge branch 'main' into feature/enable-gourock-gc-website
- Add gourockgolfclub.com to the bindings for Scotland.
- Merge branch 'main' into github/enforce-pr-title-format
- FIX: Clubhouse: DG-8310: Fix to enable creation of clubs without fall… (#1352)
- FIX: Clubhouse: DG-8310: Fix to enable creation of clubs without fall… (#1352)
- FIX: Clubhouse: DG-8310: Fix to enable creation of clubs without falling over.
- Feature/DG-7961: Remove hard coded NZ in texts to be dynamic (#1108)
- Merge branch 'main' into feature/DG-7961_SCT_Live_mod
- Refactor: culled asynchelper from xero subs sync, style changes (#1350)
- Merge branch 'main' into feature/DG-8089-Applying-Cash-Refund-lines-to-Over-Prepayments-Credit-Notes-syncing-back-to-DG
- Refactor: culled asynchelper from xero subs sync, style changes
- update xero api yaml to generate new client (no breaking changes) (#1349)
- update xero api yaml to generate new client (no breaking changes)
- Fix references to New Zealand Golf in welcome emails (#1348)
- Merge branch 'main' into hotfix/welcome-email
- Copy dga_SendDailyNewMemberWelcomeEmails into c#
- Fix topup 5% bug by getting rid of DUPLICATED BUGGY CODE (#1347)
- Merge branch 'main' into fix/scotland/account-topups
- Braces @davidhusselmann, braces
- Remove empty line
- fix references to New Zealand Golf
- Remove whitespace to avoid @norwd yelling
- Code style improvements
- Remove redundant casts.
- Merged a copied/pasted code path into a single method.
- Require admin approval for changes to editorconfigs (#1346)
- Merge branch 'main' into norwd-patch-2
- Add XMLDoc Roslynator suggestions (#1345)
- Require admin approval for changes to editorconfigs
- Add XMLDoc Roslynator suggestions
- Move GetMonthlyAXAccountTransactionDates to shared AXAccount class for reuse.
- Move InsertTBTransactionAccountTopup and UpdateTBTransactionAccountTopup methods into new core TBTransactions business logic for reuse.
- Allow standalone "Fix" prefix
- Allow "Bugfix" and "Fix" in addition to "Hotfix"
- Add "Task" to allowed prefixes
- Fix tournament details bug where content is the same for all (#1343)
- Merge branch 'main' into fix/tournament-details-page-for-scotland
- fix tournament details page bug wherein content is the same for all
- Remove reference to DPS since we support multiple gateways now.
- Clean up property names (should always start with a capital)
- SIC no longer sends JS date to server when getting comps (#1340)
- Merge branch 'main' into hotfix/DG-8037-one-less-timezone-problem
- Fix SignalR appeared to not work in SCT due to NZ browser date (#1339)
- Merge branch 'main' into hotfix/sct-timezone-problems
- SIC no longer sends JS date to server when gettting comps because it gets interpreted as local (i.e. NZ) time, which is confusing when you are using SCT Clubhouse
- Fix SignalR appeared to not work in SCT due to NZ browser date when printing scorecards from SCA DG-8037
- Don't charge extra transaction fees when using Stripe (#1337)
- Merge branch 'main' into fix/scotland/account-topups
- change size of banner ads for england golf (#1336)
- change size of banner ads for england golf
- EN/WA/IE/SCT want to allow member transfers between all 4 (#1332)
- EN/WA/IE/SCT want to allow member transfers between all 4 (#1332)
- Matt has been told EN/WA/IE/SCT want to allow member transfers
- Don't include releases in the changelog, it is misleading (#1330)
- Merge branch 'main' into norwd-patch-1
- Fix misleading pipeline stage name (#1331)
- Fix misleading pipeline stage name
- Don't include releases in the changelog, it is misleading
- Fix timezone issue - competitions not displaying on the correct date (TB) (#1325)
- Merge branch 'main' into hotfix/DG-8037-add-debugger-to-js-file-to-allow-debugging-on-dev
- Fix? date being passed to GetCompetitionsForMemberAndDate time component removed to avoid UTC conversion issues.
- Refactor subs renewal reminder sql for easier reading (#1322)
- Merge branch 'main' into hotfix/subs-renewal-reminders
- Merge branch 'main' into hotfix/DG-8037-add-debugger-to-js-file-to-allow-debugging-on-dev
- FIX: DG-8098: DotGolf.Clubhouse: Fix page loads & Timeouts. (#1324)
- FIX: DG-8098: DotGolf.Clubhouse: Fix page loads & Timeouts.
- Use random txnref values when testing otherwise Windcave complains (#1323)
- Use random txnref values when testing otherwise Windcave complains
- Subs renewal reminder sql refactor for easier reading
- Fix: Scotland: Set database timezone to NZST when running in Development because currently, SCTDEV1 DB is in NZST timezone. (#1313)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: Scotland: Set database timezone to NZST when running in Development because currently, SCTDEV1 DB is in NZST timezone.
- Voucher signups now get processed in subs renewals (#1312)
- Merge branch 'main' into hotfix/eg-subs-renewal-for-voucher
- Voucher signups now get processed in subs renewals
- Add temporary debugger
- Make headings lowercase to save my eardrums (#1311)
- Make headings lowercase to save my eardrums
- Revert "Temporarily disable explicit checkout on jenkins" (#1309)
- Merge branch 'main' into revert-1308-hotfix/test-implicit-checkout-on-jenkins
- Cleanup: Remove empty line (#1310)
- Remove empty line
- Revert "Temporarily disable explicit checkout on jenkins"
- Temporarily disable explicit checkout on jenkins (#1308)
- Temporarily disable explicit checkout on jenkins
- Big map & facility banner fixes . (#1304)
- Merge branch 'main' into features/DG-7837f
- Fix mailer handle smtp client morbidity (#1302)
- Merge branch 'main' into features/DG-7837f
- Merge branch 'main' into fix/mailer-handle-smtp-client-morbidity
- Big map & facility banner fixes .
- Fix Pennants Competition Setup - Conferences not saving (#1301)
- Merge branch 'main' into fix/pennants-conferences-not-saving
- Feature/FG-8075: Add SCT Dev Bulk Email binding (#1303)
- Merge branch 'main' into fix/pennants-conferences-not-saving
- Use Pool<T> to reuse SMTPClients.
- Add: Pool<T> for pooling of reusable objects.
- SCT Dev Bulk Email binding
- Make SMTP client timeouts temporary failures (so they'll be retried)
- Add diagnostic to vortex
- Fix levies display to handle new non-nullable IsNonPlaying flag (#1300)
- Fix Pennants Competition Setup - Conferences not saving
- Fix levies display to handle new non-nullable IsNonPlaying flag on nzgacategory
- Fix member searches in GBI for Scottish members (#1293)
- Merge branch 'main' into hotfix/searching-for-sct-people
- Course Handicap label (#1292)
- Merge branch 'main' into hotfix/searching-for-sct-people
- Fix member searches in GBI for Scottish members
- Merge branch 'main' into hotfix/DG-8070-course-info
- Course Handicap label
- Merge branch 'main' into feature/DG-8037-competition-appearing-on-the-wrong-dates-in-scorecard-admin-and-tee-booking
- Hotfix/DG-8066: member score count report fix (#1291)
- Merge branch 'main' into hotfix/DG-8066-Member-Score-Count-Report-Fix
- DG-8066: Implemented PR code changes.
- Add braces to `if` statement
- Bump DotGolf.ResultsEngine.Common.Model from 1.1.1 to 1.1.2 in /DotGolf.API/DotGolf.API.Tests (#1289)
- Merge branch 'main' into dependabot/nuget/DotGolf.API/DotGolf.API.Tests/DotGolf.ResultsEngine.Common.Model-1.1.2
- Bump DotGolf.ResultsEngine.Common.Model from 1.1.1 to 1.1.2 in /DotGolf.API/DotGolf.API (#1290)
- Bloody Autoformatter deciding to add whitespaces.... Urgh.
- DG-8066: DG-8065: DotGolf.Clubhouse: Pretty much a rewrite of how the report works
- Bump DotGolf.ResultsEngine.Common.Model in /DotGolf.API/DotGolf.API
- Bump DotGolf.ResultsEngine.Common.Model
- Merge branch 'main' into feature/DG-7961_SCT_Live_mod
- Fix outdated link in TabMember.aspx
- Fix: API: Date is already in UTC, no need to perform another date time conversion. (#1288)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: API: Date is already in UTC, no need to perform another date time conversion.
- Draw card printer no longer crashes on null ComputerNo ppl (#1281)
- Merge branch 'main' into hotfix/draw-card-printer-computerno-woes
- Update Shared/sql/4446 live_dcr_GetCardsToPrintForDraw.sql
- Fix: API: Unit tests -Updated ShouldReturnClubEvents test case after SearchClubEvents business logic change (#1287)
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Fix: API: Unit tests -Updated ShouldReturnClubEvents test case after SearchClubEvents business logic change. When looking up for Open competitions, this is still searching for competitions within my club that is open for visitors to register.
- Header / Footer UIx fixes , and more. (#1284)
- Merge branch 'main' into features/DG-7837e
- API: Ability to register to multiple competitions in the app - bug fixes and enhancements. (#1280)
- Remove empty line
- Remove empty line
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Merge branch 'main' into hotfix/draw-card-printer-computerno-woes
- Fix formatting
- Removed white space
- Header / Footer UIx fixes , and more.
- Mod: API: Part 2 - Add braces to If statements even if it's only a single line.
- Subs Voucher report downloads no longer error (#1282)
- Add braces to If statements even if it's only a single line.
- Remove empty line
- Remove trailing whitespace
- Subs Voucher report downloads no longer error
- Draw card printer no longer crashes on null ComputerNo ppl
- Merge changes from main.
- API: Ability to register to multiple competitions in the app - bug fixes and enhancements.
- Fix accordion not showing all content on mobile (#1279)
- Merge branch 'main' into fix/accordion-on-mobile
- Fix accordion not showing all content on mobile
- No longer charge end-users 5% transaction fee if slicer is disabled.
- Improve variable names
- Fix (?) config resolver (#1278)
- Fix (?) config resolver
- Fix compile error introduced in #1259 (#1275)
- Fix compile error introduced in #1259
- Use proper PAT for dismissing reviews
- Replace hardcoded CreatedBySystemCode strings with enum (#1274)
- Merge branch 'main' into hotfix/duplicate-tx-lines
- Fix markdown syntax in comment template
- Feature/add time in registration open close dates competition (#1259)
- Merge branch 'main' into hotfix/duplicate-tx-lines
- Merge branch 'main' into feature/add-time-in-registration-open-close-dates-competition
- Simplify getters
- Replace hardcoded CreatedBySystemCode strings with enum
- Check PR titles when marked ready for review
- Update Shared/DotGolf.Core/ClubCms/Models/TournamentDto.cs
- Update Shared/DotGolf.Shared/Data/Competition.cs
- Use single quotes for scary yaml syntax reasons
- Update Shared/DotGolf.Core/ClubCms/Models/CompetitionDto.cs
- Update Shared/DotGolf.Core/ClubCms/Models/TournamentDto.cs
- Update Shared/DotGolf.Core/ClubCms/Models/CompetitionDto.cs
- Automate creation of ConfigurationProfileResolver.Debug.cs (#1272)
- Removed ConfigurationProfileResolver.Debug.cs since it is no longer in source control.
- ConfigurationProfileResolver.Debug.cs is now automatically created locally (and ignored) which means we don't have to keep dealing with this when committing stuff.
- Hide CW banner upload functionality until we know that no-one is still using it (#1269)
- Merge branch 'main' into fix/competition-setup/remove-cw-banner-upload-functionality
- Show the Registration Options link irrespective of CW product (#1271)
- Show the Registration Options link to everyone regardless of whether they have the CW product or not
- Fix error on navigating back to Competition and the null WebUser HttpContext on ClubCMS
- Make the jira card optional as many tasks don't have cards in Jira
- Create pr-title.yml
- Hide CW banner upload functionality until we know that no-one is still using it
- Feature/DG-8047-sg-openplay-subsrenewals (#1268)
- Merge branch 'main' into feature/sg-openplay-subsrenewals
- Merge branch 'main' into feature/add-time-in-registration-open-close-dates-competition
- Add County field to EG CRM API because they want it for iGolf (#1265)
- Merge branch 'main' into feature/add-member-county-for-eg-crm
- Fix whitespace
- Update DotGolf.ISVAPI/DotGolf.ISVAPI/V2/Controllers/CrmMembersController.cs
- Update DotGolf.ISVAPI/DotGolf.ISVAPI/V2/Controllers/CrmMembersController.cs
- Bump DotGolf.ResultsEngine.Common.Model version to v1.1.2 (#1264)
- Add County field to EG CRM API because they want it for iGolf
- Bump version to v1.1.2
- Fix local path to WHSAPI nswag definition (#1263)
- Fix local path to WHSAPI nswag definition
- Merge branch 'main' into feature/add-time-in-registration-open-close-dates-competition
- Massive changes to implement Time for Registration Open and Close date
- Fix casual golfers not showing in quicksearch in NZ (#1258)
- Fixed casual golfers not showing in quicksearch in NZ
- Update WHSAPI Swagger Definition (#1257)
- Regenerate whsapi swaggerfile
- Subs renewal email sent to generic contact if club has no membership contact (#1253)
- Merge branch 'main' into feature/subs-renewal-email-contact
- Replace hardcoded Schedule ID
- Add TODO to refactor inline sql in the future
- Update Shared/DotGolf.Core/Subscriptions/SubscriptionRenewalProcessor.cs
- Subs renewal email sent to generic contact if club has no membership contact
- Subs Renewal Payment Email HTML Template tidy up
- Code tidy up
- Move whs swagger to core (#1252)
- Merge branch 'main' into hotfix/make-whsapi-not-dead
- Update swagger file path in build step
- Move whs swagger to core
- Delete DotGolf.WHSAPI directory (#1251)
- Delete DotGolf.WHSAPI directory
- Enforce payment confirmation page exists before allowing payment to proceed (#1247)
- Merge branch 'main' into fix/enforce-payment-confirm-page-exists
- Fix IDE0011
- Add setting to turn off online topups for specific account types (#1246)
- Merge branch 'main' into fix/scotland/no-winnings-account-topups
- DG-8058: ClubCMS: Revert voucher code change fix. (#1250)
- Merge branch 'main' into hotfix/DG-8058-revert-voucher-change-fix
- Bump DotGolf.ResultsEngine.Common.Model from 1.1.0 to 1.1.1 in /DotGolf.API/DotGolf.API (#1249)
- Bump DotGolf.ResultsEngine.Common.Model from 1.1.0 to 1.1.1 in /DotGolf.API/DotGolf.API.Tests (#1248)
- Update DotGolf.ClubCMS/DotGolf.ClubCMS/layouts/_responsive/rMyAccount.ascx.cs
- DG-8058: ClubCMS: Revert voucher code change fix.
- Bump DotGolf.ResultsEngine.Common.Model in /DotGolf.API/DotGolf.API
- Bump DotGolf.ResultsEngine.Common.Model
- Enforce payment confirmation page exists before allowing payment to proceed
- Add setting to turn off online topups for specific account types (needed in Scotland for winnings)
- Composite marker select load race condition fixed (#1241)
- Merge branch 'main' into hotfix/comp-setup-divisions-and-markers
- Rebill tokens are now created with customers attached + backwards compatibility (#1239)
- Merge branch 'main' into fix/stripe/bad-tokens-got-created-without-customer-id
- Composite marker select load race condition fixed
- Rename 4442 *.sql to 4443 *.sql (#1240)
- Rename 4442 IX_InterClubMessageAction_ClubReceiverId.sql to 4443 IX_InterClubMessageAction_ClubReceiverId.sql
- Dismiss prior reviews before checking scripts (#1238)
- Merge branch 'norwd-patch-1' of github.com:dotgolf/DotGolf.Trunk into norwd-patch-1
- Rename 4442 IX_InterClubMessageAction_ClubReceiverId_2.sql to 4443 IX_InterClubMessageAction_ClubReceiverId_2.sql
- Bypass branch protection form dismissing reviews
- Merge branch 'main' into fix/stripe/bad-tokens-got-created-without-customer-id
- Set exit code to allow multiple failures
- Rebill tokens are now created with customers attached.  Any past tokens without attached customers are upgraded in-place to make sure we don't hit problems.
- Fix conditional
- Fix conditionals
- Remove bad script file
- Add fake sql script to test workflow
- Dismiss prior reviews before checking scripts
- Optimise sql script review workflow (#1237)
- Prevent PR from waiting on a check that never runs
- Add additional check, only run if added scripts were actually found
- Restore conditional run step
- Remove conditional for testing
- Don't run if there are no additions
- Defer checkout until after added files are parsed
- Add scotland dev API binding. (#1236)
- Merge branch 'main' into fix/scotland/bindings-for-dev-api
- Add scotland dev API binding.
- DG-7542: Add Cookie Preferences to England Golf Website (#643)
- Merge branch 'main' into feature/DG-7542-england-golf-website-cookie-preferences
- Don't reload page, setting will take effect next page load
- Don't use knockout for this
- Simplify controls, just add button to clear cookies in footer
- Fix rendering
- More UIs, facility map fixes, & dropdown menu option fixes. (#1230)
- Merge branch 'main' into feature/DG-7961_SCT_Live_mod
- Merge branch 'main' into DG-7837d
- Update repo name in all references to "Trunk" (#1229)
- Merge branch 'main' into fix/rename-DotGolf.Trunk-to-mono
- Update API endpoints that used to use `Trunk`
- Update links and other references to `Trunk`
- Truncate holiday name if it is too long (#1158)
- Merge branch 'main' into fix/handle-really-really-ridiculously-long-public-holiday-names
- More UIs, facility map fixes, & dropdown menu option fixes.
- Avoid duplicate txlines when online-paid card is printed (#1226)
- Update repo name in all references to "Trunk"
- Merge branch 'main' into hotfix/all-the-teebooking-bubbles-hopefully
- Bump version to v1.1.1 (#1228)
- Bump version to v1.1.1
- Testing new repo name (#1227)
- Testing new repo name
- Avoid duplicate txlines when online-paid card is printed By always passing TimeSlotEntryId into CreateScorecardTransactions if we have it.
- Delete roslynator.yml (#1225)
- Delete roslynator.yml
- Create Roslynator Fix Suggester Workflow (#1223)
- Create roslynator.yml
- Update GI contact page (#1221)
- Merge branch 'main' into hotfix/gi-contact-page
- Update GI contact page
- Feature/adweb clubwebsites (#1217)
- Merge branch 'main' into feature/adweb-clubwebsites
- Levy crashbug + IX_InterClubMessageAction_ClubReceiverId update (#1168)
- Merge branch 'main' into fix/levy-snapshot-crashbug
- Changed interop endpoints for Scotland to DotGolf (#1220)
- Rename 4441 IX_InterClubMessageAction_ClubReceiverId.sql to 4442 IX_InterClubMessageAction_ClubReceiverId.sql
- Update 4441 IX_InterClubMessageAction_ClubReceiverId.sql
- Merge branch 'main' into fix/levy-snapshot-crashbug
- Changed interop endpoints for Scotland to DotGolf
- FIX: ClubCMS: Enable Voucher Code for EG. (#1219)
- FIX: ClubCMS: Enable Voucher Code for EG.
- Feature/safeguarding hide junior contact details (#1218)
- Add unit tests for the IsAgeUnder extension method.
- Login: Fix incorrect error message on wrong password.
- Safeguarding: Hide junior contact details if union has `AlwaysHideJuniorMemberContactDetailsOnWebsites` in config profile.
- Adweb - CW product - list of clubs
- Bug fixes and improvements around competition registrations via the app (#1215)
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Fix: API: Bug fixes around creating a scorecard from an event registration. Fix: API: RSA signature verification failures when user switch back and forth in the payment screen in the app. The master registration Id should be included when generating the signatureText. Mod: Change "OpenPlay" to "Open"
- Make the Enter Now more prominent (#1214)
- Make the Enter Now more prominent
- Fix:  Crash ORNS bug in Course.GetCourseFeesForMemberAndDate when invoked from API code because the WebUser object is always null.
- Feature/DG-8041: Make both Date of Birth and Email required for signup in Scotland (#1212)
- Join and simplify `MembersDOBAndEmailSignupRequirements` switch statements
- Club website member permissions
- Merge branch 'feature/DG-8041-make-email-and-dob-required-fields' of https://github.com/dotgolf/DotGolf.Trunk into feature/DG-8041-make-email-and-dob-required-fields
- Require either email or DOB when editing a member
- SQL tidy up
- Make both Date of Birth and Email required for signup in Scotland
- Revert "Make both Date of Birth and Email required for signup in Scotland"
- Make both Date of Birth and Email required for signup in Scotland
- Added Scottish Golf in the Recipients From partial view (#1211)
- Feature/scotland/enable transition handicap report (#1209)
- Give the Transition Handicap Comparison Report to Scotland so they can compare handicaps between OCS and us.
- Add: `TemporaryPermission` to allow us to expire access to temporary reports.
- Added Scottish Golf in the Recipients From partial view
- Add webhook listener for Stripe account updates (onboarding process). (#1207)
- Removed unused usings.
- CW admin permissions
- Add webhook listener for Stripe account updates (onboarding process).
- added new scotland club website test domains (#1206)
- added new scotland club website test domains
- Merge branch 'main' into feature/DG-8037-competition-appearing-on-the-wrong-dates-in-scorecard-admin-and-tee-booking
- Hotfix/sg css (#1205)
- Feature/dg 8031 member score count report amendments (#1190)
- SG big hero button style fix
- SG short hero CSS fixes
- Update Contest Date and Venue when Round is updated (#1204)
- Fix Contest player names
- Update Contest Date and Venue when Round is updated
- SG content tiles - background image positioning fix
- Change centralmembercode to string and refactor sql query (#1203)
- Change centralmembercode to string and refactor sql query
- Begin DG-8037
- Fix/matchplay fixes (#1198)
- Merge branch 'fix/matchplay-fixes' of https://github.com/dotgolf/DotGolf.Trunk into fix/matchplay-fixes
- Tournament list gender icons (#1189)
- Fix getting Competitions filter
- Do not pro-rata subs if they start in the future (#1163)
- Retrieve open competitions only (#1197)
- Retrieve open competitions only
- Fix erroneous syntax errors (#1196)
- Fix erroneous syntax errors
- Break hotfix workflow down into incremental steps (#1193)
- Fix whitespace (#1194)
- Fix whitespace
- Make commit a link in step summary
- Break hotfix workflow down into incremental steps
- Mod: API: Specify inline ad display duration so the app knows that it needs to rotate ads. (#1191)
- Mod: API: Specify inline ad display duration so the app knows that it needs to rotate ads.
- DG-8031: Pesky comma....
- DG-8031 - Implemented alterations to report to have a static date.
- Use CentralMemberCode in CSV upload for Players in Tournament V2 - Ma… (#1182)
- Fix not able to create competition for both Pennants and Matchplay, also fix Players upload thru CSV with CentralMemberCode and MemberId
- Tournament list gender icons
- Changed to Ellipsis, removed nullable properties, changed xmldoc.
- Add Scottish Golf logo resource to DotGolf.Report (#1187)
- Add Scottish Golf logo resource to DotGolf.Reports.
- Update member active check
- Mod: API: England - updated the link for the inline ads (#1185)
- Mod: API: England - updated the link for the inline ads.
- Fix date format issue (#1184)
- Make the current country to be on the top of the Country Selector list
- Skip checking sql numbers on draft PRs (#1183)
- Skip checking sql numbers on draft PRs
- Fix date format issue
- Use CentralMemberCode in CSV upload for Players in Tournament V2 - Matchplay
- Instead of checking for step success, run comment step separately (#1180)
- Instead of checking for step success, run comment step separately
- Prevent @botgolf from declining release PRs (#1179)
- Prevent @botgolf from declining release PRs
- Only comment that a hotfix has been staged on success (#1178)
- Only comment that a hotfix has been staged on success
- Invert hotfix error reporting conditional (#1175)
- Invert hotfix error reporting conditional
- Added Member Benefits to England Golf Member Menu (#1173)
- Added Member Benefits to England Golf Member Menu
- Ensure that hotfixes exist in main before staging them (#1172)
- Most tourism feedback fixes, through-out pages. (#1171)
- Ensure that hotfixes exist in main before staging them
- Clean up whitespace
- Most tourism feedback fixes, through-out pages.
- Make @botgolf submit a declining review if SQL scripts are unordered (#1089)
- Delete milestone.yml
- Feature/comp registrations via the app (#1169)
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Mod: API: When generating a scorecard from the app, it should indicate "API" as the source instead of "Kiosk".
- Fix: API: Members-only competition - only members at the club should be allowed to enter into the competition. Fix: API: Get club event detail now incudes the course and marker Ids
- Duct tape patch to stop insert into NZGALevy crashing due to null ComputerNo
- Include BeenRead column in IX_InterClubMessageAction_ClubReceiverId for moar speed
- Fix prepayments report sql (#1164)
- Fix prepayments report sql
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Fix: API: Unit tests
- Feature/comp registrations via the app (#1162)
- Merge branch 'main' into hotfix/clubcms-dont-prorata-future-subs
- Do not pro-rata subs if they are in the future; you only get a discount for past start dates.
- Mod: API: Apply #nullable enable to find potential ORNS bugs.
- Mod: API (code review): Display user friendly message if we fail to acquire a lock on a given timeslot.
- API: Mod (code-review): Added #nullable enable to flush out potential ORNS bugs.
- API: Removed NuGet.config - not required.
- Rename 4439 Registration add TimeSlotEntryId.sql to 4440 Registration add TimeSlotEntryId.sql
- computerno can be null now, alter nzgalevy table (#1161)
- Mod: API: Scotland/NZ: Enable events in the app for non-production environments.
- computerno can be null now, alter nzgalevy table
- API: Sync changes from main
- Fix uploading csv error (#1160)
- Fix uploading csv error
- Mod: API: Event registrations via the app bug fixes. Mod: Ability to cancel an event registration.
- Refactor get Countries api and change the domain of dev public nz (#1159)
- Refactor get Countries api and change the domain of dev public nz
- Fix: Org DG-8012 - CSV player export not showing overseas club name (#1156)
- Truncate holiday name if it is too long
- Just some WHS import utility changes (#1157)
- Put back #if for initial import
- Fix: Org DG-8012 - Changed ComputerNo to use MemberCode - Add null check for NZ club name when null to use Overseas club name
- fix multiple enumeration bug (count shows 0) (#1150)
- GBI unions talking via us now, not OCS. (#1153)
- GBI unions talking via us now, not OCS. Disable golfer signup until we get approval
- Fix failing test (#1152)
- Fix failing test
- Fix/matchplay fixes (#1149)
- fix multiple enumartion bug (count shows 0)
- Added Pennants in the nav for Clubs
- Added Country Selector and fix Venue Text and added deletion of result
- WHSAPI build broken - doesn't need to use our hack ratelimiter (#1148)
- Merge branch 'main' into fix/whsapi-build-broken
- fix local gitignore
- WHSAPI doesn't need to use our hack ratelimiter (it doesn't rate limit anyone right now anyway)
- Feature/sg menu and accordion mods (#1146)
- Handle null list item body
- Matchplay winner highligh color changes
- SG menu - external links
- Mobile menu sub headings
- Feature/sg menu clubdetails signup fixes (#1144)
- Merge branch 'main' into feature/sg-menu-clubdetails-signup-fixes
- Only show 5% convenience fee if you have Slicer enabled. (#1143)
- Only show 5% convenience fee if you have Slicer enabled.
- Add CSS class name
- Text update
- Signup step 1: membership number validation
- more startsheet monitor perf (#1142)
- SG club details update
- SG menu: correct the login path
- more startsheet monitor perf
- startsheet monitor no more bad plans (#1139)
- startsheet monitor no more bad plans
- Mod: ClubCMS DG-7836 - CSS tweak for competitions menu GI (#1122)
- My Account - Payment Confirmation Total Amount (#1137)
- My Account - Payment Confirmation Total Amount
- fix trigger that does local/display membercodes (#1136)
- Fix/matchplay fixes (#1132)
- Mod: ClubCMS DG-7836 GI holiday text change (#1129)
- Show the round date in the UI
- Styles fixes for matchplay
- fix trigger that does local/display membercodes
- Merge branch 'main' into fix/matchplay-fixes
- Fix API build after IPaymentProvider refactor (#1130)
- Fix API build after IPaymentProvider refactor.
- Mod: ClubCMS DG-7836 GI holiday text change
- Membership Category visibility (#1127)
- Unmerge prod/sct and main (accidental merge from before) (#1126)
- Membership Category visibility
- Revert "Merge branch 'release/prod/sct' into main"
- Merge branch 'release/prod/sct' into main
- Fix low hanging fruit hardcoded no-reply@golf.co.nz from addresses. (#1124)
- SSO change to expire oboarding url and change the role from ClubUser … (#1123)
- Fix low hanging fruit hardcoded no-reply@golf.co.nz from addresses.
- SSO change to expire oboarding url and change the role from ClubUser to ClubSuperAdmin
- Merge branch 'main' into feature/DG-7836_Golf_Ireland_ContactUs
- Release Main to Prod SCT (#1121)
- Feature/myaccount scheduleid (#1117)
- Merge remote-tracking branch 'origin/main' into feature/myaccount-scheduleid
- Get the TLS version of the app url (Request.AbsoluteUri is the non-tls one) (#1120)
- Update StripeSetup.aspx.cs
- Removed the rogue "Golf New Zealand"
- Get the TLS version of the app url (Request.AbsoluteUri is the non-tls one)
- Mod: ClubCMS DG-7836 Minor CSS tweaks for the final look and feel for Competition menu in GI
- Fix Scheduled task tests (#1119)
- html changes
- Fix: rMyAccount: Set the appropriate transaction type when setting up… (#1118)
- Refactor to remove duplicate sql queries.
- merge conflict with self
- fix clubcms build with IPaymentProviderFactory
- fix live build with IPaymentProviderFactory
- Merge branch 'main' into hotfix/myaccount-billing-setup
- Fix: rMyAccount: Set the appropriate transaction type when setting up a billing token.
- EnableCancelMembership
- Replace hardcoded Schedule IDs
- ensure new IPaymentProvider w/ every resolve (#1116)
- replace PaymentProvider with IPaymentProvider
- ensure new IPaymentProvider w/ every resolve
- Fix: Live: DG-7961 - Removed ComputerNo usage in favor of MemberCode (#1115)
- Fix: Live: DG-7961 - Removed ComputerNo usage in favor of MemberCode Our friendly ComputerNo strikes again! So we nuked em for MemberCode
- Fixes for Matchplay tournament
- Add scottishgolf.org to reverse proxy (#1114)
- Add scottishgolf.org to reverse proxy
- Reverse proxy config for static.clubhouse.scottishgolf.org (#1113)
- Reverse proxy config for static.clubhouse.scottishgolf.org
- Release Main to Prod SCT (#1112)
- Reverse proxy config for static.clubhouse.scottishgolf.org
- Payment confirmation email mod (#1111)
- Payment confirmation email mod
- Only show credit card payment option if Stripe account is ready.
- Enable mailer service for SCT Prod at 1300 utc. (#1110)
- Enable mailer service for SCT Prod at 1300 utc.
- Release Main to Prod SCT (#1109)
- Fix typo.
- Fix Stripe redirect if url already has a `?` in it.
- Release Main to Prod SCT (#1107)
- Mod: Live DG-7961 Modified about default categories to not be hardcoded to NZ. Using appropriate union names and links from platform and url resolver
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- SSO: Avoid coursedetailcapture redirect
- Release Main to Prod SCT (#1106)
- Mod: ClubCMS DG-7961 - Stripe logo overrides Windcave if Stripe is enabled (#1105)
- Mod: ClubCMS DG-7961 Changing of icons to Stripe if the payment provider Stripe is enabled else default back to Windcave icons
- Fix redirect for Newtonsoft.Json / BulkEmail (#1104)
- Fix redirect for Newtonsoft.Json / BulkEmail
- Release Main to Prod SCT (#1103)
- Update IPaymentProvider.Rebill() signature to fix unit test build (#1102)
- Merge branch 'main' into fix/scheduledtasks-build-1
- Update IPaymentProvider.Rebill() signature to fix unit test build
- Add scottishgolf.org domain into prod config profile. (#1101)
- Add scottishgolf.org domain into prod config profile.
- Release Main to Prod SCT (#1100)
- Moar web.config binding redirects. (#1099)
- Moar web.config binding redirects.
- Add assembly redirects (#1098)
- Add assembly redirects
- Reverse proxy update now that we have the wildcard A record (#1097)
- Reverse proxy update now that we have the wildcard A record
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Final changes made for SG import.
- Release Main to Prod SCT (#1096)
- Merge branch 'release/prod/sct' into merge/main-to-prod-sct
- Feature - Stripe onboarding (#1094)
- fix button spam
- Replace hardcoded Schedule IDs (#1095)
- fix return url
- Merge branch 'main' into feature/member-signup-v2-schedule-id-fix
- Replace hardcoded Schedule IDs
- fix stripe onboarding again
- fix postback error in stripe onboarding
- Merge branch 'main' into feature/stripe-payment-provider
- Add scottishgolf.org bindings for all apps. (#1088)
- Mod: Org DG-7943 -> OOM excel tournament import (#1081)
- Update DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association/OOM/ImportTournaments.aspx
- Update DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association/OOM/ImportTournaments.aspx
- DG-7995: Live: Reports: Updated General Play reports to separate out … (#1082)
- onboarding blocked by stripe bs
- stripe onboarding skeleton (no return url yet)
- Make @botgolf submit a declining review if SQL scripts are unordered
- Add scottishgolf.org bindings for all apps.
- in progress stripe setup page
- Feature/sg member controls css mods (#1084)
- fix quicksearch and category change for socials (#1087)
- Update TabMember.aspx
- My Account - allow club subs payment on SG website (#1086)
- fix quicksearch and category change for socials
- Facility page UI fixes for - facility detail control. (#1085)
- Rename 4429 CWTourismFacility new columns FirstLineName and SecondLineName.sql to 4436 CWTourismFacility new columns FirstLineName and SecondLineName.sql
- My Account - allow club subs payment on SG website
- Update bindings.dev.list
- Facility page UI fixes for - facility detail control.
- SG button CSS
- SG my scores CSS
- SG My Performance control CSS mod
- Mod: ClubCMS DG-7836 Added text to Golf Ireland contact page to indicate that they're on holiday
- Feature/sg css mods (#1083)
- Feature/stripe payment provider (#1041)
- Fix https://github.com/dotgolf/DotGolf.Trunk/pull/1041#discussion_r1053823041
- Card brand and last 4 digits are now surfaced in the ui.
- Fix expiry date format; should not have a / in it.
- Remove sql2019 keyword
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- Use AmountInSmallestCurrencyUnit instead of multiplying by 100.
- Fix compile error
- Update DotGolf.ClubCMS/DotGolf.ClubCMS/UFPGateway/Default.aspx.cs
- no more data access in constructor
- Update ConfigurationProfileResolver.Debug.cs
- Update clubcms web.config.production to match web.config
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- Warning message since we'll need to revisit this code in the new year.
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- payment provider: cleanup constructor
- Sequenced sql files (@norwd I don't think your sql check is working)
- Pretty sure these were incorrect since we're running on the national website too.
- merge commit of StripePaymentProvider
- Payment provider constructor cleaner now. Fixed DB connection being held open
- PaymentProviderAccounts businesslogic
- Tournament venue CSS
- Tournament detail header CSS mods
- A few more bugfixes.
- DG-7995: Live: Reports: Updated General Play reports to separate out the date time into different fields.
- Mod: Org DG-7943 - Updated the Excel for oom tournament imports. - Table is now being displayed for available Event and Category for union so they can use it in the excel.
- Merge branch 'main' into feature/stripe-payment-provider
- Fix sql error in BillingToken create()
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- Trying to filter billing tokens by the stripe account they belong to.  I hate this so much.
- Can now check whether stripe is enabled in a union
- Feature/sg UI mods (#1078)
- SG CSS mods
- Google Maps InfoWindow position
- SqlTraceToElastic now works with SQL2019 (and probably not 2017 anymore) (#992)
- adjust height of tournament header control (#1077)
- some matchplay fixes (#1076)
- adjust height of tournament header control
- some matchplay fixes
- Ad placeholder
- fix bindings for adweb dev sct (#1075)
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- fix bindings for adweb dev sct
- Release/stage to sct prod (#1074)
- Build(deps): Bump Newtonsoft.Json in /DotGolf.Clubhouse/DotGolf.Live (#1072)
- Merge branch 'release/stage' into hotfix/marcus-equals-coffee-7c22b587aa
- Update packages.config
- hack to fix adweb in stage
- Fix: adweb: double newtonsoft (#1073)
- Fix: adweb: double newtonsoft
- Fix: GetBillingTokenForPassport - Fix incorrect mapping between query result and BillingTokenRec class
- Release Stage to Prod SCT (#1070)
- Merge branch 'main' into feature/stripe-payment-provider
- Build(deps): Bump Newtonsoft.Json in /DotGolf.Clubhouse/DotGolf.Live
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Fix adweb web.config assembly binding redirect
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Config: Back to Development - accidentally committed my local copy and it was pointing to NZ stage.
- Mod: API: Create tee booking when registation has a selected tee time.
- BillingId column widened to accommodate Stripe tokens
- More IsReadyForPayments stuff
- Do not allow account topups if your Stripe account isn't onboarded.
- Fix sql syntax error in BillingTokens create.
- When adding TBP, SUBSP or UFP to a club, only do the bank account checks if we have slicer enabled in the config profile.
- Fix not showing of competitions for Club user (#1071)
- Fix not showing of competitions for Club user
- Fix/courses showing other clubs (#1068)
- fix member search for resigned members when including socials (#1069)
- fix member search for resigned members when including socials
- Merge branch 'main' into hotfix/live-membersearcherror
- fix member search for resigned members when including socials
- SG News CSS fix
- Fix/courses showing other clubs (#1068)
- SG RTE CSS fix
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- Merge branch 'main' into feature/stripe-payment-provider
- Mod: Live DG-7873 - EnableSlicer Feature flag so we can hide Slicer related things (#1051)
- Banner images upload and change for tournament page controls such as the header, tournament info and venue
- Merge branch 'feature/stripe-payment-provider' of https://github.com/dotgolf/DotGolf.Trunk into feature/stripe-payment-provider
- Hack windcave config to avoid refactor
- Merge branch 'main' into feature/stripe-payment-provider
- Release Stage to Prod SCT (#1067)
- Mod: AdWeb DG-7831 - Bumped NewtonSoft Ver from 12 to 13 (#1049)
- dont allow isvs to get scores in SCT - they are not allowed yet. (#1063)
- Release Stage to Prod SCT (#1066)
- dont allow isvs to get scores in SCT - they are not allowed yet. When they are, we'll create a v2_license for them
- dont allow isvs to get scores in SCT - they are not allowed yet. When they are, we'll create a v2_license for them
- Undo TextTemplating change; commented out to make the build work.
- Release Stage to Prod SCT (#1059)
- Update DotGolf.Core.csproj
- Fix sql syntax error
- fix invoice report
- fix invoice report (#1061)
- fix invoice report
- Fix sql syntax error (#1060)
- Fix sql syntax error
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Merge branch 'release/prod/nz' into release/stage
- Fix: TabRenewals: Only serialize/deserialize exception message and not the full exception object. (#1057)
- Fix: TabRenewals: Only serialize/deserialize exception message and not the full exception object. (#1057)
- Merge branch 'main' into hotfix/tabrenewals-page-error-messages
- Fix: TabRenewals: Only serialize/deserialize exception message and not the full exception object.
- Release Stage to Prod SCT (#1046)
- Fix Emulated whs client (accidental commit)
- added TerminationDate
- Fix Emulated whs client (accidental commit) (#1056)
- Fix Emulated whs client (accidental commit)
- fix reports using computerno (which has dummy values in gbi)
- fix member scores count for GI (counting combined scores twice)
- Hotfix/live reports with computerno, and score count report for GI (#1054)
- Pocotable preload error condition not checking for null (#1055)
- remove unused using
- Pocotable preload error condition not checking for null
- added new SCT cw domain (#1053)
- fix member scores count for GI (counting combined scores twice)
- fix reports using computerno (which has dummy values in gbi)
- Filter out other clubs (#1052)
- added new SCT cw domain (#1053)
- added new SCT cw domain
- Filter out other clubs (#1052)
- Filter out other clubs
- Mod: Live DG-7873 Added a new feature flag for "EnableSlicer". This will be used to toggle anything slicer related moving forward. For now it is used to disable "Green Fee Detail" report. This "EnableSlicer" is on my default as all unions are using it apart from Scotland.
- Fix Live build: System.Threading.Tasks.Extensions needs a binding redirect (#1050)
- System.Threading.Tasks.Extensions needed a redirect
- Merge branch 'main' into feature/stripe-payment-provider
- Regen EzPoco.g.cs for PaymentProviderAccount table.
- Mod: AdWeb DG-7831 - Bumped NewtonSoft Ver from 12 to 13 (#1049)
- Better display for non-playing members in SCT
- nonplaying member ui mods for sct
- Mod: AdWeb DG-7831
- Fix: AdWeb DG-7831 - Fix Message bubble indicator (#1048)
- Feature/dg 7956 new social member testing (#1047)
- Merge branch 'main' into feature/DG-7956-new-social-member-testing
- Fix: AdWeb DG-7831 Fix where the message bubble was no longer showing when there is a message
- Merge remote-tracking branch 'origin/main' into feature/DG-7956-new-social-member-testing
- Better display for non-playing members in SCT
- Create milestone.yml
- Haha, okay, so that conflict was for real :P
- Mod: CLubCMS DG-7836 Updated CSS for the Golf Ireland so they can use the new SwiperJS V2
- Merge branch 'main' into feature/stripe-payment-provider
- Yay, successful Stripe OpenPlay test.
- Release/stage (#1040)
- Commit changes on poco and hide save changes button on not edit mode … (#1039)
- Commit changes on poco and hide save changes button on not edit mode (#1038)
- Commit changes on poco and hide save changes button on not edit mode (#1038)
- Mod: ClubCMS DG-7836 -> Golf Ireland CSS updates for Swiper V2 (#1037)
- Commit changes on poco and hide save changes button on not edit mode
- Mod: CLubCMS DG-7836 Updated CSS for the Golf Ireland so they can use the new SwiperJS V2
- Use Config.Current.Stripe.PlatformAPIKey to store Stripe key.
- Release Stage to Prod SCT (#1036)
- Fix MSB3247: Found conflicts between different versions of the same dependent assembly
- Release Stage to Prod SCT (#1035)
- Fix MSB3247: Found conflicts between different versions of the same dependent assembly
- Move to factory pattern to support multiple payment gateway accounts.
- Release Stage to Prod SCT (#1034)
- Feature/clubcms tb mods (#1019)
- SG ConsentRequiredForUnderThisAge (#1028)
- Make email and phone number clickable (#1025)
- Added Tournament Info control, updated GolfNZ Tournament Detail Heade… (#1016)
- Feature/my account mods (#990)
- Fix MSB3247: Found conflicts between different versions of the same dependent assembly
- Fix MSB3247: Found conflicts between different versions of the same dependent assembly
- SG ConsentRequiredForUnderThisAge (#1028)
- Release Stage to Prod NZ (#1030)
- Release Stage to Prod SCT (#1031)
- Update bootstrap.pl
- reverseproxy uses new s3 folder instead of old one for promotes
- reverseproxy uses new s3 folder instead of old one for promotes (#1027)
- SG ConsentRequiredForUnderThisAge
- Update bootstrap.pl
- reverseproxy uses new s3 folder instead of old one for promotes
- nonplaying member ui mods for sct
- Make email and phone number clickable (#1025)
- Fix button color and reposition the button
- Feature/clubcms tb mods (#1019)
- Release Stage to Prod NZ (#1022)
- Mod: Org: OOM management for England (#1026)
- Feature/DG-7943: Org CSV Points uploader and Points preview when creating tournaments (#1007)
- Make email and phone number clickable
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- Feature/DG-7943: Org CSV Points uploader and Points preview when creating tournaments (#1007)
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Update DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association/OOM/OomEventCategoryManagement.aspx
- SG TB CSS mod
- Release Stage to Prod SCT (#1023)
- Fix merge conflicts
- Deduplicated even more billing token code.
- updates on scotland domain bindings (#1018)
- Release Stage to Prod SCT (#1015)
- Hotfix: Merge Conflict Resolution for #1015 (#1020)
- Merge branch 'release/prod/sct' into hotfix/merge-conflict-resolution-1015
- updates on scotland domain bindings (#1018)
- updates on scotland domain bindings
- Date display fix
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Mod: Org DG-7943 - Added info to let the user know that uploading the CSV with existing position will result in an override of points - Change the overflow-y in AddTournament.aspx to auto - Added error handling on when there are to many columns in the CSV file. - Changes to ternary statements 😄
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- Move BillingToken crud to BillingTokens business logic.
- Added Tournament Info control, updated GolfNZ Tournament Detail Heade… (#1016)
- Hotfix: End of Year Freeze (#1017)
- fix UnitConversion.ConvertLength build errors
- new Other Competitions LiveReportSection, which adds reports into the Competitions report section which don't related to DG Comps
- rMemberSignupConfirmationV2 redirect failed payment (#1000)
- update member quick search service for socials in member table
- update merge members for SCT
- Feature/DG-7857 refactor member search tests pt2 (#974)
- Added Tournament Info control, updated GolfNZ Tournament Detail Header control and Tournament Courses control
- Make sct live (#998)
- Cherry picked PR #967
- Fix: API: Build breaking due to payment-related stuff missing from previous commit. (#956)
- Tee Booking CSS fix
- TB Google Maps Places search: Country Restriction
- Mod: Org DG-7943
- Mod: Org DG-7943
- Completing category pages UI fixes. (#1011)
- fonts CSS variable fallback
- Release Stage to Prod SCT (#1014)
- fix UnitConversion.ConvertLength build errors
- Release Stage to Prod SCT (#1010)
- new Other Competitions LiveReportSection, which adds reports into the Competitions report section which don't related to DG Comps
- Adds reports into the Competitions report section which don't relate to DG Comps (#1012)
- new Other Competitions LiveReportSection, which adds reports into the Competitions report section which don't related to DG Comps
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
-  - complete category pages UI fixes
- Make sct live (#998)
- Comment changes staged for prod on release PR
- Fix broken snippet
- rMemberSignupConfirmationV2 redirect failed payment (#1000)
- rMemberSignupConfirmationV2 redirect failed payment (#1000)
- Mod: Org DG-7943 Added CSV uploader for points management
- Merge branch 'main' into features/DG-7837
- More UI/Styling fixes.
- Merge branch 'main' into fix/sqltracetoelastic-supports-sql2019
- Fix https://github.com/dotgolf/DotGolf.Trunk/pull/992#discussion_r1050311316
- Removed clickonce installer crap
- Missed the damn putt.
- Release/stage (#1006)
- Hotfix/sct cherry mick social member mods (#1005)
- fix api url when club is logged in (#1004)
- update member quick search service for socials in member table
- fix api url when club is logged in
- update merge members for SCT
- Release Stage to Prod SCT (#1003)
- Feature/dg 7857 refactor member search tests pt2 (#974)
- Remove empty line
- Fix whitespace error
- rMemberSignupConfirmationV2 redirect failed payment
- Make sct live (but in dev this time) (#999)
- Make sct live (#998)
- Make sct live
- Revert "Feature/DG-7970: Set default teebooking location by device location" (#997)
- Revert "Feature/DG-7970: Set default teebooking location by device location"
- Fix NewtonSoft version error (#996)
- Fix NewtonSoft version error
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Mod: Org DG-7943 (#995)
- Version bump from 12 to 13 flat for Newtonsoft JSON (#994)
- Feature/DG-7970: Set default teebooking location by device location (#993)
- Version bump from 12 to 13 flat for Newtonsoft JSON
- Get default location before attaching listener
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Mod: Org DG-7943 Adding preview of points table associating with the selected event category
- Tell Sylinia that GeoLoc is disabled, but don't tell the user
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Fix Newtonsoft build errors
- Added images binding for dev sct
- Oops, error in bindings file.
- SqlTraceToElastic now works with SQL2019 (and probably not 2017 anymore)
- Add Scotland binding (#991)
- Bugfix/DG-7965: Use print or generate in preprint v2 (#976)
- Add Scotland binding
- Merge branch 'main' into bugfix/DG-7965-use-print-or-generate-in-preprintV2
- Set status text from `$root.printedOrGenerated()`
- Feature/my account mods (#990)
- Put PR number in workflow job name
- Remove ellipsis from log (#989)
- Fix error when saving member profile for social member in sct (#988)
- Remove ellipsis from log
- Fix trailer regex and simplify shell scripts
- Fix error when saving member profile for social member in sct
- Replace the Payment Express logo
- rMyAccount: EG UI fix
- Parse raw json, not json formatting (#987)
- Parse raw json, not json formatting
- rMyAccount UI improvements and fixes
- Only label merged PRs (#986)
- Only label merged PRs
- Add labels on PR event not PR target
- Fix syntax error
- Update workflow name (#985)
- Update workflow name
- Separate label addition and removal (#984)
- Separate label addition and removal
- fix UnitConversion.ConvertLength build errors (#982)
- Escape json to shell var
- Fix job name (#983)
- Fix job name
- fix UnitConversion.ConvertLength build errors
- Fix live build with newtonsoft binding redirect (#981)
- Consolidate labeler steps
- Fix live build with newtonsoft binding redirect
- Parse no-label trailer to remove applied labels
- Only run labeler when a PR is closed
- Consolidate labeler jobs to reduce usage
- Fix intellisense errors (#980)
- Fix weird intellisense errors
- Block more injection attacks (#979)
- block more injection attacks
- Mod: DatabaseBuilder is now a T4 script (#577)
- Removed .gitignore to put EzPoco.g.cs back in source control.
- Cherry picked PR #967
- MailerService uncrapulated so we can go live without fear (#967)
- Bump Newtonsoft.Json from 9.0.1 to 13.0.1 in /DotGolf.Support/DotGolf.Support (#875)
- Build(deps): Bump Newtonsoft.Json from 12.0.3 to 13.0.1 in /DotGolf.Clubhouse/DotGolf.Live (#265)
- Build(deps): Bump Microsoft.Owin from 3.0.0 to 4.2.2 in /DotGolf.Clubhouse/DotGolf.Live (#264)
- Bump Newtonsoft.Json in /DotGolf.Support/DotGolf.Support
- Build(deps): Bump Newtonsoft.Json in /DotGolf.Clubhouse/DotGolf.Live
- Bump Newtonsoft.Json from 11.0.2 to 13.0.1 in /DotGolf.SqlToGraphite/SqlToGraphite (#977)
- Bump Newtonsoft.Json from 9.0.1 to 13.0.1 in /DotGolf.WarehouseBuilder/DotGolf.WarehouseBuilder.Common (#874)
- Bump Newtonsoft.Json in /DotGolf.SqlToGraphite/SqlToGraphite
- Bump Newtonsoft.Json from 6.0.3 to 13.0.1 in /Other/MetricMonitor (#876)
- Reposition the footer message
- Updates for SCT social members: member merges on signup, and member quick search cached people (#975)
- Add `printOrGenerate` and `printedOrGenerated` properties
- update member quick search service for socials in member table
- Update PrePrint.aspx
- update merge members for SCT
- Feature/dg 7857 refactor member search tests pt2 (#974)
- Merge remote-tracking branch 'origin/main' into feature/dg-7857-refactor-member-search-tests-pt2
- move member search tests into separate files added more negative test cases
- Add dependencies section to changelog
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.UnionAPI/DotGolf.UnionAPI.Tests (#973)
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.UnionAPI/DotGolf.UnionAPI (#972)
- Bump DotGolf.AspNetCoreRateLimit in /DotGolf.UnionAPI/DotGolf.UnionAPI
- Bump DotGolf.AspNetCoreRateLimit
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.ISVAPI/DotGolf.ISVAPI.Tests (#970)
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.ISVAPI/DotGolf.ISVAPI (#968)
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.WHSAPI/DotGolf.WHSAPI.Tests (#969)
- Bump DotGolf.AspNetCoreRateLimit from 4.1.0 to 4.1.1 in /DotGolf.WHSAPI/DotGolf.WHSAPI (#971)
- Bump DotGolf.AspNetCoreRateLimit in /DotGolf.ISVAPI/DotGolf.ISVAPI.Tests
- Bump DotGolf.AspNetCoreRateLimit in /DotGolf.WHSAPI/DotGolf.WHSAPI
- Bump DotGolf.AspNetCoreRateLimit in /DotGolf.WHSAPI/DotGolf.WHSAPI.Tests
- Bump DotGolf.AspNetCoreRateLimit in /DotGolf.ISVAPI/DotGolf.ISVAPI
- MailerService uncrapulated so we can go live without having to hack past email data.
- Tournament billing card
- Release Stage to Prod SCT (#966)
- Fix BOM
- Fix BOM
- Fix creating new player creation which gender is Women and the modal … (#961)
- Remove Debug Job (#962)
- Encode page name properly so we can handle friendly page names with spaces (#963)
- Merge branch 'main' into github/cleanup-labeler-workflow
- Fix case sensitivity
- Inline `gh` step
- Allow case-insensitive trailers
- Add SCT prod branch
- Encode page name properly so we can handle friendly names with spaces in them.
- Remove Debug Job
- Moar messing around with making stripe work the way we want
- Fix redundant whitespace in label list
- Fix creating new player creation which gender is Women and the modal leaving the gray overlay
- Just call the API for commit messages
- Log origin directly instead of heuristic checkout depth
- Properly expand object
- Debug event
- Add debug job
- Rename output in preparation for eventual `no-label:` trailler
- Surely 100 commits of additional history would be enough??
- Add additional step to add 1 to the commit count
- Sync changes from main into comp-registrations-via-the-app
- Remove addition operator
- Fix: API: Comp registrations in the app - pay by new card.
- Checkout with depth equal to one more than the number of commits the PR wants to merge
- Allow checkout to have read access to repo
- Checkout to gain access to git log
- Skip empty labels
- Don't create release PRs against archive branches
- Fix: API: Build breaking due to payment-related stuff missing from previous commit. (#956)
- Fix: API: Build breaking due to payment-related stuff missing from previous commit. (#956)
- Fix: API: Build breaking due to payment-related stuff missing from previous commit.
- github/parse labels in commit traillers (#954)
- Test autolabel
- Add labels from commit trailers (#953)
- Add labels from commit trailers as well
- remove handicap check on adding players for matchplay tournaments (#952)
- remove handicap check on adding players for matchplay tournaments
- Merge branch 'main' into github/parse-labels-in-commit-traillers
- Testing non-label trailers
- Simplify permissions (#951)
- Simplify permissions
- Begin label detection workflow
- Re-order changelog (#950)
- Clearly separate Projects section from Meta/Infrastructure section
- Simplify changelog titles for DotGolf.Foo/Trunk
- Re-order changelog
- Hacking around trying to make stripe store payment method on platform account, but bill the connected account.  Blocker atm.
- Release Stage to Prod NZ (#947)
- Feature/dg 7943 org oom enhancements (#949)
- Tourism category pages UI/Styling fixes (#948)
- Mod: Org DG-7943 - Added the ability for the user to create new/modify/delete OOM event type - Added OOM event category creation/modification/delete ability. -- This also allows users to create/modify existing points associated with category.
- Race to woodhall spa live for EG clubs (#945)
- Tourism category pages UI/Styling fixes
- race to woodhall spa live for EG clubs
- race to woodhall spa live for EG clubs
- Added Distance Unit Conversion and use it for Teebooking Distance sel… (#940)
- Refactor UnitConversion and combined LengthUnit and DistanceUnit
- move search tests to new location for refactoring (#944)
- move search tests to new location for refactoring
- Feature/dg 7857 social member create and search (#943)
- Update Shared/DotGolf.Core/Data/ClubMemberRepo.cs
- fine, no more select *
- made the google api key for tee booking retrieve from setting (#941)
- Merge branch 'main' into feature/dg-7857-social-member-create-and-search
- refactor member search for member table socials/casuals will move the unit tests into better folders and add more test cases next PR to make the diff easier to read
- Subs online member signup: fix saving of billing card (#942)
- Subs online member signup: fix saving of billing card
- made the google api key for tee booking retrieve from setting
- Added Distance Unit Conversion and use it for Teebooking Distance selector
- Merge branch 'main' into feature/DG-7542-england-golf-website-cookie-preferences
- Added matchplay tournaments to Matchplay (#939)
- Revert "Half baked attempt to use payment intents - will be reversing this"
- Half baked attempt to use payment intents - will be reversing this
- create social members in member table using AddClubMember failing tests for member search
- fix hardcoded nonplaying nzgacategoryid
- Added matchplay tournaments to Matchplay
- Merge remote-tracking branch 'origin/main' into feature/dg-7857-social-member-create-and-search
- drop unused proc and alter nzgacategory table flags to not null (#938)
- drop unused proc and alter nzgacategory table flags to not null
- Feature/subs member signup v2 mods (#937)
- Member search no longer uses xml hack to parse categoryIds (#936)
- New test class for social member search. rename other text classes to match naming convention
- DG-7861: FIX: ClubCMS: Implemented code changes, removed additional c… (#935)
- Merge remote-tracking branch 'origin/main' into feature/DG-7861-voucher-validation-fix
- DG-7861: FIX: ClubCMS: Code comment update. Thanks Grace :-)
- member search no longer uses xml hack to parse categoryIds, and produces less query plans by not using Dapper's 'in'
- Feature/dg-7857 member table casual golfers searchable in clubhouse (#931)
- DG-7861: FIX: ClubCMS: Implemented code changes, removed additional code which should have been removed previously.
- CSS class name
- Fix age calculation
- merge
- merge commit
- fix - casual golf NZGACategory should not include non-playing flag - that's only for the "Non Playing" category.
- fix tests that were passing for the wrong reason
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Fix: Live DG-7873 (#934)
- Fix: Live DG-7873 Fix where MemberCode type int had an overflow in SCT. The column is varchar so made sure it uses the correct type here of string. is all
- Tourism fonts loader fixes. (#933)
- Tourism fonts loader fixes.
- Use proper case for names (#932)
- Use proper case for names
- Merge branch 'main' into feature/DG-7857-member-table-casual-golfers-searchable-in-clubhouse
- Revert sql scripts back to CRLF
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Exit code fixed in reverse proxy deploy command
- Touch bootstrap.pl
- Merge branch 'main' into feature/DG-7943_Org_OOM_enhancements
- Merge remote-tracking branch 'origin/main' into feature/DG-7857-member-table-casual-golfers-searchable-in-clubhouse
- member table casual golfers supported now, woo
- Tourism home page UI/Styling fixes. (#930)
- Tourism home page UI/Styling fixes.
- Update highlights of winning side for Interclub Competition (#929)
- Create .gitattributes
- Update line endings (#928)
- Update line endings
- Update highlights of winning side for Interclub Competition
- Feature/clubcms and live club details (#927)
- Merge branch 'main' into feature/clubcms-and-live-club-details
- Update results for matchplay competition UI (#926)
- Update results for matchplay competition UI
- SG CSS tidy up
- SG CSS tidy up
- Release Stage to Prod NZ (#925)
- Update logging layout
- Update logging layout
- Recommended image dimensions
- Release Stage to Prod NZ (#923)
- Rescope token to entire job
- Rescope token to entire job
- Simplify manual cherry-pick instructions (#921)
- Simplify manual cherry-pick instructions
- Simplify manual cherry-pick instructions
- Release Stage to Prod NZ (#919)
- Use `AUTO_MERGE_BOTGOLF` token for permissions
- Use `AUTO_MERGE_BOTGOLF` token for permissions
- Implement Past Strokeplay Competitions Players based on the Leaderboard (#920)
- Apply suggestions from code review
- Add logging when auto merge is enabled
- Add logging when auto merge is enabled
- Feature/member signup v2 mods (#917)
- Use GHAPI to enable automerge on release PRs
- Use GHAPI to enable automerge on release PRs
- move live_FindMembers_BasicWithCategories to code. *shudder*...
- Implement Past Strokeplay Competitions Players based on the Leaderboard
- Remove faulty automerge logic
- Remove faulty automerge logic
- Enable automerge on release PRs
- Enable automerge on release PRs
- Release Stage to Prod NZ (#915)
- Merge branch 'release/prod/nz' into release/stage
- Fix: BulkEmail: Teebooking recipients filter does not return any data… (#916)
- Fix: BulkEmail: Teebooking recipients filter does not return any data… (#916)
- Merge branch 'main' into hotfix/bulkemail-teebooking-recipients
- CSS updates
- Fix: BulkEmail: Teebooking recipients filter does not return any data other than entries linked to an online payment.
- Fix PR creation fallback
- Fix PR creation fallback
- Fix branch listing expression
- Fix branch listing expression
- Change from log group to notice for debug log
- Change from log group to notice for debug log
- Add debugging on branch searching
- Add debugging on branch searching
- Release Stage to Prod NZ (#913)
- fix sql script for tests
- refactor clubmemberrepo to use const instead of hardcoded  strings for errors
- Clarify steps in report
- Fix: Live: DG-7738 Subscription(s) is plural.. was previously singular so it wasn't showing in the reports area
- JS/CSS file version parameter
- Enable promo code setting fix
- Merge remote-tracking branch 'origin/main' into feature/DG-7857-member-table-casual-golfers-searchable-in-clubhouse
- In-process commit (added new test for casual search)
- Refactor readme
- Refactor readme
- Create new PRs as part of the same job (#912)
- Create new PRs as part of the same job
- Create new PRs as part of the same job
- Discard error rather than ignore and continue (#910)
- Discard error rather than ignore and continue
- Feature/dg-7937 allow signup to golfnz with secondary number (#909)
- Release Stage to Prod NZ (#904)
- Discard error rather than ignore and continue
- New lines to ads.txt for englandgolf.org website (#856)
- Accept secondary member numbers on signup to golf co nz but track their centralmembercode from then on, in case they dont click the link from the signup email and use their browser instead
- MOD: Clubhouse: Make Report available to clubs.
- MOD: Clubhouse: Make Report available to clubs. (#908)
- Feature/sg css mods (#899)
- Merge remote-tracking branch 'origin/main' into feature/DG-7937-allow-signup-to-golfnz-with-secondary-number
- MOD: Clubhouse: Make Report available to clubs.
- @pastdavid changed the prod SSO secret key causing Scotland logins to break
- Mod: Org As other unions are adopting our system for OOM we need to figure out the "results" page. Was hard coded to golfNZ. So now it works the clubCMS link out. If other union keep the structure of "Tournamtn/xyz..." the same then we're good. Else we'd need a revisit to figure out what is next.
- Show failure report in console as well (#907)
- Add follow up steps to failure message
- Show failure report in console as well (#907)
- Add semantic whitespace
- Show failure report in console as well
- Add follow up steps to failure message
- Add semantic whitespace
- Reword summary
- Reword summary (#906)
- Always attempt to create release PR, even on failure (#902) (#905)
- Always attempt to create release PR, even on failure (#902)
- Reword summary
- Bump Newtonsoft.Json
- Build(deps): Bump Microsoft.Owin in /DotGolf.Clubhouse/DotGolf.Live
- Cleanup and improve hotfix workflow (#900) (#903)
- Always attempt to create release PR, even on failure (#902)
- Cleanup and improve hotfix workflow (#900)
- Always attempt to create release PR, even on failure
- Cleanup and improve hotfix workflow (#900)
- Fix escape sequenses
- Release Stage to Prod NZ (#901)
- Merge branch 'release/prod/nz' into release/stage
- Report failure separately from cherry-pick
- Delete sql-scripts.yml
- Fix: Nav crashing for users who do not have access to the payments page (#898)
- Merge branch 'release/stage' into hotfix/norwd-bd941aa77c
- SG CSS update
- Fix: Live: Broken nav for Takapuna (#888) (#897)
- Fix: Nav crashing for users who do not have access to the payments page (#896)
- SG CSS fix
- SG map marker update
- SG map marker style updates
- Fix: Live: Broken nav for Takapuna (#888)
- Fix: Nav crashing for users who do not have access to the payments page (#896)
- Merge branch 'main' into hotfix/takapuna-broken-nav
- Fix: Nav is crashing for users who do not have access to the payments page. We are not checking for the user's role here because that has been done in the Navigation.GetClubName/GetUnionNav code.
- update my competitions control to include matchplay (#877)
- Merge branch 'main' into feature/update-my-competitions-control-to-include-matchplay
- Make the sha references tolerable (#895)
- Make the sha references tolerable
- Inline link reference (#894)
- Inline link reference
- Add additional steps and context (#893)
- Add additional steps and context
- SG cookie popup style updates
- Get rid of messy heredoc (#892)
- Get rid of messy heredoc
- Feature/use paymentprovider everywhere (#835)
- Merge branch 'main' into feature/use-paymentprovider-everywhere
- Remove _deploy directories no longer needed. (#880)
- Merge branch 'main' into feature/update-my-competitions-control-to-include-matchplay
- Merge branch 'main' into fix/remove-leftover-binding-files
- Merge branch 'release/prod/gbi' into release/stage
- Feature/dg 7928 openplay signup (#890)
- Merge branch 'main' into feature/DG-7928-openplay-signup
- Fix: Org: DG-7873 (#891)
- Merge remote-tracking branch 'origin/main' into feature/DG-7937-allow-signup-to-golfnz-with-secondary-number
- Accept secondary member numbers on signup to golf co nz but track their centralmembercode from then on, in case they dont click the link from the signup email and use their browser instead
- Merge branch 'main' into feature/DG-7873_course_variance_report_fix
- Properly escape everything
- My Profile: Email Communication: toggle off button mods
- Correct summary variable name
- Prevent merge commits from being cherry picked
- Fix: Org: DG-7873 Course variance report throwing DBNull when copying over the dataset to return to the front end. Using nullable types now.
- Remove `--edit-last`
- Resolve merge conflicts from #881
- Fix flag
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Add: SSO binding for scotland
- Fix: Live: Broken nav for Takapuna (#888)
- Add: dev sites for Scotland to reverse proxy.
- Apply friendly URL
- Add profile for Scotland development environment (#889)
- Merge branch 'main' into feature/scotland-dev-profile
- Add profile for Scotland development environment
- Fix: Live: TB payments sub nav not required for Takapuna - add code to check if the club is using AuthComplete payment for online tee bookings.
- Add comment to PR on failure
- OpenPlay branding
- Add explicit `exit 1`
- Fix incorrect conditional
- Implement Stripe rebilling.
- Remove all unnecessary whitespace from SQL files (#881)
- Merge branch 'main' into fix/whitespace
- Remove debugging job
- Merge branch 'main' into fix/whitespace
- Condense check into single job
- Release Stage to Prod NZ (#886)
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Fix: Live: Navigation bubble count always '0' because the GetBubble func is never set after deserialising from Redis cache.
- Remove BuildInfo.Revision, replaced with BuildInfo.CommitHashShort.
- Member Signup Confirmation v2: fix voucher code application
- Remove test files
- Merge branch 'main' into fix/whitespace
- Loosen regex
- Create 4427 this file should be fine.sql
- Create 10000000 this file should be blocked.sql
- Create 0001 this file should be blocked.sql
- Merge branch 'main' into fix/whitespace
- Fix typo
- Merge branch 'main' into fix/whitespace
- Pass `GH_TOKEN: ${{ github.token }}` to environment
- Merge branch 'main' into fix/whitespace
- Debug added sql files
- Fix: Live: TBP navigation bubble count is always '0' (#883)
- Remove BuildInfo.Revision, replaced with BuildInfo.CommitHashShort. (#882)
- included RSCompetitionEntry DeletedDate and CompetitionContest DeletedDate in the query
- Fix: Live: TBP navigation bubble count is always '0' (#883)
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Merge branch 'main' into fix/whitespace
- Add debug job
- Merge branch 'main' into fix/whitespace
- Fix syntax error due to missing context
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Merge branch 'main' into fix/whitespace
- Wire script lists to final job
- Merge branch 'main' into hotfix/live-tbp-uncaptured-count-not-displayed
- Fix: Live: Navigation bubble count always '0' because the GetBubble func is never set after deserialising from Redis cache.
- Don't checkout in final step
- Merge branch 'main' into fix/whitespace
- Fix working directory
- Merge branch 'main' into fix/whitespace
- Compile a list of sql script files in both HEAD and BASE
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- Remove BuildInfo.Revision, replaced with BuildInfo.CommitHashShort. (#882)
- Remove BuildInfo.Revision, replaced with BuildInfo.CommitHashShort.
- Fix missing name
- Remove all unnecessary whitespace from SQL files
- Create sql-scripts.yml
- Delete .gitattributes
- Set site list files as csv
- Moar leftover _deploy stuff
- Remove _deploy directories no longer needed.
- Moar stuff, RebillType class added to track type of payment.
- Refactored to pass WindcaveDotGolfAccount instead of user/pass on Rebill()
- DG-7679: Fix some `using` statements missed by #873
- Pay, Setup and Pay+Setup appears to work now.
- Use table driven logic to enable strip swipecard (#860)
- Mod: API: Read static content gateway host from the app configuration profile (#878)
- Merge branch 'main' into feature/read-staticontent-gateway-host-from-app-config-profile
- Merge branch 'main' into feature/comp-registrations-via-the-app
- Mod: API: Read static content gateway host from the app configuration profile.
- update my competitions control to include matchplay
- Merge branch 'main' into yuri-like-clean-code/kounta-swipecard-script-add-muriwai
- Remove WCFMetadata
- Fix namespace
- Bump Newtonsoft.Json from 6.0.3 to 13.0.1 in /Other/MetricMonitor
- DG-7679: Move DotGolf.Clients into Core (#873)
- Update Golf NZ Tournament Header control and implement Matchplay TV2 … (#872)
- Rename 4422 CWControlProperty New for golfnz-tournament-detail-header.sql to 4426 CWControlProperty New for golfnz-tournament-detail-header.sql
- Remove DotGolf.Clients from Labeler definition
- Remove DotGolf.Clients from Codeowners definition
- Remove DotGolf.Clients from Changelog definition
- Merge branch 'main' into feature/DG-7679-move-dotgolf-clients-into-core
- Fix affected `using` statements
- Update Golf NZ Tournament Header control and implement Matchplay TV2 in Tournaments control listing
- Generate <Foo>ClientBase.g.cs in Core
- Remove DotGolf.Clients altogether
- Move whsapi-client.nswag to Core
- Move WhsApiClientBase.cs to Core
- Move UnionApiClientBase.cs to Core
- Move IsvApiClientBase.cs to Core
- Move BookingServiceClientBase.cs to Core
- Move unionapi-client.nswag to Core
- Move isvapi-client.nswag to Core
- Move bookingservice-client.nswag to Core
- added new bindings for Scotland CW (#871)
- added new bindings for Scotland CW
- Improve step clarity
- Cleanup sprint workflow
- Release Stage to Prod GBI (#865)
- Vimeo player options mod (#870)
- Mod: Live DG-7873 Mod to use MemberCode (#867)
- fix: join condition on ClubMember
- Release Stage to Prod NZ (#869)
- subs processing now correctly ignores someone's second passport (#868)
- subs processing now correctly ignores someone's second passport
- Vimeo player options mod
- Merge branch 'main' into feature/DG-7873_sub_import_computerno_fix
- subs processing now correctly ignores someone's second passport
- Fix: Live (#864)
- Fix: ClubCMS DG-7963 (#863)
- Mod: Live DG-7873 (#866)
- Release Stage to Prod NZ (#857)
- Merge branch 'main' into feature/DG-7873_sub_import_computerno_fix
- Merge branch 'main' into feature/DG-7873_subs_settings_schedules_ordering
- Merge branch 'main' into feature/DG-7873_delete_payment_schedule_fix
- Update SubscriptionRenewalProcessor.cs
- Fix: ClubCMS DG-7963 Fix the visible condition for Knockout binding
- Merge branch 'main' into feature/DG-7963_hyundai_stat_chat
- Fix: ClubCMS DG-7963 Fix the visible condition for Knockout binding
- Appease the whitespace gods!
- Fix: Kounta: Retrieve product from Kounta if not found in the cache (#861)
- Features/dg 7919 (#838)
- Rename 4423 CWControlProperty insert for TournamentVenue .sql to 4425 CWControlProperty insert for TournamentVenue .sql
- Feature/signup mods (#862)
- Use `indexof() > -1` over `includes()` for better browser compatability
- Merge branch 'main' into hotfix/kounta-retrieve-product-from-kounta-if-not-in-cache
- member-signup mods
- Merge branch 'main' into features/DG-7919
- Merge branch 'main' into yuri-like-clean-code/kounta-swipecard-script-add-muriwai
- Use table driven logic to enable strip swipecard
- Mod: Kounta: Card swipe tampermonkey script - Add Muriwai (#859)
- tabs -> spaces
- Rename 4422 CWControlProperty insert for SGClubDetails .sql to 4424 CWControlProperty insert for SGClubDetails .sql
- First step of converting wa_TBApplyBookingChanges_SendEmails into CSh… (#852)
- Merge branch 'main' into hotfix/kounta-swipecard-script-add-muriwai
- Mod: Kounta: Card swip tampermonkey script - Add Muriwai
- Alter column length
- Committing not working code on PaymentIntentCreate for posterity.  Getting rid of this shortly.
- Release Stage to Prod GBI (#849)
- Subs renewals was only renewing one person
- Subs renewals only renewing one person (#858)
- Subs renewals was only renewing one person
- Fix: Kounta: If we can't find a product in cache, retrieve it from Kounta and put it into the cache. I am adding this code because for some reason, a product goes missing from the cache and causes import order to crash.
- Fix: Live: DG-7738 (#855)
- New lines to ads.txt for englandgolf.org website (#856)
- Fix interclub competition setup conferences not visible (#839) (#846)
- Feature/dg 7823 front end controls for matchplay competition (#840)
- New lines to ads.txt for englandgolf.org website (#856)
- New lines to ads.txt for englandgolf.org website
- Fix: Live - Fix event not binding as "Delete Payment..." as KO does not populate until applicable selection is select. so we are now binding on select list change instead. - When deleting the instalments from the bottom table. It's a UI sortable which is draggable. While we destroy the object the UI does not get updated so called ".remove()" after destroying to update the UI.
- Mod: Live DG-7873 Applied ordering in the returning list for Schedules. Ordered using DisplayOrder first then Name
- Mod to use MemberCode when pulling and saving data without altering "MembersSubsImport" Though I think we should update "MembersSubsImport" to have MemberCode
- Merge remote-tracking branch 'origin/feature/use-paymentprovider-everywhere' into feature/use-paymentprovider-everywhere
- Had to move those out as its in a different thread and will throw
- Got rid of recurringMode; this is a Windcave specific field that can be computed from requestRebillToken instead.
- Feature/dg 7921 contact form mods (#854)
- Contact form: update the email subject
- Embiggened TBTransaction.DPSTxnRef
- Release Stage to Prod NZ (#850)
- Merge branch 'main' into features/DG-7869
- removed delay
- Mod: Teebooking: Upgraded to use IPaymentProvider.
- remove Org_ClubsCanBeAssignedCoursesBelongingToOtherClubs from config… (#853)
- change pars to Pars so same as main
- remove Org_ClubsCanBeAssignedCoursesBelongingToOtherClubs from config profiles since it defaults to true and everyone has it
- First step of converting wa_TBApplyBookingChanges_SendEmails into CSharp code.
- SCT- remove levies, disable UsersCanChooseMemberNumbers (#851)
- SCT- remove levies, disable UsersCanChooseMemberNumbers, disable UseRoundedCourseHandicapToCalculatePlayingHandicap
- SubmitContactForm - use reCAPTCHA v3
- Merge branch 'main' into feature/use-paymentprovider-everywhere
- Merge branch 'main' into feature/stripe-payment-provider
- Make clubcms chooch faster while debugging. (#833)
- Update the error message
- Merge branch 'main' into hack/speed-up-clubcms-debugging
- Update DataConnectionBuilder.cs
- Update UserSession.cs
- Update Account.cs
- Merge branch 'hack/speed-up-clubcms-debugging' of https://github.com/dotgolf/DotGolf.Trunk into hack/speed-up-clubcms-debugging
- Cleaner way to enable insane data caching in debug mode.
- Mod: ClubCMS DG-7693 Hyundai Statchat UI for golfNz handles new data views [SQL needs to have ran first]. - Rounds Played - Courses Played - Best score and club - Best par and percentages
- Release Stage to Prod GBI (#837)
- Release Stage to Prod NZ (#848)
- Mod: Core: Navigation Fix navigation from constantly showing "Customer satisfaction" -> this now check for club product and populate as required.
- Mod: Core: Navigation (#847)
- Mod: Core: Navigation Fix navigation from constantly showing "Customer satisfaction" -> this now check for club product and populate as required.
- Process stripe payment result now (untested for now)
- Rename 4421 CWControlProperty insert for TournamentVenue .sql to 4423 CWControlProperty insert for TournamentVenue .sql
- Remove SVN references
- Fix interclub competition setup conferences not visible (#839)
- Release Stage to Prod NZ (#845)
- DG-7738 #54175 Fixed mapping data back - missing the actual "AutoEntry"
- Release Stage to Prod NZ (#836)
- DG-7738 #54175 (#842)
- comp results recalc properly when re-saving
- comp results recalc properly when re-saving (#843)
- comp results recalc properly when re-saving
- Merge branch 'main' of github.com:dotgolf/DotGolf.Trunk
- Update whitespace
- Feature/create page (#841)
- Merge branch 'main' of github.com:dotgolf/DotGolf.Trunk
- Update whitespace
- Fix whitespace
- Update PR step name
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- Keep track of the userid/pm value so apps no longer have to do it.
- Fix interclub competition setup conferences not visible (#839)
- Remove old method that is already moved to TournamentUtility
- Merge branch 'main' into feature/create-page
- Update step names
- Merge branch 'main' into feature/DG-7823-front-end-controls-for-matchplay-competition
- ToFriendlyUrlString: replace ampersand with the word "and"
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- Fix interclub competition setup conferences not visible
- Merge branch 'feature/use-paymentprovider-everywhere' of https://github.com/dotgolf/DotGolf.Trunk into feature/use-paymentprovider-everywhere
- Make GetProcessChargeDetail more generic so we can use it for Stripe.
- admin-sg-rte: allow ampersands in the page name
- New control property for default banner image URLs.
- Implements default club image/banner url.
- Club ISV list report so GBI unions can handle their own ISV billing without us running queries
- Tested and working with new IPaymentProvider
- Merge branch 'feature/use-paymentprovider-everywhere' into feature/stripe-payment-provider
- RegistrationPayment implement IPaymentProvider
- Fix unit test on local for UnionAPI when testing session
- Mod: ClubCMS Implement IPaymentProvider Implemented IPayment provider and replaced the XML. Tested and is working
- Fix unit test on local for ISVAPI when testing session
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Update IDE0055 rules
- replaced if DEBUG directives with conditional attribute so source code doesn't get greyed out
- Perf mod to wa_TBGetTimeSlotsForDayAndMemberEligibility (#834)
- Merge branch 'main' into hack/speed-up-clubcms-debugging
- Perf mod to wa_TBGetTimeSlotsForDayAndMemberEligibility but with the correct name this time
- Make clubcms chooch faster while debugging.
- Whoops, missed web.config with annoying assembly redirect.
- Purchases via stripe.  No confirmation yet.
- Feature/dg 7847 sg news list (#827)
- Fix Bulk Email previous email recipients error (#832)
- Merge branch 'main' into feature/DG-7847-sg-news-list
- Fix Bulk Email previous email recipients error
- Mod: ClubCMS DG-7693 (#826)
- Fix previous email getting of recipients (#831)
- Fix previous email getting of recipients
- Update step name
- Provide more useful PR message
- Merge remote-tracking branch 'origin/feature/use-paymentprovider-everywhere' into feature/use-paymentprovider-everywhere
- Prevent attempt to create PR from stage to stage
- Move run defaults above event listener
- Add run defaults
- Inline event list
- Update labeler workflow
- Merge remote-tracking branch 'origin/main' into feature/comp-registrations-via-the-app
- Mod: URegistration: IPaymentProvider-related mods (control is used by Nomads comp registrations)
- Mod: API: Avoid casting from IHostedPaymentGatewayProcessChargeResponse to WindcaveProvider.ProcessChargeDetailResponse.
- Merge branch 'main' into feature/use-paymentprovider-everywhere
- Merge remote-tracking branch 'origin/feature/use-paymentprovider-everywhere' into feature/use-paymentprovider-everywhere
- These pages have been tested to work well with both approved and denial
- Merge branch 'main' into feature/DG-7963_hyundai_stat_chat
- Update DotGolf.ClubCMS/DotGolf.ClubCMS/controls/hyundai-stats-chat/view.html
- Update DotGolf.ClubCMS/DotGolf.ClubCMS/controls/hyundai-stats-chat/view.html
- DG-7846: SG club search: use miles (#825)
- Mod: rMyAccountPaymentConfirmation: Ugraded to user IPaymentProvider. Mod: rMyAccountTopUpConfirmation: Upgraded to use IPaymentProvider. Mod: rMyAccount: Get Windcave WS user credentials from app configuration profile.
- SG news list style fix
- Mod: ClubCMS DG-7693 Hyundai Statchat UI for golfNz handles new data views [SQL needs to have ran first]. - Rounds Played - Courses Played - Best score and club - Best par and percentages
- Update sg-news-list
- Merge branch 'release/stage' of github.com:dotgolf/DotGolf.Trunk into release/stage
- typescript getting confused because <reference directives were adding files to the build from the original location of the shared ts files https://www.typescriptlang.org/tsconfig#exclude
- Ooopss
- Release Stage to Prod NZ (#824)
- Merge branch 'release/prod/nz' into release/stage
- DG-7846: SG club search: use miles
- Release Stage to Prod GBI (#814)
- nz was using some new WHS handicap allowances by accident
- nz was using some new WHS handicap allowances by accident (#823)
- nz was using some new WHS handicap allowances by accident
- Merge remote-tracking branch 'origin/feature/use-paymentprovider-everywhere' into feature/use-paymentprovider-everywhere
- Mod: WindcavePaymentProvider: Added new fields.
- Merge remote-tracking branch 'origin/feature/use-paymentprovider-everywhere' into feature/use-paymentprovider-everywhere
- Mod: rMembershipApplicationpayment: Upgraded to use IPaymentProvider. Mod: rMemberSigjupV2: Upgraded to use IPaymentProvider.
- Mod: rMyAccount: Remove AddXmlElement - not used
- merge commit fix csproj conflicts with self
- Mod: rMemberSignup: Remove AddXmlElement method - no longer required.
- Fix SQL error (#821)
- Fix the ts (#822)
- merge commit fix csproj conflicts with self
- typescript getting confused because <reference directives were adding files to the build from the original location of the shared ts files https://www.typescriptlang.org/tsconfig#exclude
- Remove confusing wording around sprint numbering
- Use non-testing branches
- Merge branch 'main' into feature/use-paymentprovider-everywhere
- Fix: Live: DG-7738 Subscription(s) is plural.. was previously singular so it wasn't showing in the reports area
- Fix: rMemberSignupV2: Remove club email address from the transaction. The previous code was not providing that field.
- Ahhhhhhhhhh ☠️
- Remove superfluous job for matrix
- Remove superfluous job for matrix
- Add stage (testing) branch to list
- Set testing branches
- Remove CONCAT from the query (#820)
- Fix SQL error
- Remove CONCAT from the query
- Mod: rEventCheckout and rEventConfirmation is now using IPaymentProvider to initiate and process payment response from payment gateway provider.
- Interclub Round Report (#810) (#819)
- Interclub Round Report (#810)
- Interclub Round Report (#810)
- Interclub Round Report (#810)
- added new scotland club website domains (#818)
- added new scotland club website domains
- hide rounds on bracket view
- Trim commit hash
- Release Stage to Prod NZ (#817)
- Fix missing pos search and file manager js files
- Fix missing pos search and file manager js files (#816)
- Change back to live release branches
- Fix missing pos search and file manager js files
- Specify `other` group last
- Combine archive_old_release_branches and create_new_release_branches steps
- Specify origin to push
- Specify branching strategy
- Use shallow checkout of old branch to create archive
- Resurrect sprint.yml
- Release Stage to Prod NZ (#808)
- fix logic bug when adding linked clubcoursematrix course markers
- duplicate markers no longer showing in comp setup, composite markers showing again
- Use ToProperCase for Members name adjustment on Round Result print page
- duplicate markers no longer showing in comp setup, composite markers showing again #54365 (#815)
- fix logic bug when adding linked clubcoursematrix course markers
- Merge branch 'main' into fix/composite-markers
- duplicate markers no longer showing in comp setup, composite markers showing again
- Delete sprint.yml
- Merge branch 'main' into feature/DG-7542-england-golf-website-cookie-preferences
- Fix preprint not loading after renaming of terms
- Fix preprint not loading after renaming of terms (#813)
- Merge branch 'main' into fix/preprint-not-working
- Fix preprint not loading after renaming of terms
- Use a separate string replace target for the short commit sha (#812)
- Mod: API: Comp registrations stuff - WIP
- Initial change as an example.
- Merge branch 'main' into norwd-patch-2
- Less aggressive proper casing in reports (#806)
- Make wcrev replacer use git commit sha (#811)
- Use a separate string replace target for the short commit sha
- Merge branch 'main' into feature/make-WCREVReplacer-use-git-commit-sha
- Use `git log` instead of subversion to get pseudo wcrev
- Merge branch 'main' into feature/interclub-support-changes
- Added Round Report view
- Bump target framework
- Release Stage to Prod GBI (#809)
- DG-7916: Interclub Team Member Report viewable for clubs.
- DG-7916: Interclub Team Member Report viewable for clubs. (#804)
- Fix: Vend: Unable to print receipt for sales generated thru DG POS du… (#807)
- Merge branch 'main' into feature/less-aggressive-proper-casing-in-reports
- Fix: Vend: Unable to print receipt for sales generated thru DG POS due to missing "user_id" in the sale. Could be one of the recent updates from Lightspeed - used to work before.
- Less aggressive proper casing in reports
- Change some columns away from [n]varchar max to help sql with memory grants (#805)
- Feature/dg 7862 add attester membership number to score card and gp report (#780)
- Merge branch 'main' into feature/sql-use-less-memory-please
- Change some columns away from [n]varchar max to help sql with memory grants
- Release Stage to Prod GBI (#794)
- Test with non-protected branches
- Merge branch 'release/prod/gbi' into release/stage
- Feature/add commit sha to app UI (#803)
- Jenkinsfileses updated to avoid default checkout after promote step. (#799)
- DG-7916: Interclub Team Member Report viewable for clubs.
- Merge remote-tracking branch 'origin/main' into feature/DG-7862-add-addester-membership-number-to-score-card-and-gp-report
- DG-7902: Implemented Code Review Suggestions
- IPaymentProvider implementation for new signup workflow (#783)
- Merge branch 'main' into features/DG-7699
- Commit hash added to Adweb standard master.
- Show commit hash on Live master page
- Release Stage to Prod NZ (#793)
- Merge branch 'main' into jenkins-avoid-clone-on-promote
- Prod fixes for wrong UI Results and wrong Contest Played (#800)
- Sql tuning - reduce memory pressure and total reads (#802)
- Merge branch 'main' into fix/sql-performance-problems
- bulk email systax exception and reduce reads and memory use in results + score listing by day
- Fix: BuildInfo mod caused index out of range in testing (#801)
- indexes to make less reads
- bulk email systax exception and reduce reads and memory use in results + score listing by day
- Fix: BuildInfo mod caused index out of range in testing
- Prod fixes for wrong UI Results and wrong Contest Played
- Fix wrong Contest Played count (#798)
- Jenkinsfileses updated to avoid default checkout after promote step.
- Fix wrong Contest Played count
- Revert "Experimental Jenkinsfile that avoids unnecessary clones" (#797)
- Revert "Experimental Jenkinsfile that avoids unnecessary clones"
- Experimental Jenkinsfile that avoids unnecessary clones (#796)
- Experimental Jenkinsfile that avoids unnecessary clones
- Experimental Jenkinsfile that avoids unnecessary clones
- Fix 0 results of teams played 2 rounds in a day (#795)
- Fix 0 results of teams played 2 rounds in a day
- Fix permissions
- Specify botgolf PAT
- UI and Results fixes on Interclub Tournaments (#786)
- API mods around comp registrations via the app and implemented method to retrieve transaction response from WindCave (#720)
- Merge branch 'main' into feature/kenneth
- Explicitly grant write all permissions
- Reduce permission scopes
- Expand permissions
- Reduce permission scopes
- Correct PR title
- Correct PR title
- bring up to date with main (#792)
- Merge remote-tracking branch 'origin' into fix/sql-performance-problems
- Merge branch 'main' into feature/kenneth
- Reintroduce full clone
- Merge branch 'main' into feature/kenneth
- Feature/member signup mods (#791)
- amend commit
- fix some bad memory grant queries
- Merge branch 'main' into feature/kenneth
- Don't specify depth
- Merge branch 'main' into feature/interclub-support-changes
- Merge branch 'main' into feature/kenneth
- Fix syntax error
- Release (#789)
- Mod: ClubCMS: SG: member-signup
- Merge branch 'release/stage' of https://github.com/dotgolf/DotGolf.Trunk into release/stage
- Slicer will now pay past unpaid transactions regardless of @FromDate
- Don't check for existing PRs, just keep calm and carry on
- Mod: ClubCMS; member-signup mods
- Fix syntax error
- Slicer will now pay past unpaid transactions regardless of @FromDate (#788)
- Slicer will now pay past unpaid transactions regardless of @FromDate
- Don't check for existing PRs, just keep calm and carry on
- Hotfix/fix interclub tournaments prod issues (#787)
- Cherry pick from feature/interclub-support-changes
- Merge branch 'release/prod/nz' into hotfix/fix-interclub-tournaments-prod-issues
- align column
- minimal sg contact v2 form details (#748)
- UI and Results fixes on Interclub Tournaments
- governing body text taken from config now
- Release/stage (#785)
- Mod: Member Signup: new control property
-  - uses new payment workflow from IPaymentProvider interface
- Removed duplicate tempDir; defined as a single property now.
- dynamic changes to membership online form country name (#784)
- Removed duplicate tempDir; defined as a single property now.
- dynamic changes to membership online form country name
- Mod: API: Remove old event register code.
- Fix whitespace errors
- Fix whitespace errors
- Mod: API: Events registration - request timeslots that are within the competition start and end time
- Put commit sha in BuildInfo for scheduled tasks deploy
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Put commit sha in BuildInfo for scheduled tasks deploy
- Merge branch 'main' into feature/kenneth
- Refactored results static methods to use DI, moved them to single place in core (#759)
- Fix: Vend: Unable to print receipt for sales generated thru DG POS (#781)
- Merge branch 'main' into hotfix/vend-set-valid-vend-user-id-in-sale
- IPaymentProvider implementation in new signup workflow
- Release/stage (#782)
- Update Jenkinsfile
- Update Jenkinsfile
- Fix: Vend: Unable to print receipt for sales generated thru DG POS due to missing "user_id" in the sale. Could be one of the recent updates from Lightspeed - used to work before.
- DG-7903: Added Attester information to General Play report.
- Fix Team Standings query in Pennants/Interclub
- DG-7902: Typo.
- DG-7902: Added attester membership number to scorecard
- fix sql script hardcoded to sct (#771)
- Adweb score history handles not attempteds (#773)
- Merge branch 'release/stage' into fix-script-4414-hardcoded-db-name
- Update Jenkinsfile (#779)
- Club ISV list report so GBI unions can handle their own ISV billing without us running queries (#778)
- Update Jenkinsfile
- Update Jenkinsfile
- Fix no space in html and Pennants query for InProgress tournaments
- Club ISV list report so GBI unions can handle their own ISV billing without us running queries
- Jenkinsfile problem caused Web.config transform to break for Live. (#777)
- Jenkinsfile problem caused Web.config transform to break for Live.
- Jenkinsfile problem caused Web.config transform to break for Live. (#776)
- Jenkinsfile problem caused Web.config transform to break for Live.
- Update on front-end controls for Matchplay
- Test dos2unix diff setting for sql files
- Test dos2unix diff setting for sql files
- Test dos2unix diff setting for sql files
- Test dos2unix diff setting for sql files
- Test dos2unix diff setting for sql files
- Test dos2unix diff setting for sql files
- Merge branch 'main' of github.com:dotgolf/DotGolf.Trunk
- Test dos2unix diff setting for sql files
- Correct DB
- Release/stage (#775)
- Fix bindings file for live
- Adweb score history handles not attempteds (#773)
- Fix: bindings.prod.list file fixed to work with new style builds. (#769)
- Fix whitespace
- Fix bindings file for live (#774)
- Fix bindings file for live
- Merge branch 'main' into feature/adweb-score-history-handles-not-attempted
- Merge branch 'main' of github.com:dotgolf/DotGolf.Trunk
- Convert sql files with dos2unix
- Adweb score history handles not attempteds
- Merge branch 'release/stage' into fix-script-4414-hardcoded-db-name
- Fix whitespace
- Remove BOM
- Fix whitespace
- Fix BOM
- Ignore ActivityLogs with deleted date is not null (#772)
- Ignore ActivityLogs with deleted date is not null
- Remove dead whitespace
- Kill BOM
- fix sql script hardcoded to sct
- Expand and standardise permissions
- Don't fail if labels could not be applied
- DG-7861: Added additional validation to voucher check for multiple use. (#770)
- Release stage to NZ (#739)
- Merge remote-tracking branch 'origin' into feature/results-dependency-injection
- Fix handicap allowance test
- DG-7861: Added additional validation to voucher check for multiple use.
- Mod: Better error reporting from T4.
- #notworkingyet Attempt to remove EzPoco.g.cs and making csproj automatically generate it.
- Comment added warning future maintainers about the other copy of the database building code.
- Cleanup: drop database when we're done generating pocos.
- Removed connection string from .g.cs output to reduce noise.
- Merge branch 'main' into t4-database-builder-in-vs
- Fix: bindings.prod.list file fixed to work with new style builds.
- Update Jenkinsfile
- Update Jenkinsfile (#768)
- Update Jenkinsfile
- Missed a deploy script change for Org
- Missed a deploy script change for Org (#766)
- Missed a deploy script change for Org
- Org shared file paths corrected in csproj (#765)
- Org shared file paths corrected in csproj
- Org shared file paths corrected in csproj (#764)
- Org shared file paths corrected in csproj
- Added bindings.list files for org
- Added bindings.list files for org (#763)
- Added bindings.list files for org
- Added Jenkinsfile for DotGolf.Live.Association
- Added Jenkinsfile for DotGolf.Live.Association (#762)
- Added Jenkinsfile for DotGolf.Live.Association
- Merge remote-tracking branch 'origin' into feature/results-dependency-injection
- fix sql script hardcoded to sct (#761)
- Merge branch 'main' into fix/sql-script-hardcoded-to-sct
- Feature/search other country members via app (#760)
- Merge branch 'main' into fix/sql-script-hardcoded-to-sct
- Update workflow name values
- Merge branch 'main' into fix/sql-script-hardcoded-to-sct
- fix sql script hardcoded to sct
- Remove garbage if statement
- Set target branches to test releases
- Refactored results static methods to use DI, moved them to single place in core
- Ignore ActivityLogs with deleted date is not null (#758)
- Fix inverted conditional
- Fix branch reference
- Don't pass empty body
- Access user input through env to prevent injection attack
- Put cherry-picked commit in run name
- Specify repo to run in
- missed a file from prev commit
- Fix permissions
- Give contents permissions
- Remove duplicate matchplay classes (#746)
- Count parents and assume last is mainline
- Allow empty cherry picks
- Feature/interclub tournaments fix order of rounds (#756) (#757)
- Start of search code for Yuri (app interop score return)
- Ignore ActivityLogs with deleted date is not null
- Fix step name
- fix membership input placeholder typo
- Put cherry-picked commit in run name
- Fix yaml syntax
- Fix typo
- Feature/interclub tournaments fix order of rounds (#756)
- Add sprint workflows (#749)
- Feature/interclub tournaments fix order of rounds (#756)
- Merge branch 'main' into feature/interclub-tournaments-fix-order-of-rounds
- Fix inverted conditional
- Order by RoundNo instead of RoundDate to fix Schedule ordering
- customersatisfactionsurvey csproj runtime identifiers (#755)
- Merge branch 'main' into customersatisfactionsurvey-csproj-runtime-identifiers
- Create hotfix.yml
- Fix branch reference
- Added RuntimeIdentifiers to csproj (#754)
- Added RuntimeIdentifiers to csproj
- Specify `GH_TOKEN` in env
- Don't pass empty body
- Access user input through env to prevent injection attack
- Expand permissions to create new release branches
- Specify repo to run in
- Create sprint.yml
- options & UI modals consistency (#753)
- Fix permissions
- options & UI modals consistency
- Give contents permissions
- Moment references in activitytracker build now (#752)
- Moment references in activitytracker build now
- Moment references in activitytracker build now (#750)
- Data logger now only creates a new index in elasticsearch once a month because there's a max of 1000 (#747)
- Remove whitespace
- Moment references in activitytracker build now
- Count parents and assume last is mainline
- Allow empty cherry picks
- Fix step name
- Fix yaml syntax
- Fix typo
- Add sprint workflows (#749)
- minimal sg contact v2 form details
- DG-7738 #54175 Fixed mapping data back - missing the actual "AutoEntry"
- Data logger now only creates a new index in elasticsearch once a month because there's a max of 1000
- Create hotfix.yml
- Sync changes from 'origin/main' into feature/kenneth
- Remove duplicate matchplay classes
- Remove duplicate matchplay classes (#746)
- Remove duplicate matchplay classes
- Specify `GH_TOKEN` in env
- Expand permissions to create new release branches
- Merge results and API date fixes from main to stage (#744)
- Merge branch 'release/stage' into main
- Bug - results processing result multiple times (#743)
- Mod: make results process easier to debug with some nicer logging
- Fix: results bug introduced by splitting query into 2 bits causing results to be prcoessed several times each
- Mod: cache IsMultiPlayerCompetitionType on result for 30s because it never changes
- Create sprint.yml
- Hot fixes - DG API (#734)
- Merge branch 'main' into hotfix/dg-api-05dec
- Merge main to stage with latest fixes from this morning (#742)
- Merge branch 'release/stage' into main
- Live no longer errors when opening a teams comp that also has Twos results (#736)
- Mod: API: Removed condition for checking DateTimeKind.Unspecified. Since we are always expecting dates from API clients, we should just set the date's DateTimeKind to Utc.
- Mod: API: Removed condition for checking DateTimeKind.Unspecified. Since we are always expecting dates from API clients, we should just set the date's DateTimeKind to Utc.
- Hyndai EDM schema updates (#740)
- Fix: Live DG-7879 (#730)
- Merge branch 'main' into hotfix/dg-api-05dec
- Merge branch 'main' into feature/DG-7879_Fix_live_login_to_club_cms_admin
- NZ bindings update (#738)
- Update Default.aspx.cs
- ClubCMS signup: email subscription type (#726)
- Update script to 4415
- DG-7738 Updated the Hyundai table scripts to only run on NZ db
- Update .gitignore (#735)
- Merge branch 'main' into feature/clubcms-gitignore
- NZ bindings update (#737)
- NZ bindings update
- Live no longer errors when opening a teams comp that also has Twos results.
- Update .gitignore
- Sync latest changes from main branch into feature/kenneth
- Mod: API: England: Remove temp hack to enable ads only for specific app versions.
- Fix: API: Removed temp fix/hack for android devices sending incorrect date. Fix: API: SearchByClubDay - Fix incorrect start and end date/time passed to the stored proc. Fix: API: SearchSlots - App sends slot date with a DateTimeKind.Unspecified and is not converted correctly because we expect the date be in Utc. Set the DateTimeKind to Utc.
- Commit sql script on behalf of matt (#733)
- Commit sql script on behalf of matt
- Merge release/prod/nz to release/stage for trial publish to nz stage (#732)
- sql script filename mod
- Add: Tests: Unit test for comp registrations via app - WIP
- Fix: API: Removed temp fix/hack for android devices sending incorrect date. Fix: API: SearchByClubDay - Fix incorrect start and end date/time passed to the stored proc. Fix: API: SearchSlots - App sends slot date with a DateTimeKind.Unspecified and is not converted correctly because we expect the date be in Utc. Set the DateTimeKind to Utc.
- Merge remote-tracking branch 'origin/main'
- Set site name to live
- Merge remote-tracking branch 'origin/main'
- Fix: ClubCMS: CWMemberUpdateLog.ComputerNo insert: use MemberCode
- Add missing img files
- Fix missing extern references
- Fix capitalisation
- Scotland can add isvs to adweb now Remove hardcoded switching on config country in adweb
- New configprofile option for isv roles allowed in the country
- Add comment to ISVAPI roles about database dependency
- ClubCMS: fix video play issue
- Fix: ClubCMS: CWMemberUpdateLog.ComputerNo insert: use MemberCode (#729)
- ClubCMS: fix video play issue (#725)
- Merge branch 'main' into video-play-fix
- LIVE: DG-7873 (#727)
- Merge branch 'main' into feature/DG-7873_random_scotland_fixes
- Fix live association external js (#731)
- Add missing img files
- Fix missing extern references
- Merge branch 'main' into feature/cwmemberupdatelog
- Merge branch 'main' into feature/DG-7879_Fix_live_login_to_club_cms_admin
- Fix: Live DG-7879 Fix that Live link to port through users from Live to ClubCMS as admin.
- Fix: ClubCMS: CWMemberUpdateLog.ComputerNo insert: use MemberCode
- Feature/adweb isvapi role selection for sct (#728)
- Merge branch 'main' into feature/adweb-isvapi-role-selection-for-sct
- Scotland can add isvs to adweb now Remove hardcoded switching on config country in adweb
- New configprofile option for isv roles allowed in the country
- Add comment to ISVAPI roles about database dependency
- Fix capitalisation
- Enabling Scotland to have OOM
- The loggin user either has the "DG access" or is "SystemAdmin" to see the "Add Item box"
- ClubCMS signup: email subscription type
- Make indentation for csproj files 2 spaces wide
- Fix whitespace errors
- Fix activity tracker node modules (#714)
- Move `RequireExplicitCookieConsent` to features (#723)
- aw_TBClubSetup is now idempotent
- added new domains (#722)
- Fix live external content files (#721)
- Move `RequireExplicitCookieConsent` to features
- Fix whitespace
- Reorder `using`s
- added new domains
- Mod: API: TeebookingController - Use IPaymentProvider for all online payment-related struff.
- Fix live external content files
- Remove @botgolf command documentation
- Delete botgolf_commands_pr_description.yml
- Delete botgolf_commands_issue_comment.yml
- Delete svn-sync.yml
- Delete release_to_stage.yml
- Delete release_to_prod.yml
- Delete enable_auto_merge.yml
- Modify the query to exclude NULL and 1900-01-01 DOBs for Member and C… (#719)
- Modify the query to exclude NULL and 1900-01-01 DOBs for Member and C… (#717)
- Merge remote-tracking branch 'origin/main' into feature/kenneth
- Backmerge release/prod/nz into main (#718)
- Mod: Replace NZSTToUTC to DBTimeZone
- Modify the query to exclude NULL and 1900-01-01 DOBs for Member and CMember records and not over 110 years old
- Fix: Live: can't recalc results when changing comp types (#716)
- Mod: API: Comp registrations via app (WIP) - No ones using this as of now so safe to commit.
- Fix: Live: can't recalc results when chaning comp types
- Core: WindcavePaymentProvider: Implemented method to retrieve payment transaction details after the user has submitted their credit card information and the transaction has been processed by Windcave.
- Core: Member: Add GetLiveCMembersForClub - Returns only live cmember records for this member from the club.
- Merge branch 'main' into feature/fix-activity-tracker-node-modules
- Delete `node_modules` on clean
- ClubCMS: fix video play issue
- Release stage to prod/nz (#713)
- Release stage to prod/gbi (#712)
- Stage find a facility (#711)
- Stage updates on social media links (#710)
- Find a facility (#708)
- Make vortex process results logging work (#707)
- Try to get around utf-8 warning in diffs; if braces. (#709)
- Try to get around utf-8 warning in diffs; if braces.
- Merge branch 'main' into make-vortex-process-results-logging-work
- ClubCMS: SG club-search: search by region
- ClubCMS: SG club-search: UI fixes
- ClubCMS: SG club-search: code cleanup and added properties
- Process results task will only sleep if it has fewer than 5 results left in the queue.  Detail output is now logged.
- MOD: ClubCMS: Updates on social media links (#706)
- Eclectic results pretended it wasn't throwing exceptions.
- Eclectic results task lied about who it is in the logs
- MOD: ClubCMS: Updates on social media links
- Remove approval step for non-deploying jobs (#705)
- Remove approval step
- Remove approval step
- Remove approval step
- Greenfee detail report - removed computerno, updated perf of copypasted code from same report (#700)
- Update Shared/DotGolf.Shared/BusinessLogic/BulkEmail.cs
- Mod: SG club search: reset filter mods and UI / UX mods
- Remove approval step (#704)
- Remove approval step
- Fix: scheduledtasks: push notification task timing out sometimes tryi… (#697)
- Release main to stage (#703)
- Create workflow to release stage from main (#702)
- Create release_to_stage.yml
- Remove whitespace
- Rename release.yml to release_to_prod.yml
- Update README.md (#701)
- Update README.md
- Remove "MOD" commit message prefix (#699)
- Fixed terrible perf getting teebooking email recipients Un-copypasted a giant query
- SG club search: display the arrow down icon on the custom dropdown fields
- Greenfee detail report no longer uses computerno
- Revert "Use YAML anchors to reduce duplication/redundancy"
- Use YAML anchors to reduce duplication/redundancy
- Remove "MOD" commit message prefix
- Create release.yml (#698)
- Create release.yml
- Fix: scheduledtasks: push notification task timing out sometimes trying to do clustered index seeks in parallel on giant table
- Release stage to prod/gbi (#696)
- Stage Sprint 81 (#694)
- MRG: Sync subversion
- Backmerge Stage (#690)
- Fix stage merge conflicts (#693)
- Merge branch 'main' into fix-stage-merge-conflicts
- Merged revision(s) 59681-59721 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Mod: Live Modified TabRptMemberBalances to use CentralMemberCode because what is this ComputerNo? Legacy gtg ........ Mod: Live Is it ComputerNo? No is it CentralMemberCode? Nearly... its meant to be MemberCode! ........ Fix: Live: course marker control not loading course into course select box when marker is pre-selected (e.g. on loading a comp) ........ Mod: Just some test code added that I need as part of the SG import. ........
- Mod: Results: Live: don't allow two lots of competition recalcs to run at the same time - there's a way Live can do a background thread recalc, and it CAN lead to an infinite loop if both are going at once.
- Mod: Results: ScheduledTasks: don't allow two lots of competition recalcs to run at the same time - there's a way Live can do a background thread recalc, and it CAN lead to an infinite loop if both are going at once.
- Mod: Autogenerated poco classes.
- StokeOMeter Create SVActiveQUestionForClub - this table holds the info for which question will get selected in the random list pool
- Mod: Just some test code added that I need as part of the SG import.
- Hyundai Statchat table schema updates adding coloumns
- Backmerge Prod/GBI (#692)
- Backmerge Prod/NZ (#691)
- MRG: Sync subversion
- MOD: ClubCMS: Add Matchplay Competition control
- MRG: Sync subversion
- MOD: Core: DG-7479: Updated SubscriptionRenewalProcessor to send Final payment unsuccessful email for iGolf.
- MRG: Sync subversion
- Mod: CustomerSatisfaction DG-7737 Added stoke o meter to the NavItem under communications
- MRG: Sync subversion
- Mod: CustomerSatisfaction DG-7737 Make everything full screen when menu is loaded Change stuff around so the view for survey participants are the same TODO: Fix the communications part so it loads stuff
- MOD: Live: DG-7854: Fixed HI Format for InterclubTeamMembersDataSource.
- MRG: Sync subversion
- MOD: Live: DG-7854: Fixed HI Format for InterclubTeamMembersDataSource.
- MRG: Sync subversion
- Mod: CustomerSatisafaction DG-7737 Updated import to use "@" as root src Updated some of the imports to use "type" Removed hardcoded Ids to use the one retrieved when the user log in
- Mod: CustomerSatisfaction DG-7737 Updated the SurveyRepository to lok at the new Table so the club user will know which question is actually active for them etc TODO: UI fix as when you update a question the switches go funky
- MRG: Sync subversion
- Mod: CustomerSatisfaction DG-7737 Simplify local NPM runner
- Mod: CustomerSatisfaction DG-7737 -Installed Pinia -export axiosAuthStore as Pinia module extension -Configured project to look at separated tsconfig files -change router import to look at "type"
- Mod: CustomerSatisfaction Auth controllers completes the login via SSO
- MRG: Sync subversion
- Mod: CustomerSatisfaction Installed Pinia v2.0.27 [Latest version as of this commit]
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-club-search control insert
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-club-details: gradient update
- Mod: ClubCMS: Scottish Golf: sg-club-search: placeholder text update
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-club-search: apply branding; layout updates (similar to the news search filters look and feel)
- Mod: ClubCMS: Scottish Golf: sg-club-search: apply branding; layout updates (similar to the news search filters look and feel)
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: reset icon update
- MRG: Sync subversion
- Mod: CustomerSatisfaction DG-7737 - Merged the old Admin views into the Public folder. - Updated a whole bunch of views for this.
- Mod: CustomerSatisfaction DG-7737 Updated vote smiley assets
- MRG: Sync subversion
- Mod: CustomerSatisfaction DG-7737 Updated package.json and package-lock.json
- Delete: CustomerSatisfaction Deletion of the Admin folder as this as been merged into the Public folder and is working well. Deleted the example weather api and class for it
- MRG: Sync subversion
- Update decimal to 7,2 from 5,2 due to ENG having more points
- MRG: Sync subversion
- Fix: Live: possible to get the course selector stuck thinking it is searching, which blanks out the prepopulated home courses in composite course marker control
- Fix activity tracker node_modules (#688)
- DEL: `node_modules`? More like `nuked_modules` amirite?
- MRG: Merge branch 'feature/fix-activity-tracker-node-modules' of github.com:dotgolf/DotGolf.Trunk into feature/fix-activity-tracker-node-modules
- REV: Revert "Mod: ActivityTracker: ignore node_modules"
- Merge branch 'main' into feature/fix-activity-tracker-node-modules
- MRG: Sync subversion
- FIX: Run `npm install`
- Mod: Org ENG Enabling OOM for England -> test flight
- Mod: Org Give super admin or admin the ability to give other users access to OOM
- MRG: Sync subversion
- Mod: sql: live_GenerateOrUpdateCompetitionRoundSegments uses a few less reads (moved a subquery into table variable).
- DEL: Remove non-functioning code (#687)
- DEL: Remove non-functioning code
- MRG: Sync subversion
- Fix: Live: course marker control not loading course into course select box when marker is pre-selected (e.g. on loading a comp)
- MRG: Sync subversion
- Mod: ClubCMS Removed returning object and added comments - Affects players logging in during registration and not from the beginning.
- MOD: Clean workspace after job runs (#686)
- MOD: Clean workspace after job runs
- MRG: Sync subversion
- Mod: Live Is it ComputerNo? No is it CentralMemberCode? Nearly... its meant to be MemberCode!
- MRG: Sync subversion
- Fix: ClubCMS: Tournament Registration: put back Lines 515-525 which were deleted in Rev 58656. This is needed so that the member trying to register into a tournament competition is automatically logged in to the site after entering their credentials (Step 1).
- DEL: Don't `call` just call
- FIX: Fail early on npm error (#685)
- FIX: Fail early on nmp error
- FIX: Clean up whitespace
- MRG: Sync subversion
- Mod: ClubCMS Updated moment.js and moment.min.js as GolfNZ Tournament Details Header was using a method not available in the older version so had bumped this to v2.29.4
- MRG: Sync subversion
- MOD: Build node before build
- Fix: Live: SCOTLAND: Clubs with no course, and only clubcoursematrix entries, can now see their markers properly in comp setup. Side effect - also shows course selector for multicourse NZ clubs like Taupo, hopefully they don't complain.
- FIX: Yeet unneeded clutter!
- MRG: Sync subversion
- Mod: Live Modified "MemberBalancesWithSubsDate" to use CentralMemberCode because what is this ComputerNo? Legacy gtg
- MRG: Sync subversion
- Mod: Live Modified TabRptMemberBalances to use CentralMemberCode because what is this ComputerNo? Legacy gtg
- MRG: Sync subversion
- Fix: ActivityTracker: node_modules svn ignore
- Delete DotGolf.ActivityTracker/DotGolf.ActivityTracker/node_modules d… (#684)
- MOD: Ignore `node_modules` recursively (#683)
- Delete DotGolf.ActivityTracker/DotGolf.ActivityTracker/node_modules directory
- MOD: Ignore `node_modules` recursively
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf club search control initial commit
- TRY: Maybe we only need install and not build? (#682)
- TRY: Maybe we only need install and not build?
- FIX: Gadamit @dotgolf/past-yuri (#681)
- FIX: Gadamit @dotgolf/past-yuri
- MOD: Rebuild node_modules?? (#680)
- MOD: Rebuild node_modules??
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: updated the OpenPlay svg code
- Mod: ClubCMS: sg-news-list: code cleanup; removed unnecessary code
- MRG: Sync subversion
- MOD: Live: DG-7741: Schedule Task for Data extract to be ran on the 01/01/23.
- MRG: Sync subversion
- MOD: ScheduleTasks: DG-7829: Additional logging for Handicap Alerts in Schedule tasks.
- MRG: Sync subversion
- Mod: Association head-office timezone is now part of the config profile.
- MRG: Sync subversion
- Fix: ClubCMS: sg-content-tiles: display the active tiles only (the inactive ones are display on the admin page)
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-content-tiles: allow the admin to define the Default Image to display. This is useful when there are many tiles and they share the same image; we don't need to select an image for each tile.
- MRG: Sync subversion
- Merged revision(s) 59268 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Fix: Org: Casual golfer scores would still show it Org UI even when deleted ........
- Merged revision(s) 59215-59648 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Merged revision(s) 59214 from Trunk/DotGolf.Clubhouse/DotGolf.Live: Merged changes from PR 247 (https://github.com/dotgolf/DotGolf.Trunk/pull/247) into Trunk, so it'll get into main via svn sync.  We needed to do this to allow an SVN merge from Clubhouse to Live/Org. ........
- Release stage to prod/gbi (#677)
- Release stage to prod/nz (#678)
- MRG: Sync subversion
- HOTFIX: Switch login combo is not populated if we're not DotGolf (#676)
- Mod: Autogenerated poco classes.
- Cherry pick 8ce7033
- Fix: Results: Unrounded course handicap was being rounded too early
- MRG: Sync subversion
- Mod: ClubCMS: GetPageLayoutControls: use the DisplayName if it exists
- Add: sql: ClubCMS: added DisplayName to the CWControl table
- FIX: Ooops, missed one (#675)
- FIX: Ooops, missed one
- MRG: Sync subversion
- Fix: Live: results report not showing the playing handicap used to calculate the result.
- MRG: Sync subversion
- MOD: List authors being acknowledged in merge
- MRG: Sync subversion
- Mod: Features: add comment to feature that shouldnt be a thing
- MOD: Summarise Merge Details
- MRG: Sync subversion
- Fix: ClubCMS: Fix from Marcus.
- MRG: Sync subversion
- Mod: ClubCMS: sg-content-block: updated the OpenPlay svg code to add a white background
- MRG: Sync subversion
- Add: BulkEmail: Added CSV recipient upload from MailingList functionality.
- MRG: Sync subversion
- Mod: ActivityTracker: ignore node_modules
- FIX: Delete local archive zips after upload (#667)
- MRG: Sync subversion
- Mod: results: use less stupid query plan for large comps when loading multiround results
- Mod: ClubCMS: casual golf signups tests (NOTE - still need to work out how the previous membership logic should work for EG/NZ when signing people up)
- MRG: Sync subversion
- Fix: Core: casual golf member numbers working for unit tests now
- MRG: Sync subversion
- Mod: sql: add comments to tell David these are already run in NZ1
- Mod: sql: new index on results for CompetitionId, AsAtRoundNo which is filtered on deleteddate to avoid reading lots of deleted rows (previously DeletedDate was an included column)
- MRG: Sync subversion
- Mod: sql: better index on results for RSCompetitionRoundSegmentEntry (actually i was meant to put DeletedDate first but oh well, too late now.)
- MRG: Sync subversion
- MOD: Revert accidentally changed code
- MOD: Added IsMatchplay as checking
- MRG: Sync subversion
- Mod: sql: indexes on CWMailingListRecipient for bulkemail perf
- MOD: Tournament V2: Fix navigation links and link Competition Events from the Calendar to Matchplay Schedule
- Revert b40fd39 (#674)
- Revert b40fd39
- Update README.md (#673)
- Update README.md
- DOC: Update @botgolf command documentation (#671)
- FIX: Correctly determine PR number (#672)
- FIX: Correctly determine PR number
- DOC: Update @botgolf command documentation
- MOD: Add both author and actor as co-authors (#670)
- MOD: Add both author and actor as co-authors
- MRG: Sync subversion
- MOD: Add both author and actor as co-authors (#669)
- Mod: Adweb: no not show union link credentials - SCT have access to adweb 😬
- MOD: Add both author and actor as co-authors
- MRG: Sync subversion
- Fix: ClubCMS: sg-news-detail: LeadImageUrl (which uses the file manager) takes precedence over BannerImageSource
- MOD: Explicitly check that upload succeeded
- MRG: Sync subversion
- Mod: ClubCMS: renamed field labels
- Mod: InjectionAttackBlocker: add more cases
- FIX: Mark some JS as vendored (#668)
- FIX: Mark some JS as vendored
- FIX: Delete local archive zips after upload
- MOD: Update ClubCMS CSPROJ niggles (#666)
- MRG: Sync subversion
- Mod: ClubCMS: renamed the edit button
- Merge branch 'main' into feature/DG-7542-england-golf-website-cookie-preferences
- MRG: Sync subversion
- MOD: Live: DG-7741: Schedule Task for Data extract to be ran on the 01/01/23.
- MRG: Sync subversion
- Fix: Switch login combo is not populated if we're not DotGolf.
- MRG: Sync subversion
- Mod: ClubCMS: PageDto: added FriendlyUrl
- Mod: ClubCMS: added GetPageDetailsByPageControlId
- MRG: Sync subversion
- Mod: ClubCMS: sg-content-block: display an empty element when the page control is newly added to a page; this fixes the overlapping Edit Content Block with the divider line on advanced mode or with another edit button
- MRG: Sync subversion
- Mod: ClubCMS: admin-sg-rte: make the link to view the page friendly
- MRG: Sync subversion
- MOD: Tournament V2: Implement Update of Contest and Round Info for Matchplay
- MRG: Sync subversion
- ADD: Use new `SetCookieConsentType()` helper to outline cookie preferences
- Fix: API: /user-details endpoint - No longer returning inactive membership records (for QR code).
- MOD: Include cookie preferences in mobile
- FIX: Remove BOM
- ADD: Use `GetCookieConsentType()` to conditionally show cookie preferences
- MRG: Sync subversion
- Fix: Results: CreateOrFindResultRecords was returning the same result multiple times
- MRG: Sync subversion
- Mod: ClubCMS: UpdatePageControlSettings: use the user's Association ID from the Passport record when checking if the association user has access to save the page control setting
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: when creating a new page, allow the user to select the type of header to be used: hero image or the standard page header
- MRG: Sync subversion
- Mod: ClubCMS: CreateNewPage: insert the page control property setting records (with their default setting) after inserting the page control
- MOD: Clean up whitespace
- MRG: Sync subversion
- Mod: ClubCMS: admin-hero-swiperjs-v2: display short hero recommended dimensions; on load, select the correct Style
- MRG: Sync subversion
- Mod: clubcms: code to add casual golfers into member table (unit tests incoming)
- Mod: Core: MemberCodeManager can now generate casual golf numbers
- MRG: Sync subversion
- Fix: Navigation: KLY+MSK - Navigation item bubble now updated every 10 seconds and no longer tied with the cached navigation expiry (30 mins). We do get feedback from clubs that the TBP uncaptured count never gets updated after they've actioned on pending TB payments in Live.
- MRG: Sync subversion
- Mod: ScheduledTasks: 10 minutes is not enough for some results recalcs, the task times out
- MRG: Sync subversion
- Fix: TB bubble payment warning email no longer links to dead site, no longer shows bubbles older that 1 year (because we don't let clubs capture them :[ )
- Release stage to prod/nz (#665)
- Release stage to prod/gbi (#664)
- MRG: Sync subversion
- Fix: SSO switch user function was using password instead of passwordhash.
- HOTFIX: Require aproval to push nuget packages (#663)
- FIX: Cherry pick 373675784c and 0169ca6176
- MRG: Sync subversion
- Mod: Core: no longer populate Computerno with dummy values - it's nullable, so we can ignore it.
- MRG: Sync subversion
- MOD: Only push nuget package in production (#662)
- MOD: Only push nuget package in production (#661)
- MOD: Only push nuget package in production
- MOD: Only push nuget package in production
- Fix: Live: Teebooking first-timers email works again
- MRG: Sync subversion
- Fix: Patch UserSecurity data for `matt` user since we don't use the IP check anymore.
- Release stage to prod/nz (#659)
- Release stage to prod/gbi (#660)
- MOD: Attribute release PR to actor by username only (#658)
- MOD: Attribute release PR to actor by username only
- MRG: Sync subversion
- FIX: Specify repo inline (#655)
- FIX: Specify repo inline
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-block: allow the user to define a Video ID (YouTube or Vimeo) for the two-column block; when this is defined, a video play button will be displayed on the image
- Mod: GolfNZ Hyundai chat to show up again 48 hours after decline.
- Mod: Use UserSecurity.IsSystemAdministrator flag to enable multi club login rather than the old DotGolf IP address check.
- FIX: Fetch full history to determine PR description (#652)
- FIX: Fetch full history to determine PR description
- FIX: Use explicit tokens for everything (#651)
- FIX: Use explicit tokens for everything
- FIX: Specify read all token for checkout (#650)
- FIX: Specify read all token for checkout
- FIX: Specify head branch explicitly (#649)
- FIX: Specify head branch explicitly
- FIX: Correctly assign permissions and PR history (#648)
- FIX: Correctly assign permissions and PR history
- TRY: Just grant maximum permissions (#647)
- TRY: Just grant maximum permissions
- MRG: Sync subversion
- FIX: Expand permissions to read-all by default (#646)
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: allow the user to clear the theme selection
- FIX: Expand permissions to read-all by default
- FIX: Specify base repository (#645)
- FIX: Specify base repository
- FIX: Correct syntax error (#644)
- FIX: Correct syntax error
- MOD: Hide temporary shared files
- ADD: Create workflow to create release PRs (#642)
- ADD: Create workflow to create release PRs
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: use the decodeURIComponent to decode the tag value; display tag name on the tag page only
- HOTFIX: Create bindings.prod.list (#641)
- Create bindings.prod.list
- MOD: Make packages use debug versions in debug (#640)
- MOD: Use config specified version of packages
- MRG: Sync subversion
- Fix: results: prevent thousands of RSResultEntryScore rows from joining to other tables and wrecking Results performance
- Update DotGolf.Core.csproj
- MRG: Sync subversion
- Fix: Performance improvement in app find potential friends query.
- MRG: Sync subversion
- Fix: Live: Bad results plan
- Mod: API: removed recompile from GetActiveScorecards and conditional query plans to avoid sniffing
- MRG: Sync subversion
- Fix: API: temp table not used in GetActiveScorecard - causing problems when load is high so will kill it
- MRG: Sync subversion
- Mod: AdWeb: Slicer: Implemented slice for functions online registrations. [DG-7733]
- MRG: Sync subversion
- Fix: results task: restart every 10m in case theres a publish - we don't want old code hanging around
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-hero-swiperjs-v2: allow the user to configure it to be a short or full size hero; properly display the DisplayOrder value under the existing Order column
- MRG: Sync subversion
- Mod: results: undo performance hack that didn't work
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: admin-sg-content-block: display the cta button preview when the LinkText and LinkUrl are defined
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: sg-content-block: do not make the OpenPlay logo embellishment transparent
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: sg-content-block: show the Edit button on edit mode
- Release stage to GBI (#638)
- Release stage to NZ (#637)
- MOD: Enable automerge on release branches (#639)
- MOD: Enable automerge on release branches
- MRG: Sync subversion
- Mod: sql: ClubCMS: removed the Theme control property from the SG RTE control
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-news-list: ThumbnailImageUrl (or LeadImageUrl) display
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-news-detail: LeadImageUrl display
- MRG: Sync subversion
- MOD: Tournament V2: Update favicon.ico and update Titles
- Mod: ClubCMS: added saving of LeadImageUrl and ThumbnailImageUrl
- Mod: ClubCMS: added saving and retrieving of LeadImageUrl and ThumbnailImageUrl
- MRG: Sync subversion
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: Scottish Golf: insert admin-news-article-v2 control into CWControl and its properties
- Mod: ClubCMS: Scottish Golf: sg-rte: soft delete the Theme control property (don't need it anymore)
- HOTFIX: Bring accross changes missing from stage build (#636)
- Mod: CWNewsArticle: add columns: LeadImageUrl and ThumbnailImageUrl - we'll need these new columns as we're going to use the ckeditor File Manager for the article lead image and the thumbnail image
- FIX: Update Core Tournaments
- MRG: Sync subversion
- Add: ClubCMS: admin-news-article-v2 control: uses the File Manager for the lead and thumbnail images; this'll still display the image uploaded using the old file uploader
- HOTFIX: Bring accross changes missing from stage build (#635)
- FIX: Update Shared Tournament models
- HOTFIX: Bring accross changes missing from stage build (#634)
- FIX: Update TournamentRegistration
- MRG: Sync subversion
- HOTFIX: Bring accross changes missing from stage build (#633)
- Fix: ISVAPI unit tests broken after DataSharingCountry refactor.
- FIX: Add TournamentType
- MRG: Sync subversion
- HOTFIX: Bring accross changes missing from stage build (#632)
- Mod: results: revert snapshot iso change now that perf storm has passed
- FIX: Ok fsck it! Just sync all of tournament!
- MRG: Sync subversion
- Mod: Refactored DataSharingCountry to avoid duplicated configuration code for each union.  Enabled Scotland calling the other unions for data (since we already have licenses in place for OCS, this is permitted) BUT not the other unions calling Scotland (they will still use the OCS third party API until cutover).
- Mod: ClubCMS/GolfNZ Hyundai stat chat spam fix
- HOTFIX: Bring accross changes missing from stage build (#631)
- MRG: Sync subversion
- FIX: Update union api solution
- MOD: Tournament V2: Fix listing as it is loading slow
- HOTFIX: Bring accross changes missing from stage build (#630)
- FIX: Update buildspec
- MRG: Sync subversion
- MOD: Tournament V2: Fix Priority when adding new players or pairs
- HOTFIX: Bring accross changes missing from stage build (#629)
- FIX: Update DotGolf.Live.sln
- HOTFIX: Bring accross changes missing from stage build (#628)
- FIX: Delete AspNetCoreRateLimit
- MRG: Sync subversion
- Mod: Live Final piece in theory of the "Print Card" saga. Pre-generate in bulk card admin should be all good now
- HOTFIX: Bring accross changes missing from stage build (#627)
- FIX: Update assembly infos
- MRG: Sync subversion
- HOTFIX: Bring accross changes missing from stage build (#626)
- FIX: Update more controls for ClubCMS
- Fix: SG: Fixes Admin SEO success/failure notification popup.
- HOTFIX: Bring accross changes missing from stage build (#625)
- FIX: Add new controls missing from stage
- MRG: Sync subversion
- Add: SG: New control property for Admin SEO OG.
- MRG: Sync subversion
- Fix: Live: results perf getting scores - using silly index on NZCRDATA
- Fix: Live: results perf getting scores - using silly index on NZCRDATA
- MRG: Sync subversion
- MOD: Tournament V2: UI changes
- Mod: ClubCMS: Scottish Golf rte: code cleanup; removed unused code
- Add: ClubCMS: Scottish Golf: rte admin control
- HOTFIX: Bring accross changes missing from stage build (#624)
- FIX: Add interop controller
- HOTFIX: Bring accross changes missing from stage build (#623)
- FIX: ALLLLLL THE CSPROJES
- MRG: Sync subversion
- HOTFIX: Add files missing from stage build (#622)
- FIX: Correct assembly info
- Mod: Results: snapshot isolation panic button because results is deadlocking 🚨
- HOTFIX: Add files missing from stage build (#621)
- FIX: Correct csproj references
- HOTFIX: Add files missing from stage build (#620)
- FIX: Update type- and javascript files
- MRG: Sync subversion
- Mod: Clubcms: casual golf signup uses new system emails and we can start to refactor it for England now
- Fix: ClubCMS: don't try show maketimeplay9 for nonaffiliates
- hotfix/add files missing from stage build (#619)
- FIX: Add missing changes
- MRG: Sync subversion
- Mod: ClubCMS: renamed EgCreateNewPage to CreateNewPage to make it generic. It'll now be used for Scotland as well. -Make styleId nullable -Revert update done on GolfNzCreateNewPage
- HOTFIX: Add files missing from stage build (#618)
- HOTFIX: Update SearchClubEventsResponse.cs
- HOTFIX: Add files missing from stage build (#617)
- FIX: Add missing files
- DOC: Update readme (#616)
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-rte control insert
- Add: Scottish Golf rte: ckeditor config file
- MRG: Sync subversion
- Upd: SG: National Champtionships /tournament-page UI styling.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-block: soft delete all the control properties (don't need them anymore)
- Hotfix: Add v80.1 to stage (#615)
- HOTFIX: Backwards logic bug when detecting failed schema scripts.
- Fix: Backwards logic bug when detecting failed schema scripts.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-image-video: removed unused code
- Mod: ClubCMS: Scottish Golf: admin-sg-content-block: display newly selected image in the preview area
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-block: get the data from the CWJsonContent table
- HOT: Fix missing Jenkins changes from GitHub migration
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-image-video: display the save success message after saving
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-content-block: converted to use the File Manager for the images, and save the data in the CWJsonContent table
- MRG: Sync subversion
- Mod: Results: use some pointless function call so that sql will use the cool new IX_RSResult_RSEntryId index because it's always more selective than any of the CompetitionId-based indexes we have currently - way less reads.
- MOD: Tournament V2: Enable Matchplay for Clubs
- Mod: sql: tinkered with wa_TBSearchByClubDayV2_Search and managed to remove one of the index hints, but the other wouldnt budge - still tries to use IndexClubSettingsForDate :(
- DOC: Update readme (#613)
- MRG: Sync subversion
- Upd: SG: Updated SG details.
- MRG: Sync subversion
- Fix: wa_tbsendpaymentwarningsjob had index hint from dead index
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: removed unused code; fix tiles carousel
- MRG: Sync subversion
- Mod: Live Handling of wording print and generated for bulk card admin
- MRG: Sync subversion
- Mod: Live Forgot to commit MasterPageOptions in the last commit.
- Mod: Live - Extend MasterPageOptions to expose MemberCodeLength and LocalMemberCodeLength -- If the length are the same we will hide the subtext of "x club members enter last x digits" - Minor mod to CSS to expand number input box to handle 10 digits
- MRG: Sync subversion
- MRG: Sync subversion
- Mod: Live Change "Visitor Report" subtext from "...printed" to "...created"
- Mod: ClubCMS: update scrollreveal-min.js version to v4.0.7
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: removed unused code
- MRG: Sync subversion
- Mod: Live Change "Pre-Print cards" to "Pre-Generate Cards"
- Mod: Live - Wording change to Generate instead of Print - Hide area not applicable to non-physical card printing area. - Mod the actual print method in JS file to show generate or print. -- make it pass null in driver id and print format when its not a physical card printing club - Mod API to handle the new null in printerID and printFormatID.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: reveal animation
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-news-list: grid layout style updates
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: sg-news-list: return to the first page when doing a new search
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: sg-news-list: address flickering of "sorry, no articles found"; removed unused code
- MRG: Sync subversion
- Mod: sql: new rssresult index for the getscores query: for comps with lots of rounds, the reads get really high
- MRG: Sync subversion
- Mod: sql: remove unused index
- MRG: Sync subversion
- Fix: ScheduledTasks: error because someone has two passports. also should require a billing token to have been present at some point #54043
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-news-list updates: - Allow to display news articles based on the tag parameter--to be used on the Tag page - Added display of Header Text and View All link on the two other layouts options
- MRG: Sync subversion
- FIX: Tournament V2: Fix test failed
- MRG: Sync subversion
- MOD: Tournament V2: Implement Matchplay Results Entry
- Fix: ClubCMS: rMyAccountTopUpConfirmation: Pay with saved card now handles declined transactions and no longer shows "successful" message. #54068
- MRG: Sync subversion
- Mod: Live - Change "Score Card Printing Settings" to "Score Card Setting" - Change the VM validation on saving to check if the club has physical card printing. else we don't care about the required flag for the printer assignments. - Hiding irrelevant views to non-card printing clubs
- Mod: Live Wording change for the checkbox to "Allow card creation from kiosk without a tee booking"
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf: admin-news-article: add custom style for the SG template
- Mod: ClubCMS: Scottish Golf: sg-news-detail: display news article tags
- Mod: ClubCMS: Scottish Golf: sg-news-list: horizontal layout: updated padding style
- Mod: ClubCMS: Scottish Golf: sg-news-list: horizontal layout: display message if there's no articles found; hide the carousel pagination if there's no articles to display
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: news detail page: fix padding at the bottom of the page
- DEL: Remove unused vars (#612)
- DEL: Remove unused vars
- MRG: Sync subversion
- Mod: ClubCMS: sg-content-tiles: for the slider, call revealGeneric; for grid, call revealText
- MRG: Sync subversion
- Mod: Live Change text for non-card printing clubs in GBI to use "Create Card"
- Fix: ScheduledTask: Unassigned member account credit email notifications now sent to "support@dotgolf.freshdesk.com". The email address helpdesk@golf.co.nz no longer valid after migrating to Office 365.
- MRG: Sync subversion
- Mod: sql: new casual golf welcome email
- MRG: Sync subversion
- Fix: Live: xml showing in member account reconciliation report
- MRG: Sync subversion
- Fix: results tests: whoops typo
- MRG: Sync subversion
- Mod: svn ignore some js in clubcms
- MRG: Sync subversion
- Mod: ClubCMS: AuthHandler can be used to other stuff now. changed login pages to not show handicap performance link for social members because they can't log into the public site
- MRG: Sync subversion
- Fix: Build: missing language
- MRG: Sync subversion
- Fix: API: TB search error
- MRG: Sync subversion
- Fix: API: /user-details endpoint no longer crashes if a person does not have a valid membership category. #54030
- MRG: Sync subversion
- Mod: Live/Kiosk - Change from comparing horrendous country code to the cool new "EnablePhysicalScorecardPrinting" - Checks for wording in Kiosk. If it is card printing then use print else use generate.
- MRG: Sync subversion
- Mod: NZ: language term for casual golfers
- MRG: Sync subversion
- Mod: ClubCMS: Functions: Online registrations - remove the online transaction fee. I went ahead to make this across the board since only Futures clubs are using this and they are absorbing the transaction fees for online registrations. I'm gonna tidy this up next sprint. Fix: rEventCheckout: Functions: Should check for the total amount and not the transaction fee to decide whether to redirect the user to the payment gateway page.
- MRG: Sync subversion
- Fix: Tests: subs setupteardown dispose methods called in wrong order
- Mod: Core: add mygolf login feature for England - this will be used when redirecting casual golfers to the login page
- MRG: Sync subversion
- Fix: sql: missing required parameter in casual golf verify email
- MRG: Sync subversion
- Mod: Live - Toggling "Print Card" to only display in NZ and hiding it in other Unions - Changed the "Help save the trees!..." text so its dynamic between unions and will show their respective app name defined in their respective union C# class. Set via MasterPageOptions
- MRG: Sync subversion
- Mod: results: remove redundant joins and where condition in GetScoresRelevantToResult
- MRG: Sync subversion
- Fix: adweb: could not scores merge from deleted person
- MRG: Sync subversion
- Fix: adweb: could not scores merge from deleted person
- MRG: Sync subversion
- Mod: Live Hiding "Print Card (Non-Affiliate)" for all unions
- Mod: adweb: easier to search in for member numbers
- MRG: Sync subversion
- Fix: Teebooking: zillions of duplicate sql plans when searching friends
- MRG: Sync subversion
- Fix: Live: tabmember member page update uses dapper now and code works
- MRG: Sync subversion
- Mod: Live: tabmember member page update uses dapper now
- MRG: Sync subversion
- Fix: sql syntax error
- MRG: Sync subversion
- Fix: ClubCMS: zillions of duplicate sql plans
- MRG: Sync subversion
- Fix: Teebooking: searchclubday zillions of duplicate sql plans
- MRG: Sync subversion
- Fix: Teebooking: zillions of duplicate sql plans when calculating charge
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: added a control property to sg-content-tiles
- Mod: ClubCMS: Scottish Golf: admin-sg-content-tiles: import sg-content-tiles css
- MRG: Sync subversion
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: admin-sg-content-tiles: style fixes
- Fix: ClubCMS: Scottish Golf: admin-sg-content-tiles: fixed image upload / select
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: added control properties to admin-sg-content-tiles
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-content-tiles: removed duplicate add new tile link
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin-sg-content-tiles: added missing showThemeOptions property
- MRG: Sync subversion
- Mod: ClubCMS: GolfNzCreateNewPage: use the sg-rte control for SG
- MRG: Sync subversion
- Mod: API: #app-comp-registrations - Initial commit.
- Mod: Upgraded moar old pxaccess stuff to new IPaymentProvider.  This one got a little nastier because I discovered references to our Shop account (old DPS) which we are still apparently using for member account topups.  #ohwell
- Mod: Live If not NZ hiding the "Save and Print"
- MRG: Sync subversion
- MOD: Tournament V2: Implement Tournament Bracket Schedule for Players and Pairings
- MRG: Sync subversion
- Add: sql: system email for casual golf welcome
- Mod: Live DG-7756 - Wording change for all union from "Save" to "Create Card" - Hiding "Save and Print" apart from NZ
- MRG: Sync subversion
- Mod: ClubCMS: admin-hero-swiperjs-v2: removed unnecessary code
- Add: ClubCMS: Scottish Golf: insert the sg-rte control
- Add: ClubCMS: Scottish Golf: add sg-rte control
- MRG: Sync subversion
- Mod: UFPGateway updated to use IPaymentProvider.
- MRG: Sync subversion
- Fix: ClubCMS: GetPageLayoutControls: exclude soft deleted CWLayoutControl records
- MRG: Sync subversion
- Mod: Upgraded ClubCMS tee booking to use IPaymentProvider for auth/purchase transactions.  This helps get us ready for Stripe.
- MRG: Sync subversion
- Mod: Live Wording change from "Create (Non-Affiliate)" to "Create Card (Non Affiliate)"
- MRG: Sync subversion
- Fix: ClubCMS: UpdatePageControlSettings: use the user's Association ID from the Passport record when checking if the association user has access to update the page control
- MRG: Sync subversion
- Fix: ClubCMS: AddControl & DeleteControl permissions: for association websites (e.g. SG), get the user's association ID from the passport record and use this to check the permissions. Previously, UserSecurityId.ClubId was being used, which isn't applicable to association users because their ClubID is 0.
- MRG: Sync subversion
- Fix: ClubCMS: GetAdminEditControlViewModel & UpdatePageControl permissions: for association websites (e.g. SG), check the user's association ID from the passport record
- MRG: Sync subversion
- Fix: Live: score listing by day report can use a shitload of RAM with bad plan - recompile is best option here
- MRG: Sync subversion
- Fix: Live: results query causing excessive memory use (1GB) when recalcing results for a whole comp
- MRG: Sync subversion
- Fix: ClubCMS: Build
- MRG: Sync subversion
- Mod: Since I'm in the area anyway, removed the Verhoeff check digit from Scotland.  OCS hasn't been using it anyway, so there is no point having this going forward.
- MRG: Sync subversion
- Mod: History Export: don't export binary columns, convert rowversion to bigint. Both of these are because AWS Snowflake crashes when trying to read them
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: apply revealText animation
- Mod: Core: Remove poco partial class - it's messing with HistoryExportService and shouldnt be there anyway
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: admin-sg-content-tiles: show the hidden / inactive tiles (but with white overlay); fix positioning of the admin buttons
- Mod: Subs: Invoice report: Displaying category description on a base subs item - Look at [CMemberItem/NonAffiliateItem].CategoryId first (if not null)when joining to the Category table.
- Check for PR merge command on edit and sync events (#611)
- Check for PR merge command on edit and sync events
- Actually make the reaction from the determined link (#610)
- Fix reactions link
- Actually make the reaction from the determined link
- Delete debug.yml (#609)
- Delete debug.yml
- Add reaction to PR body when requesting merge (#608)
- Add reaction to PR body when requesting merge
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: apply theme to tile--v2
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: make the tile-grid display four items in a row instead of three
- Fix syntax error by debugging botgolf commands (#607)
- Fix syntax error by debugging botgolf commands
- Remove `commit_comment:` event (#606)
- Remove `commit_comment:` event
- Fix syntax errors (#605)
- Fix syntax errors
- Create debug.yml (#604)
- Create debug.yml
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: container style update
- Mod: ClubCMS: Scottish Golf: member details style fixes / mods
- MRG: Sync subversion
- Mod: ScheduledTask Updated Usings.
- Merge branch 'main' into t4-database-builder-in-vs
- Fix: Horrible leading commas.
- MRG: Sync subversion
- Mod: HistoryExporter: better handle stream dispose
- Update Shared/DotGolf.Core/DotGolf.Core.csproj
- Cleanup: Removed leftover DotGolf.Core.csproj.
- Fix: Moved files to the correct place.
- Create bindings.stage.list (#603)
- Create bindings.stage.list
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: removed the edit elements, and added link to edit the control
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: add grid style; removed unnecessary code
- Mod: ClubCMS: Scottish Golf: admin-sg-content-tiles control: add update style function;
- Mod: ClubCMS: Scottish Golf: add Style control property to sg-content-tiles
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: removed unused code
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf: admin-sg-content-tiles control
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-menu: apply the menu override URL if it's defined
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: Description field style updates
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: added white background colour to the edit form
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: show the tile footer only if LinkText is defined
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: removed unused code
- MRG: Sync subversion
- Mod: ClubCMS: golfnz-admin-rte-block: don't convert "btn-link" links on save (convert it only when displaying the content using the golfnz rte control)
- MRG: Sync subversion
- Fix: ClubCMS: club showing incorrect address (mix of club-entered and F&P data) #5009673 . No more ClubsController caching in debugmode, it was annoying
- MRG: Sync subversion
- FIX: Hooray! More ternaries 🙃 (#602)
- FIX: Hooray! More ternaries 🙃
- Mod: sql: EG oom points are TOO DAMN HIGH
- MRG: Sync subversion
- Fix: Subs: ProcessRenewals: We should only populate the CategoryId column on a CMemberItem/NonAffiliateItem record only if it's a Subs line item. [DG-7124] https://dotgolf.atlassian.net/browse/DG-7124
- FIX: Specify test file directly (#601)
- FIX: Specify test file directly
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: keep the arrows positioned at the right hand side when there's no defined header text
- FIX: Ternary? I hardly know her? (#600)
- FIX: Ternary? I hardly know her?
- Mod: ClubCMS: Scottish Golf: rte hr style updates
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: rte ordered list style updates
- MOD: Oh god try a three way ternary op (#599)
- Merge branch 'main' into norwd-patch-1
- Delete ecr_registry_id.Stage.dat
- Delete ecr_registry_id.Production.dat
- Delete ecr_registry_id.Development.dat
- Delete ecr_registry_id.Stage.dat
- Delete ecr_registry_id.Production.dat
- Delete ecr_registry_id.Development.dat
- MRG: Sync subversion
- MOD: Oh god try a three way ternary op
- Fix: Live Added permission to "Member Address and Subs Details" so it will only appear if club has subs enabled
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: refresh tile carousel layout after inserting a new slide
- MRG: Sync subversion
- Mod: Autogenerated poco classes.
- Mod: Subs: ProcessRenewals: Update category at start date, not at renewal process. [DG-7124] https://dotgolf.atlassian.net/browse/DG-7124
- FIX: Apparently jenkins doesn't support `new File()` (#598)
- FIX: Apparently jenkins doesn't support `new File()`
- MRG: Sync subversion
- Fix: Live Fix asset permission for "Membership Prepayments" this is subs product enabled clubs only
- FIX: Specify solution root to dat file (#597)
- FIX: Specify solution root to dat file
- FIX: Replace `readfile` with `new File(...).text` (#596)
- FIX: Replace `readfile` with `new File(...).text`
- TRY: Comment out potential issue to narrow down cause (#595)
- TRY: Comment out potential issue to narrow down cause
- FIX: Separate `ECR_REGISTRY_ID` from `ECR_REGISTRY_ID_DAT` (#594)
- FIX: Separate `ECR_REGISTRY_ID` from `ECR_REGISTRY_ID_DAT`
- FIX: Oh god make jenkins stop dammit (#593)
- FIX: Oh god make jenkins stop dammit
- FIX: Wrap `node{}` around ECR registry id (#592)
- FIX: Wrap `node{}` around ECR registry id
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: refresh tiles layout after saving a content to keep the correct spacing between tiles
- Fix: live: move booking proc updated to use new indexes on deleteddate/deleted
- FIX: Simplify filepath (#591)
- FIX: Simplify filepath
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: replaced the hardcoded "See more" text with the LinkText value
- FIX: Just set the `ECR_REGISTRY_ID` as part of the job env (#590)
- FIX: Just set the `ECR_REGISTRY_ID` as part of the job env
- Revert "DEL: Remove `@echo off` for debugging" (#589)
- Revert "DEL: Remove `@echo off` for debugging"
- MRG: Sync subversion
- MRG: Sync subversion
- Mod: scheduledtasks: RangeBookingAutoGenerateSheetTask throws errors to program level on failure
- DEL: Remove `@echo off` for debugging (#588)
- DEL: Remove `@echo off` for debugging
- Mod: scheduledtasks: log to Exceptionlog on failure so errors are more visible
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: last page content block style update, sg content block style update, partner style update
- Revert #586 (#587)
- Revert "TRY: Debug env"
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: rte content block style updates
- TRY: Debug env (#586)
- TRY: Debug env
- MRG: Sync subversion
- Fix: sql: accidentally checking eligibility across 2 days not 1
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: sg-news-detail: updated the edit button text
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: updated news article pattern opacity; added margin below the date
- MRG: Sync subversion
- Mod: sql: update proc wa_TBGetPlayerFriendsEligibility to use less bad index (was using TBTimeslotEntry.IndexCreatedBy, which was reading way too much crap)
- MRG: Sync subversion
- Upd: SG: My-Overview styling updates.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: news article image style update
- Mod: ClubCMS: Scottish Golf: sg-news-detail: use convertNewsArticleImagesSg for styling images within the news article rich text
- Mod: ClubCMS: added convertNewsArticleImagesSg
- MRG: Sync subversion
- DEL: Remove debuggers (#585)
- DEL: Remove debuggers
- Fix: query not using index on TBTimeSlot (change of behaviour - now only checks if friends are booked at the club we are checking)
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: convert links to link buttons when "btn-link" CSS class is used
- TRY: Debug environment before *and after* `dgCheckAllBuildVariablesPresent` (#584)
- TRY: Debug environment before *and after* `dgCheckAllBuildVariablesPresent`
- MOD: Bump DotGolf.Clients.UnionAPI version (#580)
- MOD: Bump DotGolf.Clients.BookingService version (#582)
- Merge branch 'main' into norwd-patch-1-3
- Merge branch 'main' into norwd-patch-1-1
- MOD: Bump DotGolf.Clients.ISVAPI version (#581)
- MOD: Bump DotGolf.Clients.WHSAPI version (#579)
- DOC: Update @botgolf commands documentation (#583)
- DOC: Update @botgolf commands documentation
- MRG: Sync subversion
- Fix: wa_TBGetMemberFriendsEligibility performance - was getting up to 6 million reads - uses good index now
- MOD: Bump client version
- MOD: Bump client version
- MOD: Bump client version
- MOD: Bump client version
- MOD: Bump DotGolf.Clients.BookingService version
- MOD: Bump DotGolf.Clients.ISVAPI version
- MOD: Bump DotGolf.Clients.UnionAPI version
- MOD: Bump DotGolf.Clients.WHSAPI version
- MRG: Sync subversion
- UnFix: query not using index on TBTimeSlotEntry
- Fix: query not using index on TBTimeSlotEntry
- Fix: query not using index on TBTicketEntry
- MRG: Sync subversion
- Fix: ScheduledTasks: handicap ranking times out - actually fix the problem now
- MRG: Sync subversion
- Fix: Org Added asset permission checking to "Membership Totals By Club"
- Fix: Live A whole bunch of reports needed more perm checks especially asset group. So these have been added now.
- MRG: Sync subversion
- Fix: ClubCMS: Scottish Golf: news detail: Publish Date
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf template: removed unused code
- FIX: Resolve merge conflicts (#578)
- Fix: ClubCMS: datetimepicker: fixed the display of the calendar prev and next arrows used to navigate the months
- Mod: Autogenerated poco classes.
- Merge branch 'main' into svn-sync-fix
- ADD: Competition Table: Add MatchplayBracketCount
- Mod: sql: reduce reads on wa_TBSearchByClubDayV2_Search by using filthy index hint
- Fix: Jenkins: API: TestObjectTracking.cs missing from previous commit.
- Fix: API: Jenkins - Missing from previous commit. Related to [DG-7611]
- Mod: Live Added check to make sure that the club has Subs then show this report
- Mod: API: Replace NZ-specific date time conversions (maybe more). [DG-7611] Fix: API: Unit Tests: Tee booking fair use policy test case no longer failing due to incorrect test data. Set up tee sheet 1 week in advance but the club only allows access to tee sheet 7 days in advance. Some of the days (late in the week) will not be visible so extend the TBClubSetting.DaysInAdvance from 7 to 14 days.
- MRG: Sync subversion
- Mod: Live Removing ENG permissions and reinstating their current on from DB. This is due to the fact that the one they have is specific to iGolf.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: added Create News Article link button to the news list control; admin style updates
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: news list: display Publish Date in local time
- Mod: ClubCMS: Scottish Golf: news detail: display Publish Date in local time
- MRG: Sync subversion
- Mod: TBTimeslot indexes: add an extra include, to replace SlotDate index as well
- Mod: Blatantly copied and adapted the DatabaseBuilder code to work inside Visual Studio as a T4 template.
- MRG: Sync subversion
- Fix: Don't trip up the database builder.
- MRG: Sync subversion
- Fix: Don't trip up the database builder.
- Fix: Breaks on databases where we don't have club 700.
- Fix: ScheduledTasks: member ranking query times out - attempt to fix it
- TRY: Don't clean workspace to narrow down problem (#576)
- TRY: Don't clean workspace to narrow down problem
- FIX? Idek, try multinode? (#575)
- FIX? Idek, try multinode?
- FIX: Include slack notification in `node{}` (#574)
- FIX: Include slack notification in `node{}`
- MRG: Sync subversion
- FIX: Don't ask, just copy as I say! (#573)
- FIX: Don't ask, just copy as I say!
- Fix: adweb: can now add new ISV credentials for scotland
- Mod: ClubCMS: Scottish Golf news rte style updates
- FIX: Delete the old stuff before clobbering it (#572)
- FIX: Delete the old stuff before clobbering it
- MOD: Wrap cleanup in `node{}` (#571)
- MOD: Wrap cleanup in `node{}`
- MRG: Sync subversion
- Fix: Live DG-7756 Updated permissions to handle access. This is accessible to all if it is in Scotland and only club 564 in NZ
- Mod: ExtQueryReport Schema Updated the schema to include Scotland
- MRG: Sync subversion
- FIX: Correctly reference Groovy library (#568)
- Fix: Live: GreenFeeTimeLine report timing out from index change - fix typo
- Merge branch 'main' into norwd-patch-1-1
- Fix: Live: GreenFeeTimeLine report timing out from index change
- FIX: Correctly reference Groovy library (#570)
- FIX: Correctly reference Groovy library (#569)
- FIX: Correctly reference Groovy library (#567)
- MRG: Sync subversion
- FIX: Correctly reference Groovy library
- FIX: Correctly reference Groovy library
- FIX: Correctly reference Groovy library
- FIX: Correctly reference Groovy library
- Mod: ClubCMS: Scottish Golf: news list: - display Publish Date in local time - added the Edit Article button - style update
- MRG: Sync subversion
- Fix: Live: timeout fetching forced green fee details for timeslot
- Fix: Live: timeout fetching forced green fee details for timeslot
- MRG: Sync subversion
- Mod: dropping dga_NightlyNZCRDataDifferentialsAndCountUpdate proc DG-7774 Drop procedure dga_NightlyNZCRDataDifferentialsAndCountUpdate in favour of NightlyNZCRDataDifferentialsAndCountUpdateTask scheduledtask
- MOD: Simplify README (#566)
- MOD: Simplify README
- MOD: Add disclaimer on @botgolf commands (#565)
- MOD: Add disclaimer on @botgolf commands
- MRG: Sync subversion
- MOD: Merge PRs on behalf of the org (#564)
- MOD: Merge PRs on behalf of the org
- Mod: sql: add BlockTimeSlotId to index IX_TBTimeSlot_SlotDate for first tee time of day query in searchbyclubday
- MOD: Make all PR merges on behalf of the org (#563)
- Fix: Live: MemberAccountReconciliation times out a lot - fix it so that the recursive balance update
- MOD: Make all PR merges on behalf of the org
- TRY: Merge PRs on behalf of the org (#562)
- TRY: Merge PRs on behalf of the org
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: content tiles: style update
- MRG: Sync subversion
- Mod: ClubCMS: content tiles:
- MRG: Sync subversion
- Mod: Live MembersAccountActivity Changed the old ExtQueryUID link to look at the new ExtLink
- MOD: Add debugger (#561)
- MOD: Add debugger
- MRG: Sync subversion
- Fix: Live This is why "MemberListingRenewalCategory" it wasn't showing
- MRG: Sync subversion
- DEL: Nuke 💥 Shared/_deploy/dotgolf directory (#560)
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- Fix: Live: excessive read when loading startsheet because of starttee rubbish
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MOD: Switch to separate Groovy lib
- MRG: Sync subversion
- Mod: Live: wa_TBGetTimeSlotsForDayAndMemberEligibility performs better for north shore
- Delete Shared/_deploy/dotgolf directory
- MRG: Sync subversion
- DEL: Nuke commented out code
- MOD: ClubCMS: Revert accidentally committed code
- MRG: Sync subversion
- Add: Core DG-7765 Missed this one...
- MRG: Sync subversion
- MOD: ClubCMS: Update content tiles to fix CKEditor links
- MRG: Sync subversion
- MOD: Switch to multi-repo groovy lib (#559)
- MOD: Switch to multi-repo groovy lib
- Mod: Disable automated poll emails for Stokometer; this is not live yet.
- MOD: Clean workspace only on changed (#558)
- MOD: Clean workspace only on changed
- MRG: Sync subversion
- Mod: ScheduledTask DG-7765 Added required props to Settings
- FIX: Remove extra line (#557)
- FIX: Remove extra line
- DEL: Remove :egg: (#556)
- DEL: Remove :egg:
- TRY: Specify agent at post level (#555)
- TRY: Specify agent at post level
- DEL: Remove agent any declaration (#554)
- DEL: Remove agent any declaration
- MRG: Sync subversion
- MOD: ClubCMS: Update Scotland Prod URL and mygolflogin page url
- MRG: Sync subversion
- Fix: applybookingchanges email send: sql perf because of index change
- TRY: Specify agent any (#553)
- TRY: Specify agent any
- MRG: Sync subversion
- Fix: adweb: scottish golf credentials
- MRG: Sync subversion
- MOD: ClubCMS: Use URLOverride in rNavBarv2 control
- DEL: Simplify merge messages for @botgolf commands (#552)
- DEL: Simplify merge messages for @botgolf commands
- Fix: Encoding.
- DEL: Remove empty lines (#550)
- FIX: Use environment variable to make multiline value (#551)
- FIX: Use environment variable to make multiline value
- DEL: Remove empty lines
- TRY: Attempt to make @botgolf commands merge on behalf of @dotgolf (#549)
- TRY: Attempt to make @botgolf commands merge on behalf of @dotgolf
- MRG: Sync subversion
- Fix: ClubCMS/API: broken script
- MOD: Clean Jenkins workspace after build finishes (#548)
- MOD: Clean Jenkins workspace after build finishes
- Fix: ClubCMS/API: perf after index change that now requires deleteddate
- MRG: Sync subversion
- Mod: Updated the PublicMemberRegistration Dev URL for NZ
- Mod: Defined the PublicMemberRegistration Prod and Dev URLs for Scotland
- MRG: Sync subversion
- Fix: ClubCMS: sql perf because of index change
- MRG: Sync subversion
- Fix: ClubCMS/API: perf after index change that now requires deleteddate
- MRG: Sync subversion
- Fix: SG: Fixes to Club detail page short hero styling.
- MOD: Merge SVN commits on behalf of DotGolf
- MRG: Sync subversion
- Mod: ScheduledTask DG-7774 Optimized usings and DI. Shrink the task to only what is needed
- Fix: API: sql perf because of index change
- Fix: sql perf from index change on tbticketentry
- FIX: Allow specific overload of `ECR_REGISTRY_ID` (#547)
- FIX: Allow specific overload of `ECR_REGISTRY_ID`
- MRG: Sync subversion
- Fix: sql perf from index change on tbticketentry
- DEL: Simplify Jenkins by inferring `ECR_REGISTRY_ID_DAT` (#543)
- DEL: Simplify Jenkins by inferring `ECR_REGISTRY_ID_DAT`
- DEL: Simplify Jenkins by inferring `ECR_REGISTRY_ID_DAT`
- Fix: API: sql perf because of index change
- MOD: Put comment in @botgolf command run name (#546)
- MOD: Put comment in run name
- MOD: Put comment in run name
- FIX: Separate automatic automerge and requested automerge (#545)
- Remove automerge from botgolf commands
- Create enable_auto_merge.yml
- MRG: Sync subversion
- Fix: sql script dropping indexes was not pointing to the right place
- Fix: sql script dropping indexes was not pointing to the right place
- FIX: Simplify `PR_LINK` env var
- FIX: Provide `automerge` read all permissions (#544)
- FIX: Provide `automerge` read all permissions
- DEL: Simplify Jenkins by inferring `ECR_REGISTRY_ID_DAT`
- MRG: Sync subversion
- Mod: SchduledTask DG-7774 Changed the order of messaging for the console
- MRG: Sync subversion
- Add: SchduledTask DG-7774 Ported "dga_NightlyNZCRDataDifferentialsAndCountUpdate" into scheduled task
- DEL: Simplify commands by not checking permissions on automerge commands (#542)
- DEL: Simplify commands by not checking permissions on automerge commands (#541)
- MRG: Sync subversion
- Add: API: interop controller, to start on app score return interop. Currently has 2 endpoints for the app to populate dropdowns for users to select a country from which they can pick markers, or choose to search for attesters from
- Mod: ClubCMS: Scottish Golf: code clean up
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf content tiles style updates
- FIX: Give automerge job a name (#540)
- FIX: Give automerge job a name
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: removed showPagination control property; just show the pagination if the number of tiles is more than 4
- FIX: Use fallback `GITHUB_TOKEN` secret (#539)
- FIX: Use fallback `GITHUB_TOKEN` secret
- Mod: ClubCMS: Scottish Golf: sg-content-tiles: added showPagination control property
- FIX: Use `PR_LINK` in automerge (#538)
- FIX: Use `PR_LINK` in automerge
- MRG: Sync subversion
- Add: basic Tests for Ambrose handicap allowances
- MRG: Sync subversion
- MOD: Move automerge job to botgolf commands (#537)
- Mod: Org DG-7774 Enabling "Course Rating Variance Report" in Org for all unions -> this needs to run "dga_NightlyNZCRDataDifferentialsAndCountUpdate" I believe. Will have to convert to schduled task.
- Delete enable_auto_merge.yml
- MOD: Move automerge job to botgolf commands
- MRG: Sync subversion
- Fix: Results: references to Config.Current instead of the ConfigProfile property (ConfigProfile is used for tests)
- HOTFIX: Backwards logic bug when detecting failed schema scripts. (#536)
- Delete PULL_REQUEST_TEMPLATE.md (#535)
- MOD: Fix weird capitalisation (#534)
- DEL: Remove editorconfig `root` attribute (#533)
- MRG: Merge to main
- MRG: Sync subversion
- DEL: Allow inheritance
- Mod: ClubCMS: hero-swiperjs-v2 control: use the main main image on mobile, if the mobile image isn't defined
- ADD: Easter egg (#532)
- ADD: Easter egg
- MRG: Sync subversion
- Mod: Live DG-7727 updated live_GetBookingHistory so that the booking history does not show it being done through 'www.golf.co.nz' and as 'Website' instead. Just a one line changer on LINE: 12
- Fix: Backwards logic bug when detecting failed schema scripts.
- MRG: Sync subversion
- Mod: ClubCMS: admin-hero-swiperjs-v2: forgot to add the Button Text field
- Mod: Results: WHS Course HandicapAllowances for team scorecards implemented. [DG-7751]
- Mod: Core: add 3 player scramble/ambrose handicap allowances. It's not in the official rules, but seems to be the consensus online. Better that throwing an error.
- MRG: Sync subversion
- MRG: Sync subversion
- Dammit svn, its David here
- Fix: Org: Casual golfer scores would still show it Org UI even when deleted
- MRG: Sync subversion
- Fix: Backwards logic bug when detecting failed schema scripts.
- Mod: sql: added control property inserts
- MOD: Determine `ECR_REGISTRY_ID` from `ECR_REGISTRY_ID_DAT` when possible (#531)
- MOD: Look for the .dat files in the solution root
- DEL: `ECR_REGISTRY_ID` is set from `ECR_REGISTRY_ID_DAT` in  `dgCheckAllBuildVariablesPresent()`
- DEL: `ECR_REGISTRY_ID` is set from `ECR_REGISTRY_ID_DAT` in `dgCheckAllBuildVariablesPresent()`
- MOD: Determine `ECR_REGISTRY_ID` from `ECR_REGISTRY_ID_DAT` when possible
- MRG: Sync subversion
- Mod: sql: just updated the casing of a control property name
- FIX: Correctly display PR num in logs (#529)
- ADD: Listen to PR body comments for @botgolf commands (#528)
- Create botgolf_commands_pr_description.yml
- MRG: Sync subversion
- Add: ClubCMS: hero-swiperjs-v2 control: this version uses the file manager for the images, and uses the CWJsonContent table to store the data
- Mod: Autogenerated poco classes.
- MRG: Sync subversion
- MOD: Tournament V2: Massive updates for refactoring TV2 project to share codes of Interclub and Matchplay Tournaments
- Rename botgolf_commands.yml to botgolf_commands_issue_comment.yml
- MRG: Sync subversion
- MOD: Get `ECR_REGISTRY_ID` from `ecr_registry_id.*.dat` files (#527)
- Mod: Enable Subs DotGolf-only administration sections for Scottish Golf (anyone with IsSystemAdministrator actually)  TODO> Nikky to test
- FIX: Use correct ECR registry ID
- Create ecr_registry_id.Production.dat
- Create ecr_registry_id.Stage.dat
- Create ecr_registry_id.Development.dat
- MRG: Sync subversion
- Rename Production.ECR_REGISTRY_ID.dat to ecr_registry_id.Production.dat
- Rename Stage.ECR_REGISTRY_ID.dat to ecr_registry_id.Stage.dat
- Rename Development.ECR_REGISTRY_ID.dat to ecr_registry_id.Development.dat
- MOD: Change .dat file pattern to `ecr_registry_id.${env.CONFIG_LOCATION}.dat`
- MOD: Change .dat file pattern to `ecr_registry_id.${env.CONFIG_LOCATION}.dat`
- Mod: ClubCMS: GolfNzCreateNewPage: omit LOWER() because the SQL collation is case insensitive, and to make the query SARGable [DFH's code review comment]
- MOD: Get `ECR_REGISTRY_ID` from `*.ECR_REGISTRY_ID.dat` files
- Create Development.ECR_REGISTRY_ID.dat (#526)
- Create Development.ECR_REGISTRY_ID.dat
- MRG: Sync subversion
- DOC: Annotate potential security issue (#525)
- Mod: sql: new scripts to speed up teebooking stuff by reducing number of indexes sql has to choose from and update
- FIX: Not every comment is a command (#524)
- FIX: Not every comment is a command
- FIX: Dereference coauthor email (#523)
- FIX: Dereference coauthor email
- DOC: Add note about merging permissions (#522)
- DOC: Add note about merging permissions
- MRG: Sync subversion
- FIX: Correctly attribute co-author on merge messages (#521)
- Mod: sql: live_GetAllFriends more SARGable for less DB reads and slowness
- MRG: Sync subversion
- Mod: sql: new scripts to speed up teebooking stuff by reducing number of indexes sql has to choose from and update
- MRG: Sync subversion
- Mod: sql: new scripts to speed up teebooking stuff by reducing number of indexes sql has to choose from and update
- MRG: Sync subversion
- Mod: Features: new feature so NZ can keep their legacy Ambrose/Foursomes calculation until we can transition them.
- Mod: Features: new feature so NZ can keep their legacy Ambrose/Foursomes calculation until we can transition them.
- FIX: Correct SQL git attributes (#520)
- FIX: Make all sql files propperly diffable
- FIX: Make the readme an actual readme
- MRG: Sync subversion
- Fix: For some reason this file was encoded UTF-16; bet you Adweb schema updater will have a problem with that, so I've changed it back to UTF-8.
- MRG: Sync subversion
- Fix: Adding the TB product to multi course clubs didnt work.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin panel mod: update the style, make it more compact
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin panel mods:
- MRG: Sync subversion
- Mod: ClubCMS: golfnz-admin-rte-block: added control property, ShowThemeOptions (true by default). It'll be displayed for Golf NZ, but hidden on SG.
- MRG: Sync subversion
- Mod: API: Change swagger trusted API keys for production and non-production environments. The previous key is known internally and I did not want to share that with our dev team outside NZ.
- MRG: Sync subversion
- MRG: Sync subversion
- Mod: Scottish Golf: CWControl and CWControlProperty inserts
- Mod: ClubCMS: Scottish Golf hero style updates
- MRG: Sync subversion
- Mod: ClubCMS: hero-swiperjs: added the isShortHero control property; moved the Edit Hero button back outside the main div
- Fix: Adweb Jenkinsfile small adjustment because we're in the workspac… (#519)
- Fix: Adweb Jenkinsfile small adjustment because we're in the workspace root and not in the Adweb dir...
- Fix jenkins adweb sql (#518)
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- Fix: Adweb Jenkinsfile will pull the sql files from ../shared/sql now.
- FIX: Allow DotGolf.Tournament to build stage and prod (#517)
- MOD: Get ECR_REGISTRY_ID from ECR_REGISTRY_ID_DAT file
- Create Stage.ECR_REGISTRY_ID.dat
- Create Production.ECR_REGISTRY_ID.dat
- MOD: Clean up whitespace
- Create bindings.stage.list (#516)
- Create bindings.stage.list
- MRG: Sync subversion
- WTF: Dammit @dotgolf/past-yuri
- MRG: Sync subversion
- Fix: Org: sql syntax error when fetching facility
- MRG: Sync subversion
- Mod: ClubCMS: move Flexiclubs into WellKnownIDs so no more copypasting
- Fix: ColourPaletteBranding: Fixes user experience scenario at bulk email comm->settings.
- Fix: ClubCMS: copypaste bug in tournament playerlist
- MRG: Sync subversion
- MOD: ClubCMS: Update news listing control to add NewsSectionCode filter
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf admin panel style update
- Mod: ClubCMS: Pages: when adding a new page control to a page, also insert the default control property settings into the CWPageControlSetting table
- FIX: DG-7712: Use absolute (relative to solution root) js paths
- MRG: Sync subversion
- Fix: ClubFeeGroupUID issue; want to make sure we don't have any hardcoded ClubFeeGroup IDs because different union databases have different PK values now.
- Mod: ClubCMS: Pages: when adding a new page control to a page, also insert the default control property settings into the CWPageControlSetting table
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf content tiles
- MRG: Sync subversion
- Fix: BulkEmail Removed the fail "WalesGolf" value from the options as its meant for scottish golf... damn you past Nikky 😑
- MRG: Sync subversion
- Mod: sql: apply same perf mods from single club tbsearchbyclubday to the multiclub version
- MRG: Sync subversion
- Add: Configuration profile feature EnablePhysicalScorecardPrintingForClubs to have union-level control over whether the DotGolf core platform allows card printing to be used at clubs.
- MRG: Sync subversion
- DOC: Format @botgolf commands more like a manual (#512)
- DOC: Format @botgolf commands more like a manual
- Fix: Live: multiround comp SQL error in results
- DOC: Expand list of botgolf commands (#507)
- FIX: Correctly record response json (#511)
- FIX: Correctly record response json
- MOD: Upload API responses as artifacts (#510)
- MOD: Upload API responses as artifacts
- MRG: Sync subversion
- MOD: Removing verbose comments (#509)
- Mod: ClubCMS: casual golfers can view my profile page #casualgolf
- FIX: Specify only one of `--auto` or `--admin` (#508)
- DOC: Expand list of botgolf commands
- FIX: Just unroll matrix (#506)
- FIX: Just unroll matrix
- MOD: Separate response comment and merge message (#501)
- Merge branch 'main' into norwd-patch-2
- FIX: Yaml is a Point Of Sales (#505)
- FIX: Yaml is a Point Of Sales
- Merge branch 'main' into norwd-patch-2
- FIX: Gaddamn yaml (#504)
- FIX: Gaddamn yaml
- Merge branch 'main' into norwd-patch-2
- FIX: Use include style matrix to prevent broken conditional (#503)
- FIX: Use include style matrix to prevent broken conditional
- MRG: Sync subversion
- Merge branch 'main' into norwd-patch-2
- FIX: Dereference matrix in conditional (#502)
- FIX: Dereference matrix in conditional
- MRG: Sync subversion
- Merged revision(s) 59214 from Trunk/DotGolf.Clubhouse/DotGolf.Live: Merged changes from PR 247 (https://github.com/dotgolf/DotGolf.Trunk/pull/247) into Trunk, so it'll get into main via svn sync.  We needed to do this to allow an SVN merge from Clubhouse to Live/Org. ........
- MOD: Separate response comment and merge message
- Merged changes from PR 247 (https://github.com/dotgolf/DotGolf.Trunk/pull/247) into Trunk, so it'll get into main via svn sync.  We needed to do this to allow an SVN merge from Clubhouse to Live/Org.
- FIX: Correct matrix conditional (#500)
- FIX: Correct matrix conditional
- MOD: Cache response for error handling (#499)
- MOD: Cache response for error handling
- ADD: Expand merge command to include squash and rebase (#498)
- ADD: Expand merge command to include squash and rebase
- MRG: Sync subversion
- Merged revision(s) 58831-58846 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: Org: when club gets reinstated, ensure it has a list Facility record again. ........ Mod: Org: remove old contact fields from club details since they have been replaced with the Contacts schema ........
- Merged revision(s) 58835-59203 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: Live:  Tauranga - Kosk1 is not able to get past the "Please Wait" after getting member enters in number #53641 ........ Mod: Live: remove old contact fields from club details since they have been replaced with the Contacts schema ........ Fix: Live: subs member search not being refreshed with svn revision ........ Fix: Live: transform webconfig ........ Mod: Live DG-7667 - Added a new Feature flag for Text Message notification for Tee booking. Enabled for NZ but is hidden for else where. ........ Mod: Live: Don't show safegolf and other programmes in facility page in live per request from EG #crmapi ........ Fix?? Live: Kiosk users getting errors when scanning and other stuff after recent publish when we changed the web.config from debug to release in prod ........ Fix?? Live: Kiosk users getting errors when scanning and other stuff after recent publish when we changed the web.config from debug to release in prod ........ Fix: Live DG-7664 - We now select the actual "Internet Only Special" from DB as opposed to giving it static ID of 4. In SCT its 25. ........ Fix: Live: webconfig redis timeout getting cleared by transform ........ Fix: Live DG-7664 - Changed to use UID instead ........ Fix: Live - KO uniqueMarkerList in arrayFilter wasn't using the "function" declaration for the observable causing it to not actually filter anything unique ........ Fix: Live - Sometimes when the competition is expiring the marker isn't return but the competition is so lets check for it so it doesn't blow up for others trying to just log in to the kiosk ........ Fix: Live: webconfig redis timeout getting cleared by transform - timeout was in the wrong place ........ Fix: Live: green fee timeline report working faster by forcing clubfeedetail index ........ Fix: Live
- MRG: Sync subversion
- Add: StatsDPerfMon copes with >16 character hostnames now.
- Add: Latest WHS import utility stuff for Scotland migration.
- MOD: Simplify links using env (#497)
- MOD: Simplify links using env
- FIX: Missed booking service (#496)
- FIX: Missed booking service
- DRY: Don't repeat the GH_TOKEN more than necessary (#495)
- MOD: Move env and defaults to workflow globals
- DRY: Don't repeat the GH_TOKEN more than necessary
- MOD: Report failure for commands (#494)
- FIX: Pull request comments are split into general comments and review comments, listen to the right ones
- MOD: Report failure for commands
- FIX: Correctly dereference github context vars (#493)
- FIX: Correctly dereference github context vars
- MOD: React to commands with :+1: (#492)
- MOD: React to commands with :+1:
- FIX: Bump DotGolf.Clients versions before dependabot has a field day (#486)
- FIX: Bump DotGolf.Clients versions before dependabot has a field day
- MOD: Bump Client version to 1.2.2 (#484)
- MOD: Bump Client version to 1.2.2 (#483)
- MOD: Bump Client version to 1.2.2 (#485)
- MOD: Bump Client version to 1.2.2 (#482)
- MOD: Bump Client version to 1.2.2
- MOD: Bump Client version to 1.2.2
- MOD: Bump Client version to 1.2.2
- MOD: Bump Client version to 1.2.2
- MOD: Bump everlytic/branch-merge from 1.1.4 to 1.1.5 (#481)
- MOD: Bump everlytic/branch-merge from 1.1.4 to 1.1.5
- MRG: Sync subversion
- Add: CustomerSatisafaction DG-7380 Added logging to applicable questionnaires request and responses.
- MRG: Sync subversion
- Mod: ScheduledTask DG-7378 Added comments and logging. Improve the logging after the implementation is confirmed to be laygit in the new Core way
- MRG: Sync subversion
- Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data - head pro ContactType
- MRG: Sync subversion
- Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data - head pro ContactType
- Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data.
- Reverse Merge: Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data - head pro ContactType
- MRG: Sync subversion
- Mod: Scottish Golf: CWControl and CWControlProperty inserts
- MRG: Sync subversion
- Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data - head pro ContactType
- MRG: Sync subversion
- Mod: Live: hacks so that EG stop complaining that clubs can edit their CRM data.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf partner logos styling
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf content block: defined default text and image; corrected typo error
- MRG: Sync subversion
- Mod: sql: with the new index IX_TBTimeSlot_BlockTimeSlotId, we can now remove the MinTimeSlotId budget partitioning from wa_tbsearchbyclubdayv2_search_one_club.
- MRG: Sync subversion
- Mod: sql server: hide maketimeplay9 for casuals in member table
- Mod: sql: index on creditnote for xero subs sync, and so that it doesn't pollute the plan cache with over 200 plans (WHY???)
- MRG: Sync subversion
- Mod: sql: add index to tbtimeslot for teebooking search_club_day proc
- MRG: Sync subversion
- Fix: SG: Club details control styling fixes.
- MRG: Sync subversion
- Mod: ClubCMS: corrected the static nz dev path
- MRG: Sync subversion
- Mod: ClubCMS: content-tiles admin: added showDescription and showLinkText control properties, which are true / visible by default
- MRG: Sync subversion
- Add: ScheduledTask/Core DG-7378 Ported some shared logic for mobile Push notification - Need to use the hook manager and add tests
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf admin button style update
- Mod: ClubCMS: Scottish Golf: content-tiles: admin style updates
- MRG: Sync subversion
- Mod: ClubCMS: casual golf mods #casualgolf  - account for casuals not having hope club.
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: content tiles admin styles
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf admin button style updates; text update
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf admin button style update
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf admin button style update
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: admin control field label updates
- MRG: Sync subversion
- Upd: SG: Short-Hero updates for SG Club Detail control.
- Mod: sql: index on CWPageMenuMap for this query:         public static List<KeyValuePair<string, int>> GetPageMenu(int PageID)         { 			DataSet ds = Database.GetDataSet(@" select c.[Name], pcm.ParentMenuID [ParentMenuID], 0 [Order] from CWMenu c join CWPageMenuMap pcm  on pcm.ParentMenuID = c.MenuId where pcm.PageID = @PageID and pcm.DeletedDate is null and c.DeletedDate is null union select c.[Name],c.MenuID [ParentMenuID], 1 [Order] from CWMenu c where c.LinkToPageID = @PageID and c.DeletedDate is null order by [Order] ", new SqlParameter("@PageID", PageID));
- MOd: ClubCMS: svn ignore sg js
- MRG: Sync subversion
- Mod: ClubCMS: casual golf mods #casualgolf - don't force casual golfers to have a DOB or Email (todo - not yet confirmed with EG)
- Mod: clubcms: caching of frequently hit queries, improve another query to be SARGable, and remove unused method
- Fix: ClubCMS: js error in my stats page from undeclared default control props
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: control's edit button update
- Mod: ClubCMS: accordion: added the edit button for the control
- Mod: ClubCMS: Scottish Golf: control's edit button z-index update
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf menu: link updates
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf style update
- MRG: Sync subversion
- Mod: ClubCMS: admin-list: hide CSS Class Name field by default; style updates
- Mod: ClubCMS: accordion admin list: just updated the text used on the default list item when a new list is created
- MRG: Sync subversion
- Mod: sql: live_connector_poll perf mod to remove settings references that we don't use any more
- MRG: Sync subversion
- Mod: sql: index to help clubcms:         public static DataSet GetPageControlSettings(int PageControlID)         {             return Database.GetDataSet(@" select pc.PageControlId, cp.ControlPropertyID, cp.[name], isnull(pcs.[setting], cp.DefaultSetting) [setting], cp.type, pcs.PageControlSettingId from CWPageControl pc join cwcontrolproperty cp on cp.DeletedDate is null and cp.ControlId=pc.ControlId left join cwpagecontrolsetting pcs on pcs.DeletedDate is null and pcs.PageControlId=pc.PageControlId and cp.controlpropertyid = pcs.controlpropertyid where isnull(pcs.[setting], cp.DefaultSetting) is not null and pc.pagecontrolid = @PageControlID ", PageControlID.GetSqlParameter("PageControlID"));         }
- MRG: Sync subversion
- Add: SG: Club details control google map api key property.
- MRG: Sync subversion
- Fix: Performance improved around GetEligibleCompetitionRounds() and the sql compiles now.  This caused 1m+ reads when used from tee booking (listing auto-entry competitions on the day of the booking)
- MRG: Sync subversion
- Add: SG: New club details control items.
- Add: SG: New club details control.
- MRG: Sync subversion
- Reverse Merged revision(s) 59145 from Trunk: Fix: Performance improved around GetEligibleCompetitionRounds().  This caused 1m+ reads when used from tee booking (listing auto-entry competitions on the day of the booking) ........
- MRG: Sync subversion
- Fix: Adweb: Don't mark someone as deleted if they have outstanding invoices EVEN if we are merging them.
- MRG: Sync subversion
- MRG: Sync subversion
- Fix: Core: give Casual Golfers a "Home Club"
- Mod: Autogenerated poco classes.
- Mod: sql: drop table NonAffiliateNote_ToBeDeleted
- MRG: Sync subversion
- Fix: Build: ComputerNo nullable now
- Fix: sql: two under club email no longer uses 10gb ram
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf partner logos styling
- Mod: Autogenerated poco classes.
- MRG: Sync subversion
- Mod: sql: computerno is now nullable and dropped unused MemberAudit table
- MRG: Sync subversion
- Fix: Performance improved around GetEligibleCompetitionRounds().  This caused 1m+ reads when used from tee booking (listing auto-entry competitions on the day of the booking)
- MRG: Sync subversion
- Fix: GolfNZ DG-7562 #53756 When a player register for a national tournament it'll wipe their Subs DD out with a blank text. So added logic to mitigate this from happening. This ain't pretty so if anyone see this and want to give me quick pointers please do so 😀
- MRG: Sync subversion
- Mod: Live Modified TabMember.aspx so it handles Address3 and City. Added applicable placeholders to these text fields.
- MRG: Sync subversion
- Fix: Results: use proper rounding for Team Handicap calculation, add RoundDate to prep for course handicap change.
- Fix: Results: use proper rounding for Team Handicap calculation, add RoundDate to prep for course handicap change.
- Fix: Results: use proper rounding for Team Handicap calculation, add RoundDate to prep for course handicap change.
- MRG: Sync subversion
- Mod: Autogenerated poco classes.
- MRG: Sync subversion
- Add: NonAffiliate.Address3 field to match CMember.
- MRG: Sync subversion
- MOD: ClubCMS: Fix Hero Banner in Teebooking for Scotland club websites
- MRG: Sync subversion
- Mod: Live: Refactor CalculateTeamCourseHandicap to account for the fact that we're adding new classes that will need to apply a handicap allowance to incoming HIs
- MRG: Sync subversion
- Mod: ClubCMS: rMemberSignupV2: fix indention
- MRG: Sync subversion
- Fix: ResultsEngine: Course handicap rounding was wrong because dotnet defaults to MidpointRounding.ToEven, so 0.5 was rounding DOWN to 0
- Fix: UnionAPI: Course handicap rounding was wrong because dotnet defaults to MidpointRounding.ToEven, so 0.5 was rounding DOWN to 0
- Fix: ISVAPI: Course handicap rounding was wrong because dotnet defaults to MidpointRounding.ToEven, so 0.5 was rounding DOWN to 0
- MRG: Sync subversion
- Fix: Core: Course handicap rounding was wrong because dotnet defaults to MidpointRounding.ToEven, so 0.5 was rounding DOWN to 0
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf style updates (OpenPlay pricing tiles)
- MRG: Sync subversion
- Fix: Results tests: actually apply the handicap allowance to the unrounded course handicap.
- MRG: Sync subversion
- Mod: AdWeb Add ability for support to unblock a friend for member
- MRG: Sync subversion
- MOD: ClubCMS: Revert changes as these domains are also use as alternative URLs
- MRG: Sync subversion
- Add: SG: Script to add new property of GolfNZ Club Details control.
- Upd: SG: Updates GolfNZClubDetails control to have dynamic Goolge Map Api Key to use.
- MRG: Sync subversion
- Add: SG: Club details styling overrides.
- MRG: Sync subversion
- Fix: Results: Apply handicap allowance to unrounded course handicap, NOT the handicap index
- MRG: Sync subversion
- MOD: ClubCMS: Remove Remuera dev URL as per Renei
- MRG: Sync subversion
- MOD: ClubCMS: Remove whangaparaoa dev URLs as asked by the new manager as per Renei
- MRG: Sync subversion
- MOD: Adweb: Enabled Select All pages in Bulk Copy pages
- Fix: ClubCMS: Scottish Golf: member search result (name) style fix
- MRG: Sync subversion
- Fix: Results: delete result was getting insane 1GB memory grants because of this OR, for some reason: "SingleRSResultId in (select Id from #tt) or MultiRSResultId in (select Id from #tt)"
- MRG: Sync subversion
- MOD: England Golf: Updates on home banner ads CSS
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf style updates
- Fix: ClubCMS: Scottish Golf: fix flickering of the edit button
- MRG: Sync subversion
- MOD: England Golf: Updates on home banner ads CSS
- MRG: Sync subversion
- Fix: SG: Cookie popup covers all web page area.
- MRG: Sync subversion
- Mod: Scheduled tasks: extra delay in task to help Tom
- MRG: Sync subversion
- MOD: Live: DG-7720: Added logging for the Initial Handicap Update.
- MRG: Sync subversion
- Update the GolfNZ logo link to use the new swanky one
- MRG: Sync subversion
- MOD: Live: Changes to the MemberScoreCount Report...
- MRG: Sync subversion
- Update the GolfNZ logo link to use the new swanky one
- MRG: Sync subversion
- Mod: Results: tests to ensure we no longer double-calculate handicap allowances for team comps
- MRG: Sync subversion
- Mod: Results: no longer double-calculate handicap allowances for team comps
- Fix svn (#480)
- Merge remote-tracking branch 'origin/svn-sync' into fix-svn
- Add/Mod: ClubCMS: cookie-consent: style updates:
- MRG: Sync subversion
- Mod: Core.Tests: unit tests now uses NZ handicap allowances because i'm not ready to update the tests to respect the GBI allowances
- MRG: Sync subversion
- Mod: Results: add handicap allowance calcs for 4BBB, BestOfs, plus extra hack to ensure the new logic doesnt break existing comps that use a TeamHandicapCalculator
- MRG: Sync subversion
- Mod: Shared: Add ScoreLogicBogey
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf hero stylesheet: removed redundant style
- Mod: ClubCMS: Scottish Golf hero style updates
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf hero style updates and fixes
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf image video control: this could be used as a short hero image. If a YouTube or Vimeo Video ID is supplied, a play button appears at the centre. The video plays in a pop-up window when the play button is clicked.
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Unallocated Prepayments" delete from db
- Mod: Live DG-7620 Port "Unallocated Prepayments" report from Db to Ext
- MRG: Sync subversion
- MOD: ClubCMS: Update golfnz news listing to replace all spaces with dash
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Subs Payments" delete from db
- Mod: Live DG-7620 Port "Subs Payment" report from Db to Ext
- MRG: Sync subversion
- Mod: Live DG-7620 Port "Payment Schedule & Method" report from Db to Ext
- Mod: Live DG-7620 Mark "Payment Schedule & Method" delete from db
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Membership Prepayments" delete from db
- Mod: Live DG-7620 Port "Membership Prepayments" report from Db to Ext
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Course Fee Takings" delete from db
- MRG: Sync subversion
- Mod: Live DG-7620 Port "Course Fee Takings" report from Db to Ext
- MRG: Sync subversion
- Add: Results: Apply HandicapAllowance to Results hole scores via scorelogic, added unit tests for it
- Mod: Live DG-7620 Mark "Expected Subs Renewal (Cyclical)" delete from db
- Mod: Live DG-7620 Port "Expected Subs Renewal (Cyclical)" report from Db to Ext
- MRG: Sync subversion
- MOD: Add @botgolf commands section (#479)
- MOD: Add @botgolf commands section
- MOD: ClubCMS: Update news listing control to add NewsSectionCode filter
- MRG: Sync subversion
- Fix: SG: UI fixes on CookieConsent control for Scottland Website.
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Membership - Online Application" delete from db
- FIX: Check for when to yell at unauthorised merge commands
- MRG: Sync subversion
- FIX: Correct step name
- FIX: Remove interop accreditation codeowners (#478)
- Mod: Live DG-7620 Port "Membership - Online Application" report from Db to Ext
- MOD: Use the all seeing eye to get the token
- FIX: Use single quotes
- MOD: Use team membership for permissions test
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "MEMBERS WITH OVERDUE WARNING" delete from db
- MRG: Sync subversion
- Mod: Live DG-7620 Port "Members with overdue warning" report from Db to Ext
- FIX: Remove interop accreditation codeowners
- MOD: simplify action log
- MOD: Require infra admins specifically (#259)
- MOD: Check for admin permissions before merging
- DEL: Move InteropAccreditation project out of monorepo (#456)
- FIX: Specify merge strategy
- ADD: Implement `@botgolf merge` command
- FIX: Dereference comment line
- FIX: Close by URL to avoid checkout
- MOD: Implement `@botgolf close` command
- Fix syntax error by using single strings
- MOD: Only run when @botgolf is tagged
- FIX: Use string quotes to avoid syntax error
- ADD: Begin automation that allows commanding botgolf to do stuff
- MRG: Sync subversion
- Mod: Org DG-7620 Port "Membership Totals By Club" from DB to Ext
- Mod: Org DG-7620 Mark "Membership Totals By Club" delete from db
- MRG: Sync subversion
- MOD: England Golf site: Update EG Hero to include Ads
- MOD: Bump DotGolf.Clients.UnionAPI from 1.2.0 to 1.2.1 in /Shared/DotGolf.Shared (#461)
- MOD: Bump DotGolf.Clients.BookingService from 1.2.0 to 1.2.1 in /Shared/DotGolf.Shared (#459)
- MOD: Bump DotGolf.Clients.WHSAPI from 1.2.0 to 1.2.1 in /Shared/DotGolf.Shared (#457)
- MOD: Bump DotGolf.Clients.ISVAPI from 1.2.0 to 1.2.1 in /Shared/DotGolf.Shared (#463)
- MRG: Sync subversion
- Mod: Live DG-7620 Port "Members Date Joined" report from Db to Ext
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Members Date Joined" delete from db
- Merge branch 'svn-sync'
- Mod: Live DG-7620 Mark "Member Account Reconciliation" delete from db
- Mod: Live DG-7620 Port "Member Account Reconciliation" report from Db to Ext
- Mod: Results: minor style changes to MultiPlayerResult #handicapallowance
- Mod: Results: scaffolding for applying handicap allowances to results. modified GetScoresRelevantToResult to return rounddate #handicapallowance
- Mod: Live DG-7620 Mark "Members Current Start and End Date" delete from db
- Mod: Live DG-7620 Port "Members Current Start and End Date" report from Db to Ext
- MOD: Specify tag to checkout
- MOD: Hooray for hardcoding!
- FIX: Groovy just gets better and better doesn't it /s
- FIX: Curse you groovy!
- REV: Revert ae1f327
- MRG: Sync subversion
- 
- FIX: Checkout shared JS/TS for Jenkins
- MRG: Sync subversion
- Mod: Live DG-7620 Mark "Member Listing - Renewal Category" delete from db
- MRG: Sync subversion
- Fix: Live: green fee timeline report now much harder to maintain, but no longer times out all the time 😎... sorry future Kenneth.
- MRG: Sync subversion
- MRG: Sync subversion
- Mod: Org DG-7620 Port MemberAgeReport from DB to Ext
- Mod: Live DG-7620 Mark MemberAgeReport delete from db
- Merge remote-tracking branch 'origin/svn-sync'
- MOD: Always do a clean build in Jenkins
- DOC: Document the shared js/ts build steps
- MRG: Sync subversion
- FIX: Move generated js to be included before ts definitions
- MRG: Sync subversion
- Mod: Live DG-7620 Mark MemberBalancesWithSubsDate delete from db
- MRG: Sync subversion
- Mod: Live DG-7620 Port MemberBalancesWithSubsDate to Ext
- MRG: Sync subversion
- MOD: Update README for the 21st century
- Fix: Live MemberAccountActivity Report Fix the country perms
- MRG: Sync subversion
- Del: Live DG-7620 Del "Member Account Activity" sql which was not used and committed accidentally
- DEL: Move InteropAccreditation project out of monorepo
- MRG: Sync subversion
- Mod: Shared: remove dead results class (TeamHandicapCalculatorFoursomeAU) and class diagram
- MRG: Sync subversion
- Mod: Live DG-7620 Mark Member Account Activity Report from DB Name of the report is "Account Activity" and "Member Account Activity" hence the 2 checks on select
- Mod: ClubCMS: cache searchclubday green fee query results for a minute as long as the person was looking for 5 or less clubs. (5 chosen arbitrarily as the number of clubs that might open tee sheets at once i guess? this proc could have 100s or 1000s of clubs passed in)
- MRG: Sync subversion
- DOC: Add README.md and document the post-svn solution to shared {java,type}script files
- MRG: Sync subversion
- Mod: Live DG-7620 Port Member Account Activity Report from DB to Ext
- MRG: Sync subversion
- Mod: ClubCMS: cache searchclubday green fee query results for a minute as long as the person was looking for 5 or less clubs. (5 chosen arbitrarily as the number of clubs that might open tee sheets at once i guess? this proc could have 100s or 1000s of clubs passed in)
- MRG: Sync subversion
- Add: SG: Added css files styling for Scottland Website.
- MRG: Sync subversion
- Mod: ClubCMS: admin-news-article: trim the tag name before saving
- MRG: Sync subversion
- Mod: ClubCMS: don't need to pass isNextGen to the searchclubday green fee query - if isNextGen was false, the query would return no rows for that club, so we simply stop passing those clubs into the query. Removed unused params.
- Mod: ClubCMS: Scottish Golf news detail: default lead image
- Mod: ClubCMS: Scottish Golf news list: default thumbnail: allow flexibility on the default image file type
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf news detail: default lead image
- Mod: Teebooking: save some reads and cpu when creating calendar and holiday table
- MRG: Sync subversion
- Mod: Teebooking: save some reads and cpu when creating calendar and holiday table
- ADD: Ignore this generated directory
- Merge remote-tracking branch 'origin/svn-sync'
- FIX: Correct reference paths
- Mod: ClubCMS: Scottish Golf news list: placeholder text update
- FIX: Correct variable name typo
- Mod: ClubCMS: Scottish Golf news list: styles updates
- FIX: Correct js/ts files missing on localhost
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf news list: default thumbnail
- MRG: Sync subversion
- Mod: Core: NZ handicap allowance table is updated to cool new 100% everything 😎 https://static.golf.co.nz/clubs/1000/uploads/whs/handicap%20allowance%20table.pdf
- MRG: Sync subversion
- Mod: Live DG-7620 MemberAccountBalances QueryText split out into its own file
- Mod: Live DG-7620 Add country permissions so it can be used in conjunction with the asset group
- MRG: Sync subversion
- FIX: Correct even more paths
- MRG: Sync subversion
- FIX: More path correction
- MRG: Sync subversion
- Add: GolfNZ: Added the LightGallery library reference for SoloVideoWidget & ImagePageGallery controls.
- MRG: Sync subversion
- Mod: ClubCMS: Teebooking/TeebookingTerracesSG.Master: updated the svg icons (copied from the terraces_sg template)
- MRG: Sync subversion
- FIX: Correct de-externed JS references
- MRG: Sync subversion
- Fix: Live: prevent scottish golfers being linked to eg golfers hopefully - can't repro
- MRG: Sync subversion
- Mod: Live DG-7620 Ported "Member Account Balances" from DB to ExtQuery Added Delete script to db
- MRG: Sync subversion
- Mod: Live DG-7620 Fixed QueryRef path to CategoryMemberCountsSimple and added back relevant formatters
- MRG: Sync subversion
- Mod: Category Member Counts (Simple) Report delete script As the ID might not match other unions just made it name for now and added check for delete date
- Mod: ActiveMembershipNumbers Report delete script As the ID might not match other unions just made it name for now and added check for delete date
- MRG: Sync subversion
- Mod: Live Added header text to ActiveMembershipNumbers report
- MRG: Sync subversion
- Mod: Live DG-7620 Move "Category Member Counts (simple)" report from DB to C# land with permissions for all unions Includes marking the report in the DB as delete.
- MRG: Sync subversion
- Mod: Live DG-7670 Made "Visitor Count by Region" report accessible to Scotland
- Mod: Live DG-7620 Move "ActiveMembershipNumbers" report from DB to C# land with permissions for all unions Includes marking the report in the DB as delete.
- MRG: Sync subversion
- MOD: ClubCMS: Membership Application make home phone not required instead make mobile, address 2 is not required and make date of birth as required. Layout changes applied
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: reference path
- FIX: Reference non-externed .ts files
- MRG: Sync subversion
- MOD: Add trailing whitespace
- Merge remote-tracking branch 'origin/svn-sync'
- FIX: Extern paths, extern paths, does whatever a extern path does
- MRG: Sync subversion
- MOD: Live: Add additional option to ScoreInputControlModes in Profiles/Scotland.cs (Score Card No)
- MRG: Sync subversion
- Fix: Live
- MRG: Sync subversion
- Add: ClubCMS/GolfNZ #53662
- MRG: Sync subversion
- Fix: Live: green fee timeline report bug
- MRG: Sync subversion
- Fix: Live: green fee timeline report bug
- MRG: Sync subversion
- Fix: Live: green fee timeline report working faster by removing redundant scorecard join and setting maxdop 1 because the parallelism seems to just shoot itself in the foot as it has to merge parallel streams multiple times and adds delays
- MRG: Sync subversion
- DEL: Remove ts/js extern
- MRG: Sync subversion
- MRG: Sync subversion
- Fix: Live: green fee timeline report working faster by forcing clubfeedetail index MORE AGGRESSIVELY
- FIX: Scotland: Nav empty on tee booking page
- MRG: Sync subversion
- Fix: Live: green fee timeline report working faster by forcing clubfeedetail index
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- Merge branch 'main' of github.com:dotgolf/DotGolf.Trunk
- NOP: Does nothing
- MRG: Sync subversion
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- MOD: Added new test domains for scotland club websites
- Mod: BulkEmail - Added no reply address for default "From" no reply for Scottish Golf
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- MRG: Sync subversion
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- Mod: Results: code comment and cleanup duplicate temp table drop
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing\n\nTesting tags for Jenkins.
- NOP: Does nothing
- NOP: Does nothing
- MRG: Sync subversion
- Mod: Results: accumulative results query joins on #playoffwins instead of subquery, because the subquery was just an older version of the insert into #PlayoffWins
- Mod: Results: move duplicated queries into temp table, which can replace the existing temp tables that were doing identical selects. Use clustered indexes (via Primary key) on the temp tables because we're reusing them a lot to join on rsresultid
- MRG: Sync subversion
- Reverse Merged revision(s) 58969 from Trunk/Shared/DotGolf.Shared/Results/Result.GetResults.cs: - not ready to commit yet Mod: Results: move duplicated queries into temp tables, which can replace the existing temp tables that were doing identical selects. Use clustered indexes (via Primary key) on the temp tables because we're reusing them a lot to join on rsresultid ........
- MRG: Sync subversion
- NOP: Does nothing
- NOP: Does nothing
- Fix: Live: webconfig redis timeout getting cleared by transform - timeout was in the wrong place
- NOP: Does nothing
- NOP: Does nothing
- NOP: Does nothing
- MRG: Sync subversion
- Mod: Results: move duplicated queries into temp tables, which can replace the existing temp tables that were doing identical selects. Use clustered indexes (via Primary key) on the temp tables because we're reusing them a lot to join on rsresultid
- FIX: Delete BOM
- MRG: Sync subversion
- FIX: Correct commit message indentation
- MRG: Sync subversion
- DEL: Remove code-review.txt
- FIX: Reference non-externed .ts files
- Merge remote-tracking branch 'origin/svn-sync'
- FIX: Reference non-externed .ts files
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: news detail style updates
- Add: ClubCMS: Scottish Golf: news detail control
- MRG: Sync subversion
- Merge remote-tracking branch 'origin/svn-sync'
- Mod: Results: less unions, because they make the queries more likely to timeout getting a plan
- FIX: Resynchronise merge conflicts
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Resolve merge conflict breakage
- MRG: Sync subversion
- Fix: Live - Sometimes when the competition is expiring the marker isn't return but the competition is so lets check for it so it doesn't blow up for others trying to just log in to the kiosk
- FIX: Resolve critical .NET Information Disclosure Vulnerability (#455)
- FIX: Use non-svn-extern path ref
- MRG: Sync subversion
- Mod: ClubCMS: When you click Search on SearchClubDay, the button is now disabled while the search is completing
- MRG: Sync subversion
- FIX: Correct whitespace
- Merge remote-tracking branch 'origin/svn-sync'
- Mod: ClubCMS: tiny tiny perf mod
- Fix: ClubCMS: casual golf authorisation error #casualgolf
- Fix: Passport: Don't allow casual golfers from the member table to log in as "resigned members" #casualgolf
- Fix: Shared: Release time tests - use SearchSlotsV2/SearchClubDayV2
- Fix: Live - KO uniqueMarkerList in arrayFilter wasn't using the "function" declaration for the observable causing it to not actually filter anything unique
- DEL: Remove dead stuff :skull:
- Mod: Use DataCache to limit concurrent number of tee booking queries from the same session (users spamming refresh excessively).
- Mod: Use DataCache to limit concurrent number of tee booking queries from the same session (users spamming refresh excessively).
- Mod: release times tests use new searchclubday
- Mod: ClubCMS: Scottish Golf: news list: added ShowViewAllLink control property
- Mod: ClubCMS: Scottish Golf: news list style updates
- Mod: ClubCMS: Scottish Golf: news list style updates
- Mod: ClubCMS: Scottish Golf: news list style updates
- Add: Stupid index to speed up a stupid query.  Once the stupid query is fixed we can drop this stupid index.
- MRG: Sync subversion
- Mod: ClubCMS: admin-news-article: Save & Add Tag markup update
- Fix/Mod: ClubCMS: Scottish Golf: news list control style updates; rename "All News" to "All"
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: news list control updates
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf: news list control
- MRG: Sync subversion
- Fix: Live DG-7664 - Changed to use UID instead
- MRG: Sync subversion
- Fix: Live: webconfig redis timeout getting cleared by transform
- FIX: .NET Information Disclosure Vulnerability
- MRG: Sync subversion
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- Fix: Live DG-7664 - We now select the actual "Internet Only Special" from DB as opposed to giving it static ID of 4. In SCT its 25.
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- Merge branch 'main' into security/GHSA-8g2p-5pqh-5jmc
- Revert "FIX: .NET Information Disclosure Vulnerability"
- Revert "FIX: .NET Information Disclosure Vulnerability"
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- Revert FIX: .NET Information Disclosure Vulnerability
- Merge branch 'main' into security/GHSA-8g2p-5pqh-5jmc
- Revert "FIX: .NET Information Disclosure Vulnerability"
- Revert "FIX: .NET Information Disclosure Vulnerability"
- Merge branch 'main' into security/GHSA-8g2p-5pqh-5jmc
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- FIX: .NET Information Disclosure Vulnerability
- MRG: Sync subversion
- Fix?? Live: Kiosk users getting errors when scanning and other stuff after recent publish when we changed the web.config from debug to release in prod
- Fix?? Live: Kiosk users getting errors when scanning and other stuff after recent publish when we changed the web.config from debug to release in prod
- Update Jenkinsfile
- Update Jenkinsfile
- Update Jenkinsfile
- Update Jenkinsfile
- Update Jenkinsfile
- MRG: Sync subversion
- Add: Live DG-7671 - Added comment as to why we need were getting the error. Just config related in Xero no code changes.
- MRG: Sync subversion
- Fix: Marcus didn't commit enough files
- MRG: Sync subversion
- Fix: Org: Build
- MRG: Sync subversion
- Fix: ClubCMS: getting someone's name should allow getting name from social records
- MOD: Remove leading newline
- MRG: Sync subversion
- Mod: ClubCMS: Club Website member registration wasn't showing ALREADY REGISTERED if the person's registration was complete but past it's valid date #CasualGolf
- MRG: Sync subversion
- Mod: ClubCMS: Club Website member registration wasn't showing ALREADY REGISTERED if the person's registration was complete but past it's valid date #CasualGolf
- MOD: Bump DotGolf.Clients.UnionAPI from 1.1.1 to 1.2.0 in /Shared/DotGolf.Core (#433)
- MOD: Bump DotGolf.Clients.ISVAPI from 1.1.1 to 1.2.0 in /Shared/DotGolf.Core (#440)
- MOD: Bump DotGolf.Clients.BookingService from 1.1.1 to 1.2.0 in /Shared/DotGolf.Shared (#442)
- MOD: Bump DotGolf.Clients.WHSAPI from 1.1.1 to 1.2.0 in /Shared/DotGolf.Core.Tests (#400)
- ADD: Include dependabot registration for Core
- FIX: Only enable automerge on PRs against main
- MRG: Sync subversion
- Add: SG-ClubEVents: Added a styling overrides for SG in club-fixtures-search control.
- MRG: Sync subversion
- Add: ClubCMS: Scottish Golf: news list styles
- Mod: ClubCMS: golfnz-news-list:
- MRG: Sync subversion
- Mod: ClubCMS: hero-swiperjs css: missed to include this file in the recent rev: 58916
- Mod: ClubCMS: Scottish Golf: hero-swiperjs: style updates for SG
- Mod: ClubCMS: Scottish Golf: put back the swiper css and hero css to main.css; news tiles style updates
- MRG: Sync subversion
- Fix: BulkEmail: Fixes default branding values for the first record.
- Mod: ClubCMS: hero-swiperjs css: moved the Golf Tourism specific styles (added in Rev 53422) from styles.css to styles.terraces_tourism.css
- MRG: Sync subversion
- Fix: ClubCMS: missing file #casualgolf
- MRG: Sync subversion
- Mod: ClubCMS: remove obsolete method #casualgolf
- Mod: ClubCMS: no longer use dataset dependent on clubno #casualgolf
- MRG: Sync subversion
- Mod: ClubCMS: resigned member landing update #casualgolf
- Mod: ClubCMS: add openplay to flexi clubs list in my account page
- MRG: Sync subversion
- Mod: ClubCMS: add openplay to flexi clubs list
- Mod: ClubCMS: member details updated #casualgolf
- MRG: Sync subversion
- Mod: ClubCMS: UEditMemberDetails no longer uses dataset and not dependent on clubno  #casualgolf
- MRG: Sync subversion
- Mod: clubcms: member signup - refactor Eligibility Check thing into variable
- MRG: Sync subversion
- Fix: BulkEmail: Conditional validations for parameters.
- MRG: Sync subversion
- Mod: Live: Don't show safegolf and other programmes in facility page in live per request from EG #crmapi
- MRG: Sync subversion
- Mod: ClubCMS: load some data from FacilityCMSContent table instead of club table (for now) so EG CRM stops clobbering club data until they fix it or we do 2-way sync #crmapi [DG-7584]
- Mod: Live DG-7667 - Added a new Feature flag for Text Message notification for Tee booking. Enabled for NZ but is hidden for else where.
- MRG: Sync subversion
- Fix: BulkEmail: Zero parameter value validations.
- MRG: Sync subversion
- Mod: ISVAPI: store data in FacilityCMSContent table instead of club table (for now) so EG CRM stops clobbering club data until they fix it or we do 2-way sync #crmapi [DG-7584]
- MRG: Sync subversion
- Fix: ISVAPI: don't allow signups from Scotland
- MRG: Sync subversion
- Fix: BulkEmail: Validate null parameter values.
- MOD: Require infra admins specifically
- WTF: Dammit @dotgolf/past-yuri
- MRG: Sync subversion
- Fix: BulkEmail: Validate value of ClubId and AssociationId.
- MRG: Sync subversion
- Fix: Functions: Unable to post functions sale to Kounta due to an incorrect customer_id sent to the Kounta API. Occurs when a person has multiple membeships at Kounta-enabled golf clubs. #53645
- MRG: Sync subversion
- Mod: Autogenerated poco classes.
- Fix: BulkEmail: Communication brand settings sql query fixes.
- MRG: Sync subversion
- Fix: Live: error when getting results if printed card name was too long
- MRG: Sync subversion
- Fix: POS: Don't allow sales to be sent to Kounta even though we've stopped spamming dotgolf support for missing ONLINEPAYMENT in Kounta - this is for Maungakikie only because they are not using DG POS.
- MRG: Sync subversion
- Fix: ClubCMS: get score messages can handle getting a zero scoreid now
- MRG: Sync subversion
- Fix: API: member score listing bug when person has zero scores
- MRG: Sync subversion
- Fix: BulkEmail: Fix on colour palette update with element id.
- Fix: Live: Casual golf scores
- MRG: Sync subversion
- Fix: BulkEmail: Fixes newly created colour palette setting.
- Fix: Live: transform webconfig
- MRG: Sync subversion
- Fix: BulkEmail: New colour palette brand settings fixes.
- MRG: Sync subversion
- Mod: ClubCMS: when member signup is done, stop mygolf login from opening a new new tab - it's OK if they go straight to that page, nothing else to do in the signup page
- MRG: Sync subversion
- Fix: BulkEmail: SQL query fixes from empty table.
- ADD: Exclude SQL scheme from github/linguist
- MRG: Sync subversion
- Fix: ClubCMS: member signup not working GBI
- MRG: Sync subversion
- FIX: ClubCMS: DG-7676: Temp fix for casual golf member type causing issue. Comment in code.
- MRG: Sync subversion
- Mod: API: England: Part 2 - Allow ads to show only on the latest versions of the MyEG app. This is only temporary and will remove this in the next couple of weeks.
- MRG: Sync subversion
- Fix: ED&I: Fixes to select option value 'No'.
- Feature/DG-7354: Pull AspNetCoreRateLimit into a separate repo and package (#257)
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: page-header: gradient1 update
- MRG: Sync subversion
- Mod: ClubCMS: content-tiles: theme updates
- MRG: Sync subversion
- Mod: Live: remove default params from member quick search so no-one else accidentally breaks the .js because browser caching didn't work the way it was meant to last publish #53652
- MRG: Sync subversion
- Fix: Live: subs member search not being refreshed with svn revision
- MRG: Sync subversion
- Mod: API: England: Allow ads to show only on the latest versions of the MyEG app. This is only temporary and will remove this in the next couple of weeks.
- MRG: Sync subversion
- Fix: SCT: missing unionapi cert
- MRG: Sync subversion
- Mod: Org: remove old contact fields from club details since they have been replaced with the Contacts schema
- Mod: Live: remove old contact fields from club details since they have been replaced with the Contacts schema
- MRG: Sync subversion
- Mod: ISVAPI: refactor CRM club controller to make saving logic easier to maintain. more on the way
- MRG: Sync subversion
- Mod: Tests: pocotable 2 saving tests
- Fix: Core: Pocotables now save null values correctly
- MRG: Sync subversion
- Add: Core: Facility pocotable, and make Club pocotable writable
- MRG: Sync subversion
- Fix: ISVAPI: commit swaggerfile
- MRG: Sync subversion
- Mod: ClubCMS: content-tiles: admin style updates
- MRG: Sync subversion
- Fix: Live:  Tauranga - Kosk1 is not able to get past the "Please Wait" after getting member enters in number #53641
- MRG: Sync subversion
- Fix: ISVAPI: Test after prev mod
- Fix: Schema script was not runnable twice
- MRG: Sync subversion
- Mod: Org: when club gets reinstated, ensure it has a list Facility record again.
- MRG: Sync subversion
- Mod: ISVAPI: remove EG CRM members controller from api V1 (they've migrated off it and are using v2)
- MRG: Sync subversion
- Mod: Results: remove unneeded table insert for accumulative results - multiround results expect a null RSCompetitionRoundSegmentEntryId, and the rows being entered all have an RSCompetitionRoundSegmentEntryId, meaning they never get used in the next query that selects the multiround results
- Fix: Results: accumulative results better perf after splitting into temp table
- MRG: Sync subversion
- Mod: Enabled search by member name for Scotland visitors (both clubhouse and public)
- MRG: Sync subversion
- MOD: Clubhouse: DG-7659: Updated Scotland.cs profile to enable ability to mark as unfinancial.
- MOD: Bump System.Net.Http from 4.3.0 to 4.3.4 in /Other/ExceptionLogToElastic (#26)
- MOD: Bump System.Text.RegularExpressions from 4.3.0 to 4.3.1 in /Other/ExceptionLogToElastic (#27)
- MOD: Build(deps): Bump System.Text.RegularExpressions from 4.3.0 to 4.3.1 in /Other/TrackerLogToElastic (#2)
- MOD: Build(deps): Bump System.Net.Http from 4.3.0 to 4.3.4 in /Other/TrackerLogToElastic (#1)
- MRG: Sync subversion
- Mod: ClubCMS: remove reference of Linq-to-sql in PlayerHasEmailAddress (one more hairy one remaining)
- MRG: Sync subversion
- Reversed Merged revision(s) 58525 from Trunk: Mod: ClubCMS/GolfNZ DG-7541 Added 2 new filters for the OOM player standings. They can now filter by under 16 or 19 as well as region. Added the same ability to save selected state of combo box while navigating back and forth between site in the same session. ........
- Mod: CODEOWNERS file update for WHSAPI (#254)
- Test comment (#255)
- MRG: Sync subversion
- MRG: Sync subversion
- Fix: ClubCMS: build broken - more casual-golfers-in-member table support #casualgolf
- Mod: ClubCMS: removed some Linq-to-sql references and unused conns
- MRG: Sync subversion
- Mod: ClubCMS: Scottish Golf: add theme options to content tiles; hidden by default; define the theme options for SG
- Mod: ClubCMS #51527 #53576 - Select list added so that the PGA membership number and category will no longer be compulsory if the registering player does not have one as they're overseas.
- MRG: Sync subversion
- MOD: ClubCMS: Scotland add PassportId in writing controls to Top layout and fix ClubAddress display
- FIX: Delete old test runs
- MRG: Sync subversion
- Mod: ClubCMS: more casual-golfers-in-member table support #casualgolf
- Mod: ClubCMS: use https then referencing our sites to improve response times and spam detection
- MRG: Sync subversion
- MOD: Related to David's commit (58754) for Scotland to use DEV windcave for PROD in the meantime
- MRG: Sync subversion
- MOD: Revert the update Association UID of ScottishGolf, instead update the ScottishGolf prod database as per Marcus
- MRG: Sync subversion
- Mod: Scottish Golf: member menu gradient background update
- MRG: Sync subversion
- MOD: Update Association UID of ScottishGolf
- MRG: Sync subversion
- Fix: scheduled task: test failing in which scorecard did not exists, but the code expected a scorecard
- MRG: Sync subversion
- MOD: ScheduledTasks: DG-6683: Changed from .ToList to AsList - If already in a list do nothing, otherwise call ToList.
- MRG: Sync subversion
- FIX: LIVE: DG-7656: Updated ISV APS system email parameters.
- MRG: Sync subversion
- MOD: ScheduledTasks: DG-6683: Updated flow.
- MRG: Sync subversion
- Fix: ClubCMS: rEventRegistration: #functions-registrations - 1) User no longer allowed to continue if a question that requires an answer is not entered. 2) No personal details shown when logged in as a casual golfer.
- MRG: Sync subversion
- Fix: Can't add not nullable columns if table already contains data.
- MOD: Require reviews from infrastructure devs for infrastructure changes
- MOD: Require code review from security managers for deployment files
- MRG: Sync subversion
- Fix: ClubCMS: SaveContentHtml: compare the website admin user's Passport's Association ID (not UserSecurity Club ID) with the club website's Association ID
- Fix: ClubCms: someone was able to sign up to a club using someone's existing number if their name was different from the existing persons name #53451
- MRG: Sync subversion
- Mod: WellKnownIDs: corrected the OpenPlay ClubUID
- MRG: Sync subversion
- Mod: Scottish Golf: updated the graphic image URL
- Mod: Scottish Golf: updated the graphic image URLs
- Mod: Scottish Golf: updated the graphic image URLs
- MRG: Sync subversion
- Mod: Scottish Golf: updated the logo URL
- MRG: Sync subversion
- Merged revision(s) 58530-58776 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Mod: Future Green Fee Report: snapshot isolation ........ Fix: Live: no more deleted cmember records getting in the way of stuff like reinstating people ........ Fix: Live: no more deleted cmember records getting in the way of stuff like reinstating people ........ Fix: Live: calendar was spamming massive objects into redis, which can cause blocking and timeouts ........ Fix: Live #53446 Fix where VCC clubs have the member search control for score entries disabled and hidden when there are competitions on the day which stops them from entering scores. ........ Fix: Kounta: Batch Import - Retrieve all completed sales first then sorts them from oldest to the most recent order before importing (into the DB). We have to do this because the Kounta /orders API endpoint is always returning the most recent sales and there is no option to return the oldest to the newest. ........ Mod: Live Parenthesis was mis-aligned so made this from through with our text when we populate the control as its always static and nothing fancy is going on. No point making CSS related things for it here. ........
- MRG: Sync subversion
- *** DFH CODE REVIEWED TO HERE ***
- MRG: Sync subversion
- Mod: Live Parenthesis was mis-aligned so made this from through with our text when we populate the control as its always static and nothing fancy is going on. No point making CSS related things for it here.
- FIX: Cleanup old test runs
- FIX: Cleanup old test runs
- MOD: Delete old test runs before running new run
- MRG: Sync subversion
- Mod: Autogenerated poco classes.
- Add: ED&I: New column to ExtFormFieldResponse table.
- MOD: ClubCMS: Added Address, Phone, Email and Facebook Url variable names
- MRG: Sync subversion
- Fix: Live: club doesnt care about pos online sales, stop spamming support
- MRG: Sync subversion
- Mod: clubcms: more #casualgolf mods around myaccount and event registration
- MRG: Sync subversion
- Fix: ScheduledTasks: UpdateTaskMetadata should not be skipped ever
- Merge remote-tracking branch 'origin/svn-sync'
- Merge remote-tracking branch 'origin/main'
- MOD: Whitespace
- Mod: Scottish Golf: CWControl and CWControlProperty table inserts
- Mod: SchemaUpdater handles GO with whitespace before/after
- MRG: Sync subversion
- Mod: DBbuilder handles GO with whitespace before/after
- Fix: Go space sql
- MOD: Refactor tests
- MOD: Reorder test setups
- MOD: Move action to "act" group
- MRG: Sync subversion
- Mod: Set up Scotland prod against our DEV windcave (this is bloody dangerous but we'll be changing this to Stripe before go-live)
- REV: Go backkkkkkk
- MRG: Sync subversion
- Fix: CountryCode=NZ stopped comp registrations online from showing for Scotland.
- MRG: Sync subversion
- Upd: EDI: Updated ExtForm settings for England.
- MOD: Cleanup whitespace
- FIX: Cleanup old test runs before running tests
- MRG: Sync subversion
- Fix: Tourism: Image page gallery grid fixes.
- MRG: Sync subversion
- Mod: sites-sct.list: added S,-,1,1,sg.sct.dotgolf.co.uk
- MRG: Sync subversion
- Mod: bindings.sctprod.list: added sg.sct.dotgolf.co.uk
- FIX: Actually change directories for build
- MOD: Make sure AssemblyInfoGenerator is build in its project dir
- MRG: Sync subversion
- FIX: Correct whitespace
- MOD: Refactor whitespace
- MRG: Sync subversion
- REV: De-array intermediary json format
- REV: Return functional script
- MOD: Bump everlytic/branch-merge from 1.1.2 to 1.1.4 (#251)
- MOD: Bump everlytic/branch-merge from 1.1.2 to 1.1.4
- MOD: Restructure pipes to keep redirection separated from logic
- MOD: Use consistent JSON states for both pipelines
- MRG: Sync subversion
- FIX: Correct whitespace
- MOD: Don't worry tooo much about the artefacts
- MRG: Sync subversion
- Fix: Live: sometimes GetEligibleCompetitionRounds times out
- MOD: Indent message lines to match list
- MOD: Bump publish version
- MRG: Sync subversion
- MOD: Update final merge message
- MOD: Cleanup backmerger
- MRG: Synchronise svn and git
- MOD: Add air gap
- MOD: Inline json parsing pipelines
- MRG: Synchronise svn and git
- MOD: Put fallbacks on the raw outputs
- MOD: Split sections by double new line
- Mod: Extquery: change to snapshot isolation (means we can remove nolocks from reports, like AUTO Check TB Last Payment Warning Emails)
- MOD: Format messages as markdown
- MRG: Synchronise svn to git
- MOD: Remove unneeded trailers from commit template
- MRG: Synchronise svn to git
- MOD: Remove checkout altogether
- MOD: Format merge message nicely
- Fix: Slicer: full payments being refunded, rather than refunding the amount minus our transaction fee. (the transaction fee on TBTransaction is never set for these.)
- MRG: Synchronise svn to git
- MOD: Update merge message wording
- MOD: Move checkout step (still commented out) near to where it is used
- MOD: Remove checkout step for speed optimisation
- MRG: Synchronise svn commits to git
- Upd: Amex: Updated tournament new scheduled.
- MRG: Synchronise svn commits to git
- Fix: Slicer: full payments being refunded, rather than refunding the amount minus our transaction fee. (the transaction fee on TBTransaction is never set for these.)
- MOD: Deline commit messages
- MRG: Synchronise svn commits to git
- Fix: AdWeb Keeps timing out when no name has been added to the search query -> shows relevant error when a field is missing its query
- MRG: Synchronise svn commits to git
- MOD: Cleanup
- DEL: Remove generated files
- MRG: Synchronise svn commits to git
- MOD: Archive raw commit data too
- MOD: Filter uniq authors for credit
- MRG: Synchronise svn commits to git
- Fix: Kounta: Batch Import - Retrieve all completed sales first then sorts them from oldest to the most recent order before importing (into the DB). We have to do this because the Kounta /orders API endpoint is always returning the most recent sales and there is no option to return the oldest to the newest.
- MRG: Synchronise svn commits to git
- Mod: ClubCMS: Scottish Golf: content tiles mod and css. We'll use this control to show highlighted contents (could be any page, news article) on the home page.
- MRG: Synchronise svn commits to git
- MOD: Remove debugger
- MRG: Synchronise svn commits to git
- MOD: Attempt newlines in actual commit message
- FIX: Correct miss-matched quotes
- MRG: Synchronise svn commits to git
- Fix: ClubCMS/GolfNZ #52770 Fix where the disable popup ad settings weren't being respected. Added selection for DisablePublicPopupAds for member lazy load
- MOD: Quote expression to verify newlines
- MOD: Don't @mention the author, just credit them
- MRG: Synchronise svn commits to git
- FIX: Archive correct path
- FIX: Use EOF syntax to parse inital json
- MOD: Don't kill the whole job if the debugger dies
- MOD: Experiment with new lines in the debug step
- MOD: Simplify tmp file
- TRY: Use literal newline char
- FIX: Adweb: Fix creation of News Section when enabled CW product
- MRG: Synchronise svn commits to git
- MOD: Archive commit metadata artefacts
- MOD: Remove debug step
- MRG: Synchronise svn commits to git
- Mod: Shared Don't actually need this flag
- Mod: whitespace for yuri
- MRG: Synchronise svn commits to git
- FIX: Correct output syntax
- FIX: Correct pipeline syntax
- FIX: Use correct tee syntax
- TRY: Use minified json as output and deserialise and deminifiy later
- TRY: Debug from the ground up
- TRY: Use non-escaped separator
- MOD: Rename CO_AUTHORS to just AUTHORS
- MOD: Add debugging step
- Mod: whitespace for yuri
- Fix: Removed the previously committed await
- FIX: Idk, maybe??
- MRG: Synchronise svn commits to git
- Mod: Shared Converted to new using style and added await
- FIX: Preserve multiline in env vars
- MRG: Synchronise svn commits to git
- MOD: Whitespace and braces
- Mod: Shared Take member disable popup settings into consideration
- MRG: Synchronise svn commits to git
- FIX: Use non-deprecated env output
- FIX: Allow multiline outputs using environment vars
- Mod: org: removed some old code from TournamentScoringWidget
- FIX: Fix sync workflow
- MRG: Synchronise svn commits to git
- MOD: List changes in backmerge message
- FIX: Use formatting function to specify fallback co-author
- MRG: Synchronise svn commits to git
- FIX: Use single quotes for string literal in GH expression
- FIX: List co-authors together with other trailers with fallback
- MRG: Synchronise svn commits to git
- FIX: Correct json formatting
- MOD: Simplify workflow for debugging and correct deserialisation
- MRG: Synchronise svn commits to git
- MOD: Autogenerate co-authors for SVN syncing
- MRG: Synchronise svn commits to git
- Upd: Amex: New tournament date update for this tasks.
- MRG: Synchronise svn commits to git
- Upd: Amex: New tournament schedule update.
- MOD: Update badges
- MRG: Synchronise svn commits to git
- Mod: Autogenerated poco classes.
- MRG: Synchronise svn commits to git
- Fix: sql: schema script pls for yuri
- MRG: Synchronise svn commits to git
- Mod: Clubcms: remove a bunch of linq-to-sql references
- MRG: Synchronise svn commits to git
- Mod: clubcms: ignore js
- MRG: Synchronise svn commits to git
- Mod: remove commented code
- Mod: ClubCMS: more support for casual golfers in member table #casualgolf
- MRG: Synchronise svn commits to git
- Mod: ClubCMS: more support for casual golfers in member table #casualgolf
- MRG: Synchronise svn commits to git
- Add: DGP-7524: Added handicap-rankings/styles.terraces_sg.css override.
- MRG: Synchronise svn commits to git
- Mod: clubcms: more #casualgolf mods
- MOD: Rename captured variable to be more clear
- Merge remote-tracking branch 'origin/svn-sync'
- FIX: Correct sync automation
- MRG: Synchronise svn commits to git
- DOC: Add documentation to the string extensions class.
- MRG: Synchronise svn commits to git
- Mod: ThirdPartyCompWinner table: add Notes column
- FIX: Correct co author trailer
- MRG: Synchronise svn commits to git
- MOD: New test domains for Scotland Club Websites
- MRG: Synchronise svn commits to git
- MRG: Synchronise svn commits to git
- FIX: Cleanup switch expressions
- MOD: Adweb: Copy page added Notes column to CWPageProperty
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: ClubCMS: member-has-password check now respects passportcredential deleted date
- ADD: Bring backmerge automation over from GitHub
- FIX: Correct whitespace
- ADD: Automate svn sync merges
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: sql script: add missing columns to cwimagecontent
- Add: Indexes for ClubCourseMatrix.
- Merge remote-tracking branch 'origin/svn-sync'
- Upd: EDI: Shared object models.
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: Org: make comp divisions handicap split text boxes less tiny
- Upd: EDI: ExtForm code clean-ups.
- Upd: EDI: Complete workflow in place.
- Fix: Live #53446 Fix where VCC clubs have the member search control for score entries disabled and hidden when there are competitions on the day which stops them from entering scores.
- Merge branch 'svn-sync'
- MOD: Duplicate of 7e5cc4f
- MOD: Final test refactors
- Fix: Mailer: bounce tracker upgraded off pop3 and onto MS Graph
- Fix: Mailer: bounce tracker upgraded off pop3 and onto MS Graph
- Fix: Mailer: bounce tracker upgraded off pop3 and onto MS Graph
- FIX: Prevent test data from generating max pool size of 0
- MOD: Refactor test to use proper AAA organisation
- FIX: Correct whitespace
- MOD: Region off test cases
- FIX: Clean up whitespace
- MOD: Reorder usings
- MOD: Region off test cases
- FIX: Whitespace corrections
- FIX: Add braces to blocks
- MOD: Refactor assertions
- FIX: Correct indentation
- MOD: Update aw_CWCopyPage to copy content of new controls
- ADD: Duplicate Jenkinsfile.Core for Shared build
- MOD: Expand groovy syntax to apply to weird Jenkinsfile names
- MOV: Rename Jenkinsfile to Jenkinsfile.Core
- ADD: CS0642: Possible mistaken empty statement
- Mod: ClubCMS: use page title instead of page name as default/fallback so we can have different url paths from page Titles e.g. https://www.golfireland.ie/volunteerawards vs Volunteer Awards title
- Mod: clubcms: delete micropower stuff
- FIX: Don't promote a package we never prepared
- Mod: ClubCMS: re-use sql plans for a bunch of CW operations
- Mod: WHSAPI: When in bulk import mode, we allow sending up scores for resigned members.
- Fix: GreenFeeTimeLine_NG converttopropercase doesnt  work with dapper
- FIX: Correct path to test dll
- MOD: Add debug lines
- Fix: GreenFeeTimeLine_NG converttopropercase doesnt  work with dapper
- Fix: Live: GreenFeeTimeLineFuture_NG propercase not working with dapper datareader
- FIX: Correct TS reference path
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Make API tests pass
- DIE: Kill nuget config
- Fix: Case where RSPlayer.Gender could be incorrectly populated IF you have a Member and NonAffiliate record linked to your passport AND your Gender value is inconsistent between these two.
- FIX: Walk up dir tree after stash pop as well?
- Fix: Core Club #53242 The list should be listing all the clubs but had a copy paste bug to filter by UID. This was causing Casual Golf Admin grief for voucher redemption
- MOD: AdWeb: Add CW News Section and Topics when enabling the Club Website product
- MOD: AdWeb: Add CW News Section and Topics when enabling the Club Website product
- FIX: Correct path to tests to walk up tree first
- Fix: Org: UpdateHandicapOverridesForRegistration getting handicaps from registration table when clearing a round override and f*cking things up. Needs to actually get from WHS but just want to escape, so backing away slowly
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: results accumulative broked
- FIX: Pass tests
- MOD: Move test cases to separate area to keep code clean
- MOD: Expand edge cases of `ToHumanString` tests
- Mod: remove some EF usings
- MOD: Simplify service provider disposal
- FIX: Dispose autofac service provider after completion
- FIX: Skip preparing a package we never upload to S3
- FIX: Remove project path entirely
- FIX: SQL: results tests brokey
- FIX: Moq ISSMParameterStore to return connection string
- MOD: Try to dispose of temporary autofac service providers
- FIX: Correct project path
- FIX: Correct test path
- Fix: createdb script being weird??
- Fix: sql: drop old proc
- Fix: sql: drop old proc
- MOD: Don't upload Core to S3 ¯\_(ツ)_/¯
- DIE: Kill (legacy) svn groovy library
- DIE: Kill svn groovy library
- Fix: API: getmarkers ORNS
- MOV: Relocate Shared and Core solution files to respective directories
- Fix: API: getting single score breaking for casual golfers after isEligibleForHandicapping mod
- MOD: Remove quote marks from echo string
- Add: sql: perf monitoring procs via Brent Ozar
- MOD: Prevent nuget restore from polluting jenkins log
- Mod: get member competitions slightly better query plan
- Mod: ClubCMS: GetPageID cached for 10s to help with teebooking load - it gets called a lot
- Fix: 7-digit membership numbers and old ComputerNo reference upgraded to IMemberCodeManager.
- Mod: Shared: IsLiveMemberOfClub cached for 10s to help with teebooking load - it gets called a lot
- Mod: sql: live_connector_poll perf update (mainly around not putting so much in the #setting temp table
- Mod: Autogenerated poco classes.
- Mod: sql: setting table perf update
- Mod: ClubCMS: updates for #casualgolf and removed unused open db connections
- Fix: ClubCMS #51685 Fix where if the player is trying to register for a competition through events calendar and the roundID is present. We were not checking for the allow non-affiliate or visitors toggle. Causing some of the affiliate visitors to not be able to register.
- MOD: Refactor batch commands to add github nuget source
- FIX: Correct paths for Core root
- Upd: EDI: Updates for EDI & OpenPlay scottish golf.
- MOD: Make `BUCKET_NAME` no longer a required variable
- ADD: Create jenkinsfile
- FIX: Split Jenkins file regex
- Fix spelling mistake
- Mod: Core: permanently switched to searchslotsV2/searchclubdayV2
- DEL: Remove svn dependency
- Mod: ClubCMS: MemberController update for #casualgolf and removed unused open db connections
- FIX: Specify version for groovy lib
- MOD: De-svn-ify jenkins
- Merge remote-tracking branch 'origin/svn-sync'
- MOD: Update kotarana domain
- MOD: Expand tests to verify `DataConnectionBuilder` instances constructed by DI are correctly instantiated
- MOD: Expand tests to cover `DataConnectionBuilder` registration resolution.
- ADD: Begin simple test for `AddDotGolfCoreServices`
- MOD: Cleanup `AddDotGolfCoreServices` definition
- FIX: Correct typo
- Mod: ClubCMS: UserHasAccessToScoringData update for #casualgolf
- Mod: ClubCMS: authhandler update for #casualgolf
- Mod: null coalesce
- Mod: ClubCMS: CompetitionsController: no longer hold extra dbconnections open
- Mod: ClubCMS: remove redundant computerno variable from member search
- Mod: API: Extend email verification timeout in case email gets delayed because of spam detection or other crap
- Fix: Live: calendar was spamming massive objects into redis, which can cause blocking and timeouts
- Fix: Live: no more deleted cmember records getting in the way of stuff like reinstating people
- FIX: Correct whitespace
- MOD: ClubCMS: Use the checking of Teekbooking enabled for Governing body instead of association id == 1000
- Fix: Live: no more deleted cmember records getting in the way of stuff like reinstating people
- Fix: Live: no more deleted cmember records getting in the way of stuff like reinstating people
- MOD: ClubCMS: Added a MyGolfLoginUrl in Features settings
- Fix: Draw Card Printer Utility webservice URL updated to https:// counterpart to avoid redirect errors.
- Mod: clubcms: remove unused BuildMyBookingsTable method (seems to have been replaced by BuildMyBookingsTableWithGoogleLink?)
- Merge remote-tracking branch 'origin/svn-sync'
- Merge remote-tracking branch 'origin/main'
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: test DB broke
- Fix: Live: people deleted at clubs where still showing as ex-members of those clubs in basic searches (like merge.aspx)
- Create SUPPORT.md
- MOD: ClubCMS: Added Master page for Scotland Teeboking and added a logic to identify Governing Body enabling Teebooking and some CSS color changes
- ADD: Create SECURITY.md
- Fix: Adweb: online subs transaction report
- Fix: Adweb: online subs transaction report
- FIX: ScheduledTasks: DG-7544: Handicap alert Hole Not Attempted updated using statement.
- FIX: ScheduledTasks: DG-7590: Letter spacing.
- FIX: Clubhouse: DG-7591: Update to MemberDetailsAndCategory styling.
- FIX: ScheduledTasks: DG-7590: UnsatisfiedScoreIntent Notification facelift.
- FIX: ScheduledTasks: DG-7544: Updated script.
- FIX: ScheduledTasks: DG-7544: Handicap alert Hole Not Attempted.
- Mod: Results: no longer create extra DB connections while we're in the middle of a transaction
- Mod: Results: no longer create extra DB connections while we're in the middle of a transaction
- Mod: Scorecard: Don't potentially open two connections at once
- Add/Mod: ClubCMS: Scottish Golf: hide secondary menu when the user scrolls down the page; added sg.js for Scottish Golf-specific js code
- Mod: Results: snapshot isolation.
- Mod: Green Fee Timeline Report: snapshot isolation. query still sucks though and times out
- Mod: Future Green Fee Report: snapshot isolation
- Mod: DataSet ProcessColumn now uses SetField instead of assigning directly because sometimes that can fail if column thinks its readonly
- Mod: Core: Snapshot isolation test confirming it actually works
- Mod: GolfNZ Added Age and Region filter to the proc so we can filter by them
- Mod: ClubCMS: Scottish Golf: style update
- Mod: ClubCMS/GolfNZ DG-7541 Added 2 new filters for the OOM player standings. They can now filter by under 16 or 19 as well as region. Added the same ability to save selected state of combo box while navigating back and forth between site in the same session.
- Mod: changed ToList to AsList for completely negligible performance bump
- Mod: ClubCMS: Scottish Golf: basically renamed pageheader to page-header (to keep it consistent with the rest of the control names)
- FIX: Correct typescript reference paths
- Mod: ClubCMS: hero-swiperjs: added a CSS class name to the admin edit button div container;
- Add: Core: snapshot isolation
- MOD: ClubCMS: Added club website test domains for Scotland
- Add: ClubCMS: Scottish Golf: admin content block control: style update; hide the save success message when the setting is changed again
- Mod: ClubCMS: Scottish Golf: content block control: style update
- Add: ClubCMS: Scottish Golf: admin content block control: use a basic text editor
- Add: ClubCMS: Scottish Golf admin content block control: form layout updates
- Mod: ClubCMS: Scottish Golf: content block control: removed two icon options
- Add: ClubCMS: Scottish Golf: admin page header control: removed unnecessary code
- Mod: ClubCMS: Scottish Golf: content block control: separate the heading text (title) from the content to make sure it's consistently styled
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Change deprecated `DefaultIfNullOrEmpty()` references to use `EmptyIfNull()` instead
- MOD: De-svn-ify jenkins
- Mod: ClubCMS: Scottish Golf: content block control: allow the admin to select an embellishment (e.g. hexagon shape on the side of the image)
- Mod: sql: drop duplicate index on tbtimeslotentry that wasnt in schema scripts
- Mod: sql: Actually don't recompile wa_TBGetPlayerFriendsEligibility because CPU gets too high
- MOD: De-svn-ify jenkins
- Merge remote-tracking branch 'origin/svn-sync'
- FIX: Specify `suggestion` as default severity level explicitly
- FIX: CA2000: Dispose objects before losing scope
- MOD: Enable warning for CA2000
- Mod: ClubCMS: Scottish Golf: content block control: added more icon options
- Fix: Results: when getting scores relevant to results do not open two sql connections at once if we're in a code transaction
- Fix: simple using was too simple
- Fix: simple using was too simple
- Fix: simple using was too simple
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: simple using was too simple
- Mod: ClubCMS: Scottish Golf: content block control: allow the admin to select an icon to go with the text
- Merge remote-tracking branch 'origin/svn-sync'
- Fix: sql: script ??
- MOD: Interclub TV2: Add an interceptor to Axios that when the user session expires, it will execute the authenticate and redirect the user to SSO. Also extends the cookie expire to 24 hours
- Mod: sql: recompile wa_TBGetPlayerFriendsEligibility to see if it fixes awful 20s loads (but it was low cpu, high duration, high reads, so probably waiting on something?)
- MOD: ScheduledTasks: DG-6683: Added unit tests.
- Mod: Remove hardcoded index hint from wa_TBAddNotificationForClub because we don't need that index
- MOD: Clean up tests during debugging
- MOD: Cleanup test during debugging
- FIX: Clean up this monstrosity of a test file
- Mod: sql: drop unused indexes on tbtimeslotentry and rsresult (found with dbo.sp_BlitzIndex). Less indexes means less index updates and less stats for query optimiser to look at
- Merged revision(s) 58376-58490 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: Live: Teebooking: Payments page crashing if InitialOnlinePayment is null - Happens if an online booking is moved, and we no longer have a reference to the initial timeslotentryid. ........ Mod: Live DG-7501 Full screen from running live when the session is logged out it runs it in normal safari so adding these tags to keep it in fullscreen mode. ........ Mod: Live Fix indent ........ Mod: Live Kiosk Marker Filter weren't doing what it was supposed to do ........ Mod: Live/Kiosk DG-7501 - Updated the offset to take into consideration of the marker filter if it is there and likewise if there is a lot of competitions but no marker filter. As sometimes the yes and no for competition participating option is overlayed by the previous button the user cannot get to tapping no. So made the pager take these into consideration. - Made vm.populateMarkerFilters() default to false instead. ........ Fix: Entry by card number is based on CP, not LCP. ........ Fix: Entry by card number is based on CP, not LCP. ........ Fix: Entry by card number is based on CP, not LCP. ........ Fix: LCP product code no longer exists; we just CP for card printing. ........ Fix: Stupid LiveCardPrinting assetgroup lying around still. ........ Mod: Live/Kiosk DG-7501 Removed navigation button visibility toggle on filter selection. Because sometimes there's more comps that are being filtered out than that first page so we need to be able to navigate. ........ Mod: Live/Kiosk DG-7501 Nice to have when filtering to just return to the first page ........ Mod: Show the required permission if the user can't access a page. ........ Mod: Live/Kiosk DG-7501 Changing paging size so when the marker is filtered; the user won't have to scroll into darkness. ........ FIX: Clubhouse: DG-7578: Updated script to include group by on default markers.
- FIX: Correct documentation spelling and indentation
- FIX: Specify groovy lib version
- MOD: De-svn-ify jenkins
- Mod: ClubCMS: Scottish Golf: admin content block control: text updates
- Mod: ClubCMS: Scottish Golf: content block control: removed the Golf NZ-specific default values
- Mod: ClubCMS: Scottish Golf: content block control: show save success message beside the save button (to keep it consistent with the other admin controls)
- MOD: De-svn-ify Jenkins
- Mod: Live/Kiosk DG-7501 Works well so have changed it to "gb-sct" everywhere else will see the default icon
- Mod: Live/Kiosk DG-7501 Change file extension... :man-facepalming: TODO: Change the DatabaseCountry code to "GB-SCT" as the "NZ" is just for stage testing
- Mod: ClubCMS: Scottish Golf: content block control style updates
- Add: ClubCMS: Scottish Golf admin content block control
- Mod: ScheduledTasks: minor logic tweak so that subs renewal retry dates are set based on the process start time, not whatever the time is when we get to a person
- Mod: Scheduledtask: minor code style change in test
- Mod: Live/Kiosk DG-7501 Added asset Scottish Golf icon for "Add to Home Screen" so when this is being booked marked on the home screen in Scotland it'll be using their union logo TODO: Change the DatabaseCountry code to "GB-SCT" as the "NZ" is just for stage testing
- REV: Return deleted Code of Conduct file
- DEL: Remove Code of Conduct
- MOD: Pennants: Fix not selecting venue in contest
- Fix: unit test build
- Mod: ClubCMS: Scottish Golf: content block control: 3-column, styles 1 and 2: heading style mod
- Fix: Live: online subs report now shows correct number of signups including people who were not created
- Mod: ClubCMS: Scottish Golf: content block control: 3-column, styles 1 and 2
- Fix: Bloody @pastdavid
- FIX: Change deploy lib path post extern removal
- ADD: Expand editor config with soft suggestions
- Fix: Live: online subs report now shows correct number of refunds
- MOD: Mark bizarro method private obsolete
- FIX: Correct whitespace
- FIX: Correct broken documentation comments and replace misnamed method with correctly defined method
- MOD: Avoid inline if statement
- MOD: Cleanup DataConnectionBuilder registration
- DOC: Clean up documentation
- MOD: Pennants: Fix not able to save issue
- FIX: Add missing whitespace
- Add: include memberapplicationid in slicer index
- MOD: ClubCMS: Interclub fixes on displaying divisions
- Add/Mod: ClubCMS: Scottish Golf: content block control initial commit (image + text, styles 1 and 2)
- Fix: ClubCMS: Golf NZ: horizontal page scroll on mobile: revert mod 58454
- MOV: Relocate all bindings to solution root
- FIX: Specify `Trunk` in path
- Fix: Oops, buggered this procedure...
- MOD: Merge clubhouse Jenkinsfile over live Jenkinsfile
- FIX: Correct whitespace
- FIX: ScheduledTasks: DG-7582: some open connections without using statements.
- FIX: Correct whitespace and quotation errors
- ADD: Include Jenkinsfile in solution
- MOD: Dance the Visual Studio dance
- FIX: Clubhouse: DG-7578: Updated script to include group by on default markers.
- Fix: clubcms: error in member signup when giving prev number
- Mod: ORG-NZ DG-7130 Add new tournament category [All Abilities] for selection when creating a new national tournament in org
- Fix: If we return a null handicap from the IHandicapProvider, gracefully fail the member search.  This isn't something that happens all the time in prod, but it does if you're Scotland and David hasn't imported your members to WHSAPI yet.
- MOD: Adweb: Added EmailSubscriptionType default record when SPAM3 product is added
- MOD: ClubCMS: Implement Url redirects stored in the database
- Fix: ClubCMS: Scottish Golf: remove horizontal page scroll
- Fix: ClubCMS: Scottish Golf: horizontal page scroll on mobile: revert mod 58386
- Fix: ClubCMS: Golf NZ: remove horizontal page scroll
- Mod: Live/Kiosk DG-7501 Changing paging size so when the marker is filtered; the user won't have to scroll into darkness.
- Mod: Show the required permission if the user can't access a page.
- Mod: Live/Kiosk DG-7501 Nice to have when filtering to just return to the first page
- Mod: Live/Kiosk DG-7501 Removed navigation button visibility toggle on filter selection. Because sometimes there's more comps that are being filtered out than that first page so we need to be able to navigate.
- Fix: Stupid LiveCardPrinting assetgroup lying around still.
- Mod: Refer to ClubFeeGroups by their (newly added) UID rather than the table identity value (which is a problem for SCT1 since the table got inserted a different way round).
- Mod: Autogenerated poco classes.
- Add: ClubFeeGroup.ClubFeeGroupUID column so we no longer have to refer to these by their PK values.  The madness has gone on long enough.
- Add: Documentation
- Mod: WebUser.IsSystemAdministrator is now controlled by a bit flag on UserSecurity instead of a hardcoded check for a username.  The plan with IsSystemAdministrator going forward is to use it for the Scottish Golf and GB&I teams where they need access to internal parameters like DotGolf, but not quite the same depth we need for the core dev team.
- FIX: ClubCMS: Fix /controls/golfnz-event-search	control scrolling when Region is changed
- Mod: Autogenerated poco classes.
- Add: UserSecurity.IsSystemAdministrator column.
- Mod: ClubCMS: Scottish Golf: menu background gradient update
- Merge remote-tracking branch 'origin/svn-sync'
- Mod: Autogenerated poco classes.
- Fix: Pristine database builder - path fixed again
- Mod: Autogenerated poco classes.
- Fix: Pristine database builder didn't live up to it's name.
- Fix: Pristine Database Builder file was off by 1 directory.
- Mod: Autogenerated poco classes.
- Fix: Pristine database builder didn't live up to it's name.
- Add: Pristine Database Builder: The step that actually /builds/ the database was missing, so every time this job ran, it committed an old EzPoco to trunk.
- Mod: Autogenerated poco classes.
- Fix: Pristine database builder didn't live up to it's name.
- Merge remote-tracking branch 'origin/svn-sync'
- Mod: LCP product code is now obsolete.
- Mod: LCP product code is now obsolete.
- Mod: live_Connector_Poll checks for CP instead of LCP now.
- Fix: LCP product code no longer exists; we just CP for card printing.
- Fix: Entry by card number is based on CP, not LCP.
- Fix: Entry by card number is based on CP, not LCP.
- Fix: Entry by card number is based on CP, not LCP.
- FIX: Delete `DotGolf.Shared.Tests.WhatIsThisDoingHere`
- Mod: Autogenerated poco classes.
- Revert: Buggered EzPoco.g.cs, thanks internal Jenkins.
- Fix: Adweb: Could not assign CP product to club due to hidden products in SCT1.
- Mod: Live/Kiosk DG-7501 - Updated the offset to take into consideration of the marker filter if it is there and likewise if there is a lot of competitions but no marker filter. As sometimes the yes and no for competition participating option is overlayed by the previous button the user cannot get to tapping no. So made the pager take these into consideration. - Made vm.populateMarkerFilters() default to false instead.
- Mod: WellKnownIDs: defined Scotland's OpenPlay ClubUID
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Correct typescript reference import paths
- FIX: Make moment.js vendored
- FIX: Vendor out `node_modules/`
- FIX: Correct seemingly shared references that are actually local
- Mod: Autogenerated poco classes.
- FIX: ScheduledTasks: DG-6683: Fixed build.
- FIX: Correct paths in csproj
- MOD: ScheduledTasks: DG-6683: Initial Handicap Alert to Handicap Secretary.
- Mod: England: MyEG app privacy policy URL now points to https://www.englandgolf.org/whs-privacy-policy.
- Add/Mod: ClubCMS: added the "golf nz" accordion control; and accordion style updates
- Fix: Functions: #functions-registrations part 2: Online Registrations - Minor refactor: Move FunctionRegistration and FunctionRegistrationState to it's own source files. [DG-7549] [DG-6766]
- Fix: Functions: Online Registrations - Minor refactor: Move FunctionRegistration and FunctionRegistrationState to it's own source files. [DG-7549] [DG-6766]
- Fix: ClubCMS: Golf NZ: revert 58387 - caused mobile styling issues
- FIX: ClubCMS: Javascript error on tournament event feed
- ADD: CWRedirect table
- 
- MOD: ClubCMS: Interclub comparer to sort Contest Names that is numeric and string
- FIX: Remove external links from badges (#250)
- FIX: Remove external links from badges
- Mod: Live Fix indent
- BACKMERGE (#249)
- FIX: Correct relative paths to shared resources
- MOD: ClubCMS: Interclub sort Contest Label
- FIX: ClubCMS: Fix Terraces 3.1 Master for Teebooking to allow new controls to work
- Fix: ClubCMS: Scottish Golf: rte table style fix
- Fix: ClubCMS: Golf NZ: remove horizontal page scroll on mobile (revert 58380)
- Merge remote-tracking branch 'origin/svn-sync'
- Merge branch 'svn-sync'
- MOD: Tag @dotgolf/riders properly
- Fix: ClubCMS: Scottish Golf: remove horizontal page scroll on mobile (revert 58379)
- Mod: Live DG-7501 Full screen from running live when the session is logged out it runs it in normal safari so adding these tags to keep it in fullscreen mode.
- MOD: Pennants + ClubCMS: Interclub updates and change of dates to local from UTC
- MOD: Add readme badges
- Fix: ClubCMS: Golf NZ: remove horizontal page scroll
- Fix: ClubCMS: Scottish Golf: remove horizontal page scroll
- MOD: ClubCMS: Updates on Social Media Links control
- Fix: Live: Teebooking: Payments page crashing if InitialOnlinePayment is null - Happens if an online booking is moved, and we no longer have a reference to the initial timeslotentryid.
- Mod: ClubCMS: Scottish Golf: admin button css class update
- Mod: ClubCMS: Scottish Golf: button, admin style updates
- Mod: ClubCMS: Scottish Golf: golfnz-rte-block: use CSS to hide / show the correct pattern instead of creating a new control property
- Mod: ClubCMS: Scottish Golf: golfnz-admin-rte-block: text update; use CSS to hide / show the correct pattern instead of creating a new control property
- Mod: ClubCMS: Scottish Golf: dark theme style update
- Mod: ClubCMS: Scottish Golf: admin style updates
- Mod: ClubCMS: Scottish Golf: golfnz-rte-block: corrected the default pattern
- Mod: ClubCMS: Scottish Golf: golfnz-admin-rte-block: added the sg pattern; renamed content to html to make it consistent with the golfnz-rte-block; display success message beside the save button to make it consistent with the other admin controls
- Mod: ClubCMS: Scottish Golf: text, admin style updates
- Mod: API: MyEG: Splash screen banners duration changed from 5 to 3 seconds.
- Mod: ClubCMS: Scottish Golf: style update
- Mod: ClubCMS: Scottish Golf: page header: encode title and subtitle to allow special characters
- Mod: ClubCMS: England Golf: replaced / renamed icon-arrow-eg to icon-arrow
- Mod: ClubCMS: Scottish Golf: include the other font weights of the Rubik font
- Mod: ClubCMS: Scottish Golf: style updates; apply branding to primary button; rte button, link, pattern;
- Mod: ClubCMS: Scottish Golf: golfnz-rte-block: apply styling of link button; allow configuration of pattern (the Golf NZ pattern is the default)
- Mod: ClubCMS: Scottish Golf: golfnz-admin-rte-block: apply styling of buttons and table
- Mod: sql script
- Mod: sql script
- Mod: API: MyEG: Ads - Disable hack to return ads only for test flight apps in non-production environments.
- fucking jenkins
- Mod: Autogenerated poco classes.
- Mod: dbbuilder trace writeline
- fucking jenkins
- Mod: Autogenerated poco classes.
- Fix: copypaste bug in jenkinsfile
- Mod: ClubCMS DG-7540 Create all the replacement values so that it will replace CKEditor replacement values
- Mod: fix build so jenkins can generate pocos again
- Mod: ClubCMS DG-7540 Create association so that FlexiClubNZ can edit the welcome email template from system email
- Mod: ClubCMS DG-7540 Insert new DiscountCode for SystemEmail Template for FlexiClub Welcome email being system email for NZ
- Fix: old jenkins build server still needs to commit pocos
- Mod: ClubCMS DG-7540 Insert new SystemEmail Template for FlexiClub Welcome email being system email for NZ
- MOD: ClubCMS: Added Social Medial Links control for Golf NZ District Sites
- Mod: Core: NZ extquery form UID
- Mod: Core: England extquery form UID
- Add: ExtFormUIDs Feature for finding specific forms by country
- Add: Core: BusinessLogic class for ExtFormResponse
- Mod: ClubCMS DG-7540 Converted FlexiClub emails to use SystemEmail TODO: Convert SQL script to create association so FlexiClubNZ can modify it in bulk email
- Mod: Autogenerated poco classes.
- Mod: "autogenerated" poco classes
- MOD: ClubCMS: Added CssClassName property for zHero - SwiperJS
- Fix: ClubCMS: score divider was showing below the 19th score
- FIX: Yaml syntax error
- Mod: Prevent results task logging "error" every minute
- Mod: ClubCMS: injectionAttackBlocker now case insensitive because spammers keep fucking with their casing
- MOD: ClubCMS: Interclub separate the Round Date and Venue with pipe
- Mod: API: List Friends: Sort by friends' recent play date and indicate the if the last score is counted towards the person's handicap which is always set to false. Currently, there's no easy way of getting this info. In the app, the score will no longer have a green background.
- MOD: ClubCMS: Interclub use the Invariant Culture for the AM/PM display
- MOD: ClubCMS: Interclub use the Invariant Culture for the AM/PM display
- MOD: ClubCMS: Interclub use the Priority in RSCompetitionEntry for the default order on the competition page
- MOD: ClubCMS: Interclub update on Tournament Detail Header control
- MOD: ClubCMS: Interclub UI round results improvement
- FIX: Prevent cookie accepted event from double-triggering
- Mod: Change index for ExtFormResponse to include isCurrent tinkering with script order
- Mod: Change index for ExtFormResponse to include isCurrent
- Mod: sql: ExtFormResponse IsCurrent flag and ExtFormResponse_IsCurrent_Insert trigger for ED&I responses
- MOD: ClubCMS: Remove default content
- Mod: Shared.Tests: Mark as test project in csproj
- Fix: ClubCMS: Scottish Golf: footer styles
- Fix: ClubCMS: Scottish Golf: footer styles, height, responsiveness
- MOD: ClubCMS: Interclub added Time in the UI
- Mod: API: MyEG (Part 2) - Enable inline ads only for the test flight app. I will remove this hack once we've released the app.
- Mod: England: Enabled ads in the app.
- Mod: API: MyEG - Enable inline ads only for the test flight app. I will remove this hack once we've released the app.
- Mod: API: all controllers now almost completely support casual golfers in the member table #casualgolf
- FIX: Bulk Email V3: To all mailto in the read more url
- MOD: De-snv-ify jenkins
- MOD: ClubCMS: Interclub highlight on-going contests
- MOD: ClubCMS: Interclub updates on fonts
- Fix: Live: applybookingchanges errors in POG when home clubs members trying to book
- MOD: ClubCMS: Interclub show all contests
- Merged revision(s) 58062-58273 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: Live: newtonsoft update ........ Fix: tests?: newtonsoft update ........ Mod: Live DG-7447 This is only applicable to Rounds management house accounts Added checkbox to modify the system code so that the adjustments will expire at the end of the respective membership subscription period. This just modify the SystemCode from DOTGOLF to DG-RM-IC -> there is already logic in the back end that handles the expiry. ........ Mod: Live DG-7447 Checkbox is hidden for transfer mode ........ Fix: Live: bulk email v2 stream not closed ........ Mod: Live: remove "ReadFully" method that reads stream with a 32768 byte buffer ........ Mod: Live DG-7468 Add logging when prize reverse fails pre-rollback ........ Fix: Live: stored proc for updating competition rounds should use sp_executesql for plan caching ........ Fix: Avoid throwing an unhandled exception (which takes out the Live app pool) when an email link is clicked on which doesn't correctly parse to EmailId and EmailComposeId.
- Mod: ClubCMS: Scottish Golf: admin-pageheader: fix the responsiveness of the form
- MOD: ClubCMS: Interclub font changes
- Mod: ClubCMS: Scottish Golf: style updates and fixes
- MOD: Pennants: Updates on Interclub Tournaments control and allow no set team when creating contest
- Fix: Competitions Fee report: Missing competition Id filter in the JOIN clause.
- Mod: sql: ExtFormResponse ExtFormField ExtFormFieldResponse
- FIX: Correct groovy library name
- MOD: Cleanup `ToInt()` extension
- FIX: Remove assembly info template from build
- FIX: Use non-wcrev assembly infos
- Fix: Okay, that wasn't the problem, let's try again.  filterCompMarkers() returned undefined causing pain downstream.
- Patch: Don't crash when you send a null array into dotgolf.knockout.pager.js::Page()
- FIX: De-extern shared references
- FIX: Correct typescript import paths from old extern
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Add git metadata for generated files
- Add: ClubCMS: Scottish Golf: admin style updates
- Fix: Part 2 - Allow juniors who have pending handicaps to register to a competition if the club has the "Futures" product.
- FIX: Use ascii punctuation
- Fix: ClubCMS: Scottish Golf: apply <a> tag to the secondary nav items
- Mod/Fix: ClubCMS: Scottish Golf: - Defined default values to the control properties - Renamed the graphic options to just graphic1, graphic2 - Fixed saving of control property values when the control is just newly added through Adweb, and doesn't have entries in the CWPageControlSetting table yet.
- MOD: Pennants: Changes on ClubCMS controls to display Conferences results and groupings of Contests per Round
- Add: ClubCMS: added SavePageControlSetting, which inserts or updates a page control setting given the pagecontrolid, controlproperyid and setting.
- Add: ClubCMS: GetPageControlSettings: updated the query to return PageControlId and ControlPropertyId
- FIX: Bump newtonsoft binding redirects to v12
- Fix: Allow juniors who have pending handicaps to register to a competition if the club has the "Futures" product.
- Add: New product Futures (FUT).
- Mod: sql: drop unused indexes on score
- Mod: sql: drop unused indexes on score
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Bump newtonsoft to v12.0.3
- MOD: De-svn-ify jenkins
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Pre-emptively correct merge conflict
- Mod: sql: drop duplicate index IX_Scorecard_MemberId on scorecard
- FIX: This would have been a merge conflict, luck for you I got it just in time
- Mod: sql: drop duplicate nc index on RSResults
- MOD: Update labels (#246)
- MOD: Break labels down by shared sub project
- MOD: Expand `Other/**` directory by sub project
- MOD: Make labels auto remove when no longer needed
- Mod: sql: CWEmailArticle pk and index to make bulkemail v2 less bad
- ADD: Setup labeler action to label PRs against the projects that the modify (#245)
- Add: ClubCMS: Scottish Golf: page header: updated the default background style
- MOD: Add non-project labels
- Add: ClubCMS: Scottish Golf: add subtitle to page header
- MOD: Map projects to labels
- Mod: ClubCMS: Scottish Golf: push up the hero control (the nav was moved to the top panel)
- FIX: Correct syntax error
- ADD: Create a bare-bones labeler definition
- Add: ClubCMS: Scottish Golf: page header control updates; apply different styles
- Mod: ClubCMS: Scottish Golf: page header style updates; push down the centerfullwidth panel (the nav was moved to the top panel); admin style updates
- ADD: Create labeler.yml
- Reverse Merged revision(s) 58241 from Trunk: (dont want to do this now) Mod: Remove externs from DG Live ........
- Mod: Live: more dlls ignored
- Mod: Remove externs from DG Live
- Fix: ClubCMS GolfNZ DG-7506 #53295 Updated to use the Monday date as start of the week instead of the generic start date for the week population
- Add: results: new type for golf irelands scratch cup thing
- Fix: Live/Clubcms: results perf for accumulative results betterer
- FIX: Include default secret as fallback (#241)
- FIX: Don't run this workflow on dependabot PRs
- MOD: Use `gh` instead of third party action to enable automerge
- FIX: Include default secret as fallback
- MOD: Pennants: Implement Conference within the Competition Setup and the ability to assign Conference to a Team. Also added Round Name, Contest Name and Playoffs ticked box.
- FIX: Bump Newtonsoft from 9.0.1 to 12.0.3
- Mod: sql: DrawCompetitionRound index on CompetitionRoundId for GetResults
- MOD: Simplify the README by offloading development workflow to CONTRIBUTING
- MOD: Bump DotGolf.Clients.WHSAPI from 1.1.0 to 1.1.1 in /DotGolf.CasualGolf.Web.2014/DotGolf.CasualGolf.Admin (#99)
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- MOD: Update clients
- MOD: Change dependabot schedule to daily
- Merged revision(s) 58230 from Trunk: Mod: Shared: nonaffliate mod to track all the person's visited clubs (in personclubdetail) not just the first one we find :grimace: ........
- Mod: Shared: nonaffliate mod to track all the person's visited clubs (in personclubdetail) not just the first one we find :grimace:
- Mod: sql: Index IX_PersonClubDetail_NonAffiliateId.sql to make shared/data/Nonaffiliate.cs VisitedClubIds  performance better.
- MOD: Bump client versions to reflect changes from ce7bc59
- Mod: ClubCMS: Scottish Golf: page header control properties; style update
- Add: ClubCMS: Scottish Golf: admin page header control (initial commit)
- Mod: HandicapProviderWHS: less pollution of sql plan cache by not using dapper's parameter list expansion
- Mod: ISVAPI: Minor member profile id fetching refactor in mergescores to keep the secret key internal to Core
- Mod: adweb: Minor member profile id fetching refactor in mergescores
- Mod: Add new encryption key for upcoming ED&I stuff
- Reverse merged revision(s) 58216-58215 from Trunk: Mod: Replacing default AES cypher mode with a more secure one. Add new encryption key for upcoming ED&I stuff ........ Mod: Replacing default AES cypher mode with a more secure one. Add new encryption key for upcoming ED&I stuff ........
- Mod: Replacing default AES cypher mode with a more secure one. Add new encryption key for upcoming ED&I stuff
- NOP: test 2
- Mod: Replacing default AES cypher mode with a more secure one. Add new encryption key for upcoming ED&I stuff
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Correct externed paths
- MOD: Break down multiline loop
- Mod: Replacing default AES cypher mode with a more secure one. Add new encryption key for upcoming ED&I stuff
- FIX: Correct overzealous find and replace
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Correct paths to work with non-externed dependencies
- Mod: API: MyEG app "Dashboard" inline ads.
- MOD: De-svn-ify jenkins
- MOD: De-svn-ify jenkins
- Mod: Live: EG want to stop people from searching by name when signing up new people because they keep having to untangle the messed up merges.
- MOD: De-svn-ify jenkins
- FIX: syntax error in abort logic
- MOD: Update groovy library
- MOD: De-svn-ify jenkins
- MOD: De-svn-ify jenkins
- FIX: Correct solution root
- FIX: Correct solution root
- FIX: Correct groovy library name
- MOD: De-svn-ify jenkins
- MOD: De-svn-ify jenkins
- MOD: De-svn-ify jenkins
- MOD: De-svn-ify jenkins
- Fix: Live/Kiosk DG-7492 #53281 Fix where marker filter was causing some grief to couple of clubs. Not sure why the data returned was different from Dev here so just making some checks around marker to make sure its not null or undefined.
- FIX: Case sensitive typo in groovy library name
- Mod: ClubCMS: Scottish Golf: removed redundant style; page header style update; removed button outline and content spacer
- Add: ClubCMS: Scottish Golf: page header control (initial commit)
- Fix: Org: app registration report more clearly labelled
- MOD: De-svn-ify the jenkins build
- MOD: ClubCMS: Ads.txt update for EG website
- MOD: Bump actions/checkout from 2 to 3 (#66)
- FIX: Specify groovy library version
- FIX: Clubhouse: DG-7490: Fixed hs6/8 report - grab all scores not just first batch & exclude members if they only have manual adjustments.
- Fix: Avoid throwing an unhandled exception (which takes out the Live app pool) when an email link is clicked on which doesn't correctly parse to EmailId and EmailComposeId.
- FIX: Purge svn
- "Fix": Live/ClubCMS/API: score listing now works better based on offset/fetch (confirmed in ssms that query plan is now better), but discovered that the Live score filters have not been working.
- Add: IX_Competition_SocialFeedKeyword to avoid PK scans on Competition.
- Fix: Live: findmembers performance - change back to basic search because advanced search was breaking perf
- FIX: Broken test holding up jenkins to git migration
- MOD: Backmerge BusinessLogic refactor from Git
- Mod: ClubCMS: Scottish Golf: footer text update
- Mod: ClubCMS: Scottish Golf: footer style updates
- Mod: test: remove unused vars
- Fix: Live: stored proc for updating competition rounds should use sp_executesql for plan caching
- MOD: Separate "all" queryable functionality from deprecating "query"
- FIX: Pennants: Make SocialFeedKeyword field not required
- FIX: Pennants: Fix not able to create a Team that is not assigned to a club
- FIX: Add the new service base class to autofac
- MOD: ClubCMS: Update Interclub controls and create a view for event feed
- FIX: Make "local" functions actually local
- FIX: Off by one was causing test failure
- Mod: minor perf tweaks to live_GetAllFriends
- DOC: Explain the service style interface and it's usage.
- FIX: Make BusinessLogic optionally more service like
- Fix: API: poor perf when fetching scores
- Mod: ClubCMS: Scottish Golf: display a "you are already subscribed" message when the email address is already subscribed. Allow the user to submit the form using the enter key. Apply newsletter subscribe style updates.
- Mod: Live DG-7468 Add logging when prize reverse fails pre-rollback
- Mod: Included IsCover in IX_HoleImage_CourseId_HoleIndex_DeletedDate for performance or course detail page in ClubCMS.
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Update test to check the new query
- FIX: Warnings that were handled before Marcus broke them in ea7e364d1b0104a3dd0731acd75635590d69b892
- Mod: Quick hack to try and improve performance of live_GetAllFriends by avoiding the XML dom.
- FIX: Correct broken query
- Fix: Scheduledtasks works every minute now
- MOD: Remove SVN from jenkinsfile
- FIX: Simplify inline assertion
- FIX: MSSQL version parsing
- FIX: Clean up method sigs
- FIX: Use indexes to select a different value for each iteration of a loop, not a switch statement
- Mod: member score listing: more tweaks to returned props
- Mod: member score listing: more tweaks to returned props
- FIX: Use braces dammit
- FIX: Sort usings
- FIX: RCS1037: Remove trailing white-space
- Merge branch 'main' of https://github.com/dotgolf/DotGolf.Trunk
- FIX: Extern dependent paths
- Fix: API: member score listing single method works correctly now (was not using WHS data)
- FIX: Typo in comment
- FIX: These plugins are vendored
- FIX: This is a vendored library folder
- FIX: Mark minified JS as explicitly JS files
- MOD: Mark minified JS files as generated.
- FIX: Typo in readme introduction
- Fix: WHSAPI: get single score HDPostPCC set nicely
- Mod: Live: missing 'isHoleByHoleDataPresent' flag in score listing when fetching single score
- Mod: pendantic style change to ifnotnull extension method
- Fix: jenkins: checkout sql folder if core.tests is in the build (extern is removed)
- Mod: ClubCMS: Scottish Golf: footer control (work in progress)
- Mod: Live: remove "ReadFully" method that reads stream with a 32768 byte buffer
- Fix: refactor extension ToByteArray to use modern modern stream apis instead of hardcoded buffer
- Fix: Live: bulk email v2 stream not closed
- Mod: Core: update background task service deserialisation to use non-deprecated newtonsoft props instead of bullshit reflection hack
- Mod: Reports: update report deserialisation to use non-deprecated newtonsoft props
- Mod: Shared: petty refactor of RedshiftDataSource to remove while(true)
- FIX: `GOTO` considered harmful
- FIX: Move var to where it needs to be
- FIX: Simplify boolean logic
- MOD: Use implicit constructor
- MOD: Simplify tick selection logic
- FIX: Use var over explicit type
- FIX: IDE0011
- FIX: RCS1037
- MOD: Simplify boolean condition
- MOD: Clean up usings
- MOD: ClubCMS: Show pennants competition in Tournaments control
- DEL: Rip out SNV stuff
- Delete Jenkinsfile-svn
- Delete Jenkinsfile-svn
- Delete Jenkinsfile-svn
- FIX: Bump build version and remove SVN patch version
- *** DFH CODE REVIEWED TO HERE *** MOD: Org: Hide TV2 Player and Round Management link for now
- DEL: Ignore source files
- Delete knockoutTest.js.map
- Delete knockoutTest.js
- MOD: Pennants TV2: Added SocialFeedKeyword on Competition Setup
- MOD: Remove redundant directory change
- MOD: Specify required directory
- MOD: Specify required directory
- FIX: Reference correct library
- MOD: Pennants on ClubCMS: Show player names from schedule if there are no results yet
- Mod: ClubCMS: Scottish Golf: member menu style updates; button style updates
- Mod: remove goto from RedshiftDataSource
- FIX: Archiving the bindings
- FIX: Exit instead of throw
- FIX: Throw on null hosts as well
- LOG: Add debug lines
- Mod: ClubCMS: Scottish Golf: menu css updates; icon, text and link path updates
- MSK+DFH Fix: Slicer: iGolf refunds of renewal payments were not being processed via slicer (only renewals of membership application payments). We now use Receipt and Invoice to find which club a refund was attached to, instead of MembershipApplicationTransaction
- FIX? deploy path
- FIX: Escape the other `\`
- FIX: Excape `\`
- FIX? Correct copy source path
- REV: reverse path changes
- FIX? pathhh???????
- ADD: Mark lightgallery as a vendored library
- FIX? call path of ps1 lib
- FIX: Live: DG-7411: Correctly Aligned placing row to 'Race to Woodhall Spa 2023 .
- FIX: Correct path to deploy-lib.ps1
- Fix: ORG DG-7469 Fix where the redirect after deleting a competition in ORG redirects to a blank page that doesn't work. Appends the appropriate message to the deleted comp upon redirect.
- DEL: Remove the world jenkins file
- Mod: whitespace for yuri
- DEL: Byte order mark
- Merge remote-tracking branch 'origin/svn-sync'
- Merge remote-tracking branch 'origin/main' into svn-sync
- FIX: Live: DG-7411: Added placing row to 'Race to Woodhall Spa 2023 .
- FIX: Live: DG-7411: Fix to 'Race to Woodhall Spa 2023 formatting.
- FIX: Database builder now respects the de-externed sql locations
- FIX: Bring across fixes from SVN branch
- Fix: ClubCMS: applying the same fix done on Rev 57742 to the TeeBooking master pages to fix the Google Analytics logging (Golf NZ reported the issue)
- Create .editorconfig
- Fix: core tests: extern ded
- MOD: Update sql script prefix after de-extern
- MOD: Live: DG-7411: Update to 'Race to Woodhall Spa 2023.
- MOD: Add AssociationId in TournamentSeason table
- Fix: Horrible hack to let Scotland Org save competitions (set CreatedByClubID=null for union created comps)
- Mod: ClubCMS: Scottish Golf: button style fix; mega nav style fix
- FIX: Reference non-extern sql scripts
- FIX: Remove extern
- MOD: DG-466 #53190 Change the ranking order to look at total points for Charles Tour
- FIX: Don't break on first schema version
- Fix: ClubCMS: Scottish Golf: when the mega nav is visible and the user adjusts the browser window size to a "mobile" screen size, hide the mega nav.
- MOD: Break line down for ease of readability
- MOD: De-wrap the try catch
- Mod: ClubCMS: Scottish Golf: scroll down indicator colour update; make it visible on the mobile screen
- Mod: ClubCMS: Scottish Golf: removed redundant css code (already in the hero-swiperjs styles file)
- Mod: ClubCMS: hero-swiperjs: GetHeroSliderJs query update: return null if NavigateUrl is an empty string
- LOG: Report test infrastructure failures
- Mod: Core: Form now has a proper JSON schema attached
- FIX? Assembly version
- FIX: Don't SubWCRev
- FIX: Yeet the wcrev
- DEL: Yeet the gitignore, we want AssemblyInfo.cs now
- FIX: nuget now so no script
- FIX: Only dir for the scripts that need them
- FIX: Remove debug line
- FIX: dir(env.SOLUTION_ROOT)
- MOD: Pennants: Reorder the Rounds once saved
- MOD: Pennants: Remove the Pennants menu for Clubs in Live for now
- FIX? Oh god why does windows think this is better than `pwd`????
- Delete conflibot.yml
- Create conflibot.yml
- FIX: Fiddle dee dee
- Mod: ClubCMS: Scottish Golf: update the mobile menu golf icons
- FIX: Specify required version of groovy lib
- Mod: ClubCMS: Scottish Golf: moved more menu styling from main css to its own styles file; updated the mobile menu icon style
- Mod: ClubCMS: Scottish Golf: menu arrow svg update
- Fix: Live: handicap review report better perf for igolf
- Mod: ClubCMS: Scottish Golf menu: desktop and mobile menu style updates
- Mod: Better error message produced when we try to get a URL to an app that isn't configured in the configuration profile.
- FIX: Jenkins syntax still sucks
- FIX: Jenkins syntax sucks
- FIX: Call library from GitHub in  jenkins
- FIX: Remove library imports
- DEL: Remove linter actions, we don't really use them
- FIX: Wrap libraries in a script (#62)
- Fix: Live: some handicapping reports perform better for igolf now
- FIX: Remove duplicate library (#61)
- FIX: Import groovy libraries (#60)
- MOD: ClubCMS: Update interclub urls
- MOD: Replace svn jenkinsfile with git jenkinsfile (#59)
- MOD: ClubCMS: Update Golf NZ News List control to interact with Interclub Tournaments
- Mod: Live DG-7447 Checkbox is hidden for transfer mode
- Fix? history export tests MOAR thread sleeps
- Mod: Live DG-7447 This is only applicable to Rounds management house accounts Added checkbox to modify the system code so that the adjustments will expire at the end of the respective membership subscription period. This just modify the SystemCode from DOTGOLF to DG-RM-IC -> there is already logic in the back end that handles the expiry.
- MOD: ClubCMS: Added InterclubTournamentsOnly property to Golf NZ News List control
- MOD: Live: DG-7467: HS8 Report fix.
- Fix: casualgolf: newtonsoft update
- Add: ClubCMS: Scottish Golf: corrected the LinkedIn social icon; removed unnecessary svgs
- Add: ClubCMS: Scottish Golf: update social icons CSS and URLs; golf icons style update
- Fix: casualgolfapi: newtonsoft update
- Add: sql: new indexes for history export (mainly for the history.member table (26 million rows in nz prod), but thought it'd be consistent.)
- Mod: Updated bounce tracker no-reply@golf.co.nz POP3 settings for Office365.
- Fix: GolfNZ DG-7464 #53117 Added a new endpoint to help verify and move the registration along for members that gets the email via store proc. Updated the link to the new signup type.
- Fix; connectorAPI dev build
- Mod: ClubCMS: Scottish Golf menu: added secondary menu and social media icons; removed unnecessary code
- Add/Mod: ClubCMS: Scottish Golf website: moved the menu / navigation CSS to its own styles file; social media icon style mod
- Fix: Live NZ #53117 Update to handle member email being verified through clubs signing members up in live - this proc sends it out at 5pm daily the the link is broken.
- Add: ClubCMS: Scottish Golf: golf icons style update
- Add: ClubCMS: Scottish Golf menu: updated the golf icons and some text
- Add: ClubCMS: Scottish Golf: golf icons style update
- Mod: ClubCMS: define the golf icons to be used throughout the Scottish Golf website
- Fix: tests?: newtonsoft update
- FIX: Groovy aint so groovy (#58)
- Mod: clients: update newtonsoft
- Fix: api tests?: newtonsoft update
- Fix: analytics: newtonsoft update
- Fix: clubcms: newtonsoft update
- Fix: build: newtonsoft update
- Fix: SSO; newtonsoft update
- Mod: TXLine.ClubId and TXLine.TranDate columns are no longer nullable since we are now reliably populating data for these columns.
- MOD: Pennants TV2: Implement Withdraw Team
- Update groovy vars to allow manual imports (#56)
- Update dgVortexNotify.groovy
- Update dgSvn.groovy
- Update dgSlackNotifyBuild.groovy
- Update dgPromotePackage.groovy
- Update dgPromoteContainerImageApp.groovy
- Update dgPromoteContainerImage.groovy
- Update dgPackagePrepare.groovy
- Update dgPackageFinaliseAndUploadToS3.groovy
- Update dgNugetRestore.groovy
- Update dgFilterBindings.groovy
- Update dgDoWebConfigTransform.groovy
- Update dgDoCoreConfigProfileGenerate.groovy
- Update dgDoCacheBusterTagReplacement.groovy
- Update dgCheckAllBuildVariablesPresent.groovy
- Update dgBuildDotNetSolution.groovy
- Update dgBuildDotNetFrameworkSolution.groovy
- Update dgBuildContainerImageAndCommitToECR.groovy
- Fix: nav: wales tournament API url added
- Fix: nav: scotland tournament API url added
- Fix: nav: ireland tournament API url added
- Fix: nav: england tournament API url added
- Fix: TournamentAPI urls in nz stage/prod
- Fix: activitytracker: newtonsoft update
- Fix: build: newtonsoft update
- FIX: Reference git specific library configuration (#55)
- FIX: Reference git specific library configuration
- Fix: Live: newtonsoft update
- FIX: Re-add the `library "${env.TAG}/dotgolf@"` call (#54)
- MOD: Live: DG-7251: Updated Score Member report to be available to Union Level..
- FIX: Re-add the `library "${env.TAG}/dotgolf@"` call
- FIX: Remove svn specific step (#53)
- FIX: Remove svn specific step
- Merged revision(s) 57347-57999 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: Live: GroupBooking Sigh... oops forgot to remove the testing related things during development... all is well again ........ Mod: Live: DG-7103 [Kiosk Eligible Competition marker filter] Toggle markers by color of the marker for eligible competition ........ Mod: Live/Kiosk DG-7103 Multiple courses won't have the competition marker filters. ........ Mod: Live DG-7239 Change the group booking from slot count to player count for the email being sent out. ........ Add: Scotland bindings. ........ Add: DG-6893: New Home Club Change Request system email to be send to Membership contact upon acceptance/declining requests. ........ Fix: Live #52552 Fix where selected group booking was not saving contact number and on select not loading it back ........ Mod: Core: Add a crapload of teebooking related pocotables to remove a call to entity framework ........ Fix: Buttons changed to Scotland's 300U blue, since our blue and theirs on the same page looks Bad(TM) ........ Add: LIVE DG-7287 Add the ability for clubs to turn their marker filters on and off for Kiosk competition selection. ........ Fix: LIVE Fix ambiguous NZGACategory reference from Shared.Data and Core.Data and optimized using. ........ Add: LIVE DG-7287 - Updated the help section link for Marker Filter settings. - Add images assets to the help section. ........ Mod: Deprecate the NGSE product; everyone should be on new score entry now. ........ Fix: Live: dont allow clubs to add their own Programmes (like safegolf) - EG should manage these. ........ Fix: Live: Facility details ko mapping script load error ........ Fix: Live Fix when facility is null and we're returning null which causes the KO bindings to break. We're now returning a new empty object of FacilityRec when this happens. ........ Fix: Live Fix when saving empty/blank in request being null we skip over these things. ........ Fix: Live Handle saving of empty facility types when the club is super fresh ........ Fix: Live Fix so when the club is new and doesn't have any facility we can poke it into the Facility table from the UI :) and it'll just save whatever needs to save upon creation ........ MOD: Live: DG-7364: Added enhancement to HCCA interclub message. ........ Fix: Live DG-7273 #50583 Seems good... Send it. I'm defeated. ........ Fix: live: build: isNullOrEmpty ........
- Merged revision(s) 57449-58000 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: Org: Reports: add a new report group called "Promotions" so we can classify the promotion-related reports under it, and declutter the "Membership" report group ........ Add: Scotland bindings. ........ Mod: Hardcoded another country code to fix Scotland. #shouldbeinconfigprofile ........ Mod: Org now redirects back to Live if the person is logged in as a club but tries to navigate to Org ........ Fix: org: build: isNullOrEmpty ........
- Fix: app: don't trigger an update when person tries to save their profile if there is nothing to save
- MOD: Pennants TV2: Lock round where there's already a contest that have results
- Add: Prefixes to make SignalR work properly in clubhouse.golf.co.nz.
- Mod: ExceptionLog to Elasticsearch exporter will now auto-detect databases on localhost that need to be logged to ES; no command line argument necessary. Mod: One instance of this app will now log for all databases on localhost, so we no longer have to do anything special for the UKPROD database server where we host both WA1 and EN1.
- Mod: ClubCMS GB&I DG-7272 #5009103 Updated the England golf and iGolf private policy link. The other one for iGolf signup is updated through AdWeb.
- FIX: Reduce scope of detected files (#51)
- MOD: Pennants TV2: Fix UI issue and add Competition description
- FIX: Reduce scope of detected files
- MOD: These EDMX files are generated (#50)
- MOD: These EDMX files are generated
- FIX: Optimise actions (#49)
- FIX: Optimise actions
- FIX: Bump gotoraptor to v1.1.0  (#47)
- Delete GoToRaptorTests.c
- TRY: attempt to trigger togoraptor
- TRY: don't checkout until after the gotoraptor test
- Test gotoraptor with C code instead of C#
- FIX: Bump gotoraptor to v1.1.0
- MOD: Test and optimise regexes for ToPlural
- Fix: Core: Downgrade to newtonsoft json 12 to fix version conflicts hopefully
- MOD: ClubCMS: englandgolf.org.txt update
- Upd: Tourism: Updating lightGalleryJS to the latest version 2.7.0 release.
- Fix: Vend: Vend sync failing due to an incorrect member account top-up sale (Part 3). [DG-7361]
- MOD: Make regexes static for performance
- MOD: Refactor ToBool to be declarative
- FIX: Test should fail due to assertion, not null ref error
- Mod: ScheduledTasks: results task better handles crashing now.
- Mod: Core: deserialisation WORKS for new ExtForms stuff
- Add: ClubCMS: Scottish Golf: menu control initial commit
- Add: GolfNZ: Added README.md file (some instructions) related to lightGalleryJS license key.
- Create GoToRaptorTests.cs
- Fix: Vend: Vend sync failing due to an incorrect member account top-up sale (Part 2). [DG-7361]
- Create GoToRaptorTests.cs (#44)
- MOD: Reenable gotoraptor
- Delete GoToRaptorTests.cs
- MOD: Add tests for sketchy tobool
- FIX? Disable goto raptor
- Merge branch 'main' into norwd-patch-1
- FIX? Move gotoraptor to after main linters (#45)
- TRY: Use latest patch
- Move gotoraptor to after main linters
- Create GoToRaptorTests.cs
- MOD: Bulk Email V3: Allow delete mailing list
- MOD: Bulk Email V3: Allow delete mailing list
- Update README.md (#43)
- Update README.md
- Add: Core: new classes for new ExtForms stuff
- Fix: Vend: Vend sync failing due to an incorrect member account top-up sale. This happens when you have multiple customers in the same sale, and you add a member account top-up to a visitor - this fixes Akarana's sync which has not been working since 2 Feb 2022. [DG-7361]
- Mod: ClubCMS: Scotland Golf: hero button style update
- Mod: ClubCMS: Scotland Golf: apply Rubik Google font
- Mod: ClubCMS: Scotland Golf template: removed unnecessary svgs
- Mod: ClubCMS: Scotland Golf: hero scroll down indicator styling
- MOD: Mark todo
- FIX: Refactor test to work on Jenkins
- MOD: Rename Jenkinsfile to Jenkinsfile-svn (#42)
- ADD: Create non-svn jenkins file
- Mod: ClubCMS: Scotland Golf: apply SG branding to the hero pagination and button
- MOD: Rename Jenkinsfile to Jenkinsfile-svn
- Mod: ClubCMS: hero-swiperjs css: moved the Golf Tourism specific styles from styles.css to styles.terraces_tourism.css
- FIX: More off by one errors
- FIX: Off by one
- MOD: Pennants TV2: Filter Members based on Gender in Competition Setup
- Fix: isvapi: build: isNullOrEmpty
- MOD: Also enable auto merge on ready for review (#41)
- MOD: Also enable auto merge on ready for review
- MOD: ClubCMS: Added dynamic ads.txt for ClubCMS who wants to use AdSense /ads.txt
- MOD: Allow PRs to merge automatically when checks pass (#39)
- FIX: Correct the secret name
- MOD: Allow PRs to merge automatically when checks pass
- Mod: API: /score endpoint now populates IsEligibleForHandicapping.
- Losing the will to live while looking at casual golf, just going to leave it to rot
- Mod: GolfNZ DG-7407 When the user click next or previous it will navigate back to the top after the page loads the set of news article.
- Fix: org: build: isNullOrEmpty
- Fix: live: build: isNullOrEmpty
- Feature/DG-7355: Add xmldocs back to clients packages (#34)
- Merge branch 'main' into feature/DG-7355-add-xmldocs-back-to-clients-pacakges
- Feature/DG-7363: Setup GitHub linguist gitattributes (#35)
- Merge branch 'main' into feature/DG-7363-setup-github-linguist-gitattributes
- Fix: SSO: build (stringextensions)
- Add: sql: new table for custom forms (for ED&I at first) because needs to be in database for users to eventually make changes
- YRI+MSK: ToBool but nicer this time
- Fix: Build by removing DefaultIfNullOrEmpty and replacing with IfNullOrEmpty
- Upd: GolfNZ: Updated lightGallery JS license key.
- Mod: Org #53103 If it is a team competition and the CSV is missing the GroupNo we should let the user know instead of just blowing up. We have a try catch for it and appending the relevant error to the end user.
- Enforce yaml linter (#38)
- FIX: whitespace
- FIX: Whitespace
- FIX: Whitespace
- FIX: Whitespace
- FIX: yaml comments
- FIX: Whitespace
- FIX: Whitespace
- FIX: whitespace
- Add: Core: .schema.json file for new forms structure for ED&I
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- FIX: Disable new line character rule
- FIX: yaml linter
- FIX: yaml linter
- FIX: yaml linter
- MOD: Don't lint the xero_accounting.yml file
- MOD: Bulk Email V3: Add Read More Url validation to check for http or https
- Mod: Live: remove extform table because forms  will live in the code now.
- Enforce yaml linter
- Delete jenkins.yml (#37)
- Delete jenkins.yml
- MOD: Refactor string extensions
- MOD: Add string extension tests
- Mod: CustomerSatisfaction Modified text so the user knows to dismiss to webview modal when they're done.
- Fix: Live #52932 Fix where saving the new tag to a category is not working once it has been deleted from the list. Added Table aliasing and check on 'not exist' to look for the one that has not been deleted. If it has been deleted then we insert the new row to reflect the new changes.
- Add: sql: new table for custom forms (for ED&I at first) (added some more "not null"s)
- Add: sql: new table for custom forms (for ED&I at first)
- Add: Shared: Missing include in DotGolf.Shared.csproj
- Mod: CustomerSatisfaction: 1) Settings class for CustomerSatisfaction. 2) Remove method ValidateSubmittedScoreIsEligible as this is no longer required.
- MOD: Clean up usings
- Fix: ActivityTracker was not getting deployed since it was moved to .net 6.0
- DEL: Remove .gitattributes
- Merge branch 'main' into feature/DG-7355-add-xmldocs-back-to-clients-pacakges
- Mod: Shared: hack up some methods to get single score from WHS+Database for API
- Merge branch 'main' into feature/DG-7363-setup-github-linguist-gitattributes
- FIX: These attributes are vendored
- FIX: These attributes are vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not documentation
- FIX: ClubCMS: Google Analytics tracker
- Fix: Tourism: Fixes for SEO Meta Management page .ts definition reference.
- Feature/DG-7377: Setup gitignores from subversion ignore lists (#36)
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- Fix: Scripts can now notify Vortex in Scotland.
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not documentation
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- MOD: These attributes are not vendored
- MOD: These attributes are not vendored
- FIX: These attributes are not vendored
- MOD: These attributes are not vendored
- FIX: These attributes are not documentation
- FIX: These attributes are not vendored
- MOD: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: Pennants TV2: Failed test and correct scores
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- Add: Deploy line for Mailer for Scotland.
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migration ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Mirgate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- Fix: Live DG-7273 #50583 Re-establishing baseline for the fix. Updating the SQL proc instead as it was not counting properly if its for clubs with only 2 carts available through the day.
- Upd: Tourism: Implements control identity to ImagePageGallery & SoloVideoWidget.
- Fix: Tourism: ImagePageGallery upload methos move from Admin.asmx to api controller.
- Fix: Tourism: Fix for Date validations both ImagePageGallery & SoloVideoWidget controls.
- Add: ClubCMS: Scottish Golf website: hero-swiperjs css
- Mod: ClubCMS: hero-swiperjs: apply the correct heading text alignment (left, centre, right) based on the hero image's configuration
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Pennants TV2: Revert Tournaments control to not show Pennants events, Use FeaturedOnPublicWebsite column in Competition to show Pennant events in Pennants Tournaments control
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- Mod: ClubCMS: just moved the apply-scrim styles to the hero-swiperjs styles.css file
- Mod: ClubCMS: hero-swiperjs: use ApplyScrim (if true, a dark gradient is added on top of the hero image); moved the Edit Hero button inside the main div
- Mod: ClubCMS: Scotland Golf website css: removed redundant CSS code (the hero CSS is in the control's own CSS file); added new scrim styles
- MOD: Migrate ignore list
- MOD: Specify language of non-standard extension
- MOD: Pennants TV2: Allow teams to sort by dragging
- Mod: ClubCMS: admin-hero-swiperjs: text update
- Fix: Tourism: ImagePageGallery & SoloVideoWidget clean-ups and property validations fixes.
- Upd: Tourism: SoloVideoWidget property value updates.
- Fix: ClubCMS: admin-hero-swiperjs: removed one of the logo image recommended dimensions note (there were two of them previously, and they were conflicting); I've also retained just the recommended width (the height is variable).
- FIX: Pennants TV2: Do not allow to save scores if there's no selected scores
- Mod: ClubCMS: admin-hero-swiperjs: show a success message after successfully uploading the desktop or mobile image
- Fix: scheduledtasks: scoreintent followup flow wasnt working
- MOD: Pennants TV2: Added EnableInterclubTournaments in the Features and set it to true only for New Zealand
- Mod: ClubCMS: Scotland Golf: admin panel style update
- Mod: ClubCMS: admin-hero-swiperjs: added Header Alignment field
- Mod: ClubCMS: Scotland Golf: admin controls' style updates
- Mod: sql: CWImageContent table: add the new column, HeaderAlignment
- Fix: Adweb: having live cmember records from other unions should not prevent a member merge -we now just move those records to the live member #5008938
- MOD: Migrate ignore list
- MOD: Include .bak files in ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- Upd: Tourism: SoloVideoWidget property value updates.
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Pennants TV2: Change font sizes
- MOD: Migrate ignore list
- Upd: Tourism: ImagePageGallery property updates.
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- Add: MessageType: Customer satisfaction survey message type.
- MOD: Migrate ignore list
- MOD: Ignore all control/*/viewmodel.js(.map)? files
- MOD: Pennants TV2: Created Pennants Tournament Control
- MOD: Migrate ignore list
- Add: Tourism: Added two new SoloVideoWidget control properties.
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- Create .gitignore
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- MOD: Migrate ignore list
- ADD: Bring across the root ignore list from svn
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: These attributes are not vendored
- FIX: Correct scope of the vendored attribute
- FIX: These attributes are not generated
- MOD: These attributes are not generated
- FIX: These attributes are not generated
- FIX: These attributes are not generated
- FIX: These attributes are not generated
- FIX: These attributes are not generated
- FIX: These attributes are redundant
- FIX: These attributes are redundant
- FIX: These attributes are redundant
- FIX: These attributes are redundant
- FIX: This attribute is redundant
- FIX: This specification is redundant
- FIX: These attributes are not documentation
- FIX: These attributes were not generated
- FIX: These attributes were not generated
- FIX: These attributes were not generated
- FIX: These attributes were not generated
- FIX: These attributes were not generated
- FIX: These attributes were not generated
- FIX: Node modules are generated, not vendored
- FIX: All node modules are already marked as generated
- FIX: Obviously the gitattributes weren't generated
- FIX: Obviously the gitattributes weren't generated
- FIX:  `node_modules` are already marked as generated by default
- FIX: These attributes aren't vendored
- FIX: Unvendor this git attributes file
- MOD: These vendored libs don't come pre-attributed
- FIX: Gitattributes are not vendored
- FIX: This file isn't actually vendored
- FIX: The gitattributes file is not actually vendored
- FIX: Unvendor the gitattributes file itself
- FIX: Obviously the gitattributes themselves are not generated
- MOD: These web refs are generated
- MOD: GeoIP is vendored
- MOD: StatsDPerfMon is vendored
- MOD: Mark all aspx designer files as auto-generated
- FIX: Optimise gitattribute regexes
- MOD: These designers are generated
- MOD: This designer is generated
- MOD: These Xero designer is generated
- MOD: These designer files are generated
- MOD: These designers are generated code.
- MOD: These libraries are vendored
- MOD: The NStatsD project is vendored
- MOD: These data sources are generated code
- Upd: Tourism: Settings test updates.
- MOD: Our GeoIP implementation is vendored
- MOD: This OAuth implementation is vendored
- MOD: Mark nswag files as json
- Fix: clubcms build
- MOD: Live: DG-7251: Added Member Score Report for GI.
- Add: ClubCMS: DG-7121: Move Flexi club welcome email to system email.
- Upd: Tourism: ImagePageGallery settings test updates.
- MOD: This binary output directory is generated code
- MOD: These connected services are generated
- MOD: This is a vendored directory
- MOD: This binary is a vendored executable
- MOD: This is a vendor directory
- MOD: These fonts are vendored
- MOD: ChartsJS lambda is vendored
- MOD: These libraries are vendored
- MOD: Vendored wwwroot
- Add: Tourism: Added control settings feature for ImagePageGallery.
- MOD: These service refs are generated
- MOD: Bootstrap is vendored
- MOD: FontAwesome is vendored
- MOD: These fonts are vendored
- MOD: These scripts are vendored
- FIX: Match bracket
- MOD: These content files are vendored
- MOD: These scripts are vendored
- MOD: These fonts are vendored
- MOD: These packages are vendored
- MOD: These assets are vendored
- MOD: These web refs are generated
- MOD: These images are vendored
- MOD: These scripts are vendored
- MOD: All this stuff is generated
- MOD: These binaries are vendored
- MOD: These styles are vendored
- FIX: Correct missing negative
- MOD: These styles are not vendored
- MOD: These styles are vendored
- FIX: Some of these files are code, not documentation
- MOD: These are documentation files
- MOD: These fonts are vendored
- MOD: This help directory is all documenation
- MOD: These are vendored images
- MOD: These are vendored images
- MOD: These are vendored images
- MOD: These are vendored images
- MOD: These scripts are vendored
- MOD: These scripts are vendored
- MOD: These scripts are vendored
- Mod: API: when someone resigns all their clubs, remove their passport credentials. [DG-6450]
- MOD: These tools are vendored
- MOD: This is a vendored client
- MOD: These are vendored icons
- MOD: These images are vendored
- MOD: These scripts are vendored
- MOD: These docs are also docs
- MOD: These docs are docs
- MOD: These styles are vendored
- MOD: These binaries are vendored
- MOD: These web refs are generated
- MOD: jQuery? More like vendorQuery amiright?
- MOD: Awww loook at the cute vendored editor
- MOD: The calendar is vendored
- MOD: This vendored directory is the wwwroot of all evil
- MOD: These packages are vendored
- MOD: This wwwroot is vendored
- MOD: This vite/vue library is vendored
- MOD: These executable tools are vendored
- MOD: 'ere be dragons (C header files)
- MOD: These packages are vendored
- MOD: OpenTwain is a vendored library
- MOD: These fonts are vendored
- MOD: These executable tools are vendored
- MOD: These libraries are vendored
- MOD: These libraries are vendored
- FIX: A bin output dir is better described as generated
- MOD: This bin output dir is vendored
- MOD: These certificates are vendored (and scarry)
- MOD: The kiosk designer files are auto generated
- MOD: These images are vendored as part of the kiosk
- MOD: These are generated directories
- MOD: These binaries are vendored
- MOD: These stylesheets are vendored
- MOD: These documents are documentation
- MOD: These fonts are made for vendoring...
- MOD: These html help files are technically documentation
- MOD: These UI elements are vendored
- MOD: This is a vendored set of images
- MOD: These table sorting icons are part of the table sorting vendored library
- MOD: Gimp images are vendored
- MOD: This calendar shows that you're late for a vendoring
- MOD: So many vendored js scripts....
- MOD: jQuery? That's a vendoring.
- MOD: These "tools" are just vendored binaries
- MOD: Awww what a cute editor (still vendored)
- MOD: The calendar is vendored
- MOD: These images and icons are vendored
- MOD: These icons are vendored
- MOD: These logos are vendored
- MOD: With some exceptions, these scripts are vendored
- MOD: This library is vendored
- MOD: These plugins are vendored
- MOD: MomentJS is a vendored library
- MOD: Fullcalendar is a vendored js library
- MOD: These fonts are vendored
- FIX: These stylesheet directories are not vendored
- MOD: These stylesheets are vendored
- MOD: These dlls are generated
- MOD: This is soft vendored client, it's so cute <3
- MOD: These fonts are vendored and this is a random sentence that I've never typed before....
- MOD: These scripts are vendored
- MOD: These stylesheets are vendored
- MOD: These images (except for the logos) are vendored
- MOD: These fonts are vendored
- MOD: Fancy box is a fancy vendor
- MOD: Bootstrap is a vendored dependency
- MOD: These scripts are vendored
-  MOD: These directories are full of generated code
- MOD: These directories are full of generated code
- MOD: These fonts are vendored
- MOD: Make all *.g.cs and *.g.json files marked as generated
- MOD: These scripts are vendored
- MOD: These content files are vendored (mostly css)
- MOD: These dlls are generated files
- MOD: This nuget exe is a binary
- MOD: These fonts are vendored
- MOD: These scripts are vendored
- MOD: These stylesheets are vendored
- MOD: These fonts are vendored
- MOD: These fonts are vendored
- MOD: Mark these scripts as vendored
- MOD: ckeditor is a vendored utility
- FIX: Not all subdirectories are vendored, mark only CSS as vendored
- MOD: Mark these stylesheets as vendored
- MOD: FontAwesome is awesome! (still vendored though)
- MOD: Fonts are vendored
- FIX: DG specific scripts are not vendored
- MOD: These scripts are vendored
- MOD: These stylesheets are vendored
- MOD: These dlls are vendored
- MOD: Soooo much vendored jQuery....
- MOD: The jsoneditor is vendored
- MOD: These icons are vendored
- MOD: jQuery and other external js libraries are vendored
- MOD: Mark the remainder of the images as vendored
- MOD: Tablesorter images are vendored
- MOD: Mark css as vendored
- MOD: Mark vendored dlls
- MOD: Ace is a vendored ajax plugin
- MOD: Mark scripts as vendored
- MOD: Mark libraries as vendored
- MOD: Mark libraries as vendored
- MOD: Mark the knockout directory as vendored
- ADD: Mark all vendored js files as vendored
- MOD: Mark these files as vendored
- MOD: Mark node modules as vendored
- MOD: These ajax files are vendored
- Fix: API: handle social members and casual golfers in new database structure (cmember table) #casualgolf Also #nullable enable
- FIX: Mark this fork as vendored code
- ADD: All these files (unless they are explicitly ours) are vendored
- ADD: Mark this as a vendor directory
- ADD: git attributes marking this as a vendored source
- DEL: Remove global scope attributes
- MOD: Mark the help files as documentation
- ADD: Mark font awesome as a vendored directory
- ADD: gitattributes marking this as a vendor directory
- FIX: Make paths relative
- FIX: These paths are relative, not absolute
- Create .gitattributes
- FIX: Make defaults reach all directories
- Create .gitattributes
- Create .gitattributes
- Create .gitattributes
- DEL: /Shared/Shared/js now has its own git attribs
- Create .gitattributes
- Create .gitattributes
- Create .gitattributes
- ADD: Mark dg live vendors
- ADD: Mark live association vendors
- ADD: Mark the email viewer's vendors
- ADD: Mark images project vendors
- ADD: Mark customer satisfaction survey vendors
- ADD: Mark connector vendors
- FIX: Only the exe is really vendored here
- ADD: Mark clubhouse vendors
- ADD: Mark club CMS vendors
- FIX: Mark nswag generated files as generated code
- ADD: Create gitignore
- DEL: Remove generated code
- DEL: Remove generated code
- DEL: Remove generated code
- ADD: Mark the Casual Golf vendors
- FIX: Some of our jenkins files are named with non-standard formats
- Rename Project_Readme.html to Readme.html
- Add: Tourism: New property for ImagePageGallery control.
- ADD: Mark bulk email vendors
- ADD: Mark analytics vendors
- ADD: Mark vendored adweb dependecies
- ADD: Mark the activity tracker wwwroot as full of vendored code
- FIX: Some nuget configs aren't being detected
- Mark all files as detectable by default
- Upd: Tourism: New ImagePageGallery control validation check clean-ups.
- MOD: Live: DG-7364: Added enhancement to HCCA interclub message.
- MOD: Live: DG-7133: Updated logic to use WhsHandicapAdjustmentGetAsync().
- Upd: Tourism: Updates for New ImagePageGallery control, and Solo Video Widget validations & UIx clean-ups.
- Add: ClubCMS: Scottish Golf template and css files (initial commit)
- Fix: ClubCMS: Golf NZ: club details page: hide the Book a Tee button if the club doesn't have the Tee Booking Product; hide the Club website button if the club doesn't have a website
- Mod: ClubCMS: GetClubDetails: return HasTeebooking here as well (same as in the find clubs query). We need it to determine if we'll hide or show the Book a Tee button on the club detail page.
- Mark out the rest of the vendors in Shared
- Mod: AdWeb Permissions around ClubSites -> if you're in the support group in theory you should have access the club site menu
- Mark the ts shared files as vendored
- Mark vendored code in ConnectorAPI
- FIX: BulkEmail V3: Close video modal once hit update
- Mark shared js files as vendored code
- Create .gitattributes
- Fix: Live Fix so when the club is new and doesn't have any facility we can poke it into the Facility table from the UI :) and it'll just save whatever needs to save upon creation
- MOD: Pennants TV2: Split the bonus points for tied matches
- Mod: API: Stoke-o-meter: Add new field "RequiresAuthorizationToken". If set to true, instructs the app to append the app user's auth token in the HTTP request when viewing the message details in a web view.
- MOD: Pennants TV2: Enabled Pennants for Clubs without the need of enabling a product
- Fix: Live Handle saving of empty facility types when the club is super fresh
- MOD: Generate documentation files for
- Mod: Adweb: Club Sites: Settings: updated how we query the Club and Association tables when a "club" website is selected from the dropdown
- ADD: Git Attributes (basic)
- ADD: Add gitignore to prevent generated files from being tracked
- MOD: Pennants TV2: Cannot confirm results if scores and/or holes is not populated
- Fix: Live Fix when saving empty/blank in request being null we skip over these things.
- MOD: Bump DotGolf.ResultsEngine.Common.Model from 1.0.0-NewZealand-Development.19 to 1.1.0 in /DotGolf.API/DotGolf.API (#18)
- FIX: Pennants TV2: Fix scheduling UX issues
- Fix: Live Fix when facility is null and we're returning null which causes the KO bindings to break. We're now returning a new empty object of FacilityRec when this happens.
- MOD: Update the commit message prefix to be `MOD`
- Bump DotGolf.ResultsEngine.Common.Model from 1.0.0-NewZealand-Development.19 to 1.1.0 in /DotGolf.API/DotGolf.API.Tests (#32)
- Bump nosborn/github-action-markdown-cli from 1.1.1 to 3.2.0 (#30)
- FIX: Optimise the linter actions
- FIX: MD026: Trailing punctuation in heading
- Merge branch 'main' into dependabot/github_actions/nosborn/github-action-markdown-cli-3.2.0
- FIX: MD013: Line length
- FIX: Lint the readme
- Merge branch 'main' into dependabot/github_actions/nosborn/github-action-markdown-cli-3.2.0
- MOD: Pennants TV2: UI css changes
- MOD: Simplify markdown linter
- Merge branch 'main' into dependabot/github_actions/nosborn/github-action-markdown-cli-3.2.0
- Fix: |= does NOT do short circuited evaluation, so this code didn't avoid the null as I thought it would.  Back to an `if` statement then.
- Bump actions/checkout from 2 to 3 (#31)
- Merge branch 'main' into dependabot/github_actions/actions/checkout-3
- Feature/DG-7291: FIX: Make all yaml files ignored by default (#33)
- FIX: Make all yaml files ignored by default
- Bump DotGolf.ResultsEngine.Common.Model
- Bump actions/checkout from 2 to 3
- FIX: Add the dotnet setup action as placeholder
- FIX: Final yaml linters
- FIX: yaml linter
- Bump nosborn/github-action-markdown-cli from 1.1.1 to 3.2.0
- FIX: yaml lint
- Fix: C# needs parentheses to match for some reason.
- FIX: MD036: Emphasis used instead of a heading
- FIX: MD033: Inline HTML
- FIX: Correct syntax and add yaml files to ignore
- MOD: Exclude the Xero accounting yaml files
- FIX: MD009: Trailing spaces
- MOD: Generalise csharp lint job
- Fix: Crashbug when superadmin tries setting a newly created user's password due to TOTP checking a null string.
- FIX: MD013: Line length
- Fix: CustomerSatisfaction Public Redirect user when they try to access the same survey to completed component
- FIX: MD036: Emphasis used instead of a heading
- Fix: Live: Facility details ko mapping script load error
- Mod: Shared: tests: rename some tests
- Correct gotoraptor version
- Create lint.yml
- Fix: CustomerSatisfaction DG-7145 Fix where even if the survey was previously completed we're still returning the same set.
- Fix: Live: dont allow clubs to add their own Programmes (like safegolf) - EG should manage these.
- Merge branch 'main' into dependabot/nuget/DotGolf.API/DotGolf.API/DotGolf.ResultsEngine.Common.Model-1.1.0
- Mod: CustomerSatisafaction Public Remove Test data
- Add: CustomerSatisfaction Add column DeletedByUserSecurityId to SVSurveyQuestion
- Mod: CustomerSatisafaction Admin DG-7145 Updated public public site so that it doesn't pass through sensitive data and just use GUID Also made it so its not last name then first name but just first name
- Mod: CustomerSatisafaction Admin DG-7252 Updated the API and models to use Redis so that we can have 1 guid to rule them all
- MOD: Pennants TV2: CSS updates
- Delete dotgolf.clients.yml
- Fix: CustomerSatisfaction Fix where UID wasn't consistent across the associating questions
- Mod: ClubCMS: sites-dev.list: added a dev URL for the Scottish Golf website: sg.cw.nz.dev.golf.co.nz
- Feature/DG-7291: Fix bad indentation of a sequence entry (#29)
- Fix bad indentation of a sequence entry
- Mod: ClubCMS: bindings.dev.list: added a dev URL for Scottish Golf: sg.cw.nz.dev.golf.co.nz
- Create README.md
- Feature/DG-7291: Create dotgolf.clients.yml (#25)
- Create dotgolf.clients.yml
- Feature/DG-7356: Setup project health files (#24)
- FIX: xmldocs are regular xml, ampersands must be escaped
- Update README.md
- Mod: Shared: lots of nullability mods
- Mod: Shared: minor code style changes to DigitalScorecard
- Mod: Core: should use searchslots/searchclubday V2 by default (in prod it's already updated to v2)
- Mod: Core: Simplify HandicapProviderWHS to not go the database twice when called without a date param
- Mod: Core: Simplify HandicapProviderWHS to not go the database twice when called without a date param
- Create README.md
- Feature/DG-7356: Rename .github/PULL_REQUEST_TEMPLATE/feature.md to .github/PULL_REQUEST_TEMPLATE.md (#23)
- Rename .github/PULL_REQUEST_TEMPLATE/feature.md to .github/PULL_REQUEST_TEMPLATE.md
- Delete hotfix.md
- Create hotfix.md
- Feature/DG-7356: Setup project health files (#22)
- Create feature.md
- Fix: API: Teebooking: App bug where the booking owner edits a booking that has been paid for, replaces a player in the booking with another person (with the same green fee charged - so no outstanding amount). Tap save to update the booking. The new person's TBTicketEntry.PaidDate is not set. [DG-7255]
- Mod: CustomerSatisafaction Updated DI
- Create CONTRIBUTING.md
- FIX: Correct subtle enumeration bug and add tests to prevent anyone from touching this ever again
- Mod: ClubCMS: score listing now shows 20th score divider after 20 eligible for handicapping scores (not any 20)
- Fix: Member score listing: no more multiple enumeration of score data (while we sort out how to get DistinctBy looking nicer)
- Create CODE_OF_CONDUCT.md
- Fix: tournament2022: directory traversal vulnerability in vite
- Fix: Support 2022 directory traversal vulnerability but using new lockfile version
- Mod: whitespace changes to jenkinsfile
- Mod: CustomerSatisfaction Public Updated packages
- MOD: Pennants TV2: Contest UI
- Mod: whitespace changes to jenkinsfile
- Mod: CustomerSatisafaction Admin DG-7252 Updated NPM packages
- Fix: Support 2022 directory traversal vulnerability
- Bump DotGolf.ResultsEngine.Common.Model from 1.0.0-NewZealand-Development.19 to 1.1.0 in /DotGolf.API/DotGolf.API.Tests (#19)
- Bump DotGolf.ResultsEngine.Common.Model
- Bump DotGolf.ResultsEngine.Common.Model in /DotGolf.API/DotGolf.API
- Feature/DG-7354: Get AspNetCoreRateLimit ready to be forked and pulled into a package (#14)
- Feature/DG-7342: Remove duplicate entry (#17)
- Remove duplicate entry
- Feature/DG-7342: Add separate package sync definitions for each project root (#16)
- Add separate package sync definitions for each project root
- MOD: ClubCMS: DG-7327: Configuration Profiles/England.cs.
- MOD: Pennants TV2: Added Competition Match Results
- Feature/DG-7342: Update dependabot.yml (#15)
- Update dependabot.yml
- Feature/DG-7342: Create dependabot.yml (#9)
- Merge branch 'main' into feature/DG-7342-set-up-dependabot
- Merge branch 'main' into feature/DG-7354-get-AspNetCoreRateLimit-ready-to-be-forked-and-pulled
- Create .gitignore
- Feature/DG-7344: Make the @dotgolf/dotnet-developers team own all files by default (#13)
- Update and rename DOTGOLF_README.txt to README.txt
- Fix: ClubCMS: no more manual subs payment for iGolf - needs further talk
- Mod: API DG-7145 Updated the test so it adds the survey questions to the test setup
- Make the @dotgolf/dotnet-developers team own all files by default
- Fix: HookManager: Put back [DebuggerNonUserCode] - accidentally committed this while troubleshooting why my IScoreInserted hook implementation never gets fired.
- Feature/DG-7344: Add CODEOWNERS (#11)
- Split case insensitive pattern into two distinct case sensitive patterns
- Correct syntax error
- Create CODEOWNERS
- MOD: ClubCMS: DG-7327: Ensure verification link is HTTPS.
- Feature/DG-7291: Add actions to listen to pushes to subprojects (#8)
- Revert SVN rev 57848 - Fix: API: Set maxJsonLength to higher value to accommodate large request payloads.
- Create dependabot.yml
- Fix: API: Set maxJsonLength to higher value to accommodate large request payloads.
- Clean up and annotate strategy matrix
- Map all jenkins builds to their corresponding directories
- Fix yaml syntax
- Make jenkins trigger conditional
- Grep out the files that don't match the build
- Fix trailing pipe
- Break lines to improve readability
- Fix output from multi lines
- Fix typo and shell newline handling
- Get the changed files to start filtering them
- Set changed files array as step output
- Re-join all commited files into json array
- Parse filename from each file
- Parse the files from the commit json
- Ok KISS
- Get changed files as json and parse from env var
- Mod: CustomerSatisfaction DG-7252 Update to handle filters from select list added ability to update and delete plus create questions from client side
- Output all files from each commit
- Set env token for gh to work
- Use gh command line tool rather than manual curl
- Format each sha with a space separator
- Fix shell syntax error caused by var expansion
- Get the full commit object for each committed ref
- Output only the commit IDs (sha)
- Upd: Tourism: New ImageGallery control clean-ups & Solo Video widget updates.
- Try with maximum write permissions
- Give the workflow maximum read only scope
- Output entire push event
- Print file arrays as json strings
- Fix syntax error
- Update jenkins.yml
- Update and rename dotgolf.api.yml to jenkins.yml
- Mod: CustomerSatisfaction DG-7252 Split out controller calls into repository and created interface for it. CRUD is now working for survey question creation. TODO: Auth for admins.
- Mod: Passport: properly obsolete reading of plaintext passwords from DB
- Update dotgolf.api.yml
- Create dotgolf.api.yml
- Fix: SurveyScoreInserted: SetQuestionListForPlayer should be awaited.
- Fix: SurveyScoreInserted: SQL exception - @PassportId declared more than once.
- Mod: PrisineDatabasebuilder - don't need #debug directive because db name already contains machinename in debug mode
- Upd: Tourism: Ignore .js files generated from .ts file.
- Add: Tourism: New solo video widget structure.
- Add: Tourism: New solo video widget.
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Fix: Remove reference to FileHelpers.dll - not in used.
- Add: Tourism: Added LightGallery library for New ImageGallery control.
- Mod: ClubCMS: updated the MTP9 logo used for the MTP9 event tiles (requested by Thiem)
- MOD: Live: DG-7133: Updated logic for Exceptional Score Report.
- Fix: API: #stoke-o-meter: No more extra forward slash after the base URL.
- Fix: API: #stoke-o-meter: URL path is missing "/api".
- Mod: API: we are managing the resultsEngine package version manually in the csproj now, can remove it from the Jenkinsfile
- Mod: ISVAPI: why are debug-only tests showing up on jenkins?
- Fix: API: /messages endpoint - If a message is a survey type, set the sender to "Customer Survey" for now. Currently this displays as "Golf New Zealand" which I think is not appropriate because the message could be coming from a club.  #stoke-o-meter
- Mod: CustomerSatisfaction Wrapped it in a try catch for now when the JWT expires will discuss what to do to handle this with Kenneth
- Fix: CustomerSatisfaction Went on a rampage and removed required emit... oops
- Mod: tests: remove marcus and nikky from CreateDB.sql
- Del: API: remove unused rollover notification automation (SendRolloverHandicapMessages)
- Fix: API: update results engine package now that baGet is dead
- Fix: Jenkins: Missing from previous commit - upgrading IScoreInserted implementations to use IHookAsync.
- Fix: PristineDatabaseBuilder: Core path
- Fix: PristineDatabaseBuilder: Jenkinsfile forgot to escape \\\\
- Fix: PristineDatabaseBuilder: Jenkinsfile commits now hopefully
- Fix: PristineDatabaseBuilder: build now after moving it
- Mod: AssemblyInfoGenerator needs to work on old jenkins :(
- MOD: Pennants TV2: Included scores and holes for Live Scoring
- Mod: Hooks: Upgrade IScoreInserted implementations to use IHookAsync.
- Mod: PristineDatabaseBuilder  - don't need 'dgCheckAllBuildVariablesPresent'
- Mod: PristineDatabaseBuilder get it to work on old jenkins
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- Add: API: NZ Stage Stoke-O-Meter app URL.
- MOD: Pennants TV2: Allow Club as Venue and should be able to access Competition results
- Mod: Org now redirects back to Live if the person is logged in as a club but tries to navigate to Org
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- Mod: PristineDatabaseBuilder : pipeline
- FIX: ClubCMS: Resource Hub Podcast now showing on mobile
- Add: CustomerSatisfaction DG-7252 - Create, Delete of question is now working - Updated Models to reflect what they do TODO: Once the controller skeleton is done to move logic into the repo and make the controller return proper http codes and use the repo
- Mod: PristineDatabaseBuilder : move to root Trunk dir
- FIX: Correct filthy oxford comma-less string joiner!
- ADD: Test that the oxford comma is correctly used
- Fix: PristineDatabaseBuilder build remove externs
- MOD: Simplify ellipsis methods
- FIX: No, null is true and 2+2=5
- FIX: Yayyyyyyy nullability :/
- MOD: Condense timespan friendly representation into table driven code
- MOD: Test the nullable implementation and the non-nullable implementation at the same time
- MOD: Use generated test data rather than inline constants
- ADD: Tests for the `TimeSpan.ToFriendlyString()` extension method
- Mod: sql: wa_Play9_EmailTheEntrants: Make Time Play 9 welcome email template update
- FIX: golf.co.nz tournament event feed
- Mod: WHS importer - just committing the latest code I used to get Scotland Prod live.
- Mod: Deprecate the NGSE product; everyone should be on new score entry now.
- MOD: Chain string replace calls to allow single expression
- ADD: Regex string replace extension
- Mod: Adweb will now hide products with a DeletedDateUTC value set.
- Mod: Soft delete the LIVE product.
- FIX: Optimise `IDisposable` streams
- FIX: Satisfy nullability
- MOD: Enable nullable context
- MOD: Replace tail recursive local function with infinite loop and `continue` statements
- FIX: Replace `goto` with tail recursion
- Mod: In Scotland clubs are directly linked to SG since we have mens and ladies districts.  TBD
- FIX: Include the needed usings
- ADD: Edge case tests that verify the `goto`'s behaviour
- Mod: WHS1 CountryCode made a little wider to accommodate codes like 'GB-SCT'.
- MOD: Update test to handle non-zero cache times
- FIX: golf.co.nz tournament event feed
- MOD: Add tests for `QueryCacheAsync`
- FIX: Correct xml doc comment
- Mod: Reports: LastPlayedToHandicap report "Number of scores since last played to HI" is now exclusive of the score itself
- FIX: ClubCMS: Added Accepted Cookie Timeout globally to all Templates to address cookie consent issue if there's no cookie control and fix Tournament Feed issue in golf.co.nz
- FIX: ClubCMS: Added Accepted Cookie Timeout globally to all Templates to address cookie consent issue if there's no cookie control and fix Tournament Feed issue in golf.co.nz
- MOD: Cleanup tests
- FIX: Correct assertion loop
- Fix: ClubCMS: EG app links redirecting to old member portal site
- MOD: Make the mega-thread torture test torture the code, not the devs
- FIX: RCS1036: Remove unnecessary blank line
- Mod: Reports: LastPlayedToHandicap report "Number of scores since last played to HI" is now exclusive of the score itself
- FIX: Setting a value in the condition of an `if` statement is punishable by 30 lashes!
- MOD: Simplify and separate sanitisation from deserialisation
- WHY: https://xkcd.com/292
- Mod: CustomerSatisfaction DG-7252 - Fixed dynamic slot select list turns out it was just a mapping issue of data loaded back. - Updated object names to match mapping correctly. - Removed unnecessary modal
- Mod: Tests: removed obsolete method from TestObjectTracking
- Mod: Reports: LastPlayedToHandicap report header to handle 2500+ members, perf mods and now using local playdate
- Fix:  Default privacy mode for Scotland changed to None.
- FIX: This other bit of indentation.
- Mod: aw_TBClubSetup now has the demo template baked in rather than depending on data from Mapiu.
- FIX: This indentation.
- FIX: IDE0022: Use expression body for methods
- MOD: Simplify null faking extensions
- MOD: Document and simplify `SpecifyUtc`
- MOD: Document `DBTimeZoneTo`
- Mod: Resports: ESR report grouping header for 2500+ rows
- MOD: Simplify and document enum display name retrieval
- Mod: Reports: ESR report heading changes
- FIX: IDE0046: Simplify return conditional
- MOD: Simplify string interpolation and branching
- MOD: Simplify the documentation comment for `GetSqlParameterValue`
- MOD: DG-7133: Added summary to method.
- Add: DG-7133: Added Handicap Report for Exceptional Scores in previous 20 scores.
- Add: CustomerSatisfaction DG-7252 Vue Typescript version of Admin portal base - Loads back static categories and questions for test club 361 [static for now] - starting creation of question using dyanmic reuseable modal TODO: - Figure out why the v-for is ghosting the list after the view is rendered - LOTS
- Add: CustomerSatisfaction DG-7252 Controllers for Admin Portal TODO: Lots
- Add: Scheduled task to automatically load in public holiday information from government provided JSON sources (only implemented for England, Scotland and Wales right now).
- FIX: RCS1037: Remove trailing white-space
- MOD: Redocument `DistinctBy` to reflect it's new implementation.
- Fix: Shared: SurveyScoreInserted hook broke
- Fix: sql: databuilder doesnt like these
- MOD: Explicitly provide default equality comparer
- Fix: sql: databuilder doesnt like these
- MOD: Add tests to verify that the `DistinctBy()` extension need never be touched or fought over again. Let their be peace and prosperity across all our code.
- FIX: RCS1227: Validate arguments correctly
- MOD: Pennants TV2: Format date, lock team club selection if there are results submitted, fix delete issue on front-end, and fix points results for clubcms control
- Fix: Incorrect starting membership number by bad check digit. Fix: Bug where the end of the membership number range is not constrained (not a big problem)
- FIX: RCS1226: Add paragraph to documentation comment
- FIX: This method was quite controversial, hopefully this makes the meaning clearer
- Fix: ClubCMS: member signup should only skip processing a new membership if the person's signup was already successful, not if it was declined
- FIX: IDE0011: Add braces to if statements
- Fix: ClubCMS: sometimes member signup can timeout or crash trying to acquire a lock to process a windcave tx
- FIX: IDE0200: Remove redundant empty lines
- MOD: Clean up usings
- Fix: ClubCMS: member signup payment update to use new code #5008548
- Mod: Live: HandicapChangeReport help text #5006544
- MOD: Fix whitespace
- MOD: Fix if statement braces
- Fix: Updated FirstMemberNumberInclusive instead of hacking the algorithm, seems safer.
- Fix: ClubCMS: member numbers were not being Trimmed when parsing new member signups, caused errors. #5008548
- Fix: Crashbug when issuing the first membership number ever.
- Fix: More IE references in scotland config.
- MOD: ClubCMS: Change generic page title for Club Detail page and replace it with Club Name
- Add: Scotland member number manager implementation.
- MOD: Convert Jenkinsfile to push packages to GitHub
- Mod: WHSAPI: Membership tests simplified
- Fix: ClubCMS: membersignup: memberprofile save should respect that this person may have had existing member profile data.
- Fix: ClubCMS: membersignup: failed memberprofile save should not block creation process
- MOD: Consolidate script area to just the script component
- Add: API: /whs/list-scores endpoint: Add IsEligibleForHandicapping. [DG-7259]
- MOD: Restructure build to separate logically different stages of building the test binary and building the package.
- FIX: Always use plain ASCII when possible, this spits out â€ instead of elipise
- MOD: Clean up the Jenkinsfile in preparation for GitHub package conversion
- Fix: WHSAPI: filtered solution incorrect
- Add: API: MyGolfController: /whs/list-scores endpoint Add IsLastCounterScore property.
- Mod: InjectionAttackBlocker: add more cases
- Fix: tests DB build
- FIX: golf.co.nz: Course stats not loading the overall as default Round
- Add: CustomerSatisfaction Create required tables for the solution if it doesn't exist
- Mod: Live: hide Medal Report for EG by request and rename because they are doing it again for next year with new title
- Fix: Some sql script with DROP_EXISTING=ON where these indexes are newly created ones.
- MOD: ClubCMS: Added Open News Article button to the News Article Admin
- Fix: Live: Results: cache plans separately when they've got a rounddate or rsentryid filter
- Fix: Live: Results: cache plans separately when they've got a rounddate or rsentryid filter
- Mod: Hardcoded another country code to fix Scotland. #shouldbeinconfigprofile
- Fix: ClubCMS: BulkEmail unsubscribe updated to use England's new website
- Add: DG-7132: Added Handicap Report for LastPlayedToHandicap
- Fix: API: tests: user inbox messages are returned to the app in UTC, not localtime
- Fix: Shared tests: nzgacategory handled better
- Mod: CustomerSatisfaction These models are just interfaces so updated the file name and interface name to show that they are interfaces. Likewise updated all the import statements
- Fix: Org: PGA Prize Money split: ellipsis string extension is not working; it could also be removed for now to allow Dave M to do the prize money split (urgent ticket)
- ADD: Copy the svn riddled Jenkinsfile and sanitise it
- MOD: Rename the Jenkinsfile to reflect that it is full of SVN
- Fix: API: Broken DI in tests using processRenewals
- Fix: ScheduledTasks: Results no longer requires manually-started job on ringmaster 😬
- Fix: ScheduledTasks: not working in prod
- Mod: Results Queue: less indentation for same error handling (deadlock from weekend)
- MOD: If the config allows trackers without cookie consent, then fake a cookie consent event.
- ADD: Provide the `AllowTrackerWithoutCookieConsent` property to the tag manager as well
- MOD: Instead of maintaining a list of countries to require cookie consent on, just get a config value for the given country :thumbs_up:
- MOD: Bump the delay when faking a cookie consent event, just to be safe
- MOD: Make no country require cookie consent in their config
- ADD: Make the config define whether cookies should be required or not
- Mod: CustomerSatisfaction DG-7252 Remove redundant emit from Public site [not admin]
- Fix: tests: Remove deprecated category creation method and handle the fact that Casual Golfer now being inserted into nzgacategory via scripts.
- MOD: Register mocks using correct extension
- Fix: Live tests: build
- ADD: Provide git ignore
- Fix: tests: Remove deprecated category creation method and handle the fact that Casual Golfer now being inserted into nzgacategory via scripts.
- Fix: tests: removed some erroring stuff from CreateDB.sql  CW_IsValidPasswordForComputerno
- Fix: tests: removed some erroring stuff from CreateDB.sql
- Fix: tests: removed some erroring stuff from CreateDB.sql
- mod: sql: drop proc if exists wa_TBUpdateMemberPassword  drop proc if exists wa_TBSendMemberPassword
- Fix: tests: removed some erroring stuff from CreateDB.sql
- mod: sql: drop old table CMemberNote_ToBeDeleted
- mod: sql: drop old view ClubMemberNote_ToBeDeleted
- Add: LIVE DG-7287 - Updated the help section link for Marker Filter settings. - Add images assets to the help section.
- Mod: Shared tests: setup-teardown errors now fail the test.
- Mod: sql: facility is temporal table because we're having issues in EG where clubs are losing their data since it's getting overwritten from EG CRM -_-
- Mod: sql: add FK to usersecurity for HandicapAdjustment.UserSecurityId
- Mod: sql: drop api_addmember because it's only used in test fixture and we don't want to maintain it.
- Fix: Shared: tests: cloned api_AddMember into the test fixture setup because DotGolf.Tests.SubsRenewalTests keeps failing for some reason and I don't have time to sort it.
- Fix: LIVE Fix ambiguous NZGACategory reference from Shared.Data and Core.Data and optimized using.
- Add: LIVE DG-7287 Add the ability for clubs to turn their marker filters on and off for Kiosk competition selection.
- Mod: Improved Adweb menu building based on permissions.  Still hopelessly insecure because we only remove the URLs from the menu, no permission checking is done when the page is loaded.  Better than nothing, but only barely.
- Mod: Adweb: Converted html based menu to code.  This will enable us to have cleaner code paths to show/hide menu options based on user permissions.
- Fix: ClubCMS: all club websites ded
- Mod: API: updates to move to casual golfer potentially being in the cmember table plus some unit tests #casualgolf
- MOD: Disable cookie consent checks for everybody
- FIX: Ticket # 52717: Duplicate news in golf.co.nz
- Fix: Build: tbtimeslot prop rename
- Mod: cmember: isMRU trigger now handles casual golfers
- Fix: Buttons changed to Scotland's 300U blue, since our blue and theirs on the same page looks Bad(TM)
- Mod: cmember: isMRU trigger now handles casual golfers
- Add: Tourism: New control properties for new Image Gallery control.
- Mod: cmember: isMRU trigger now handles casual golfers
- Mod: cmember: isMRU trigger now handles casual golfers
- FIX: Live/Org Nav: Check if TOURV2 and PENN product is enabled before using the interclub tournaments url
- FIX: DG-7258: When injecting the GA tracker, check that we aren't in England and if so just signal that consent was given (by virtue of not being required)
- Add: sql: casual golfers have their own nzga category with a new column to flag them because england will want to rename it...
- Add: sql: casual golfers have their own nzga category with a new column to flag them because england will want to rename it...
- Add: sql: casual golfers have their own nzga category
- Add: Scottish Golf logo for SSO
- MOD: Make the task runner testable
- MOD: Finalise the dep injection
- MOD: Finalise the dep registration
- MOD: Implement that last few static dependencies
- MOD: Mark these interfaces as obsolete, they should be proper interfaces for everybody to use
- ADD: IServiceLocatorThreadManager
- MOD: Fix mock registration conflicts
- ADD: .sln proj refs, I don't remember why I needed this, but I did :thumbs_up:
- MOD: Complete tests
- Fix: UnionAPI tests: handicap constructor removal
- Fix: build: misses a file
- Fix: bookingservice tests: handicap constructor removal
- Mod: Live: allow changing peoples password using OTP
- Mod: Live: remove unnecessary entity framework usage in KioskRepository
- Mod: Live: remove unnecessary entity framework usage in RemoveScorecardFromCompetitions and DeleteScorecards
- Mod: Core: Add a crapload of teebooking related pocotables to remove a call to entity framework
- Mod: Core: Add a crapload of teebooking related pocotables to remove a call to entity framework
- Add: Tourism: Added three new columns for gallery image details.
- Fix: UnionAPI tests: handicap constructor removal
- Fix: ISVAPI tests: handicap constructor removal
- Fix: ClubCMS: handicap constructor removal
- Mod: CustomerSatisfaction Updated the dev NZ env URL to the actual one for the Stoke-O-Meter ;)
- Fix: Live Fix marking registration sql missing CompetitionEntryId
- Fix: Live: Handicap listing set IsPending correctly and remove unnecessary perf mods
- Mod: Live: HandicapChangeReport now shows handicap status #5006544
- Fix: Core.tests: target 472 because netstandard is not a framework and decided to start failing i dunno. Shared tests now have renamed database  because they were messing with the xunit ones.
- ADD: Interface wrapper over shared static stats thingy
- ADD: Skel tests for /run and /start_task
- ADD: New test skeleton for /configure
- MOD: Make mocks initialise on single reference
- FIX: Remove redundant mock
- MOD: Add default mocks for more dependencies, overload these if specific setups are needed
- MOD: Register mocks from the repository as default implementations of common interfaces
- MOD: Keep registration fluent
- Fix: Systememail: test database build
- Mod: AdWeb[GI] DG-7249 If there is an outstanding Card Fulfilment request it will also get ported over to the live member from the resign
- MOD: Pull the rest of the scheduled tasks business logic into the BL provider
- Mod: More Scotland config updates (removed some Ireland references)
- Fix: Backup location for Scotland.
- Fix: Sigh.
- FIX: Tournament V2: Fix failing test
- Mod: Core: IMemberResigned hook is now async - slowly turning IHook impls into IHookAsync
- MOD: Pass on the dep injection to private helper task.
- ADD: Temporary static method wrapper to slowly move components into the instance implementation
- MOD: Add BusinessLogic to insert ScheduledTasks
- Mod: Scottish Golf nav logo updated.
- Fix: Oops, Scotland is GB-SCT, not SCT.
- Mod: Scotland WHS go-live date added (past date, this doesn't matter)
- MOD: Move CopyCurrentVersionToRunDirectory() to the file system access wrapper interface
- MOD: Use new process provider dependency
- MOD: Handle injection in constructor, yell at me if I forgot to provide an implementation of something
- MOD: De-staticify method so it can be unit tested
- MOD: replace database update with injectable business logic
- MOD: Replace database access with injectable business logic
- MOD: Replace environment and filesystem access with injectable wrapper
- MOD: Inject static dependencies through wrapper interfaces and document Main() further.
- ADD: Interface implementations of static dependencies
- ADD: interface wrappers for static dependencies.
- MOD: Add scheduled task business logic to update the last cron check timestamp
- MOD: Test that running "/tick" calls tick scheduled task.
- Add: Couple new address fields we need for Scotland import.
- Fix: Live #52552 Making this nullable as apparently the users like to leave it blank
- Fix: ClubCMS: ThirdPartyRegistration stray computerNo
- Fix: clubcms: very serious sql injection in comp registration
- Fix: ClubCMS: comp Registration: stray Cmember.computerNo
- Fix: clubcms: email edit potential obscure sql injection
- Fix: ClubCMS: pga Registration: stray Cmember.computerNo
- Mod: ClubCMS: Golf NZ website: Make Time Play 9 control: added new SubHeading control property
- FIX: Tournament V2: Fix failing test
- Fix: Live #52552 Fix where selected group booking was not saving contact number and on select not loading it back
- MOD: Pennants: Locked schedules if there are results already, fix import players from current and previous round
- Fix: Live: Player CSV Import Fix where it was not importing non-affiliates into the competition
- MOD: ClubCMS: Increase font size for p
- Mod: Reverse Proxy: apply TLS to titirangigolf.co.nz (was supposed to add this new domain name now, but it happened to be existing already)
- Mod: ClubCMS: bindings.prod.list: added clubcms-newzealand:titirangigolf.co.nz and clubcms-newzealand:www.titirangigolf.co.nz
- MOD: Jenkins be a good lad and go rebuild /world, run along now :)
- MOD: Clean up experimental fixes that are now just fixes
- MOD: BAT sucks, lets try this >:(
- Add: DG-7131: Added ability to add courseName & ScoreIntentDate to Automatic Penalty Score Notification/email.
- Mod: CustomerSatisfaction DG-7145 url query missing ?
- Mod: CustomerSatisfaction DG-7145 Not really unit test but... Had to make some changes so it's cleaner for when we fail to get user and changed from ScoreCardId to ScoreCardUID with Code to compare
- Add: DG-6893: New Home Club Change Request system email to be send to Membership contact upon acceptance/declining requests.
- FIX: Org: Timing Sheet error printing Tee #13
- MOD: Ignore already existing source
- Mod: API DG-6950 Hook to generate the survey when a user submits a score card. - Applies to home member only - Player who has not had the survey sent to them x amount of days or weeks depending on the setting - This is randomly generated question set [default is 3 questions at random and will be configurable]\
- MOD: Add nuget source registration as part of nuget restore helper
- MOD: Update to github only packages
- MOD: ClubCMS: Highlight Team on Summary Rounds
- TRY: Oh go this is just shifting the problem isn't it 0.0
- MOD: ClubCMS: Added Interclub Competition Results include Pennants competition in Tournaments listing
- TRY: Fine! I'll just use `dotnet msbuild` instead! See if I care, don't come crawling back to me when nobody uses `dotnet build` anymore >:(
- TRY: Won't you please accept my humble wildcard?
- TRY: Maybe I think I'm in the wrong directory??
- MOD: SQL Script: Added new control for Interclub Competition Results
- TRY: Attempt to simplify build command to make adding new projects seamless
- DEL: Successfully removed legacy baget nuget source
- GIT: Also for the love of shit svn, stop letting me commit with and empty log message!
- MOD: Attempt to combine build commands as efficiently as possible.
- DEL: Remove hardcoded nuget.config, no longer needed as BaGet is now deprecated.
- Mod: ScheduledTask Added try catch for GetDataSet in Result.Queue so that the process can continue and we catch the error while it blows up and not just nuke itself.
- MOD: Change packaging scheme to publish plain version only with -debug tag added to a duplicate simultaneously.
- Fix: Scheduled task tests after i switched unit tests to using local time
- Mod: Minor Scotland configuration profile tweaks.
- Mod: Disable mailer service in Scotland in case we accidentally deploy it.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- oops
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Add: Scotland bindings.
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Mod: SystemCountryCode now allows 5 characters to deal with GB-SCT.
- Mod: SystemCountryCode now allows 5 characters to deal with GB-SCT.
- FIX: ClubCMS: Fix register now visibility
- Mod: ClubCMS DG-7135 When a player cancels their subscription we previously did not log this when the email get sent out to the PassportClubLog. We're now doing this and it shows in the "LIVE" member history tab. yay! Also changed this to use the lambda expression
- Add: Swipecard format for Miramar.
- Mod: Org: Reports: add a new report group called "Promotions" so we can classify the promotion-related reports under it, and declutter the "Membership" report group
- MOD: DG-7134: Removed helper text from HandicapReviewReport.json.
- FIX: DG-7243: Updated GeneralPlayScoreNotificationTask.cs Maybe don't rename variables and break the notification task.
- Add: Scottish Golf branding added to nav.
- Add: Scottish Golf logo for nav.
- Mod: Live DG-7239 Change the group booking from slot count to player count for the email being sent out.
- Add: Moar stuff to make Adweb work in Scotland.
- Fix: Accidental commit
- Add: Bindings for Adweb/Scotland.
- Fix: More dodgy crap in bootstrap.pl.
- Fix: S3 bucket location was dodgy
- Add: Reverse Proxy: SCTProd environment to bootstrap.pl.
- Add: Reverse proxy stuff for Scotland
- Add: Jenkins credentials for SCTProd.
- Add: Scotland's configuration profile.
- MOD: Cleanup scores business logic (while using it as a base for scheduled tasks BL).... Man am I tired
- Mod: ClubCms/ClubCmsScore.cs: just corrected a comment
- MOD: Update solution dependencies
- ADD: Required reference for tests to access the IScheduledTask interface
- ADD: (I)ScheduledTaskBusinessLogic
- ADD: scheduled task poco table
- FIX: Clean up tests
- DEL: Remove CommonServiceLocator namespace
- FIX: Cleanup unused usings
- ADD: Jenkins file is now part of the solution items
- Fix: Scorecard: Do not check for ClubCardPrinterUID if the create scorecard request is coming from the app. Only do this when printing a physical scorecard. Fix: API: Digital Scorecard: Fix Ineligible score for handicapping validation logic. Unit tests passing again.
- DOC: Add comments regarding assertions
- Mod: Golf NZ: main.css: My Golf Overview style updates; use the css utility class "mygolf-section"
- Mod/Fix: ClubCMS: make-time-play-9/view.html: added CSS utility class "mygolf-section" - added a title which looks like the other My Golf Overview control titles
- Mod/Fix: ClubCMS: my-bookings/view.html: corrected the CSS class name used from "my-friends" to "my-bookings" - added CSS utility class "mygolf-section" - also removed redundant title
- FIX: Now that the assertions are more semantic and fluent, there's no need for the anon blocks
- FIX: Simplify assertions to assist in debugging failing test
- FIX: Redundant parens
- MOD: Simplify remaining namespace refs
- FIX: Simplify namespace
- FIX: Register service locator
- MOD: Switch from IServiceLocator to IServiceProvider
- MOD: Allow nullable db builder
- ADD: Provide base test class
- ADD: Extend mock registration
- FIX: Whose idea was it to use an anonymous block here??!?
- FIX: Service provider must specify the correct namespace
- Fix: Golf NZ: admin list page (accordion list admin page): fix button CSS
- Fix: Golf NZ: admin list page (accordion list admin page): fix accordion list items CSS
- MOD: Pass test by letting `Main()` handle assembly scoped DI and letting the tests DI directly.
- ADD: Test case for when run with no command line arguments
- DOC: Update xmldoc comments
- MOD: Convert the tests to use the base tests from core.
- MOD: Make Console injectable
- Mod: Live/Kiosk DG-7103 Multiple courses won't have the competition marker filters.
- FIX: Correct reference issue in #ifndef block, failing on jenkins, fixed now
- MOD: Add moq and core tests to the new test project
- MOD: Allow injecting System.Console
- MOD: Allow injecting (i.e. mocking) the IServiceLocator via an exposed setter
- MOD: Break `Main()` down into constructor and `Run()` method.
- MOD: Group inner classes together
- MOD: Make program public for testing, and group all properties
- ADD: Begin testing the scheduled tasks main entry point
- FIX: TODO(YRI): This is an antipattern, instead of getting the types and then looping over them, we should have been using AutoFac from the beginning.
- Fix: Tourism: SEO Meta control, force update to page type & locale options value assignment.
- FIX: Rename antipattern variable to make it obviously gross instead of subtly gross.
- FIX: Clean up arrow funcs
- MOD: Pennants TV2: Added Reports for Summary and Rounds Results
- FIX: Sort / clean usings
- FIX: IDE0063: Use simple 'using' statement.
- MOD: Pennants TV2: Added Reports for Summary and Rounds Results
- FIX: IDE0040: Make accessibility modifiers explicit.
- Mod: api_addscore more clear error messages around not-attemped holes
- MOD: Switch comment order
- TRY: Jenkins, be a good chap and publish some packages for me eh?
- Mod: Adweb: delete cmember records of old merged people because they should be prevented from signing up again
- Fix: Admin: hide member number merge option by default (only for WA/EG)
- Mod: ClubCMS DG-7219 Check if the control contains "Global" if so then we can append the the add control button so the user will know what type of control they're adding.
- Fix: Tourism: Image Url and Video Url validation fixes.
- Upd: Tourism: Completed SEO Meta management.
- FIX: Insecure groovy string interpolation
- Upd: Tourism: Retrieve and extract existing page control META details.
- Mod: Live: DG-7103 [Kiosk Eligible Competition marker filter] Toggle markers by color of the marker for eligible competition
- MOD: Rename the PAT variable to be consistent with GH actions
- FIX: Correct authentication credentials variable
- MOD: Update credentials to use PAT from secret (this secret is currently a PAT against my account, we need a Jenkins GH account ASAP)
- FIX: My spelling is horrid
- FIX: Groovy syntax sucks even more when the snippet you're reading online is broken
- FIX? Groovy syntax sucks
- MOD: Use `GITHUB_ACCESS_TOKEN` credentials instead of PAT (note: I'm revoking the PAT I used for testing as it should never ever ever by in plaintext in source control)
- DEL: Cached nuget source has been removed, this line is no longer needed
- FIX: Attempt to clear nuget source by key rather than URL
- FIX: Remove cached nuget source and instead specify source authentication inline during push (? I hope)
- FIX: Remove all nuget sources before attempting to add the GH source, this fixes duplication warnings/errors. Also attempt to use PAT as api-key instead of username + password, this will hopefully allow the GH OAuth App token to slot in (assuming it works)
- FIX: Don't repeat the source twice, it only needs to be listed once
- FIX: Package IDs much match previous pattern
- FIX: Ooops, don't track IsvApiClientBase.g.cs
- FIX: Build each project individually as wildcard doesn't work for some reason
- FIX: Build command must project files with wild card
- TRY: Attempt to push package to GitHub nuget source (using Personal Access Token linked to my account, long term this will need to be a dedicated Jenkins user on GH)
- Fix: Live: GroupBooking Sigh... oops forgot to remove the testing related things during development... all is well again
- Fix: wa_TBMoveBookingToSlot proc was not keeping TXLine.ClubId and TXLine.TranDate intact when deleting and recreating TXLine records.
- Fix: Kounta: Refunds not working for orders paid thru old House account method.
- Fix: API: TeebookingController: Fix Player who is on the booking is unable to edit their own entry (e.g. cancel) in the app.
- Fix: Live/Kiosk Removed c. from c.ClubCardPrinter as 'c.' was extra and is unnecessary.
- Fix: API: TeebookingController: Disable payer select options if the booking already has payments applied to it.
- Mod: API: Override delete account narration in the app.
- Fix: ISVAPI tests failing because localdb is in NZ time and config expects it to be UTC
- Fix: ScheduledTasks: HistoryExtractTests being fickle
- MOD: We don't care about deleted scores' pcc values, so don't sync them
- Mod: Live: extract some Entity Framework cancers from ClubFeeRepository and KioskRepository
- MOD: Format the query to make it more readable (and modifiable)
- MOD: I tested the living daylights out of that query let me tell you.
- Mod: Autogenerated poco classes.
- Mod: sql: InteropScoreId updated since it was not long enough for guids with dashes
- FIX: IDE0005: Remove unnecessary using directives
- FIX: IDE0005: Remove unnecessary using directives
- FIX: IDE0005: Remove unnecessary using directives
- FIX: RCS1037: Remove trailing white-space
- Fix: Connector build: add Directory.Build.props
- Mod: ISVAPI no longer targets netcoreapp3.1
- Mod: Core and generated clients no longer need to target netcoreapp3.1
- Mod: Core: AspNetCoreRateLimit and DotGolf.Core.Tests no longer need to target netcoreapp3.1
- Fix: ScheduledTasks: SubscriptionRenewalProcessor if billing card is voided, treat as failed payment and resign if necessary (don't just ignore the person)
- Mod: Included PaymentTypeId in [IX_Receipt_ClubId].
- Fix: Kiosk broke because i deleted EF :( but it's still been booted out of the build process so i'm happy with that
- Mod: [wa_TBSendPaymentWarningsJob] performance improved by cutting down the number of TimeSlotIds considered. Add: Index for ClubProducts for minimal performance gains.
- Fix: ClubCMS DG-7209 #52250 Updated logic so that NonPlaying members can log in and pay for fees etc in MyAccount
- MOD: Revert theory, there's only one union that this task will ever run for, and more importantly, since the test runs against a local db I control the data it contains, mwahahahaha
- Upd: Tourism: Updates for New image page gallery control.
- FIX: DG-7099: May or may not be the culprit but is filthy hack either way. Removing.
- Mod: api_addscore SHOULD accept 9h score as valid for handicapping if it has 0-2 unplayed holes
- Mod: api_addscore should not accept 9h score as valid for handicapping if it has any unplayed holes
- MOD: Partially complete test (db returns empty enumerable of scores, unclear if data test data or simply no scores currently without pcc)
- Undo svn-over-openvpn - doesn't seem to save any time.  Instead enabled compression on svnserve, maybe that helps? Merged revision(s) 57299 from Trunk/Shared/_deploy/dotgolf: Mod: Build1 will now use svn.internal.golf.co.nz to pull source code (we have an openvpn instance on build1 now) ........
- MOD: Pennants TV2: Show schedules and round players if the competition is already finished
- ADD: Half baked integration test
- MOD: Modify the existing test to extract the query used for further testing against an actual db
- MOD: Use better var names to prevent confusions
- DOC: Make documentation better so I can actually read it
- MOD: Pennants TV2: Disable moving of players
- MOD: Pennants TV2: Fixes on latest issues encounter by Matt, also removing filter of clubs and members if association is logged in
- Mod: Build1 will now use svn.internal.golf.co.nz to pull source code (we have an openvpn instance on build1 now)
- Mod: CompetitionVsGeneralScores report working for igolf betterer
- Mod: EmailGenerator update to net6.0
- Fix: missing file from shared build sorry
- Fix: Manually hack csproj to fix package problem in jenkins build.
- Mod: Upgrade activity tracker to net6.0
- Mod: Upgrade activity tracker to net6.0
- Merged revision(s) 57285 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: org: fix build by removing duplicate packages ........
- Merged revision(s)  from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live:
- Fix: Live: build speed improved by not having an edmx file because we never want to edit it ever because we are trying to remove it
- Mod: Removed seemingly superfluous CSS that came from Org.
- Mod: Live: GeneralPlayScores report warning message is more obvious now
- Mod: org: fix build by removing duplicate packages
- Fix: MasterPageOptions missing some properties from Live, surprise surprise.
- Fix: Live: build speed improved by not having an edmx file because we never want to edit it ever because we are trying to remove it
- Mod: Live: fix build?
- MOD: ClubCMS: Add class on buttons for cookie-consent/view.html control
- FIX: A crap I missed one 😳
- Mod: GeneralPlayScores report working for igolf
- Fix: Do not allow users to login unless they are linked to a club or association.
- DEL: service provider no longer needed in this test
- Fix: Build
- FIX: Instead of messing around with adding a global `dg_clientside_controls` js obj to allow the cookie hook to work on pages without knockout, I've opted to just use a raw js event handler to listen for cookie consent.
- Mod: CompetitionVsGeneralScores report working for igolf
- DEL: We don't need no empty constructors
- Fix: unionapi build
- Mod: UnionApiClient: move production URL into UnionApiClientBase (since UnionApiClient is internal now)
- Merged revision(s) 57108-57233 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: FIX: Packages all out of whack thanks to svn externing weird ........ FIX: More usings ........ Fix: Org: Build (removal of legacy Handicap constructor) ........
- Merged revision(s) 56878-57208 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Mod: Live: update changedate on club when facility deets are updated ........ Mod: Live: update changedate on club when facility deets are updated ........ Cleanup: Removed ExtQueryEmail.ashx, we use ExtQuery cron settings for this now. ........ Mod: TeeBooking DG-6738 MoveGroupBooking Functionality to move group booking to another time slot or another day TODO: - Figure out all the TimeSlotId on click - Fix stuff in the notes and fix TXLine details when moving - Clean up of debug notes - UnitTest ........ Mod: TeeBooking DG-6738 MoveGroupBooking Is ugly but is doing what it's supposed to TODO: - Fix stuff in the notes and fix TXLine details when moving - Clean up of debug notes - UnitTest ........ Mod: TeeBooking DG-6738 MoveGroupBooking UI bits and bobs fixes TODO: - Fix stuff in the notes and fix TXLine details when moving - UnitTest ........ Mod: TeeBooking DG-6738 MoveGroupBooking When we move group we're not moving the slot notes just the notes in the group. So the UI needs to also reflect this. TODO: - Fix stuff in the notes and fix TXLine details when moving - UnitTest ........ Mod: Live DG-7040 Save contact number to group booking. Tidy up of the group booking dialog ........ Mod: Live DG-7040 Noobed out -> missing designer file for the new contact number control. ........ Mod: Live DG-7041 Adding NZ, AU, US to the top of the select list in the country select list from the control After much debacle of not wanting to do it this way - it is now done.. ........ Mod: Live: minor tweaks to webhook debug experience ........ Fix: Live: minor tweaks to webhook debug experience but less risky ........ FIX: More of the same, but this time with a 30% discount on every dollar put in the swear jar ........ Upd: DG-7036: Added validation for Contact type exclusivity role option. ........ Fix: Live: Manage Advertisements: Fix preview advertisement image link. #52322 ........ Mod: Live: ignore API client dlls in bin ........ Mod: Live: prevent moving invoices from a nonaffiliate to a cmember or vice versa #52198 ........
- MOD: Pennants TV2: Update saving of results
- DOC: Make example snippet clearer
- MOD: Resolve TODO(YRI): Get the score mock and verify the pcc got set
- MOD: :face_palm: it'd be nice if I remembered to make this `virtual` like I said I had in the docs
- MOD: Complete (initial) implementation of task, now over to proper testing
- Fix: ClubCMS: allow welsh home members to sign up for igolf
- MOD: Complete testing of new task
- ADD: Mock extensions to provide even more fluent mocking
- ADD: Test new scheduled task (mostly, last few mocks / edge cases still need to be written)
- MOD: Interfaceify some more business logics
- ADD: Provide generic base test class for scheduled task tests. This provides base test cases to keep the tests DRY and greatly simplify the instantiation of a test instance.
- MOD: Allow mocking Score and Course data models
- MOD: Don't stop the debugger here either >:(
- MOD: Don't catch the dispose method in debugger, it takes me away from where the test *actually* failed
- MOD: Extend IBusinessLogic to cover the full base class
- ADD: New autofac extensions allow registering mocks to autofac, nice and clean and awesome
- Fix: MemberSignup: EligibleCheck error
- MOD: Pennants TV2: Hide names when the other team haven't set their players
- Mod: Update passport ismember and isnonaffiliate to handle new cmember structure #casualgolf
- Ignore files.
- File ignore.
- Add: Tourism: Added new Image Page Gallery control
- Fix: API: Build (removal of legacy Handicap constructor)
- Fix: Cookie consent code removed; the tournament cart cookie is required for system operation - we do not need consent for this.
- FIX: Ticket #5008553: GI Club Hub bug on saving blocks
- Fix: Org: Build (removal of legacy Handicap constructor)
- Reverse Merged revision(s) 57231 from Trunk: Mod: Core: remove unused class and unused constructor in Handicap.cs. Add some new c# stuff while we're at it ........
- Mod: Core: remove unused class and unused constructor in Handicap.cs. Add some new c# stuff while we're at it
- Mod: ClubCMS: change wording on GI contact page #5008599
- Fix: Org: squadselection report not working for women #5008607
- MOD: Pennants TV2: Fix nz golf access not tagged as org user
- MOD: Pennants TV2: Default to Pennants if District doesn't have TOUR (Old) Tournaments Product
- Fix: Live: ORNS in CountrySelector
- MOD: Pennants TV2: Filter clubs by Region Id and allow Pennants product in the Navigation
- Fix: Live: ORNS in CountrySelector
- Fix: Live: ORNS in CountrySelector
- MOD: Pennants TV2: Filter Members per District or Club depending on the logged user
- Add: Adweb now posts events to Vortex so we can track when schema scripts are being executed.
- Mod: Live: JuniorGirlsMedal include scores played outside home club #5008611
- Fix: XSS issue in Adweb; encode script HTML before rendering to UI.
- DEL: Private class is unused.
- Mod: Live: prevent moving invoices from a nonaffiliate to a cmember or vice versa #52198
- File ignore.
- Mod: Live: ignore API client dlls in bin
- Add: Tourism: Added web api end-point for seo meta tags.
- Mod: ClubCMS: change member verification code expiry to 5 days to people who've had emails lost by btinternet might have a chance to get the code (via support) Mod: ClubCMS: clean up old redis code from when we only stored one verification code at a time
- Fix: Live: Manage Advertisements: Fix preview advertisement image link. #52322
- Mod: Core: UnionAPIClient is internal now because we should be using the interface
- MOD: Add backwards compatible strict mock verification.
- Mod: Scheduledtasks: score intent refactor to hide autofac magic and make things easier to follow
- Jenkins DSL again
- MOD: Use new client factory for the new task
- FIX: Remove function injection and hide inside an actual factory.
- Test: Jenkins DSL
- FIX: Pennants TV2: typo
- Test: Jenkins DSL
- MOD: ClubCMS: Include Body in the search for Resource Hub
- MOD: Update tests to use base mock repo.
- FIX: Remove that bracket
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- FIX: Pennants TV2: Build error
- MOD: Pennants TV2: Implement ability for Clubs to access Pennants competition that they are part of as a Team
- DOC: Explain the usage and rational behind mock repositories and provide copy-pastable examples of using both the new repository syntax and the equivalent in the old style.
- Test: Jenkins DSL
- Test: Jenkins DSL
- FIX: ClubCMS: Create page added filter on Clubwebsite Id
- MOD: Pass mock behaviour through intermediate test bases
- FIX: TestBase needs output
- Mod: API: Allow user to delete their online account (e.g. PassportCredentials) - Apple no longer accepts new updates if our app does not offer account deletion.
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Test: Jenkins DSL
- Add: Test Jenkins DSL directory.
- Add: Test Jenkins DSL directory.
- Add: Test Jenkins DSL directory.
- Fix: Shared: build after IUnionApiDirectoryHelper change
- Mod: Core: UnionApiDirectory internal now, we should be using the interface
- Mod: ScheduledTasks: CronSchedule is nullable
- Mod: ScheduledTasks: SubscriptionRenewalProcessorTests style change
- Mod: Core: hookmanager has new FireAsync method, we can slowly begin switching hooks from IHook<> to IHookAsync<>
- FIX: ClubCMS: Create page added DeletedDate is null
- Mod: GolfNZ: Updated Name convention.
- Mod: Core tests: mock repo so yuri can do cool mock tings
- Add: GolfNZ: New control to manage SEO and Open Graphs (og) search engines.
- MOD: Make mocks more readable.
- Mod: WHS: new test to ENSURE member with two members at same org (one live, one resigned) gets resigned properly
- Fix: ActivityLog: remove empty try catch
- Fix: ECR repo name was incorrect for CustomerSatisfactionSurvey.
- Fix: ISVAPI: broken DI for some reason
- Fix: ISVAPI: broken DI for some reason
- Mod: sql: api_addscore no longer clobbers initial data on re-save
- Mod: Course sync: make sure we don't insert duplicate markers
- Mod: sql: api_addscore no longer clobbers initial data on re-save
- ADD: Test the existing GetAwayUnionPccTask
- Mod: sql apply tbsearchbyclubday_search performance mods (split query (which timed out when fetching plan) into more simple batches) to tbsearchbyclubday_tbsearchbyclubday_oneclub because it seems to help there too
- Upd: DG-7036: Added validation for Contact type exclusivity role option.
- MOD: Use interfaces for GetAwayUnionPccTask's dependencies
- Mod: Core: business logic classes are now mockable and we can register them by interface (see Scores.cs, GetAwayUnionPccTask)
- MOD: Initial cleanup of new task
- MOD: Make tests inherit output helper.
- Add: ISVAPI: get all Tournaments endpoint
- FIX: Correct WHS api client references
- Fix: ScheduledTask: Unassigned member account credit notification - Duplicated sales in the email body if there are multiple contact persons for a given contact type. Should group by club and e-mail address.
- Add: scheduledtasks: away union pcc task for when scotland send us a score but we need to find the pcc later
- FIX: David forgot to remove ExtQueryEmail.ashx from the project in 56890 B.C.E.
- FIX: Test was using old union client, fixed to use new world order^H^H^H^H^H^H^H^H^H^H^H^H client
- FIX: Build target order to make cleaning the project easier
- MOD: Pennants lock schedules when there's already a results submitted
- MOD: Make core delete old generated files
- DEL: There's no client project any more....
- ADD: Global scope nuget config file :crossed_fingers:
- DEL: Nuget config doesn't work, VS needs settings entered in UI :/
- ADD: Nuget config for ClubCMS, (sorry Dino)
- MOD: DG-7120: Updated WG Flexi club welcome email text.
- Mod: CustomerSatisfaction DG-7039 Removed vue-router don't need this. And maybe the build is failing because apparently it might need package.json and not just the package.lock file.
- Mod: CustomerSatisfaction DG-7039 Fix some build errors and commit the JWT token login from the app
- FIX: More of the same, but this time with a 30% discount on every dollar put in the swear jar
- FIX: More usings
- FIX: Packages all out of whack thanks to svn externing weird
- Fix: Live: minor tweaks to webhook debug experience but less risky
- Mod: Live: minor tweaks to webhook debug experience
- Fix: Live: Double house account refund bug when paying with new payment method
- MOD: Bulk Email: Revert changes on Casual adults query
- FIX: Add missing build info code generator.
- ADD: Shared needs client packages.
- ADD: Reports need the booking service client.
- *** DFH CODE REVIEWED TO HERE *** MOD: Add the DotGolf.Client.Foo namespaces as using statements for all files that depended on the old Nswag builds and replace with the new package based clients.
- Mod: ClubCMS DG-6738 Script to create EnableBiAnnualPayment and associate this to rMyAccount and update notes to EnableChangeToInstalment so its clearer as to what this is for  - These settings can be used independently
- Fix: Tousim: Fixes Club page facility details, and other UIx fixes.
- Mod: ClubCMS DG-6738 Toggling payment options [monthly or bi-annually] in MyAccount. There is a sql to run to add the new control 'EnableBiAnnualPayment' -> this is baked into the control for rMyAccount.  - These settings can be used independently
- MOD: Ignore .vs/
- DEL: Remove whs api client, now lives in DotGolf.Clients
- DEL: Remove union api client, now lives in DotGolf.Clients
- DEL: Remove isvapi client, now lives in DotGolf.Clients
- DEL: Remove booking service client, now lives in DotGolf.Clients
- Mod: Autogenerated poco classes.
- delete HistoryExportService
- delete HistoryExportService
- Mod: ScheduledTasks now has task to replace HistoryExportService
- MOD: Bulk Email: Fix non-affiliate adult recipients
- Fix: Move HistoryExportService to ScheduledTasks. missed a file
- Fix: sql: ???
- Cleanup: Just some nasty smells in SubscriptionRenewalProcessor.cs
- Fix: sql: ???
- Mod: Move HistoryExportService to ScheduledTasks.
- Fix: sql: missing rowversion column on NZCRData
- Mod: Autogenerated poco classes.
- Fix: sql: missing rowversion column on NZCRData
- Mod: Updated documentation in XeroOAuth2/README.txt.
- Cleanup: Removed regions from SubscriptionRenewalProcessor; they are not used cleanly here.
- Mod: Increase the fuzz factor in PocoTableFixture tests.
- Cleanup: Removed `goto`.
- FIX: svn will only checkout directories, not files :/
- Mod: UnionAPI: ignore client bin/obj
- Mod: UnionAPI Tests: refactor to remove string copypaste
- Mod: SSO Tests: refactor to remove string copypaste
- Mod: HistoryExport Tests: refactor to remove string copypaste
- Mod: BookingService Tests: refactor to remove string copypaste
- Mod: BookingService: ignore client bin/obj
- MOD: Pennants TV2: Fix delete pairings
- Mod: BookingService Tests: refactor to remove string copypaste
- ADD: Checkout the various swagger files.
- Fix: ISVAPI: no more scores accidentally backdated to the previous day with unit tests this time
- MOD: Attempt individual builds rather than bulk build
- DEL: We might not need to do the cache buster tag replacement?
- MOD: Consolidate bat comments.
- MOD: Add the jenkinsfile to the solution
- ADD: New solution for NSwag builds to live free of the tyranny of circular dependencies with the imperial Core.
- Fix: ClubCMS: member signup was not checking eligibility for casual golfers in the member table
- Fix: ClubCMS: member signup was not checking eligibility for casual golfers in the member table
- Fix: Live: if someone doesnt have a home club set in WHS, union should be allowed to take over come club status if person has a live membership there
- MOD: Pennants TV2: Show match info on specified number of days before round date
- Add: Non-TLS version of play.lovegolf.co.nz for transition.
- Fix: ISVAPI: no more scores accidentally backdated to the previous day
- Mod: Live/GB&I DG-7038 Modified to not show penalties on General Play Score
- FIX? idk man, svn is mean :(
- GIT: Accidentally committed way too much, this was meant to be a revert, curse you svn the platypus!
- MOD: Temporarily add the nuget packages back
- MOD: Pennants TV2: Implement results
- REV: Jenkins doesn't like it :(
- Upd: Bulk Email: Updated filemanager setup for headers and footers.
- ADD: Packages to new nswagified clients.
- Mod: Core tests: sanity checks in case a data cleanup failed or isnt working
- Fix: Amex: Redirect for Amex sign-up conflict with Ohope golf club.
- Mod: BulkEmail: ckeditor filemanager works outside of drafts now at club level (currently used for Settings Header/Footer)
- Fix: CasualGolf DG-7117 Strip spaces in between characters in file name as it was causing errors on upload/cropping.
- FIX: Bump web.mvc version to kill yellow screen of death
- Mod: BulkEmail: can override default ckeditor config file with inline binding
- Fix: ISVAPI: tests can be run more than once
- Mod: API: EG - Rename suffix to "default" which corresponds to the default mygolf profile for club members.
- ADD: Booking services client
- REV: Turns out that the main build doesn't create the package :(
- TRY: Check if the standard jenkins build command already builds the package, if so we might be able to save on build time :D
- DEL: Remove erroneously versioned generated code.
- DEL: Don't track the generated code file.
- MOD: Add packaging stage to jenkins build.
- GIT: Curse you svn the platypus!
- GIT: Curse you svn the platypus!
- ADD: New project for the UnionAPI.Client, home of the nswag generated code.
- Mod: ISVAPI: Tests: make tests less annoying to debug, better docstrings, sanity check for DatabaseBuilder in case of bad data
- Mod: Live DG-7041 Adding NZ, AU, US to the top of the select list in the country select list from the control After much debacle of not wanting to do it this way - it is now done..
- Fix: ISVAPI: sql syntax from 6am commit again
- Mod: ISVAPI: shuffle Core dependency around in the sln file and svn ignore Client bin/obj
- Fix: ISVAPI: sql syntax from 6am commit
- MOD: Pennants TV2: Update Schedule UI
- MOD: Pennants TV2: Update Schedule UI
- Mod: API: EG - Double splash images are now retrieved from S3. Currently, the path is hard-coded but it will be dynamic or calculated next time. I just need to be able to debug the app and load render the splash images first.
- FIX: If I could remember to put the correct path, that'd be greaaaaaattt
- Mod: Live DG-7040 Noobed out -> missing designer file for the new contact number control.
- Mod: Autogenerated poco classes.
- ADD: Replicate WHSAPI client for ISVAPI, should build nuget package to baget :crossed_fingers:
- Mod: Live DG-7040 Add column ContactNumber in TBGroupBooking so that we can save contact number to group booking.
- Mod: Reports: online subs transaction report
- MOD: Remove debug println calls, not needed anymore
- ADD: Missing swagger files
- Mod: Live DG-7040 Save contact number to group booking. Tidy up of the group booking dialog
- Fix: Bulk Email: Fixes preview modal and UI buttons.
- Fix: ISVAPI: don't update date_resigned on member record if the person still has a live cmember record in our union
- Mod: ClubCMS: amend GI contact message to reflect response time #5007947
- Mod: API: EG - Double splash screen. These images will be moved to S3 eventually.
- MOD: Pennants TV2: Create pairings on schedule
- MOD: Jenkins, be a good chap and rebuild world.
- DEL: Remove external swagger files.
- DEL: That explains it, there were two files and svn kept regenerating one while I kept deleting the other. No wonder
- ADD: Replacement swagger file for the extern reference to ISVAPI.
- Add: Bulk Email: Added a content reset methods to drafts and systems email settings.
- FIX: Move ISVAPI nswag build step last to see if other nswag steps are having the same issue.
- FIX: Explicitly include swagger file in Core to force it to exist in the Jenkins workspace.
- Add: Bulk Email: Added header/footer preview for drafts and systems email settings.
- FIX: Try to specify path to swagger file (this isn't a biggie since we'll be moving this soon)
- ADD: Properly add the swagger file for ISVAPI (not sure why msbuild couldn't see it while both vs and svn could)
- REV: Remove a space to a human readable field to trigger a rebuild and verify svn is behaving itself. This undoes rev56981.
- MOD: Add a space to a human readable field to trigger a rebuild and verify svn is behaving itself.
- Mod: TeeBooking DG-6738 MoveGroupBooking When we move group we're not moving the slot notes just the notes in the group. So the UI needs to also reflect this. TODO: - Fix stuff in the notes and fix TXLine details when moving - UnitTest
- Add: Bulk Email: Added save methods to drafts and systems email changes.
- MOD: De-externify ISVAPI's swagger, begin the nswag migration for this component.
- Mod: TeeBooking DG-6738 MoveGroupBooking UI bits and bobs fixes TODO: - Fix stuff in the notes and fix TXLine details when moving - UnitTest
- Upd: Bulk Email: Ignoring CommunicationSettings compiled script files.
- Upd: Bulk Email: Colour palette settings clean-up, drafts and systems email setup.
- DEL: Remove swagger external, it's not needed anymore, the swagger file is now (temporarily) just a regular file in this directory. It'll be removed when the WHSAPI.Client is finally allowed to be pulled from baget.
- REV: Revert revert revert revert revert WHSAPI.Clientifying core.
- REV: Revert revert revert revert WHSAPI.Clientifying core.
- FIX: Renderer was using old constructor over new method, @marcus changed the way that the renderer was constructed in `HtmlRenderer.cs`
- ADD: Manually copy across the swagger.g.json file from WHSAPI, at least this isn't an extern, but it doesn't automatically update :/
- REV: Revert revert revert WHSAPI.Clientifying core.
- MOD: Update ClubCMS to use new package for WHSAPI client.
- MOD: Add nuget reference to whsapi client for access to the generated models.
- MOD: Core.Tests get a WHSAPI.Client reference, and you get a WHSAPI.Client reference, everybody gets a WHSAPI.Client reference!!
- MOD: Update all DotGolf.Shared references to the WHSAPI client to use the new nuget package.
- MOD: ClubCMS: CSS change on Jobs page
- DEL: There ain't no nswag to core-whsapi.nswagify
- REV: Revert revert WHSAPI.Clientifying core.
- Add: Jenkinsfile for CustomerSatisfactionSurvey. Cleanup: Ignored bin, obj and .vs directories.
- Cleanup: no longer need build-linux.cmd, Jenkinsfile takes care of this for us now.
- Fix: Try to sort
- MOD: Pennants TV2: Updates on results and pairings
- Mod: Do not archive unit test or windows binaries - all our containers run linux.
- MOD: Pennants TV2: Updates on results and pairings
- Tournaments: npm no-color and added back the unit test build
- Tournaments: npm build fixed?
- Tournaments: npm build added
- REV: Revert WHSAPI.Clientifying core.
- Tournaments: Archive root adjusted to put all the stuff in the package zip.
- MOD: Make Core use the WHSAPI.Client
- Add: Magic sauce added to DotGolf.Core.Tests to make it build for the linux target.
- Mod: Suspect we don't need this change; will see what Jenkins makes of it.
- Mod: Tournament build works now!
- MOD: If you don't stash your bin/, you can't run any tests, how can you run any tests if you don't stash your bin/?
- MOD: Pennants TV2: Show # Rounds and Teams
- Mod: England: Member and iGolf benefits link in the app now points to the new England Golf website.
- MOD: Just quietly, between the two of us, I think we don't even need to build the rest of this, just the client and call it a day.
- MOD: Pennants V2: Add indicate from which round the import players coming from
- MOD: Specify netcoreapp3.1
- MOD: Switch build command in Jenkinsfile
- MOD: The WHSAPI client depends on WHSAPI
- MOD: Pennets TV2: Added import players from previous rounds
- Mod: Try not forcing win10-x64 runtime id in DotGolf.Core.Tests.
- Mod: Attempt to target netstandard2.0 for DotGolf.Core.Tests.  I have a feeling this will end badly.
- Test: Skip building unit tests to see if that is causing `error NETSDK1031: It is not supported to build or publish a self-contained application without specifying a RuntimeIdentifier. You must either specify a RuntimeIdentifier or set SelfContained to false. `
- MOD: Allow specifying cookie expiry in number of days.
- ADD: New properties from adweb
- MOD: Get the cookie expiry settings from adweb
- Mod: Upgraded TournamentsV2 to Jenkinsfile and removed externs to DotGolf.Core and DotGolf.Core.Tests.
- MOD: Update wording in the property description.
- MOD: Pennants TV2: Implement adding in Players for Contests and Results is able to render out
- ADD: Cookie consent property to specify how long to remember consent cookies.
- FIX: Script source pointing at the wrong location
- MOD: Look. English is my second language ok.
- MOD: DG-7107: Updated MemberChangeRequest.sql to remove duplicates.
- Mod: TeeBooking DG-6738 MoveGroupBooking Is ugly but is doing what it's supposed to TODO: - Fix stuff in the notes and fix TXLine details when moving - Clean up of debug notes - UnitTest
- Mod: Core: rename CardFulfilment/MemberResign.cs hook to be more descriptive
- Mod: TeeBooking DG-6738 MoveGroupBooking Functionality to move group booking to another time slot or another day TODO: - Figure out all the TimeSlotId on click - Fix stuff in the notes and fix TXLine details when moving - Clean up of debug notes - UnitTest
- Fix: Tests build, after Extquery mods
- MOD: A user may regret not accepting our cookies, in our benevolence, we will nag them about it every day until they accept our cookies.
- Mod: Org: SquadSelection report can be exported to CSV now
- [REVIEW PLEASE] Mod: Shared: Extquery supports rendering subreports to excel. It's not pretty but gets the job done.
- Fix: Org: SquadSelection report breaks on sept 1st
- MOD: Defer tournament feed loading until all cookies accepted.
- MOD: Force rebuild. Remove TODO
- MOD: Add todo for dev qol improvements.
- MOD: Found Instagram script, facebook *cough* sorry, meta definitely is not "necessary" for cookies.
- Mod: sql: tbsearchbyclubday performance mods (split query (which timed out when fetching plan) into more simple batches)
- Fix: Jenkins: #speed-of-play - Missing from previous commit
- Add: ExtQuery: firstworkday and lastworkday date functions to allow us to exclude weekends/public holidays when finding the default as-at date for the Ecommerce liability report.
- Upd: Amex: New control added and layout structure changes.
- Mod: API: #speed-of-play - At the moment, do not log location updates from the app in the production environment. When we did an initial test for one scorecard, it was able to submit multiple location updates around 12K which is not ideal.
- Fix: API: #flexi-payment-options: /save-booking-changes endpoint - Ensure entries that are previously marked as paid remain as paid if there is outstanding amount to be paid.
- MOD: Second pass, these cookies don't need as strict checks.
- MOD: BIG CHANGE. Document all cookies as either necessary or otherwise allowable and wrap non-necessary cookies in a `if (cookiesAccepted)` check.
- Fix: Live: Adjustments tab would not show user who updated adjustments in certain cases. #5008407
- MOD: The buttons must be loaded before they can have event handlers bound to them.
- Mod: sql: ConnectorAPI witchhunt: Moved some joins outside the giant query and into a table variable. giant query is happier and doesnt seem to time out getting execution plan.
- Cleanup: Removed ExtQueryEmail.ashx, we use ExtQuery cron settings for this now.
- Mod: Recycled one of the compromised keys; this one is unlikely to cause widespread breakage when deployed.
- Fix: Live: RoundsPlayedDaily report timing out
- Fix: API: #flexi-payment-options: Takapuna - The current user gets charge with a green fee but not the other players. It was defaulting to "PAY_AT_CLUB".
- MOD: Only show buttons once loaded.
- MOD: Create a event driven cookie hook system, any code that needs cookies can hook onto the `cookiesAccepted` event and only add the cookie once the necessary consent is given.
- ADD: Button to accept only strictly necessary cookies.
- Mod: Live: update changedate on club when facility deets are updated
- Mod: Live: update changedate on club when facility deets are updated
- Mod: Clubhouse bindings for NZ Prod (clubhouse.golf.co.nz) for final testing.
- Merged everything from Trunk/Live and Trunk/Org.
- 
- MOD: DG-6892: Updated Home Club Notification text.
- Fix: Live: handicap adjustment ORNS #5008407
- Mod: ConnectorAPI: GetScorecardprintqueue does less subqueries in the hot path. Changed the join order to separate the inner joins and left joins
- Mod: API: Digital Scorecard: Enhance validation for minimum number of holes played for score to be acceptable for handicapping.
- Fix: ClubCMS: less GetCourseStats API calls for no reason and faster response time in tournament-course-stats because GetCompetitionRounds doesnt depend on GetTournamentOverview
- Reverse Merged revision(s) 56844 from Trunk/Shared/DotGolf.Core/Hooks/HookManager.cs: Mod: Core: HookManager no longer uses reflection to get hook constructor and parameters - leave that to autofac ........
- MOD: Pennants TV2: Implement Schedule API (add, update, remove Rounds and Contests) and Competition Delete functionality
- MOD: ClubCMS: Switch old Content controls to use CKEditor as default and make old (cute) editor as an option to use.
- FIX: CS0051: Inconsistent accessibility: parameter type 'IEnumerable<MarkerHistoryHole>' is less accessible than method 'MarkerHistory.CopyFrom(Marker, MarkerHistory, IEnumerable<MarkerHistoryHole>)'
- FIX: CS0051: Inconsistent accessibility: parameter type 'Score' is less accessible than method 'Score.CopyFrom(Score, DbConnection)'
- FIX: CS0051: Inconsistent accessibility: parameter type 'Organisation' is less accessible than method 'Organisation.CopyFrom(Organisation, DbConnection)'
- Fix: ClubCMS: don't send exception stack trace to the user lol
- FIX: CS0051: Inconsistent accessibility: parameter type 'MarkerHistory' is less accessible than method 'MarkerHistory.CopyFrom(MarkerHistory, DbConnection)'
- DOC: This xml comment covers a crucial bit of WHS specification weirdness, this comment *MUST* be legible in intelisense.
- FIX: CS0051: Inconsistent accessibility: parameter type 'Member' is less accessible than method 'MemberMerger.Merge(Member, Member)'
- DEL: Ok, ok, enough println, get back to work
- MOD: We don't even have a webconfig...
- MOD: Clean up debug println calls, *everyzing must be neet und tidy!*
- MOD: Remove core dependency (déjà vu)
- MOD: Reintroduce dgFooBar() calls.
- Fix: ClubCMS: golfconz Tournament Course Stats would not show (and throw exception) if less than 18 scores had been returned
- MOD: Try old build command.
- MOD: `println("DEBUG")`s for the win
- FIX: Revert rev55586 (past @david strikes again)
- MOD: Pro tip, always count your closing parens.
- Mod: Core: HookManager no longer uses reflection to get hook constructor and parameters - leave that to autofac
- MOD: This will fail when we get to the Unit test stage, but since it's not even getting that far let's try to do this manually first.
- MOD: Should already be built by this point?
- Fix: Live: POS no longer charges House Account immediately when processing a split payment - it waits until the sale is closed/submitted. #52020 This was a problem if a sale was paid in part by House Account, but the user closes the sale, and the payment was orphaned and never applied to the sale.
- Fix: Make pristine database builder happy?
- Mod: Removed ACLs for casual golf bucket access; we have disabled ACLs on the casual golf buckets and just use a bucket policy now - much easier to manage. Add: Stage bucket created for casual golf.
- Mod: ClubCMS: Golf Ireland don't want people emailing them or asking questions without going thru the contact form #5008190
- Upd: Amex: Updated Handicap adjustments from week 4 onwards.
- MOD: Is stealing my own work considered plagiarism? Asking for a friend... This Jenkinsfile definitely isn't just the results engine in a funny hat.
- MOD: In Soviet WHSAPI, you don't depend on Core, Core depends on you!
- MOD: Don't need bindings
- MOD: Do *NOT* promote whsapi in the Jenkinsfile, this is purely for building the client.
- Fix: ClubCMS: missing 20th score divider on new EG site
- Temporarily put WHS nswag build back into Core to appease Jenkins.
- DOC: I'll probably forget why I did things this way in the next hour. @future_yuri, here's some documentation, you're welcome :)
- MOD: ClubCMS: Change hero banner loader background color to white
- MOD: Allow conditionally joining CMemeber on the resigned date or not depending on the toggle.
- Add: Casual golf admin url for dev.
- Add: Bulk Email: Added Drafts and Systems Email settings control setup.
- Fix: Tourism: Club banner text overlap fixes.
- FIX: ClubCMS: Fix the hidden logo of England Golf website
- MOD: DG-7086: Removed unused  GP Template style slightly.
- MOD: DG-7086: Updated GP Template style slightly.
- MOD: DG-7086: Maybe don't declare sender twice.
- MOD: DG-7086: Updated email template for GeneralPlayScoreNotificationTask.
- FIX: DG-7086: Implemented fix to GeneralPlayScoreNotificationTask. SQL now filters members by HC.
- Add: API: #speed-of-play: Add new setting to control the accuracy of the location data that we want the app to receive.
- Mod: API: #speed-of-play: Add the ability to control the GPS location desired accuracy via the API - "AccuracyBest" by default.
- MOD: Change dataset variable name in preparation for de-datasetifying it
- MOD: Checking `member.date_resigned` is redundant, we only care about (and already check for) `cmem.Date_resigned`
- MOD: Checking `member.date_resigned` is redundant, we only care about (and already check for) `cmem.Date_resigned`
- MOD: I got this job because I specialise in making responsive CSS, how fitting that I forgot to do any on the first task I was given involving CSS......
- MOD: Prevent line break on punctuation.
- Add: Images binding for dotgolf.co.uk for England and Wales (for completeness)
- Mod: API: #flexi-payment-options: /load-slot-for-editing endpoint - Multi-payment options now enabled in production.
- Mod: API: #flexi-payment-options - Enable the following endpoints in production: /calculate-charges, /save-booking-changes, /save-booking-changes-confirm. Mod: Unit Tests: When an entry is already paid by the player or another person other than the owner, that entry should only be editable by that player.
- Mod: API: /load-slot-for-editing endpoint - #flexi-payment-options: If an entry has already been paid by the player (not the owner of the booking), marked that entry as read-only. Mod: API: /save-booking-changes-confirm - Change the Freshdesk ticket title.
- Fix: Live: TeebookingLateCancellationsReport no longer times out argh
- Fix: Live: TeebookingLateCancellationsReport no longer times out
- Fix: Live: TeebookingLateCancellationsReport no longer times out
- Fix: Tourism: Fixes auto add Url scheme for club website.
- Mod: Cleanup: Renamed transaction variable in ScoreService.aspx.cs in preparation for results in separate transaction.
- Fix: Tourism: Fixes to photo credit text and colour gradient.
- Mod: Live: Settings: #speed-of-play DotGolf-only section to enable/disable device location tracking while scoring on the digital scorecard.
- Mod: Org: SquadSelection report: uses celllayout because theres no annoying <hr/> that way
- Mod: Org: SquadSelection report subreport no longer breaks excel
- Mod: Put the nasty^H^H^H^H^Hcool pattern back.
- Fix: Core: remove excuse for Yuri to use unreadable code with better naming
- Mod: TestHarness: no more local function enumerable
- Fix: Core: remove excuse for Yuri to use unreadable code
- Mod: Org: SquadSelection report show comp/gp average score diffs inline (this took way too long to get working nicely)
- Fix: Live: CategoryMemberCountsReport ORNS and timeout
- Fix: Bulk Email: Code clean-ups to communication tab 'Settings' for header/footer email config addition.
- MOD: Clean up `using`s
- DEL: Remove nswag stuff that now lives in WHSAPI.Client
- DEL: Remove nswag generation for WHSAPI, I'm in the process of replacing the code generator and unless we make any changes to the api we don't need this client to be updated.... For now...
- ADD: Check box for including resigned members.
- Mod: Org: SquadSelection report show comp/gp average score diffs inline (this took way too long to get working nicely)
- Add: Extquery: new thing to allow subreports (via SubReportFormatter) to link off to the report they represent using a HyperlinkFormatter.
- ADD: Resigned member toggle, not implemented.
- MOD: Break up the tbScore hyperlink into it's semantic pieces, allow for easier modification without manually encoding URI escape sequences.
- Mod: ScheduledTask [DG-6915] Missing using.. sigh
- MOD: Clean up some whitespace.
- Mod: ScheduledTask [DG-6915] Fail... didn't commit this
- Fix: Live: if KO breaks, should not show non-Ireland clubs content from Ireland
- MOD: Make push package the "promote" step
- ADD: Jenkinsfile. Mostly ISVAPI with a sprinkling of ResultsEngine.Common.Model for flavour.
- Mod: Autogenerated poco classes.
- Add: New RSTeamPairing table for Pennants TV2
- MOD: Use version suffix from results engine.
- Mod: API: #stoke-o-meter: Disable hook when in production environment.
- MOD: ClubCMS: Switch old Content controls to use CKEditor as default and make old (cute) editor as an option to use.
- Mod: StatsDPerfMon: update to net472
- REV: Remove WHS client nswag generation and update client to use provided base class. TODO: add the nuget package so that this compiles.
- Fix: Path to deployment script was incorrect.
- MOD: Remove WHS client nswag generation and update client to use provided base class. TODO: add the nuget package so that this compiles.
- MOD: Rename WHSClient to ClientBase to make meaning more obvious in the core project which will inherit this class.
- ADD: Base abstract component to complement NSwag generated code.
- FIX: Namespace was still using core.
- Add: Images binding file for nz prod.
- Mod: WHSAPI: trying to fix build on jenkins round 2: WOOOOOOOOOOOOOOOOOOOOOOOOW
- Mod: WHSAPI: trying to fix build on jenkins round 2: back to 2019 tt.exe?
- Mod: WHSAPI: trying to fix build on jenkins round 2: i give up
- Mod: WHSAPI: trying to fix build on jenkins round 2: ok i think i found the issue
- Mod: WHSAPI: trying to fix build on jenkins round 2: breaking build really quick
- Mod: WHSAPI: trying to fix build on jenkins round 2: debug boogaloo
- FIX: Add data annotations reference.
- MOD: Add newtonsoft reference, needed in the generated code.
- FIX: The nswag doc has a hardcoded path as well, update it.
- FIX: Linking swagger json doesn't seem to work, says file not found, try using path explicitly.
- MOD: Yessss! Yeessssssss!!!! At last! An error message! Mwahahahahah!
- Upd: Amex: Set default to week 3.
- Fix: WHSAPI build on web7: moved tt file generation back to sqlproj
- Mod: WHSAPI: replace NoData.sln with a filtered solution and see if it works
- Mod: API: #speed-of-play: Tracking of device's location can now be turn on and off for a given club - this setting is OFF by default.
- Fix: API: Unit Tests: We should not be expecting a customer satisfaction survey being triggered if a score is submitted after the cut-off time (8pm).
- Fix? WHSAPI build on web7??? weird error now (code compiles )
- Fix? WHSAPI build on web7??? weird error
- Add Foreign Key to TBGroupBooking to UserSecurity
- Fix? WHSAPI build on web7??? not working
- Fix? WHSAPI build on web7??? back to old method sigh
- Fix: ConnectorAPI: build? nope
- Fix? WHSAPI build on web7??? yep
- Fix? WHSAPI build on web7??? this will not work i am psychic
- FIX: ClubCMS: Short term fix is to distinct the club website as there is no indicator which one Club Website is current production
- Mod: Autogenerated poco classes.
- Fix: ConnectorAPI: build?
- Mod: API: #speed-of-play: Device locations during a round are now saved in the DB.
- MOD: Remove target, I'm paring this down until it works, I'll build up from there if I'm still sane.
- Fix? WHSAPI build on web7??? OK WE'RE USING THIS NOW https://erikej.github.io/ssdt/dotnet/2022/03/07/ssdt-dacpac-netcore.html
- *** DFH CODE REVIEWED TO HERE *** MOD: ClubCMS: Apply iGolf branding to Member's only pages
- Fix? WHSAPI build on web7??? final attempt
- Fix? WHSAPI build on web7??? pass SSDT to msbuild properly
- MOD: Add and use a `StringIsNullOrEmptyException` for fluent null or empty checks.
- Fix? WHSAPI build on web7??? increase verbosity
- MOD: Update exception thrown from NullRef to ArgNull, re: code review from David.
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Fix? WHSAPI build on web7???
- Add: Futures Whakatipu domain to ClubCMS.
- Add: Futures Whakatipu domain to nginx.
- MOD: Bump nswag version
- MOD: Un-revert nswag changes, now that the VS path is corrected.
- Upd: Bulk Email: Validation update for club or association logins.
- MOD: alhkjasd kjasdkasd j sd  ds j
- DEL: Remove my changes, temporarily
- DEL: Remove version suffix, causing trouble.
- ADD: NSwag build package ref.
- MOD: Update framework versions to broadest that might be needed.
- Mod: ScheduledTasks: now support scoreintents with a marker specified.
- Mod: Removed the TBClubSettings check from Adweb; aw_TBClubSetup does this insert when it is run.
- ADD: Baget config (I hope) from results engine.
- ADD: NSwag build targets from core.
- ADD: Bring NSwag file over from core.
- ADD: New project to hold the code generated by NSwag for WHSAPI client.
- MOD: ClubCMS: Implement black theme header for iGolf logged in users in EG website
- Fix: UnionAPI: Api_Addscore sql timeout
- Added: Bulk Email: CRUD workflow complete.
- FIX: Prevent the cookie consent overlay from flashing on screen during slow connections when consent has already been given.
- Mod: ISVAPI: score intents load with markerUID
- Mod: ISVAPI: score intents save marker info now
- Mod: Autogenerated poco classes.
- Add: sql: scoreintent column markerid for ISVs to add marker
- MOD: Ok, actually make the pop up and it's functionality.
- Mod: Autogenerated poco classes.
- ADD: New columns for CompetitionContest able
- MOD: ClubCMS: Update Page Title for Resource Topic and Details pages
- MOD: ClubCMS: Update Page Title for Resource Topic and Details pages
- Fix: API: #speed-of-play: Missing from previous commit.
- Fix: API: Tracking endpoint - Remove "Controllers" from namespace declaration.
- MOD: ClubCMS: Added rRedirectToUnionPublicSite control
- Add: API: Tracking endpoint: #speed-of-play: Initial commit.
- ADD: Terms of use property to cookies.
- ADD: Basic properties for cookie consent control.
- Fix: ClubCMS: rMemberSignupConfirmationV2: Signup went into infinite loop when trying auto-fix the gender mismatch between the submitted gender (during application) and their current gender in the DB. #52071
- Mod: CustomerSatisfaction - Now validates the user and redirect to the application. - Styling changes to center the card in the middle of the screen. Added: Core - Add SSO class to Core so it is centralised. TODO: Change redirect URL to staging site when this has its own builder and deploy so we can see how it all works
- Mod: Live/Org: tracking for who creates/deletes handicap adjustments
- Add: Org: tracking for who creates/deletes handicap adjustments
- Mod: Autogenerated poco classes.
- Mod: Sql: handicap adjustment table needs memberid column
- MOD: Begin overlay.
- ADD: Basic properties needed for all controls.
- FIX: Control part of the path is implicit.
- FIX: A typo that has been bugging me.
- Mod: Autogenerated poco classes.
- Mod: Sql: new table to track who changes handicap adjustments
- MOD: Add (temporary) debugger to GA tracker.
- MOD: ClubCMS: Implement SSO from Club website to golf.co.nz
- Fix: ISVAPI: tests after createMarker parameter change
- Fix: ISVAPI: tests after createMarker parameter change
- Mod: ISVAPI: swaggerfile
- Mod: SystemEmailProvider: set sensible defaults on Email Subject and Sender if we don't fetch them from the DB
- Fix: Core: tests: marker caching issue fixed without clearing MemoryCache (because it's static right now)
- Fix: ScheduledTasks: Scoreintentfollowup tests
- Fix: ScheduledTasks: SenderName on ScoreIntentFromIsvFollowup emails
- Fix: ScheduledTasks: SenderName on ScoreIntentFromAppFollowup emails
- ADD: Create cookie consent control in database.
- Mod: UnionAPI rate limit bumped to 15,000 to get around OCS+Club Systems issue (CS needs to stop calling us for every past golfer ID every day - I've asked them to fix this before Oct 4th, 2022, at which point we'll drop the limit down again.
- Add: @rommel Half baked code to make club website login to national site handicapping work properly (i.e. you login at Remuera GC, then click Handicapping and it takes you to the national site, still logged in).
- MOD: ClubCMS: EG footer remove period as per Ash
- ADD: Basic cookie consent control.
- Mode: CustomerSatisfaction Loading indicator when the network is slow
- MOD: ClubCMS: EG footer remove commas as per Ash
- Mod: ISVAPI: increase search results returned by visitor search to 50 because handicap master is complaining and its not worth it
- Mod: Org: "Province" -> "Region" in a report (GI asked us to and only they use the filter) #5007833
- Mod: ISVAPI: increase search results returned by visitor search to 50 because handicap master is complaining and its not worth it
- Add: @rommel Half baked code to make club website login to national site handicapping work properly (i.e. you login at Remuera GC, then click Handicapping and it takes you to the national site, still logged in).
- ADD: Begin cookie consent control
- Fix: Core: EmulatedWHSClient build
- Mod: WHSAPI: create adjustment returns a guid
- Mod: UnsatisfiedScoreIntent+GeneralPlayScoreNotification tasks: fix errors when club has no contacts, and template is missing
- Fix: ISVAPI tests: stability mods for Jenkins
- Fix: POS: double-refunding house account sales
- Mod: Core.Tests: DatabaseBuilder remove excess logging
- MOD: Change config profile back, oops, my bad.
- MOD: "AHHHH  MY EYES" - marcus
- Mode: CustomerSatisfaction More clean up for all components and CSS
- Add: CustomerSatisfaction Added assets for voting smiley icons Mod: - Minor clean up for WillNotParticipate.vue on un-needed props.
- Mod: sql: email templates for GP scores + unsatisfied score intents handicapper emails are now configurable by the union
- Mod: Core.Tests: DatabaseBuilder starts logging again hopefully
- Mod: CustomerSatisfaction Logging Non-Answers due to non-participants UI update
- Mod: UnsatisfiedScoreIntent: Only notify of scoreintents for competition play because GP scores are handled by scoreintent followup
- Fix: API: #competitions-in-app: Hard-coded registration id filter (this code is not used in prod so no one is affected).
- Mod: UnsatisfiedScoreIntent task: stagger emails to hopefully avoid them getting flagged as spam
- MOD: Pennants Tournament V2: Implement adding of new team
- Mod: Core.Tests: back to Trace.WriteLine for DatabaseBuilder hopefully
- Mod: ISVAPI tests: add console logger again better
- Mod: ISVAPI tests: add console logger
- Mod: ISVAPI unit tests better messages about debug-only tests
- Mod: CustomerSurvey Working state with some animations TODO: Clean up files and clean up animation so it doesn't slide the question up during transition
- Mod: Live: Nuked [LoveGolf Tool Kit] Link Tab from LoveGolf in live
- FIX: I don't have aws set up for unit tests so autofac loses its nut looking for aws services that shouldn't have been registered.
- Fix? ISVAPI unit tests fail less
- Fix? ISVAPI unit tests failing on jenkins for some #%^ reason
- MOD: Re-add rest
- Mod: UnionAPI: re-add project references to check if it fixes anything
- Mod: unionapi: Jenkinsfile - should run with dotnet publish now
- MOD: Remove and re-add core.tests through VS.
- MOD: Move script strictness check to error handling logic so it's meaning is clearer.
- Fix: ISVAPI: build?
- Add: Live: Teebooking: #flexi-payment-options - Add ability to turn on/off multi-payment options for a club.
- Mod: ISVAPI: tests remove webconfig transform
- Fix? ISVAPI unit tests failing on jenkins for some #%^ reason
- DEL: De-reference DotGolf.Shared
- Mod: ClubCMS #51980 increase time so it does what it needs to do nicely
- Mod: ISVAPI: Tests now log to actual xunit output helper
- Fix: Amex: Have it harcoded for now, leaderboard default week base on current week.
- Mod: ISVAPI: feeble attempt at getting trace logging to work again
- Mod: England: public website feature flag
- Fix: Amex: Fixes default date range of current week for leader board data display.
- Mod: ScheduledTasks: ScoreIntentFollowup moved entirely into the scheduledTasks solution
- Fix? ISVAPI unit tests failing on jenkins for some #%^ reason
- Mod: ScheduledTasks: ScoreIntentFollowup moved entirely into the scheduledTasks solution
- Mod: API: #flexi-payment-options: Ability to turn on/off the multi-payment options in the app. This is currently turned off for all TBP clubs so we can roll this feature to a selected club and monitor the results.
- Mod: ISVAPI: tests stop fail please
- MOD: Remove debug lines from test. *ominous* they have served their purpose...
- MOD: Add debug lines to test.
- Mod: ClubCMS #51980 Toggle the select list to select the right region and trigger so that it can load the relevant data for the region's page that is loaded.
- Upd: Amex: Defaulted leader board filter date to week 2.
- MOD: Update package deployment path for ISVAPI as well.
- MOD: Update package deployment path.
- MOD: Remove reference to shared, not used in Union.
- Mod: Autogenerated poco classes.
- ADD: Added ClubId to RSEntry
- MOD: Look in `/Release` not `/Debug` for test dlls, (thanks @Marcus)
- MOD: Update test dll path (but for ISVAPI this time)
- MOD: Update test dll path.
- MOD: Convert ISVAPI to modern Jenkinsfile and de-externify it.
- Fix: WHSAPI: when someone is resigned and has no home club, don't try return their score intents - was throwing ORNS
- FIX: Specify test output directory.
- FIX: And another path I missed ><
- FIX: Test bin path still was using old API template.
- MOD: Resolve ambiguous binding.
- MOD: Use shared AspNetCoreRateLimit project.
- ADD: Bindings.
- MOD: Replace existing jenkins file with standard template.
- Mod: ISVAPI: more tests for firstname/lastname search
- Fix: Vortex deploy API will no longer throw an error if you try to notify it in an environment where there is no Vortex host.
- FIX: Site name should be lower case to match bindings lists.
- MOD: ClubCMS: Remove tags in the url for News Articles for EG
- FIX: At least one println is needed in the unit test stage so that there is at least one step specified, no need for a debug line here, however.
- MOD: ClubCMS: Get tags from News Article and added default images
- DEL: Debug statements no longeer needed, jenkins build reaches the promotion stage consistently now.
- MOD: Update test assertions to remove false positives and dead code. Thx resharper.
- DOC: Note how a seemingly unused construct is used and why.
- Mod: ScheduledTaskTests: desperate hack to try get tests to pass on jenkins
- FIX: Inconsistent naming.
- MOD: Simplify bearer authentication.
- MOD: Document resharper suggested optimisation. Unnecessary by design, but may not be obvious so I've explained the enumeration strategy and suppressed the the refactoring suggestion.
- FIX: Add surprisingly missing assertion.
- DEL: Unused regex.
- MOD: Document and suppress misleading resharper for unusual singleton structure.
- FIX: Nullability annotations.
- FIX: Broken doc comment.
- MOD: Disable resharper that would cause build error.
- FIX: Bad test data.
- MOD: Optimise `using` import statements.
- MOD: Use implicit typing for better conversion.
- MOD: Use consistent naming.
- MOD: Suppress resharper warnings on models that need specific naming conventions. i.e. for json serialisation.
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Remove tags in the url for News Articles
- MOD: ClubCMS: News group added default images
- Mod: WHSAPI: New PCC formula in full swing
- Mod: ISVAPI: move controllers to use IHookManager interface
- Fix: ClubCMS: allow welsh home members to sign up for igolf
- Fix: England: Redirect to the new privacy URL.
- Mod: CustomerSatisfaction DG-6776 Split UI into components and got it into intractable state. More playing to come.
- Add: englandgolf.org to ClubCMS bindings.
- Add: englandgolf.org domain for UKProd.
- Fix: WHSAPI: PCC calc explanation looks weird in the logs because of a missing line terminator.
- MOD: De-extern-ify union API.
- Fix: TestBase: should not reset configprofile in the TestBase constructor because of concurrent tests 😬
- Mod: Core: Moved ScoreIntentFollowupTests to scheduled tasks project so that it stops triggering ALL THE BUILDS
- Fix: scoreintent followup: entering a penalty score on the last day a marker is active was failing to create the penalty score
- MOD: Update package-deploy.ps1 path.
- Fix: Scheduledtasks: score intent followup now handles when there's no valid marker found at the first course we check and the club has multiple courses
- Fix: Live #51674 Fix where adding member's guest via kiosk not showing the correct Green Fee.
- MOD: To reduce testing complexity, instead of nesting tests inside of each other and having to keep track of massive assertion trees, inject the subtests as dependencies and mock their behaviour.
- MOD: Make the test virtual. Why? Oh boy, don't ask, I'll start giggling and won't be able to stop.
- Fix: DigitalScorecard: actual gross score calc was not correct for 18h scores with a not attempted or pickup in the last 9h
- MOD: No longer skip test.
- MOD: Allow invasive test test to run, DO NOT let invasive test run yet.
- Fix: Scheduledtasks: score intent followup remove magic number and fix actual gross calculation which was wrong for 18h scores
- MOD: Fix name generator.
- MOD: Apply the comparison overloads to all models.
- ADD: Provide attribute based equality comparison. There is a high chance that an endpoint may obscure certain fields, so when comparing a json payload returned by an endpoint, assume they are the same if the `fooID` field matches. Further equality checks may be preformed manually.
- Fix: Scheduledtasks: score intent followup would fail to submit penalty scores for back 9 markers
- DEL: Legacy `_deploy` directory.
- ADD: Bindings lists.
- Mod: Autogenerated poco classes.
- Mod: sql: ScoreIntentFollowup is a temporal table now because sometimes it's helpful to trace history to see why a scoreintent has not been resolved.
- MOV: Bring bindings to the jenkins root.
- FIX: Reflect path change in shared reference paths.
- MOV: Bring the images project up a level to get rid of the `Trunk` path.
- DEL: Redundant Jenkinsfile duplicate.
- MOD: Add missing debug line.
- FIX: Revert solution root path.
- FIX: Update solution root.
- MOD: Sprinkle a healthy does of `println "DEBUG..."` statements.
- FIX: Move Jenkinsfile to solution root, not project.
- FIX: Nope, not that one either.
- FIX: Maybe it's this one?
- FIX: Nope, wasn't that one :/
- FIX: Images are in a funny directory structure, so one of the paths isn't happy, is it maybe this one?
- FIX: Prevent empty step
- ADD: Jenkinsfile
- MOD: Remove Core extern and replace with shared reference.
- ADD: Begin invasive tests. Still needs work, is currently disabled.
- MOD: Remove unused test data.
- Fix: Bulk-Email: Colour palettes model added.
- MOD: Update test data references.
- ADD: Provide invasive test data.
- ADD: Date randomiser.
- MOD: Clean up authentication tests.
- MOD: Make `GetGolferScores` test theory return the results it finds so it can be used in invasive tests as a sub-test.
- MOD: Clean up arrange blocks.
- MOD: Remove temporary fail safe to prevent invasive tests from being run by accident.
- Add: Bulk Email: Added new tab settings for colour settings v3.
- Fix: Amex: Default week date query.
- Fix: PGA site: sql injection
- Fix: PGA site: sql injection
- Fix: PGA site: sql injection
- Fix: Live: hack GP scores report to do tz conversion properly in CSV reports
- MOD: ClubCMS: Quick fix to ignore voucher system email for NZ
- FIX: Correct mock injection and verification.
- ADD: Random decimal generators.
- FIX: The minute I clicked commit I realised I misspelled the file name *facepalm*
- 
- Mod: WHSAPI: error msg typo
- Fix: Live: report erroring when trying to export to excel if it contained a LocalDateTimeFormatter
- FIX: Cut out all references to the base path to make endpoint URI construction entirely data driven, meaning future changes are as simple as changing a const or a config value. This has the added benefit of separating configuration from test implementation entirely.
- Mod: WHSAPI: casing change in sql proj to remove build warning
- ADD: Start invasive tests.
- MOD: To prevent changes to the endpoint paths from breaking tests that hardcode them, inject the endpoints in to the tests after taking the endpoint paths into account.
- Fix: Org: GI JuniorGirlsMedalClubMedal report times out - now we fetch scores much faster. this hits WHS somewhat hard but not enough to cause issues especially given its not run frequently #5008026
- Fix: Org: GI JuniorGirlsMedalTopN report was crashing when someone played a score off a pending handicap and that was their only eligible score for the month #5008026
- MOD: ClubCMS: Increase resource hub control bottom padding
- MOD: ClubCMS: Resource hub decrease padding in between blocks
- MOD: ClubCMS: Fix load more UX issue
- MOD: ClubCMS: Resource hub tile to partially show next slide
- FIX: Due to the USGA making unannounced (and hopefully unofficial) changes to the WHS specification, I've made the endpoints highly configurable in case the test harness needs to make a hard left turn to keep up with the spec changing all the `/golfers/*` endpoints to `/golfer/*` without notice.
- Fix: WHSAPI: concurrently open DB connections causing excess user connections. Removed a couple PetaPoco uses because i don't trust it
- ADD: Begin invasive tests, add new test data field and start new GolferTests implementation.
- Fix: Amex: Fix default leadeerboard display when login member has no Amex results yet.
- FIX: IDE0005: Remove unnecessary using directives
- ADD: Handicap tests
- MOD: ClubCMS: Fix topic navigation
- MOD: ClubCMS: RTE center align the text inside table th
- MOD: Add distinct condition checks, this is a rare edge case
- MOD: ClubCMS: Align RTE ordered list in resource-hub-detail/styles.css
- Fix: Org: GI JuniorGirlsMedalClubMedal report times out - now we fetch scores much faster. this hits WHS somewhat hard in terms of user connections but not enough to cause issues, especially given its not run frequently #5008026
- Mod: Bump htmlToPdf to Node 16.x so AWS will stop whinging.
- Fix: Org: GI JuniorGirlsMedalClubMedal report was crashing when someone played a score off a pending handicap and that was their only eligible score for the month #5008026
- MOD: Optimise linq
- FIX: Cover subtle edge case
- ADD: Tests for potentially empty golfer arrays.
- MOD: Cleanup randomisers / make them less poorly named
- FIX: More whitespace.
- FIX: Whitespace
- ADD: Arbitrary endpoint test.
- ADD: Linq repeater.
- MOD: Make the counter and region ISO codes serialise as strings, not numbers.
- Fix: Live: ts build ??
- Fix: Live: ts build
- Fix: Amex: Login member THE CLUB ranking value.
- Mod: Live: Ireland can now create new users and give them admin permissions on their website
- Fix: Shared: build: file is back now
- Fix: Shared: build: file was included but did not exists
- Fix: Live: score listings showing OCS's username rather than ocs-scotland
- Fix: Live: GP score report dates in localtime where applicable #5008006
- MOD: Allow random arrays to be size defined
- FIX: RCS1037, Remove trailing whitespace.
- FIX: RCS1036, Remove unnecessary blank lines
- FIX: RCS1038, Remove empty statements (i.e. trailing semi colons)
- MOD: Optimise test data generators to reduce exponential data sets while preserving high test coverage.
- ADD: Enum randomiser.
- Fix: API: SurveyScoreInserted hook not triggered - possibly, I didn't add this in the DotGolf.Shared.csproj but the file was already committed to SVN. #stoke-o-meter.
- Add: new feature flag for Public Website so we can make it easier for unions to create their own users to edit site content
- ADD: Test golfer searching.
- MOD: Use better randomness for test data.
- MOD: Use more semantic skip condition.
- mod: sql: removed new association product for public website - we can actually just put this in the config profile features
- Fix: Amex: Fixes member ranking in THE CLUB, leaderboard category display, and mobile view.
- Add: sql: new association product for public website
- ADD: Array randomiser.
- ADD: Randomness extensions.
- Mod: API: MessagesController: #stoke-o-meter - Ability to show a different title per message when the user views the survey form in the app.
- Fix: API: MessagesController: #stoke-o-meter: /view/message endpoint - Should be checking LinkType instead of message code. Mod: API: MessageRec: Removed "MessageTypeCode" - unnecessary.
- Mod: API: MessagesController: Add support for 'Survey' message type. #stoke-o-meter
- MOD: TV2: Implement Pennants setup competition (create/update)
- Fix: Org: Email is required is the tickbox for sending email updates is checked when creating new tournament entries
- FIX: ClubCMS: Hide Edit News Article on News Details page initial load for England Golf
- Playing with ResultsEngine jenkinsfile
- Playing with ResultsEngine jenkinsfile
- Mod: Abort (NOT_BUILT) results engine job rather than failing it.
- MOD: Add search by name tests.
- Add: Hook: Add SurveyScoreInserted hook to trigger the customer satisfaction survey after a round. #stoke-o-meter Mod: Unit Tests: Improve unit tests around score submission thru the app and customer satisfaction survey hook.
- MOD: Use simpler test data sets.
- MOD: Consolidate test data.
- Fix: ISVAPI: member hooks not being fired #5007988
- Mod: ISVAPI: Logs are clogged with NoValidTournamentsFoundExceptions, so from now we only log exceptions for actual internal server errors.
- MOD: Generalise the tests to increase coverage.
- Fix: Org: error setting up tournament if TournamentAPI url not defined
- Mod: MailerService DG-6960 Extend the feature flag to hold settings for MailerService so other unions can use it when required with their own cool settings. NoUnitTest :O
- FIX: Update path to test dll.
- Mod: ScheduledTask [DG-6915] - Moved FreshDesk Ticket Sync into ScheduledTask from it's own service. - Added FreskDeskService as a feature flag so if it can be enabled and credentials can be defined in any union.
- Mod: ISVAPI: Logs are clogged with NoValidTournamentsFoundExceptions, so from now we only log exceptions for actual internal server errors.
- Fix: Navigation caching reinstated, someone removed it while debugging something else. Mod: Moved LINK REL tag for navigation CSS to above the HTML hoping that this might speed up the css loading for the nav.
- MOD: Restructure solution file.
- MOD: Add build properties file.
- Fix: Bulk invoice email code got borked during the live-org merge; email branch got thrown away.  Reinstated.
- MOD: Trigger rebuild
- MOD: Add debug line
- Fix: WHSAPI: E20 tech spec v1.2 PCC formula implemented with cutover at 2022-08-23 00:00:00 local time (so monday's scores will be processed with the new formula)
- Mod: WHSAPI: E20 tech spec v1.2 PCC formula implemented with cutover at 2022-08-23 00:00:00 local time (so monday's scores will be processed with the new formula)
- FIX: Pro tip, you can drag and drop files from explorer to VS, but for heaven's sake don't!
- Add: Products: Add new "Customer Satisfaction" product.
- FIX: Add bindings lists
- MOD: Test hunch
- MOD: Move debug line
- MOD: Add debug line to Jenkinsfile
- MOD: Rebuild please
- MOD: Rebuild please
- DEL: Yeet the extern
- Fix: Amex: Fix to default category of login member in leaderboard, and showing "The Club..." menu in mobile.
- MOD: Remove example test w/ db connection, I'll reference this later
- MOD: Clean up tests. Also looking into sql error in test db setup :/
- Mod: SSO: tests running???
- Mod: SSO: tests running???
- FIX: Revert the yikes
- FIX: Set Microsoft.Bcl.AsyncInterfaces to v5
- FIX: Just bring across the versions from DotGolf.Core
- FIX: Nuget package conflict.
- FIX: Ah might as well update these too while I'm here.
- FIX: MSB3277: Autofac has a different version in DotGolf.Shared.
- MOD: TV2: Rename new Tournament in Core data to CoreTournament for now to fix build errors due to conflict to the existing Tournament class
- ADD: Simple unit tests, more should be added later, but at least this is enough to have some tests in Jenkins.
- MOD: Update .sln, trying to fix MSB3202
- MOD: Reuse the DotGolf.API/Jenkinsfile to create a new skeleton Jenkinsfile.
- ADD: Empty Jenkinsfile.
- MOD: TV2 Pennants: Initial implementation for APIs, added Tests for Creating Tournament, Competition Group and Competition. Implement the APIs in the front-end as well.
- Mod: API: Digital Scorecard: Provide the appropriate error message for a) API did not receive the user's location b) Club does not have the proper coordinates set and c) User is outside the allowed distance from the club's location.
- Fix: Live: Xero added a new organisation type (ULTIMATE) and it broke our API client. Updated yaml from latest #51960
- MOD: Microsoft's implementation sucks, so I built my own.
- MOD: Use microsoft's own implementation for "stringifying" http statuses.
- FIX: Prevent david from having a heart attack.
- ADD: Test to check that searching without any parameters returns a bad request.
- ADD: Test data for http status codes.
- Fix: Amex: Login member ranking position query fixes.
- ADD: Test the test that tests arbitrary golfer endpoints.
- MOD: Change SSO project to use shared reference over externs.
- MOD: Revert shared reference change. (Keeping in history)
- MOD: Temp: change references to `../Shared`.
- Fix: Live: Subscription Voucher Report: Downloading Flexiclub vouchers now uses the LoveGolf branding. #51711 Fix: LoveGolf: Moving away from wkhtmltopdf.exe. for generating PDF files - upgraded to using htmlToPdf AWS lambda function. Mod: Shared: iGolf voucher templates - Rename template filenames 1) From Shop/VoucherRendering/Templates/VoucherTemplateEnglandIGolf.html to Shop/VoucherRendering/Templates/VoucherTemplateENG.html 2) From EmailTemplates/ShopReceiptEnglandIGolf.txt to EmailTemplates/ShopReceiptENG.txt.
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Reorder of commit
- Reorder of commit
- Reorder of commit
- Mod: API: single line 'using' change to trigger API build to test jenkiesfile
- Fix: ResultsEngine jenkinsfile - wrap the whole bloody thing in a script
- Reverse Merged revision(s) 56159 from Trunk/DotGolf.ResultsEngine: MOD: DG-6937 Remove unused `using` imports (this should trigger a rebuild when building DotGolf.API) ........
- Fix: resultsengine jenkinsfile but actually its not fixed i dunno
- ADD: Score retrieval tests.
- Mod: Live TeeBooking [DG-6739] GroupBooking History Add Column UserSecurityId to TBGroupBooking
- Mod: Live TeeBooking [DG-6739] GroupBooking History Update [TBGroupBooking] Enable Temporal Table and row version history
- Mod: Live TeeBooking [DG-6739] GroupBooking History Update [live_GetBookingHistory] procedure to have group booking history included if any
- Fix: Clubcms: amex leaderboard ordered by lowest stableford pts rather than highest
- Mod: Live TeeBooking [DG-6739] GroupBooking History Add UserSecurityId to TBGroupBooking
- Mod: Live TeeBooking Remove unused directives
- Mod: Live TeeBooking Remove unused directives
- Fix: Clubcms: amex error for new people when they are logged in
- Fix: Clubcms: amex error for new people when they are logged in
- MOD: Fix assertions, there is a 10000% chance that their are multiple golfers with the same name.
- Mod: Autogenerated poco classes.
- MOD: TV2: Added MatchplayShowInfoDaysPriorToRoundDate for Pennants use
- ADD: Tests for `GetGolferByIdInPath`
- MOD: Add region and country assertions.
- Fix: Clubcms: amex error
- ADD: Provide tests for `GetGolferByIdInQuery`.
- FIX: assertions.
- Fix: Amex: Leaderboard query fixes, showing at least 1 round played by golfers.
- Fix: Live: RoundsPlayedByMemberReport causing timeouts
- Fix: CRMAPI: were not sending Counties for members (Address3). Turns out this lives in the City column...
- Fix: CRMAPI: were not sending Counties for members (Address3). Turns out this lives in the City column...
- Mod: Org: "Province" -> "Region" in a report (GI asked us to and only they use the filter) #5007833
- Fix: Amex: Fixes undefined value of ThirdpartyId entity.
- ADD: `string.IsNullOrEmpty` extension.
- FIX: Assertion messages.
- FIX: Broken assertions.
- ADD: Fluent extensions.
- Fix: Noticed a small thing in the ResultsEngine Jenkinsfile, see if this fixes the build...
- Fix: Casual Golf API was still using ClubRepository.cs
- Fix: ISVAPI: tests: countries not disposing correctly between tests
- Fix? Live: settings explorer no longer throws errors but it still unhappy and slow
- Fix: Amex: Fixes more hack re-direct of Amex pages, and fixes query warnings.
- MOD: Test your tests!
- Fix: ISVAPI: tests. also have DatabaseBuilder recreate out DB if its out of date.
- Fix: unionapi score tests disposal
- ADD: Test scores and add new models.
- Fix: UnionAPI tests: not disposing of regions correctly - causing errors when trying to dispose country
- Fix: Live: scores entered for casual golfers no longer throw error when firing hooks
- FIX: Correct deserialisation.
- Fix: Amex: Member overview fixes when there is no last played data.
- ADD: Assert that golfers have handicaps.
- Un-break my build Please compile me again Undo this hurt you caused When you walked out the door And walked out of my life Un-cry these tears I cried so many nights Un-break my build
- Fix: Core tests: region disposal wasnt working correctly
- ADD: Add handicap retrieval tests.
- Mod: Shared: kill ClubRepository.cs :D
- Fix: Live: Hole stats report returns only live clubs, and in the correct order
- Fix: Core: Unit tests build after redis conn builder refactor and course change test mod
- Fix: Live/Org: ORNS when starting up live/org in Ireland
- Mod: Live: flexi membership language term for NZ fixed casing
- Mod: Live: updated Wales flexi membership language term for Wales Golf
- MOD: DG-6937: Move rebuild logic to the results engine. Jenkins will always trigger the build, but unless the common model was changed (or a manual build was triggered) the build will just return early, leaving the last successful build as the "current" build.
- Mod: Tests: Redis connection builder now gives info on how to get redis for windows if you don't already have it.
- MOD: DG-6937: Trigger rebuild (to see if changing the common models is detected)
- MOD: DG-6937 Remove unused `using` imports (this should trigger a rebuild when building DotGolf.API)
- ADD: Moar `println`s
- MOD: Hello syntax error my old friend.
- MOD: Use a closure for the file list instead.
- ADD: Add the jenkins file to the solution so it shows in VS.
- MOD: Pop a println for debugging.
- DEL: Thanks past Yuri :)
- MOD: Check if any of the changed files contain "DotGolf.ResultsEngine.Common.Model" in their path. Only rebuild the Results Engine if those files are changed.
- Fix: Core: Course change unit tests failing because of missing db countryid and whs uids
- ADD: Get list of change file paths.
- Fix: Kounta: House account refund crashing due to an ORNS bug. Add null check before doing a string replace on the Kounta order payment @ref.
- MOD: Add git conversion TODO / note to future Yuri.
- MOD: Add check for any changes in the entire build. This is not specific enough yet.
- MOD: Outline plan of attack.
- MOD: Begin working on the Jenkins file to make building ResultsEngine conditional on if the common model has been updated.
- Mod: Org: performance mod for comp/general scores report - don't page their score history past the date we need them for
- Fix: DG-6913: Fixes average scores of casual golfer between two different platform (i.e., "My Overview" and "org" page).
- MOD: Update swagger to cover new endpoint.
- ADD: Add better assertions and negative test cases.
- MOD: TODO: Add configurable rate limiting.
- MOD: Remove half-built golfer search endpoint. This is a do later.
- Upd: Amex: Activating scheduled task for Stableford shootout.
- Fix: Trailing blank on GO statement
- Fixes: Amex: Fixes seamless page re-direct, and hide "The Club ..." menu from casual golfers.
- Add: Voucher templates for email and receipt. Commit these files first so I can use this in Live and Casual Golf API projects. ShopReceiptENG.txt is a copy of ShopReceiptEnglandIGolf.txt. Add: Core: Term for flexi membership.
- Mod: UnionAPI: interop scores are handicapped now.
- Mod: Autogenerated poco classes.
- Mod: sql: update script so unit tests stop failing again
- Mod: sql: update script so unit tests stop failing again
- Mod: sql: update script so unit tests stop failing
- Mod: sql: update test DB schema
- Mod: sql: update scripts for tests - should be creating all well known associations at the same time
- Mod: Autogenerated poco classes.
- MOD: Update Tournament Season Table
- Mod: Live GI DG-6908 Make this link open a new tab and changed link text
- MOD: Update Tournament Season Table
- Mod: Live GI DG-6908 Show the GI category help link to explain what member categories are -> static link to their provided resource hub page.
- Mod: UnionAPI: better validation around score posts expecting a GolferUID GUID rather than a GolferID member number
- *** DFH CODE REVIEWED TO HERE *** Mod: Core: Region pocotable - Country object not nullable (theres a Foreign Key enforcing it)
- Fix: Core: EmulatedWHSClient broken after adding region endpoints
- Add: WHSAPI: region endpoint so we can get scottish courses/regions into WHS
- Fix: ExtQuery: UnattendedGreenFeePayment SQL - filter by deleted date
- Mod: Live Only super admin - internal login can turn this feature on [Pay by house account for comp entry]
- Add: `client_id` set up for accreditation (only dev and stage environments)
- MOD: Use custom client details for test harness.
- Mod: Autogenerated poco classes.
- MOD: Pennant Tournament: Added new Tournament season table and update Competition Group table
- MOD: Allow 501 not implemented on all requests in non-strict mode.
- MOD: Update test data to point at local host for local debugging.
- MOD: Filter out and shuffle all search parameters.
- FIX: Use cleaner assumption method.
- ADD: Add theory to check searching by golfers works as expected.
- ADD: Provide search query parameter test data generation.
- ADD: Provide a `SelectStrings()` Linq extension.
- MOD: DG-6890: Updated Email Verification Templates EG image link.
- MOD: Document test data formats.
- Add: DG-6890: Updated Email Verification Templates for BTInternet reasons.
- Fix: Org: CompetitionVsGeneralScores report not filtering by club
- ADD: Add a dummy implementation of /golfers/search, it currently returns unimplemented.
- MOD: CTRL + R, CTRL + G
- MOD: TV2: Implement keyboard selection in Member Search
- Mod: UnionAPI: Support hole-by-hole interunion score return without crashing - fixed clubid inserts
- Mod: UnionAPI: Support hole-by-hole interunion score return without crashing
- Mod: Org: dont create clubs with clubid over 10000000 - this is reserved for clubs inserted from other unions
- Fix: Live DG-6850 #50583 Fix cart booking for admin tee booking. When there is only 2 carts available it falls over and won't let anyone add carts to players to exercise the 2:1 rule. This is part one of many fixes just thought I should add this yolo UI fix for now... yes its ugly but it'll get better when I fix other bugs for cart booking... Reiterating that this only affect 2 available cart bookings and not 1 or 3+ so whatever bug is there is still there.
- Add: Casual Golf: package-deploy.ps1
- Fix: Whoops, returned extra result set in these procs.
- Add: Casual Golf Admin bindings and Jenkinsfile.
- Mod: Autogenerated poco classes.
- Mod: Sql: UnionAPIThirdPartyId column for club table because UnionAPI can create new clubs based on score we get sent from Scotland etc Mod: sql: FK for ThirdPartyId on region table
- Mod: Autogenerated poco classes.
- Mod: Sql: CreatedByThirdPartyId column for Region table because UnionAPI can create new regions based on score we get sent from Scotland etc
- MOD: Fix query parameter name.
- MOD: Correct path queries and add additional tests.
- Mod: Autogenerated poco classes.
- MOD: Strengthen assertions.
- Mod: Sql: IsoRegionCode column for Region table because UnionAPI can create new regions based on score we get sent from Scotland etc
- Add: Casual Golf: machineKey needed in web.config since we load balance now.
- Fix: Casual Golf: Web.config changes to use Redis backed session.
- Mod: Casual Golf dev bucket name updated (because we want dev buckets in dev, not in prod .........)
- MOD: Sanitise test data.
- MOD: Remove redundant assumptions, assertion will cover the same check and be more expressive.
- FIX: Correct parameter names.
- MOD: Improve error reporting and make tests stricter.
- FIX: Correct path for golfer tests and add additional verification.
- Mod: CG Admin: Removed crappy V8 bundling, replaced with dotLess. Fix: Casual Golf: Incorrect crypto key used to encrypt password information when logging in.
- MOD: Separate test data provided by the appsettings.json from random generated test data.
- Add: Amex: Added disclaimer notes in sign-up popup form.
- MOD: Prevent timeouts, the test harness could potentially take ages to run and Xunit may start an async test and then not let it finish for any length of time.
- MOD: Shrink repetitive test data to be less loud.
- MOD: Revert implicit base URI, I suspect this is causing the path to be lost.
- Mod: Casual Golf: Since we can't seem to do @import "stuff.less" in a less file, I avoid this by bundling all the bootstrap less components (in order).  This avoids having to do directory change, which was ugly and dangerous. Note: We have to keep EnableOptimizations ON now otherwise raw less code gets spat out to the browser.  Fun.
- Mod: UnionAPI: get golfers by id/membercode now returns bad request instead of 404 if number is bad
- MOD: Make the base URI implicit on all requests to the WHS API.
- MOD: Move test data to separate file for improved organisation.
- MOD: TV2 Pennants: UI changes on focus member search
- MOD: Move inherited sanity checks into their respective base files.
- MOD: Move sanity checks to their own file to keep things organised.
- MOD: Use static http client for authentication as the global instance has a specific base URI.
- MOD: Cleanup strangler.
- MOD: Make test data validation done by sanity check tests over setup tests. This allows easier mocking for me and easier debugging for ISVs.
- MOD: Switch to testing Scotland.
- MOD: Use the new test data members for theories. This makes the intent of each theory nice and clear, while also standardising the test data formats across all test classes.
- ADD: Provide `.WhereNot()` Linq extension. Trust me, this is soooo handy.
- MOD: Move test data members directly to base test class and hide access to troublesome static data accessor.
- MOD: Region off test base sections, this class is about to get realllllllly big, so organisation is key.
- MOD: Sanitise test data.
- DEL: Remove synchronous tests. Keep in source control for reference.
- ADD: Provide synchronous overloads of authentication tests to explore work around options to solve gateway timeouts.
- ADD: Add golfer by (first/last) name searching tests.
- FIX: Correct missing test data keys.
- MOD: Annotate non user sanity check.
- ADD: Add missing test data.
- MOD: DG-6644: Updated GeneralPlayScores.sql to show timestamps for Scorecard Download, Score submission & attestation.
- Mod: API: More updated images.
- Mod: API: Bottom ads - Add display duration.
- Fix: CasualGolf: less not working "chuck it in svn we'll look at it tomorrow"
- MOD: TV2 Pennants: Add placeholder to drop players to create pair
- Fix: CasualGolf: less working again we hope
- Fix: CasualGolf: css working again
- MOD: TV2 Pennants: Add placeholder to drop players to create pair
- Mod: API: Replace outdated sponsor image.
- Fix: CasualGolf: font working
- Mod: API: In App Advertising [SPIKE]: Add more images for bottom ads. https://dotgolf.atlassian.net/browse/DG-6771
- Fix: CasualGolf: we did it team missed line
- Fix: CasualGolf: we did it team
- FIX: Use ISO codes over human readable names.
- MOD: TV2 Pennants: Copy players from previous contest when creating new Contest
- MOD: TV2 Pennants: Copy players from previous contest when creating new Contest
- ADD: Additional test cases.
- MOD: Comment appsettings.json sections
- ADD: Suppress warnings about ignored tests, they are skipped for a good reason.
- ADD: Provide additional test data values.
- ADD: Separate countries and regions.
- Mod: Broken Casual Golf solution with less less bootstrap and no more BundleTransformer/V8.
- MOD: Tournament V2 Pennants: Added sync players to all rounds and contests
- MOD: Tournament V2 Pennants: Implement adding of players in the Result Entry
- Mod: Casual Golf: Go to MVC 5.1 in case that helps our assembly binding nightmare?
- Mod: Org: SquadSelection report links to comp/general report to find comp/general SDs
- Fix: Casual Golf Admin didn't start up due to missing SessionState module in web.config.
- Mod: API: In App Advertising [SPIKE] - Enable ads on NZ Stage only.
- Mod: API: [Testing Only - NZ Stage] In App Advertising [SPIKE] https://dotgolf.atlassian.net/browse/DG-6771
- Mod: UnionAPI: Removed the testing Cognito credentials; we're in production now.
- Mod: Org: SquadSelection report Score count column now only counts score in date range
- Add: Teebooking Fair Use policy Test DG-6353 Added tee booking fair use policy test to  Teebooking
- ADD: ISO 3166_2 country list as an enum. This was created from a CSV found at www.ip2location.com
- Upd: Amex: Auto email text changes.
- Mod: Adweb will now mark slicer.Payment records as Sent when we click the "Send All Reports" button after the slice is complete.  We only do this for NZ right now - but we can use this to send a reminder later.
- FIX: Tournament V2: Add the vue file to fix the build
- Add: slicer.Payment.SentAtUTC column to track when "Send Reports" button is clicked (and maybe control visibility of payment reports on the Club/Org UI.
- Fix: Core: EmulatedWHSClient/build
- MOD: Fix false negative error on missing test data, report incomplete test data and mark tests as inconclusive.
- MOD: TournamentV2: Added Pennant/Interclub Tournament tab in the navigation. Implement front-end functionality for Pennants. Added initial front-end codes for Round Management. UI tweaks to Player Management
- Mod: WHSAPI: get score count within date range
- ADD: Add proper golfer endpoint testing skeleton.
- Mod: TeeBookingTest - Fair Use Policy Updated the tracking for Fair Use Policy related set up
- MOD: Document and clean up appsettings.json
- MOD: Change tests to validate behaviour against what the spec *should* say, not necessarily what it *does* say. Thanks David.
- ADD: Placeholder golfer tests tests.
- FIX: Fix bad config.
- DEL: Comment out dummy test data, until the test harness is more complete, the testing will focus on testing the tests themselves.
- ADD: Add a golfer model.
- MOD: Add assertions that the golfer object is returned as expected.
- MOD: Read response content as part of the "act" section.
- MOD: Read response content as part of the "act" section.
- MOD: Assume that golfer IDs have been provided to the test data.
- ADD: Provide waaaaay more assumptions.
- Mod: ScheduledTasks: every day, delete international courses and markers with no scores attached to them
- Add: We now log UnionAPI client requests/responses to Elasticsearch.
- Mod: ScheduledTasks: reduce reflection when checking for task name
- Mod: Org: minor sql style change in OverseasCourseFormService
- Fix: scheduledTasks: xero sync fix exceptions thrown when trying to import overpaid invoice (but not importing it, because we don't support overpayments yet)
- Mod: UnionAPI client changed to the production Cognito instance.
- Mod: UnionAPI client changed to the production Cognito instance.
- ADD: Add more golfer tests.
- Mod: UnionAPI: better course name handling, and tests now support course timezone
- Mod: UnionAPI: add timezone to course swagger
- Mod: Org: low effort perf mods for bulkmarkerupdate
- Fix: Casual golf WHYYYYYYYYYYYYYY
- Fix: Trying to make Casual Golf work.
- ADD: Start golfer specific tests.
- MOD: Clean up usings.
- MOD: Clean up sanity checks.
- MOD: Add more commented sections to appsettings.json, allows for easy testing.
- MOD: Mark TODOs for further test data fields.
- Fix: Amex: Scheduled task date set.
- Fix: Amex: UI and home club ranking fixes.
- ADD: Begin writing golfer endpoint specific tests.
- MOD: Correct error messages for authenticated access tests.
- MOD: Comment out unused configs.
- ADD: Put settings in appsettings.json explicitly.
- ADD: Document the test data and configuration sections and fields in the appsettings.json file. Also make the appsettings.json parser treat certain fields as required.
- Mod: Minor patch to deployment scripts to improve log output.
- Mod: Dev pc build script update.
- Mod: Minor updates to interop central directory infra and directory json.
- Fix: CasualGolf: build - PackageReferences
- MOD: Remove garbage data from config, expect only valid inputs in config. Negative test cases will be generated without the config to avoid using cherry picked inputs to tests.
- ADD: Use union staging environment over Scotland's.
- ADD: Add Tee ID list to test data.
- MOD: Provide a static test data instance.
- MOD: Use configuration file driven test data.
- MOD: Don't debug tear down, just skip
- BUG: BulkEmailV3: Not picking up the non-affiliate recipient info
- FIX: Call GC.SuppressFinalize correctly (CA1816)
- Mod: Partial broken commit of Casual Golf Web+Admin upgrade to Package References (Marcus swore he'd complete it)
- ADD: Provide default test data.
- MOD: Update config parsing to be more fluent and add `IsStrictMode` config support.
- ADD: Provide fluent parsing extensions and mark missing documentation.
- MOD: Remove compile time switch in favour of config file switch.
- MOD: Clean up dependency injection to allow static singleton access for static methods etc.
- Mod: Org: Course changes form now uses the new End Marker Completely option for marker changes. #coursechanges
- MOD: Consolidate all configuration data, i.e. testing data, config data, etc... as single appsettings.json manager.
- ADD: Provide test data interface to access config-defined test case data.
- Fix: Bad merge caused build errors.
- Mod: Casual Golf web+admin upgraded to use DotGolf.Core for resolving app URLs, bucket details, Windcave credentials.  Web.config files are no longer needed.
- Mod: Casual Golf web+admin upgraded to use DotGolf.Core for resolving app URLs, bucket details, Windcave credentials.  Web.config files are no longer needed.
- ADD: Provide `WHS_STRICT` compile mode.
- ADD: Provide "soft" assertions, these are assumptions that should be made about the API that are only to be considered test failures in strict mode.
- Add: Dev site for casual golf.
- Add: Jenkinsfile for Casual Golf (just web, not admin)
- ADD: Provide the appsettings.json file to the tests.
- DEL: Deprecate the Environment variable based configuration provider.
- MOD: Convert Test Harness Tests (meta tests if you will) to inject dependencies cleanly, also move compile time distinction between AppSetting base configuration and Environment Variables to a proper AutoFac-ed injector.
- Fix: Jenkins build: LoveGolf API
- Fix: LoveGolf: Voucher Download (Part 5) - Remove redis caching for now.
- Fix: LoveGolf: Voucher Download (Part 4)
- Fix: Mailer: Badly formatted From header in bounce messages caused bounce tracker thread to abort and retry.
- Fix: Compile error, sigh.
- Fix: Don't run bounce tracker in Stage WITH PRODUCTION MAILBOX CREDENTIALS.
- Mod: Temporarily disable the bounce tracker service since we are having trouble connecting to the POP mailbox.
- Fix: LoveGolf: Voucher download - Moving away from WKHtmlToPdf (.exe) to "htmlToPdf" lambda function for generating voucher PDF files.
- MOD: Fix spelling errors for David, while I'm at it might as well generalise the authentication namespace.
- Fix: LoveGolf: Voucher download now working. Generated PDF files are now stored in S3. It was failing because generated files were stored locally on the web server - in a load-balanced environment, this no longer works. Mod: LoveGolf: Make MyPurchasesController.DownloadFile static so I can make use of this in AnonymousPurchasesController. #51711
- Mod: ISVAPI tests: whoops, missed a file for the test setup
- Mod: ISVAPI: remove redundant WHSMemberUID = newid() calls because this is done in TestData setup now
- Add: Performance fix to avoid the 7pm database load peak for tee booking.  This just reinstates the previous performance hack with a fix to avoid the missing search results.  It's going to be marginally worse at looking up the @MinTimeSlotId, but in my testing it looked fast enough to deploy.  Fingers crossed.  Will release this next week so we don't push dangercode into prod over the weekend.
- Mod: Tests: every new member gets a WHSMemberUID free of charge. Using EmulatedWHSClient for unionAPI tests and I think I'll propagate it everywhere
- Fix: UnionAPI: we should send Scottish hole-by-hole markers to WHS.
- Mod: Core: Add [Preload] to some Score PocoTable cols for....preloading. Same with Member
- ADD: Provide additional tests for the authentication test suite.
- Mod: Core.Tests: we should be re-setting the config profile every time we run a test to ensure tests are not messing with each other (since it's static)
- ADD: The Interop spec allows for 451 to be returned for any endpoints that aren't implemented for legal reasons, mark these results as inconclusive.
- Mod: Course changes: update course changes to handle new logic. Also decided not to add a new param to the stored proc because its redundant #coursechanges
- Fix: ScheduledTasks: build  (Amex)
- Mod: Clubcms: moved some Amex objects to ScheduledTasks
- Fix: Course changes: making marker changes live is now deterministic! No longer relies on today's date to decide whether to use marker-backdating logic. When making a change live, we always use smarts to figure out how to adjust the surrounding NZCRData (rather than ONLY for backdates markers.) Turns out GBI do as much tinkering with future markers as they do with past markers. #coursechanges Mod: Course changes: new @endmarkercompletely flag which replaces the old method of deleting markers which was janky
- ADD: Provide "strict" mode as an option to make the test harness less forgiving on small ambiguities.
- MOD: A 400 Bad Request could be from incorrect behaviour or a misconfigured test, report as inconclusive.
- MOD: Give reasons for inconclusive test result.
- MOD: Allow 404 not found when testing authentication responses. TODO: explicitly returning 404 for some endpoints and 401 for others may expose golfer IDs without authentication. This might be a good test to add later for strictness.
- MOD: Don't be too picky about the type of assertion that died, as long as it was an assertion.
- Fix: Amex: Email text format and Url end-point redirect.
- Mod: Org: handicap change from sept 21 to sept 22 in Squad Selection report for Gemma
- MOD: Huzza! Scotland works.
- DEL: Turns out that the INTEROP spec doesn't specify how to authenticate and leaves that up to individual ISVs. Sigh, it means we'll need to do authentication on a per case basis using API keys in the test config.
- ADD: Provide secondary negative test cases.
- MOD: Deserialise access_token.
- MOD: Inject Cognito authentication into tests using the configuration fixture.
- ADD: Create authentication helper to connect to Cognito for authentication.
- ADD: Extend test harness configuration to consume authentication tokens.
- MOD: Simplify test harness configuration parsing to make it more easily extensible.
- Mod: CasualgolfAPI: remove packages.config
- MOD: DG-6721: Might help if I write a working Live_GetSubscriptionPaymentStatistics SP.
- MOD: Fix documentation generation, use fully qualified namespace to avoid ambiguity.
- MOD: Shuffle the test harness around a bit to make the structure more future-proof and easier to understand.
- ADD: Add test cases to check that WSH API implementations return 401 if unauthorized.
- Fix: Live: reduce latency on every single PostBack in the member page
- Mod: Connector Jenkinsfile now throws if wyBuild fails to build updates.
- Mod: Org: County Squad Selection report now shows DOB and U14 status [DG-6454]
- Fix: ClubCMS/GolfNZ Loading standings for OOM Fix where the player standings are not showing and the weeks tournament type weren't being loaded properly.
- Fix: Live/Org: extquery reports correctly hide hidden columns now when exported to excel
- Add: UnionAPI bindings file for NZ.
- Mod: Org: County Squad Selection report updates for Gemma [DG-6454]
- ADD: Begin test harness for the WHS API. Read the added README.md file for more information on how to use this.
- Add: UnionAPI for NZ.
- Fix: Core: MemberRecordManager after prev commit
- Fix: Live: If a home member resigns, then signs up in another union, then is reinstated at old home club, they should not face errors and union DB should smoothly set their home club as Away (null clubNo). #5007658
- Mod: Interop Central Directory: Jenkinsfile
- Fix: Amex: Member overview section handicap index values.
- Mod: API: better error message in HomeClubChangeAccepted unhappy path
- Mod: Interop Central Directory: Jenkinsfile
- Mod: API: remove more misleading comment
- Mod: API: remove more misleading comment
- Mod: API: remove misleading comment
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Mod: Interop Central Directory: Jenkinsfile
- Add: Initial version of interop central directory deployment and testing scripts.
- Fix: Live: resigning someone who's not a member in a different union was causing their clubno to be set to null for no reason and erroring when trying to reinstate #5007658
- Mod: ClubCMS: less ORNS when debugging clubcms and an exception occurs
- Fix: Core: golfnz URL should be https
- Mod: ClubCMS: Global.asax.cs amex redirect works in dev/stage
- Fix: AMEX: MSK+BEH: amex email link takes user to correct page if they are already logged in
- Fix: Amex: Email generation from own assembly.
- Fix: Live: bulkresign members works and is a little less janky for non-subs clubs.
- Mod: AMEX: MSK+BEH: moved amex email template to clubcms and next commit will load the email from there.
- Fix: Amex: Email Url and end-points changes.
- Fix: Amex email: sender name "Golf New Zealand"
- Mod: Interop central directory hostingstack.yaml updated for prod environment.
- Fix: Amex: Auto email integration fixes for joined members.
- Mod: Enable AUTO_UPDATE_STATISTICS_ASYNC for all databases.
- Mod: WHSAPI: remove option(recompile) from query that dies sometimes when trying to compile a plan and cause massive problems
- Mod: Live: Handicap review report should not query a year by default
- Fix-ish: WHSAPI: handicap review report query needs recompile
- Add: Amex: Thirdparty data setup for Amex2022 Stableford shootout.
- Fix: WHSAPI: parentscore query uses string_split now instead of 'in' because 'in' causes more plans
- Mod: Autogenerated poco classes.
- Mod: inter union score sync no longer waits up to 5 days for missed changes when trying to get new scores. 1 day is fine and uses less whs resources
- Add: Amex: New table AmexStablefordResult for Amex 2022 promo.
- MOD: Improve accessibility (e.g. for screen reader users) to allow nav items to be selected with the TAB key.
- Fix: Live: BulkResignMembers was not firing any Resign Member hooks which led to people's home clubs not updating in WHS and causing pain when clubs close.
- Fix: UnionAPI: "you can uncomment the TOKEN_URL_PRODUCTION constant" - DFH
- Fix: Amex: Overview control alignment fixes.
- Upd: Amex: Update the redirect page Url for Amex.
- Add: Amex: Added a redirect page Url for Amex.
- Fix: DG-6803 #51664 Fix where passportId was returning null on team games types. Letting this work as per old business logic around removing players from competitions.
- Fix: ClubCMS: DG-6778 If the flag has been ticked for IsTransactionFeeInclusive then the fees should be absorbed for both instalments and full payment types.
- ADD: Add tests for (unused) `EqualsWithin` extension method.
- FIX: Correct endless recursion of `EqualsWithin` extension method. It has zero references so I'm not surprised that this went unnoticed.... Until now, Mwahahahaha!
- MOD: Documentation, improve documentation of `EqualsWithin` extension methods.
- Mod: Core: ElasticSearchLogger now logs exceptions to exceptionlog-{solutionname}-yyyy-MM-dd so our old exceptionlog- index can catch them too
- FIX: Live: Remove the Round Management link
- MOD: Test commit, just cleaned some `using` statements
- Fix: Premature productionification of the UnionAPI client (pointed it to the prod Cognito instance instead of the testing one - we haven't made this live yet)
- Fix: Live/Org: Score listing: If score was entered by an association user, prioritise displaying that over the captured-by-club name. Not sure how a score entered by Wales Golf got a non-zero CapturedByClub attached to it though.... #5007490 Also track thirdparty username #5006927
- Mod: Core: Change error message test slightly in case of unionapi auth error
- Fix: ISVAPI: Log interop auth failures properly so we can figure out what's going on #5007575
- Mod: ClubCMS:GolfNZ DG-6762 Hiding player and district tags from 'media-centre' page -> this is pretty ghetto :/
- Mod: ClubCMS:GolfNZ DG-6762 Hiding player and district tags from 'media-centre' page
- Mod: ISVAPI: Minor refactor to remove duplicate code
- Mod: ISVAPI: Handle BAD REQUEST responses from OCS #5007575
- Fix: API: Attempt to fix the MyGolf app from crashing for casual golfers. #51624
- Fix: Functions: Allow online payments setting not saved.
- Fix: Use addEventListener rather than onclick - the former is less brittle.
- FIX: DG-6828: Fixed the Pesky JS Nav issue - Yuri to the rescue.
- Fix: ClubCMS: new clubs should not show in EG F&P (merge conflict killed this mod)
- FIX: DG-6828: Added additional JS to toggle logout modal.
- Fix: ClubCMS: DG-6826 #5007474 Will only load the future releasing article when in edit page mode or if its meant for the day or the past.
- Fix: ClubCMS: DG-6826 #5007474 Will only load the future releasing article when in edit page mode or if its meant for the day or the past.
- Merged revision(s) 55560-55569 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service) ........ Fix: org: member tab not using new score count ........ Merged revision(s) 55560-55702 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service) ........ Fix: Live: member tab not using new score count ........ Fix: POS: Add lock wait and take to prevent posting multiple sales for the same card. https://dotgolf.atlassian.net/browse/DG-6723 ........ Fix: Functions: Show a more user-friendly error message when we encounter issues searching for a customer from Xero (e.g. if a customer is not found, HTTP404 message appears which does not make sense for non-tech users). ........ Mod: Functions: #futures_events_registration - Accepting online payments setting enabled if the club has the "SUBSP" (Subscription online payment) product. If the club accepts SUBS payment online then we know that we have their bank details so it's safe to enable this for the club. ........ Mod: Live: minor refactor removing Urgent for auto-home-club-changes and deceased notifications ........ Mod: Functions: #futures_events_registration (part 2) - Online payments setting enabled if the club has TBP or SUBSP product. ........
- Upd: Amex: Feedback changes updates on amex pages.
- Fix: ClubCMS: DG-6826 #5007474 Will only load the future releasing article when in edit page mode or if its meant for the day or the past.
- Add: Enabled /health endpoint on unionapi so we can use it for telemetry.
- Fix: ClubCMS: DG-6826 #5007474 Will only load the future releasing article when in edit page mode or if its meant for the day or the past.
- Fix: POS: Kounta Loyalty actions REFUNDS: Our new addon has the payment type "House  Account" to ensure it doesnt clash with the old defunct "House Account" payment type. Plan is to delete all the old "House Account"s and then rename our addon payment type to "House Account" This code ensures the system won't die when we are deleting "House Account" payment types, but have not yet renamed "House  Account"
- Mod: We now point to the production WHS directory at it's final resting place, directory.whs.com.  We control this static content; check out /Trunk/Infrastructure/InteropCentralDirectory for the details.
- Fix: POS: Kounta Loyalty actions REFUNDS: Our new addon has the payment type "House  Account" to ensure it doesnt clash with the old defunct "House Account" payment type. Plan is to delete all the old "House Account"s and then rename our addon payment type to "House Account" This code ensures the system won't die when we are deleting "House Account" payment types, but have not yet renamed "House  Account"
- Fix: Try JOB_NAME instead of JOB_BASE_NAME
- Mod: Logging for API build
- Fix: Live: WHSMemberResigned hook double checks to see if the person is resigned when the hook fires, in case of race conditions.
- Fix: Think we need an absolute path here.
- Mod: Logging for API build
- Mod: sql: IX_NonAffiliate_NonAffiliateUID index for perf
- Mod: ClubCMS: DG-6778 Enhances the ability for members to pay for their subscription by [From MyAccount Adweb Setting [EnableChangeToInstalment]]: - Full amount up front - Monthly - BiAnnually Existing functionality of paying by CC still exist for Monthly BiAnnual payments are A2A only.
- Fix: ClubCMS: Remove extra ';'
- Mod: Functions: #futures_events_registration (part 2) - Online payments setting enabled if the club has TBP or SUBSP product.
- Fix: Live: ORNS when re-sending someone's home club resignation to WHSAPI when they've already been removed from that club in union land
- Fix: ResultsEngine also doesn't have to archive to S3.
- Fix: ResultsEngine is a package so doesn't need to promote or ask approval.
- Fix: Looks like these are test parameters left over in a committed proc?  Removed.
- MOD: DG-6721: Updated Live_GetSubscriptionPaymentStatistics SP.
- Add: Golf-Tourism: Added an image author credit details in gallery-swiperjs control.
- FIX: ClubCMS: Resource Hub downloads and external links
- Mod: Autogenerated poco classes.
- Add: Golf-Tourism: Added two new columns to CWGalleryImage table.
- Fix: Live: home club change requests inter union work now
- Mod: Live: minor refactor removing Urgent for auto-home-club-changes and deceased notifications
- Mod: Moved akarana.cw.stage.golf.co.nz to the top of the bindings file so it's used as the health check in the deploy scripts; there is no site at cw.stage.golf.co.nz at present, which fails the build.
- Fix: Heh heh.  Got EN/ENG and WA/WAL wrong...
- Fix: Live: InterClubMessaging 'sent' area (attempts to) correctly shows who the message was sent to
- Fix: Mailer deploy script had an incorrect service name.
- Mod: Core: Moved RSMemberUpdated hook to Core so that ISVAPI triggers it
- Fix: ISVAPI: no more TerribleHookManager making calls off to Live every time we fire a hook!!!
- Add: Golf-Tourism: Added photo credit to magazine-control images.
- Mod: Tests: remove unused method
- Fix: WHSAPI: tests on web7
- Fix: WHSAPI: tests on web7
- Fix: WHSAPI: test on web7
- Mod: Rename MemberLocker.Take to TakeAsync because I keep forgetting to await it
- Mod: WHSAPI: if someone resigns their home club and only has one membership left, make that their home club. Means we no longer need to new home club to hit Save Changes when this happens across unions e.g. #5007497
- Mod: Autogenerated poco classes.
- Fix: Live: When someone resigns their home club in our union, and they have no secondaries in that union, but secondaries in another union, we now update home club to null in our DB to prevent weird errors when trying to reinstate the person in our union Mod: Core: WHSMemberInsertedUpdated no longer runs for resigned people if they already have a WHSMemberUID (because WHSMemberResigned handles it) Mod: Core: moved last remaining WHS hooks from Shared to Core
- Mod: Functions: #futures_events_registration - Accepting online payments setting enabled if the club has the "SUBSP" (Subscription online payment) product. If the club accepts SUBS payment online then we know that we have their bank details so it's safe to enable this for the club.
- Fix: Functions: Show a more user-friendly error message when we encounter issues searching for a customer from Xero (e.g. if a customer is not found, HTTP404 message appears which does not make sense for non-tech users).
- Add: Golf-Tourism: Added Dev Url for GolfNZ Tourism.
- Mod: Try and save the code signing cert in the certificate store instead of in a file; there is talk online that file-based certificates can cause trouble for Jenkins.
- Mod: Try and save the code signing cert in the certificate store instead of in a file; there is talk online that file-based certificates can cause trouble for Jenkins.
- Mod: Try and save the code signing cert in the certificate store instead of in a file; there is talk online that file-based certificates can cause trouble for Jenkins.
- Sigh, try C:\Certificates again.
- Merged resultsengine package deps from trunk. Merged revision(s) 55642 from Trunk: Fix: Try to move certs to C:\Certificates again in a desperate attempt to make this work. ........
- Fix: API ResultsEngine model package dependency
- Fix: API ResultsEngine model package dependency
- Fix: API ResultsEngine model package dependency
- Fix: Try to move certs to C:\Certificates again in a desperate attempt to make this work.
- Fix: package-deploy.ps1 script for mailer had the names backwards.
- Fix: POS: Add lock wait and take to prevent posting multiple sales for the same card. https://dotgolf.atlassian.net/browse/DG-6723
- Mod: Golf-Tourism: Changed the query of "Other Recommendations" courses from the selected Facility.
- Add: logging for package-deploy.ps1.
- Fix: Mailer deployment.
- Mod: Teebooking: ConfirmAmounts: Slot date is not displayed. Make date display format consistent with other pages. https://dotgolf.atlassian.net/browse/DG-6780
- *** DFH CODE REVIEWED TO HERE *** Mod: sql: new flag on NZCRDataTemp marker changes table to aid GBI in adding final end dates for temporary ratings #coursechanges
- REVERTED EVERYTHING - this was all because of a bad working copy. Reverse merged revision(s) 55623-55622 from Trunk/DotGolf.Connector: Fix: Connector signtool ........ Fix: Connector signtool ........
- Fix: Connector signtool
- Fix: Connector signtool
- Fix: Connector signtool
- Fix: Connector signtool
- Fix: Connector signtool
- Reverted all my changes; this ain't working. Reverse merged revision(s) 55617-55616, 55611-55610 from Trunk/DotGolf.Connector: Fix: Connector Jenkinsfile syntax ........ Fix: Connector build: signtool isn't happy with me today. ........ Add: Debugging info to sign-binaries.cmd. ........ Fix: Extra backslash is ruining the build. ........
- Fix: Connector signtool
- Fix: Connector Jenkinsfile syntax
- Fix: Small tweak to one of the project files, maybe this works?
- Fix: Connector Jenkinsfile syntax
- Fix: Connector build: signtool isn't happy with me today.
- Fix: dgBuildDotNetFrameworkSolution didn't properly limit msbuild to 1 node for Connector build
- Fix: Certificate paths don't work now for some stupid reason, let's just pass it on the arguments.
- Add: Debugging info to sign-binaries.cmd.
- Add: Debugging info to sign-binaries.cmd.
- Add: Debugging info to sign-binaries.cmd.
- Fix: Extra backslash is ruining the build.
- FIX: Activity Tracker: Fix logged date
- Mod: POS: Kounta Loyalty actions: Our new addon has the payment type "House  Account" to ensure it doesnt clash with the old defunct "House Account" payment type. Plan is to delete all the old "House Account"s and then rename our addon payment type to "House Account" This code ensures the system won't die when we are deleting "House Account" payment types, but have not yet renamed "House  Account"
- FIX: BulkEmail: Removed / before ONLINEHOST to fix broken view in browser link in the bulk email
- Fix: Live: AXAccountPosSummaryReport was not including sales made using our new house account payment type (which is "House  Account" until we clean up the legacy "House Account" payment type and can re-claim that name.)
- Mod: ResultsEngine sub build
- Mod: ResultsEngine skip build if no changes
- Mod: ResultsEngine skip build if no changes
- Mod: ResultsEngine skip build if no changes
- Mod: ResultsEngine skip build if no changes
- Mod: ResultsEngine skip build if no changes
- Mod: API build nuget path
- Mod: API build nuget path
- Mod: API build nuget path
- Mod: API build nuget path
- Mod: API build to pick ResultsEngine package from upstream build
- Fix: nuget.config
- Mod: API now uses DotGolf.ResultsEngine.Common.Model package rather than the extern.
- Mod: ClubCMS: England Golf website: content tiles css update
- Mod: ClubCMS: England Golf website: GetClubDetailsEg: set back caching to 20 minutes (it was only set to 1 minute during the Find & Play testing phase)
- Fix ResultsEngine.Common.Model nuget package version strategy
- Fix ResultsEngine.Common.Model nuget package version strategy
- Fix ResultsEngine.Common.Model nuget package version strategy
- Fix: ResultsEngine Jenkinsfile - push nupkg
- Fix: ResultsEngine Jenkinsfile - push nupkg
- Fix: ResultsEngine Jenkinsfile - push nupkg
- Fix ResultsEngine.Common.Model pack
- Fix: ResultsEngine Jenkinsfile - push nupkg
- Fix: ResultsEngine Jenkinsfile unit tests - restricted stash path somewhat, for speed.
- Fix: ResultsEngine Jenkinsfile unit tests
- Fix: ResultsEngine Jenkinsfile archive path
- Fix ResultsEngine.Common.Model build
- Fix: No Core config generate in results engine
- Fix: ResultsEngine build
- Fix: Jenkinsfile for ResultsEngine.
- Add: Jenkinsfile for ResultsEngine. Mod: ResultsEngine upgraded to net6.0.
- Mod: UnionAPI will now accept credentials from either of our Cognito instances, the testing one in ap-southeast-2 or the production one in us-east-2 (which we're transitioning to soon). Currently we're still using TESTING until we've got agreement between all the different ISVs on a switchover date.
- Fix: org: member tab not using new score count
- Fix: Live: member tab not using new score count
- Add: Interop central directory: Production profile and configuration files added with new prod Zone ID. Basically only waiting for the USGA to set our nameservers on directory.whs.com, then we're good to go.
- Mod: Mailer Jenkinsfile will not promote in dev (we have no ringmaster here)
- Fix: Adweb reference in Mailer Jenkinsfile.
- Fix: Adweb reference in Mailer Jenkinsfile.
- Fix: Whatever man, just pass.
- Mod: Mailer service refactored to remove EN/WA/IE projects, we only need a single EXE.  Working on the Jenkinsfile, probably not there yet.
- Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service)
- Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service)
- Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service)
- Mod: Had to rename this class to get it out of the way of the DotGolf.Mailer namespace (used in the Mailer service)
- Cleanup: Removed /sql from Mailer.
- Fix: ClubCMS Jenkinsfile incorrect relative path for csstidy.
- Mod: ClubCMS: England Golf website: moved scorecard styles from the EG my-header css to th EG my-scores css file
- Mod: AdWeb: Slicer: Tournament registration payments - changed reference to tournament/competition name. Previously, this was set to "DotGolf Regs" + <Tournament/Competition Id>. https://dotgolf.atlassian.net/browse/DG-6653
- Mod: golf.co.nz migrated to the same ClubCMS instance used for all the clubs.
- Mod: ClubCMS: England Golf website: my-header: font awesome icons mobile style
- Mod: ClubCMS: England Golf website: friend request notification dropdown mobile style updates
- FIX: Live: Not sending Fixtures Notification for a new event
- Reverted accidental commit in revision(s) 55544 from Trunk/DotGolf.CasualGolf.Web.2014: Mod: CssTidy added back to ClubCMS build. ........
- Mod: CssTidy added back to ClubCMS build.
- Mod: ClubCMS: Upgraded to Jenkinsfile.
- Cleanup: Deleted fake_image_server cruft, surely we don't need this anymore.
- Cleanup: Archived DotGolf.CentralDatabase, we use the PristineDatabaseBuilder now.
- Cleanup: Removed build.cmd files for BookingService; this is done by Jenkinsfile now.
- Mod: Removed EmailViewer from Adweb; link to the Live one instead.
- Mod: dgFilterBindings will try and update the build description to add a link to the system
- Mod: dgFilterBindings will try and update the build description to add a link to the system
- Fix: Casual Golf API Jenkinsfile not up to date
- Fix: Casual Golf API Jenkinsfile not up to date
- Fix: Casual Golf API Jenkinsfile not up to date
- Fix: Casual Golf API Jenkinsfile not up to date
- Mod: Upgraded Casual Golf to Jenkinsfile build.
- Add: PCC tests extended to include 3 worked examples from the E20 spec.  This is in preparation for the formula update to PCC (E20 v1.2 July 2022).
- MOD: DG-6683: Updated method for InitialHandicapNotification.cs and added a couple of todos.
- Add: PocoTable.CMember.Club navigation property for Tom to use.
- MOD: DG-6683: Updated XML Comments for InitialHandicapNotification.cs.
- Fix: Golf-Tourism: General feedback UI/styling fixes through-out pages.
- ADD: DG-6683: Added InitialHandicapNotification.cs task which runs when a member gets their initial handicap.
- Mod: ClubCMS: England Golf website: my-friends-list: mobile styles update
- Mod: ClubCMS: England Golf website: my-scores: mobile styles update
- Mod: ClubCMS: England Golf website: my-header css file clean-up
- Mod: ClubCMS: England Golf website: my-performance: mobile style fix
- Mod: ClubCMS: England Golf website: my-header: font awesome icons mobile style
- Add/Mod: ClubCMS: England Golf website: my-friends-list: styles.terraces_eg.css
- Cleanup: Removed BulkEmail _deploy directory.
- Mod: ClubCMS: England Golf website: my-scores css file clean-up
- Merged revision(s) 55150-55434 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Fix: Org: deleted markers showing in Marker Information ........ Mod: Org: can delete rejected course changes ........ Mod: Org: We can fire hooks from Core now, which simplifies ForceApprove #coursechanges ........ Merged revision(s) 55149-55507 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: Live: deleted markers showing in Marker Information ........ Mod: ActivityTracker Jenkinsfile build. Ignored some dlls in Live/Clubhouse bin directories. ........ Fix: #51304 Queenstown could not see any green fees in the POG because no marker selection was possible; their deleted course was interfering with the marker select control, which was messing up the green fee select. ........ Fix: #5007044 Subs Summary Chart needed the same mod done to it that was done to the Unbilled Members Report, since users expect their totals to be the same. ........ Fix: Kiosk: Use current time in UTC when checking if a player has printed a scorecard in the last hour. ........ Mod: #50575 Hide parnz's competition from Waitemata; this is the easiest way around the problem.  We'll do something better in the future. ........ Fix: The width didn't fit the monetary symbol. Gave this additional space and space between the symble and text input. ........ Fix: Live: performance improvements for subs renewal so it doesnt time out #51457 ........ Mod: ClubCMS DG-6509 DG-6737 HouseAccount Payment Add new settings to 'Club Settings -> Competition' to enable online payment via house account for competitions [This only appears if they have AxAccounts asset group] When removing players from Live the logic now Marks the Registration Table entry as deleted along with the old logic of Marking RSCompetitionEntry as deleted Fixed removal of players when they're not registered through ClubCMS
- Fix: dgPromotePackage ECHO OFF restored
- Fix: dgPromotePackage doesn't have access to the workspace since it isn't run on an agent - no point trying to PUSHD
- Mod: ClubCMS: England Golf website: my-performance, my-scores mobile style updates
- Mod: Temporarily increase logging in dgPromotePackage.groovy
- Mod: Upgraded BulkEmail to Jenkinsfile.
- Fix: Amex: Tidying member page UI.
- Fix: BookingService Jenkinsfile - fix ECR image manifest reference
- Fix: BookingService Jenkinsfile - fix ECR image manifest reference
- Mod: ClubCMS DG-6509 DG-6737 HouseAccount Payment Add new settings to 'Club Settings -> Competition' to enable online payment via house account for competitions [This only appears if they have AxAccounts asset group] When removing players from Live the logic now Marks the Registration Table entry as deleted along with the old logic of Marking RSCompetitionEntry as deleted Fixed removal of players when they're not registered through ClubCMS
- Mod: ClubCMS DG-6509 DG-6737 HouseAccount Payment Log exception when it files to charge to house account and show user appropriate message.
- Fix: BookingService Jenkinsfile - fix ECR image manifest reference
- Fix: Amex: Sign-up page UI fix.
- Fix: BookingService Jenkinsfile - fix ECR image manifest reference
- Fix: Amex: Feedback fixes to member club page.
- Fix: BookingService Jenkinsfile - fix ECR promote
- Fix: BookingService Jenkinsfile - unit testing
- Fix: BookingService Jenkinsfile - build windows binaries for unit testing
- Fix: BookingService Jenkinsfile - build windows binaries for unit testing
- Fix: BookingService Jenkinsfile - build windows binaries for unit testing
- Fix: BookingService Jenkinsfile - promotion step completed
- Fix: BookingService Jenkinsfile - promotion step completed
- Fix: BookingService Jenkinsfile - unit tests bin path corrected.
- Fix: BookingService project references after shared update.
- Mod: Using /Shared libraries now.  Removed _deploy directory.
- Add: Amex: Added a dedicated dev Url for GolfNZ Dev Amex test.
- Fix: Amex: Amex sign-up page feedback changes fixes.
- Fix: BookingService Jenkinsfile - syntax error.
- Fix: BookingService Jenkinsfile - syntax error.
- Mod: ClubCMS DG-6509 DG-6737 HouseAccount Payment Added alert box to notify the registrant if they do not have enough balance in the house account to pay for the registration.
- Add: Initial partially working script for BookingService Jenkinsfile.
- Mod: Allow overriding the platform (in case we need a linux build).
- Cleanup: Removed old defunct Jenkinsfile from BookingService.
- Mod: SqlTraceToElastic now a little more resilient if exceptions occur while tracing. Mod: Also new summary display on console rather than ugly log showing all queries.
- Add: Interop central directory: Infrastructure sceptre files.  Deployed at https://directory.worldhandicapping.com/production.json and https://directory.worldhandicapping.com/test.json for dev/demo purposes. TODO: Create prod configuration and do final deployment; we won't have dev or stage for this project I don't think.
- FIX: ClubCMS: Resource Hub related resources
- FIX: ClubCMS: Hero banner white margins on both ends
- Fix: Handicap provider broken with transactions
- Fix: sql: varchar with no length specified
- FIX: Bulk Email: Add rev on common.js
- Fix: API: GetLatestSubsCMemberItem not using index properly and causing excess CPU units. Seems like the logic is kinda odd but i've left it the way it was.
- Fix: ClubCMS/GolfNZ DG-6703 Fixed where Australian states were showing in the select list of regions. Added check for country ID
- Fix: Live: performance improvements for subs renewal so it doesnt time out #51457
- Mod: WHSAPI: rate limiting tests
- Fix: sql: email template for flexi cancellation
- Fix: FlexiClub/iGolf #51307 Removed the new [[APPPLATFORMNAME]] so we can avoid publish to clubCMS
- Fix: FlexiClub/iGolf #51307 Roll back some changes as its not really required to be that dynamic and old logic works.
- Fix: FlexiClub/iGolf [Cancellation Email Template] #51307 Update initial content of the email template to be more generic and adding association to: Flexiclub, iGolf, Flexiclub Wales.
- MOD: ClubCMS: Apply friendly url to Resource Topic page
- FIX: BulkEmail: Bug on Autosave
- Mod: ISVAPI.Tests: a few simple usings #coursechanges
- Fix: ISVAPI.Tests: updated test data to ensure marker names dont overlap by accident #coursechanges
- Fix: Core.Tests: updated test data to ensure marker names dont overlap by accident #coursechanges
- Mod: Tests: Moved course change tests to Core #coursechanges cleanup and simplify system emails Mod: Core.Tests: don't try run tests targeting dotnet standard because it has no runtime
- Mod: Tests: Moved course change tests to Core #coursechanges
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Resource Hub friendly url capability and UI adjustment
- Fix: ScheduledTasks: build #coursechanges
- Fix: iGolf unbilled members report - off by one - should show "tomorrow" not "today" in most cases.
- Mod: sql: igolf/flexi cancellation inserting null clubids
- Mod: Autogenerated poco classes.
- ADD: Added CWResource and CWResourceTopic friendly title and name
- Fix: FlexiClub/iGolf Cancellation Email Template #51307 Associate different unions to these emails so its editable in their respective unions bulk email
- Mod: Scheduled Tasks unit tests - small refactor, added voucher methods (unused right now though)
- Mod: Org: First step of refactoring wa_UpdateCoursesToLiveForMarker into c#   #coursechanges
- Fix: FlexiClub/iGolf Generic Email Template Update #51307 Generic template for Auto and Final Payment failure email templates TODO: Update production emails for iGolf to have it specific iGolf branding from BulkEmail UI
- Fix: FlexiClub/iGolf Cancellation Email Template #51307 Generic template for Auto and Final Payment failure email templates
- Mod: Tests: We can fire hooks from Core now, which simplifies ForceApprove #coursechanges
- Mod: Org: We can fire hooks from Core now, which simplifies ForceApprove #coursechanges
- Fix: FlexiClub/iGolf Cancellation Email Template #51307 Making this a bit more dynamic in getting application name. Also this commit is for a unit test
- Mod: WHSAPI: move some tests around for faster total test execution time
- MOD: ClubCMS: Resource hub admin refactor required fields validation indicator
- Mod: WHSAPI: When moving a score to another person (updating memberid in unionland), also update the attached ESR if any
- Mod: WHSAPI: Should Not Accept All Holes Attempted Score With No AdjGross (was previously throwing 500 error - this is a bad request.)
- Mod: Unbilled members report now has a status message "Payment will be re-tried in x days" if this is the case, rather than just showing "No subscription items generated".
- Fix: iGolf renewals: Edge condition for subs renewal where new SubAutoRenewalRetry rows did not get inserted if the job ran a few seconds earlier than last time.
- Mod: Autogenerated poco classes.
- Fix: no commit tran (just fixing this for unit tests)
- Fix: Live/API: Ensure expiry is set on redis score hash if we've skipped loading from WHS so we never get stuck in an infinite loop of people not having enough scores.
- Mod: Org: can delete rejected course changes
- Add: Index to avoid clustered index scans on NZCRData when finding markers by WHSMarkerHistoryUID.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Mod: Just testing a subversion hook.
- Fix: The width didn't fit the monetary symbol. Gave this additional space and space between the symble and text input.
- Fix/hack: WHSAPI: score sync can get into infinite paging loop if we update more than 200 (pagesize) scores at once
- Mod: Autogenerated poco classes.
- Mod: ClubCMS DG-6720 [Added ability to add club name] #49522
- Mod: ClubCMS DG-6720 [Added ability to add club name] #49522
- Mod: ClubCMS: England Golf website: main.css: defined the mygolf-section style; removed the style from the EG header css file
- Fix: ScheduledTasks: should renew redis lock more than once (affects tasks that can run longer than 20m)
- Mod: ClubCMS: just added the css class "mygolf-section" (to be initially used on the EG site css)
- Fix: ClubCMS: England Golf website: eg-rte: fix the bottom margin (previously, there was too much space below the rte control on mobile view)
- Fix: WHSAPI: potential memory leak because the memberlocker cancellationTokenSource doesnt get disposed.
- Fix: Live/API: Ensure expiry is set on redis score hash if we've skipped loading from WHS so we never get stuck in an infinite loop of people not having enough scores.
- Mod: ClubCMS: England Golf website: style update
- Mod: ClubCMS: England Golf website: my-performance: style update
- Fix: ClubCMS: my-performance: address flickering of "Go back to my overview" while the page loads; display the control elements after "loading of member details" is completed (to avoid flickering of elements on page load)
- Fix: Live [Remove Player from competition] #51407 Commented this for now and will find a work around as if the player was registered through the admin he/she won't be in the competition registration table.
- Mod: #50575 Hide parnz's competition from Waitemata; this is the easiest way around the problem.  We'll do something better in the future.
- Mod: ClubCMS: content-tiles: set showSuccess to true if the update is successful; corrected a typo error
- Mod: ClubCMS: England Golf website: eg-club-search: minor update on the condition; just added "else"
- Mod: ClubCMS: England Golf website: add new property: openArticleInNewTab (default setting is false)
- Mod: ClubCMS/GolfNZ DG-6651 Showing amex logo for flexiclub payment pages.
- Fix: ClubCMS/GolfNZ DG-6703 Saving selected combo list state while navigating around players and tournaments in oom player rankings
- Fix: ClubCMS: England Golf website: hero transition fix
- Fix: Live/API: Ensure expiry is set on redis score hash if we've skipped loading from WHS so we never get stuck in an infinite loop of people not having enough scores.
- Mod: Member score listing: invert bool logic for WHS paging so it's easier to read
- Mod: ClubCMS: England Golf website: hero css
- Mod: Make images work temporarily with localhost until we have it TLS in stage+prod.
- Fix: WHSAPI: ShouldUpdateMemberChangeDateAfterAdjustmentPOSTandDELETE
- FIX: #DG-6705: Fixed SQL Exception in member merge. Just a Syntax error.
- Fix: Did not hit save before committing this.
- Patch: Ignore WHS score cache entries where there is a TTL of -1 (which indicates the retrieval previously failed and could never set the TTL) More work is required in this area - ideally we don't even want to prime the cache if there is a partial dataset.
- Mod: ClubCMS: England Golf website: social media icons style fix; add missing semicolon
- Mod: ClubCMS: content-tiles control: add a default setting (empty string) to the HeaderText control property so that when the control is added by the website admin user via the UI, saving of HeaderText value will work
- MOD: #DG-6316: Updated email recipients
- Mod: ClubCMS: England Golf website: eg-rte: html: assign default value (empty string)
- Fix: ClubCMS/GolfNZ #51360 Fix using previously resigned membership number to log in while having an active membership else where lets you into the site without redirect to 'my-overview' but adds the name to the top right. As passportId is still the same it thinks the credentials are legit - we check if the username attached to their latest PassportCredential is the one they're using to login or not. If it is then let them through else deny this.
- Fix: UtcNow instead of DbNow got saved to TBTransaction record for CompleteDate on subs renewal.  Only a problem in NZ where we have the database in NZT.
- Mod: ClubCMS: England Golf website: my golf area style updates
- Fix: API build - well it works at my place now.  Unit tests are also passing. Cleanup: Removed packages.config.
- Mod: ClubCMS: England Golf website: my scores style updates
- Mod: ClubCMS: England Golf website: move scores styles to the correct css file
- Add: API FileHelpers package
- Fix: Jenkins: Unit tests build failing
- Fix? API build in stage.nz
- Mod/Fix: ClubCMS: England Golf website: score card styles
- FIX: ClubCMS: New resource is not saving due to body is always null
- Mod: ClubCMS: England Golf website: eg-news-list (news search): apply the same scroll animation as in Find & Play - when doing a new search, scroll down a bit (still showing the filters) so that the user can see the results - when click the pagination, show the top of the results - fix: when doing a new search, reset the page number to 1 (or else it retains the current page number and possibly not show any results -- e.g. if the user is currently on page 3, and the new search only has 1 page)
- Fix: Vend: Renew access token a minute earlier before the expiry to ensure that the access token is current. #51342
- Fix: ClubCMS [Takapuna Handicap only Teebooking] #50947 Fix the issue where booking member of type "self" is passing null MemberId from playerRec. So we now get this from the BookingState and retrieve the rest from playerRec as the only affected memberId being null is of type "Self"
- Fix: Connection leak in digital scorecard submitted hook.
- Add: IX_ScoreIntent_MemberId_ScoreEntryStageId_ScoreId_DeletedDate because score intent scans.
- Add: IX_InterClubMessage_InterClubMessageActionId to speed up club inbox queries (suspect these were run from the app maybe?)
- Add: IX_ScoreIntentFollowup_PenaltyScoreId to avoid clustered index scans on ScoreIntentFollowup.
- Add: Index to avoid clustered index scans on WebSession table.
- MOD: #DG-6316: Updated Template SQL for notification. Copy provided by GI.
- Fix: Kiosk: Use current time in UTC when checking if a player has printed a scorecard in the last hour.
- Fix: Scorecard: CardPrintedInLastHour - Use TimeZoneInfo.ConvertTimeFromUtc to convert play date UTC to local time.
- Mod: Connector tray icon updated to our logo.
- Fix: Golf-Tourism: Header logo resizing.
- Mod: Updated Connector icon to match DotGolf branding.
- Fix: oops, overdid it.
- Mod: ClubCMS: England Golf website: scroll behaviour update: if applying the filters, scroll a bit only (still showing the filters to the user). If using the pagination, scroll up to the top of the results (as it did before).
- Fix: Connector: Hardcoded version number 1.0.36825.0 was being reported back to central rather than the actual running DLL version.
- Fix: Connector installer had one more incorrect path in there.
- Fix: Wix path again
- Fix: Connector installer build wasn't working due to new directory structure.
- Mod: ClubCMS: England Golf website: eg-news-detail: convert link buttons (btn-link)
- Fix: wyUpdate output path for update files needed to go up one more level because I moved things around a little bit.
- Fix: wyUpdate output path for update files needed to go up one more level because I moved things around a little bit.
- Mod: ClubCMS: England Golf website: when triggering a new club search, auto scroll down to the results; - no scrolling animation needed when using the pagination; just show the top (as it was before) - no scrolling animation needed during initial page load (initial results load), and when clicking the filter reset icon
- MOD: Live: Added link to Round Management V2
- Fix: Golf-Tourism: Header menu mobile responsive style.
- Fix: Golf-Tourism: Header menu styling fixes.
- Fix: Some package skulduggery to make analytics work after the package reference upgrade.
- Mod: ClubCMS: England Golf website: eg-news-detail/styles.css: removed unused styles; add rte__iframe styles; - wrap news article iframe in "rte__iframe", apply top and bottom margins - iframe responsiveness
- Fix: Upgraded casual golf API to package references.
- Revert SVN 55142. Only for NZ - I will put this back after I fix the calling code in the Kiosk.
- Mod: ClubCMS: England Golf website: don't get the results when updating the Category or Tag dropdown (to keep the behaviour consistent with the other filters here, and on F&P) - After resetting the filters, call getNewsArticles - Removed unused code
- Fix: API: Digital Scorecard: Do not put in place the 1 hour limit for card printing in DEV.
- Fix: API: Teebooking: #flexi-payment-options: Fixes and improvements part 3. Add: API: Teebooking: #flexi-payment-options: Unit tests. //TODO: Mock payment flow.
- MOD: Tournament V2: Fix unregister player and register again and add to teams
- MOD: Tournament V2: remove externs
- Mod: Temporarily disabled the flag to turn on house account payments for comp registrations, pending code review with Nikky.
- FIX: DG-6640: Update PenaltyScoresByPlayerDetail.sql to use LEFT JOIN to counter results without a ScoreIntentFollowUpId. Without this, GI reports and possibly others were falling over.
- Mod: ClubCMS DG-6651 Modify flexiclub sign up in NZ [MemberSignupV2] to modify the img source on the fly to show AMEX one if NZ else it'll stay the same as before which is the VISA and MC one.
- Mod/Fix: ClubCMS: GetNewsArticles: look for the search text in the article title also - update left join with CWTag - filtering by date: convert the article publish date to local time
- Fix: #5007044 Subs Summary Chart needed the same mod done to it that was done to the Unbilled Members Report, since users expect their totals to be the same.
- Mod: BackgroundTasks builds now, added Jenkinsfile, added Core/Shared references.
- Mod: Undo ramdisk experiment
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: Experiment: build in ramdisk
- Mod: No more parallel unit testing, it doesn't really help that much.  Run unit tests only for Development location.
- Mod: No more parallel unit testing, it doesn't really help that much.  Run unit tests only for Development location.
- Mod: Experimental: don't allow concurrent builds but don't abort previous because subversion gets itself in a knot
- Fix: Skipped tests should not fail the build.
- Fix: Skipped tests should not fail the build.
- Mod: Ignored test appears to fail the build, just comment the [Test] attribute for now.
- Fix: API unit tests directory not where I thought it was
- Mod: Experimental parallel unit tests
- Mod: Experimental parallel unit tests
- Mod: API unit tests in Jenkinsfile
- Add: Unit test runner for DotGolf.API solution.
- Mod: Upgraded API to Jenkinsfile, removed most of the externs.
- Mod: Navigation responsiveness improved by adding active/branding css the moment a new item is selected rather than only after the page reloads.
- Mod: Small formatting adjustment around nav render error messages.
- Fix: #51304 Queenstown could not see any green fees in the POG because no marker selection was possible; their deleted course was interfering with the marker select control, which was messing up the green fee select.
- MOD: Tournament V2: UI Tweaks
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: ClubCMS: England Golf website: change label colours to dark grey
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Fix: ClubCMS: England Golf website: feature content style 3: add the data-video attribute to the cta button only if isNavigateUrlAVideo is true
- Mod: images.golf.co.nz now TLS (need this as we're going to serve nav images from this domain)
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: ActivityTracker: Removing _deploy
- Mod: ActivityTracker: Removing _deploy
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn.
- Mod: Messing with groovy lists to see if we can speed the build up by not checking out unnecessary code from svn. Fix: Nav images still broken a little.
- Add: [Customer Satisfaction Survey] DG-6686 SVN ignore
- Fix: Issues with new image location for nav.  Removed UseStaticFiles() since /Shared is now gone.
- Add: [Customer Satisfaction Survey] DG-6686 - Hit debug in the IDE and this will run with "Base View" as text starting point. - Added docker and build files changing what's required as it has been ported from new TournamentV2 app.
- Add: [Customer Satisfaction Survey] DG-6686 - Hit debug in the IDE and this will run with "Base View" as text starting point. - Added docker and build files changing what's required as it has been ported from new TournamentV2 app.
- Mod: ClubCMS: England Golf website: admin-feature-content: check if the video url is a youtube url
- Mod: ClubCMS: England Golf website: if the Navigate URL is a video, use the data-video attribute and show the video in a popup
- Add: [Customer Satisfaction Survey] DG-6686 - Hit debug in the IDE and this will run with "Base View" as text starting point. - Added docker and build files changing what's required as it has been ported from new TournamentV2 app.
- Fix: Dunno why there was a switch statement here; removed and just pass through the Application value to IConfigurationProfile instead.
- Cleanup: Don't need bindings.list anymore, we use bindings.[profile].list now for Jenkinsfile builds.
- Fix: ClubCMS: England Golf website: search bar: remove the default curved right borders (seen on mobile in the middle of the input text control)
- Cleanup: Don't need bindings.list anymore, we use bindings.[profile].list now for Jenkinsfile builds.
- Cleanup: Removed /Shared extern from ActivityTracker.
- Mod: ClubCMS: England Golf website: adjust the video play button styling (as in the provided design)
- Mod: ClubCMS: England Golf website: adjust the video play button size (as in the provided design)
- Mod: Moved nav images to Images project so we don't have to extern them into every project where the nav is used.
- Fix: ClubCMS: England Golf website: fix applying of curved borders on mobile
- Add: ActivityTracker bindings files.
- Mod: ClubCMS: England Golf website: style update
- Mod: ClubCMS: England Golf website: eg-news-list css: use a generic / utility class (instead of the page name) to customise the styles on the Tag page
- Mod: ClubCMS: England Golf website: eg-club-search: if there's an error loading the image (e.g. not found), display the default thumbnail image
- Mod: ClubCMS: England Golf website: replace the green branding colour with the EG red branding colour
- Mod/Fix: ClubCMS: England Golf website: eg-club-search: after clearing the search text box and triggering searching, null out the geolocation coordinates. Resolve triggering of club search on page load.
- Mod: ActivityTracker Jenkinsfile build. Ignored some dlls in Live/Clubhouse bin directories.
- Add: [Customer Satisfaction Survey] DG-6686 Base skeleton TODO: - Add Vue to project - Modify app settings to match the Vue project front-end - Add DockerFile
- Add: [Customer Satisfaction Survey] DG-6686 Base skeleton TODO: - Add Vue to project - Modify app settings to match the Vue project front-end - Add DockerFile
- Stoke-O-Meter aka. Customer Satisfaction Survey
- Fix: Mailer build error (turns out we don't have a mailer build in dev)
- Fix: ClubCMS: England Golf website: eg-slider: make the admin button visible (it was previously overlapping with the full-width slider content)
- Mod: ClubCMS: England Golf website: admin-eg-hero: text update
- MOD: DG-6496: Updated Total scores entered report to include gender.
- FIX: DG-6668: Score Verification email to use System template instead of Squawk.
- Mod: Live: DG-6509 House Account Payment for Competition - Disable payment button after 1 click to prevent more than 1 submission of payment. - Changed the [ClubAllowHouseAccountPayment] to just bool and not bool?
- Mod: Live: DG-6509 Update to use the new default value checks for [GetHousePaymentSettingForCompetition]
- Mod: Live: DG-6509 GetHousePaymentSettingForCompetition default value is false for club level
- Mod: Live: DG-6509 House Account Payment for Competition Using club level settings - on by default if they have AX product enabled - Update the mouse cursor on ready to pointer
- Mod: Live: DG-6509 House Account Payment for Competition Using club level settings - on by default if they have AX product enabled
- Mod: Live: DG-6509 Club level setting for House Account payment for competition - boolean
- Fix: WHSAPI: ensure null-valued adj gross scores trigger a validation exception if there are no hole by hole
- Mod: Just touched a file here to see if connector updates still work.
- Fix: Assembly redirects were missing for ConnectorAPI production.
- Mod: Moved BackgroundTasks from Live to the root; it doesn't have to be part of Live.  Also removed it from Clubhouse.
- Mod: ClubCMS: England Golf website: updated club search query sorting; add extra condition for the keywords "ladies" and "artisans"
- *** DFH CODE REVIEWED TO HERE *** Mod: API: Teebooking: The following endpoints are disabled in production until the new DG app is released: /calculate-charges, /save-booking-changes, and /save-booking-changes-confirm.
- Mod: ClubCMS: Make ClubDto's ClubUID a nullable Guid - in some cases we don't use it, like EG F&P club search, so saves data not sending the client 1766 lots of  "00000000-0000-0000-0000-000000000000"
- Fix: ClubCMS: England Golf website: club description child <p> tag: font-size fix
- Mod: ClubCMS DG-6509 Commented the method causing build error and added to do note as its still todo so it doesn't hinder anyone with latest pull
- Typo in code comment
- Mod: Live: unit tests dont talk to SSM betterer
- Mod: Shared: unit tests dont talk to SSM betterer
- Mod: ClubCMS: EG F&P should only show clubs that we know are loaded into CRM (i.e. CRM has sent us at least one API call for that club)
- Fix: Sql: index name
- Mod: Live: DG-6509 Club level setting for House Account payment for competition
- Mod: Digital Scorecard: Card printed in last hour logic now applies to all environments. Previously, it was only used in prod.
- Mod: Live: DG-6509 Removed HouseAccountPayment - remove bindings
- Mod: Live: DG-6509 Removed HouseAccountPayment - remove bindings
- MOD: Tournament V2: Implement Unregister player
- Mod: Live: Only mark people as unbilled after the subs transaction processor has ran (then we REALLY know they are unbilled) v2 - SARGable Boogaloo
- Mod: Live: DG-6509 Removed HouseAccountPayment from competition table and making this club level instead so Competition.cs doesn't need to have lazyload
- Mod: ISVAPI: flag for when we've received an update to a club via EG CRM
- Fix: Amex: Fixes query from test data's of test member users.
- Fix: Org: deleted markers showing in Marker Information
- Fix: Live: deleted markers showing in Marker Information
- Fix: Live: membersearch crashing in IE
- Cleanup: Ignored .g.cs files.
- Mod: Core build a lot faster because generated swagger clients are no longer in subversion, so will be generated fresh on the client. Mod: Core build slightly faster due to copying NSwag required references only once.
- MOD: Tournament V2: Remove clear on file change
- Fix: Scorecard: Get card printed in last hour logic now checks play date based on the club region's time zone.
- Cleanup: Removed unnecessary package from DotGolf.Core.Tests (pulled in via DotGolf.Core already).
- Fix: DotGolf.Shared.Tests works now; we needed binding redirects to work and by default our app.config file is not loaded (due to NUnitTestAdapter). Found the answer at https://groups.google.com/g/nunit-discuss/c/LvybgBaJvEs?pli=1 which is to hack the APP_CONFIG_FILE in the appdomain data.
- MOD: Tournament V2: Initial changes on the Player profile, added API logic to import players using CSV
- Fix: Amex: Demo user setup for clients turn-over.
- Fix: Live: comp setup sending too many open fixture notifications for resaving comp
- Add: Live: DG-6509 House Account Payment for Competition - New setting in the registration option [Allow payment using house account] must be enabled with online payment - This also refunds the player if they'd paid with house account when removed by admin
- Fix: Live: SystemEmailProvider crashing with null param replacement value
- Merged revision(s) 55003-55079 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: Org: Dont set the Region name column on club for EG because is comes from CRM (postal region/county) ........ Mod: Dependency injection bootstrap simplified so that we don't have to set up new registrations in 2 places anymore.
- Merged revision(s) 55005-55067 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Fix: POG: Player's name length too long to fit in TBTimeSlotEntry.FullName (max 100) due to extra white spaces in the first and last name. #51199 ........ Mod: Dependency injection bootstrap simplified so that we don't have to set up new registrations in 2 places anymore.
- Mod: Converted Analytics to package references.
- Fix: Tests: should not connect to ssm
- Fix: Tests: should not connect to ssm
- Mod: ClubCMS: England Golf website: club search sort logic update: decrease priority of clubs with the keyword in the middle of their name
- Fix: Groovy: Trying to get rid of `null` in the msbuild command invocation.
- MOD: DG-6562: Maybe don't create a custom type. MemberChangeRequest.json.
- Fix: Tests: should not connect to ssm
- MOD: DG-6562: Removed id formatter for member change request report. MemberChangeRequest.json.
- Fix: ConnectorAPI: build. definitely @david
- Fix?: Core.Tests build failing for DI hell reasons - maybe app.configs will fix it...
- MOD: DG-6562: Implemented member club change report for governance. MemberChangeRequest.sql.
- Fix: Groovy empty parameter
- Fix: Groovy
- Fix: Amex: Fixes all possible UI fixes for clients turnover tests.
- Fix: Not groovy.  Trying to sort out passing extra parameters to MSBuild.
- Fix: Jenkinsfile for Connector, although deep down inside @marcus knows this is his fault.
- Fix: Bulkemail: build
- Mod: Autogenerated poco classes.
- Hack: Don't mess with the xunit test database names if this is the baseline database being built (T4 currently has a hardcoded db name it expects)
- Mod: ClubCMS DG-DG-6509 [Pay By House Account Online] Additional radio button for paying by house account if enabled in LIVE in registration options [Must have allow online payment enabled to use this function] - Added pay button disabling when user toggles between radio options and change cursor to waiting to give user feedback Add: Data/Competition.cs to load the setting [AllowPayByHouseAccount]
- Mod: Switched to package references for DotGolf.ConnectorAPI.csproj.
- Mod: Force single msbuild node for Connector build only; it is needed for this but just slows down everything else unnecessarily.
- Fix: BuildInfo: Alright maybe it's the revision then.
- Fix: BuildInfo: Should be GetExecutingAssembly, not GetEntryAssembly.
- Fix: Okay, fine, don't append AssemblyFileVersion if it isn't already there - dotnet does something weird with assembly versions, suspect you have to invoke the build engine with the version.
- Mod: AssemblyInfoGenerator will now update all AssemblyInfo.cs files found (since we have them in each library).
- Add: AssemblyFileVersionAttribute to DotGolf.Core so we can replace it with AssemblyInfoGenerator.
- Mod: AssemblyInfoGenerator integrated into Jenkinsfile shared libraries
- Mod: ClubCMS: England Golf website: eg-club-search: code clean-up
- Fix: ClubCMS: England Golf website: eg-club-search: if there's a placekeyword (e.g. search request from home page's club search widget), locate the place first before proceeding to the club search query
- Mod: ClubCMS: England Golf website: eg-club-search-widget: style update
- Mod: ClubCMS: England Golf website: eg-club-search-widget: allow user to click on the search icon; style updates
- Mod: AssemblyInfoGenerator integrated into Jenkinsfile shared libraries
- Mod: AssemblyInfoGenerator build: Had the archive path wrong
- Mod: AssemblyInfoGenerator build: Had the archive path wrong
- Mod: AssemblyInfoGenerator now builds a single EXE
- Add: AssemblyInfoGenerator utility to bake versions into AssemblyInfo.cs like choc chips into cookies.
- Mod: ClubCMS: England Golf website: tiles and content-tiles style updates
- Mod: ClubCMS: England Golf website: content-tiles: terraces_eg style updates
- Mod: ClubCMS: England Golf website: content-tiles: added cssClassName and applyTopCurveOnBackground (default: false) control properties; these will initially be used on the EG website
- Mod: ClubCMS: England Golf website: added ApplyTopCurveOnBackground control property to content-tiles
- Fix: Org: GetClubHierarchies working again
- Mod: ClubCMS: Move GetClubHierarchies back to Core (it's used in Org) and rename it so it's easier to understand. Removed unused params
- Fix: Backgroundtasks: build
- Mod: ClubCMS: England Golf website: added CssClassName control property
- Fix: Live/Org:  handicap change report not working in unions without entries in the province table
- Mod: ClubCMS: England Golf website: eg-feature-content: style update
- Mod: ClubCMS: England Golf website: eg-feature-content: added CssClassName control property
- Cleanup: Removed unnecessary registration of HandicapProviderWHS in Shared.
- Fix: ISVAPI: Build - missed file after clubcms refactor
- Fix: Core: Build - missed file after clubcms refactor
- Mod: ClubCMS: move more api stuff out of Core and into the api folder
- Mod: Dependency injection bootstrap simplified so that we don't have to set up new registrations in 2 places anymore.
- Mod: ClubCMS: England Golf website: eg-club-search: console logging updates
- Mod: ClubCMS: England Golf website: eg-club-search: console logging updates
- Mod: ClubCMS: England Golf website: club search sort logic update: increase the priority of clubs with the keyword as part of their name
- Mod: ClubCMS: rename Member.cs to MemberCms.cs
- Mod: ClubCMS: England Golf website: eg-news-list: added CssClassName control property; fixed related news articles styling
- Mod: ClubCMS: England Golf website: style update; added css utility classes
- Mod: ClubCMS: move more stuff out of Core => MemberCMS class. Deleted IVoucherLogic abstraction
- Mod: ClubCMS: Only send GI member card request reasons to the client if the client is allowed to see them
- MOD: Tournament V2: Show unteam players on Show All teams
- Fix: ClubCMS: Person who has ordered a new GI member card online could not order a replacement #5006794. Refactored some ClubCMS stuff out of Core
- MOD: Tournament V2: Added App preloader
- MOD: DG-6544: Probably best to disable the correct report..
- Mod: ClubCMS: England Golf website: eg-news-list: open news article in new window
- MOD: DG-6544: Disabled Top Improvers Report for GI Junior Girls Medal.
- FIX: Live #51198 Club Open Fixtures - Notifications
- MOD: DG-6562: Implemented new members report for governance of new members. NewMemberCountByDate.sql.
- MOD: DG-6455: Updated Member counts by club report, to include ClubID, breakdown by gender & junior status.
- Mod: ClubCMS iGolf DG-6545 Modified the email sending to check if its for iGolf and use the System email else use the old ways to send confirmation emails to members TODO: Why is the [[RECEIPTITEMS]] saving all weird for system email in the 'Payment Confirmation' - text file way is fine just not from DB
- THE OTHER HALF OF THAT REVERT (visual studio interfered while I was busy reverse merging, thanks M$)
- Reverse merged revision(s) 55042, 55038-55037, 55032 from Trunk: Fix: Last-ditch effort to make the T4 template work in both dev mode and Jenkins builds. ........ Fix: Apparently we need an Import in the core csproj to make it run T4 templates at build time. ........ Fix: Removed DotGolf.Core build event that was generating BuildInfo.g.cs. ........ Mod: EXPERIMENTAL DotGolf.Core BuildInfo and ConfigurationProfileResolver files are now generated with T4 templates, so no more weird build script stuff needed. ........
- MOD: Tournament V2: Add Player Management link to Org and update link of Live, allow registration when logged in as Org
- Fix: Last-ditch effort to make the T4 template work in both dev mode and Jenkins builds.
- Fix/Mod: ClubCMS: England Golf website: club search logic update: when matching the club name, prioritise names that start with the keyword
- Fix: BuildInfo.g.cs not working; also TextTransform import didn't work for net-6.0, so going back to a prebuild event.
- Fix: Apparently we need an Import in the core csproj to make it run T4 templates at build time.
- Fix: Removed DotGolf.Core build event that was generating BuildInfo.g.cs.
- Fix/Mod: ClubCMS: England Golf website: address flickering of "no clubs found"
- Fix: Amex: Finalise scheduled tasks for future release.
- Mod: EXPERIMENTAL DotGolf.Core BuildInfo and ConfigurationProfileResolver files are now generated with T4 templates, so no more weird build script stuff needed.
- Fix/Mod: ClubCMS: England Golf website: club search logic update; also search for the keyword in Club.PostalCode
- Fix: Amex: Leaderboard feedback fixes, and email notification finale.
- Mod: Adweb: ExtQuery reports can be saved with emojis now
- Fix: CasualGolf-Admin  #51144 Fix issue where it reading from temp directory failed. It's just loading from the URL that the file is uploaded to and load it back into memory stream. - Renamed 'fileName' to 'fileURL' as that's what it should be now. - Updated relevant notification to reflect this.
- Add: sql: emojis in ExtQuery reports 🎉
- Fix/Mod: ClubCMS: England Golf website: club search logic update
- Mod: Live/Org: Red line indicating counting scores now accounts for Not Eligible For Handicapping scores
- Mod: UnionAPI: Return DateTimeOffsets not DateTimes from getscore. Minor style changes
- Fix: Cognito auth: Refresh token cookie being overwritten with a blank after we get a new JWT.
- MOD: Tournament V2: Fix not redirecting to return URL
- Fix: Cognito auth: Refresh token cookie being overwritten with a blank after we get a new JWT.
- Fix: $WCREV$ instead of hardcoded version number.
- Fix: #clubhouse-merge HTML structure error.
- Fix: #clubhouse-merge ScorecardAdmin wasn't loading correctly due to incorrect placement of SCRIPT tag.
- MOD: Tournament V2: Redirect user to the URL before SSO login
- Mod: Adweb: update member merge text for swapping member numbers to be more clear
- Add: Amex: Added and move all amex methods & functions to AmexApi/AmexController .
- Fix: POG: Player's name length too long to fit in TBTimeSlotEntry.FullName (max 100) due to extra white spaces in the first and last name. #51199
- Fix: #clubhouse-merge Redirect bug between TabMembers and TabOrgMembers (and others)
- Mod: Org: Dont set the Region name column on club for EG because is comes from CRM (postal region/county)
- Fix: #clubhouse-merge Nav Home button took you to Live.
- Mod: More work on Clubhouse Jenkinsfile/build
- Mod: More work on Clubhouse Jenkinsfile/build
- Mod: More work on Clubhouse Jenkinsfile/build
- Mod: More work on Clubhouse Jenkinsfile
- Mod: More work on Clubhouse Jenkinsfile
- Fix: Moved Clubhouse solution to root - fixed project references.
- Fix: Renamed bindings.list to bindings.prod.list for new deploy scripts.
- Cleanup: Removed _deploy.
- Cleanup: Don't need this here, should have been deleted a long time ago.
- Cleanup: Removed old Org snapshot.
- Cleanup: Removed old Trunk container for Clubhouse stuff
- Mod: Moved Clubhouse solution to the root.
- Mod: More work on Clubhouse Jenkinsfile
- Mod: More work on Clubhouse Jenkinsfile
- Mod: ClubCMS: England Golf website: move the remaining rte styles from eg-rte/styles.css to main.css (the css is shared with other controls)
- MOD: Live: Added Tournament V2 link to Comp Dashboard
- MOD: Tournament V2: Show All Teams
- Mod: Bindings files added for Clubhouse to work with Jenkinsfile
- Mod: Bindings files added for Clubhouse to work with Jenkinsfile
- MOD: Tournament V2: Updates on Teams section
- Mod: Building Clubhouse Jenkinsfile
- Mod: Building Clubhouse Jenkinsfile
- Merged revision(s) 54279-54578 from Trunk/DotGolf.Live.Association/Trunk/DotGolf.Live.Association/DotGolf.Live.Association: Mod: ORG: DG-6460 Ability to upload LGDiscountCode through CSV file - Located in SettingsOrg.aspx ........ *** DFH CODE REVIEWED TO HERE *** Mod: ORG: DG-6460 Styling update with description to match the rest of the page. ........ Fix: Org member details not loading when you select a member from search results. ........ Fix: Org redirect so we don't get a blank default page. ........ Fix: Redirect if users accidentally hit old URLs that no longer exist in org. ........ Fix: Org: routing not working #5006679 ........ Mod: Org: allow unions to see scores for interop peoples ........ Fix: Org/Live TabUserProfile.aspx Redirect If the user hasn't got an associationId then we should redirect them to TabUserProfile as they're not Org user ........
- MOD: Tournament V2: Added other union brand logo
- MOD: Tournament V2: Copy navigation resources
- MOD: Tournament V2: Copy navigation resources
- Mod: Live: PCC for interop scores should display in UI. (now all we have to do it fetch the pcc cough cough...)
- Mod: sql: Score table index for fetching interop pcc
- MOD: Tournament V2: Copy navigation resources
- Fix: ClubCMS: Missing terms and conditions in signup form #5006790
- MOD: Tournament V2: Copy navigation resources
- Mod: ClubCMS: England Golf website: eg-club-search: NoOfHoles filter logic:
- Mod: API: change scoreintent confirm message [DG-6621] #5006862
- Mod: ClubCMS: England Golf website: eg-club-search: remove the options "All Amenities" and "All Programmes" as requested by Tom Allen
- Mod: ClubCMS: England Golf website: hide club image if it there's an error loading it
- Mod: ClubCMS: England Golf website: eg-club-search: update club image path
- Fix: ClubCMS: England Golf website: hide club logo image if it there's an error loading it
- Fix: ClubCMS: England Golf website: eg-club-search: do the geolocation detection also when using the Apply button
- MOD: Tournament V2: Allow multiple # of Teams
- Mod: Tests: Teebooking: Add teebooking related data when setting up membership categories. Fix: Tests: DotGolf.Shared.Tests.csproj - missing include statement for TeebookingTestsHelper.cs.
- Add: Tests: TeebookingTestsHelper.cs - Committing this file so I can use this in the DG API project.
- Fix: ClubCMS: England Golf website: eg-club-search: display the address in plain text if there's no Google Directions URL (i.e. coordinates aren't defined for the club); display full address (including Loc_Address4)
- MOD: DG-6316: Updated feature flag summary.
- MOD: DG-6316: Added feature flag to cron tasks.
- Mod: WHSAPI: reduce MemberLock spin-locking on members who are already being recalculated by only recalcing people who don't already have a memberlock taken out.
- MOD: Added NoOfPlayers to RSTeam to handle multiple number of teams in a comp
- Fix: Rogue %> lying around.
- MOD: TournamentV2: Do not run auto team name update when it's already updated by user
- MOD: Added IsNameUpdated column to RSEntry table to override auto Team name updates
- Fix: WHSAPI: recalc cancellation+retry needs a safe word, and that word is RecalculateFromAfterUTC=null
- Fix: WHSAPI: recalc cancellation doesnt need to update the person's handicap info because the recalc will resume right after.
- Fix: WHSAPI: recalc cancellation removed copypasted old unit test
- MOD: #DG-6603: Added Client validation to creating/updating items in admin resource hub.
- Fix: WHSAPI: recalc cancellation was not working correctly, whole point is if you recalc for 2000-01-01, then the cancellation should be allowed to set it to 2008-01-01
- MOD: Tournament V2: Added Player Profile components
- Upd: Amex: Logged-in page leaderboard functionality complete.
- Fix: Xero sync could not cope with a rogue invoice that was created and attached to our Subscriptions contact manually.  Now we'll ignore these invoices if we don't know their InvoiceID.
- Mod: ClubCMS: England Golf website: eg-club-details: reduce the space above the address if there's no facility description
- Mod: ISVAPI: club name updates via CRM now correctly update course name
- Fix: ScheduledTasks unit tests: see if I can mark the build as unstable instead of failing it if unit tests fail.
- Fix: Xero invoice parsing error when dealing with credit notes (these have ACCRECCREDIT and ACCPAYCREDIT statuses that we didn't handle before)
- Mod: ClubCMS: England Golf website: eg-news-detail style updates
- Mod: ClubCMS: England Golf website: transfer the my golf login and password reset styles from the eg-menu css file to EG's main.css
- Mod: ClubCMS: England Golf website: added default-image css class
- Mod: Info lines were logged as Errors in kounta sync job.
- Fix: ClubCMS: England Golf website: fix space between hero and content
- Mod: Hooks: Move ICourseUpdated to Core so ISVAPI can use it
- Fix: WHSAPI: no longer will a recalc of one person with 6000 scores break WHSAPI. (MemberLocker would lose it's lock after 10s, meaning multiple nodes could pick up the same person, causing an infinite loop). We now pause the recalc in progress if it runs too long, for another process to pick up.
- Fix: ClubCMS: England Golf website: eg-menu: fix scrolling issue for the My England Golf menu on mobile
- Fix: ClubCMS: England Golf website: eg-menu: fix scrolling issue for the My England Golf menu on mobile
- Mod: ClubCMS: England Golf website: eg-menu: under the My England Golf menu, display Log in first; fix scrolling issue for the My England Golf menu on mobile; rephrase "My Golf" to "My England Golf"
- Upd: Amex: Complete leaderboard functionality based on scheduled tasks sample data workflow.
- Mod: tasks: severity level Warning if API addscore fails
- Mod: tasks: severity level Warning if API addscore fails
- Add: Subs renewals: Unit test to cover renewing members into new categories. Mod: Eliminate CMembers that have future retry dates in the SubAutoRenewalRetry table so we don't accidentally attempt to charge them if the job is run twice for some reason.
- FIX: Tournament V2: SSO not logging out
- Mod: ClubCMS: England Golf website css: added utility classes; updated partner logos styling
- Mod: #ducttape Added process id into the unit test database name for release builds so that Jenkins can unit test multiple environments at the same time.
- Fix: Cron timezone thing wasn't working because I didn't actually use the determined timezone.  This needs unit testing...
- MOD: Tournament V2: Commit to fix build
- MOD: Tournament V2: Latest changes for player management and teaming up players
- MOD: #DG-6567: Fixed email typo
- Fix: Subscription Renewal Processor: SubAutoRenewalRetry table needed a ClubId to be safe to use for multiple clubs in the same database.
- Mod: Autogenerated poco classes.
- Add: SubAutoRenewalRetry.ClubId column (not nullable) - had to purge most of the past data to make this happen.
- Mod: ClubCMS: England Golf website: eg-menu style updates
- Fix: ClubCMS: sql error prev commit
- Fix: oops, missed AssemblyInfo.cs, it's no longer generated from a template.
- Fix: ClubCMS: England Golf website: eg-feature-content style fix
- Add: #igolf-renewals Script to patch up the SubAutoRenewalRetry data, adding the time back onto RetryDate.
- Fix: ClubCMS: England Golf website: eg-hero margin on mobile
- Cleanup: #igolf-renewals Removed old school AssemblyInfo.cs versioning with SUBWCREV in favour of BuildInfo.Revision.
- Mod: #igolf-renewals Moved subscription renewals for iGolf into its own scheduled task so we can control the timing of this more precisely.  It should now run at 00:05 BST (not UTC).  Renewals across midnight should work fine (I have added unit tests earlier to check that this is all good)
- Add: #igolf-renewals CronTimeZone property in IScheduledTask that you can optionally implement to specify a custom timezone for the cron line.  We need this to launch iGolf renewals at 00:00 BST.
- Mod: ClubCMS: remove InsertAffiliate/AddLapsedMemberToAnotherClub and use shared (unit tested) method instead. Members signing up for futures were getting their home club changed to futures [DG-6571]
- Fix: Grrrrr had to register IClock in SharedModule.cs.
- Add: More test cases around renewals after midnight.
- Fix: SubAutoRenewalRetry.RetryDate is now a datetime consistently (it was previously set to a truncated date which meant lots of edge conditions) Fix: SQL syntax error inserting CMemberItem records if the final payment failed after 14 days. Add: Unit tests to exercise a full 14 day workflow with accepted and declined payments and with the member being resigned or invoiced.
- Mod: ClubCMS DG-6610 This is a tidy up of the open fixture text and visibility - NZ will show 'Region' not 'County' - England and Ireland will still see 'County' and not Region - Province text and control will only for for Golf Ireland Add: new typescript definition for Lang - $lang is now callable anywhere in ClubCMS being global variable. eg. in NZ calling $lang.GoverningBody.toString() will return 'Golf New Zealand' - "somestring".toProperCase() is also a global method that can be applied to any string. eg. "helloWorld" -> "helloWorld".toProperCase() will return "HelloWorld" this can be used in conjunction with $lang.GoverningBody.toString().toProperCase()
- Mod: ClubCMS: content-html: added CssClassNameDiv2 control property; This will initially to be used to display the partner logos on the EG website. We needed a second level div tag with the css utility classes. And with this, the admin user can edit the logos without touching the utility css classes required to style the logos.
- Mod: iGolf renewals: We now have a window spanning midnight (local time) that we can do renewals in; it'll work from 8pm until 6am (but the job should be scheduled around midnight so we start charging people at that time). Mod: TransactionProcessor timeout changed to 6 hours in case the large batch from iGolf takes longer than we think. Fix: Made the SubAutoRenewalRetry update more resilient by using the PK value (SubAutoRenewalRetryId) rather than filtering on the date.
- Fix: Club.Region should not be nullable because the underlying column doesn't allow nulls.
- Mod: ClubCMS: England Golf website: partner logos css
- Fix: ClubCMS GolfIE Update back link when viewing high perfomance player going to 404 not found due to page having been deleted.
- Mod: CMember change requests visible to anyone now that Adweb isn't as annoying with its messages (thanks @nikky)
- Add: Moar unit tests for subs auto renewals. Fix: Category item amount changes would not take effect until the next day; any update should really be immediate.
- Revert: Change to Configuration/ConfigurationProfileResolver.Debug.cs.
- MOD: #DG-6567: Implemented Deceased inter member notifications.
- MOD: #DG-6316: Alert Format.
- Cleanup: Comments, refactoring.
- Fix: ScheduledTasks unit tests: missing some stuff that stopped it working in an empty database
- Mod: ScheduledTasks Jenkinsfile: trying to get mstest parsing to work
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Fix: Tests: Hardcoded MemberId worked on my local, but not Jenkins
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Starting to add unit tests to ScheduledTasks Jenkinsfile
- Mod: Updated Analytics Jenkinsfile
- Mod: Disable concurrent builds; just abort older ones
- Mod: Disable concurrent builds; just abort older ones
- Mod: Jenkinsfiles allow building on build2 now
- Cleanup: Scheduled Tasks Jenkinsfile updated to merge stages together (+flyweight approval)
- Cleanup: Scheduled Tasks Jenkinsfile updated to merge stages together (+flyweight approval)
- Fix: SubscriptionRenewalProcessor: Leap years are handled properly now (you get Feb 29th too if you started on Mar 1st and will be renewing in a leap year)
- Mod: SubscriptionRenewalProcessor: Uses IClock for times now.
- Add: IClock interface and Core implementation to allow us to inject arbitrary dates/times when unit testing.
- Mod: ClubCMS: England Golf website: set keyword to null if it's empty text; reset geolocation coordinates if there's no geolocation search results
- Fix: Core Settings.ClubCMS and Settings.Membership properties were never assigned in the constructor, so we got ORNS exceptions when trying to access these.
- Mod: Subscription Renewal Processor unit tests are tidy and working now.  I've extended this to add a few more tests around approved/declined cards and start..end date ranges.
- Fix: ClubCMS: England Golf website: club search query fix
- Fix: ScheduledTasks: Subs autoresign email better now for GBI
- Mod: ScheduledTasks: move scoreintent followup task to Core
- Mod: Live: Adding missing styling and information per spec
- Fix: ClubCMS: England Golf website: since Resource Hub Detail / Feedback is using Google reCAPTCHA v3, create a new Setting for it called RecaptchaSecretv3.
- Mod: ISVAPI: propercase names coming in from CRM if they are obviously uppercase
- Fix: CasualGolf Admin Web #51026 The issue around ErrorInfo: the given paths format is not supported.
- Fix: CasualGolf check for null in request pre-looking for the querystring
- Add: comment to clarify NZ/UTC timezone for scheduled task cron lines.
- Mod: ISVAPI: propercase names coming in from CRM
- Fix: SubscriptionRenewalProcessor: Copy pasted the contents of the SummaryReport.txt and SubsPaymentConfirmation.txt e-mail templates into SubscriptionRenewalProcessor.cs since we are now referencing Passport type from DotGolf.Core but e-mail templates (.txt files) is residing in DotGolf.Shared. Fix: Remove @Description when inserting CMemberItem. Fix: SubscriptionInstalment: Use the Passport class full name from DotGolf.Shared so if someone copies this code into DotGolf.Core, it will generate a compilation error.
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Upd: Amex: Commented all code-base for now.
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: Approval being moved to flyweight job
- Mod: WHSAPI: Kill unused index IX_Score_OrphanChildren_Filtered - as well as 9h orphans, it catches all 18h scores, so isn't very useful
- Fix: Attempt to stop connector tray icons hanging around after an update has taken place.
- Mod: ClubCMS: England Golf website: eg-club-competitions: style updates
- Mod: Reverted back to http:// for connector-api updates.
- Fix: ClubCMS: England Golf website: eg-club-search: remove duplicate clubSearch call
- Mod: Shared: TransactionProcessor SubscriptionInstalment uses new Core Invoice method for creating payments rather than obsolete Shared/Data/Invoice.cs method
- Mod: Connector: Touch license file to bump revision number.
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Fix: ClubCMS: rMemberSignupConfirmationV2: #igolf-signup - Transaction caused blocking when trying to create a receipt after successful payment. https://dotgolfinternational.freshdesk.com/a/tickets/5006821
- Mod: Don't use TASKKILL when jenkins is building this project.
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Fix: ClubCMS: England Golf website: when resetting the search filters, reset the geolocation coordinates, too
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Cleanup: Connector build - removed _deploy from ConnectorAPI.
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Mod: Connector Jenkinsfile work
- Fix: ClubCMS: England Golf website: ClubSearch: fine tune the query used to match the keyword to the Club Name (to get the coordinates)
- Fix: Connector build: sign-binaries.cmd paths.
- Cleanup: Connector: Include C:\Build Assemblies for MSBuild (this is needed for the Connector build - for now)
- Cleanup: Connector: Okay fine, just build AR the way it was before; suspect it's missing some global config thing; will look into that.
- Cleanup: Connector: Removed bindings
- Cleanup: Removed bindings, fixed ActiveReports references which should be to the local bin/ directory.
- Mod: Connector Jenkinsfile work
- Mod: Connector build Jenkinsfile
- Mod: ClubCMS: England Golf website: make the search icon in the textbox clickable
- Add: ConnectorAPI bindings files.
- Add: DotGolf.Connector Jenkinsfile (this will be a long road)
- Cleanup: Connector is now a single solution that builds both the API and the Connector service (including the WiX installer build)
- Mod: ClubCMS: England Golf website: menu style updates
- Mod: Moved Connector and ConnectorAPI into /DotGolf.Connector.  These are related as the Connector updates need to be published into the API root.
- Mod: Removed DotGolf.Live.Connector extern, don't need this here anymore
- Mod: ConnectorAPI: Shared and Core referenced from /
- Mod: ClubCMS: England Golf website: menu style updates
- Mod: Live Teebooking remove the tiny black line underneath the 'x' in the Tee selector dialog
- Fix: ClubCMS: England Golf website: when there's no keyword and no coordinates, sort by name
- Fix: Should use the transaction connection if it's there.
- Fix/Mod: ClubCMS: England Golf website: search by club name fix
- Fix: Transaction caused blocking in new Core code in Xero Subs Sync.
- Fix: Live #51075 Missing select clause for the new relationship and medical conditions for players. Non-Affiliate
- Fix: API: #flexi-payment-options: /load-slot-for-editing - Fix ORNS bug.
- Fix: API: #flexi-payment-options: Stop /load-slot-for-editing from crashing if wa_TBFindPayeeKeys returns duplicate rows for the current logged in user.
- Fix: Pipeline builds: Slack notifications don't work if you're inside a folder (like England) because the job full name includes the folder name.
- Mod: Break while loop in the card poller job if cancellation is requested (usually because we're deploying a new version of the app).  This is to avoid random exceptions when publishing.
- Fix: Function booking search failing because suspected new dependency injection.
- Mod: WHSAPI: We now scale 9h scores by using the equivalent 18h course handicap (RoH 6.1a) to find Net Par on holes 10-18  [DG-6546]
- Fix/Mod: ClubCMS: England Golf website: fix the reset feature (keyword was not properly resetting); if debug=1, show the geolocation data, and search filter details in the browser console
- MOD: Bulk Email: Set maxRequestLength to allow 6mb GIF upload
- MOD: ClubCMS: Added Age Group Filter in Open Fixtures
- Fix: ClubCMS/GolfNZ #50947 - Takapuna Green Fee selection for HandicapOnly members Fix where the HandicapOnly green fee option was not present for the members belonging to the group. Passing in MemberId of the booking members to match their specific group and matching applicable green fees.
- Revert: Yeah, thought I'd tried this before.
- Mod: Jenkinsfile to use flyweight executor for the approval step.
- Add: Some unit test stuff for subs renewal tasks.
- Upd: Amex: UI clean-up updates.
- MOD: #DG-6191: Update System Email Template SQL Script
- Mod: Autogenerated poco classes.
- MOD: #DG-6191: Update System Email Template SQL Script
- Add: DG-6589: Fixture Filter field to Competition Setup.  Data is stored in Competition.FixtureAgeGroup; NULL is default/everyone, J is juniors, S is seniors.
- Fix: API: Teebooking: #flexi-payment-options - More bug fixes and improvements part 2.
- Fix: Clubhouse: Datepicker works in SIC now (imported the same jquery addon js file twice)
- Merged revision(s) 54672-54692 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Fix: Live: Don't allow card request for new people more than once #5006736 ........ Fix: Live: Don't allow card request for new people more than once #5006736 ........ MOD: #DG-6191: New home to secondary system email & inter club message when someone automatically becomes a home member at another club. ........ Cleanup: Slightly updated the help text on the score entry page since it was so horrifyingly dated. ........
- Mod: `aws ssm list-command-invocations` is cpu-heavy, so increased to loop time to ease up on the processor a bit.
- Mod: ClubCMS: England Golf website: restrict geocoding to UK only, club search query update/fix
- Mod: WHSAPI: GetScore now uses the score listing code (small hack...) because otherwise we can't get adjustments properly so the SDPostPCC is wrong and now actually has tests 😅
- Cleanup: Slightly updated the help text on the score entry page since it was so horrifyingly dated.
- Fix: WHSAPI: log more stuff.
- Fix: Org: JuniorGirlsMedal report was including scores not eligible for handicapping
- Mod: WHSAPI: GetScore now uses the score listing code (small hack...) because otherwise we can't get adjustments properly so the SDPostPCC is wrong
- Mod: ClubCMS: England Golf website: still allow to search by club name (not just rely on the google geocoding result); prioritise exact club name match
- Fix: ConnectorAPI will now return 200 OK if you GET /.  This is to make Jenkins happy.
- MOD: #DG-6191: New home to secondary system email & inter club message when someone automatically becomes a home member at another club.
- Mod: ISVAPI: CRM can now change club name. Have not told them yet because there's still the issue of course names
- Mod: ISVAPI: CRM can now change club name. Have not told them yet because there's still the issue of course names
- Mod: Org: Move IClubUpdated hook to Core so ISVAPI can use it
- Mod: Had to sprinkle some Thread.Sleep()s in here to disambiguate time in the history export service tests.
- Mod: Had to sprinkle some Thread.Sleep()s in here to disambiguate time in the history export service tests.
- Fix: Live: Don't allow card request for new people more than once #5006736
- Fix: Live: Don't allow card request for new people more than once #5006736
- Mod: ClubCMS: England Golf website: eg-club-competitions: hide the Entry column entirely if there's no single Entry link in the table
- Fix: Live: Settings menu regex causing it to use DG theme
- Add: API: New WHS merge webhook to notify unions when one of their members gets merged somewhere else.
- Mod: Live: Only mark people as unbilled after the subs transaction processor has ran (then we REALLY know they are unbilled)
- Fix: API: Teebooking: #flexi-payment-options: Home club member booking with visitors paying for themselves - if you remove yourself from the booking and the other players will be paying for themselves, you should not be asked to pay for the booking.
- Mod: ClubCMS: England Golf website: spacing updates
- Mod: ClubCMS: Golf Ireland website: Ticket 5006422: capitalise the main links / nav items only; leave the rest within the #gb-ls element as is.
- Mod: ClubCMS: Golf Ireland website: Ticket 5006422: remove capitalisation on the paragraph text within the #gb-ls element
- Fix: ClubCMS: Startdates incorrect for new flexiclub members (12 hours behind what they should be)
- Mod: ClubCMS: England Golf website: use Google Maps Geocoding API, Maps JavaScript API to find the coordinates based on user-entered location or postcode
- Fix: ScheduledTasks: missing dependency registration in shared for SubscriptionRenewalProcessor
- Fix: ScheduledTasks: Refunds not reporting correctly in GBI because of windcave creds to existing.
- MOD: TournamentV2: Added CompetitionType.cs and CompetitionTypes.cs in Core
- MOD: #DG-6316: Minor changes to placeholders names in SQL & updated params variables.
- Fix: API: #flexi-payment-options: Bug fixes and improvements.
- Mod: Org: Squad selection report for EG mods for County level squads
- Fix: ClubCMS: #50945 Online Event Registration email sending Fix where if a club has multiple managers email set up and a member enters a club competition through the club website we spam all the manager listed. If they have opted in to have "Competition Team Manager/Caption" email in the settings. It will only get sent to the designated email in this setting.
- Fix: ClubCms: if someone is a casual golfer, they'd be blocked from signing up to flexiclub by the unfinancial check
- Mod: ClubCMS: England Golf website: style update
- Add: Org: Squad selection report for EG
- Mod: ClubCMS: England Golf website: eg-menu control: profile image style update
- Fix/Mod: ClubCMS: England Golf website: eg-club-details: logo image style fixes/updates
- Mod: AdWeb DG-6370 Showing score merge history for Member account. Will pull in Casual accounts too if it is linked with relevant links.
- Mod: ClubCMS: England Golf website: eg-club-search: address and phone layout updates
- FIX: ClubCMS: When RegionId is present, the filter of radius should be ignored
- Mod: ClubCMS: England Golf website: style update
- Fix: UNIONAPI: Should log requests even if there is no content type.
- Fix: ISVAPI: Should log requests even if there is no content type.
- Mod: ClubCMS: tidy up some code and css styles for igolf payment confirm emails - #5006768
- Mod: ClubCMS: England Golf website: menu style updates
- Mod: Autogenerated poco classes.
- Mod: sql: increase system email name length (we've got lots of system emails now, so need to allow for more descriptive names)
- Fix: sql: updated email template name since system email name limited to 50 characters
- Merged revision(s) 54612, 54614-54615 from Branches/Trunk.2022-06-20.handicap-committee-alerts-to-clubs: MOD: #DG-6316: Implemented new schedule email task for Handicap Committee Alerts ........ MOD: #DG-6316: Added Template SQL and updated template to use a summary for notifications ........ MOD: #DG-6316: Updated template subject. ........
- Fix: Golf-Tourism: Fixes tourism query for non-existent courses in dbo.Facility table.
- Merged revision(s) 54579-54611 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Fix: Org/Live #50865 If the user has AssociationId attached they should be redirected to the Org one as they're Org user. - It was causing "too many redirect" issue before ........ MOD: Live: Move GetEligibleCompetitionRounds to Core Competitions and added CompetitionRound and CompetitionRounds to Core ........ Mod: Live: Allow clubs to delete members if their only remaining invoices are zero dollar invoices #5006647 ........ Mod: Live #50865 Added a way for smaller clubs without "NG" product code enabled to manage user accounts. If they are enrolled in the role. TO REMOVE IF ALL CLUBS ARE MEANT TO BE IN NG ........ Fix: Live: Error condition in some code that never gets hit anyway when creating members ........ *** DFH CODE REVIEWED TO HERE *** Mod: Live #50865 Forgot to actually check to make sure the logged in user/club doesn't have NG as part of their product suite. ........
- Merged revision(s) 54481-54530 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Fix: Live: builder after amputating EF cancers ........ Mod: Live DG-6395 Reverted to the old logic and manipulating checkboxlist to conform to what we want on the front-end She's not pretty but it works ........ Mod: Live DG-6395 Name change to method ........ Add: Live: score listing for members we access via interop. (otherwise there's no way to find scores you enter for them once you leave the SIC) [DG-6504] ........ Fix: Live: ProcessRenewals refactor ........
- Merged revision(s) 54427-54437 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Mod: Moved Scheduled Tasks to /DotGolf.ScheduledTasks. ........ Fix: Live build after moving Scheduled Tasks out of the way. ........ Mod: Live: DG-6479 #50690 Limit the functionality to DotGolf internal use only ........ Mod: Removed Scheduled Tasks projects from the Live solution until we can find a cleaner way to do this. ........
- *** DFH CODE REVIEWED TO HERE *** Mod: Live #50865 Forgot to actually check to make sure the logged in user/club doesn't have NG as part of their product suite.
- Fix: Live: Error condition in some code that never gets hit anyway when creating members
- Mod: Adweb: Member merges now insert into the MergeHistory table
- Mod: Adweb: Member merges now insert into the MergeHistory table
- Mod: Live #50865 Added a way for smaller clubs without "NG" product code enabled to manage user accounts. If they are enrolled in the role. TO REMOVE IF ALL CLUBS ARE MEANT TO BE IN NG
- Mod: ClubCMS: England Golf website: eg-club-search: if the keyword exactly matches a club's postal code, use the club's coordinates to filter the results. Include all clubs within the 20 mile (32 km) radius
- MOD: Bulk Email V3: Allow 6mb GIF upload
- Mod: ClubCMS: England Golf website: ClubSearch: when the user enters some search text, sort the results by: 1. exact club name 2. city (location) 3. part of the club name
- Mod: Live: Allow clubs to delete members if their only remaining invoices are zero dollar invoices #5006647
- MOD: Live: Move GetEligibleCompetitionRounds to Core Competitions and added CompetitionRound and CompetitionRounds to Core
- Fix: ClubCMS #50884 Handicap Ranking reinstate clicking on the players' name - redirect to their scoring history and stats. This now opens a new tab.
- Fix: UnionAPI: if OCS returns 404, we need to handle it nicely, not throw it up to our clients
- Mod: ClubCMS: England Golf website: style update
- Mod: Sql: drop trigger than populated member.computerno because it's dead now and is causing me unit test pain
- Mod: ISVAPI/Live/Org Turn on Scotland score return for GBI
- Fix/Mod: ClubCMS: England Golf website: eg-club-search: style fixes/updates
- Mod: CRMAPI: ensure club contact gets marked as deleted if all it's data gets killed via CRM
- FIX: ClubCMS: News Article error
- Fix: ClubCMS: England Golf website: GetRegionsFromClubTable: exclude virtual clubs' regions
- Fix: Org/Live #50865 If the user has AssociationId attached they should be redirected to the Org one as they're Org user. - It was causing "too many redirect" issue before
- Fix: Org/Live TabUserProfile.aspx Redirect If the user hasn't got an associationId then we should redirect them to TabUserProfile as they're not Org user
- Mod: ClubCMS: England Golf website: eg-club-search: style updates
- Mod: Core: Regen WHSClient.g.cs
- Fix: CRMAPI: clubs being given Head Pros with the name "Head Pro" by accident
- Fix/Mod: ClubCMS: England Golf website: eg-club-search: style fixes/updates
- Add commend to tournament tree to remove or use 3 place node Search 'remove this style if 3 place match is not required' in style
- Mod: Scheduled tasks: TeebookingTransactionProcessorTask runs at 10:40pm UTC (11:40pm BST), so that people's iGolf 30 day free trials expire as close to midnight as possible (so that EG's terms and conditions don't need to be re-written... 🙄)
- Add: ClubCMS DG-3983 #50702 Add ability to dismiss recent comments in the scores.
- FIX: TournamentV2 Nav always active
- Mod: ClubCMS: England Golf website: updated some placeholder text from "All" to "Any" (seems more appropriate for those options)
- Mod: Org: allow unions to see scores for interop peoples
- MOD: Live: Added TournementV2 application URLs
- Css done
- Fix: ClubCMS: England Golf website: club search: match all the amenities/programmes if there are multiple amenities/programmes selected.
- Mod: ClubCMS: England Golf website: GetClubImages: convert filename to lowercase
- Mod: ClubCMS: England Golf website: member benefits-related css
- Mod: ClubCMS: England Golf website: iGolf-related css
- Mod: ClubCMS: England Golf website: added css styles (eg member, igolf)
- Fix/Mod: ClubCMS: England Golf website: ClubSearch: convert the file extension to lowercase; search for the keyword in Club.FullName as well
- Mod: Autogenerated poco classes.
- Mod: ISVAPI tests: test for updating club phone over 20 chars
- Mod: sql: update club.phone column to accommodate values like "01905 796375 opt1 Pro Shop" i.e. with extensions
- Mod: Autogenerated poco classes.
- Mod: sql: update website column on facility table to match club
- Mod: ISVAPI tests: test for updating club website over 100 chars
- Mod: Autogenerated poco classes.
- Mod: Sql: column length increase for Website col - EG need this " http://www.marriott.com/hotels/travel/emags-breadsall-priory-marriott-hotel-and-country-club/?scid=bb1a189a-fec3-4d19-a255-54ba596febe2 "
- Mod: sql: fncStripHtml: updated recent commit just to add checking if the function exists already before creating it
- Mod: WHSAPI: Fire webhook when member is merged so we can update unionland
- Add: fncStripHtml: this function will allow us to easily strip out all html tags from a string.
- Mod: ClubCMS: England Golf website: add Entry column (WebLink)
- Fix: Clubhouse.sln: remove Scheduled Tasks since they have a new solution
- Fix: Live: prevent ORNS by sending nice error message if someone's session expires but they are still trying to enter scores.
- Fix: Live: ProcessRenewals refactor
- Fix: ClubCMS: new Process renewals needed in member signup page
- Fix: ClubCMS: Event registration error
- FIX: ClubCMS: Added Publishe Datetime validation to Resource Hub creation
- Mod: ScheduledTasks: Unit test a little simpler
- Fix: Barebones unit test for subs renewal actually passes now.
- Fix: Live/Org: Restore original IE member quick search behaviour
- Fix: Member quick search stopped working in Org because ClubId==0 for associations.
- Fix: Org: routing not working #5006679
- Fix: ISVAPI: Build
- Fix: Adweb: build
- Fix: API: build
- Fix: ClubCMS: almost fixed the build. david can do the rest
- Fix: Org: build
- Fix: Live/Org: quicksearch showing incorrect membercode
- Fix: Build: everything
- Fix: Missed file in last commit.
- Add: Competitions businesslogic class to Core; also refactored one of the Shared Competition properties into here as a demo.
- Tree matches add
- Mod: Working on unit tests for SubscriptionRenewalProcessor.  Not passing just yet...
- [Major] Refactor: Moved SubscriptionRenewalProcessor to Core (dragging everything it needs along with it).
- Mod: Live/Org DG-6387 HandicapChangeReport Added province filter for Golf Ireland. If the province filter is used it will ignore the club filter.
- Add: Live: score listing for members we access via interop. (otherwise there's no way to find scores you enter for them once you leave the SIC) [DG-6504]
- Fix: ClubCommunications: Teebooking - members only filter now working. Missing recipient passport Id when inserting to BulkNotificationRecipient table causing SQL exception "The INSERT statement conflicted with the FOREIGN KEY constraint "FK_BulkNotificationRecipient_Passport".".
- Fix: Core: Error when submitting adjusted gross scores to OCS
- Fix: Org: membersearch lookups by number not working in SIC #5006683
- Mod: Live DG-6395 Name change to method
- Mod: Digital Membership Card: Enable for IRE and WAL in staging environment only.
- Mod: Live DG-6395 Reverted to the old logic and manipulating checkboxlist to conform to what we want on the front-end She's not pretty but it works
- Mod: Golf Ireland: Competitions menu style updates Ticket 5006626
- FIX: BulkEmail: Fix error on app notification compose
- Fix: Live: Lost some icons on member score listing. Mod: Live: member score listing shows correctly for people across unions
- Fix: ProcessDPSResponse: Nomads competition registrations - pay by existing card now working. Successful status is now saved after receiving the payment outcome from WindCave instead of doing it in ProcessDPSResponse page - we are no longer using session to pass this data from the registration to the ProcessDPSResponse page. #50857
- Fix: Clubhouse: build after amputating EF cancers
- Fix: Shared: build after amputating EF cancers
- Fix: Live: builder after amputating EF cancers
- Mod: Shared: amputate some more EF cancers
- Mod: Shared: amputate some EF cancers
- FIX: ClubCMS: Fix new article saving with multiple news group
- Mod: ClubCMS: England Golf website: eg-club-search (Find & Play): allow multiple selection of amenities and programmes
- Mod: API: Move TraceExtension.cs to API because thats the only place it's used
- Upd: Amex: Updated member overview section data display at logged-in page.
- Fix: Core: test failures after behaviour change member lookup
- Fix: WHSAPI: was not returning people's home clubs when performing x-union visitor lookups. We now allow it, pretty much matching what Interop allows.
- Mod: AdWeb: CW Pages: Display actual control name from our source code so we don't have to go to the DB to get this info.
- Mod: We'll have a DotGolf.Subscriptions namespace soon, so explicitly referencing the Subscriptions settings class to get that out of the way.
- Upd: Amex: Updated Amex sign-up/registration CRUD implementations.
- Fix: Org: Navigation not branded correctly after clubhouse mods #5006644
- Mod: Core: commit flowchart for score intent followup for reference
- Mod: Refactored ScheduledTasks - removed old (unused) Tests project, created new DotGolf.Core.ScheduledTasks library to house .net6+ tests, created new Core.ScheduledTasks.Tests library for new unit tests.  Scheduled tasks will now be loaded from both the console exe as well as the DotGolf.Core.ScheduledTasks library.
- add search input
- Add search input component and update TeamEditModal.vue
- MOD: Tournament V2: Front-end updates
- Fix: Teebooking: Multi-course clubs (SearchSlots.aspx) - Provide CourseId GET parameter (if it's available) so we can see only timeslots from that course.
- Mod: Golf Ireland website: updated footer text Ticket 5006612
- Fix: API: Teebooking: /apply-booking-changes - Ensure entry paid date is set if there is no outstanding payment.
- Mod: Shared: Code comment on extquery param
- Mod: ClubCMS: England Golf website: trim the keyword text; allow the user to use the text 'golf club' when searching
- Mod: ClubCMS: England Golf website: exclude virtual clubs from the club search query
- Add: Amex: New controls and new Dto for Amex stableford shootout.
- Add: AMEX: Added new third party record AMEX2022.
- Fix: WebAPI package got clobbered with that last merge, and random obsolete files got included again.
- Mod: Removed Scheduled Tasks projects from the Live solution until we can find a cleaner way to do this.
- Fix: Damn batch file syntax...
- Fix: Damn batch file syntax...
- Fix: dgPackagePrepare didn't work for apps without a bindings file.
- Fix: Scheduled tasks needs Core,Shared Tests projects too.
- Mod: Live: DG-6479 #50690 Limit the functionality to DotGolf internal use only
- Fix: Groovy syntax error
- Mod: Scheduled Tasks upgraded to Jenkinsfile.
- Fix: Scheduled tasks build.
- Fix: Live build after moving Scheduled Tasks out of the way.
- Mod: Moved Scheduled Tasks to /DotGolf.ScheduledTasks.
- Add: Scheduled tasks directory.
- MOD: Tournament V2: Fix filter player
- Fix: ClubCMS: England Golf website: fix multiple filtering by different facility types
- Mod: ISVAPI/Live: allow scottish score return in IE/WAL stage
- Fix: Hooks: RoundManagementScorecardInserted: Use MemberIdOrNonAffiliateId instead.
- Fix: Hooks: RoundManagementScorecardInserted: We're seeing ORNS exception upon accessing a member's category when a RoundManagementScorecardInserted hook is fired - this does not happen too often but I would like to know what's causing this and how to prevent this from happening.
- MOD: Tournament V2: Refactor so it doesn't have typescript warnings
- Fix: ISVAPI: CRM now allows more EG competitions to be added when a club already has existing comps
- Merged revision(s) 54167, 54188, 54231, 54248, 54270, 54330, 54378, 54395, 54411-54412 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Mod: Remove unused test ........ Update TransactionProcessor/SubscriptionRenewal.cs Add private method check is voucher user or not. Based on voucher user send payment confirm emails. Add if igolf flag If not igolf send email in old method
- Mod: extern update for DotGolf.Live.Connector move.
- Mod: Move DotGolf.Live.Connector to /DotGolf.Live.Connector.
- Mod: Live: DG-6479 #50690 Added functionality to void billing cards for subs
- Add: Directory to house DotGolf.Live.Connector (moving it out of /DotGolf.Live to make Clubhouse merge cleaner)
- Mod: ClubCMS: England Golf website: look for the keyword in the club address fields also
- Fix: Analytics package-deploy.ps1 file needed updating.
- Fix/Mod: ClubCMS: England Golf website: Club name display correction (detect if there's already a " Golf " word in the name; if so, there's no need to append "Golf Club"); also match the keyword with the Club.PostalCode
- Fix: Groovy build script had Adweb solution file name hardcoded instead of using the parameter passed to it.
- Fix: ClubCMS: England Golf website: Club name display correction (detect if there's already a " Golf " word in the name; if so, there's no need to append "Golf Club")
- Add: Analytics: Bindings file from _deploy
- Add: Analytics: Redo Core/Shared reference move and added Jenkinsfile.
- Fix: ClubCMS: messed up the JSON parsing when fetching EG comp events - F&P
- Mod: ISVAPI: update EG CRM competition code to use same objects as clubcms
- Mod: ClubCms: Use EG Club Competitions updated to match ISVAPI schema for F&P (some comments + WebLink property)
- Fix: Live: PointOfGolf Bring back full screen functionality
- Fix: Redirect if users accidentally hit old URLs that no longer exist in org.
- Fix: Org redirect so we don't get a blank default page.
- Fix: Live: MemberQuickSearchService broke for visitors
- Fix: Org member details not loading when you select a member from search results.
- Add: Amex: Added new amex controls.
- Mod: Autogenerated poco classes.
- Display emergency table detail. Merge this with commit 54377, this is DB update
- Add columns to cmember NonAffiliate tables
- MOD: TournamentV2: Apply search player
- Fix: ISVAPI: remove stringly typed dependency on exact FacilityTypeGroup names
- Mod: Jenkinsfile checking out groovy libraries: use env.TAG instead of hardcoded Trunk
- Mod: sql: update facilitytypegroup script with same guids in each environment
- Fix: ClubCMS: England Golf website: added missing LocAddress4
- Experiment: See if we can scope jenkins libraries to the branch we're working with.
- Mod: sql: update facilitytypegroup script to match new names
- Fix: Jenkinsfile wasn't checking out the root from the correct svn tag.
- Fix: ISVAPI: to not load CRM items for club if the FacilityTypeGroup is deleted
- Reverted the Core/Shared move for Analytics, we want to do this at the same time as moving to Jenkinsfile to make CI/CD updates a one time pain. Merged revision(s) 53892 from Trunk/DotGolf.Analytics: Mod: Analytics now references /Shared/DotGolf.Core and /Shared/DotGolf.Shared. ........
- Fix: WHSAPI: away score sync performance is better now
- Mod: Marcus says this should not be Informational, I said it shouldn't be Error, so we settled on Warning.
- Mod: SyncMembers will no longer crash if we encounter a WHSMemberUID incoming that does not match a member in unionland.  This took out WHS syncs for GB&I.
- Correct method name.
- Add tests
- Add test for request support form
- FIX: ClubCMS: Double call of GetEvents
- Add: Clubhouse bindings so we can release this to stage nz+gbi.
- *** DFH CODE REVIEWED TO HERE *** Mod: ORG: DG-6460 Styling update with description to match the rest of the page.
- Check UNF flag of old member before signup https://dotgolf.atlassian.net/browse/DG-6226
- Mod: Tournamentv2: remove unneeded registration
- Fix: Live: memberquicksearch
- Mod: Core: Friendly timespan extension
- Fix: Okay, fine, checkout a fresh workspace every build.  Not going to struggle with crap left over in the workspace any more. Fix: bindings filter didn't need to pushd SOLUTION_DIR, it's already in the root.
- Fix: Solution root incorrect I think?
- Mod: better bindings generation with more log output
- Mod: Teebooking DG-6406 #50664 Previously we only calculated the date range and when it'll be release correctly with category. We were not using the value being pulled out so the mod includes this. Scenario: FullPlaying member gets 24 hours booking in advanced and sheet release is at 6pm. The current date is 17th June and the player are wanting to book on the 25th June. Previously it'll show the slot will be available on the 18th where it should be available on the 17th at 6pm
- Mod: ClubCMS: turned FoundingYear into nullable int to match DB
- Mod: Renamed template constant name to stop future confusion.
- Add log when ResignCMemberById
- Mod: Autogenerated poco classes.
- Mod: WHSAPI: sql - replace the PlayingConditionsHistory index with one that gets used more often
- update script to fix the build
- MOD: ClubCMS: Updated News Article assigned to News Group to multiple selection
- Fix: WHSAPI: perf mod when fetching members
- Mod: ClubCMS: England Golf website: eg-slider: insert control property
- Mod: Attempt to compute SITE_NAME in Jenkinsfile so we don't have to declare yet another environment variable.
- Mod: Adweb: Remove dependence on Shared folder selectize
- Fix: Adweb: uses packagereferences now
- Revert: it still needs this... Mod: Adweb no longer needs the /sql directory checked out since we use embedded resources for the scripts now.
- Add: MyGolfController: Score listing and score details now returns IsPenaltyScore flag.
- fix drop area, use empty list
- Fix: sql: Sigh fixed build
- Mod: ISVAPI.Tests: kill any test process that stick around because jenkins decided to run out of ram and kill a build leaving dotnet process behind.
- Fix: ISVAPI: minor tournament request system email changes code update
- Mod: ISVAPI/Tests: sql script update
- Fix: ISVAPI: minor tournament request system email changes code update
- Refactor pairing components
- Mod: sql: minor tournament request system email changes
- Mod: ISVAPI: tests for new email when doing tournament update
- Fix: ISVAPI: Tournament request email move to System Email - fix for CRM stuff
- Mod: ISVAPI: Tournament request email move to System Email - updating tournament should also use new system email
- Mod: ISVAPI: Tournament request email move to System Email - unit tests updated
- Mod: ISVAPI: Tournament request email move to System Email complete! credit to Kingsley
- Mod: ContactTypeList update since we've added the Head Pro contact type (currently EG only?)
- Add tournament request template
- TournamentsController changes add template
- Mod: Adweb no longer needs the /sql directory checked out since we use embedded resources for the scripts now.
- Mod: API: Digital Scorecard: Stop members from creating a digital scorecard in the app if  (a) they have overdue SUBS or (b) no longer have flexi-rounds left.
- Mod: ORG: DG-6460 Ability to upload LGDiscountCode through CSV file - Located in SettingsOrg.aspx
- Fix: Marcus asked me to delete this script he committed by accident.
- refator route for 404
- Mod: WHSAPI: add a ToUniversalTime() to get unit test to pass when running from dev machine
- Mod: WHSAPI: add a ToUniversalTime() to get unit test to pass when running from dev machine
- FIX: WHSAPI: FINALLY GOT THIS MEMBER SYNC SORTED WHY DID I NOT JUST USE WEBHOOKS KILL ME
- add index route
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: #47774 Remove the static 'http://' from the span and split the checks into its own method. Added Teebooking validator to the TeebookingURL
- Mod: ClubCMS: England Golf: club-details: label rename
- Mod: WHSAPI: lower page size of sync
- Refactor and add 404
- MOD: Tournament V2: Latest front-end changes, added Tournament V2 in the Navigation
- Mod: WHSAPI: commit important code
- Add: WHS: Temporary index for lookups by Course.OrganisationId (we want DeletedDateUTC included here ideally)
- Mod: ClubCMS: England Golf: club-details: added Location4, Region; show the label only if the data is available; use <div> instead of <p>;
- tidy up and refactor team store
- Mod: Adweb: Merges can be done when someone has no scores because we need this for GBI merges to link people inter-union
- Mod: ClubCMS: England Golf website: eg-club-competitions: also use the End Date data to determine if it's a current / upcoming competition
- Mod: ClubCMS: England Golf website: eg-club-competitions: include current competitions
- Mod: AdWeb: ViewTicket: Display the ClubFeeGroupClub.Name instead of the generic green fee name so we can easily see what type of green fee was applied for each player. Mod: Payment transactions now displays "IsInitiatedViaDotGolfAPI" - so we know that the payment was triggered by the app. Mod: Display indicator that a given TXLine is linked to a sale (in DG POS).
- Fix: WHSAPI: terrible query back to old terrible state
- MOD: Tournament V2: Latest front-end changes
- #live-org-merge Temporarily added clubhouse subdomain to enable testing of the live-org merge in dev.
- #live-org-merge Temporarily added clubhouse subdomain to enable testing of the live-org merge in dev.
- #live-org-merge Levies widget working again; org vs live styling problems sorted with an inline if, putting the correct div ids on the master page containers.  This is pretty fugly but we don't have any better options right now.
- Fix: Live: Direct debit rollback hack to stop it timing out. I got 90% of the way with a cool background task  thing that i still have the code for, but its 5pm so here's a hack instead. #50615
- Fix: ClubCMS: England Golf website: add the table css class names only if they aren't present yet, otherwise, they'll be duplicated; handle undefined value
- Insert email sending record in to PassportClubLog table
- Mod: Shared: ToFriendlyString extension refactor to use more Plural and less string.Format
- Mod: ClubCMS: FileManager.aspx: just added the rev parameter to the js file reference
- Mod: ClubCMS: filemanager.ts: do not display "$backup" folders (I believe these are auto created when a file is deleted via Adweb, not through the website's file manager)
- Mod: sql: wa_TwoUnderClub_Email should check deleteddate of scores before sending
- Mod: sql: typo
- Mod: ClubCMS: England Golf website: only show the "Edit Page" link, and the "Add / Edit Page Controls" link if the web administrator user is on an editable page, and not on an administration page itself. Administration pages (e.g. admin-news-article) are normally be managed by DotGolf, and not by web administrators.
- Add: Golf-Tourism: Added new Amex sign-up control.
- Fix: Adweb: Build, after rev 54216
- Mod: ScheduledTasks: Xero sync every 10 min so we are less likely to hit rate limits
- Fix: ClubCMS: England Golf website: add the table css class names only if they aren't present yet, otherwise, they'll be duplicated
- Fix: ClubCMS: Build after rev 54216
- Fix: Live: allow a club to advanced-search for their social members #50546
- Merged revision(s) 54216 from Trunk/DotGolf.Live/Trunk/DotGolf.Live: Mod: Live/Core: move Ellipsis function to Core completely ........
- Add: ClubCMS: England Golf website: eg-rte: add new table styles (left header style)
- Merged revision(s) 54216 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.Live: Mod: Live/Core: move Ellipsis function to Core completely ........
- #live-org-merge renamed TrunkOrg directory so we're clear on what it is for.
- #live-org-merge CSS untangled, we have live and org sections now (sadness) ResolveRelativeAppURL now handles Clubhouse in a special snowflake way while we are in this transition.
- Fix: Live: do not link social and affiliated members #50546
- #live-org-merge Standard.Master completed, although bootstrap removal remains as a TODO
- #live-org-merge Excluded deleted file from csproj
- Refactor region code
- Fix membershipitem start date bug, get date from Cmemberitem, rather than text label from UI
- Mod: Live/Core: move Ellipsis function to Core completely
- #live-org-merge Fixed Live build.
- Mod: Core: MemberQuickSearchService: removed extra ToList()
- Mod: Live: call off to the Core MemberQuickSearchService so we don't have copypasted things lying around
- Mod: SubscriptionRenewal: removed an unused / obsolete code found while doing code review.
- #live-org-build Fix TabBatchProcess.aspx.cs build.
- #live-org-merge TabBatchProcess.aspx.cs unified.
- #live-org-merge Validate.aspx merged.
- #live-org-merge Shared.cs merged.
- #live-org-merge Cleaned up ignored files.
- Add: ClubCMS: England Golf website: member name style fix
- Add: ClubCMS: England Golf website: news-list: address flickering of 'no news articles found'
- Add: ClubCMS: England Golf website: my-header style update
- #live-org-merge More fixes to the merged code.
- Fix: ClubCMS: igolfers should be able to see my account page even if they have a club membership  #5006564
- #live-org-merge Conflict resolved since PreviewImportedLines.aspx is actually in Clubhouse twice...
- #live-org-merge Conflict resolved since PreviewImportedLines.aspx is actually in Clubhouse twice...
- Mod: ClubCMS: apply the "igolf-or-flexi" css class name to indicate that the logged in user is an iGolf EG or Flexi Club WG user
- tidy up
- update style fit td if playerlist is none
- Update filter team players
- Fix: ClubCMS: GetNewsArticles: use CWNewsArticle.IsPublic to determine if the article is a "published" article (available to the public)
- Mod: WHSAPI: update comment to match tech spec
- Update TransactionProcessor/SubscriptionRenewal.cs Add private method check is voucher user or not. Based on voucher user send payment confirm emails. Add if igolf flag If not igolf send email in old method
- Fix: Core: Build - WHSClient.g.cs
- Update email template
- Fix: Shared.Tests: Build - EmulatedWHSClient
- Fix: ScheduledTasks: Build - EmulatedWHSClient
- Fix: Core: Build - EmulatedWHSClient
- Add: ClubCMS: England Golf website: style update
- Mod: WHSAPI: Attempts to stop sync timing out. Remove unused fields, can use IX_Member_Changedate index now!
- Add: ClubCMS: England Golf website: news tag title style fix
- Add: ClubCMS: England Golf website: menu style update
- Add payment successful template
- Fix: Oops, buggered this up in Trunk.  Sorry Jenkins.
- Mod: ClubCMS: England Golf website: style updates
- Fix: Oops, buggered this up in Trunk.  Sorry Jenkins.
- Mod: ClubCMS: member-signup/view.html: just added a line above the Terms & Conditions section; and updated "terms and conditions" to "Terms and Conditions"
- Add: ClubCMS: England Golf website: member-signup styles
- #live-org-merge Added DotGolf.Clubhouse.sln file, various small code fixes and conflict resolutions.
- Mod: WHSAPI: new Member index for handicap sync
- Mod: Remove unused test
- Mod: ScheduledTasks: for handicap sync, don't need to use Gender, FirstName, LastName from WHSAPI - we can get these from unionland. part of plan to simplify handicap change sql
- #live-org-merge Merged csproj files (DotGolf.Live.Association.csproj committed for posterity, I'll delete it once we're done here)
- #live-org-merge Mod: Partial merge of the two solution webdirs.  Some critical files remaining, so this won't build just yet.
- MOD: ClubCMS: Tourism website update facility icons
- Mod: WHSAPI: GetHandicappingConfig now takes a DbConnection to avoid excess conns being created (mostly during a Merge)
- Mod: WHSAPI: GetUserOrganisationIDs now takes a DbConnection because it gets called all the time, no need to create a new connection each time.
- Mod: Copied the Org trunk into Clubhouse too so we have a snapshot of the code to work on.
- #live-org-merge Mod: Copied DotGolf.Live to DotGolf.Clubhouse for the merge of Live and Org. Did it this way (rather than renaming DotGolf.Live) to minimise disruption.
- Mod: WHSAPI: remove petapoco from CountriesController and minor code cleanup from course controller copypaste
- Fix: WHSAPI: only open db connection in PolicyAuthorizationHandler if we miss the cache
- Mod: WHSAPI: only open db connection in PolicyAuthorizationHandler if we miss the cache
- Mod: WHSAPI: replace select * with appropriate columns
- Store refactor
- Api update
- Working on store communication
- #live-org-merge Mod: Removed /sql externs from Live and Org; we don't want any externs lying around anymore.  Please commit sql files into /Shared/sql from now on.
- Mod: Golf-Tourism: Reset region values before use.
- Fix: Live: incorrect sql syntax error when booking from kiosk and checking if any slots within the times are closed/not released yet
- #live-org-merge Web.config transform for Live; started with the Live Web.config.Production and merged in all the Org stuff, so they are close now.
- #live-org-merge accidental refactor improved
- #live-org-merge Org renamed TabMember, TabMembers and TabCasualGolfer.
- #live-org-merge No more TabMemberScores.aspx (we use /Shared/TabMemberScoresWHS.aspx now)
- #live-org-merge No more TabMemberScores.aspx (we use /Shared/TabMemberScoresWHS.aspx now)
- #live-org-merge /TabRptLevyItemHistory.aspx unified.
- #live-org-merge TabUserProfile.aspx split for Org.
- #live-org-merge TabReports.aspx in Org is now TabOrgReports.aspx.
- #live-org-merge StandardLevyPage split for Live and Org.
- #live-org-merge Moving Settings.aspx out of the way, moved settings.xml to a different location.
- Mod: adweb: all time zones UTC now when viewing scores because play date was getting confusion for DGI/EG during BST months (1 hour out from score intent creation)
- #live-org-merge Moving Settings.aspx out of the way, moved settings.xml to a different location.
- Mod: ClubCMS: England Golf website: handle empty newsarticleid
- #live-org-merge minor changes to unify a couple files.
- Mod: ClubCMS: England Golf website: default image URL update
- Mod: ClubCMS: England Golf website: rte / news article style update
- #live-org-merge Moved methods out of Shared.cs if they don't deserve to be there.
- #live-org-merge Moved methods out of Shared.cs if they don't deserve to be there.
- Mod: ClubCMS: England Golf website: general.js: convertLinkButtons: added the target property
- Mod: Live: replace compromised encryption key that only gets used with Live in the same session.
- Fix: MSK+KLY: Live: When creating a new member, don't let social members get merged with affiliated members - it clobbers the affiliated member's casual golf record and stops the social members signing up to their club website  #50546
- Mod: ClubCMS: England Golf website: rte style update
- Mod: ClubCMS: England Golf website: rte style update
- Fix: Needed to await these method calls to make sure the scheduled task job doesn't terminate before the emails are completely sent.
- Add condition to filter out England IGolf club. Other clubs would use old template
- Fix?: ISVAPI tests keep failing on build1/2
- Mod: ClubCMS: England Golf website: course info style update
- Mod: ClubCMS: England Golf website: rte style updates (ul, ol)
- Mod: ClubCMS: England Golf website: course info style update
- Mod: ClubCMS: England Golf website: accordion styles
- Fix?: ISVAPI tests keep failing on build1/2
- #live-org-merge Unifying Shared.cs (only some of the way there)
- Fix?: ISVAPI tests keep failing on build1/2 until workspace gets killed
- Fix?: ISVAPI tests keep failing on build1/2 until workspace gets killed
- #live-org-merge copied PerformDatabaseIntegrityCheck() to Shared.cs for Org.
- Add: Golf-Tourism: Added new control property control for north & south results controls.
- Fix: Shared.Tests: build
- #live-org-merge Validate.aspx unified. Ignored some DLLs because we have bin/ checked in...
- Fix typo
- Update notification email template, remove local dollar mark in template
- #live-org-merge Bulk Invoice Generate page updated to use Redis (same as Live) for PDF storage. ReportPage.cs unified.
- Mod: ISVAPI: Cleanup redundant bugged interop code and minor test refactor
- Mod: ISVAPI: tests for scottish interop score return
- Fix: AwayUnionScoreDeleted hook: actually gets called when score is deleted now
- Fix: tests: remove broken pre-whs proc calls from wa_deletescore
- #live-org-merge Oops, missed Default.aspx redirect stub from Org.
- #live-org-merge Global.asax.cs relevant bits of code copied to Live in preparation for merge.  We can use the Live version of this file.
- Mod: Gold-Tourism: Merge logic script from 4094.
- Mod: Core: make hack to read OCS error messages less hacky
- Refactor notification email sending logic
- Fix: Core: bug in interunion record manager where newly inserted association could not have the correct uid
- Mod: Tests: replace error-prone scripted data sql scripts with a test file that contains the exact versions of script we want to run.
- Mod: Golf-Tourism: Delete wrong marquee clubs control location.
- #live-org-merge Default.aspx split into DefaultOrg and Default (for Live), with a redirect when appropriate.
- Fix: sql: wa_TBSearchByClubDayV2_Search: #50541 Can't use @MinTimeSlotId this way because of the following scenario:
- Add: Golf-Tourism: Added marquee clubs control.
- Mod: Golf-Tourism: Marquee clubs control property updates.
- Mod: sql: ensure if system email placeholder exists before trying to use it (unit test)
- Update template system email name, remove the space ahead.
- #live-org-merge Org is now on SignalR 2.4.2, same as Live.
- #live-org-merge Org legacy bulk email now lives in /Org/Email instead of /Email to avoid conflicts with Live.  The Org version of legacy email is too customised to easily merge with Live, so I've taken the cheap option and left it separate.
- Pick the correct template for 7 day notification
- Mod: sql: check if table exists before creating it (unit test)
- Up AutoRenewal ReminderEmail to handle different business rules
- #live-org-merge Org is now on SignalR 2.4.2, same as Live.
- Update Renewal notification 1 Week Prior template
- Mod: Live: send missing POS Online Payment type warning email to both Mat and DG support freshdesk
- Add renewal notification 1 week prior
- #live-org-merge Needed some Controls magic to keep ExGridView working in Live.
- Mod: tests: insert scripted data for ISV scottish score entry tests
- Fix: UnionAPI: build
- Mod: Golf-Tourism: CSS clean-up.
- Mod: Golf-Tourism: Completed region attractions & options control integration.
- Fix: SignalR subdomains were not in the bindings file, so SignalR didn't work in dev.
- #live-org-merge Got some assembly version conflicts; copied assembly binding redirect from Live to sort it out.
- #live-org-merge Missing some SignalR packages from Org.
- #live-org-merge Unified Startup.cs
- #live-org-merge Cleaned up and unified a few more files.
- #live-org-merge /Standard.js removed and code put in /Shared/Standard.js, so it lives up to it's name now.
- #live-org-merge Reverted dodgy bug "fix" in urlEncodeDecode.js (treating `+` in a special way) - doesn't look like this function is even used in Org anymore (was an old Pennant hack).  We should be using browser decodeURIComponent() to do this anyway.
- #live-org-merge jquery.mousewheel.min.js upgraded to 3.1.13, same as Live.
- #live-org-merge Replaced Visual Studio-formatted jquery-1.7.2.min.js with the properly minified one (saved 10kB in the process)
- #live-org-merge Removed jquery-1.7.1.js, no longer used anywhere.
- #live-org-merge levies.js whitespace updates to make 'em the same
- #live-org-merge Merged old effects bugfix from Org.
- #live-org-merge Merged CuteEditor 6.6 -> 6.7 upgrade from Live so Org+Live are the same now.
- #live-org-merge Merged CuteEditor 6.6 -> 6.7 upgrade from Live so Org+Live are the same now.
- #live-org-merge Moved Exception.aspx to /Shared, they are the same.
- #live-org-merge Login.css moved to /shared/css, they are virtually identical other than a background shade.  Also these screens are never visible, minor point.
- #live-org-merge Login.css moved to /shared/css, they are virtually identical other than a background shade.
- #live-org-merge Removed SubNavBar.ascx from Settings area; it renders empty for NG clubs (we have everyone on NG now), and in Org it only renders a single link which isn't that useful.
- Mod: ClubCMS: England Golf website: correct the logic behind adding the "gcmember" and "fleximember" css class
- Mod: ClubCMS: England Golf website: video gallery styles; menu style update
- Mod: ClubCMS: England Golf website: menu: add publicly available menu item under the My England Golf menu. When a member is logged in, the member-only pages are added to the list.
- #live-org-merge MemberPopupSearch move part 5 of 5?
- #live-org-merge MemberPopupSearch move part 4 of n
- #live-org-merge MemberPopupSearch move part 3 of n
- #live-org-merge MemberPopupSearch move part 2 of n
- #live-org-merge MemberPopupSearch move part 1 of n
- MOD: Tournament V2: Fix auth issue when you are currently logged in to a club or org that doesn't have access to Tournament V2
- #live-org-merge Moved tablesorter.css into /shared/css, used the reskinned version from Org.
- #live-org-merge Moved Fields.css content into Shared/css/Standard.css; they were the same in Live and Org.
- #live-org-merge: Renamed Edge.css to avoid conflict in Live. Removed calendar.js; no longer used.
- #live-org-merge cuteEditor.css removed; it is not used anywhere in Org (the Live one is used however)
- Mod: Core: change pocotable Score.ScoreUID to not nullable
- #live-org-merge CuteEditor template renamed to avoid conflict with Live.
- #live-org-merge Moved ExGridView to DotGolf.Shared.
- Mod: Golf-Tourism: More control property update clean-ups.
- #live-org-merge Moved CategoryListPicker to /shared/controls.
- #live-org-merge Merged Org CategoryListPicker code to the Live version.
- #live-org-merge Removed last reference to ImageHelper.ashx in Org and removed the handler.
- #live-org-merge Moved GetCachedObject.ashx to /shared/api.
- #live-org-merge Moved GetCachedObject.ashx to /shared/api.
- Mod: Autogenerated poco classes.
- Add: Golf-Tourism: New column for region attractions.
- #live-org-merge Moved Org levies from /Levies to /Org/Levies to avoid conflicts with the club levies in Live. Cleanup: Removed Version.cs.
- Mod: API: Digital membership card - enable for EG stage only.
- #live-org-merge Old school member search service works again for Org now (not that I think we're even using this anymore).
- #live-org-merge Included context info controls in Org build.
- #live-org-merge moved ClubContextInfo and MemberContextInfo controls into /shared since ControlSupport needs them.
- #live-org-merge Minor Org compile error
- #live-org-merge Mod: Moved ControlSupport.asmx to /Shared for Live and Org.
- Mod: Golf-Tourism: Showing by region attractions.
- Update task function: notification for membership renew Add email template Renewal Notification
- #live-org-merge Moved ColorGenerator to /shared/api
- Remove unuse files, add d3.js lib
- Mod: Golf-Tourism: Control properties renamed & added region attraction admin controls.
- Adweb: Moved more stuff into shared groovy scripts.
- Add: Golf-Tourism: Control property updates.
- Adweb: Moved more stuff into shared groovy scripts.
- Adweb build: Vortex script fix.
- Adweb build: More code refactoring and improved shared groovy library.
- Adweb build: More code refactoring and improved shared groovy library.
- Adweb build: More code refactoring and improved shared groovy library.
- Adweb: More script tweaks.
- Adweb build: sql stuff didn't work anymore (need to get it from source control before the build because these are embedded resources)
- Adweb build: More code refactoring and improved shared groovy library.
- Adweb build: More code refactoring and improved shared groovy library.
- Adweb: sql folder checkout moved around a bit so we can have more shared code in the groovy scripts.
- team player management done
- Adweb: Vortex-notify script upgraded.
- Adweb: Vortex-notify script upgraded.
- Adweb: Vortex-notify script upgraded.
- Adweb: Jenkinsfile tweaks.
- Adweb: Slack build notifications added.
- Fix: Bulk Email V3: Fix casuals are included on club specific recipients
- Adweb: Cleanup: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Mod: Adweb /sql extern removed; Jenkinsfile updated to pull scripts for adweb build.
- Mod: Live: Allow comp/general/matchplay/penalty icons to be copy-pasteable so people can export the score listing to excel  #5006444
- Mod: Adweb /sql extern removed; SchemaUpdater now uses embedded resources to get hold of schema scripts.  The scripts are checked out by Jenkins into the /sql directory and picked up from there by the build.
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- MOD: Bulk Email V3: Allow manual input in color picker
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Mod: Live DG-6194 Added the ability to filter by NZGACategory (Levy Category) to HandicapChange Report
- Adweb: porting webapp-jenkins-promote.cmd into groovy
- Adweb: porting webapp-jenkins-postbuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: porting webapp-jenkins-prebuild.cmd into groovy
- Adweb: No longer using _deploy or _deploy/_shared, too hard to keep the old crud working in the new world.  Everything is going to be ported to a groovy Jenkinsfile.
- Mod: ISVAPI: ensure we check SupportsGolferLookup when attempting Scotland searches
- Mod: ClubCMS: England Golf website: added css utility classes for hiding columns in tables
- Mod: ClubCMS: England Golf website: rte updates
- MOD: Bulk Email V3: Added initial content to Love Golf Deals module
- Mod: ISVAPI: ensure we check SupportsGolferLookup when attempting Scotland searches
- MOD: Bulk Email: Added image dimension caption
- Mod: Live DG-6228 added a new method to the old Encryption to look at password hash column instead for the link from Live to Casual golf. LoveGolf/LoveGolfGetOnTheGreen.aspx.cs is now looking at this method to send the encrypted credentials through.
- Mod: CasualGolf DG-6228 Added new checks to look at PasswordHash and log the user in whom are coming from Live -> this now looks at both the PasswordCredential and UserSecurity for some edge cases where the super user doesn't exist in the UserSecurity.
- Mod: CasualGolf DG-6228 Added new checks to look at PasswordHash and log the user in whom are coming from Live -> this now looks at both the PasswordCredential and UserSecurity for some edge cases where the super user doesn't exist in the UserSecurity.
- Mod: ClubCMS: England Golf website: club details page: remove Manager as requested by Tom
- Fix: ClubCMS: England Golf website: replaced PostCode with PostalCode
- Mod: ClubCMS: England Golf website: club details page: remove postal address as requested by Tom
- Fix: backslash backslash
- Adweb: Removed build.cmd, baked into Jenkinsfile.
- Fix: Adweb relative paths.
- Adweb: Got rid of Trunk directory, moved everything up a level.
- Adweb: Got rid of Trunk directory, moved everything up a level.
- Fix: groovy script tidied up and added TODOs
- Moar jenkinsfile
- Fix: Backslashes, you know
- Mod: Jenkinsfile: Starting to convert webapp-jenkins-prebuild to groovy
- Add: Adweb Jenkinsfile
- Fix: dgSvn variable substitution didn't work
- Add: SCM code to groovy library
- Add: SCM code to groovy library
- Add: SCM code to groovy library
- Add: SCM code to groovy library
- Mod: Moved groovy file because apparently we need a directory.
- Mod: Moved groovy file because apparently we need a directory.
- Add: Experimental shared groovy library for Jenkins.
- MOD: ClubCMS: Remove duplicates in Open Fixtures control and show multiple Competition Types and Round Count on each row
- Update general cancel email template
- Mod: Org: Exceptions message change in card request flow to be more accurate
- Mod: CasualGolf DG-6228 Added ability for the user and admin to login using their password and OTP. Removed the static login - yuk :O TODO: Make this work when SSO from Live into Admin area.
- Mod: CasualGolf DG-6228 Added ability for the user and admin to login using their password and OTP. TODO: Make this work when SSO from Live into Admin area.
- Fix: Adweb: we no longer update the memberId of cmember records - it keeps surfacing more and more bugs. #5006481 also removed some code we had to introduce because of the memberId updating.
- Fix: sql: wa_TBSearchByClubDayV2_Search_OneClub: Can't use @MinTimeSlotId this way because of the following scenario:
- Mod: ClubCMS/GolfNZ DG-6375 Added search bar for handicap rankings to search by player name
- Fix: new adweb build: we're not doing proper promotions from the pipeline script so promoted_id doesnt exist
- MOD: Bulk Email: Use core casual golf to get the offers
- Fix: ClubCMS: App link for R&A rules of golf has been changed recently - the previous link now returns HTTP 404.
- MOD: Bulk Email v3: Use casual golf base URL from the Application config
- Fix: Shared: remove unneeded usings which fail the new adweb build
- Fix: Shared: remove unneeded usings which fail the new adweb build
- MOD: BulkEmail v3: Added Love Golf Deals in the toolbar
- Mod: ClubCMS: England Golf website: richtext.config.eg.js: remove the accordionList tool (not needed)
- Mod: Adweb: Build.cmd
- MOD: CasualGolf: Add CoverImageUrl in the query
- Mod: Analytics now references /Shared/DotGolf.Core and /Shared/DotGolf.Shared.
- Mod: sql: cancel igolf membership email template: fixed href and odd url query string
- Mod: ClubCMS: England Golf website: accordion style updates
- Mod: ClubCMS: England Golf website: style updates
- Update cancel email template
- Fix: ClubCMS: embedded-video-dynamic-resizer.js: allow / recognise hyphens in the video (e.g. YouTube) URL
- Fix: Live: FullMemberListing showing duplicate entries if someone has more than one cmember record #5006197
- Mod: Live: add Email to deleted score intent report so easier for handicappers to follow up with people. #5006465
- Fix: Tee booking payment warnings were not being sent out for North Shore (because the TBStartTee table doesn't join up as you would expect due to their multi course setup - special snowflake).  Fixed it with an ISNULL to show "TBA" for the start tee in the warning/cancellation emails.
- Voucher RedemptionDateStart is created with local time, not UTC, and when getting with UTC, it would be out of the time period.
- Add: Golf-Tourism: Added new tourism region attractions control.
- *** DFH CODE REVIEWED TO HERE *** Fix: Live: Password generation causes winforms errors on postback #5006088
- Mod: ClubCMS: England Golf website: general.js: convertLinkButtons: forgot to use the <a> tag; and add the href property
- Fix: AdWeb DG-6139 Face palm... it was all good until the UI form is in the reversed order and didn't get picked up until now...
- Add independent golfer welcome email template
- Fix: aw_MergeCasualAndCasualMember: Failed to merge casual to casual golfer scores when there is a resigned member record linked to the source passport.
- Fix: LoveGolf DG-6228 Refreshed the encryption key
- Mod: Golf-Tourism: Two rows for course-result items, removed 'next'/'previous' paged buttons at course-result controls.
- Mod: ClubCMS/GolfNZ DG-6334 Using sessionStorage to keep track of selected drop downs. This is unique to one tab as well. -> if the tab is closed the sessionStorage gets destroyed automatically
- Send cancel email
- Update WelcomeMemberIndependentGolfer.txt
- MOD: BulkEmail: Remove unused SystemEmail class with static methods
- Mod: ClubCMS: rMemberSignupV2: Transaction fee not displayed on initial load (mod from r53843).
- Mod: ClubCMS: rMemberSignupV2: Reverting part of (r53843) the mod that fixes the issue where the transaction fee is not displayed on initial load - so this can be a separate commit and can be merge in NZ prod.
- [UNREVERT] The reverted mods r53843, r53850, r53855.
- Revert mods r53843, r53850 and r53855 so I can split into two commits the mods from r53843.
- Mod: ClubCMS: England Golf website: menu: removed my competitions and my bookings
- Update item amount logic to handle discount for multiple items
- MOD: ClubCMS: Minor changes on Tourism control
- MOD: ClubCMS: Remove pagination for handicap-rankings and the reveal animation
- Mod: Golf-Tourism: Tourism-options control focus sync by-region from home-page map.
- Mod: Golf-Tourism: Updated tourism-option control sync highlight region when selected.
- Update logic to get item record correct
- Fix: Org: OOM/Shop permissions given to super admins now - they are still hidden behind products/Feature flag
- Add cancel membership email template
- Fix: Org: tournament permissions not added to org super admins #50486
- Add: Golf-Tourism: Added control property for golf tourism options.
- Fix payment detail display info after page load. Give comments to item record amount
- Fix: Should always use relative extern paths otherwise we push stuff to Trunk when committing to a branch.
- Mod: Org/Live: expire user nav cache when user's permissions are changed
- Mod: Love Golf Play Admin Site: update the hardcoded password for the Club ID: NZG, Username: nzgolf, Password: gnz9235
- Mod: Golf-Tourism: Implements UID control properties.
- Add: Golf-Tourism: New tourism control properties.
- Fix: Org: LoveGolf play admin user permission for NZ #50448 so super admins get it
- Fix for ivoucher users signup
- Mod: ClubCMS: England Golf website: igolf signup styles
- Mod: ClubCMS: England Golf website: my account styles
- Mod: ClubCMS: England Golf website: my friends, my scores style fixes and updates
- MOD: BulkEmail V3: Hide background color selector for full text
- Mod: BounceTracker DG-6262 If the encoding is throwing "encoding is not supported" we'll just catch and skip it for now.
- Fix: postbuild.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Update payment status database record
- Fix: postbuild.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Fix: postbuild.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Mod: promote.cmd: remove debug SET
- Mod: ClubCMS: England Golf website: my scores, my performance style updates
- Fix: promote.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Mod: CasualGolf DG-6134 Modified file uploads so that it no longer stores it on the web server but uses S3 instead. TODO: Proper testing as Dev casual golf S3 is throwing access denied might be due to the new key changes
- Fix: promote.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Mod: promote.cmd: make the new SOLUTION_ROOT system (where we remove externs) work for new builds and hopefully not break the old promote.
- Mod: ClubCMS: England Golf website: my performance style updates
- Mod: ClubCMS: England Golf website: my header style updates, notifications
- Upd: Golf-Tourism: Updated static image content for tourism options control from S3 bucket.
- Mod: ClubCMS: England Golf website: My Golf menu, header style updates
- MOD: ClubCms: Use embedded resource instead of file path
- Fix: Adweb: promote? i think the contents of the package is incorrect
- Fix: ClubCMS: Teebooking: Minor refactor (part 2) - Use DotGolf.Core.TeebookingHelper.ScorecardPrintedForTicket to check if a scorecard is already printed for one of the players in the booking.
- MOD: Tournament V2: UI Updates
- Mod: Adweb build: print env variables in Promote script so we can debug it
- Fix for code review
- Fix: Adweb: promote? i think the contents of the package is incorrect
- MOD: ClubCMS: Added properties to Content Tiles Slider for dynamic data
- MOD: ClubCMS: Added properties to Content Tiles Slider for dynamic data
- Fix: ClubCMS: England Golf website: fixed publish date display; convert utc to local
- Mod: promote.cmd: remove debug SET
- Fix: API: Teebooking: Set TBLog.Source to "API" when marking an entry as paid.
- Mod: Adweb build: print env variables in Promote so we can debug it
- Add: Golf-Tourism: Added new tourism options (with static content).
- Fix: Live: RoundsPlayedByMemberReport timing out for RAAGGC. #50334 conditional query plan whether we're filtering by subs year or not
- Update payment options display rules
- Fix: Fair play number of bookings per week was counting other bookings for other golfers on the same booking.
- Mod: Reverse Proxy: added S,W,1,1,pleasantpointgolf.co.nz
- Mod: ClubCMS: bindings.list: added pleasantpointgolf.co.nz and www.pleasantpointgolf.co.nz
- Mod: Golf-Tourism: Removed un-used old api controller.
- Mod: Autogenerated poco classes.
- Add: Golf-Tourism: New table schemas.
- Add: Golf-Tourism: Script to remove un-used controls from AdWeb.
- Mod: Golf-Tourism: Remove un-used controls & finalize tourism table schemas.
- Fix: Teebooking: Player banned from teebooking at his/her club should still be able to make bookings to other clubs.
- Mod: ClubCMS: Teebooking: Use DotGolf.Core.TeebookingHelper.ScorecardPrintedForTicket to check if a scorecard is already printed for one of the players in the booking.
- Mod: Live: show not-eligible icon next to matchplay scores in GBI
- Fix: Shared: Teebooking: [KENNETH TESTING IN STAGE - PLEASE DON'T MERGE IN PROD] - TicketEntry PaidDate now populated for app guest user bookings.
- Revert: When calling set-environment.cmd, use a relative path from the promote script rather than depending on CWD.
- Fix: When calling set-environment.cmd, use a relative path from the promote script rather than depending on CWD.
- Fix payment select method for windcave keys
- Add: SOLUTION_ROOT state is now captured and put in set-environment.cmd so promotes will work properly.
- Mod: SOLUTION_ROOT now contains the location of the sln file, we use this for some PUSHD commands to get things running in the right directories (to be backwards compatible)
- Mod: ClubCMS: England Golf website: admin-eg-rte/view.html: removed the Style 3 option (this isn't needed anymore as we can insert videos within the style 2 already; style 3 was originally created for embedding videos)
- Fix payment select method
- Fix: SUBWCREV will now use the workspace root to determine the subversion revision: Mod: BuildInfo will now use the Build number as the revision if there is no revision present (which could indicate we're building with git or svn modules rather than a workspace root checkout)
- Update get email template and the way to create table content
- Fix: Moar nesting for Shared
- Fix: Prebuild will now consider ..\..\..\..\..\..\whatever\Shared\DotGolf.{Core,Shared} when looking for ConfigurationProfileResolver.Debug.cs
- Mod (major?): Adweb changed to use /Shared Core and Shared, no longer svn:extern these in.
- Fix: API: Teebooking: If an entry was previously marked as paid online, it should remain flagged that way when you update the booking with no outstanding payments.
- Fix: API: Teebooking: Stop user from making changes to the booking if a scorecard has already been printed.
- Fix: Clubcms:  club hub - prevent searchbox Enter key causing a post-back; the search already handles it without the need for a postback.
- Cleanup: Public2012 being confined to history.
- Cleanup: Removed Public2012.
- FIX: Live: Remove [[CSS_STYLES]] in Club Membership Invoice send
- Mod: ClubCMS: England Golf website: style updates
- Fix: ClubCMS: England Golf website: course info: display distance in yards for England
- Fix signupconfirmmation v2, payment method id issue
- FIX: ClubCMS: decodeURI the search keyword passed in the URL
- Mod: Live: GI InterclubTeamMembers report add Handicap At 1st Jan column smartsheet 230
- Fix: API: Rules of golf link - fix incorrect link part 2.
- Fix: ClubId was not being passed into System Email Templating and therefore club-specific template overrides were not being loaded. Fix: System Email Template placeholder replacement was being case sensitive so didn't catch FirstName vs FIRSTNAME.  It's now case insensitive so matches and replaces anything. Cleanup: Reverted previous "fix".
- Fix(?): Standard welcome email was sent to iGolf members who sign up with the 30 day free trial.  We should be sending the "voucher users" welcome email per specs.
- Fix: API: House account payment details - app now displays the unit price (incl GST). #49113
- Mod: ClubCMS: England Golf website: rte style update
- Mod: Golf-Tourism: View-by-region map label fonts update.
- Mod: ClubCMS: England Golf website: eg-news-list: make the application of the top / bottom background curve configurable.
- Fix: Unable to edit scores submitted via the app. Resolve the attester's passport details only if passport Id is greater than 0. #50344
- Fix: Golf-Tourism: Home-page map mobile size fixes.
- Mod: ClubCMS: England Golf website: eg-news-detail: convert images in the article (but without adding any pattern)
- Mod: ClubCMS: England Golf website: rte control: convert all .btn-link elements to a button--primary button
- Mod: ClubCMS: admin-news-article/view.html: text updates; added a line divider between the two image uploaders; added revision id parameter to the js references
- MOD: Bulk Email V3: Implement Coloris for color picker feature and added colordialog plugin for CKEditor advanced color selection
- Mod: Autogenerated poco classes.
- MOD: Bulk Email V3: Added ThemeColors column in JSON value to BEDefaultElements table
- Upd: Golf-Tourism: View-by-region course-results integration completed.
- MOD: ClubCMS: Change to proper case
- Mod: Connector: installer banner updated with our new logo.  Removed the el crappo Times font from the license rtf to make the visual effect less jarring to the soul.
- Fix: ConnectorAPI can't be TLSed because stupid .net soap clients don't handle a 301 Permanently Moved at all (it tries, but then falls over with obscure SOAP errors). We need to rewrite ConnectorAPI in WebAPI...
- Mod: Connector registration dialog now asks for Club ID and Master Code.  If you're still using the old installer, just enter the master code into the Password field (username is ignored, put garbage in there).
- Revert: Okay, so we can't easily change the webservice signature without causing problems; let's just leave it alone and allow the master code to be sent up in the Password field.
- Mod: ConnectorAPI will now accept the DotGolf master code as authentication when registering new card print clients.
- Update try catch to handle expectations when renew subscriptions
- Mod: ClubCMS: England Golf website: style updates / fixes
- Update redeem messages
- Mod: ClubCMS: England Golf website: when in edit mode, display all articles including non-public ones. For the non-public articles, display a "hidden" icon on the image, and change the text colour to grey.
- Mod: ClubCMS: England Golf website: eg-news-detail: convert publish date from utc to local time
- Add: Ability to see the legacy TXT notification registration status and unregister people from Adweb (since the old golf.co.nz is going away shortly)
- Add: Adweb: In NZ we can now see block lists (blocked and blocked by) - we need this for the support team who sometimes have to deal with people who blocked others in the old golf.co.nz; these guys are permanently blocked and we have to deal with them on a case-by-case basis. Fix: Adweb: Plus handicaps actually show with a + now.
- SQL script update to avoid execute on EN1 production DB
- Fix: Golf-Tourism: Fixes filter dropdown data loading, and map by region hover.
- MOD: Bulk Email: Add 2 and 3 columns image blocks
- Fix: rMyAccountTopUpConfirmation.ascx: Account top up process not completed due to "Content controls have to be top-level controls in a content page or a nested master page that references a master page. ---> System.Web.HttpParseException (0x80004005)" exception - affected by previous commit for voucher payment mods. This control is not related to the voucher payment feature.
- update autoTask, with private methods
- Mod: ClubCMS: England Golf website: add styles for the tabbed competition iframes
- Mod: ClubCMS: GetClubFacilityTypes: change data cache expiry to 1 minute during the test phase
- Update payment detail description
- Update payment detail description
- Oops, went into /Trunk...  Reversed revision(s) 53679 from Trunk: Add: Half baked work that Tom and I did together during an on-boarding session.  The plan is for Tom to continue working on moving BulkEmail.cs to DotGolf.Core, along with all the DTOs that are Bulk Email specific.  We're hoping to remove the DotGolf.Shared reference from BulkEmail, which is one step in the direction of moving the solution to .Net 6. ........
- Add: Half baked work that Tom and I did together during an on-boarding session.  The plan is for Tom to continue working on moving BulkEmail.cs to DotGolf.Core, along with all the DTOs that are Bulk Email specific.  We're hoping to remove the DotGolf.Shared reference from BulkEmail, which is one step in the direction of moving the solution to .Net 6.
- Mod: ClubCMS: England Golf website: GetRegionsFromClubTable: exclude "Other" and "Default"
- Mod: AdWeb: Display the member's passport Id.
- Mod: Reverse Proxy: sites.list: added S,-,1,1,pleasantpoint.cw.golf.co.nz and S,-,1,1,clearwater2.cw.golf.co.nz
- Mod: Golf-Tourism: Sql query update for getting regions by course-type.
- Mod: ClubCMS: bindings.list: added pleasantpoint.cw.golf.co.nz and clearwater2.cw.golf.co.nz
- MOD: ClubCMS: Added Name back to the class
- FIX: ClubCMS: fix invalid css
- update trial period end reminder email template
- update system email templates
- *** DFH CODE REVIEWED TO HERE *** Fix: Golf-Tourism: Course-Filter simple functionality implementations.
- Mod: ClubCMS: England Golf website: admin-eg-rte: style update
- Mod: ClubCMS: England Golf website: admin-eg-rte: allow the admin to view the page (where the rte belongs to) on a new tab
- MOD: ClubCMS: Remove duplicate fields
- Mod: ClubCMS: England Golf website: allow to enter into edit mode from the news article page
- Mod: ClubCMS: England Golf website: news detail style updates
- Mod: ClubCMS: England Golf website admin style updates; added news article tags dropdown styles
- MOD: ClubCMS: Details page new control and new magazine content block control
- MOD: ClubCMS: Details page new control and new magazine content block control
- Fix: Account top-up confirmation page: Release Redis lock after we've done processing the payment outcome from Windcave so we don't locked up the page.
- Mod: ClubCMS: England Golf website: accordion style updates
- Fix/Mod: ClubCMS: England Golf website: club-details: corrected the knockout syntax error; apply the button--sm utility class only if the other button is present
- Voucher process amendment from DavidP email
- Mod: ClubCMS: England Golf website: region (county) updates: - modify the Region options to display the Regions from Club.Region - consequently, update the ClubSearch query to filter by Club.Region instead of Club.RegionId
- Add payment confirmation email template
- Reverted: Mod: Temporarily testing how far and wide BulkEmail.cs is being used.
- Mod: Temporarily testing how far and wide BulkEmail.cs is being used.
- Fix: API: DigitalScorecard: Submitting scores back to normal (accepted for verification). We were not resolving the passport Id of the attester if the app sends a AttesterMemberOrNonAffiliateId and AttesterPassportId value of '0'. DGI Freshdesk tickets 5006345, 5006344, 5006343.
- Mod: ClubCMS: England Golf website: eg-club-details: display Memberships URL button; display as a small button
- Mod: ClubCMS: England Golf website: get club details sql query update (Membership URL, use Enquiries contact type for the club Email)
- Mod: ClubCMS: England Golf website: eg-club-details: display Memberships URL
- Mod: ClubCMS: England Golf website: admin button style updates
- Mod: ClubCMS: accordion / list administration: moved the inline styles to styles.css; added a styles file for terraces_eg
- Mod: ClubCMS: England Golf website: accordion style updates
- Remove set preselect payment method
- Mod: ClubCMS: England Golf website: admin-eg-rte/view.html: appended a "rev" query string parameter to the css file reference
- Mod: ClubCMS: England Golf website: styles for tables within the accordion item
- Mod: Golf-Tourism: Update view by region course-results sql query.
- remove display result for windcave issue
- Mod: Golf-Tourism: File ignore viewmodel.js / .map extensions.
- Add: Golf-Tourism: Added and Implements view by region course-results control
- fix signup confirm windcave amount issue
- Mod: ClubCMS: England Golf website: admin button style updates
- Mod: ClubCMS: England Golf website: rte table style updates
- Fail payment retry fix
- Add: Golf-Tourism: Added region control properties.
- Add _log for debug on stage site
- MOD: ClubCMS: Remove unwanted class if control is using theme-dark
- Mod: Golf-Tourism: Updated control names.
- Use email system template, replace on loading template from local file
- Add: Golf-Tourism: Added clubs category controls.
- Mod: ClubCMS: GI: news-detail: removed unused code
- Add: Golf-Tourism: Region home-page link implementations.
- Mod: ClubCMS: England Golf website: feature content style updates
- Mod: ClubCMS: England Golf website: rte style updates
- Fix: Transaction Processor was commented out accidentally a previous commit?!
- Fix: EzPoco file was buggered
- Fix: API: R&A rules of golf link - incorrect root URL.
- Mod: ClubCMS: just added the btn-admin utility css class to an admin button
- Mod: ClubCMS: England Golf website: admin-feature-content/view.html: update the ckeditor config file
- Oops, stuffed that up too.
- Okay, fine, reverted this ill-fated mod for now.
- Fix: Obsoleted stuff that isn't obsolete.
- Mod: Autogenerated poco classes.
- Add: Experimental ability to document tables and columns via an XML file that lives in Poco/SchemaDocumentation.xml.
- Update payment detail section messages
- Display payment message in Payment Details session
- update membershipapplication validation, if there is no promo code, return false.
- Add: API: /user-details endpoint: Link to the R&A rules of golf.
- Add: ClubCMS: App link to R&A rules of golf.
- Mod: ClubCMS: England Golf website: rte style updates
- Mod: ClubCMS: England Golf website: rte style updates
- Mod: ClubCMS: England Golf website: rte style updates
- Fix: ClubCMS: England Golf website: GetClubDetailsEg sql: use left join on the ClubSetting table e.g. during my testing, I found that Club ID 910029 doesn't have a ClubSetting entry
- Fix: API: DigitalScorecard: Unable to load brand new scorecard in the app due to "Sequence contains no elements" exception.
- Fix: GET / on Images will now return 200 OK to appease Jenkins.
- Mod: ClubCMS: content-tiles: field label update
- Fix: ClubCMS/Teebooking DG-5992 Optimised sql query on join. Removed redundant TBTimeSlotEntry join
- Amendment from claire feedbacks
- Mod: ClubCMS: England Golf website: content tiles: meet the board style updates
- Fix: ClubCMS/Teebooking DG-5992 Fixed the logic as it should also be looking at the TicketId so it doesn't jumble up multiple players booking that one slot.
- Mod: ClubCMS: England Golf website: content-tiles: modal style updates
- Mod: ClubCMS: content-tiles/view.html: just added css classes to a couple of elements
- Fix: Golf-Tourism: Fixes on Course-Results control showing default random clubs/facilities at course-type landing pages.
- Mod: ClubCMS: England Golf website: club competitions: do not display the table at all if there's no upcoming competitions
- Mod: ClubCMS: England Golf website: club details: hide some details if the data aren't available
- Mod: Setting: Digital membership card: Set QR code as the default machine readable code type - previously it was barcode.
- MOD: ClubCMS: Change the CKEditor config
- Mod: ClubCMS: England Golf website: club-competitions: don't display the View on Google Maps link if it's not defined
- Mod: ClubCMS: England Golf website: club-competitions and course-info: style updates
- Mod: ClubCMS: England Golf website: eg-club-competitions: display upcoming competitions only
- Mod: ClubCMS: England Golf website: eg-club-competitions\styles.css
- Pay button display update. remove redirect to isignup page
- Add: ClubCMS: England Golf website: eg-club-competitions: display club competitions in the FacilityCMSContent table (data from EG CRM)
- fix send windwave pay attempt
- Mod: ClubCMS: England Golf website: eg-club-competitions: clean up code
- Mod: ClubCMS: England Golf website: just renamed a method used by EG to create a new page
- Add: ClubCMS: England Golf website: eg-club-competitions control
- Add: ClubCMS: England Golf website: eg-club-competitions: display club competitions in the FacilityCMSContent table (data from EG CRM)
- Fix: Gold-Tourism: Fixed course-filter control from updated tourism schema.
- *** DFH CODE REVIEWED TO HERE *** Update payment try again method
- Fix: MailerService DG-5961 BounceTracker.cs Updated hostname to the correct address.
- Remove test code
- Remove sql which updates page content. Update page content manually after releasing
- Fix: Golf-Tourism: Move course-filter control styling to main css file.
- update unsuccessful banner template
- Fix: Golf-Tourism: Course-filer & Course-results control UI fixes.
- Add: Golf-Tourism: Added tourism course results control properties.
- Add: Golf-Tourism: Added tourism course-filer control properties.
- Mod: ClubCMS: content-tiles: allow adding / editing of header text when in edit mode
- Mod: ClubCMS: FileManager.aspx: allow zip files (EG has zipped files on their website e.g. Governance Pack)
- Mod: ClubCMS: England Golf website: limit to 5 club (banner) images for faster loading (this is the same max number of images as indicated in the original design)
- Mod: ClubCMS: England Golf website: eg-club-details: added a Google Maps API key control property to keep it consistent with the other similar existing controls (so we can easily update it in the future if needed);
- Mod: ClubCMS: England Golf website: eg-club-details: don't display the Postal Address label if the the club doesn't have a defined postal address
- Mod: ClubCMS: England Golf website: eg-club-details: style update
- Mod: ClubCMS: England Golf website: limit to 6 club images only for faster loading, and since we only have space for 6 pagination buttons (the original design actually indicates a maximum of 5 images)
- Mod: API: Digital membership card: Increase height and width for the member code image.
- Add: ClubCMS/Teebooking DG-5992 Disables player(s) from editing their booking when a scorecard had been printed.
- working unsuccessfully page issue, issue is done. Only the style problem
- MOD: ClubCMS: CSS updates for Tourism
- update page settings
- Mod: ClubCMS: England Golf website: admin-eg-rte: text update
- Mod: ClubCMS: England Golf website: eg-rte: allow video iframes in between paragraphs; ckeditor encloses the iframe in paragraph tags--remove indention (to follow the design provided
- Fix: Golf-Tourism: Show header-nav menu options when tap.
- Fix: Golf-Tourism: Reverse column and font-size responsive for home-page on small screen.
- Ignore changes from js and js map
- MOD: ClubCMS: Change the interval
- MOD: ClubCMS: Prevent user from swiping the control
- Mod: ClubCMS: England Golf website: don't load the google maps js if google maps won't be shown
- Mod: ClubCMS: England Golf website: display Founding Year, Head Pro Name and Email, use Club.Region instead of Club.RegionId
- MOD: ClubCMS: CSS updates con Content Block control
- Mod: ClubCMS: England Golf website: course-info: style update
- Add unsuccessful payment templates
- Mod: ClubCMS: England Golf: facility types: render the html only when there's data
- Mod: ClubCMS: England Golf website: course-info: style updates
- Upd: Golf-Tourism: Move styling and fonts to /css/terraces_tourism/.... main folder.
- Mod: Gold-Tourism: Clean-up course-filer control for new schema.
- Mod: ReverseProxy: sites-gbistage.list: updated the EG stage URL to eg.en.dotgolf.co.uk (eg.en.stage.dotgolf.co.uk)
- Mod: ClubCMS: bindings.gbistage.list: modified the EG stage url to eg.en.stage.dotgolf.co.uk
- Mod: ClubCMS: bindings.gbistage.list: added clubcms-england:egstage.en.stage.dotgolf.co.uk
- Mod: API: better error logging for HomeClubChangeRequestAccepted
- Mod: ISVAPI: anything that takes a guid as a parameter can potentially return Not Found.
- Update igolf successful payment page content
- MOD: ClubCMS: Updates on Tourism Header and Footer styles
- Mod: ISVAPI: remove reference to DotGolf in system email for GBI
- Add: Golf-Tourism: Add page-header section at course filter control (for course-type landing pages).
- Add: WHSAPI: MatchPlay score handling
- Mod: ClubCMS: England Golf website: club-facility-types: style update
- Mod: ClubCMS: England Golf website: club-facility-types: style updates
- Mod: ClubCMS: England Golf website: eg-club-details: style updates
- Mod: ClubCMS: England Golf website: eg-club-details: open club website on new tab
- Mod: ClubCMS: England Golf website: removed member count display
- Mod: ClubCMS: England Golf website: course info style updates
- Mod: ClubCMS: England Golf website: club facility types style updates
- Upd: Golf-Tourism: Clean-up tourism styles file.
- Upd: Golf-Tourism: Data-driven home-page map regions list.
- Mod: sql: ClubCMS: England Golf website: add new control property to eg-club-details
- Mod: ClubCMS: England Golf website: eg-club-details: hide google maps; add google maps link; style updates
- Mod: PristineDatabaseBuilder: .net 6.0
- Mod: SyncFreshdeskTickets: packagereference restores now.
- Mod: PristineDatabaseBuilder: allow spaces before/after a 'GO' in scripts so marcus doesnt get confused again
- Fix: PristineDatabasebuilder
- Fix: PristineDatabasebuilder? why doesnt it like my 'go'?
- Mod: ClubCMS: bindings.gbistage.list: added clubcms-england:egstage.en.dotgolf.co.uk
- Mod: Reverse Proxy: sites-gbistage.list: added S,W,1,1,egstage.en.dotgolf.co.uk
- Fix: Live: IndividualSubsByCategoryMultiPeriodReport terrible perf and timing out
- Mod: Live: missing index need by InvoiceClubMember view, for IndividualSubsByCategoryMultiPeriodReport report
- Mod: ISVAPI: CRM Competitions - replace json string-split char with untypeable character, ensure tests hit it
- Fix: Adweb: ensure we never clobber someone's CentralMemberCode within-union when they are merged and their home club is in another union #5006256
- Fix: Live: readonly scores role was not allowing the user to view scores...
- Add: Golf-Tourism: Created tourism builder class.
- Fix: Live/API: ScoreListing - ensure scores show in the correct order when played on the same day - when loading from cache they were in the wrong order. #5005750
- Mod: Adweb: Order scores by play date and play time
- Add: ISVAPI: CRM Competitions
- Mod: ClubCMS: bindings.gbistage.list: updated the second EG stage url to eg.cw.en.stage.dotgolf.co.uk
- Mod: ClubCMS: bindings.gbistage.list: updated the second EG stage url to eg.en.stage.dotgolf.co.uk
- MOD: ClubCMS: Trying to fix the css on dev instance
- MOD: ClubCMS: Trying to fix the css on dev instance
- MOD: ClubCMS: Remove charset on css/pagestyle.css
- MOD: CLubCMS: Tourism footer updates
- MOD: ClubCMS: Added css for hero-swiperjs terraces_tourism template
- Mod: Autogenerated poco classes.
- Add: sql: new table for EG CRM competitions
- Upd: Golf-Tourism: New tourism api, home page map control fixes.
- Fix: Vend: Products sync - Don't resync cart and course fees so we don't mess with their product settings in Vend.
- MOD: ClubCMS: Golf Tourism update on hero and footer control
- Mod: WHSAPI: new table to hold extra crap for scores. this should NEVER make it into the GetScores query. #5005771
- Fix: BulkEmail: minor query plan perf mods to the Clicks report
- Mod: Sql: extra indexes on InterClubMessage InterClubMessageAction CWEmailComposeLink to prevent the email clicks report drain CPU like a vampire
- Mod: ClubCMS: England Golf website: club search style updates
- Mod: ClubCMS: England Golf website: course info style updates
- Mod: ClubCMS: golfnz-course-info: added css class names to headers so we can customise them; display left column headers on mobile
- Mod: ClubCMS: England Golf website: club search style updates; replace all html tags (except the p tag) from the facility description
- Mod: ClubCMS: England Golf website: club detail style updates
- GBI voucher amendment.
- Mod: Bulk Email: Session timeout bumped to 36 hours (from the default which was 20 minutes). Fix: Bulk Email: Now running in Release mode, not Debug... should help response times!
- Mod: ClubCMS: England Golf website: club-search style updates; and fix for the recent revision (53395)
- Mod: ClubCMS: England Golf website: rte style updates
- Mod: ClubCMS: England Golf website: jobs style updates
- Mod: ClubCMS: England Golf website: facility types style updates
- Mod: ClubCMS: England Golf website: google map marker mobile style updates
- Mod: ClubCMS: England Golf website: mobile style updates
- Mod: ClubCMS: England Golf website: mobile styles
- Mod: ClubCMS: England Golf website: mobile styles
- Mod: ClubCMS: England Golf website: menu styles updates
- Mod: UnionAPI: user session tests
- Mod: ClubCMS: England Golf website: mobile styles
- commit support 2022
- Fix: Core: Build: regen WHSClient.g.cs #5005771
- Mod: ClubCMS: England Golf website: eg-club-search: hide the icons for now as we don't know yet the main icons to display here
- Mod: Core: Send whether score is matchplay or strokeplay flag to WHSAPI #5005771
- Mod: ClubCMS: England Golf website: eg-club-details: mobile style update
- Mod: ClubCMS: England Golf website: button mobile styles
- Fix: Updated Freshdesk API key in Support site.
- Fix: Update Freshdesk API key in SyncFreshdeskTickets.
- Mod: WHSAPI: update pcc index on score table to 2022
- Mod: ClubCMS: England Golf website: search text field: mobile styles
- Mod: ClubCMS: England Golf website: mobile styles
- Mod: WHSAPI: removed deprecated member merge syntax now that all the client code as been updated (i.e. adweb) missed a file again
- Mod: ClubCMS: England Golf website: mobile styles
- Mod: WHSAPI: removed deprecated member merge syntax now that all the client code as been updated (i.e. adweb)
- Mod: WHSAPI: IsMatchPlay flag when posting scores #5005771  forgot  swaggerfile
- Mod: WHSAPI: IsMatchPlay flag when posting scores #5005771
- Fix: ClubCMS: England Golf website: eg-club-details: mobile style fixes
- Fix: ClubCMS: England Golf website: button--primary mobile style fixes
- Add: WHSAPI: IsMatchPlayHandicapped column #5005771
- Mod: WHSAPI: minor nullability change to Member
- Fix: Teebooking: wa_TBAuthoriseTransactionsForTicket - Ignore @OverrideAmount. I have already applied this mod in NZ1 db last week (13 May).
- Fix: GolfNZ/TeeBooking DG-5616 The booking person through GolfNZ will now get redirected to an actual error.
- Fix: Public2012 build (with HORRIBLE HACKS THAT WILL NEVER RUN so i hope it goes away soon...)
- Fix: Live: Teams cards wouldnt work (be added to the comp correctly) when the comp has two rounds with the same round number on different days #50083
- Fix: Golf-Tourism: Course results control fixes.
- Fix: WHSAPI: we were not complying with the 'round to the right' convention when it came to negative numbers. Oops. #5006218
- Fix: TeeBooking DG-5616 Member or NonAffiliate won't ever be null but a negative value when an admin is trying to book for a player. Hence the mod
- Fix: ScheduledTasks: UpdateMemberRankings keeps timing out in ENG, so hacked the query into two pieces, should be OK now for a while longer.
- Mod: ClubCMS: England Golf website: eg-club-details: added a "View website" link button
- Fix: WHSAPI: v1.1 tech spec requires us to add a hacky buffer (1*10^-13) when rounding course handicaps AND SDs AND HIs (not just course handicaps) #5006218
- Mod: ClubCMS: England Golf website: eg-club-details: removed unused code
- Mod: Live: Club Description/Facility Types settings page: - display different recommended image dimensions for EG (because the main images are displayed as the hero) - display the facility type group name in the facility types table
- Mod: Autogenerated poco classes.
- Mod: TeeBooking DG-5616 - Added CreateDate to TBGroupTimeSlot as nullable column as we do not want to back populate the column. Instead moving forward we will add the date a booking is created. - Added ChangeDate to TBTimeSlot as nullable also to not back log but populate as changes occur moving forward for group bookings
- Mod: TeeBooking DG-5616 - Added CreateDate to TBGroupTimeSlot as nullable column as we do not want to back populate the column. Instead moving forward we will add the date a booking is created. - Added ChangeDate to TBTimeSlot as nullable also to not back log but populate as changes occur moving forward for group bookings
- Upd: Golf-Tourism: Remove google geochart reference.
- MOD: ClubCMS: Added DeletedDate to _HyundaiDataMonthlyStat
- Mod: ClubCMS: England Golf website: allow to hide / show admin panel (so we could use the elements underneath it); allow the admin user to enter advanced mode while in edit mode; updated some text and renamed some controls
- Add: Golf-Tourism: Added new website controls and .js library updates.
- Add: Golf-Tourism: Added new website controls.
- Mod: API: Digital membership card is now app config profile driven. Currently it's enabled for NZ.
- Fix: ISVAPI: ORNS when doing visitor lookups
- Fix: ISVAPI: ORNS when doing visitor lookups
- Fix: API: /load-course-info endpoint - Set RulesHtml to "null" if the club does not have local rules set up.
- Fix: TeeBooking DG-5616 #47912 Fixed where single user can book into group booking slot which creates double booking from golf NZ
- Fix: ISVAPI: CRM endpoints were using club.emails and club.phone instead of the enquiries contacttype
- Mod: ClubCMS: England Golf website: rte style updates
- Fix: Digital scorecard: Do not resolve the attester's passport Id if the client app has already provided a passport Id.
- Mod: ClubCMS: England Golf website: content tiles style updates
- Mod: ISVAPI: CRM: implement partial updates for one-to-many fields and add test
- Mod: ClubCMS: England Golf website: hero pagination style updates
- Mod: Digital scorecard: Retain original scorecard marker (attester) after scorecard is rejected. [DG-6078]
- Fix: Live: POS: ExcludeGreenFee setting loads correctly even if user clicks scorecard then clicks another scorecard quickly to link them when both are in comps. #49709
- Fix: Live: Preprint: actually preload handicaps
- Mod: ClubCMS: England Golf website: club-details: handle erroneous club ID; apply full scrim to club images to make sure the text and the nav are always readable; don't apply scrim to default red EG image
- Fix: Live: POS can now handle when user clicks scorecard the clicks another scorecard quickly to link them when both are in comps. (previously would boot the first person from the comp silently) #49709 TODO: Fix ExcludeGreenFee toggle - it doesnt work in the same situation as above
- Update get uid method to get Associationid first then clubId
- Add: ClubCMS: content-tiles: styles for the terraces_eg template
- Mod: ClubCMS: course-info: update text "NZR" to "CR" (Course Rating) to make it generic. This control will be used by EG as well.
- Mod: ClubCMS: admin-list: create list if it doesn't exist yet; automate creation of new list
- Mod: ClubCMS: England Golf website: RTE list styles update
- Fix GetProducts method passing with organsationGUID and it's reference
- Fix: Kiosk: Build
- Fixed return result in GetTournamentEmailRecipients method
- Mod: ClubCMS: England Golf website: style update
- Remove assiciationid condition from club path in GetTournamentFilters method
- Fix: Teebooking: Capture payments page - Back to how we use to capture payments, no longer passing an override amount passed to wa_TBAuthoriseTransactionsForTicket. The logic is now baked into wa_TBAuthoriseTransactionsForTicket sp for working out the amount to charge the persons' credit card (when a green fee is increased and difference is paid in the POS.).
- Fix: Teebooking: Capturing payments: For POS clubs, when you partially authorise entries on the ticket and then later authorise the rest, the captured amount is lower than the expected amount that we're supposed to capture. This mod should now be able to work out the correct amount to charge the person's credit card when a player's current green fee is higher and the difference is paid in the POS.
- Refactor Associationid issue with organisationUid
- Add: ClubCMS: England Golf website: menu style updates requested by EG
- Fix: Core: Build
- Add: ISVAPI: CRM Amenity/Course Type/Programme support
- Add: ClubCMS: England Golf website: menu style updates requested by EG
- FIX: ClubCMS: Added Meta tags for Golf NZ event detail page
- MOD: Resource Hub: Navigating users to listing page when they select type, topic or search for keyword from landing page
- Mod: Autogenerated poco classes.
- Add: ClubCMS: England Golf website: eg-club-details: repositioned isLoading condition
- Mod: ClubCMS: club-facility-types:
- Add: ClubCMS: England Golf website: club-facility-types: updates styles
- Add: ClubCMS: club-facility-types: added style files
- Fix: ClubCMS: Teebooking: Runtime error trying to load current code revision details from old ClubCMS.Version.Revision - this is now replaced by BuildInfo.Revision from DotGolf.Core project.
- Fix: Shared #49977 Fix broken link appending. Add check if the string contains http first before trying to append the 'http://' in the replace.
- add drag and drop components
- Fix: Teebooking: Capturing payments: For POS clubs, when you partially authorise entries on the ticket and then later authorise the rest, the captured amount is lower than the expected amount that we're supposed to capture. This mod should now be able to work out the correct amount to charge the person's credit card.
- MOD: Tournament V2: Latest changes for Kingsley to check
- Fix: ISVAPI: failing test
- Mod: ISVAPI: new CRM fields: Head Pro name and email
- Fix: WHSAPI: nodes keep running out of sql connections, double max pool size. even with 10 nodes, that still only a max of 20000 connections, which sql can handle
- Mod: Autogenerated poco classes.
- Oops, accidentally committed some stuff to Trunk instead of my branch.
- Mod: SQL: new column on contacttype to prevent clubs creating more than one of that type (for the Head Pro type which will come from CRM data)
- Mod: Split WHSClient from DotGolf.Core and put it in DotGolf.Core.WHSAPIClient. Mod: Created DotGolf.Core.Abstractions project, moved some required interfaces/enums in there.
- Add: ClubCMS: course info style updates
- Add: ClubCMS: England Golf website: style update
- Mod: ClubCMS: club member info control: removed unused code; added backgroundImageUrl control property so we can customise it
- Add: ClubCMS: England Golf website: moved some css to the member info EG css file
- Add: ClubCMS: England Golf website: added member info EG css file
- Add: ClubCMS: England Golf website: moved some css to the course info EG css file
- Mod: ClubCMS: golfnz-course-info: removed unused code
- Mod: ClubCMS: England Golf website: replaced green with the red EG colour
- Add: ClubCMS: England Golf website: added course info EG css file
- Refactored vue project
- Mod: ClubCMS: replaced the Payment Express logo with the Windcave logo
- Mod: #5006179 When a member is merged and they are also an iGolf member with a payment, the subs online report shows an incorrect total because their CMember record was moved away from their original MemberId.  We will now update the CWMembershipApplication table with the new MemberId so that things stay in sync.
- Mod: ClubCMS: England Golf Website: style update
- Mod: ClubCMS: England Golf Website: scores comments styles
- Add: ClubCMS: England Golf website: added club facility types EG css file
- Fix: Online Subs Transactions report was inconsistent with itself due to a missing CMember record (no longer there due to the member being merged with another record). We still have to fix the member merge code to update CWMemberApplication, but that's a story for another day.
- Add: ClubCMS: England Golf website: club details: display default image if the club doesn't have any main images
- Add: ClubCMS: England Golf website: club details: added Google Maps, updated styles
- Mod: ClubCMS: England Golf Website: menu style updates
- Mod: ClubCMS: England Golf Website: main.css: added template banner, breadcrumbs, eg igolf styles
- Add: ClubCMS: England Golf website: club details control initial commit; added eg css for the "my golf" controls
- MOD: Tournament V2: Player management and member search initial changes
- Fix: TeeBooking #49828 Fixed where Book at club was not set correctly
- Cleanup: Got rid of all the EF code from CompetitionRepository - the prizes stuff can now be moved away to a Business Logic directory somewhere...\ Cleanup: Removed apparently unused CompetitionWebService.asmx.
- Cleanup: Removed unused method from CompetitionRepository.
- Cleanup: Removed a couple of Repository classes we no longer use.
- Mod: Core: add disclaimer to the BusinessLogic folder (so people don't but business logic in there... 😂)
- Mod: Live: remove unused code in standard.master after the navigation menu refactor
- Mod: Live: remove unused code in standard.master after the masterpageoptions refactor
- Add: #warnings for LEGACY_LOCAL_FILES - we need to review and fix these before the casual golf solution can be moved to the main webservers+load balancer.
- Mod: Live: ISVAPI: CRM club description/info
- Cleanup: Removed crappy old Version.aspx and friends.
- Mod: updated dev pc build script after doing some recent installs.
- Mod: Removed support site from ukprod reverse proxy, we have no support.golf.co.nz over there.
- Mod: #password-change API will now deny auth to tokens that were issued before the last passport credential change, so users will be logged out from the app.  New AUTH9042 error thrown in these cases. Fix: Unit tests that touched WHS did not work (injected EmulatedWHSClient) Add: Unit tests for credential changes.
- Fix: API tests: teardown error after giving club a product
- Fix: API tests: teardown error after giving club a product
- Mod: ClubCMS: England Golf Website: menu style updates
- Mod: ClubCMS: England Golf Website: menu style updates
- Fix: Fix: POS now displays card as a closed sale after printing a card for an online tee booking from POG.
- Mod: sql: trigger now tolerates a null TransferredToCGRegionId column on the CGRegion table (mainly for unit tests but may help in future)
- Fix: sql: trigger was incorrectly setting the facility regionId to a CGRegionId instead of a valid RegionId when its club gets updated
- Fix: Live: Build - missed a file
- Add: Indexes to speed up slicer import performance for EG where iGolf has a massive number of members.
- Fix: Shared: Build
- Mod: Live: card request member resigned hook namespace change
- Fix: query bug in member resigned hook
- Mod: #passport-change Moar speed by caching Passport.CredentialsNotValidBefore in strategic places.
- Mod: MSK+KSY: refactor member resigned hook to delete pending card requests so they dont get printed
- Fix: Live: "invalid date" showing next to all cards in the pending card requests screen for GI clubs
- Mod: #password-change Track the start timestamp of the session, and if the session is older than the current credentials, log the user out.
- Mod: #password-change Also expire any remembered Websession records so that those browsers get killed too.
- Fix: POG: Part 2 (damn it!) - Sale was not posted for online tee booking (with no outstanding dues).
- Fix: POG: Sale was not posted for online tee booking (with no outstanding dues).
- Mod: ClubCMS: England Golf Website: eg-news-list/view.html: hide one of the Create News Article buttons in edit mode (when there's news articles returned)
- Mod: Autogenerated poco classes.
- Mod: #password-change Changed the NotValidBefore column to UTC.
- Mod: ClubCMS: England Golf Website: home social media icons style update
- Add: #password-change Hook implementation for member changing their password
- Mod: ClubCMS: England Golf Website: menu style update
- FIX: ClubCMS: GolfNZ register event interest not submitting due to empty comment/suggestion
- Mod: Autogenerated poco classes.
- Add: #password-change Passport.CredentialsNotValidBefore column
- Mod: ClubCMS: England Golf Website: when creating a new page, add the hero control by default also
- Add: #password-change New IMemberPasswordChanged hook that is fired whenever a member's existing password is updated.  We'll use this later to ensure we log them out of all devices whenever they change their password.
- Mod: ClubCMS: England Golf Website: menu text size updates requested by Ben
- MOD: ClubCMS: Added terraces3_1 css for content tiles
- Mod: ClubCMS: England Golf Website: header style updates
- Mod: ClubCMS: England Golf Website: short hero style updates
- Add logic to add deletedDate to CRFRequest related to memberid
- Mod: ISVAPI: update CRM fetch all clubs method to include simple F&P data
- Mod: Shared HookManager: no more hacky new-ing up of Core HookManager
- Mod: Shared HookManager: no more hacky new-ing up of SharedDataConnectionBuilder
- Mod: ClubCMS: England Golf Website: p style update
- Mod: ClubCMS: England Golf Website: text update
- Mod: POS: We now post a sale to Vend/Kounta if you print a card for an online booking in POG as long as there is outstanding payment dues.
- Mod: AdWeb DG-6033 Moved Change request messages into a new 'Messages' page so that it doesn't clog the usability of AdWeb up. Link on the side menu with numeric bubble indicator if there is more than 1 messages in the change request list -> this only occur if the user has rights to see these things.
- MOD: ClubCMS: Minor fixes on Content Tiles control
- Mod: Removed separation between VI/MC and Diners cards now that we have to deal with Amex and Unionpay too - just throw these and A2A together in a giant pile. Mod: Removed bank reconciliation section from Payment Reconciliation report since Matt doesn't use it in his current process.
- Fix/Mod: ClubCMS: England Golf Website: vacancy filler style updates
- MOD: ClubCMS: Updates on content tiles hyperlink clicks
- Mod: ClubCMS: England Golf: eg-club-search: use the course search utility classes (used by EG news, and similar to the one used by GNZ)
- Mod: ClubCMS: England Golf Website: news list style update
- MOD: ClubCMS: Updates on content tiles modal layout, convert description to use CKEditor
- Mod: ISVAPI: adding to a CRMAPI test to ensure we can set stuff to null properly
- Fix: Live: build again
- Fix: Live: build
-  Mod: Live:  New folder for hook to delete pending card requests if someone is resigned.
- Mod: Live: Move IMemberResigned hook to Core. New folder for hook to delete pending card requests if someone is resigned.
- Fix/Mod: ClubCMS: GNZ, GI: resource-hub/styles.css: because I moved tile footer out of tile body, I need to adjust the padding and the width of the tile footer.
- Mod: ISVAPI: CRMAPI - basic EG Find and Play data GET/POST. Still need these: //Intro //HeadProName //HeadProEmail //CourseType //Programmes //Amenities //Competitions
- Hide Toggle Fav Report
- Mod: ClubCMS: England Golf Website: Resource Hub style update
- Add flag to 'Course Rating Variance Report' by EnableCourseRatingVarianceCalculation
- Mod: ClubCMS: England Golf Website: Resource Hub Detail style updates
- Mod/Fix: ClubCMS: Resource Hub detail style update
- Fix: Live: CompetitionVsGeneralScores report working for igolf, and we can adjust in future if it starts timing out to select a max of N members (with a warning saying please narrow your filters)
- Fix/Mod: ClubCMS: England Golf Website: Admin Resource Hub style update
- Fix: API request to / returned 401 which interfered with Jenkins and it's warmup call.  Return 200 OK instead.
- FIX: BulkEmailV3: Fix image white space
- Mod: ClubCMS: England Golf Website: Resource Hub header style updates
- Mod: Live: Use the new MasterPageOptions from Shared
- FIX: BulkEmailV3: Fix image white space and html inline bug on the header
- Mod: ClubMemberRepo.cs - Removed redundant '$'
- Fix: Digital Scorecard: Stop doing massive SQL index scans on ScoreIntent table when updating score intent approval status. (Thank you - David and Tom)
- Mod: ClubCMS: England Golf Website: eg-hero: apply svg shape to default hero svg image
- Fix: Performance improvement around Search Members (parameter sniffing on @SearchText caused bad plans)
- Mod: ClubCMS: England Golf Website: hero text style updates
- Mod: Use the DotGolf.Core version of TeeBookingHelper.EntryWasPaidOnline to check if a ticket entry was paid online.
- Fix: API: #flexi-options-payment - If an entry was originally paid online, that entry should remain paid online when the current user in the app is not paying for that entry. Fix: API: /calculate-charges endpoint - Consider only booked players as eligible payees.
- Fix: Org DG-6093 #49730 Designer file... else it doesn't know what has been removed and added...
- Fix: Org: Build
- Mod: Live/Org: Master page options now moved to Shared so it's no longer copy pasted and out of date because keeps causing bugs
- Fix: API: #flexi-payment-options: Require only one payment rule should be driven by TBClubSettings.RequireOnlyOnePaymentPerBooking setting.
- Mod: Live: add new courselookup toggle to data sharing/interop countries because it's distinct from scorereturn - still no course lookup with GB-SCT
- Mod: Live: add new courselookup toggle to data sharing/interop countries because it's distinct from scorereturn - still no course lookup with GB-SCT
- Mod: Namespace change for CardPollerJob.
- Fix: Do not log exceptions if we fail to take the lock (this will be fairly common as the two webservers fight over who gets to run the poll) Fix: Corrected the namespace.
- Mod: ClubCMS: England Golf website: Resource Hub / Library: apply EG website branding
- Mod: ClubCMS: England Golf website: Resource Hub / Library: apply EG website branding
- Mod: ClubCMS: resource-hub/view.html: moved tile__footer out of the tile body div. Swiper pagination arrow button: update the button class
- Mod: ISVAPI tests: simple usings
- Mod: ISVAPI: moved v1 tests into v1 folder to it's more obvious
- Mod: In dev we still had the old live.nz.dev1.internal URLs hardcoded; updated to live.nz.dev.golf.co.nz.
- Mod: ISVAPI: attempt to get rate limit test to pass on jenkins reliably
- Mod: ClubCMS: England Golf website: Resource Hub / Library: apply EG website branding
- Mod: Removed CardPoller service, replaced with hosted service in the DotGolf.Live app pool.  One less build job and service to care about.
- Mod: Removed CardPoller service, replaced with hosted service in the DotGolf.Live app pool.  One less build job and service to care about.
- Mod: ClubCMS: nicer styling of the bottom of the my account page after moving the billing card panel
- Mod: ClubCMS: grammar change
- Add: Bindings for NZProd.API.NZ
- Fix: ClubCMS: Allow people to view their tournament billing cards even if their home club has no SUBS
- MOD: BulkEmailV3: Change hyperlink color default to black
- MOD: ClubCMS: Resource Hub allow featured resources within landing pages
- MOD: BulkEmail v3: Fixed the white space at the bottom of each image, make the list bullet color same as the text, and apply a possible fix on the html text button on other email client and lastly, added a Image (No Crop) so we are not using a JS cropping tool that might be a cause for an image quality loss. Image is now directly uploaded to S3 thru FileManager
- Fix: Org Add missing closing tags to Div and Span in TabLegal.aspx
- Fix: Org - Removed unnecessary '/' from CopyTournaments.aspx tbody tag in HTML - Removed missing CssClass from lblDateStamp in ResultsReport.aspx asp label
- Fix: ScheduledTasks: xero association sync for golfnz combined with flexiclub subs sync causes golfnz to hit rate limit and invoices to get skipped. #49419
- Fix: API: /load-slot-for-editing endpoint crashing when there are multiple payees for the same player (might be a bug in wa_TBFindPayeeKeysForBooking sp) - use FirstOrDefault instead. This will not affect the current DG app since flexi payment options has not been released yet.
- Fix: ScheduledTasks: xero association sync for golfnz combined with flexiclub subs sync causes golfnz to hit rate limit and invoices to get skipped. #49419
- Mod: ERR_LOCK_FAILED is not an exception, stop treating it like a problem.
- Fix: API ORNS when trying to load and lock timeslot
- Fix: Org DG-6093 #49730 Removed Cute Editor and used the generic ASP file upload as CuteEditor was trying to save the file to disk and potentially due to load balance. File the new thread trying to load back won't be on the same disk. So we just stream it straight from memory and not save it anywhere as its not required.
- Mod: ClubCMS: append revision number to styles.[pagelayout].css file reference
- Mod: ClubCMS: England Golf website: eg-club-search/view.html: removed unused code
- Fix: Updated JenkinsBuild keys in Reverse Proxy send-command script properly.
- Add: SSL to Bulk Email (it's about time)
- Mod: Shared: stop visual studio showing angery red squiggles everywhere because xero client is in the build but not in the solution
- Fix: Haha, Invoke-WebRequest still uses filthy Internet Explorer to parse HTML... -UseBasicParsing takes care of that.
- Experimental: Deploy script will now do a GET request as we deploy apps to webservers.  This will warm up the app faster, as well as delay the second webserver being taken down too quickly as the deployment is happening.
- Mod: scoreintentfollowup: unhardcode magic numbers (number of days between followups)
- Fix: Clubcms: ORNS when loading round data (to fetch course stats) for tournament that does not have any draws
- Mod: ClubCMS: England Golf Website: social media styles
- Fix: Updated JenkinsBuild keys in Reverse Proxy send-command script.
- Fix: ClubCMS - Removed disabling of 'Send Password Reset' as the handling of bad membership number is supposed to be handled by the server anyway.
- Mod: ClubCMS Removed extra semi-colon and rogue 'getElementsByClassName'
- Fix: Clubcms: parnz+futures golfers cant pay for events online #49874
- Fix: Performance issue in member search (NVARCHAR parameter, VARCHAR column, so indexes were not being used)
- Mod: POS: Unclosed sales with online tee bookings now appears red, like an unpaid card. [DG-6066] Mod: Teebooking: Stop user from authorising a payment if there is no sale attached.
- Fix: POS: Updating a sale - POS not displaying amount due (to be paid) after increasing the green fee.
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: if you get a mem no error when trying to sign up, and then successfully retry with a valid mem no, the error reappears after you've verified, and prevents you from continuing
- Fix: ClubCMS: recaptcha sometimes fails to load when accessing EG site from NZ
- Fix: ClubCMS: recaptcha sometimes fails to load when accessing EG site from NZ
- Fix: ClubCMS: Create user login wasnt working after latest verification code HashSet mod. Fix: ClubCMS: bad member number errors not showing in UI properly
- MOD: ClubCMS: Golf NZ - Extend Content Tiles to have a pop-up window for more info
- remove unnecessary insert method
- Update add template method, fix for build
- Upd: Golf-Tourism: File ignore.
- Upd: Golf-Tourism: Removed all static files/images.
- Fix: CasualGolfAPI: build fail because I deleted some code in rev 52861. Copypasted the old code back into casualgolfapi to get this over with
- Fix: ClubCMS: Do not break existing verification codes when deploying "Allow multiple email verification codes to exist"
- Fix: ClubCMS: Allow multiple email verification codes to exist at once so people spamming the verify button don't clobber their own codes
- Fix: ClubCMS: Missing Amex logo.
- Add/Mod: ClubCMS: replaced the Payment Express logo with the Windcave logo
- Mod: ReverseProxy: added S,W,1,1,northernwairoagolf.co.nz
- Mod: ClubCMS: bindings.list: added northernwairoagolf.co.nz and www.northernwairoagolf.co.nz
- Add voucher welcome email template Add function to show validate credit card message Add resign member logic after final trials
- Fix: ClubCMS: people seeing their own scores when viewing their friends profile. Fix: ClubCMS: viewing a friends profile fails if they are a casual golfer with a resigned member rec Mod: ClubCMS: IsRegistered removed unneeded trycatch that is hiding stacktraces
- Mod: ClubCMS MemberApi/MemberController.cs changed to use new 'using' and added more explicit checks for England golf related logic. Member.cs changed to use new 'using' and explicit alias syntax for data required from sql query
- Fix: ClubCMS: better handling of otherPassportId=0 so exceptions dont get thrown when getting handicap graph
- MOD: ClubCMS: Club search hide dropdown and advance filter while KO still initializing
- Mod: ClubCMS: New exception handler getting annoying in debugmode
- Fix: UFP: Pull Windcave credentials from config profile.
- Fix: ClubCMS: rCompetitionResult2.ascx: Comp results not displaying hole by hole scores - use the internal hole no instead of hole alias.
- Fix: Golf.co.nz: cart fees sometimes returns too many complementary items and fails
- Fix: Clubcms: incorrect object type when getting member notifications from sql
- Fix: Public: syntax error
- Fix: golf.co.nz casual member profiles didn't load correctly Fix: Code was missing from casual golfer urls (old bug)
- Mod: rename 9hCompetitionScores report to NineHoleCompetitionScores because i keep losing track of it in the search
- Mod: ClubCMS: England Golf website: eg-menu: style updates
- Mod: ClubCMS: England Golf website: eg-menu: style updates
- Mod: ClubCMS: England Golf website: eg-menu: style updates
- Add: SECURITY - check member and score codes (and more)
- Mod: WHSAPI: failing test fails properly - refactor so Asserts are more obvious
- Mod: WHSAPI: failing test fails properly
- Mod: ClubCMS: England Golf website: eg-news-list: added the create news article admin button
- Fix: Live: 9h comp report timing out for club with a lot of eligible members
- Mod: WHSAPI: failing test passes now for only logging the first 1000 chars of response bodies because vortex gets too full.
- Mod: ClubCMS: EG, GNZ: added revision number to the js file reference
- Mod/Fix: ClubCMS: England Golf website: resize the video on load; fix the rte__content element selector (specifically applicable to the news detail page)
- Mod: ClubCMS: England Golf website: eg-news-detail: removed extra spaces
- Mod: ClubCMS: general.js: added comment
- Fix: WHSAPI: Build (runpcc)
- Cleanup: ClubCMS APIs: Introduced global exception filter for WebAPI requests and removed now unnecessary try..catch blocks from all API methods.
- Mod: WHSAPI: Add failing test for only logging the first 1000 chars of response bodies because vortex gets too full.
- Fix: API: #flexi-payment-options: When adding new players in the booking, the app user should be the default payee. Fix: SQL: wa_TBApplyBookingChanges: TBTicketEntry.PaidDate should be set in the code via HelperFunctions.UpdateTicketEntryPaidFlag method. With this mod, we are now logging "Online payment updated" for each paid entry.
- Mod: ClubCMS: England Golf website: admin-feature-content: added a sample Video URL
- Fix: ClubCMS: England Golf website: admin-feature-content: differentiate the video URL from the embed URL for the pop-up video
- Mod: ClubCMS: England Golf website: eg-hero: scrim style updates
- Fix: ClubCMS: should not longer get problems with forgotpassword on ios
- Fix: SQL exception happening in golf.co.nz FOR EVERY MEMBER LOGGING INTO THE SITE.......
- REVERTED membercode patch (this is too big to publish to GBI in one go - we can't do this many changes and trust everything will work) Merged revision(s) 52950 from Trunk/DotGolf.ClubCMS: Fix: ClubCMS DG-6059 Added 'Code' which is code associating to the member we're trying to get data for is used and check in api call before returning data. If it doesn't check out it'll throw 'you are not unauthorised' ........
- Fix: ClubCMS DG-6059 Added 'Code' which is code associating to the member we're trying to get data for is used and check in api call before returning data. If it doesn't check out it'll throw 'you are not unauthorised'
- Mod: WHSAPI: Only log the first 1000 chars of response bodies because vortex gets too full. Added wiretap logger to tests to ensure goodness. (can probably remove it later in favor of it's own test suite) Added wiretap logger sanity test
- Mod: ClubCMS: England Golf website: resource hub style updates
- Mod: ClubCMS: England Golf website: eg-hero: scrim style updates; allow purple scrim (better on red images e.g. home hero)
- Mod: ClubCMS: England Golf website: admin-eg-hero: text updates
- Mod: Core: new settings class for Subs
- Mod: Core: new settings class for Subs
- Fix: API: #flexi-payment-options: Eligible payees not returned.
- Fix: API: #flexi-payment-options: Flexible payment option is not enabled when creating a new booking. Mod: API: /calculate-charges endpoint - Require user to pay for at least 1 player in the booking.
- Mod: ClubCMS: England Golf website: eg-hero: scrim style updates
- Fix: ClubCMS: content-tiles/view.html: removed height property from the image preview (so that it won't look distorted)
- Mod: ClubCMS: England Golf website: eg-hero: add the option to apply a top scrim (nav area) only
- Mod: ClubCMS: Golf NZ / EG: general.js: make the swiper-pagination element selector more specific so that they won't conflict with each other
- Mod: Org: allow selection of other months so GI can test the reports out
- Mod: Org: update junior girls medal reports for GI 2022. ensure scores played off pending are not included.
- Mod: Live: support users can edit their own profiles
- Mod: Autogenerated poco classes.
- Add column EnableAutoResignAfterLastAttemptFailed to Clubsetting table
- MOD: ClubCMS: Align download icon in Resource Hub details page when the name is too long
- Remove method which auto generate text field values
- Add missing interface file
- Add: Golf-Tourism: Added fonts, js, css to tourism template dir.
- Add: Golf-Tourism: Added terraces_tourism template.
- Fix: Bulkemail: build, after Potential future sql injection in SystemEmailProvider
- Fix: Live: Potential future sql injection in SystemEmailProvider
- MOD: Tournament V2: Added main navigation
- Voucher process enhancement done
- Fix: Live: Potential future sql injection in bulkemailV2 send
- Mod: ClubCMS: England Golf website: eg-hero-admin: refresh / display data after clicking cancel edit
- Fix: Live: Potential future sql injection in RoundsPlayedByMember report
- Mod: ClubCMS: England Golf website: eg-hero-admin: added delete and cancel functionality; removed IsActive and IsNew from the saved json data
- Add: ClubCMS: England Golf website: eg-hero: use CWJsonContent, and the file manager for the images
- Add: ClubCMS: England Golf website: added the admin-eg-hero control, which uses CWJsonContent, and the file manager for the images
- Fix: Org #49684 When the report for competition result cannot get the banner image from url it throws the error depicted in the ticket... SO we now catch it and log error and let the report continue to load. Also updated to use the new StaticContent to get URL.
- Revert: Mod: Live: remove two unused file access methods in case they get used for something silly
- ADD: ClubCMS: Add CSS changes on Admin Resource Hub
- Mod: Live: remove two unused file access methods in case they get used for something silly
- MOD: ClubCMS: Fix search in Resource Hub and width of the feedback section
- Add: Golf-Tourism: Template for golf tourism website.
- Add: Golf-Tourism: Test images.
- Add: Golf-Tourism: New control js, css, & images.
- Fix: ENG, not EN.
- Update query to get club id from ClubUID
- Fix: Logout method stopped working after we started signing stuff with the the StupidKey.
- Mod: ClubCMS: England Golf website: feature-content: use CWJsonContent, and allow the user to select a file from the file manager, or upload a new one using the file manager
- Mod: Another attempt at making the app re-login after presenting a renewal token with an outdated signature.
- Add sql to Insert trial period end email template
- Mod: Attempt to have the mobile apps log themselves out if they try to renew a token with an outdated signature.
- Mod: ClubCMS: England Golf website: feature content related style updates
- MOD: ClubCMS: Added css files for Golf England Resource Hub override styling
- Fix: Live: #46513 Case sensitivity thing
- Mod: Return specific error messages for JWTs with invalid signatures (about to become a rather common occurrence once we rotate the secret...)
- Fix: Live: #46513 In theory this should stop home club changes request to request home club change to itself as per noted ticket.
- Mod: Shared: actually log exceptions when Exporting Levies Invoices To Xero
- Mod: Analytics: remove hardcoded Encryption.cs stuff which already exists in Core
- MOD: Bulk Email V2: Added CSS to fix the Styles
- Add: API: Teebooking: #flexi-payment-options. Allow flexible payment options in the DotGolf app - initial commit.
- Fix: Analytics: new cookie name to unbreak matt
- Fix: Public2012: build after svn://svn.internal.golf.co.nz/Trunk/?r=52861
- Mod: Shared: Removed some old encryption code only used by public 2012 - trying to clear out some references to these keys to figure out what we're dealing with
- Mod: Rotated Xero app secrets.  This one isn't a P1 because you still need Xero OAuth2 tokens to access any accounting information.
- Mod: Core: Update symmetric login encryption keys for Live, Analytics, Public, ClubCMS cookies
- Fix: Updated Casual Golf SSO key (just updated hardcoded value since we don't have Core here yet)
- Fix: Unhardcoded secret key from Analytics.
- Fix: SSO fail-safe, if the browser presents a bad token, just ignore and let the user login normally.
- Reverted the revert - rotate the SSO keys again - DO NOT PUBLISH API
- Reverse Merged revision(s) 52840 from Trunk: - didnt actually need to do this *cough* Mod: Adweb: new client and secret key for cognito auth ........
- Mod: Adweb: new client and secret key for cognito auth
- Mod: ActivityTracker: remove unused jwt secret key
- Reverse merged revision(s) 52830-52829 from Trunk: (broke API too badly) Mod: SSOSecretKey change for NZ ........ Mod: SSOSecretKey change for GBI ........
- Mod: Rotated Freshdesk API key
- Mod: SSOSecretKey change for NZ
- Mod: SSOSecretKey change for GBI
- Mod: ClubCMS: England Golf website: play button style update
- Add: Obsolete warnings for potentially compromised keys.
- Fix: Removed compromised slack webhook call from BulkEmail since we don't need this anymore anyway.
- Mod: new machinekeys for compromised webapps
- Mod: new machinekeys for compromised webapps
- Mod: new machinekeys for compromised webapps
- Mod: new machinekeys for compromised webapps
- Mod: Remove "Diners Club" and replace it with Amex. #windcave-amex
- Mod: Core: Delete unused encryption key
- Mod: Rotated password for Clickatell.
- Fix: ClubCMS: correct tournament pxpaykey again
- Add: Obsolete warnings for potentially compromised keys.
- Add: Obsolete warnings for potentially compromised keys.
- Fix: ClubCMS: correct tournament pxpayuserid
- Fix: ClubCMS: correct tournament pxpaykeys
- Add: Obsolete warnings for potentially compromised keys.
- Add: Obsolete warnings for potentially compromised keys.
- Fix: Shared: un-remove used method for club data class, ControlIsActive
- Mod: ClubCMS: remove some references to club.Region again
- Mod: Shared: remove unused method for club data class, ControlIsActive
- Mod: sql: drop unused proc wa_IsValidMember
- Mod: Shared: remove unused method for creating "external clubs"
- Mod: ClubCMS: remove some references to club.Region - we might be using this to store postal County info for EG clubs, which might not map to the region table
- Fix: ClubCMS: correct unhardedcoded teebooking DPS IDs
- Mod: ClubCMS: England Golf website rte style update
- Mod: TOTP secret key rotated.
- Mod: API: #flexi-payment-options: Return the payee's affiliated or non-affiliated id.
- Mod: clubcms: unhardcode windcave tournament creds
- Mod: clubcms: unhardcode windcave creds some more (same file as prev commit)
- Mod: clubcms: unhardcode more windcave creds. still some sus ones hanging around...
- Mod: clubcms: unhardcode windcave cred
- Fix: PXPOST hardcoded key
- Fix: Updated HARDCODED F#$%^Q@#$%^#%^T DPS KEY
- Fix: Updated DotGolf windcave key (again)
- Fix: New key for England.
- Mod: Updated Windcave credentials since previous one could not be entered into their system.
- Fix: Wales PXWS password complexity rules.
- Mod: Rotated compromised Windcave credentials for all environments.
- Mod: Rotated compromised AWS keys for nzstage, nzprod and ukprod (JenkinsBuildServer)
- Mod: WHSAPI: attempt to fix port starvation when logging exceptions: any failure to log an exception would instead log to cloudwatch. FOUR TIMES. If the logging failure is caused my port starvation, then this makes the problem worse. Also easier to trace these when they occur concurrently
- Mod: WHSAPI: Where practical, DO NOT open sql connections when we already have sql connections open. This can cause port starvation
- Mod: WHSAPI: ensure we never get more than one log-sync thread. if log syncing fails, send error to cloudwatch
- Mod: WHSAPI: update package to potentially resolve this exception https://github.com/dotnet/SqlClient/issues/85#issuecomment-920222016
- Mod: ClubCMS: England Golf website menu style updates
- Mod: Autogenerated poco classes.
- Voucher add cloumn secheduleEmailInDays
- Mod: ClubCMS: England Golf website: admin controls style updates
- Mod: ClubCMS: England Golf website: admin controls style updates
- Mod: ClubCMS: England Golf website: admin controls style updates
- Mod: WHSAPI: log requests based on their start time, not their end time
- Mod: Autogenerated poco classes.
- Update voucher table column trail* to trial*
- Mod: ClubCMS: England Golf website: admin-eg-rte/viewmodel.ts: corrected api path
- Mod: ClubCMS: England Golf website: removed unnecessary default value for linkUrl
- Mod: ClubCMS: England Golf website: removed unnecessary default value for imageUrl1
- Mod: ClubCMS: bindings.list: added futureswellington.cw.golf.co.nz
- Mod: Reverse Proxy: added S,W,1,1,futureswellington.co.nz and S,-,1,1,futureswellington.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added futureswellington.co.nz and www.futureswellington.co.nz
- Mod: Adweb: include play time of score
- Mod: ClubCMS: England Golf website: timeline control: apply custom styles to the save and cancel buttons
- Fix: Adweb: score history was not showing score history of holes
- Mod: ClubCMS: England Golf website hero: display the default EG image if the hero content hasn't been set up yet
- Fix: ISVAPI: stringEnumConvert by default (affiliationstatus inadvertently broke the v2 swagger def) Mod: ISVAPI: add County to swagger def
- Fix: Live: DG-6034 Uncaught TypeError undefined reading 'value' When [tb_multi_cb_lbl] element doesn't exist when using ExtQuery for report rendering it throws JS error as it does get run on load. So to stop this from happening it is now checking if the element exists before checking for value
- Mod: ClubCMS: England Golf website menu style updates
- Mod: ClubCMS: England Golf website menu style updates
- Fix: https some font imports because most of our sites are TLS now.
- Mod: Live: Auto Player Import Not sure if this is just dev or what not but in an event where the retrieved player record to import returns null CentralMemberCode... This will blow up on line 427 so we make it check for null first before trying to access this number...
- Fix: Avoid an exception where, if you try and load the Search Slots page for a date too far in the past, DateTime.MinValue gets parsed by SQL Server.
- Fix: Live: occasional js expection in user admin: don't load passtrength script async
- Mod: ClubCMS: England Golf website: updated the admin button css class
- Add: Half-baked attempt to add an "Execute ALL" button to Adweb so I don't have to click Execute on every script.  #lazinessftw
- Mod: ClubCMS: rContent/Html: just updated the admin button css class
- Fix: Subs: Importing invoices from Xero - SQL query to link payment receipts to subs invoice is now running on the same DB transaction. #49568
- Mod: Updated TODO list for schema updater.
- Fix: Subs: Set the UserId column so that the newly created "import" user for the club will not filtered out. [DG-2998]
- *** DFH CODE REVIEWED TO HERE *** Fix: Subs: Check for the 'import' user, if it is deleted, undelete it, and if it doesn't exists, create it. [DG-2998]
- Mod: ClubCMS: England Golf website menu style updates
- Mod: ClubCMS: England Golf website menu style updates
- Fix/Mod: ClubCMS: England Golf website desktop menu: only apply the main menu item background when dropdown-is-open is present. Otherwise, it could appear when a mobile menu main item is opened.
- Fix/Mod: ClubCMS: England Golf website menu: allow scrolling on mobile view
- Mod: CRMAPI: extra fields for Find & Play after meeting
- Fix: Live (NZ&GBI) #5005843 Updated TabRptMemberListing links Removed the old 'TabRptMemberListing.aspx' links and updated them to '/Shared/Reports/ExtQueryRender.aspx?ExtQueryResourceName=Members.FullMemberListing' As TabRptMemberListing.aspx has been removed in favor of the new FullMemberListing report
- Mod: WHSAPI: update test for prev commit to be correct
- Mod: WHSAPI: update test for prev commit
- Mod: WHSAPI: Made getting multiple handicaps for an organisation go faster by removing handicap Explanation and bumping up the page size
- Fix: Live: Attempt part two to get iGolf seeing handicap listing report without timing out.  #5005754
- Mod: Mod: ClubCMS: England Golf website: menu style updates
- Fix: GolfNZ/ClubCMS #49539 GolfNZ result was not binding correctly so made it a bit more explicit for full 18 or just 9 hole competition for binding.
- Mod: WHSAPI: Made getting multiple handicaps for an organisation go faster by async awaiting handicap calculations
- Fix: Live: Attempt part one to get iGolf seeing handicap listing report without timing out.  #5005754
- Mod: ClubCMS: Can now log into GI club website with regular user security users with SuperAdmin or CWSuperAdmin permissions instead of the ones we insert by hand. The permission is still not available in Org for GI to assign to new users though. Doesnt seem to work for CWAdmin users and not sure why yet... #5005368
- Add: Golf-Tourism: Added club profile control.
- Mod: Live/Org: user admin now shows super admins as super admin properly
- Mod: ClubCMS: sql: EG controls: CWControl and CWControlProperty inserts
- Mod: ClubCMS: England Golf: footer: added back to top link (similar to Golf NZ's)
- Mod: ClubCMS: England Golf / Golf NZ: simplify footer behaviour--as long as the screen width is less than or equal to 767px, make the footer scroll with the page.
- Mod: UnionAPI: add http 404 if PCC not found
- Mod: ClubCMS: England Golf website: scrim style updates
- Mod: ClubCMS: England Golf website: scrim style updates
- Mod: ClubCMS: dispose of httpwebrequest responses anywhere they aren't being disposed - as per the documentation they can leak connections if not disposed
- Mod: ClubCMS: England Golf website: css: remove unused code
- Mod: ClubCMS: England Golf website: button style updates: primary is red; secondary is purple. Use the same animation for both (new colour fade in).
- Fix: GI contactus typo
- Mod: Public: tournament results not loading problem - revert all other mods and only comment out the webrequest thing
- Mod: Public: extra logging for tournament results not loading problem again again again
- Mod: Public: extra logging for tournament results not loading problem again again
- Mod: Public: extra logging for tournament results not loading problem again
- Mod: Public: extra logging for tournament results not loading problem
- Fix: Public: no caching of results
- Add: Golf-Tourism: New controls and queries.
- Mod: ClubCMS: England Golf website: hero style updates
- Mod: ClubCMS: England Golf website administration: create page update
- Mod: ClubCMS: England Golf website: hero control: default settings updates
- Mod: ClubCMS: England Golf website: admin area css
- Reverse Merged revision(s) 52672 from Trunk: Mod: reverseproxy: unload balance nz prod public ........
- Mod: reverseproxy: unload balance nz prod public
- Fix: ClubCMS: Tournament course stats - Consider only final scores when calculating stats.
- update voucher table
- Fix: ClubCMS: tournament result caching no more infinite looping and uses redis now instead of memorycache
- Mod: ClubCMS: England Golf website: allow the admin user to create a new page
- MOD: Bulk Email: Added quality parameter to toDataURL
- MOD: Activity Tracker: Added CreatedBy to Alert in Club Dashboard
- MOD: ClubCMS: Added implementation to the new EG control Club Search
- Mod: ClubCMS: bindings.ukprod.list: corrected the England Golf website alternative URL to eg.en.dotgolf.co.uk
- Mod: Reverse Proxy: corrected the England Golf website alternative URL to eg.en.dotgolf.co.uk
- Mod: ClubCMS: force user to explicitly select option when using contact us form and multiple options are available #5005649
- Fix: Live: hide United Kingdom from Country selector because we've split it up into GB-SCT/ENG/WAL but clubs still keep using United Kingdom #5005755
- Fix: Live: hide United Kingdom from Country selector because we've split it up into GB-SCT/ENG/WAL but clubs still keep using United Kingdom #5005755
- Mod: CourseHandicapReport: remove unused props
- Fix: Live: Analytics tile stop crashing in dev please thanks
- Mod: AdWeb: Mat E is unable to generate gift cards so I am moving "Generate Gift Cards" menu item under DotGolf menu group.
- Mod: Core: EmulatedWHSClient supports score posts now
- Fix: Org: Build: packagereference nuget restores
- Mod: Shared: score.cs fix some nullability warnings
- Add: Golf-Tourism: Site header menu.
- Mod: Teebooking: Online bookings - When a green fee is increased and the difference is paid at the POS, we should only capture the original green fee charged at the time of booking. Mod: Display last ticket Id processed whenever an exception occurs so we can easily locate the teebooking details in AdWeb.
- Mod/Fix: Adweb master page: corrected the casing of the link tag; added revision number (v query string parameter) to the nzgn.css reference
- Mod: Autogenerated poco classes.
- Mod: Adweb/ClubCMS: added CWPageControl.Notes for easier identification of items when viewing the page setup in Adweb
- Mod: ClubCMS: England Golf website: add message (privacy policy) styles
- Mod: Reverse Proxy: sites-uk.list: added S,-,1,1,cw.eg.dotgolf.co.uk
- Mod: ClubCMS: bindings.ukprod.list: added cw.eg.dotgolf.co.uk -- temporary / alternative URL for the new EG website to be set up in production
- Mod: ClubCMS: bindings.gbistage.list: added cw.eg.stage.dotgolf.co.uk -- for the future new EG website in the staging environment
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: England Golf website: admin-news-article style update
- Alter table Voucher, add trailPeriodIndays column
- Fix/Mod: ClubCMS: admin-news-article: when uploading a thumbnail image, the two croppers show up. Make the cropper selector specific so that only one cropper is activated. Mod: updated the delete button css class
- Mod: ClubCMS: England Golf website: admin-news-article: allow hiding/showing of the 1) News Group field 2) Tournament fields
- Mod: ClubCMS: sql: just corrected a typo in the control property description
- Mod: ClubCMS: England Golf website: news list: add edit article link to each tile so that the user can easily edit an article (without the need to view the article)
- Mod: ClubCMS: Golf Ireland: news-list/view.html: truncate long titles
- Mod: ClubCMS: England Golf website: news filter: add reset filters feature
- Mod: Moved buildspec.yaml and Dockerfile up a level so we can copy the contents of the dist directory into the docker image.
- Fix: So, turns out npm is a batch file in Windoze, so we have to do CALL <...> if we want it to not kill our build script.
- Add: Logging to npm build.
- Add: npm build for Tournament vue stuff
- Mod: ClubCMS: England Golf website: news filter: display the svg reset icon before the Apply button (functionality to follow next)
- Mod: ClubCMS: England Golf website template: added golf ball and reset svg icons
- Mod: ClubCMS: England Golf website: news search text field; prevent the elements below from moving when the search text field is hovered
- Mod: ClubCMS: England Golf website: news-list: allow hiding/showing of sorter
- Fix: #49116 Bad redirect to log into clubcms as admin from LIVE.... oops that's my bad
- Fix: DG-5991 #45131 CKEditor not encoding the HTML when nothing is modified: eg. the user just load the promo to edit then hit save. This causes the server to not accept the data and throw 500 as HTML is not encoded. So we decode and encode it explicitly to mitigate this.
- Mod: ClubCMS: England Golf website: added news sorting options
- Add API: Get event detail - Add entry fee field.
- Mod: ClubCMS: England Golf website: news style updates
- Mod: API: Search club events - Maintain one entry fee field instead of having two EntryFee and EntryFeeVisitor.
- Mod: ClubCMS: England Golf website: handle news tags with special characters e.g. R&A
- Mod: DebugLog obsolescence; we want to use IDataLogger for anything new that needs to log stuff.
- Mod: ClubCMS: England Golf website: news style updates
- Mod: Moar speed for Adweb page loads in dev.  Reduced number of sync database calls happening on each page load.  Big part of this was a bunch of random reports that threw JSON exceptions in dev.
- Fix: Gender change requests now driven from ExtUser table the way it worked prior to the Cognito authentication changes to Adweb.
- Mod: Index to speed up getting user messages in Adweb since it is run on every page load now. Mod: Inlined aw_GetUserMessages proc.
- Mod: ClubCMS: England Golf website: news detail: display default EG hero image if there's no main news image
- Mod: ClubCMS: England Golf website: news style updates
- Fix: NZ dev static content gateway was still set to the old Dev1 box.
- Add: Static image proxying for dev nz.
- Mod: ClubCMS: England Golf website: display default hero image with text (tag name) in single tag view
- Mod: ClubCMS: England Golf website: news-detail: display tags at the bottom of the article (individually linked to the tag page)
- Mod: ClubCMS: England Golf website: add utility classes
- Mod: ClubCMS: NewsArticle.cs: use string_agg to aggregate the news article tags
- Mod: Teebooking: Disable e-mail send to helpdesk@golf.co.nz whenever we encounter an empty TxnId node from PX response (payment outcome result. I have logged a ticket to WindCave about this and we have enough samples to provide if needed.
- Fix: Jenkins: #app-events-registration - Referencing a non-existent CompetitionSelectorControlService class (was created locally but no longer required)
- Fix: Typo in Dockerfile caused tasks to fall over, understandably.
- Add: #app-event-registrations - missing from previous commit
- Fix: GolfNZ/ClubCMS DG-5982 #49077 Missing 'IsPenaltyScore' binding in the return object thus KO did not know how to evaluate and threw and error. - Making IsPenaltyScore false by default.
- Add: API: #app-events-registrations - Initial commit.
- Mod: Golf-Tourism: Implement course results paginations.
- MOD: ClubCMS: Added Club Search control
- MOD: ClubCMS: Rename Find a Place to Play Widget to Club Search Widget
- MOD: ClubCMS: Exclude Club Search Widget js and map from the project
- MOD: ClubCMS: Include Club Search Widget in the project
- MOD: ClubCMS: Rename Find a Place to Play Widget to Club Search Widget
- Add: ClubCMS: England Golf website: news list: display of news articles based on the single tag in query string; display the tag name as the heading
- Mod: Extquery Renderer: code comment
- NSC+MSK: Mod: Live: Help GI clubs search members based on the NZGACategory of a person at their club, rather than the category the person will be charged on. #5005170
- MOD: Tournament V2: Updates on the project to be able to run the API and Vue with F5
- Add: ClubCMS: England Golf website: news detail: news article title style updates (make sure it's readable even on light background)
- Mod: Put @ECHO OFF back in.
- Mod: Build script checks for 7z.exe and throws if it isn't there.
- dg-services-postbuild.cmd: Logging
- Mod: Core: regen ISVAPIClient.g.cs
- Add: ClubCMS: England Golf website: news detail control style update
- Add: ClubCMS: England Golf website: news detail: if there's no related news, don't display the "no news articles found" message
- Add: ClubCMS: England Golf website: news detail control: related news style
- Reverse Merged revision(s) 52562 from Trunk: MSK+NSC Fix: Live: prevent weird behaviour when trying to find a club's secondary members while filtering by GI Category (esp. when the people had a different category at their home club)  #5005170 ........ there is no bug here
- Add: ClubCMS: England Golf website: news detail control initial commit
- Mod: Org: super admins get taken to their own user details page instead of just the change password page because they should be allowed to change their own username/details/permissions if they really want.
- MSK+NSC Fix: Live: prevent weird behaviour when trying to find a club's secondary members while filtering by GI Category (esp. when the people had a different category at their home club)  #5005170
- Mod: Parameterise repository, cluster and service names in promotion script.
- Fix: Since we now have more than 1 repository, need to filter by the name to get the right one.
- Fix: Since we now have more than 1 repository, need to filter by the name to get the right one.
- Mod: WHSAPI: query wasnt checking for deleteddate when creating new markerhistory
- Mod: ClubCMS: England Golf website: eg-rte: apply embedded video dynamic resizer js
- Add: Logging for repo uri.
- Add: Logging for repo uri.
- Add: Logging for repo uri.
- Fix: CodeBuild was always building the latest source code, this can break stuff if we're trying to revert back.
- Fix: CodeBuild was always building the latest source code, this can break stuff if we're trying to revert back.
- Mod: Dockerfile has correct paths now.
- Mod: Dockerfile has correct paths now.
- Add: Dockerfile for Tournament.
- Fix: Unhardcoded buildspec.yaml location.
- Add: CodeBuild buildspec.yaml for Tournament.
- Add: CodeBuild buildspec.yaml for Tournament.
- Mod: ClubCMS: Golf Ireland Competitions menu: update menu height to accommodate more items
- Mod: CodeBuild script source location unhardcoded, we use this for booking service as well as tournament api now.
- Mod: CodeBuild script source location unhardcoded, we use this for booking service as well as tournament api now.
- Mod: CodeBuild script source location unhardcoded, we use this for booking service as well as tournament api now.
- Mod: CodeBuild script source location unhardcoded, we use this for booking service as well as tournament api now.
- Add: build-linux.cmd for DotGolf.Tournament.
- MOD: Tournament V2: Added Bootstrap on Vue App and moved solution file outside the API project folder
- Mod: ClubCMS: England Golf website: news-list: Category filter: include tags marked as a news filter
- Add: _deploy for DotGolf.Tournament.
- Mod: Adweb: member merge also merges member profile info [DG-5619] Removed redundant merge code branch that doesnt get hit
- Mod: Core: Implemented member merges in EmulatedWHSClient
- MOD: Updated the script for updating the Open Fixtures notification
- MOD: Org: Added Logged By info on Clubs Dashboard activity logs
- MOD: Activity Tracker: Added Logged By info
- Fix: Live/Org: missed a file
- Fix: Live: Useradmin - when creating new users, roles and password not getting saved
- for ticket #49165 - Drop old proc that was replaced
- Fix: Live: #49165 Changed how the [NonAffiliateVisitorPriority] was being ordered as when nonAffiliates is enabled an error is thrown for order by. -- Added the store proc name that this sql replaced.
- MOD: ActivityTracker: Fix not populating the selected Club
- Mod: Adweb: code comment
- Mod: ISVAPI: Find and play data in CRMAPI now in Stage
- Mod: ISVAPI: Find and play data in CRMAPI now in Stage
- MOD: Activity Tracker: Updates on Activity Tracker like validation before creating an activity, added a title and a link to View All
- Mod: Core: move netstandard the the start of the csproj targetframeworks list so Framework projects stop emitting a warning that they can't reference Core (requires VS restart to take effect)
- Mod: Live: #49015 Add additional logging to output in the dev console for exception messages where IExceptionLogger is not available.
- Mod: Autogenerated poco classes.
- Mod: sql: drop unused columns on memberprofile - they live on cwmembershipapplication
- Mod: sql: stop saving plaintext passwords in NZ in passportcredential and usersecurity
- NEW: Added TOURV2 on Products table
- Fix: ClubCMS: Member Signup: found a "voucherAmount.toFixed is not function" error while testing the promo code functionality (i.e. submit the signup form, proceed to payment, cancel the payment (Windcave), and get redirected to the payment unsuccessful page)
- Mod: ISVAPI: dont show member merge webhook object in swagger unless user is authed
- Fix: ISVAPI: tests
- Fix: ISVAPI: Build
- Mod: ISVAPI: more Find-and-play fields for EG CRM
- Fix: Live DG-5855 Just trim the spaces for the URL being added into CWEmailComposeLink
- Mod: GB&I DG-5875 Changed the 4 digit append to full CentralMemberCode append. Added unit test but has to be ignored as it is not supported in local db as it uses full text search. Bumped framework language version to 9 from 7
- Mod: Autogenerated poco classes.
- Copied 4005 Logic over to fix the previous error
- Mod: ClubCMS: England Golf website: news-list: search by text
- Mod: ClubCMS: England Golf website: hero / hero admin: allow the user to apply a scrim on the hero image to make the nav text more readable. The scrim is only needed for light-coloured images.
- Fix: Live DG-5941 #49099 Fix couple of mistakes as it was the wrong syntax should be Generic not manager and removed club id from insert select.
- Fix: Mailer: Build
- Mod: Live DG-5941 #49099 Updated to use the new fields as opposed to the old HCEmail, Email, EmailAccounts from Club table
- Fix: Live Added checks for the new check boxes to IE only as it was causing NZ grief... oops
- Mod: ClubCMS: England Golf website: news-list: add new control property: applyCurveOnBackground (false by default)
- Add: bindings.prod.list for BulkEmail nzprod.
- Mod: ClubCMS: England Golf website: news-list: "no news articles found" separate from the tiles, update style
- Fix: BulkEmail: build again again again
- Fix: BulkEmail: build again again
- Fix: ClubCMS: GetNewsArticles: include articles published on the selected end date (date to)
- Mod: ClubCMS: England Golf website: make news filtering work
- Fix: BulkEmail: build again
- Fix: My-Profile Page: Fix broken email comm checkboxes when saving diversity data.
- Fix: BulkEmail: build
- Mod: sql: club audit table identity and columnstore index
- *** DFH CODE REVIEWED TO HERE *** Reverse Merged revision(s) 52446 from Trunk: Mod: Live DG-5941 #49099 Update the Club table HCEmail, AccountEmail or Email when we modify the relevant contact on the Contact.aspx page so that when we send the System email in this case specifically Tee Booking payment capture reminder it'll use the updated one. ........
- Mod: Live DG-5947 Remove TabRptMemberListing - Deleted the old MemberReport [TabRptMemberListing] in favor of the ported EXTQuery version of it [FullMemberListing] - Added back the hyperlink to MemberId to the Member No. column
- Mod: Autogenerated poco classes.
- Mod: sql: move clubaudit table out of history namespace
- Upd: File exclusions.
- Mod: Live DG-5941 #49099 Update the Club table HCEmail, AccountEmail or Email when we modify the relevant contact on the Contact.aspx page so that when we send the System email in this case specifically Tee Booking payment capture reminder it'll use the updated one.
- Remove: Golf-Tourism: Remove all un-used files from filter/search controls implementations.
- Mod: ISVAPI: first pass of adding new find & play fields for CRM people
- Add: Golf-Tourism: Added google geochart typescript definitions and remove javascript implementations from region-focus & region-select controls.
- Mod: ClubCMS: England Golf website: news list filtering updates (work in progress)
- Mod: ISVAPI: Copy CRMAPI stuff into APIv2, so we can continue development on it without polluting the other DTOs
- Mod: ClubCMS: England Golf website: news list layout, style updates
- Cleanup: Removed public API code from Live #feelsgood
- Cleanup: Removed API.asmx web reference from DotGolf.Shared; we should not be calling our own public services from internal code.  Let's see what Jenkins makes of this...
- Cleanup: Removed Micropower related crud.
- Mod: ClubCMS: England Golf website style updates
- Mod: ClubCMS: England Golf website: eg-news-list: news filters (work in progress)
- Mod: ClubCMS: England Golf: menu style updates
- Mod: GB&I DG-5875 Refactored for performance on search for friends
- Mod: GB&I DG-5875 Removed unnecessary virtuals
- FIX: ClubCMS: Fix download links alignment on Resource details page
- Mod: GB&I DG-5875 Modified the API for search friends to append 4 digits of the duplicating searching member results. This is a feature flag and the digits appending is off by default for other regions. Example:
- Mod: ClubCMS: content-tiles: add "Open link in new tab" checkbox; for the existing content-tiles data, this will be set to false
- MOD: ClubCMS: Indent list within Resource Detail page content
- Add: Diversity: Added button spinner when saving diversity answer section in my-profile page.
- Mod: ClubCMS: content-tiles/viewmodel.ts: added css class name to the cancel button; also updated the admin control styles for EG
- Upd: TeeBookingInvoice: Change company name from “New Zealand Golf Network Ltd” with “DotGolf”.
- Mod: ClubCMS: content-tiles/viewmodel.ts: specify pop up width, height, top, left.
- Mod: ClubCMS: England Golf: video play button style updates (based on the Augusto design)
- Mod: ClubCMS: England Golf: video play button style updates (based on the Augusto design)
- Mod: ClubCMS: England Golf: rte style updates
- Fix: Golf-Tourism: Filter control/search UIx fixes with Terraces3.1 layout.
- Mod: ClubCMS: England Golf: menu style update
- Mod: ClubCMS: England Golf website: content-tiles control: added header text and default image URL properties
- Add: ClubCMS: forgot to include in Rev 52386
- Fix: Core: was possible for 2 threads to hit the PocoTable constructor at the same time causing one thread to bypass CallLoadValueOnPropertiesWithPreloadAttribute() and return null values to the calling code.
- Mod: Shared.Tests: failing test for weird exception in WHSScoreInsertedUpdated hook
- Mod: AdWeb DG-5889 Adding score history to user scores details Modified the user score details page to have score history on the page - Also added whom the scores were captured by; third party or club
- Mod: Add some more spams to injection attack blocker
- MOD: TournamentV2: Implement SSO Authentication
- Mod: ClubCMS: England Golf: Vacancy Filler content style updates
- Mod: ClubCMS: England Golf: Vacancy Filler content style updates
- Mod: ClubCMS: England Golf: hero: remove unused gif
- MOD: TournamentV2: Appy SSO
- Mod: ClubCMS: England Golf website: feature content style updates and fixes
- Mod: ClubCMS: England Golf: Vacancy Filler content style updates
- Mod: ClubCMS: England Golf: short hero heading text style update
- Mod: ISVAPI: Disable CRM ED&I data until we've finalised the API api spec
- Mod: ClubCMS: England Golf website: Job Application print feature: exclude hero and footer
- Mod: Adweb GB&I DG-5764 - Refactored to simplify checks for maintainability and move tournaments if the same username is the same role like tournament.
- MOD: Added Core and Core.tests projects to Tournament solution
- MOD: Added Externals to use Core and Core.Tests projects
- MOD: Tournament: Added new Project using .net 6.0, vue3 and xunit test project
- Mod: Adweb: gender change requests are back kinda
- Mod: Adweb GB&I DG-5764 - Added Standard.Master Message to show if the reinstate or create of new user credentials has gone through successfully or not - Now checks for the same name and role to be reinstated provided that it was previously deleted -- if the credentials are still live it will show relevant error and not commit to db.
- Add/Mod: ClubCMS: England Golf website: create a config file for EG (with the color button enabled--their design allows the EG red color be applied to their text)
- Mod: Updated CKEditor to include the color plugin, which will be used on the England Golf rich text editor (to allow the user to apply the England Golf Red colour within their text content)
- Mod: ActivityTracker: remove unused line in startup
- Mod: ActivityTracker: remove redundant options config
- Fix: Core: Bug in rev 52375
- Mod: Shared tests: add test for rev 52376
- Mod: #digital-membership-cards: Generate only type of image either QR code or barcode.
- Fix: Live/ISVAPI: when using basic search to find resigned members, the search would return a member twice if they had one live and one resigned cmember record
- Fix: Core: better lazy loading of member home club to not hot WHS/interop excessively
- Mod: Golf-Tourism: Remove commented code.
- Mod: ClubCMS: England Golf website: content tile style update
- Mod: Golf-Tourism: New sample clubs images.
- Mod: ClubCMS: England Golf website: feature-content: display the video play button only when there's a defined video URL
- Mod: #digital-membership-cards: Adjust QR Code size image
- Mod: ClubCMS: England Golf: vacancy filler style update
- Add: ClubCMS: England Golf: admin-eg-rte control
- Fix: ActivityTracker: Load balancing works now hopefully because cookies stored in redis so webservers can decrypt each others cookies (in theory)
- Mod: ClubCMS: England Golf website: styles updates: p line height, rte h4 (intro, style 1) line height and max width
- Fix: ClubCMS DG-5901 #48974 Fix javascript where the select list was being used to toggle view - It now populate all views first prior to hiding forms that are not required. - Fix where if the user wants to return back to the confirm slot page the select list selected slot was not matching the active guest slot -- Changed var to let where var is not required
- MOD: Live: Allow JPG or PNG upload
- Fix: ActivityTracker: Cookie Authentication works now without sessions! Still not properly load balanced yet because the cookie encryption differs from machine to machine (asp.net DataProtection needs configuring)
- Add: ConfigurationProfile: NZ - MyGolf app logo URL (uploaded in S3). GB&I to follow.
- Mod: ClubCMS: England Golf website: styles updates: grid, content tiles, contact
- Mod: ClubCMS: England Golf website: feature content style updates and fixes
- Fix: Org: terrible query plan when trying to load tournament setup for a comp with 1000s of scores per round when trying to determine if the scores exist in other comps.
- Add: Setting: Club setting to toggle between barcode and QR code. #digital-membership-card
- Mod: Autogenerated poco classes.
- FIX: Live: Include white spaces in the Fixture Details char count and adjust the field to accept 1000 chars
- Rem: Golf-Tourism: Remove from the project the old un-used golf-tourism control.
- Add: #digital-membership-card - Generate barcode for secondary membership numbers. Mod: UserController: Minor refactor so I can invoke GenerateBarcodeImage, GenerateQRCodeImage, GenerateBase64Image methods in another controller.
- Fix: Live: HandicapListReportTwoColumn
- Fix: ActivityTracker: sessions finally work properly ??????????
- Fix: API.Tests: setupteardown issue
- Fix: ActivityTracker: sessions finally work properly
- Add: Golf-Tourism: Sample images added.
- Fix: API.Tests: setupteardown issue
- Fix: #48754 Slicer email report wasn't calculating manual registrations from RSCompetitionEntry (Nomads do this a slightly different way to other orgs).  So their manual registration fees were always $0 and the total amount was more than the actual paid amount.
- Fix? sqlbuild? remove GO from trigger creates because DB build keeps crashing
- Mod: Live: GI DG-5774 - Added check boxes for Golf Ireland when creating new member to ensure that they have informed the user of the Ts & Cs - Added missing reference for MemberRec in Create.ts
- Fix? sqlbuild? split scripts into two files because DB build keeps crashing
- Fix? sqlbuild?
- Mod: sql: Club audit table to track who updates the club table and link to temporal history SCRIPT 4000 WOO [DG-5759]
- Mod: Org: new UserSecurity user provider for audit tracking in live
- Mod: Live: new UserSecurity user provider for audit tracking in live
- Mod: Live: new UserSecurity user provider for audit tracking in live
- Fix: iGolf-Diversity: Implements more validations from question items.
- Fix: Sinking ship: build
- Fix: Live: remove async from a script because form load can fail of it loads too slow
- Fix: Core: axaccount unit tests updates for new max single sale overdraft value ($10)
- Fix: API: build for changepassword
- Mod: Org: user password update follows 10 char rule and has strength meter
- FIX: ClubCMS: URL decode the tags parameter
- Fix: Live: InvoiceReport (ActiveReport) - Item description is not displayed if the previous line item in the invoice does have an item description. #47529
- Mod: Live: contact page no longer needs !important
- Add: Live: password changes store info about how bad your password is, neat password strength indicator
- Upd: Golf-Tourism: Remove the old course filter control files from project, and added alert message on click at 'Region select' filter control.
- Mod: Shared.Tests: attempt to curb weird test output during cleanup with one character per line
- Mod: SSO: passtrength now shows angry red bar when password is terrible, no bar when password has not yet reached min length
- Mod: Live: passtrength now shows angry red bar when password is terrible, no bar when password has not yet reached min length
- Add: Golf-Tourism: Added alert message on click at 'Region Focus' filter control.
- Mod: Live: passtrength now shows angry red bar when password is terrible, no bar when password has not yet reached min length
- Mod: SSO: passtrength now shows angry red bar when password is terrible, no bar when password has not yet reached min length
- Mod: Enable latest signup page changes and ED&I monitoring for EG in all environments (today is go-live)
- Upd: Golf-Tourism: Filter control updates.
- Mod: Upgraded SqlToGraphite to framework 4.8 (because David is too lazy to install older framework on my computer)
- Mod: shared: minor css refactor for reuse
- Mod: SSO: minor css refactor for reuse
- Mod: SSO: minor css refactor for reuse
- Mod: dotgolf.core.tests: run x64 all the times please
- Mod: API: tests: ??
- Mod: ClubCMS: England Golf website: news list control: update the default thumbnail image
- Mod: API: tests: ??
- Mod: API: tests: binding redirects
- Fix: SSO: missing binding redirect
- Fix: SSO: missing packages
- Add: Golf-Tourism: Added feature filter controls.
- Mod: Live: add password strength meter files to Shared
- Mod: SSO: minor file renames
- Fix: api: tests build #no-more-dll-hell
- Fix: api: tester build #no-more-dll-hell
- Fix: api: tests build #no-more-dll-hell
- Fix: api: tests build #no-more-dll-hell
- Fix: WHSAPI: weird edge case where postscorerequest is null somehow when validating score?
- Fix: UnionAPI: unit test
- Mod: unionapi: clean up duplicate dependencies #no-more-dll-hell
- Mod: ActivityTracker: unused dependency on AWSSDK.Extensions.NETCore.Setup #no-more-dll-hell
- Mod: Bookingservice: clean up duplicate dependencies #no-more-dll-hell
- Fix: Core: circular package reference from newtonsoft 9.0.1  #no-more-dll-hell
- Mod: ISVAPI: dependency warnings as errors  #no-more-dll-hell
- Mod: Bookingservice: dependency warnings as errors  #no-more-dll-hell
- Mod: ActivityTracker: dependency warnings as errors  #no-more-dll-hell
- Mod: ActivityTracker: specify some explicit dependencies  #no-more-dll-hell
- Changed: iGolf-Signup page: Changed 'Social' to 'Social Media' item option on Where did you hear about iGolf?.
- Mod: ActivityTracker: remove some duplicate dependencies #no-more-dll-hell
- Fix: API: build #no-more-dll-hell
- Fix: Live: build #no-more-dll-hell
- Fix: SSO?????????: build #no-more-dll-hell
- Fix: API: build #no-more-dll-hell
- Mod: Live [GB&I] DG-5763 If the message is not a priority and has the club has approved the tournament for ISV it will not indicate that it has previously been approved.
- Fix: SSO - reset platform targets because didnt help build #no-more-dll-hell
- Fix: SSO?????????: build #no-more-dll-hell
- Fix: SSO?????????: build #no-more-dll-hell
- Fix: ClubCMS: build #no-more-dll-hell
- Mod: Core: target x64 #no-more-dll-hell ??????
- Mod: Shared: target x64 #no-more-dll-hell
- Mod: Live: deploy report for EG
- Fix: Live: Build #no-more-dll-hell
- Mod: #48777 Reduced the max single sale overdraft to $10 as agreed by Chris (Remuera) and Michelle (Hastings) - the only two clubs that use this feature.
- Fix: Live: Build #no-more-dll-hell
- Fix: Live: Build #no-more-dll-hell
- Fix: Live: Build #no-more-dll-hell
- Fix: Rare fringe case that causes the CostTableControl to fall over if the player number doesn't match the invoice item number (which can sometimes happen if you have a player in the second slot, but paying for themselves).
- Mod: ClubCMS: England Golf website: accommodate different rte styles -- intro paragraph, indented paragraph, full row embedded youtube
- Fix???: SSO: #no-more-dll-hell
- Fix???: SSO: #no-more-dll-hell
- Mod: SSO: 64bit iis please #no-more-dll-hell
- Mod: iGolf-SignUp page: Move persistence of 'where hear about igolf' column from memberprofile tabel to 'cwmembershipapplication' table.
- Fix: #shitshitshit TBP: Declined token billing transactions were assumed to be successful, creating the booking at the club as if it were fully paid.  Start sheet showed dollar sign too (!!)
- Fix: ISVAPI: Build #no-more-dll-hell
- [breaking] Mod: Core+Shared+SSO: PackageReference style nuget restores and build!! This will fix DLL hell once i've patch up all the builds #no-more-dll-hell
- Mod: Core: minor refactor of PassportCredentials UpdatePasswordScore
- Mod: ClubCMS: England Golf website: forgot to apply LinkText
- Mod: ClubCMS: England Golf website css override for the content tiles control; also updated the recommended image dimensions
- Fix: My-Profile page: Fixed diversity question main header width when dropdown collapse.
- Mod: ClubCMS: England Golf website css override for the content tiles control
- Mod: ClubCMS: content tiles control updates for the England Golf website
- Fix: Diversity Questions: Feedback fixes from client to both iGolf sign-up and my-profile page.
- Fix: iGolf-Signup page: Fixes to postcode validations and implements diversity request changes.
- Fix: $WCREV$ doesn't work in .cs files, so patched that up in case it causes us trouble.
- Fix: Shared: build
- Reverse Merged revision(s) 52227 from Trunk: Fix: Live: antidote to dll hell? doing further testing.
- Fix: Live: antidote to dll hell? doing further testing.
- Mod: Golf-Tourism: .js;.js.map file ignore.
- Add: Golf Tourism: Maps, filter, search & results controls.
- Mod: Live: [Full Member Listing Report] DG-5767 - Using the new hiding option if there is only one option in the select list
- Mod: DG-5767 ExtQuery - LookupParameter can now be hidden if the option available is only 1 in the select list. -- Default is false so it keeps the old behaviour - MultiSelectCheckBox has been renamed to MultiSelectCheckbox for consistency
- Fix: Live: build #5005436
- Mod: Shared: Add zxcvbn package to avoid dll hell
- Mod: SSO: when someone logs in update their password score #5005436
- Add: ClubCMS: England Golf website rte block style update
- Add: ClubCMS: England Golf website rte block style updates; apply EG branding to the timeline control
- Add: ClubCMS: England Golf website rte block style updates and fixes
- Mod: Live: MemberListing Report DG-5767 - Ported the old report over from ActiveReport into ExtQuery report. - Using the new MultiSelectCheckbox extension for categories selection.
- Add: ExtQueryRender DG-5845 Added support for MultiSelectCheckBox with dialog builder. Supports multiple text columns to show more text. eg. Category Select dialog shoes checkbox, code and name. This can now do it too. TODO: Support more than 1 dialog in the page.
- Add: ClubCMS: England Golf website rte block
- Mod: Autogenerated poco classes.
- Add: sql: passwordscore column so we can tell people to reset their passwords if they are bad
- Mod: Core: regen ISVAPIClient.g.cs
- Fix: Live: Vend: Future dated Internet specials are no longer synced in Vend at the time of creation - these gets synced on the day it's meant to be active (exactly at 1:30am when the SyncFutureGreenFeesTask runs). #48269
- Fix: ClubCMS: I just found that the gallery swiper js control (e.g. on the Golf NZ media centre page) wasn't showing the prev & next arrows, and the partial previous and next images because the correct style for .gallery__carousel (overflow: visible) was being overridden by a .swiper-container style (i.e. overflow: hidden) for the hero control
- Add: Golf-Toursim: Map black & white pin added.
- Mod: ClubCMS: England Golf website: news list: added the "See more" arrow animation that is applied to the standard buttons
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: admin-hero-swiperjs: just found that when creating a new record, the mobile image wasn't being saved. (Updating an existing record worked fine; it included the mobile image.)
- Mod: SSO: first pass of password strength enforcement. UI for password strength widget when resetting password in SSO
- Add: Golf-Tourism: Full width map region filter. When hover highlight regions list and vice-versa.
- Fix: SSO: disallow creating new users via url if onboarding is off
- Mod: ClubCMS: England Golf website: hero style update for bigger screens
- MOD: Live: Add some work around to fix File Upload
- Fix?: Shared: could not repro but ??? scary bug with database connection strings getting mixed up in different locations ???
- MOD: Live: Add some work around to fix File Upload
- MOD: Live: Add some work around to fix File Upload
- MOD: Live: Add some work around to fix File Upload
- MOD: Live: Add some work around to fix File Upload
- Mod: ClubCMS: England Golf website: slider - mobile styles updates
- Fix: API: /user-details endpoint: 1) Membership number should be prefixed with a semi-colon ';'.  2) Barcode encoding - place asterisk '*' (as start/stop characters) around the text to be encoded.
- Mod: ClubCMS: England Golf website: slider admin - allow hiding/showing of the mobile image field
- Mod: Teebooking: Send an e-mail to helpdesk@golf.co.nz if we fail to parse the TxnId from WindCave. We are expecting "Response/TxnId" to be a valid number because TxnId is the TBTransactionId we passed through DPS in the first instance (ConfirmAmounts page).
- Mod: Live: Removed extra settings for "Charge entry fee on every round" or just one round
- Mod: ClubCMS: England Golf website: slider - mobile styles updates
- Fix: API: (Part 3) Apply temporary fix in the /search-location and /search-slots endpoints while we are working on a bug fix in the Android app. The app sends an incorrect date (earlier by 1 hour). #48798
- Fix: API: (Part 2) Apply temporary fix in the /search-location and /search-slots endpoints while we are working on a bug fix in the Android app. The app sends an incorrect date (earlier by 1 hour). #48798
- MOD: Live: Added protocols to see if it will fix the FileManager upload
- Fix: ISVAPI: tests
- MOD: Live: Added Response Format
- Fix: API: Apply temporary fix in the /search-location and /search-slots endpoints while we are working on a bug fix in the Android app. The app sends an incorrect date (earlier by 1 hour). #48798
- Mod: Autogenerated poco classes.
- Fix: Live: composite markers not showing in composite marker control sometimes  #48776
- Mod: ClubCMS: England Golf website: slider - mobile view / styles updates
- Mod: Live DG-5827 Styling changes and add description text to what the purpose of this option is for
- Mod: POS: If a player is charged a higher rate, calculate the difference (to pay) between the current selected green fee and online green fee payment. #dg-pos-huapai Mod: POG: DG-POS clubs - disable green fee select control for players who paid their green fees online.
- Mod: ISVAPI: no longer need scores to be in unionDB for ISVs to work the 20 score endpoint
- MOD: Live: Change fetch to jquery ajax to possibly fix the FileManager upload
- Mod: sql: remove deleted date set on new control prop
- Fix: ISVAPI: unit tests
- Fix: Live DG-5827 Styling changes for number input to hide spinners and set field height and text size to be in line with the rest of the page.
- Fix: iGolf-SignUp page: Restore back the auto uppercase of postcode field.
- Add: API: /user-details endpoint - 1) Add membership category details. 2) Generate barcode and QRcode images (base64 string) for the membership number. #digital-membership-card
- Fix: ORG Tournament Settings visibility Should only be visible if the ORG has product TOUR else we should not show it at all
- Mod: Live DG-5827 Low account top up reminder settings in Settings/Accounts/Settings.aspx
- Mod: Live: generate slightly longer passwords for live/org and add special chars to the random gen passwords #5005436
- Fix: Live: levies permission text not showing for new users
- Fix: Live: suggest password and enforce password length when creating new user  #5005436
- Fix: Live: no more DG Live in Google search #5005436
- Fix: Org: no more DG Org in Google search #5005436
- Fix: ISVAPI: prevent error when ISV tries to call 20 score endpoint that contains a score that is not in union DB. This kicks the can down the road (will return notfound if they try update or delete the score) but they use this endpoint for results n stuff so best it works... #5005411
- Fix: Live: Composite marker select deselects itself when saving a comp #48572
- Mod: Clubcms: e.g. EG membersignup postcode validation reinstated using root level css class
- Fix: Org: PGA tournament prize money split export: if the player has both Member and NonAffiliate records, prioritise the Member record.
- Fix: Clubcms: patch flexiclub signup postcode
- Mod: ClubCMS: England Golf website: modify padding between content blocks based on the design
- Mod: ClubCMS: England Golf website: find a place to play style updates
- Fix: Org: don't show deleted markers in course change combo!
- Upd: My-Profile Page: Added new diversity questions, and changed question sequences.
- Mod: ClubCMS: admin-gallery-swiperjs: added the Button Text field, show the usual "success" message after saving, updated the recommended image dimensions (applicable to both NZ and EG)
- Mod: ClubCMS: general.js: galleryCarousel updates to accommodate the EG slider design
- Fix: Live: could not search for resigned people in basic member search if they were deleted from their home club (even if they had another resigned membership which means they should be findable)
- Upd: IGolf-Signup Page: Hiding back recent changes.
- Add: IGolf-Signup Page: New diversity questions added SelfDescription & Religion, and changes to question sequences.
- Mod: ClubCMS: England Golf website: slider control updates
- Mod: ClubCMS: England Golf website: slider control updates
- Mod: Autogenerated poco classes.
- Add: IGolf-Signup Page: MemberProfile new columns selfdescription, selfdescriptionfreetext, and religion.
- Mod: Live: option to Use Rounded Course Handicap To Calculate Playing Handicap for GBI. sigh.
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: sql: CWGalleryImage add ButtonText column
- Mod: ClubCMS: England Golf website: slider control updates
- Fix: Do not enable ED&I changes in England Production yet.
- MOD: Live: Added CompetitionDate on email notification
- Fix: Live: when creating new users increase textbox width #5005436
- Mod: Live: enforce min password length of 10 in userprofile password change #5005436
- Fix: Live: password change page increased password textbox size and removed silly maxlength #5005436
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: England Golf website: slider control updates
- Fix: Removed the GROUP BY from the competition fees report, because if there is ever a situation where we have more than a single distinct tournament fee, Really Weird Stuff happens because of ActiveReports.
- Mod: update default scoreintentfollowup date for GI golive
- Fix: IGolf-Signup page: Changes to text - link button at left header above logo.
- Fix: IGolf-Signup page: Added EnableLatestSignUpPageChanges flag defaulted to hide recent section changes except stage environment.
- Mod: ClubCMS: England Golf website: menu logo url update
- Mod: Ireland: enable score intent followup automation
- Mod: ClubCMS: append version number to styles.css reference
- Mod: ClubCMS: England Golf website: vacancy filler CSS
- Mod: ClubCMS: England Golf website: short hero height
- Mod: ClubCMS: England Golf website: vacancy filler CSS; re-arranged some code too
- Add: score intent followup system emails for GI
- Fix: IGolf-Signup page: Email validations, remove postcode link, added left header link, added other free text field.
- Mod: UnionAPI: unit test for PCC
- Fix: Live: DG-5796 Course not loading in the Score Entry Area Issue was if the player was a 18H member but entering 9 hole competition in Futures the 'defaultMarker()' selection would be left undefined. So without breaking the existing behavior we do the same thing but if 'defaultMarker()' does become undefined then we do the reverse. eg. if member was 18H but playing 9H it would be undefined so we make it select the 9 hole.
- Fix: Live: Handicap List Report puts Pending handicap people in the correct order
- Mod Live: DG-5279 Hide single fee for multi round checkbox and its text when not multi round
- Mod: Autogenerated poco classes.
- New: MemberProfile Col: Free text column for iGolf sign-up form where hear about us.
- Mod: Live: moved HandicapReport sorting into C# because its hard to read when the sorting happens in 2 spots
- Fix: Tickets > 48678: UI fixes for teebooking tax/invoice receipt.
- Mod: Live: get scores from whs sync runs every hour to reduce chance of angry ISVs
- Fix: Compiles now
- Fix: Turn ED&I on for England (temporarily, for Stage testing)
- Fix: Diversity monitoring should be OFF by default.
- Mod: Core: regen WHSClient.g.cs
- Fix: WHSAPI tests: issue when running on local with PCC endpoint because its nz time
- Mod: Autogenerated poco classes.
- Mod: WHSAPI: add number of holes played to briefScoreWithAdjustment for Handicap record, so that we can reduce dependency on unionland data
- Mod: sql: create and populate FacilityTypeGroup table, add FacilityTypeGroupId to FacilityType, add FoundingYear to Club
- Fix: ClubCMS #47176 The comparer is not longer working and its because of the quotes so.. stripping the quotes then compare so the playing 18 and 9 hole can appear in tee booking again.
- Mod: Live: hack UnionAPIClient so OCS errors show up in our logs until the Interop spec standardises error messages
- Fix: Live: fixed some code that's never been correct deep in the bowels of applybookingchanges
- Add: ClubCMS: England Golf website slider control initial commit
- Mod: Live: Refactored Handicap Listing report mods to be less bad. minor increase in HandicapProviderWHS default maxdop (doesnt make a big difference because it's just using async await, not new tasks or threads.)
- Mod: IGolf-signup DG-5784 page: IntegrateS new page amendments.
- Fix: Adweb can now handle gaps in the schema scripts directory.
- Mod: Autogenerated poco classes.
- Add: IGolf: New non-mandatory column to MemberProfile table.
- FIX: BulkEmail: Fix Ticket #48700 not returning the recipients due to invalid query
- Refactor: Extracted some methods to clarify what's happening behind ClubCMS authentication.
- Mod: EmulatedWHSClient: set transaction isolation level read uncommitted
- Fix: Clubcms: issue with trailing forward slash not fixed for http links
- *** DFH CODE REVIEWED TO HERE *** Mod: Autogenerated poco classes.
- Mod: Live: handicap listing report now calls WHSAPI to get handicaps because we keep getting issues where nzga_handicap is out of date with WHS
- Mod: #password-change-session-nuke reverted from Trunk - DFH+NSC try and do some peer programming to see if we can do this a simpler way.
- MOD: ClubCMS: Hide breadcrumb if club support services url is not set
- Mod: Live: allow ext report headers to display if they are just HTML
- Fix: Live: Member Details report: fixed the membership year count calculation.
- Mod: Vend: Comp fee product for a profit centre is always set to GST inclusive. Check if the GL account includes GST, otherwise set the tax info for the comp fee product to "No Tax". [DG-5745]
- Update: Golf-Tourism: Course details page images sample from region filter results.
- Mod: Org Report #48639 [PLAYERS STROKE AVERAGES] Modified so that it takes the user date range input and not just for the current year.
- Mod: ClubCMS: England Golf website: admin feature content: success message style update
- Mod: Core: remove obsolete feature flag
- Mod: ClubCMS: England Golf website: admin feature content: label update
- Mod: ClubCMS: England Golf website: admin feature content: added the VideoUrl field
- Mod: Core: remove obsolete feature flag
- Mod: ClubCMS: England Golf website: feature content: update the recommended image dimensions
- FIX: ClubCMS: Content Tiles not showing up
- Mod: Moved PostNewNote to NonAffiliates.cs instead of leaving it in TabMember.aspx.cs.
- Fix: ISVAPI: unit test
- Mod: ISVAPI: we don't need ClubRec just use Full.Club when querying all clubs
- *** DFH CODE REVIEWED TO HERE *** Fix: ISVAPI: error msg typo
- MOD: Org: Added Recent Activity logs on Clubs Dashboard
- Mod: ISVAPI: Tests: change response type of request to be correct
- Mod: ClubCMS: England Golf website: feature content style updates
- Fix: ISVAPI: error msgs for deleted ppl return proper json response
- Mod: ClubCMS: England Golf website: feature content style updates
- Fix: ISVAPI: error msg typo
- Mod/Fix: ClubCMS: England Golf website: fix the mobile menu item link; style update
- Fix: API: MyEG: Updating your profile in the app results to "Changes to DOB is not permitted" error message even though DOB was not changed.
- Mod/Fix: Golf NZ hero-swiperjs/viewmodel.ts: corrected the path used to display the hero image.
- Fix: clubcms: change Filter to Search for GI club fixtures because it wasnt clear you had to click the button again once you'd changed the filter boxes
- Mod: ClubCMS: England Golf website: hero style updates
- Mod/Fix: ClubCMS: England Golf website: hero control image path
- Mod: ClubCMS: England Golf website: code clean up
- Mod: EG: Hide line numbers from 9h report
- Mod: ClubCMS: hero-swiperjs and admin-hero-swiperjs: add new control properties
- Fix: Live #48632 Fix where adding notes to non-playing member throws "Your changes could not be saved. Object reference not set to an instance of an object" It was because we're not checking if the returned Cmember was for an actual member or Non-Playing/NonAffiliate
- Mod: ClubCMS: Golf NZ and EG hero admin control updates
- Mod: ISVAPI: refactor to use InsertOrUpdateMemberRecordForOtherUnion which is not verbose
- MOD: ReverseProxy: Added bopgolf.co.nz
- MOD: ClubCMS: Added bopgolf.co.nz in the bindings.list
- Mod: ClubCMS: England Golf website: admin-hero-swiperjs: add new control properties to allow to show or hide fields
- MOD: ActivityTracker: Added recent activities on the activity search page, improve search contacts type indicator, and rename the create topic to create only
- [unbreaking] Fix: Live: rename UsesUnionAPIForInterop to UsesThirdPartyUnionAPI so no-one accidentally changes it to True for GBI since we're starting to call our own UnionAPI now
- [unbreaking] Fix: ISVAPI: rename UsesUnionAPIForInterop to UsesThirdPartyUnionAPI so no-one accidentally changes it to True for GBI since we're starting to call our own UnionAPI now
- [breaking] Mod: Core: rename UsesUnionAPIForInterop to UsesThirdPartyUnionAPI so no-one accidentally changes it to True for GBI since we're starting to call our own UnionAPI now
- Mod: ClubCMS: England Golf website: footer text update
- Mod: ClubCMS: England Golf website: footer style updates
- Mod: API: remove unused files
- Fix: Live/Org #48446 Fix where redirect would not display banner on what has been done to the User account setting
- Fix: ISVAPI: Rate limit test date math
- Mod: ISVAPI: Better handle deleted people #5005291
- Mod: Adweb Cognito auth: Cleanups, refactors, documentation.
- Mod: ClubCMS: England Golf website: css clean up
- Mod: ClubCMS: England Golf website: css clean up
- Mod: ClubCMS: England Golf website: css clean up
- Fix: Adweb: Redirect loop if user does not have a refresh token cookie (previous version of adweb)
- Mod: Adweb: Use refresh tokens to keep our sessions alive for up to 400 days.  Hopefully we'll stop getting Cognito login dialogs all the time.
- Mod: ClubCMS: England Golf website news list style updates
- Mod: ClubCMS: England Golf website news list style updates
- Add: "Ready for Processing" option in tee booking capture payments area, so we can easily filter and list bubble transactions. Clean up: Removed old green fee processing code since we haven't had a booking that used GreenFeeTypeId since 2015.
- Add: vLatest of wa_TBGetAuthorisationsToCapture (committing every version of the script from /sql seemed a good idea at the time... got too tedious, screw it)
- Mod: ClubCMS: England Golf website news list style updates (work in progress)
- Add: v847-1598 of wa_TBGetAuthorisationsToCapture (starting to get lazy so just committing every few scripts now)
- Add: v847 of wa_TBGetAuthorisationsToCapture
- Add: v796 of wa_TBGetAuthorisationsToCapture
- Add: v778 of wa_TBGetAuthorisationsToCapture
- Add: v505 of wa_TBGetAuthorisationsToCapture
- Add: v404 of wa_TBGetAuthorisationsToCapture
- Fix: WHSAPI.Tests: dispose of database correctly in some 9h tests that spin up new testbases
- Mod: ISVAPI.tests: rate limit test more stable now
- MOD: ClubCMS: Adjust CSS on CKEditor accordion
- Mod: Small tidyups around tee booking payments screen - "booking was deleted" wrapping and ticket number not showing up.  Added a link on ticket number (for DotGolf only) to Adweb.
- Fix: Live: sql: one-card-per-team GetEligibleCompetitionRounds performance - no longer tries to query all scorecards ever for the member also swap OPTION (querytraceon 9481) with OPTION (USE HINT ('FORCE_LEGACY_CARDINALITY_ESTIMATION'))  because its more readable
- MOD: ClubCMS: Implement Accordion within the CKEditor for Resource Hub details page
- Mod: Adweb: Added player name into tee booking entries grid.
- Fix: Dev Live: EmulatedWHSClient.cs now supports hitting Save on a member record at the member's home club. Reduced the file line count a bit too.
- Mod: ClubCMS: England Golf website: hero style updates
- Fix: Live: Club tag updates by one club wipe out club tags added by other clubs
- Mod: ClubCMS: England Golf website: feature content text container updates
- Mod: ISVAPI: tests goes a bit faster
- Mod: ISVAPI: performance issue when fetching all clubs because of lazyloading
- Mod/Fix: ClubCMS: England Golf website: handle null video URL
- Mod: ClubCMS: England Golf website: update the admin feature content previews
- Mod: ClubCMS: England Golf website: feature content theme 2 style updates
- MOD: ClubCMS: Fix not loading resources when View All is clicked, added Delete Resource on Admin Resource Centre
- Fix: Live: groupbooking edit exception #48627
- Mod: ClubCMS: England Golf website: feature content theme 3 style updates
- Mod: ClubCMS: England Golf website: hero style updates
- Mod: ClubCMS: England Golf website: feature content theme 1 style updates and fixes
- Mod: ISVAPI.tests: new test for interclubmessage correctness
- Fix: ISVAPI: Tournament approval
- Fix: Live: ISVTournamentService
- Fix: Live: webhooks not firing for isv tournaments
- Fix: ClubCMS: comp results broken on club websites
- Mod: Reverse Proxy: sites-dev.list: added S,W,1,1,eg.cw.nz.dev.golf.co.nz
- Mod: ClubCMS: bindings.dev.list: added eg.cw.nz.dev.golf.co.nz
- MOD: ClubCMS: Updates on Tournament Leader board UI on mobile, hide the up/down icon on mobile
- Mod: C# not clever enough (yet) to build my intentions and not my code.
- MOD: ClubCMS: Added View All at the bottom of Tournament Leader board control
- Add: Adweb now expires nav cache everywhere if products are updated.
- Fix: Build, we no longer have to expire cache keys on logout.
- Mod: CoreNavigation cache version number introduced so we can invalidate nav cache easily from Adweb by incrementing a key.
- Fix: nav cache: committing this before david
- Fix: UnionAPI: dont return null whsmemberuid to OCS
- Mod: ClubCMS: England Golf website: feature content link style 1 and 2 button and style updates (work in progress)
- Fix: Live: composite marker select weird for Huapai #48572
- MOD: ClubCMS: Fix not showing Score In column on mobile
- Fix: Live: composite marker select weird for Huapai #48572
- Mod: ClubCMS: England Golf website: feature content link style 3, video button, video pop-up
- MOD: Scheduled Task: Use SocialFeedKeyword to identify competition id for Tournament Feed
- Mod: Live: send unionapi scores to whs with correct offset
- Mod: UnionAPI: Save score datetimeoffset
- MOD: Org: Added SocialFeedKeyword field into the Competition Setup
- Mod: sql: Api_addscore now handles playdateoffset from unionApi
- Mod: ClubCMS: England Golf website: admin button style updates
- Mod: Autogenerated poco classes.
- Mod: sql: score playdate offset so we can save offsets sent to use via unionAPI
- Fix: Some of them totals 'dun not addin' up.
- Mod: ClubCMS: England Golf website: desktop & mobile menu style update
- Add: Link to allow us to enable/disable detailed transaction listings in slicer email.
- Mod: Adweb can now show detailed transaction listings as part of the slicer email report (if you add ?detail=1 to the URL)
- Mod: Autogenerated poco classes.
- MOD: Org: Added SocialFeeKeyword column to Competition
- Mod: UnionAPI: null handling in auth
- Fix: unionapi: remove custom swagger
- Fix: UnionAPI: courses endpoint routing
- Fix: unionAPI: jenkies build
- Mod: Core+tests: don't need net5.0 targeting because its not LTS
- Fix: UnionAPI: units updated with TeeId, PCC date is now a date in the swagger spec
- Fix: UnionAPI: units updated with TeeId, PCC date is now a date in the swagger spec
- Mod: ClubCMS DG-5690 Stop user from entering junk into email - Added email validator using regex - Bringing back the ability for EG members to be able to update their email addresses
- Mod: UnionAPI: get net6.0 actually working
- Fix: Core: Build after prev UnionAPI commit
- Mod: UnionAPI: get net6.0 actually working
- Mod: ClubCMS: England Golf website menu: styles clean up
- Mod/Fix: ClubCMS: England Golf menu dropdown alignment
- Mod: UnionAPI: .net6.0, nullable reference types, DateTimeOffset for score playdate, new PCC endpoint
- Mod: ClubCMS: England Golf website image updates
- Mod: Shared.Tests: DataCacheFixture uses guids for keys and the new threadblocking test
- Mod: ISVAPI tests: test for WHSMemberuid being visible when searching unionAPI when it's DotGolf doing the searching
- Mod: ClubCMS: England Golf website: hero control style and svg updates
- #password-change-session-nuke Fix: ClubCMS DG-5637 Missing stuff from poor renaming of things and handled the redirect from reset password a bit better
- Fix: API: build after rev 51852
- Mod: Golf-Tourism: Filter control search input keys is now functional.
- Fix: WHSAPI: bug in endpoint that returns pcc data
- Mod: ClubCMS TB: Refactored some old Linq to SQL stuff to use BusinessLogic instead. Cleanup: Removed commented code and other old cruft. Add: Implemented TBTimeSlot and TBBlockTimeSlot business logic and pocotables.
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: England Golf website: big hero style updates
- #password-change-session-nuke Mod: ClubCMS DG-5637 - ChangeDateUTC to credential tracking
- #password-change-session-nuke dropping this as it should not be used in favor of ChangeDateUTC
- Mod: ClubCMS: England Golf website news list control style updates
- Mod: ClubCMS: England Golf website: template style updates
- Mod: ClubCMS: England Golf website: hero style updates
- #password-change-session-nuke Mod: ClubCMS DG-5637 Password change will log other sessions out - Refactored to use ChangeDateUTC instead of GUID. Default Data is GETUTCDATE() - Using DES encryption as AES is a little too beefy for what needs to be done
- Mod: #48354 ClubCMS TBP: When using token rebill to create a booking, if you close the browser (or lose connection) after clicking SUBMIT on ConfirmAmounts.aspx, so that the system never loads ConfirmPayment.aspx, the transaction will be authorised on the card, but never marked as Completed, and the booking will not be created.
- Mod: ClubCMS: England Golf website news list control style fixes and updates
- Update: Golf-Tourism: Functional search results filter by regions through checkbox selection.
- Mod: ISVAPI tests: attempt to make rate limiting test faster on jenkins
- Fix: DigitalScorecardTests: setup/teardown issues sometimes
- Fix: Core.tests: increase cache time of firs query in LotsOfParallelFetches test to avoid the test failing because of being slow on jenkins (13s+)
- #password-change-session-nuke Fix: removed extra { from TemplatedPage.cs - The gift that keeps on giving
- #password-change-session-nuke Fix: removed extra { from Global.asax.cs
- Mod: Autogenerated poco classes.
- #password-change-session-nuke Mod: ClubCMS DG-5637 Password change will log other sessions out - Column that gets check and updated as the password gets updated
- Fix: ClubCMS @memberToAdd -> not being declared when adding friend through mobile site. It was actually asking for the "FriendId"
- #password-change-session-nuke Mod: ClubCMS DG-5637 Password change will log other sessions out - Will now save a guid as flag and update upon password change - Any time the user is logged in and is using the but the cookie and token from db doesn't match it logs them out.
- Fix: DigitalScorecard: Highlighting of score discrepancies not working for Back-9s due to incorrect starting hole index.
- Fix: API: /list-submitted-cards: Add check if ScoreId linked to the scorecard is an RSScore so we don't end up instantiating a new Score object from that Id.
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Added CGRegionId column to Facility table, populate CGRegionId with RegionId, and update RegionId with Club.RegionId and use the Region table as the source of GetRegions instead of CGRegion table
- Add: API: Digital scorecard: Unit tests - initial commit. Mod: API: Digital scorecard: Hole not started/attempted - minor refactor.
- Mod: ClubCMS: England Golf website: news list control: add header, style updates
- Mod: Live: handicap change report more descriptive and lets you select HIs at set date
- Mod: Live: report renames for GI/EG so they are more clear
- Mod: Activitytracker: redis sessions now ?
- Mod: Activitytracker: redis sessions now ?
- Mod: Activitytracker: allow tags with min length 2 chars, max length 49
- Mod: ClubCMS: don't show fixtures that have already passed unless the user explicitly filters for them. GI Smartsheet Line 196
- Mod: ClubCMS: replace last remaining wa_TBSearchByClubDay call with the searchV1/searchV2 toggler
- Fix: Clubcms: ORNS in debugmode
- Add: Golf-Tourism: Create and implements RegionDto & ProvinceDto objects.
- Fix: ISVAPI: missed a file
- Mod: use_temp_path=off on all proxy directives; we don't want to use /etc/nginx/ for caching anything since it lives on EFS.
- Mod: ISVAPI: more descriptive error messages when ISV posts score outside the date range of a marker
- Mod: clubcms: attempts to minimise exceptions being thrown when checking if the logged in user is in various roles
- Fix: nginx performance: proxy_temp and client_body_temp files were being stored in /etc/nginx/... which is located on EFS (which sucks as we've found out).  Added nginx config directives to store this stuff in /var/nginx instead, which is located on EBS - much faster!
- Fix: WHSAPI: perf issue when checking if scoreintent is linked to an existing score
- Fix: public:  stop adding trailing  /  to teebooking url because it can cause people's .php files to not be found
- Mod: ClubCMS: England Golf news list control: apply filter by tag
- Fix: Live: DG-5709 Using actual data length from what we're trying to bind to view and nuked that static text.
- Mod: Live: TeebookingHelper tbclubvisitor mods so the queries use the new indexes
- Add: sql: perf indexes for tbclubvisitor
- Fix: TestThreadBlocking (for DataCache this time) - new way to test this that isn't dependent on how busy the build host CPU is.
- Mod: Put AdminPanelRepository.cs on the sinking ship^H^H^H^H^HDotGolf.Public.2012.
- Fix: TestThreadBlocking - new way to test this that isn't dependent on how busy the build host CPU is.
- DFH+GTC #48484 Direct debit exports have a failure mode where the receipts can be created in Xero, but then the API return message (telling us what the created Xero payment IDs are) never gets back to us (due to a parse failure, timeout or other gremlins).  In this case, we look out for receipts that have the  magic DD_______ reference string.  If it matches a direct debit export batch in the database, and we can find a receipt linked to THIS invoice that matches the amount on the batch, we link the receipt up to the incoming Xero receipt automatically, and continue as if nothing happened.
- Add: DG-5657: Data-driven filter control region on landing page.
- MOD: ClubCMS: Added new control Timeline Scroll
- Fix: Live: made POS comp tiles a little larger to allow for DISABLED bar (now that we have multiline titles)
- Mod: API/Core deleted obsolete scorecardrepo. purged more dapper.contrib references
- Add: Utility in DotGolf Live to allow us to delete receipts/payments in bulk (if we need to after a direct debit export stuffup or such).
- Mod: Core.Tests: TO FIX API TESTS on local machine: In VS go to Test menu -> Default Processor Architecture -> set to x64
- Mod: Core.Tests: Add runtime identifier for x86 windows because otherwise API tests seem to crash on local machine ¯\_(ツ)_/¯
- Mod: Xero batch payment upload - send receipts to Xero in batches of 30, not everything at once.  We think large payment batches are causing gateway timeouts for Xero, which means we never get the IDs back, which means we try and upload the receipts again and again, causing duplicates in Xero.
- Fix: API: build broken by accidental file commit
- Add: Org: can now undelete clubs
- Mod: ISVAPI tests: dispose of members properly
- Fix: API: Leading commas in SQL statements.
- Mod: Live: reduce interop unionapi copypasta using InsertOrUpdateMemberRecordFromUnionApiLookup
- Mod: ISVAPI: handle passing WHSMemberUID between unions when we eventually call our own unionAPI
- Add: ISVAPI: club/tournament isvs can now search scotland
- Mod: Core: UnionAPIClient now requires resolving a TerritoryDefinition so we don't have to keep doing the hack of changing the URL manually.
- Mod: ReverseProxy: added S,W,1,1,raglangolf.co.nz
- Fix: DG-5577: Fixed long string when persistence.
- Mod: ClubCMS: bindings.list: added raglangolf.co.nz and www.raglangolf.co.nz
- Mod: ISVAPI: CountryCodeProxy refactor
- Mod: Core: UnionAPIClient now requires resolving a TerritoryDefinition so we don't have to keep doing the hack of changing the URL manually.
- Fix: UnionAPI: stop nswag generating application/json-patch+json and the default request contenttype because OCS cant handle it and causes weird errors when we try send scores to them.
- Fix: DG-5577: Unable to untick disability checkbox item options.
- Mod: Live: POS: now shows 2 lines of stuff in the POS (comp titles, fave products) when before it was only showing 1 line
- Fix: Live: AwayUnionScoreInsertedUpdated typo
- Fix: #48452 NEVER let a club run two direct debit exports at the same time by spamming the SUBMIT button.  The nuclear fallout from this is too much to deal with.
- Fix: DG-5577: Removing capitalize sentences and adding ' Select one ' as default selected value to disability drop downs.
- Mod: GI DG-1144 UserControlUtilities - now handles new property type for control type json contact-form - clean up and modified to use the new properties
- Mod: DG-1144 Modified to handle new property type 'json' from DB for control
- DG-1144 GI and other (if we update the ui to use it) Contact-Us will use this property We can now control emails and name for the contact-form from adweb
- Fix: Live: vend show quick key label instead of product name if available
- MOD: ClubCMS: Change image dimension label
- MOD: ClubCMS: Revert commit
- MOD: ClubCMS: Change image dimension label
- Fix: DG-5577: Exception when saving with duplicate 'IX_MemberProfile_MembershipApplicationIdCrypt' keys.
- Fix: Org: F9 marker showing 18h when trying to create a course change #5005018
- Mod: ClubCMS [GB&I] DG-5622 AssociationController - Gets default email from DB when EmailAddress isn't set assuming it'll be a single one for default UserControlUtilities - Handles conversion and binds to KO observable array when saving more than 1 email addresses separated by a comma when pulling from "EmailAddressTo" in AdWeb Changed the GI contact-us view to handle the new Observable Array and select list
- Fix: Live: interclub team members don't include deleted scores in estimate
- Mod: DG-5577: Data collection statement added at the top of each form (i.e., igolf-signup & my-profile) pages.
- Fix: #48354 Visitor books a member at a club that uses course fees.  Authorising the transaction does nothing because there are uncaptured course fees on record for the member (and these are part of the booking fees) - so card never gets charged.
- Fix: ISVAPI.Tests: Test requires Features
- Fix: UnionAPI: no more plaintext responses >:(
- Mod: DG-5577: Removed commented code lines.
- Reverse Merged revision(s) 51718 from Trunk: Mod: Results: prevent other transactions inserting into rsscore while we are trying to create a new rsscore row (prevent duplicate key errors for the same scoreid) ........
- Mode: DG-5577: Clean-ups.
- Mod: DG-5577: Using poco object.
- Mod: DG-5577: Completed My Profile edi fields integration.
- Mod: Live: trim whitespace when trying to map our internal payment types to vend payments types
- Fix: Live: throw error and send email to Mat if online payment type is not mapped for a Vend POS club
- Mod: Autogenerated poco classes.
- Add: Missing script to add Competition.FirstRoundOnlyEntryFee.
- Fix: Cursed leading commas!!
- Fix: Erroneous join condition to RSResult table caused high database cpu on golf.co.nz.
- Mod: Results: prevent other transactions inserting into rsscore while we are trying to create a new rsscore row (prevent duplicate key errors for the same scoreid)
- Mod: ClubCMS: England Golf website: feature content style and text updates
- Fix: Live: Wales Golf R&A 9h report stray non ascii char rendering as question mark in PDF
- Mod: ClubCMS: England Golf website: news control style updates
- Mod: Core: Rewrite DataCache to not lock up as much stuff all the time - only locks when reloading data key. this time handles null values
- Revert: Mod: Core: Rewrite DataCache to not lock up as much stuff all the time - only locks when reloading data key
- Mod: Core: Rewrite DataCache to not lock up as much stuff all the time - only locks when reloading data key
- Mod: Core.Tests: yet more feeble attempts to get redis tests to consistently pass on jenkins
- Fix: Core.Tests: missed a file
- Mod: Core.Tests: yet more feeble attempts to get redis tests to consistently pass on jenkins
- Mod: ClubCMS: England Golf website: feature content: code clean-up
- Mod: ISVAPI: CRM ED&I fields hidden when null
- Mod: Live: Allow course handicap report to generate a playing handicaps too, based on selectable allowance percentages
- Add: HandicapAllowances area in IConfigurationProfile; this stores handicap allowances applicable to each of our unions.  We haven't integrated this into Results yet; this is just to commit the allowance data itself (which was painful to collate).
- Mod: Live DG-5279 Single fee for multiple rounds competitions (DG staff currently only have the ability to set this setting - default is charging every round) and green fee settings are untouched. Eg. [Provided that the setting for single round fee has been set] - 3 round comps player enters from 1 through to 3 only pays on round 1 of whatever the pricing set is for visitor and home fees. - 3 round comp and player enter round 2 and 3 gets charged for round 2 but not three TODO: Modify clubCMS to honour this setting flag during registration
- Cleanup: Removed MessageRepo and baked the code into ClubCMS/MemberController.cs since these methods are only invoked from this one place.
- Mod: Core.Tests: yet more feeble attempts to get redis tests to consistently pass on jenkins
- Add: ClubCMS: England Golf website news list / tiles control initial commit
- Fix: Use guids for cache keys in the unit tests; there are 3 tests that use the exact same cache key, idk maybe this is causing the random test failures on build1?
- Fix: Use guids for cache keys in the unit tests; there are 3 tests that use the exact same cache key, idk maybe this is causing the random test failures on build1?
- Add: My Profile - add ED&I fields: Added UIx for diversity survey questionnaire's.
- Fix: Teebooking: wa_TBAuthoriseTransaction - Use inner joins so the query runs faster.
- Mod: From the it-cant-fail-to-compile-if-it-doesnt-exist department: PushNotifications.ascx user control removed, inlined into Teebooking.aspx.  This is to avoid the increasingly common and frustrating HttpCompileExceptions we get when publishing Live.
- Fix: RedisDataCacheTestsWithDb copypaste bug
- Mod: Core.Tests: yet more feeble attempts to get redis tests to consistently pass on jenkins
- Mod: Live: R&A 9h qualifier report for WAL now visible for clubs
- Mod: Shared.Tests: moved RedisDataCacheFixture.cs tests to Core, deleting them from Shared tests
- Mod: Core.Tests: feeble attempts to get redis tests to consistently pass on jenkins by spinning up new threads instead of relying on Parallel
- Fix: Teebooking: Payment transaction still pending capture for member bookings with guest and a cart (assigned to the member). The captured flag for the ticket entries are set but not the associated TBTransaction record. #48243 #tb-bubbles
- Add: GolfNZ-Golf-Tourism: New initial project files for filter control.
- Fix: Live/Results: duplicate RSScore rows causing duplicate scorecards to show in POS #47785
- Mod: ClubCMS: hero-swiperjs: revert recent changes made (curved bottom, short hero, svg)
- Mod: Core: regen ISVAPIClient.g.cs
- Mod: IGolf-signup page: Implements MemberProfile update in sign-up confirmation page.
- Mod: ClubCMS: England Golf website menu mobile style updates
- Mod: ClubCMS: England Golf website: feature content style updates
- Mod: ClubCMS: England Golf website: hero style updates
- Mod: ClubCMS: England Golf website: hero style updates
- MOD: ClubCMS: Resource hub ability to update banner texts and image
- Mod: IGolf-signup form: Moving css styles to the right file.
- Mod: IGolf-signup form: Integrates Config.Current.Features.EnableDiversityMonitoring for show/hide diversity questions sections.
- Mod: IGolf-signup form fields: Data persistence updates for new table columns changed from Marcus.
- Mod: Disable diversity monitoring feature flag until April 4th.
- Mod: ISVAPI: ED&I data disability now supports prefer not to say, added genderfreetext
- MOD: ClubCMS: Exclude CTA label for now
- Hack: WarehouseBuilder.Tests no longer compiles after the DatabaseBuilder refactor (we can't build a sql warehouse database anymore until this is fixed). Since I don't have time right now, just stop running these unit tests; WarehouseBuilder will be superseded by Redshift anyway.
- Mod: Core: new MemberProfile field
- Mod: Autogenerated poco classes.
- Fix: Core: build
- Mod: sql: new memberprofile columns for freetext
- Mod: ScheduledTasks: Added Shared.Tests and Core.Tests to make ScheduledTasks.Tests happy.
- Mod: Autogenerated poco classes.
- Mod: sql: new memberprofile columns for freetext
- Mod: ClubCMS: England Golf website: hero control initial commit
- Mod: Igolf-Signup: Added diversity monitoring questionnaire's.
- Mod: ISVAPI: toggle EDI data based on feature flag even though CRMAPI will HOPEFULLY never be used by anyone except EG
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Hide tag topic when updating a topic
- Mod: Core: do not generate setters if column is computed or readonly
- Fix: ActivityTracker: replace WCREV with asp-append-version="true"
- Mod: HistoryExportService: typo
- *** DFH CODE REVIEWED TO HERE *** Fix?: ActivityTracker: contactsearch
- Fix?: ActivityTracker session management hopefully uses redis now
- MOD: BulkEmail: Added Clubs selection to Bulk Email's Members and/or Casuals recipients
- Mod: Adweb: show hole by hole info even if scorecard not returneded
- Mod: Adweb: show hole by hole info even if scorecard not returneded
- MOD: ClubCMS: Define arrow icon for Ireland Golf
- Mod: ClubCMS: England Golf website: feature content link style 2, mobile version, mobile styles
- Fix: ClubCMS #47969 Fixed the filtered logic for team competition not appearing in the player's list of competition when viewing in GolfNZ competition tab
- Mod: ISVAPI: unit tests for ED&I data
- Fix: sql: missing GOs causing script error
- MOD: ClubCMS: Implement Club Hub button in the navigation, this is essential when going live of the Club Hub / Resource Hub on Mar 21 for Golf Ireland
- Mod: sql: index for MembershipApplicationIdCrypt
- Mod: Autogenerated poco classes.
- Mod: sql: new column for memberprofile table to handle the cwmembershipapplication process (because we save the signup data in that table, and only insert into the member table when the person has paid)
- Fix: WHSAPI: scores with the same play date can now combine in proper order and not cause infinite recalc loops
- Fix: Live #48156 Changed from looking at DrawTime to determined if a TimeSheet has been created to looking at DrawCompetitionRound as it was bugging out thinking that a timesheet has not been created to when all of its time slot was deleted. Causing the user to not be able to modify the existing DrawSheet.
- MOD: ClubCMS: Added Find a place to play widget for England Golf
- MOD: ClubCMS: Use tags on View All News
- MOD: ClubCMS: Do not reset form after resource is created
- Fix?: ActivityTracker session management hopefully uses redis now an
- Fix: ActivityTracker: ko selectize script missing, causing weird dropdown menu issues
- Mod: ClubCMS: England Golf website: feature content link style 1 updates
- Mod: ClubCMS: England Golf website: admin-feature-content control initial commit
- Revert Fix?: WHSAPI: when linking combined scores, update the parent scoreId last. Otherwise we can get an error when trying to correct two scores combined in the wrong order - the ParentScoreId update throws a violation of unique index 'IX_Score_ParentScoreId'.
- Fix?: WHSAPI: when linking combined scores, update the parent scoreId last. Otherwise we can get an error when trying to correct two scores combined in the wrong order - the ParentScoreId update throws a violation of unique index 'IX_Score_ParentScoreId'.
- Mod: ClubCMS: extend session timeout for admin users - GI wanted this, seems fine.  GI Smartsheet Line 188
- Mod: ClubCMS: removed hardcoded country code checks for verifying valid login; they'll only cause us pain later
- Mod: Live: dapper.contrib reference in interClubMessaging
- Mod: unionapi: removed some dapper.contrib references
- Mod: ISVAPI.Tests: refactor to use less SELECT *
- Mod: ClubCMS: open fixtures list now displays multiple rounds for the same comp as a single tile when the rounds are on the same day
- Mod: ClubCMS: England Golf menu: add background colour on scroll
- Fix: Live: Build after categoryRepo delete
- Mod: Live: removed some dapper.contrib references
- Mod: Live: removed a dapper.contrib reference in ISVTournamentService
- Mod: Core: deleted CategoryRepo
- Fix: Adweb: when moving member records over during merge, update the membercodes to be the same across all cmember records if the union has lifetime ids
- FIX: ClubCMS: Meta tag description includes html tags
- Mod: ISVAPI: removed dapper.contrib
- Mod: ClubCMS: England Golf website: feature content link mobile style updates
- Mod: ClubCMS: England Golf website: feature content link style 1 updates - mobile
- MOD: Live: Strip img tag with base64 string and remove span tags to avoid multiple tags due to copy/paste from word
- Mod: ClubCMS: England Golf website: feature content link style 1 updates
- Fix: API: Digital Scorecard: [DG-5257] Allow recording of hole not attempted scores via the app. The app sends a '-2' or 'NULL" (if empty) score for a given hole.
- Mod: ClubCMS: England Golf website: feature content link style 1 updates
- Mod: ISVAPI.Tests: more feeble attempts to get jenkins to run the damn tests
- Mod: ISVAPI.Tests: more feeble attempts to get jenkins to run the damn tests
- Mod: ISVAPI.Tests: downgrade Microsoft.NET.Test.Sdk in feeble attempt to get jenkins to run the damn tests
- Mod: UnionAPI.Tests: update xunit test runner to match core.tests
- Fix: API: build, after nzcrdata repo deletion
- Fix: UnionAPI: build, after nzcrdata repo deletion
- Mod: Core: regen ISVAPIClient.g.cs
- Mod: Core: delete RegionRepo because we have Core.BusinessLogic.Region and Core.Data.Region now.
- Fix: Core: PEBKAC'd sql query
- Mod: Core: delete NZCRDataRepo because we have Core.BusinessLogic.Marker and Core.Data.Marker now.
- Fix: Core: ISVAPI NSwag client: Build?
- Mod: ISVAPI: moved a code comment to new location
- Fix: ISVAPI: Unit tests
- Add: ISVAPI: Ethnicity/Diversity/Inclusion data into CRMAPI methods
- Fix: ClubCMS: golfnz-club-search/viewmodel.ts: fix the Get Directions link on the Google Maps marker. Previously, it was "undefined".
- Mod: Autogenerated poco classes.
- Fix: ezpoco should generate new temporal columns (any computed columns) as not-writable. we should really cull dapper.contrib...
- [DG-5257] - Revert 51556
- [DG-5257] - Revert mods 51561, 51554, 51552
- Fix: ConnectorAPI: hotfix for issue with the the same scorecard being returned multiple times from the live_connector_poll query
- MOD: ClubCMS: Fix Penalty Score indicator on My Scores control
- Fix: API: Digital Scorecard: Part 2 - [DG-5257] Hole score now accepts negative value to accommodate "hole not started or attempted" (-2). We don't expect any other value except -2 from the app as there is no way for the user to enter a negative score for a hole. Should be of type nullable short instead of unsigned. [DG-5257]
- MOD: ClubCMS: Added PenaltyScore indicator in My Scores control include css
- MOD: ClubCMS: Added PenaltyScore indicator in My Scores control
- MOD: ClubCMS: Added PenaltyScore indicator in My Scores control
- Fix: API: Jenkins part 2 - Should be nullable short instead of unsigned. [DG-5257]
- Fix: API: Jenkins - Should be nullable short instead of unsigned. [DG-5257]
- Mod: API: Digital Scorecard: [DG-5257] Hole score now accepts negative value to accommodate "hole not started or attempted" (-2). We don't expect any other value except -2 from the app as the UI does not allow users to enter a negative score for a hole other than selecting the "Hole not attempted" option.
- Fix: Incorrect relative path for DotGolf.Shared.Tests dll in nunit config file.
- Fix: Incorrect relative path for DotGolf.Shared.Tests dll in nunit config file.
- Add: Shared sln and nunit test project.
- Fix: Damn it, VS.
- Mod: Split Core and Shared stuff into separate project.
- Add: Solution file for core+shared libraries (so we can set up unit testing on build1)
- Add: DotGolf.Core.Tests needed wherever DotGolf.Shared.Tests lives.
- Fix: Needed a few settings in DotGolf.Core.Tests csproj.
- Mod: Moved to the DotGolf.Core DatabaseBuilder instead of the crappy old one in DotGolf.Shared.Tests.  We pass in the old schema scripts from DotGolf.Shared.Tests because we need those for the old-style unit tests.
- Mod: ClubCMS: England Golf website style updates
- Add/Mod: ClubCMS: England Golf website: feature content block initial commit
- Mod: HistoryExportService: now deployable
- Mod: BulkEmail: enable sending emails to club contacts for Wales Golf
- Fix: BulkEmail: nav menu for Create Draft showing up as blue instead of union colour
- Mod: Scheduled Task: PayByBillingTokenProcessor: just updated a comment
- MOD: Live: Notification email sent to recipient when Open Fixtures details is populated and set to show on golf.co.nz
- Mod/Fix: PayByBillingTokenProcessor
- Mod: Country Profiles: add Windcave Tournament User ID
- Add: Feature flag for diversity monitoring.
- Fix: Assembly namespace changed so embedded resources (with hardcoded paths) could not be found.
- Add: Directory.Build.props since BuildInfo.SolutionName is fickle in DotGolf.API build now.
- Mod: Removed NUnit from DotGolf.Shared; all framework unit tests live in DotGolf.Shared.Tests now.
- Fix: Some missing references caused the Live build to fail.
- Add: DotGolf.Shared.Tests to DotGolf.Live for background task tests.
- Err, old code - renaming in case this was a mistake
- Fix: ClubCMS #47176 - append playing eg 9 hole or 18 hole to all currenting booked slot where as before it was missing in certain cases to due null data
- Fix: Build after DotGolf.Shared.Tests move.
- Mod: DotGolf.Core.Tests target netstandard2.0 now so we can reference it from DotGolf.Shared.Tests.
- Mod: Make DotGolf.Shared internals visible to DotGolf.Shared.Tests for testing.
- Mod: Moved unit tests from DotGolf.Shared/Tests into a new project, DotGolf.Shared.Tests, so that we can use DotGolf.Core.Tests for global stuff.  Also our unit tests shouldn't live in the production DLLs, this means we should be able to uninstall XUnit/NUnit from Shared now.
- Fix: ISVAPI: test build
- Fix: Don't try to run FTS index scripts against LocalDB; it doesn't support FTS.
- Mod: Core.Tests: remove excessive diags
- Mod: Autogenerated poco classes.
- Reverse Merged revision(s) 51513 from Trunk:
- Mod: PristineDatabaseBuilder: diags for db not updating properly
- MOD: ClubCMS: Make the resource hub more dynamic by having the featured, recent and popular blocks configurable
- Mod: Autogenerated poco classes.
- Mod: PristineDatabaseBuilder: diags for db not updating properly
- Fix: Live: doublebogey or worse wasnt showing as black in the score listing hover-over score display for some reason, refactored it and it's fine now
- Mod: Live DG-5368 - Added missing functionality to move the user back to the last clicked on booking slot when move booking is cancelled
- AAAAAAAAAAAAAAAARGH DAMMIT Pristine Database Builder didn't build a pristine database.
- Mod: Autogenerated poco classes.
- Fix: Double backslash needed here because it's not a multiline literal.
- Fix: ClubCMS DG-5603 #46639 Fixed the view where if only back 9 are played in the competition and the results are binding to the front 9. Refactored to use KO loop and not specific index in array to bind so it's dynamic.
- Add: DG-5575: Add MemberProfiles business logic to store ethnicity data (with an encrypted link back to the Member table).
- Mod: Regenerated EzPogo.g.cs manually to get MemberProfile in there; PristineDatabaseBuilder is out of commission at the moment since we're moving build servers.
- Fix: PristineDatabaseBuilder: build
- Mod: ClubCMS: England Golf website footer style updates
- Add: ClubCMS: England Golf website footer
- Mod: Added check to ensure we've got a single history table, and only a single row of history.
- Fix: Formatting error on console output.
- Mod: Database Builder: Embed the sql schema scripts in the binary instead of trying to retrieve them from SVN.  We had all manner of problems trying to connect to Subversion outside of the Jenkins process, so just gave up on that.
- Mod: PristineDatabaseBuilder: please build
- Diags: More logging added so we can see if schema scripts are being executed correctly.
- Mod: PristineDatabaseBuilder: please build
- Mod: ignore download task when building database for now - doesnt work yet with PristineDatabaseBuilder moved to build1 because of the svn:ssh// thing
- Mod: PristineDatabaseBuilder: use localDB
- MOD: ClubCMS: Remove mobile pager for content-tiles-slider
- Mod: Org: hide report params from R&A 9h report
- Add: MemberProfile table.
- Fix/Mod: ClubCMS: GetFooterMenu: "footer secondary" query: use left join when joining with CWPage;
- MOD: ClubCMS: Added CTA in the navigation and remove
- Add: AES encryption support to Encryption.cs.  DES should no longer be used for new stuff.
- Mod: HistoryExportService: mods to improve extraction query performance
- Add: sql: indexes to speed up the HistoryExportService query that checks for fresh inserts that haven't got a history entry yet
- Mod: Live: DD Export: show the 10 latest exports
- Mod: Live: Invoice: GetInvoicePaymentsAndCreditNotes: order the records by CreateDate
- Mod: Live: the Direct Debit Export process will stop exporting payments to Xero real-time. The Xero Sync process will include exporting of DD payments, not just Online and Online A2A payments.
- Mod: Org: R&A 9h comp report: renamed Placement to Placing, moved country code toggles into the separate json files, format NetSD to 1dp
- MOD: ClubCMS: Added Content Tiles Slider
- Mod: ClubCMS DG-5544 The Features definition
- Fix: API url was incorrect in dev mode, this may be the reason for Xero dev auth requests not working.
- Fix: As part of the NoCharge stuff, we will no longer Auto-Enter you for a comp if you have played in a FUTURE round.  This was a bit weird; I hope no-one is upset by this change - it just has the potential to cause further bugs if we leave this in there. Add: NoCharge stuff for Nikky - this does not affect any UI, it just returns some extra data (that we currently ignore).
- Mod: Adweb: add scoreid to messages pane of member details
- Fix: Public2012: build
- Mod: Live: mods to support people who've been merged, in the case that someone accidentally navigates to their member page using Recently Viewed or something.
- Mod: Adweb: Allow merges in ENG/WAL to use the other record's member number as well as merging their scores. Since they have a lifetime ID, it makes sense to let them choose which to keep. Main purpose is when performing a merge in order to import scores from another union; we don't want to be forced to delete the wrong WHSMemberUID just because someone want to keep a certain member number, that'll screw up the other union
- Mod: Adweb: commit missing designer file
- Add: DG-5561: New implementations for golf tourism filter control.
- Fix: Adweb: build: regen whsclient.g.cs
- Fix: Live DG-5571 TabMember History nullable issue - Check for null and assign where applicable Note: Email ID are null because they're sent via Bulk Email. If its not individualised email we don't have email ID
- Mod: Adweb: update merge code so that WHSAPI respects the merge direction we want.
- Mod: WHSAPI: can now choose the direction you want to merge people in. This ensures that the correct WHSMemberUID is always retained.
- Fix: Org: Build
- Mod: ClubCMS DG-5544 Check feature flag if MemberCanUpdateEmail then the form will not be disabled else it would be by default its false
- Mod: ClubCMS ENG DG-5546 Looks for feature flag MemberCanEditDOB -> ENG by default is false and disables form Others is true by default
- Mod: WHSAPI: pcc calc now uses stringbuilder to avoid ludicrously large string allocations when processing a lot of PCCs in one go
- Fix: ISVAPI: Build
- MOD: ClubCMS: Add Feedback form for Resource Hub details page
- Mod: Core: delete memberRepo
- Fix: UnionAPI: Build
- Fix: API: Build
- Fix: ClubCMS: Build
- Fix: ClubCMS: Build
- Fix: Adweb: Build
- Mod: Live: load score counts from WHSAPI where applicable
- Fix: Live: Build
- Mod: Shared: remove obsolete method from Marker.cs
- Fix: Build after prev refactor commit
- Mod: Core: [Breaking] refactor: delete cmemberRepo and nonAffiliateRepo in the quest to purge all the *Repo classes. will go through the other builds and fix them.
- Add: Tieke swipecard format.
- Mod: Adweb session length increased to 36 hours.
- Mod: Core: EmulatedWHSClient supports score count now
- Fix: Build this time for real
- Fix: Build
- MOD: ClubCMS: Fix possible glitch on Resource up/down vote
- Add: WHSAPI: score count endpoint swagger.g.json
- Mod: WHSAPI: add score count endpoint... yeah, it's sad. Moved some score tests around into better logical groups
- Add: AdWeb DG-5503 - Clicking a score ID from EditMember page now redirects to 'ViewScore' showing the hole by hole score with that ID.
- MOD: ClubCMS: Resource Hub added a feature where admin can set Related Resources for each resource
- Add: DG-5503 ScoreCard view Hole By Hole Score Bonus points for viewing score card to see hole by hole score
- Mod: ClubCMS: removed extra space
- Mod: ClubCMS: England Golf website: header style 2 default svg on mobile
- Mod: sql: wa_TBSearchByClubDayV2_Search adding poor man's tbtimeslot partitioning to save heaps of reads
- Mod: ClubCMS: England Golf website: header style 2 default svg
- Mod: Live: CompetitionVsGeneralScores report dates are now inclusive of the end date, not exclusive. #5004723
- Fix: Account activity: Distinguish loyalty earned transactions from the actual account charge for Vend sales. #48039
- Fix: Teebooking: [DG-5473] FAQ Payment link in the unconfirmed booking email is non-existent.
- MOD: ClubCMS: Content tiles make not clickable if Text and Url is empty
- Mod: Clubcms: testing tooltips on signup page to see if I can stop the user being scrolled to the top of the page when they are clicked, but still have them show on ipad when tapped.
- Mod: Clubcms: testing tooltips on signup page to see if I can stop the user being scrolled to the top of the page when they are clicked, but still have them show on ipad when tapped.
- Mod: ORG-GBI DG-5499 [9H competition report] - Change wording in report column from 'Tied' to 'Placement' - Now showing all placement numbers and where tied it will prepend T - Change "-- All --" to only appear for WAL and not ENG as ENG is too big MISC - Remove testing data from commit
- Fix: Org: Levies export to Xero wasn't working (since upgrade to new AccountingSystem interface)
- Mod: ClubCMS: England Golf website: header style 1 css updates
- Fix: #47601 Double up of result for member in report Stop the deleted passport from being pulled into the report during join [Line 96]
- Fix: Fix: Adweb: heavy blocking caused by scorecard search hacky fix
- Fix: Adweb: heavy blocking caused by scorecard search hacky fix
- Fix: WHSAPI: hopefully an end to union marker data getting out of sync with WHS marker data (i.e. angry reds)
- Mod: ClubCMS: England Golf website: header style 2 css updates
- Fix: Live: score listing showing extra 9h parent scores on initial load (so once every hour) #5004813
- Add: ORG-GBI DG-5499 [9H competition report] Forgot to commit the updated csproj file... oops (face palm)
- Mod: ORG-GBI DG-5499 [9H competition report] Fix: --All -- option wasn't working and it now does Mod List Both: - Report now includes both gender and isn't separate - Header is now added to show dates between which scores are included EG: - Shows where Ties are indicating rank T1, T2 etc. - Changed the name to "9 Hold Challenge" WAL: - Changed name to "R&A 9 Hole Qualifier - Pulling in all scores [General play and comp] - Added wording at bottom of report per request
- Fix: DG-5574 #48014 Fix where changing date with calendar wasn't working
- Fix: Adweb: Wrong url for slicer report check.
- Fix: Live: composite marker control loads selected marker correctly in comp setup. rename excludeHomeCourses to isForCompositeMarkerControl, which is a bit nasty but less confusing than before
- FIX: ClubCMS: Show CTA only when there's a CTA text
- Add: Adweb: slicer-readonly-xx group to allow NZ support to view the slicer report.
- FIX: ClubCMS: Fix RTE cta appearing at the top of the home page for Ireland, it should not have that instead use the CTA button
- FIX: ClubCMS: Not updating the correct Type or Topic strip selection
- Fix: Live: gender filtered correctly for when composite marker control fetches regular markers (for away clubs)
- Mod: DG-5368 DG-5572 - Changed to only hiding "Move Booking" from paid online. - If there is a non-paidonline member grouped in a ticket the "Move Booking" will only take the non-paidonline member ignoring the "paid online" which effectively disband the group upon moving.
- Reverse Merged revision(s) 51372 from Trunk/Shared/sql/3939 SLOW - history schema and enabling temporal tables for analytics.sql: Mod: sql scripts: temporal table new columns for score and scorecard split into separate batches to reduce memory overhead ........
- FIX: ClubCMS: Resource Hub not saving strips when saved
- Mod: sql: feeble attempt to stop wa_TBSearchByClubDayV2_Search_OneClub getting crappy plans seemingly at random
- Fix: DG-5368 Fix where moving one player showing prompt to move more than 1 player
- Mod: sql scripts: temporal table new columns for score and scorecard split into separate batches to reduce memory overhead
- Mod: Changed away from STRING_SPLIT to use IN () because we're seeing really weird occasional query lockups using the former.
- Mod: Slapped our favourite option on a query that suspiciously doesn't return when we run it.  Sometimes.
- Fix: My previous mod was borked as it turns out.  This one a) compiles and b) passes unit tests.
- Fix: WHSAPI implicit conversion caused high reads on a score intent query.
- Fix: DG-5368 Various UI fixes - Aligned items when there is no tag involved - Changed dialog width so the user can see both the party being move or the single player - Fixed move player banner from appearing on load when empty - Fixed move player banner on load from a refresh when the 'move booking' button has not been selected - Fixed TeeSheet state to revert back to normal after moving
- Updated: DG-5489: Completed all section UIs layout.
- Mod: API: England: Stop members from updating their DOB in the app.
- Mod: ClubCMS: hero-swiperjs: apply mods to allow a shorter hero control (EG hero style 2)
- Fix: EmulatedWHSClient now adjusts how many counting scores you have based on your total number of scores 😎
- MOD: Club CMS: Added breadcrumb for Resource Hub
- *** DFH CODE REVIEWED TO HERE *** Fix: Live/ClubCMS/API: non-whs scores no longer showing up where they don't belong
- Fix: EmulatedWHSClient BUG: use scores with lowest-ish HD as counting scores, rather than the 8 most recently played
- Fix: Datacache: accidental commit causing lock to be held for many years.
- Mod: HistoryExportService: minor mods to invalid temporal table exception handling.
- Mod: Live: minor code style changes
- Mod: Core.tests: ensure we mock logging dependencies do nothing in the unit tests escapes to elasticsearch/vortex
- Mod: Core: ElasticSearchLogger respects EchoToConsole properly
- Mod: HistoryExportService: add logging and correct datetimeoffset handling when writing to parquet
- MOD: ClubCMS: FileManager sidebar make it scrollable
- Mod: sql: rename temporal table columns to ValidFromUTC and ValidToUTC for clarity and so we can distinguish what is and isnt UTC when populating the history export parquet file
- Mod: Core.Tests: more mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
-  - Update: DG-5363: Approach accuracy and Greens in regulation details implementations.
- Mod: Core.tests: dashluiewlsehfdkljshfdkls
- Mod: Kounta Sync: Added debug logs (sent to Vortex) to help us diagnose performance issues during sync. [DG-5256]
- Mod: Core.tests: dashluiewlsehfdkljshfdkls
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- MOD: Live: Update Live to use CKEditor for Bulk Email V2, added FileManager to Live project for S3 files
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Fix: Emulated Client being too accurate with Handicap index having 2 decimal places
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: DG-5371 Required tables to send registration and payment capture details using the new SystemEmail
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: ClubCMS DG-5371 - Change the underlaying email body data building - Change the old email sending to using the new SystemEmail
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod/Fix: My Golf Signup: when showNewsLetterSignup is disabled / false, don't save anything in the EmailUnsubscribed table.
- Mod: Org DG-5365 Add CheckBox Competition.HasGroup Check box added to enable and disable Competition.HasGroup so that we don't have to do it in the back end
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Fix: HistoryExportService: Accidentally sending parquet files to S3 data to dg-nz-dev-ingestion/DMS/dbo//{tablename} instead of dg-nz-dev-ingestion/DMS/dbo/{tablename}
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- MOD: ClubCMS: Resource Hub change on sorting and styles changes, added a property to display aspect ration for images
- Mod: sql: turn on historical data cleanup for temporal tables https://sqlrelease.com/cleanup-historical-data-in-temporal-table-using-retention-policy
- Mod: add ANOTHER new column to ALL the temporal tables! Hopefully this solves the multiple-updates-in-one-transaction problem of identifying change order.
- Mod: ClubCMS: England Golf menu style updates
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Reverse Merged revision(s) 51255 from Trunk/Shared/sql: (moving to new file) Mod: add ANOTHER new column to ALL the temporal tables! Hopefully this solves the multiple-updates-in-one-transaction problem of identifying change order. ........
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: i give up
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: ClubCMS DG-5371 Registration confirmation email using SystemEmail - Changed the static email sender to user the new SystemEmail so we have control of look and feel and not hard coded
- Mod: Live/ScheduldTask DG-5371 Send Payment capture email using SystemEmail - Changed the static email sender to user the new SystemEmail so we have control of look and feel and not hard coded
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more mods try get jenkins to ssh into svn from DatabaseBuilder
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Fix: Build
- Mod: HistoryExportService: upload finished parquet files to S3
- Mod: Core.Tests: undo temp mod to try debug jenkins unit tests
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Add: DG-5363: Added new functionality to club filtering with mock data.
- Mod: Core.Tests: make sure ckeditorplaceholder contains the values we need for ScoreIntentFollowupTests.
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: ClubCMS: England Golf website: admin css updates
- Mod: ClubCMS: England Golf website: modify the hero-swiperjs control to accommodate EG's hero requirements
- Mod: Core.Tests: more temp mods to try debug jenkins unit tests
- Mod: HistoryExportService: comment some exception handling temporarily so I can debug jenkins unit tests
- Mod: HistoryExportservice: add <RuntimeIdentifier>win10-x64</RuntimeIdentifier> and whitespace changes
- Fix: SSO: Login error if viewmodel data is lost when completing password reset #5004749
- Fix: HistoryExportService externs not added properly
- Mod: Core: add ability to get current DB time (UTC)
- Add: HistoryExportService deploy extern
- Add: HistoryExportService deploy folder
- Add: DotGolf.HistoryExportService
- Mod: ClubCMS: Stats: Retrieve players stats by PassportId so we don't have to join against Score table (for performance reasons). Add: SQL: Add PassportId column to ScoreHoleStat table.
- Mod: Reverse Proxy: added S,W,1,1,futuresmw.co.nz
- Mod: ClubCMS: bindings.list: added www.futuresmw.co.nz and futuresmw.co.nz
- Mod: Live: Rounds Played By Date Report now clarifies that the "To" date is exclusive so clubs don't think that a row is missing
- Mod: add ANOTHER new column to ALL the temporal tables! Hopefully this solves the multiple-updates-in-one-transaction problem of identifying change order.
- Fix: Kiwi Golf Club ClubID needed to be included in the same places as Flexiclub; this is to avoid null errors when slicing - they have the same deal as Flexiclub (per Grace)
- MOD: ClubCMS: Added Podcast Resource Type, implement related resources listing page and fix proper filtering
- Mod: Core.Tests: TestBase.GetServiceProvider should be internal
- Fix: API: DigitalScorecard: Scores not eligible for handicapping are showing as pending verification (by the attester) in the app.
- Mod: Core: regen WHSClient.g.cs
- Mod: Core.Tests: refactor so it's easier to add mock dependencies inside individual tests
- Fix: API: DigitalScorecard: Competition scores not eligible for handicapping are reflected against the member's scoring history. #47708
- Mod: DG-5363: Finalise styling in driving accuracy section.
- Mod: Remove old commented code inclusions.
- Fix: Remove old code extension inclusion.
- Fix: DG-5363: Sql query format changes.
- Fix: Live: accidental commit in: Kounta POS now sends expection ID to client so support can actually view the error
- Mod: DG-5363: Un-version viewmodel.js / .map files.
- Fix: Live: Kounta POS now sends expection ID to client so support can actually view the error
- Add: DG-5363: Driving Accuracy section layout added.
- Mod: Live DG-5368 Move unpaid Teebooking to a different day Only the booking that is not readonly and has not been paid either normally or online will have this button shown
- Mod: BookingService.Tests: remove duplicate test data thats already in Core
- Mod: EmailGenerator: refactor of dependency injection to reduce copy-paste slightly, replace local dg/golfnz images with ones uploaded to S3
- *** DFH CODE REVIEWED TO HERE *** Add: sql: temporal table coolness on: Association Category Club Cmember Country Course Member NZCRData Province Region Score Scorecard
- MOD: ClubCMS: Resource hub fix listing page and added progressive pagination
- MOD: ClubCMS: Resource hub remove anchor id property
- Mod: ClubCMS: admin-hero-swiperjs/view.html: upload buttons: just replaced bootstrap utility class "badge" with "btn"
- Mod: ScoreIntent Followup: retry score post failures after one day instead of two, so potential score post bugs can be resolved faster if we see a problem.
- Mod: ScoreIntent Followup: don't sent hole scores higher than 63 to WHSAPI because it won't take them.
- Mod: WHSAPI: allow hole by hole scores up to 62 (david was hoping we'd have the option of compressing hole scores into 5 bits of data, but seems that people like to submit hole scores higher than 30 and it's painful for WHS to be throwing the scores away for that reason, so he's kindly bit the bullet and agreed we up it to 6 bits (62 gross values, 0 = pickup, 63 = not attempted ))
- Added: DG-5363: New resource files for My-Stats functionality.
- Added: DG-5363: Initial file commits for My Stats functionality.
- Fix: Remove extra string from query.
- FIX: Live: Cute Uploader failing using GetTemplatePath()
- Fix: POS: hack to remove undefined scorecards from displayScorecards which there of 10 of at north shore for some raisin
- Fix: API: /load-course-info endpoint crashes due to incorrect hole number passed to Marker.GetHolesPlayInOrder() - Exception : ""Hole 1 not found on this marker (Men Blue B9 9H Par 36)"
- Mod: sql: split ClubFee* query into temp table and filter on limit id, uses much less CPUses
- MOD: ClubCMS: Change to double quote for OG tags
- Mod: ClubCMS: England Golf menu: code clean up
- Mod: ClubCMS: England Golf menu: use UrlOverride as the href value for the dropdown menu item if it is set; otherwise, use PagePath
- MOD: ClubCMS: Update social links
- Mod: ClubCMS: England Golf menu css updates
- Mod: Sql: only check category MaxNoOfRounds in wa_TBCalculatePlayerGreenfee if the category the member's in actually has a MaxNoOfRounds set (PEBKAC on proc name)
- Mod: Sql: only check category MaxNoOfRounds in wa_TBCalculatePlayerGreenfee if the category the member's in actually has a MaxNoOfRounds set
- MOD: ClubCMS: Resource hub slider css update
- Fix: EmulatedWHSClient didn't work when inside a SqlTransaction (only a problem because of Marcus's strong feelings against our SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED)
- Mod: sql: re-introduce mintimeslotid filter to teebooking single club query because we end up looking at the tbblocktimeslot index on tbtimeslot and the mintimeslotid helps with that
- Add: Index to speed up PassportGUID lookups.
- FIX: Bulk Email V2: Replacing Cute Uploader with the basic File Upload
- Mod: clubcms: option recompile on handicap ranking query because of all the silly nonsargable parameter use - it cuts the reads and cpu by 90% when filtering by club
- Fix: #47720 Edge case if we have multiple RSScore records linked to a Score, combined with a non-affiliate playing in a competition.  The fix done in #4184 did not work for non-affiliates, unintentionally eliminating good scores and corrupting team results.  Corruption was only seen in multi-round results, leading to the 1+1=3 problem on the results report (individual round results appeared fine because the same elimination code isn't in use in the GetScoresRelevantToResults query there).
- Mod: Background Tasks will now load tasks from DotGolf.Shared too so we can do frameworky things.
- MOD: ClubCMS: Resource Hub tiles drop shadow
- MOD: ClubCMS: Added Video and download icon on Resource Hub tiles
- Revert Mod: Live: Don't show entered-by 'auto-penalty' if a score has been changed to no longer be a penalty
- Mod: Live: Don't show entered-by 'auto-penalty' if a score has been changed to no longer be a penalty
- Mod: Reverse Proxy: added S,W,1,1,futuressouthland.co.nz
- Mod: ClubCMS: bindings.list: added futuressouthland.co.nz, www.futuressouthland.co.nz, www.futureshawkesbay.co.nz
- Mod: ClubCMS: Menu - add the menu name as class name to the dropdown menu group (so it could be custom styled when needed) - use UrlOverride as the href value for the dropdown menu item if it is set; otherwise, use PagePath - style updates
- MOD: ClubCMS: Remove vimeo script
- MOD: ClubCMS: Added Video for Resource Details page
- Fix: ClubCMS Public: If a member doesn't get sent to whs for some reason, send them when trying to get their scores (seems to happen to new flexiclub members sometimes...) #47631
- Fix: API: If a member doesn't get sent to whs for some reason, send them when trying to get their scores (seems to happen to new flexiclub members sometimes...) #47631
- Mod: ClubCMS: England Golf menu css updates
- Mod: ClubCMS: England Golf: update the icon-burger svg (made it a bit wider and taller)
- Fix: ISVAPI: Build after rev 51176
- Fix: Live: Better implementation of: If a member doesn't get sent to whs for some reason, send them when trying to get their handicap (seems to happen to new flexiclub members sometimes...) #47631 missed a file
- Fix: Live: Better implementation of: If a member doesn't get sent to whs for some reason, send them when trying to get their handicap (seems to happen to new flexiclub members sometimes...) #47631
- MOD: ClubCMS: Added Author for Resource Hub details page and CMS
- Fix: Live: If a member doesn't get sent to whs for some reason, send them when trying to get their handicap (seems to happen to new flexiclub members sometimes...) #47631
- Mod: ClubCMS: England Golf menu css updates
- Mod: Core: change Data.member.gender to use the gender enum instead of string
- Mod: ClubCMS: added S,-,1,1,futuresmanawatu.cw.golf.co.nz and S,-,1,1,futuressouthland.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added futuresmanawatu.cw.golf.co.nz and futuressouthland.cw.golf.co.nz
- Add: ClubCMS: England Golf website css
- Add: ClubCMS: England Golf template and menu
- MOD: ClubCMS: Implement Related Resources for Resource Detail page
- Fix the time out issue for Dev when testing of modifying and saving of score cards.
- Add: Course quick select at the top of SearchSlots for multi-course clubs like RAGGC.
- Fix: Adweb: bool flag error
- Mod: Org: Hide redundant member category chart thing for EG #5004499
- MOD: BulkEmail: Extend Golf Club Contacts to DotGolf login
- Fix: Bulk Email: When creating mailing lists and the create failed, the UI tells the user all is well.  Now we'll tell them there was a problem (poorly - but it's better than before)
- Fix: BulkEmail: WebUser.ClubId was 0 if you were logged in as an Association, causing a host of problems, mostly FK errors when inserting into tables that allow a nullable ClubId.
- Add: Subscribe to DotGolf newsletter widget added to Help section of DotGolf Live.
- Mod: UnionAPI: Minor adjustment to the pre-release metadata endpoint.
- MODD: ClubCMS: Implement Resource Hub detail mobile nav toggle
- MOD: ClubCMS: Added Anchor and External Links to Resource Hub admin and details page
- Fix: Xero: Reduce the amount API calls to the bank transactions endpoint by setting AXAccountTypeClub.AccXeroLastModified to the maximum of a) last transaction (as it was before) b) 1 day ago, whichever is latest. #47360
- Revert mod 51150.
- MOD: ClubCMS: Added ExternalLinks and AnchorLinks into CWResource table
- Fix: Xero sync now fetches bank transactions that are created/modified 10 minutes before the last sync job run.
- Add: API: /load-course-info endpoint now includes local rules in the response.
- MOD: ClubCMS: Resource hub margin adjustments
- Fix: Live:  score listing for member resigned from all clubs was showing no scores even if the person has scores before. #47671
- Fix: ClubCMS could not detect DotGolf's IP behind the reverse proxy, so we couldn't choose a club website to view in dev mode.
- MOD: ClubCMS: Implement search on Resource Hub
- Mod: Require anyone talking to Adweb to be authenticated properly.  Old hacky Login.aspx removed.
- Mod: ClubCMS: minor extra padding around member search for resolutions over 1200 so it doesnt hug edge of screen (Chris Cottrell)
- Mod: Live: GP score report gender filter, GP score report now includes secondaries
- Fix: Live: error when home club visits score listing of resigned player
- MOD: ClubCMS: Resource hub social share icons change and details page style changes
- Fix: RunPCC: we were calculating mean handicap index of all scores we'd fetch for pcc in the past 28 days that did not already have pcc calc'd.
- Mod: Live: hide R&A 9h report for clubs so EG can desk check it
- Mod: Live: hide R&A 9h report for clubs so EG can desk check it
- Mod: Better sign-in experience - nexturl will now work so you'll be taken back to where you were before the auth process.
- Fix: Live/ClubCMS/API: score listing cursor not responding correctly to score cache being expired. #47608
- Mod: Soft cap/hard cap job now generates csv files for both genders #5004468
- Fix: Live: incorrect JS syntax in composite marker select
- MOD: Live: Range booking to include settings before generate sheet action
- FIX: Live: Fix range booking date slider after generate/create sheet and booking a future date
- Fix: ConfigurationProfile: StaticContentBucketName for NZ stage now points to the correct S3 bucket.
- Fix: API: Build
- Fix: Shared: Build
- Add: tests for CRMAPI double home club bug
- Mod: Core: Code Comments
- Fix: Core: Redis caching works in parallel now #47360
- Add: Experimental code to enable Cognito logins to Adweb.
- Mod: Shared: futile comment on DataCache.cs about load balancing.
- Fix: CRMAPI: multiple home club bug
- Fix: Live: 🎶 Bug as old as time 🎶 resigning someone would nuke their DOB if they didnt have one at that club, even if they still had other live club memberships with a DOB.
- MOD: Live: Fix range booking date slider not showing all the dates
- Mod: BookingService to .net6
- Fix: ScoreIntentFromAppFollowup: better exception handling when applying penalty scores until i fix the issue:  Object reference not set to an instance of an object.    at DotGolf.Core.Scorecards.DigitalScorecards.GetDefaultStartTeeForClub(Int32 clubId, Marker marker) in D:\Jenkins\England\UKProd ScheduledTasks.EN\workspace\DotGolf.Core\Scorecards\DigitalScorecards.cs:line 60
- MOD: ClubCMS: Make tiles clickable
- Fix: ScoreIntentFromAppFollowup: try send score to whs even if the marker is deleted, better than crashing
- MOD: ClubCMS: Implement Resource Hub filtering on landing page
- Fix: Live: NZGASubcategory combo (e.g. in advanced member search) was not showing
- *** DFH CODE REVIEWED TO HERE *** Mod: EG Medal Report now works for clubs that play at other clubs' courses #5004290
- Fix: Build: EmulatedWHSClient.cs broke after previous rev
- Mod: WHSAPI: get pcc for course endpoint.
- FIX: Live: Added custom Cute UploaderSqlServerProvider.cs
- FIX: ClubCMS: CKEditor allowed content to disallow styles from P and Span exclude font tag
- Mod/Fix: ClubCMS: Golf Ireland CSS: adjust the menu css for smaller screens. Ticket #5004416
- FIX: BulkEmail: Tournament's sub filter not working due to updated list didn't trigger the change
- Fix: ANOTHER race condition in DataCache.Query() - hopefully this is it!
- FIX: ClubCMS: Tee Time Widget is not showing on the Competition page of GolfNZ
- Mod: BulkEmail: removed commented code
- Mod: Core: Remove unused code and preload the most useful ThirdPartyMetaData fields
- Add: Live/Org DG-5163 - [9 Hole competition report] for England and Wales Union can select by club and Clubs can only see their club data for the 9 hole competition report
- Mod: Live: Show international scores in score listing to avoid having to sync them between unions. [DG-2828]
- Mod/Fix: ClubCMS authentication: only auto authenticate for union / association websites. The modified code was originally added so that the user is able to view the member benefit page from the mobile app's member benefits link.
- Fix: DG-5267->TeeBookingInvoice: Exclude deleted and refunded booking on generating an invoice.
- Fix: BackgroundTasks: await Task.Cancel() to avoid compiler warning.
- Fix: Race condition in DataCache where the data could end up being loaded from the getter twice.  Caused TestThreadBlocking unit test to fail in rare instances as below.
- Mod: Use localhost Redis for unit tests.
- Fix: Live: expire xero accounts cache correctly
- Mod: Missed a Redis host override.
- Add: Dev PC build script: Install redis on local for unit tests.
- Reverse Merged revision(s) 51056 from Trunk/DotGolf.WHSAPI: Mod: WHSAPI: support starting paging from before a certain date. this helps us cache someone's most recent scores for their score listing, and fetching for scores when we need to without trying to fetch someone's entire history again just because we need page 5 and only have 4 pages of data loaded. ........
- Mod: WHSAPI: support starting paging from before a certain date. this helps us cache someone's most recent scores for their score listing, and fetching for scores when we need to without trying to fetch someone's entire history again just because we need page 5 and only have 4 pages of data loaded.
- Fix: Treat preflight OPTIONS call different to a GET (thanks Chrome for doing this with localhost now)
- MOD: Live: Switched File Attachment file uploader from Cute to asp File Upload
- Mod: Microsoft.NET.Test.Sdk to v17
- Mod: Suppress CS1998 because we can't get rid of the async stuff in EmulatedWHSClient because of the interface it has to implement.
- Mod: Microsoft.NET.Test.Sdk to v17
- Mod: Bumped VS version in solution file.
- Fix: Upgraded Microsoft.NET.Test.Sdk in DotGolf.Core.Tests to v17.0.0 to avoid multiple versions of TestHost.exe being deployed, causing an error when building with .Net6
- Mod: Org: Tournaments menu: PGA's Trainee OOM is not displaying under the Clubhouse menu. (Side note: it used to be a main item in the menu before the major nav updates). I've moved it under the Tournaments menu as it makes more sense to have it there rather than the Clubhouse menu.
- Mod: Try to fix Build1 errors by upgrading Microsoft.AspNetCore.TestHost
- Fix: Live: Competition setup error for Remuera #47504
- Mod: DotGolf.Core also targets net6.0 so that bookingservice can reference it (too lazy to figure out why we can't reference a net5 assembly from net6, and net5 is not LTS)
- Mod: Upgraded BookingService to net6.0 now that Build1 is unhappy with building .Net5
- MOD: Live: Fix Build error due to shared service
- Mod: Upgraded BookingService to net6.0 now that Build1 is unhappy with building .Net5
- Fix: Live: internal setter screwed up redis gzip caching
- Mod: WHSAPI: unit tests to ensure Brief.Score does not return TimeZoneId as specified by docstring
- Mod: Core: enable nullable reference types in file
- Fix: Live: missing WCREVs for control css in comp setup causing files not to be reloaded when publish happens
- Mod: Live: MemberDetailsAndCategory.json:
- MOD: Live: Improved date control (add percentage booked / sheet available indicators)
- Add: Bindings file for Analytics Dev.
- Mod: Live: Multiclub support for mixed gender comps #47391
- Fix: Public2012 build.
- Mod: Live: DG-5327 Feature request fixes - Added 'Request a feature' button that redirects to 'JumpToHelp.aspx' - Added indicators so users know that they've clicked on vote and waiting for it to finish -- Disable click and ignore if there is more than 1 clicks for the vote and unvote.
- Mod: ScoreIntentFollowup: delete scorecard when penalty score created
- Fix: Live: Handicap change report works in excel correctly #5004561
- Fix: Live: DG-5327 - Moved TLS settings to Global.asax.cs for FreshDesk calls.
- Add: Explicit check for SQL2019 when running unit tests using LocalDB.
- Fix: Core: copypaste "bug" in ToHumanString that caused the stringbuilder to be initialised with capacity of (int)'{' for no reason because it uses the wrong constructor than was originally intended in SO.
- Fix: Live: Load balancing bug when fetching accounts from Xero #47360
- Add: BookingService: API endpoint to return number of free/used slots per sheet for a date range.
- Mod: Live: forgot to include in the previous commit (Rev 51013)
- Mod: Live: help text update
- Mod: Live: #46934: Add "Enable Cancel Membership Feature" in the DG-only section of the Invoice Settings
- Fix: ISVAPI: deleted scores not deleting from handicap record
- *** DFH CODE REVIEWED TO HERE *** Mod: GI card orders for pre-2021 should not be billed.
- Fix: Org: build
- Add: Core: Country BusinessLogic+PocoTable
- Mod: Try "Integrated Security=true" to see if that appeases Jenkins.
- Mod: Live: Reports: GeneralPlayScores.sql: add Email address column as requested by EG
- Mod: Use localdb for unit tests rather than dev1.internal.
- Fix: Oops, binding error.
- Add: New dev wyp file so that wyUpdate will work in new dev environment.
- Add: Bindings for ConnectorAPI in dev.
- Fix: Good practice to drop temp tables explicitly.
- Mod: RAGGC courses are now abbreviated to something useful (Gra/Tam, Mid/Gra, Tam/Mid) so they can potentially use the tee sheet on Monday.
- Mod: Better error messages for EmulatedWHSClient.
- Mod: EmulatedWHSClient: Removed more NotImplementedExceptions.
- Fix: Actually compiles now too.
- Mod: EmulatedWHSClient course post no longer throws NotImplementedException (need this for Org course changes testing)
- Mod: ClubCMS: golfireland.css: just replaced a css selector
- Unbreak the build
- Test breaking the build
- Unbreak the build
- Mod: DataCache: add lock when we're done reloading our data key
- Test breaking the build
- Add: DG-5267-Tee Booking receipt emails from Adweb: Provide automation functionality for invoice preview and sending email to player owner in booking search adweb page.
- Fix: Adweb: build
- Fix: ClubCMS: build
- Fix: Public 2012: build
- Mod: Live: better error message when trying to fetch score listing for someone from Scotland
- Mod: Reverse Proxy NZ: added S,W,1,1,futureshawkesbay.co.nz
- Mod: ClubCMS: bindings.list: add futureshawkesbay.co.nz
- Mod: ActivityTracker nz dev in its new location.
- Mod: Emulated WHSClient to avoid pointing our Development environment at the real WHSAPI (or the web7 one which is soon going to be defunct).
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Updates on Resource Hub, implement multi Topics for each Resource, refactor business logic codes to move to ClubCMS project
- Add: WHSAPI tests: test for thing that causes unionland markers to be out of sync with WHS (a.k.a. "angry reds")
- Add: Binding for ActivityTracker.
- Add: Binging for ActivityTracker.
- Fix: Build error casued by renamed CWResource columns.
- Mod: Autogenerated poco classes.
- Mod: Core tests: reinstate junk tables because i broke the db build
- Mod: Org: typo in course change page
- Fix: ClubVersion setting removed and some projects were still using it.
- Mod: Moved some dev sites to the real deal
- Mod: Live: when adding away scores for Scottish people, any API errors now show to the user if the score post webhook fails
- Add: cw.nz.dev.golf.co.nz for clubcms in dev to reverse proxy.
- Fix: Live: Comp vs General scores report crashing for someone who had a score that was not synced to EG database #5004531
- Add: bindings for UnionAPI
- Add: bindings for Org
- Add: bindings for ISVAPI
- Add: bindings for Images
- Add: bindings for ClubCMS
- Add: bindings for BulkEmail
- Add: bindings for API
- Add: binding for adweb dev nz.
- Fix: Dev sso url typo.
- Oops, accidentally committed stuff.
- Mod: New dev URLs for Live and SSO.
- Add: bindings for live dev
- Fix: Bindings for SSO missing nz.
- Fix: Clubcms: navbar/loginbar was trying to construct a member using a nonaffiliateID
- Fix: Live: Scorelisting By Day report: day-of-week score counts not accounting for deleted scores
- Fix: okay, fine, dev it is
- Fix: incorrect bindings file name
- Add: binding for dev sso
- Fix: Reverse proxy is across multiple countries, so removed NZ from the name.
- Fix: Reverse proxy is across multiple countries, so removed NZ from the name.
- Mod: Reverseproxy bootstrap.pl for nzdev.
- Fix: ISVAPI: region/country wasn't working for new away home club mod
- Mod: ClubCMS: Golf Ireland website menu:
- Mod: sql: scripting MasterAssociationIds for unionAPI so i don't have to keep updating them into each DB manually
- Add: nzdev environment credentials and sites.list for reverse proxy.
- Fix: UnionAPI: MarkerUID should be nullable because we don't want to send it to 3rd parties
- Mod: Core Tests: init DB mdf size to 80MB since it ends up at 60MB after we've run all our scripts
- MOD: ClubCMS: Updates on Resource Hub details page, added multiple downloads and videos in CMS, added Show Banner and Filter for the Resource Hub control so it can be reused to other pages, added share links UI
- Mod: Core Tests: remove some junk tables from dbcreate
- Mod: Redirect all clients from Edge to Live now that the setting is no more.
- Mod: Core.Tests: insert more scripted data for delete score test
- Mod: Autogenerated poco classes.
- Mod: Removed ClubVersion setting; Edge is no more; all clubs connect to live.golf.co.nz now.
- Mod: Core: EzPoco.tt now ignores all tables starting with an underscore
- Mod: ISVAPI: Allow ISVs (Intelligent Golf) to fetch home club for people are a secondary member at their club, but a home member in another union. #5003725/#5004387
- Mod: ISVAPI Tests: Update tests to work with new CreateDB schema
- Mod: Core.Tests: insert wellknown associations into scripted data for country proxy tests
- Mod: Core.Tests: insert more scripted data for scoreintentfollowup tests
- Mod: Core.Tests: insert more scripted data for scoreintentfollowup tests
- Mod: Autogenerated poco classes.
- Mod: Core.Tests: Add scripted data to unit test setup.
- Fix: API: StatsController: Get round stats - return empty response object instead of null.
- FIX: ClubCMS: Ticket 47150 - RE: Broken Links on Golf.co.nz, do a workaround redirects to clubs/1000/uploads-legacy/ as discussed with David
- Add: HttpResponse StatusCode added to TrackerLog; this is a very useful property that is not currently being logged.
- Mod: API: StatsController: Use RoundStats class from Shared to retrieve and calculate stats for a given round. Mod: Shared: RoundStats: Fix indentation in the SQL statement. Mod: Shared: RoundStats: Removed try-catch - we will let the calling code to handle the exception instead.
- Mod: Disabled old public2012 sync to s3 task.
- FIX: ClubCMS: Ticket 47150 - RE: Broken Links on Golf.co.nz, do a workaround redirects to clubs/1000/uploads-legacy/ as discussed with David
- Add: ISVAPI: another debug endpoint for CRMAPI auth
- Mod: ISVAPI: do  not send 1900-01-01 out of CRMAPI because its messing with their stats
- Mod: Live: no longer update DOB to 1900-01-01 when it's null
- Revert: Mod: ClubCMS: EG asked us to skip validation for igolf members paying by voucher #5004600 (INCORRECT interpretation, reverting)
- Fix: Tee booking start sheet monitor (and live sheet updates) stopped working due to a new ServiceLocator dependency introduced into Member.HomeClub.  This should have worked, but unfortunately the Thread wasn't set up correctly.
- Mod: ISVAPI: Unit test for country code issue when searching across unions
- Fix: Interop country could not be located due to "eng" != "ENG". Fix: Member Quick Search in Live no longer worked for GBI interunion searches because UsesUnionAPIForInterop was not checked.
- Fix: Multi-transaction bookings: Capture Payments didn't calculate the captured amount properly (transaction fees were overcharged on the first transaction, and subsequent transactions were under charged).
- Fix: Org: InterclubTeamMembersDataSource would not work sometimes in fetch-all-member mode. #5004594
- Fix: ScheduledTasks: WHS course sync marker checking updated to use new index so no more clustered index scans on nzcrdata here.
- Add: sql: index to NZCRData for the WHS.Sync.Courses marker sync between unions to avoid clustered index scan on nzcrdata during the insert of a new nzcrdata row
- MOD: ClubCMS: Add Default Category property to zTournaments control to override CW default category
- Fix: Stats: ScoreId column not set after successfully returning a score via the app. Fix: API: Digital Scorecard: /submit-scores endpoint - Mark SubmitScoreRequest.PlayerSignature as required.
- Fix: ClubCMS:  boolean error in rev 50877
- Mod: ClubCMS: EG asked us to skip validation for igolf members paying by voucher #5004600 Mod: ClubCMS: add basic email validation when signing up to sites (EG really wanted this)
- Fix: Missing INSERT statement caused Slicer Import Statements not to work.
- Mod: Hide Feature Requests until we can communicate out to clubs.
- Mod: My Account: [DG-5219] Member Account Activity improvements (filter date range + open/closing dates)
- Fix: Live: Jack's point member counts no longer double-count anyone who gets booked individually within a group booking
- Fix: DG-5161: Null query results fixed.
- Fix: ISVAPI: visitors endpoint errors caused by Core.Poco.FullName removal
- Fix: DG-5161: Validates if there were no score hole stats exist.
- MOD: ClubCMS: Implement Resource up and down vote
- Mod: WHSHookCleanupTask: log message typo
- Fix: Live: DG-5264 #46962 - Possible fix for FreshDesk Api call failing [The underlying connection was closed: An unexpected error occurred on a send]
- Fix: Live: DG-5264 #46962 - Possible fix for FreshDesk Api call failing
- Fix: UnionAPI: errors caused by Core.Poco.FullName removal
- Fix: ISVAPI: errors caused by Core.Poco.FullName removal
- Fix: Live: in Shared, Member.HomeClub now returns a DotGolf.Data.Club, because that's what we cast is too is several places. Need to update all these in one go, too risky to try just before a publish.
- MOD: ClubCMS: Added Resource Hub Detail control
- Mod: DG-5161: Removing [Obsolete] attributes.
- Mod: DG-5161: Backing logic.
- Mod: DG-5161: Previous changes of making RoundStats methods static.
- Mod: Live: update allholesattempted computation for OCS score entry so it's not sent when hole-by-hole is supplied
- Mod: DG-5161: Make RoundStats methods static.
- Fix: Errant GO
- Mod: Live: Score entry for Scottish members in EN Stage [DG-5140]. Still waiting for OCS' dev env to stop crashing
- Fix: Live: DG-5264 #46962 - Add exception catching when fetching specific FreshDesk ticket
- Fix: Nasty hack added to create ExtTicket if it isn't there (which it isn't on NZ2Stage apparently)
- Fix: Live: DG-5264 #46962 - Added some constraints to the dialog so the pop up box doesn't get destroyed on certain size view port - Lighten the background colour in the dialog so text is easier to read. - Show end user a message now when there's no result returned from subject search - Pluralised text for 'Total Vote/Total Votes' - Added dotgolf only column for vote count css so internally we can tell that its only us that can see the data.
- Mod: DG-5161: Hide newly added web stats info & changes ScorecardRepo instance.
- Mod: Live: svn ignore generated js files
- MOD: ClubCMS: ClubCMS - Implement loading of control specific + templace override CSS uniquely to a page header, this will also fix the $WCREV$ not being parsed if the CSS path is inside a CSS using import url
- Fix: ISVAPI was not handling Poco.Club.FullName correctly after i removed the FullName property from it while purging Dapper.Contrib code
- Mod: DG-5161: Changes to db connections.
- Fix: Core: bug in cmembers because CMemberUID was missing and PocoTable needs it
- Mod: Core: delete hacky GetParentAssociationUID method switching on configprofile. Need to dependencyinject configprofile for the test webservers to have the correct one.
- Fix: API: Build
- Fix: ISVAPI: Build
- Mod: DG-5161: Passes ConnBuilder to shared RoundStats.cs file.
- Mod: Core: refactor datasharingcountry to distinguish between UnionAPI countries and ISVAPI countries
- Mod: ClubCMS: GetMyScoreDetails: KLY+Dino Instantiate RoundStats prior to any async/await calls.
- Fix: Live: DG-5264 #46962 Fixed where member tagging box was showing deleted tag so it members are able to be assigned to deleted tags.
- Mod: ReverseProxy: sites.list: added S,-,1,1,futureshawkesbay.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added futureshawkesbay.cw.golf.co.nz
- Mod: ClubCMS: GetMyScoreDetails - Log exception if we encounter issues when retrieving score details.
- Mod: Live: Reports: OnlineSubsTransactions.sql: identify what subscription year (or month) the members are in. DG-5159
- Fix: UnionAPI: build
- Mod: Core: nullability changes to Marker.cs again - issue with .Value was that is would crash on preload. changed it to match the other properties were we want the Data class to be not null.
- Mod: GDPR: England Golf: Hide address/contact information from county users; they do not have data sharing agreements in place with the clubs covering this information.
- Mod: DG-5239>Teebooking ConfirmSlots "X" button: Places back 'x' button on table header booking.
- Mod: Core Tests: fix TestThreadBlocking on Jenkins??
- Fix: UnionAPI: build
- Fix: Core: NZCRData markerUID not populated in unit tests somehow, backing away slowly.
- Add: Trigger to CGTransaction to protect us against the case where a transaction is refunded to a card AND it was already paid out to a club/union (meaning DotGolf would lose money unless the money is clawed back from the merchant)
- Fix: Org: build
- Mod: Emailgenerator: color of a stat arrow corrected to match design
- Add: Live: DG-5087 DG-5084 DG-5083 - designer file oops :(
- Mod: EmailGenerator: dependency injection working properly, added hardcoded statistic tiles
- Fix: ISVAPI: build.
- Fix: ISVAPI: build.
- Fix: UnionAPI: build
- Fix: UnionAPI: build
- Mod: ISVAPI: update JWT package due to security vulnerability
- Mod: Core: remove Dapper.Contrib stuff from Club table
- Mod: Autogenerated poco classes.
- Add: Live: DG-5084 ExtTicketVote table create
- Add: Live: DG-5087 DG-5084 DG-5083 - Added Feature request area under help section - User can vote/unvote for things that is populated in the table pulled from ExtTicket -- user votes are saved in ExtTicketVote - Admin users can see all vote cast by users - Users can see total votes casted by other members on item(s) which they have voted on.
- MOD: ClubCMS: Set color to white on theme-dark when editing blocks
- Fix: rMyAccount: if not a member of NZ Flexiclub, WA Flexi Club, or EN iGolf, set AssignClubId to member's home club
- MOD: ClubCMS: Implement resource listing when user clicks on view all
- Fix: ClubCMS: rEditMemberDetails: make sure authenticated visitors aren't allowed to view the Edit Profile area
- Fix: ClubCMS: rMyAccount: make sure authenticated visitors aren't allowed to view the My Account area.
- Fix: Automated penalty scores not working after publish autofac :(
- Fix: Automated penalty scores not working after publish
- Fix: Core: broke the marker pocotable in rev 50771
- Fix: Live: sometimes people create products in kounta that match our greenfee products, and it screws things up. product sync now handles it.
- Add: Live: hooks so that score entry for scottish players sends score to OCS
- Mod: ReverseProxy: sites.list: added S,-,1,1,northernwairoa.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added northernwairoa.cw.golf.co.nz
- Mod: Autogenerated poco classes.
- Add: WHS Interop column for Score table
- Mod: DG-5161>Web Stats: Added UI display for Fairway & GIR stats on small screen.
- MOD: ClubCMS: Wire up designs on Resource Hub Front end control, added banner image url property
- Mod: DG-1561>Web Stats: Additional round stats for Fairway & GIR accuracies and putting average on players score page.
- Mod: Org: CourseMarkerDataExport enddate #5004572
- Fix: Live: InterclubTeamMembers report not working on adjustments for some reason
- Fix: Automated penalty scores not working after publish
- Fix: Live: Medal report was erroring if a club had two courses with the same name somehow (past/present) #5004532
- Mod: Live: InterclubTeamMembers report now allows searching all members for estimated lowest HI to help pick teams. #5004542
- MOD: Live: Added hover color and make it same color on all entries with the same booking ID
- MOD: Live: Add confirmation for delete multiple range bookings
- FIX: Live: Remove the focus on the search player when doing multiple range bookings
- Fix: -maxcpucount:1 on linux build for bookingservice (to avoid file in use errors)
- Fix: Range booking help: Minor language edits.
- Fix: Range booking settings: Validation on number of bays wasn't working because Type=Integer was missing from validator. Mod: Hide all the other settings when auto-generate is turned off.
- Fix: Range booking settings: End time defaulted to 16:00 instead of 4:00 because the example text says 16:00.
- Mod: Small language changes on Range Booking Settings screen; removed "Allow generate sheet" setting for now (we'll just let them create the sheet always)
- Mod: Removed EntryId from range booking code since we don't return this from the API anymore.
- Add: BookingService: Unit test coverage improved around updating bookings. Fix: Get bookings for passport was returning duplicate booking rows if you have multiple entries on a booking.
- Mod: BookingService: Removed EntryId from Brief.Entry because it's an internal number used by the service.
- Fix: BookingService: When a booking is updated, the API returned an error alleging the EntryNumber already exists.  This was because we were also checking the booking being edited at present.
- *** DFH CODE REVIEWED TO HERE *** Fix: Public2012: build
- Fix: Live/Org: Build
- Fix: API: build, after commit 50729
- Fix: Org: Allow org users to cancel score submission on digital scorecards. #5003242 #5004455
- Mod: Core: Moved IInteropClub and co. into DotGolf.Core. Added CMember to Core.Data and added more stuff to Member to prep for OCS score return hook. Fixed entire world of compile errors in Live from the refactor.
- Mod: Core: Code comment change for precision of language
- Mod: All sites are now load balanced (included live, edge and org)
- MOD: Booking Service added begin and commit tran on creating range booking sheet
- MOD: ClubCMS: Get Phone value
- Mod: Live: MissingBillingCard.json: updated permissions definition (This was previously not displaying using Claire's access; but it's showing using matt's)
- Mod: Live: MissingBillingCard.sql: just added a Club ID condition when querying the Voucher table
- MOD: Live: Remove p text
- Mod: Live: SubscriptionRefundReport.json: updated permissions definition (Claire previously doesn't see the report using her access)
- FIX: ClubCMS: Jira DG-5240 | Get the ClubID correctly
- Cleanup: Got rid of AssociationRepo.cs.
- Mod: Just commit this damn file, it keeps cropping up everywhere.
- Cleanup: Got rid of AssociationProductRepo.  Also cleaned up some dodgy ICache code in Activity Tracker.
- MOD: Live: Implement multiple bookings on Range Booking
- FIX: Booking Service: Added to check if EntryId is not 0, means the existing Entries are just an update to an existing Booking. Kindly verify @david if this is the right fix?
- Fix: Slicer wasn't paying out unattended EFTPOS clubs because of new bank statement format (since Windcave changed their merchant stuff late last year)
- Fix: "Make Changes" button was accidentally hidden from NZ by boolean logic bug in rev 50486.
- Mod: Reverse Proxy: sites.list: added S,W,1,1,greenacresgolfclub.co.nz
- Mod: ClubCMS: bindings.list: added www.greenacresgolfclub.co.nz and greenacresgolfclub.co.nz
- Fix: We want to be able to create bookings with duplicate EntryNumbers, as long as these are on separate timeslots.  So the indexes turned out incorrect, and I've reshuffled these to work and hopefully not cause any performance issues.
- Mod: EmailGenerator: added Preview project
- Fix: API: Teebooking: #47045 Previous payments not returned when you booked at a Purchase/Refund club (e.g. Takapuna GC).
- Revert SVN rev 50696
- Fix: API: Teebooking: Previous payments not returned when you booked at a Purchase/Refund club (e.g. Takapuna GC). #47045
- Fix: EmailGenerator: fix aws profile default and remove non-english language resources from the build.
- Mod: EmailGenerator: added Directory.Build.props, exclude test proj from publish
- Mod: EmailGenerator: change package version to appease packageversionchecker (even though it doesnt matter in Core-only projects)
- Mod: EmailGenerator: Add DotGolf.Core reference and refactor Startup to be less confusing
- Add: DotGolf.EmailGenerator first pass. Need to add DotGolf.Core and add comments to the scaffolding code.
- Fix: Live: DG-5208 #46887 Clubs that does not have 'Non-Playing' as part of their product list were having issues with the combo box not populating. Fixed the offending sql query that pulled this data.
- Fix: Should be lowercase "t" - related to SVN 50684. DGI 5004510
- MOD: Scheduled Tasks: Added RangeBookingAutoGenerateSheetTask to generate Range Booking sheet in advance depending on the settings
- Fix: DGI 5004510 - The verify e-mail link not working when changing email address in MyEG app. The parameter "tag" should be in lowercase as the member signup page is expecting this parameter in lowercase. Fix: NZ: https://www.golf.co.nz/Verify.aspx no longer exists - make use of the verifyUrl.
- MOD: Live: Implement generation of sheet on Live when it's empty, fix Booking service test
- FIX: Bulk Email: 47018 - Omanu - selecting resigned members as Recipients, Fix 0 recipients for resigned members
- MOD: Booking Service: Added Create Sheet API
- Fix: #47005 Prevent duplicate DrawCompetitionRound records from being created if you go Back>Back>Resubmit in your browser.
- MOD: Live: Set back dev url to http://live.nz.dev1.internal.golf.co.nz/
- MOD: Live: Updated Range Booking settings to include Auto Generate and Number of Days
- MOD: Booking Service: Added tests for allowing free text name for bookings
- MOD: Live: Use ev.ctrlKey instead of variable
- Mod: chartjs-lambda: Remove all un-used code.
- Mod: chartjs-lambda: Prepare to remove un-used code.
- MOD: Live: Added Range Booking settings
- Mod: Autogenerated poco classes.
- *** DFH CODE REVIEWED TO HERE *** MOD: ClubCMS: Correct the new column names
- Testing post-commit hook speed
- Testing post-commit hook speed
- MOD: ClubCMS: Allow PassportUID null for free text bookings
- Cleanup: Removed test file.
- Testing build1 post-commit hook.
- FIX: ClubCMS: #46968 Bay of Plenty 5 Course Classic - 5CC not able to edit rContent / Html
- Testing build1 post-commit hook.
- Mod: -maxcpucount:1 for dotnet publish to avoid stupid file locking issues https://github.com/dotnet/sdk/issues/9585
- Mod: BookingService: Try to add a dotnet build in there to see if that helps Jenkins
- Fix: DG-5079 Check-in player if he/she selects the digital scorecard option - Logic should be applicable to all clubs and not just "POS" clubs.
- MOD: Live: Use Ctrl+Enter to apply the free text bookings on Range
- Fix: ClubCMS: Golf Ireland news detail control: revert mod done on Revision 50368. (I think only "Golf NZ" controls were supposed to have been modified then, but this one is a "Golf Ireland" control.)
- Mod: Autogenerated poco classes.
- Add: Live: Ability to add local rules. Mod: Live: Increase text-editor width to 800px.
- Mod/Fix: Live: Reports: SubscriptionRefundReport: display the payment document date first; fix join with TBTransactionRefund (added DPSCompleted=1 condition)
- Mod: Live: SubscriptionRefundReport: filter by Document Date instead of Void Date
- MOD: Booking Service: Allow Free Text name on Range Booking
- Mod: Live: SubscriptionRefundReport: removed the hardcoded joined date filter
- Mod: Live: SubscriptionRefundReportalso : include voided payments without a corresponding TBTransactionRefund record. (And for these type of voided payments, add a note saying that the payment was not refunded via Clubhouse.)
- Mod: Update package dependencies versions.
- Mod: #slicervalues Save Slicer_ChargedToCard to TBTransaction record when we charge cards.
- Mod: Autogenerated poco classes.
- Add: TBTransaction and CGTransaction columns to keep detailed information about card charges and fee components so that we can more easily calculate report values.
- Fix: Live: DG-5208 #46887 Replaced 'ComputerNo' in favour of 'MemberCode' for Levies member edits where it was causing binding issues
- Mod: Force white background when jpg file format.
- Mod: File ContentType added.
- Mod: Code clean-up, remove unnecessary code block.
- Mod: Inclusion of binary image conversion format.
- Cleanup: Deleted DotGolf.TBTransactionProcessor; this was moved to a Scheduled Task some time ago.
- Mod: Autogenerated poco classes.
- MOD: BookingService: Set OwnerPassportUID to nullable for BKBooking
- Mod: ClubCMS #20265 Hiding "Complimentary Cart Fee" from the UI. Not having this showing when it is at $0 amount.
- Mod: Removed DEBUG conditional that stopped the nav from being cached in debug mode (slowing things down if you dared run Live up with a debugger attached).
- Mod: Live: SubscriptionRefundReport: rename Document Date to Payment Date
- Mod: Toggle image format between jpg & png.
- Fix: ClubCMS: DG-5204 Limit the [Add Guest] slot count when other slots are pre-occupied with other members having already booked in.
- MOD: ClubCMS: Changes on Resource Hub API for the Front-end control. Added Resource Hub Front-end control and its properties
- Mod: Disable writing to S3 bucket.
- Mod: Restore back storing image to S3 bucket.
- Mod: Returning binary image data.
- Mod: Live: Shared: SubscriptionRefundReport mods: set Build Action to Embedded Resource, use sql file instead of cs (unnecessary for this report)
- Mod: Generate dateurl image.
- Mod: Generate .png image.
- Mod: Changes chartjs-node-canvas method from renderToBuffer to renderToStream.
- Mod: Rebuild version of zip file.
- Add: chartjs-lambda: Build chain so we can build new images from development machines.  The binary ZIP is committed at this stage since we can't run `docker build` on our Jenkins EC2 instance right now (being an already-virtualised windows box).
- Mod: ChartJS-Lambda: Fixed the environment variables (interpolation wasn't being done) and decreased RAM to 128M
- Mod: ChartJS-Lambda: renamed the zip file to something more sensible.
- Mod: Experimental: Try my new chartjs-lambda (built with Docker) to see if that will work.
- Mod: Bump memory up to 512MB in case it's a memory issue causing the segfault.
- Mod: Okay, nodejs6 is out of lambda support now.
- Mod: Attempt to use nodejs6 instead of 12.x to see if it'll cure the credential issues trying to access S3.
- Fix: #46328 Slicer: Bug in the merge code caused the club to be charged for deleted manual registrations.
- Fix: Slicer: If we crash out in the import process and have already imported a later DeletedDate for raw manual registrations, there is the potential to miss some registration deletions.  I believe this is why Nomads got charged $9 extra in their Dec slice (3 registrations at $3 manual reg fee, they were deleted in NZ1 but not in the Slicer import table).
- Mod: Kiosk: DG-5079 - Players with bookings (on the day) who choose the "digital scorecard" option in the kiosk are now marked as checked-in. Mod: Relocate code logic for checking in/out players to Shared.
- Fix: API: Stats: Fairway hit percentage incorrect calculation. Fix: API: LoggingApiController - Exception Id now displays correctly in the response message.
- MOD: ClubCMS: Use Api Models Resource Hub controller
- Fix: Live: DG-5132 #46651 Fix the front end toggle to hide the file name area and not leave it as an empty box when file name is not present.
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Add Keywords and Like/Dislike counter columns
- Fix: handler.
- Mod: Added environment configuration S3_BUCKET.
- Fix: Filename typo.
- MOD: ClubCMS: Move ResourceHub Data, BusinessLogic and DTO in the respective folders as per David
- Add: ChartJS Lambda: Url ref => https://github.com/agilisium/chartjs-lambda
- REVERTED Merged revision(s) 50505, 50424 from Trunk/DotGolf.ClubCMS/DotGolf.ClubCMS/Teebooking/ConfirmSlots.aspx.cs: Fix: ClubCMS DG-5098 #46424 Implemented the checker to add guest in the available slot counts only for Takapuna Golf Club ........ Mod: ClubCMS #20265 Hiding "Complimentary Cart Fee" from the UI. Not having this showing when it is at $0 amount. ........
- Fix: ORNS in competition setup.
- Mod: Live: DG-5137 Subscription Voucher Report Added combo boxes to indicate to the user what they're actually filtering on eg. By SlicerPaidDate [Paid to Club Date] or by user PurchaseDate Also added the column to show the Slicer Paid Date on returned data
- Mod: Live: DG-5137 Subscription Voucher Report Added combo boxes to indicate to the user what they're actually filtering on eg. By SlicerPaidDate [Paid to Club Date] or by user PurchaseDate Also added the column to show the Slicer Paid Date on returned data
- Fix: ClubCMS/GolfNZ Changed 'm.MemberCode' to 'm.CentralMemberCode' as m.MemberCode doesn't exist in Member and was causing issue.
- FIX: ClubCMS: Added PasswordHash column to insert statement
- Mod: Scoreintent followup: Delete reminder messages to attestor when a penalty score gets applied for a scorecard.
- Add: Live: Shared: Subscription Refund Report: to be used initially by EG and WG
- Fix: Live: DG-5138, final refactoring for the fix.
- Fix: Crashbug introduced by refactor in rev 49789, incorrect SQL parameter passed causing draw report to crash.
- Fix: ISVAPI: CRMAPI - no longer use resigned home member data if live secondary is available #5004343
- Fix: When exporting a ExtQuery report as a PDF, charts were not visible.
- Mod: ISVAPI tests: add new disposal callback for scores by UID
- Mod: ISVAPI tests: comment to explain obscure test setup step
- Mod: a.connector-api and b.connector-api removed; they have been superseded by the load-balanced connector-api.golf.co.nz a while ago. Mod: Load balanced analytics, api.casual, api, api.warehouse and bulkemail. Cleanup: defunct sites removed: admin.golf.co.nz, book.golf.co.nz, handicap.org.nz
- Mod: images.golf.co.nz and sso.golf.co.nz are now load balanced.
- Fix: Live: DG-5141 #46755 - Member Tag Report 'exclude' wasn't filtering properly as deleted passport check wasn't in on the join clause - Changed -1 on all to null
- Mod: ClubCMS/GolfNZ: DG-5131 Shift the scores indicator to the side of 'My Scores' and not below
- Fix: Core: please let TestThreadBlocking pass on jenkins consistently...
- Mod: Slicer updated to cope with iGolf voucher payments.  Note that vouchers refunded AFTER the slice has occurred will need to be handled manually; we don't have any specific code to deal with these yet. Mod: Casual Golf MerchantRemittanceController removed; we now call into the business logic directly from Adweb via DotGolf.Shared instead.  GB&I needs this since they don't have a deployed Casual Golf API solution. Cleanup: RestClient removed; we were only using it for calling MerchantRemittanceController.
- Mod: Live: auto penalty scores no longer show as being entered by the club #5004374
- Mod: ClubCMS/GolfNZ: DG-5131 GolfNZ my scores now show a total score count under the 'My Scores' heading. Indicate 'No Scores' when there is 0 scores. Also will display 1 score as it is.
- Fix: Adweb: Merchant fee shows up correctly now for iGolf renewals.
- Mod: Live: DG-5132 #46651 Added an indicator for currently attached file so the user will know what PDF is currently attached to the competition. As opposed to 'No file chosen' on load.
- Fix: Live: POG: #45523 Booking editor - total number of cart booked increases by 1 after adding a new player.
- Mod: Core: Remove some Dapper.Contrib dependencies
- MOD: ClubCMS: Show topic name on each resource
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: add some aliases to sql that fetches markeractive data
- Mod: sql: stop SQL timing out when saving mixed gender all marker competition with lots of rounds e.g. 893416
- MOD: ClubCMS: Added pagination and filtering for Resource Hub management control, also added new fields for other resource types such as DownloadFile and Video details
- Fix: ClubCMS: rMyAccount: Vend sales charged to account - line details are not displayed.
- Mod: Live: Track visitors through kiosk for Jacks Point
- Fix: Core tests: concurrentfetching test keeps failing on jenkins...
- Fix: API: Stats: Wrong object constructor used for instantiating a Marker by marker Id.
- Mod: ClubCMS/GolfNZ Adding tournament registration answers to db log when players are registering for national tournaments on GolfNZ. Same way we did as before for members registering for comps
- Fix: Live: WeeklyVisitors report for Jack's Point was only showing visitors/groups with a Country assigned.
- Fix: ClubCMS: region properly editable for iGolf members #5004328
- Fix: TBP Orphans report was timing out trying to clustered index scan the exceptionlog table too many times. Forced index hit of IX_Exceptionlog_createdate because adding a ClubId predicate (which caused the query to use IX_Exceptionlog_clubid) caused huge tempDB spills from underestimation. update statistics exceptionlog with fullscan didn't help :(
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Added Admin Resource Hub control to manage Resource Hub contents
- MOD: ClubCMS: Added Download File and Video details for Resource
- Fix: ClubCMS: RAGGC: If we see a path that starts with "/cms", redirect the user to the home page. The "/cms" path is from their old website and it's still showing in Google search results.
- Mod: Live: Remove penalty scores from Deletedscoreintent report by EG request #5004388
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Rename PublishedDate to PublishedDateUTC
- Mod: ISVAPI: Add email to member sync data so clubsystems can stop clobbering our emails -_-
- Mod: Org: Show club name in Sage50LevyInvoices report for clarity #GILevies
- Fix: Live: CardAudit report was not filtering by deleteddate on CFRequest, which was causing the count to be different from sage50levyinvoices report #GILevies
- Mod: GolfNZ [Used in WHS handicap index calculation] is now hidden for casual golfers
- Fix: #41642: ClubCMS: rEventCalendar.ascx: reposition the qtip (i.e. the pop-up containing some additional information about the event) to the bottom left of the calendar item.
- Fix: ISVAPI: were allowing people with 1900-01-01 DOBs to have handicaps in EG
- Mod: Live: show InterclubTeamMembers report for GI clubs
- Mod: API: order casual scores by CaptureDate (desc) if they are on the same day
- Fix: API: Build (Casual Golf scores no longer try to do combining etc)
- Fix: ClubCMS DG-5098 #46424 Implemented the checker to add guest in the available slot counts only for Takapuna Golf Club
- Fix: AdWeb: DG-5099 Escape SQL syntax for apostrophe in raised error.
- Fix: ClubCMS: casualgolf score listing would miss scores and show some scores as playdate 01/01/0001 (partly the 9h score combining logic). Refactored to use same (simpler) logic as member score listing.
- Fix: Adweb: extra safety checks in Resigned to Casual merge because the last one we did messed up.
- Mod: Reverse Proxy: added S,W,1,1,royalaucklandgolfclub.co.nz
- Fix: Adweb: copypaste bug in prev commit
- Mod: Adweb: allow merging resigned to casual using any of the resigned person's club numbers
- Mod: DG-5099 More checks and member surname checks added though is optional
- Mod: Reverse Proxy: added S,W,1,1,raggc.com
- Mod: ClubCMS: bindings.list: added raggc.com and www.raggc.com
- Add: DG-5099 Resigned-> Casual score merge tool for AdWeb.
- Fix: UnionAPI: Auth was broken
- Mod: Org: Discovered some NZ Levy stuff that was still visible to GI, hidden it. #GILevies
- Fix: Core: PEBKAC DataCacheTest wrong timing for concurrent fetch test
- Mod: Org: GI Levy report for SAGE export is hidden behind a permission.#GILevies
- Mod: Org: Hide Help boxes for unions without Help #GILevies
- Mod: Live: remove rule that prevented people from editing their own user profile permissions -> when they click the Edit link for themselves, they get redirected to their userprofile page and can only change password.
- Fix: Org: Allow toggling of levies permission at Org level #GILevies
- Fix: Org: Allow toggling of levies permission at Org level #GILevies
- Fix: Core: DataCacheTest messing up on slow jenkins box and failing sporadically with 122324
- Fix: Org: SAGE export report had erroneous column #GILevies
- Fix: Live: bug in the remove UNF code that would not remove UNF sometimes #46544
- Mod: Live: Actually we don't want to turn the levies flag on yet for clubs #GILevies
- Mod: Live: Mods to allow levies to be published without being enabled. Can be toggled in nav by the association product #GILevies
- MOD: ClubCMS: Change minimum top-up and format the Error Message with AXCurrency
- Mod: Live: Show card audit report for clubs
- Mod: Org DG-5089 NZGALevies Report Report renamed to [GOLF NEW ZEALAND AFFILIATION LEVIES] and auto region selection by user login credential so district only get their region's data.
- Mod: ScheduledTasks: add comment to CronSchedule for clarity
- Mod: Live: Whoops, this report is not meant to go out to clubs yet
- Mod: Live: InterclubTeamMembers updates for GI
- Mod: Org DG-5089 NZGALevies Report Added note to the bottom of Levy start and end date so the user will know when the levy dates are finalised
- MOD: ClubCMS: Allow HTML attributes on CKEditor for rContent / HTML control
- MOD: Live: Hide date title on Date Carousel for Range booking
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Fix script error
- MOD: ClubCMS: Added ClubWebsiteID in Resource Hub tables
- Mod: WHSAPI marker unit tests less prone to failing because web7 is bad
- Mod: Live: InterclubTeamMembers report now only checks 6 month range as per GI update - #5004337
- Mod: Live: InterclubTeamMembers report now only checks 6 month range as per GI update - #5004337
- Mod: Live: Show Medal Report for clubs as per EG request.
- Mod: Live: remove obsolete Vend GSTUID setting
- Fix: WHSAPI: a deleted score should not block a new score from being posted with the same intent. Mod: WHSAPI: add validation to prevent a score being assigned to a scoreintent belonging to a different member
- MOD: ClubCMS: Added Resource Hub APIs
- Fix: Org: very deceased person would still show as active in Org if they were deceased #5004345
- MOD: ClubCMS: Use club default image and not hardcoded for Image Content Tiles control
- MOD: ClubCMS: Show Admin Panel on Teebooking page, and avoid redirect to memberLoginPage for My Account control when admin is logged
- Mod: Org DG-5089 NZGALevies Report oops - project needs to know it has this
- Mod: Org DG-5089 NZGALevies Report Only the latest levies can be viewed and is only for NZGolf
- Mod: Live: Make sure member counts are correct for club that have members who are home in another country #GILevies
- Fix: Org: Build
- Mod: Autogenerated poco classes.
- Mod: Sql: fix hardcoded references to Nonplaying nzgasubcategory (GI have a "Non-playing" category and it's unrelated to out non-playing stuff)
- Fix: Live: Stray $ in interpolated string for Levies term (Summary) #GILevies
- Fix: Live: Stray $ in interpolated string for Levies term (Useradmin) #GILevies
- Mod: ClubCMS #20265 Hiding "Complimentary Cart Fee" from the UI. Not having this showing when it is at $0 amount.
- Mod: ScheduledTasks: Use DI for settings in ScoreIntentFollowupTask. Make CutoverAtLocal non-static because we want to force People to get an instance of Settings in the new world, having statics makes it clunky
- Fix: Build: Re-instated a bunch of Shared classes relating to Settings so I don't have to fix all the namespace conflicts in the Shared Settings partial classes...
- Add: Core: Ported Settings to Core, and it works now. (Have to add it to SharedModule though, and check that works. May break Shared build, please stand by)
- Mod: Live: Hide interclub team members because it's not yet 2022 and the calc is not what GI wanted
- Add: API: Stats - Golf club types - add 'None' option.
- Fix: ConnectorAPI: Build, after rev 50414
- Mod: Live: Move some Settings-related classes to Core out of Shared (in the process of recreating the Settings classes in Core)
- Mod: Live: Move some StringExtensions to Core out of Shared (in the process of recreating the Settings classes in Core)
- Fix: API: Stats: GetRoundStats throws ORNS exception when calculating the average fairway accuracy.
- Fix: Shared: DataCacheFixture tests less flaky (TestThreadBlocking was using same key as TestManualExpiry)
- Fix: Org: EG Medal report was not applying overridePCC correctly
- Mod: Org: #GILevies ensure Association has Levy product before giving them access to the levies assetgroup
- Fix: API: Jenkins build - missing from previous commit related to stats input.
- Mod: Autogenerated poco classes.
- Add: Digital Scorecard: Stats input - initial commit. Add: SQL: New table ScoreHoleStat
- Fix: Org: EG Medal report was not finding PCC correctly
- Mod: Autogenerated poco classes.
- Fix: PristineDatabaseBuilder broken after testbase constructor refactor
- MOD: ClubCMS: Added SQL scripts for Resource Hub data structure
- Fix: Live: activemarkers was not filtering on deleted markers when deciding which rows to show in the grid #5004247
- Fix: Org: #GILevies Sage50 Invoice export report.
- Mod: Org: #GILevies Sage50 Invoice export report. Doesnt work in excel for some reason, testing
- MOD: ClubCMS: Make Hero SwiperJS compatible to Terraces 3.1
- Fix the count for member booking a tee in a week when its a group. shouldn't include the group member booking into the count at time of booking
- Fix: Live: club visitor country/region tracking should handle member bookings via app, which right now it doesnt
- Mod: ORG/LIVE: DG-5073 Inter-Club Report Change back to IE from NZ as testing is completed
- Fix: Org: #GILevies: chargeable and non-chargeable card order reasons were swapped around in UI
- MOD: ClubCMS: Remove extra padding
- Fix: Live: Error shows when trying to load a nonaffiliate card in score entry if that scorecard does not have any comps. #44986
- Mod: Org: #GILevies more UI mods. We're creating a report for the invoice export to Sage50, rather than using the checkbox invoice download flow
- MOD: ClubCMS: Use page setting page for news detail page
- Mod: Levies: #GILevies remove unused method GetTotalChargeForClub
- Mod: Live: #GILevies levy summary now GI friendly and does not reference "Levies"
- FIX: ClubCMS: Saving Club news article no topic selected
- MOD: ClubCMS: Filter out deleted News Topics
- MOD: ClubCMS: Added zAccordionCallback for Bryan's styling
- MOD: ClubCMS: Allow old controls link to News detail control
- Mod: Org/Live Removed Adobe Reader notification because its much legacy and all browsers just opens this now
- MOD: ClubCMS: Allowing GolfNZ News List and News Detail control for Terraces 3.1 template
- Mod: DG-5073 Org/Live Change to GI Interclub report for 2022 season. Eligibility for 2022 to change to lowest HI at any stage in 2021 season. - Now shows lowest Handicap index for 2021 when viewing in 2022 TODO: Remove NZ from JSON as this is ony for testing
- Mod: DG-5029 Org/Live We want it to be competition score so removed the comment as it was committed accidentally from testing
- Fix: Live: Clubs should be allowed to add international courses for scotland until we go live with score return. A bug was preventing them from doing this. #5004294
- Mod: Live: #GILevies levy user permission correctly show Affiliation Fees
- Mod: Live: Kounta settings  Kounta Gift Card Addon  setting looks less terrible for Mat
- Fix: SSO: don't show weird jwt error message if someone bookmarks sso incorrectly
- Fix: Org: Levy card order report not working for Org DG-5028
- Fix: API: stray html in digital scorecard email
- Fix: Live: Both penalty score reports now include manually created penalty scores
- Mod: Org: remove Card Audit report from clubs, so GI can eyeball it
- Fix: Org: Levy card order report missing sql file DG-5028
- Mod: Org: MSK+NSC Medal report now factor in PCC properly and uses the AdjGross - (CR+PCC) - CH formula that  EG wanted  [DG-5029]
- Fix: UnionAPI: tests
- Fix: WHSAPI: score endpoints returning PostPCC SDs to client without rounding them, which is a sin.
- Mod: ORG: [England Medals Report] DG-5029 Updated calculations for NetSD using WHS data
- Fix: Accidental commit of configprofile
- Mod: Live: Don't show starting snapshots (e.g. Golf Ireland on 19th Oct) in the dropdown for selecting levy years. i.e. Golf Ireland is doing a snapshot at 19th Oct and at 1st Jan, we only want to show 2021 once in the levy year dropdown #GILevies
- Fix: live: don't load MarkerDefaults from terminated courses #46181
- Fix: live: MarkerDefaults: apply bindings only when document is ready #46181
- MOD: ClubCMS: Allow html attributes on CKE
- Mod: ORG: [Audit Reports for Cards Ordered] DG-5028 Sigh... Removing NZ from perm... its meant to be IE
- Mod: ORG: [Audit Reports for Cards Ordered] DG-5028 Enabling this to work with ORG with club select for org and just whatever club the user is logged in for live
- MOD: ClubCMS: Update Accordion for terraces3.1 template
- Mod: UnionAPI: scoreUID => scoreID (getScore endpoint)
- Fix: Live: Card audit report counts were a bit off missed a mod
- Fix: Live: Card audit report counts were a bit off
- Fix: ISVAPI: tests again
- Fix: ISVAPI: tests again
- Fix: ISVAPI: unit tests
- MOD: ClubCMS: Added Force to use CKEditor setting on UContent control
- Fix: Core: unit tests broken after test dispose refactor
- Mod: UnionAPI: delete + update scores
- Mod: sql: API_addscore now makes it possible to change the gender of a score if all other data is correct (member gender, marker gender)
- Mod: UnionAPI: code comment about updating markers
- Add: UnionAPI: working score return endpoint for OCS
- Mod: sql: member levy status remove hardcoded ids  #GILevies
- Add: #unionapi THIS IS HALF BAKED and handed over to Marcus.    Added marker insert code for POST Score.
- Mod: Live: [Audit Reports for Cards Ordered] DG-5028 Remove NZ permission as its for IE
- Add: Live: [Audit Reports for Cards Ordered] DG-5028 Report showing count for chargeable and non-chargeable card orders with a drill through showing which members it was for
- Add: #unionapi Course table extended with some metadata to allow UnionAPI to create international courses.
- Mod: Org: #GILevies member cards should be charged when Ordered (not when printed and dispatched.) (if this requirement changes we should also update the member cards report that Nikky is about to commit)
- FIX: Org: Tournament Category is empty for other Org other than GolfNZ
- Mod: Org: 'Levies' menu item to show 'Affiliation Fees' for #GILevies
- Fix: Org: Build #GILevies
- Mod: ClubCMS: removed ComputerNo reference from handicap rankings (wasnt being used, but still)
- Mod: Live/Org: JuniorGirlsMedal reports no longer use nest parallelforeach because we can't call WHS fast enough for it to matter so better keep it simple
- Mod: Org: remove some computerno references
- Mod: Org: #GILevies localisation
- Mod: ClubCMS: remove webmethod from 2020 that says "can be removed after next publish"
- Fix: BulkEmail: GetTotalUnsubscribed: replace convert(varchar(24), xxxx, 120) with cast(xxx as date). Previously, data from the last date (DateTo) was being excluded from the results.
- Fix: Live: levy counts for secondaries working now #GILevies. (also updated IE stage categories+subcategories to match prod because this was confusing things)
- Fix: Live: #GILevies member levy static view no longer throws away people with away-union homeclubs
- Mod: sql: Get levy summary to work properly for #GILevies
- Fix: Core: unit test hopefully less flaky on jenkins
- Fix: Core: unit tests hopefully less flaky on jenkins
- Mod: sql: Get levy summary to work properly for #GILevies
- Mod: Live: #GILevies: Levy audit summary language change
- FIX: BulkEmail: Add Tags on PushNotification
- Mod: Live: #GILevies: Levy audit summary language change
- Mod: Live: Member tags report now allows filtering by people without a particular tag
- Mod: Reverse Proxy: no idea why TLS cert isn't applying to members.northshoregolfclub.co.nz. Will try republishing
- MOD: ClubCMS: Change from /admin to /admin-links
- Mod: Reverse Proxy NZ: added S,-,1,1,members.nsgc.co.nz
- Mod: ClubCMS: bindings.list: added members.nsgc.co.nz
- Mod: Live: Remove $WCDATE$ from version bar in master page - it doesnt get set
- Mod: ClubCMS: Signup: field label update requested by iGolf
- Mod: ClubCMS: Signup: field label update requested by iGolf
- Mod: ClubCMS: Signup: field label update requested by iGolf
- Add: AXCurrencyId column to NZGALevyPrice to cater for GI who levy Northern Island and Republic of Ireland in different currencies #GILevies
- Mod: Live: Track when bookings are deleted when calculating visitors by region/day
- Mod: Live: VisitorsByRegionCounts report minor display tweak for non NZ/AU countries
- MOD: ClubCMS: Added Recent Months stats to hyundai-stats-chat control
- Mod: Live: #GILevies: Rename Levies to Affiliation Fees
- SQL: Update NULL TournamentCategoryId to default to Championship Events
- Fix: Live: no member signups should be allowed if interop member signups are OFF
- Fix: Live: count bugs with Jack's Point reports
- Fix: Live: Tags: Deleted tags no longer displayed in the member's profile page.
- Mod: ORG DG-5029 Updated to Medal Report - handles gender selection - Pre-filter player scores using db data then taking top 50 players to submit to get a more accurate data from WHS
- Mod: Reverse Proxy: added S,-,1,1,members.northshoregolfclub.co.nz, and removed S,W,1,1,nsgc.co.nz and S,W,1,1,northshoregolfclub.co.nz (the main website is being hosted by another third party)
- Mod: ClubCMS: bindings.list: added members.northshoregolfclub.co.nz, then removed northshoregolfclub.co.nz and nsgc.co.nz (NSGC are now using a different third party for their main website)
- Mod: Core: Levy/ies language term, because GI want to be difficult and call "Levies" "Affiliation Fees" #GILevies
- Fix: Org: #GILevies: stray computerno
- Mod: Org: #GILevies - dont show secondary member counts in levies summary - errors out because of old stored proc, and we don't need to bother with it for this launch
- Mod: Org: slight tweaks to allowing CSV card download in NZ dev for testing, so the hack is confined to one file
- Mod: Org: Allow CSV card download in NZ dev for testing
- Add: Adweb: Search by memberuid
- FIX: ClubCMS: Golf New Zealand Calendar page default filter
- MOD: ClubCMS: Apply the same Site Admin toolbox for Terraces 3 and 3.1 from Golf NZ. Created a admin create page control for front end users to have the ability to create a new page from Templates. Apply some styling issues for Terraces 3.1
- Fix: Live: Deleted score intent count was showing resigned members
- Mod: UnionAPI: interop enabled for IE-SCO on our end.
- Fix: Another hardcoded "dev"
- Mod: Live: member name on scorecard uses default cmember in our union
- Mod: Live: Levies mods to GI to hide audit-related things and keep everything readonly #GILevies
- Fix: ClubCMS: golf.co.nz: redirect to /my-bookings if the user is on the golf.co.nz website and accessing /Teebooking/MyBookings.aspx
- Mod: Live Remove Adobe reader related banners and notes
- Mod: Live: Categories/Default.aspx: Member Signup Form section: no need to check for a "CW" product because the club may not necessarily have a website. E.g. Flexiclub signup is available through the Golf NZ club website. Flexiclub technically doesn't have its own club website.
- Mod: Live: default groupbooking country tracking to true
- Fix: Live: ComputerNo error #GILevies
- Add: Implemented EG slice for renewals.  Due to a transaction that was charged with a billing token, combined with the fact that we haven't yet implemented this, the slice was failing with a null insert error.
- Fix: DG-4942 The fixes: - actually checking the playing slot the player is trying to book at in the week and not the week that they're doing the booking - Admin was not actually checking after our last changes for the players fair play policy but it will now do this
- Mod: Core: add preload attrs to Item.cs
- Fix: Live: region tracking for Jack's Point not working sometimes for members
- Fix: Org: Unable to load types from 'DotGolf.Core' assembly because of missing System.ServiceModel.Http and  System.ServiceModel.Primitives assemblies - Add these assemblies as direct references in the DotGolf API project. Was causing HookManager to crash when it tried to load all types
- Fix: Org: oops forgot to commit ToList in the previous commit
- Fix: Org: if an exception hits out application_error handler, it tries to log the exception to the DB, and we try and set the user session. However, can't resolve anything because our lifetime scope has been disposed. Hit this error while debugging, so not sure it's been problem in Prod, but better to be safe.
- Fix: API: Unable to load types from 'DotGolf.Core' assembly because of missing System.ServiceModel.Http and  System.ServiceModel.Primitives assemblies - Add these assemblies as direct references in the DotGolf API project.
- Fix: BookingService: Hardcoded `dev`
- AWS, really?
- Add: more logging
- Add: more logging
- AWS, COME ON, DO IT
- Fix: ... broken json as it turns out
- AWS OKAY FINE I'll send you JSON
- Mod: Live: Toggle some levy audit things as hidden for GI, they dont use it #GILevies
- Mod: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARGGGHHHHHH AWS COMMAND LINE SYNTAX IS BALLS
- Mod: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARGGGHHHHHH AWS COMMAND LINE SYNTAX IS BALLS
- Mod: BookingService: ECR registry ID now a build job variable.
- Fix: BookingService build; more bad.
- Fix: BookingService build; oops, needed space, not comma.
- Mod: BookingService build: Attempt to set REGISTRY_ID on invoking codebuild.
- Fix: Small typo.
- Mod: Resolve repository uri using aws cli rather than hardcoding this.
- Mod: ISVAPI: secondary test database now also has ISVAPI in the name
- ADD: SQL: New Product for Range Booking
- Fix: ISVAPI: now uses Core HookManager.cs instead of TerribleHookManager
- Fix?: Live: Odd × symbol encoding bug where it shows as Ã—
- Mod: Mailer will now gracefully exit when Service Manager asks it to.  This should make our deploy process faster and more dependable.
- MOD: ClubCMS: Set max limit to 5 images and add message if image is already in the list
- Fix: Live: cachebusting for Comp Registration css
- Add: POS: Sale Items section - allows POS users to change the quantity of an existing product in the sale easily. Tieke will like this. Interacts a bit weirdly with variants though :/
- Mod: Autogenerated poco classes.
- Mod: WHSAPI: better query plan for EG handicap sync to stop hammering WHSAPI cpu/tempdb
- MOD: ClubCMS: Added IsCWDefault column to TournamentCategory table
- MOD: ClubCMS: Make UBackgroundSlideshow control to be content manageable
- Fix: Build: forgot to commit csproj
- Fix: Resequenced SQL script with duplicated number.
- Mod: Live: Scoreintent hooks moved to Core
- *** DFH CODE REVIEWED TO HERE *** Mod: POS: increase font size and font colour contrast a little bit in the POS sales summary- Mat noticed it was really hard to read at Huapai on a bad screen.
- Fix: Build error after Query() signature change.
- Mod: Removed extra non-PK constructors from all PocoTable<> classes since we don't anticipate using PocoTable<> for inserting records. Mod: Simplified BusinessLogicBase.Query<> method by using the protected construct function for the PocoTable<>. Cleanup: Removed stuff like `Func<IDataConnectionBuilder, Club> construct` from everywhere Fix: AssociationProduct query was a bit weird.
- Fix: TxtMessageService: Specify 'Source' when logging events to Windows event log.
- Fix: Live: Vend products sync - Do not ignore products that contains a "Loyalty" tag. Enabled only for Huapai and Tieke as until it's safe to do for everyone.
- Fix: BookingService CreateBooking_ShouldNotExceedMaxEntries test failed because of changed status code from POST bookings (on conflict).
- Mod: Clubcms: remove "hack for micropower"
- Fix: ClubCMS: Build
- Fix: ActivityTracker: build
- Mod: Autogenerated poco classes.
- Mod: DG-4980 OomEventDates getting EventId Column added so the dates saved are unique
- Mod: ClubCMS/GolfNZ DG-4980 - For overall the player ranking is now rolling 52 weeks period from the selected day - Remove nullable end date - Change the current year number to display 'Current' in select list Fix: - Some players were returning null data for DifferenceFromPar so handling this - might just be a dev thing but just in case have added this - Fix the links to get the players event details by year was broken so its now getting previous years and not just current
- Mod: ORG Live DG-4980 Saving of OOM start and end date is now specific to event type eg. Mens will have its own start and end date
- Fix: Live: Jack's point visitor reports correctly report group bookings and future bookings
- Cleanup: Remove using poco.
- Cleanup: We're rid of CourseRepo now.  Rabbit hole traversed in the process so I've added an [Obsolete] as well as improved an error message in the process to avoid this pitfall for the next poor fu ^H^H^H^H^H person who touches this.
- Mod: Live: region selector code comment
- Mod: Got rid of CourseRepo from ISVAPI.
- Mod: Got rid of CourseRepo from UnionAPI.
- Mod: Got rid of CourseRepo.  Expect temporary build issues in ISVAPI and UnionAPI.
- Cleanup: Remove using poco.
- Cleanup: Remove using poco.
- Cleanup: Remove using poco.
- Cleanup: Remove using poco.
- Cleanup: Remove using poco.
- Cleanup: Remove using poco.
- Cleanup: Got rid of a bunch of `using DotGolf.Core.Poco` - these are trouble waiting to happen as we add more Core.Data implementations.
- Fix: ClubCMS: Ticket 45836: club website members are getting redirected to golf.co.nz when viewing /Teebooking/MyBookings.aspx. Alter Revision 79575 to apply the new redirect to golf.co.nz website only.
- Fix: Namespace stuff.
- Fix: More namespace issues.
- Fix: More namespace issues.
- Fix: More namespace things.
- Mod: UnionAPI: HookManager lives in Core now, so we can call it from UnionAPI!
- Fix: More namespace conflicts.
- Fix: Namespace conflicts with DotGolf.Data.
- Fix: Missing PK constructors on some data classes. Fix: Constructor change on ScoreInsertedUpdatedHookData caused build errors. Fix: Namespace conflicts with new data classes.
- Mod: MAJOR: Moved WHSScoreInsertedUpdated, WHSScoreDeleted and WHSMarkerUpdated hook implementations to Core. - Also moved the IScoreInserted, IScoreDeleted, IScoreUpdated interfaces and associated data classes. - Enabled dependency injection in HookManager so we can have hook implementations constructor injected. - Implemented a bunch of data classes; Member, NonAffiliate, Region and Settings.
- Fix: Live: Region not loading inside group bookings with previously saved region
- Fix: Live: region-select when loading existing value timing issue
- FIX: BulkEmail: Discrepancy on sent tab and reports for PGA
- Mod: Live: Levies enabled for ireland outside prod
- Mod: Live: groupbooking missed file
- Add: sql: Levies product for associations
- Fix: ISVAPI: CRM was getting member names from past member records
- MOD: BulkEmail: Remove misplaced placeholder
- MOD: BulkEmail: Put back the logic as it doesn't apply Members and/or Casuals recipients selection
- MOD: BulkEmail: Allow Org users to send Members and/or Casuals recipients. Change multi select default labels and trim read more url
- Fix: ISVAPI: CRM was getting member names from past member records
- Fix: Live: Vend product sync did not fetch all products if club has more than 2000 (including deleted)
- Fix: Live DG-4980 Fix UI binding issue on save post back
- Mod: Live: Subs: Missing Billing Card report: display voucher code used during signup, if any
- MOD: ClubCMS: Added SubAssociationID to zTournaments control to include events created by other child association of a club website
- Fix: UnionAPI: put SPEC_BUILD back for ScoresController so that Jenkins is happier.
- Fix: Removed transaction, no longer needed here.
- Fix: Had some transaction problems in the Scores business logic; took the opportunity to reduce the transaction length to the minimum. Fix: Removed the AdjustedGross hack column (and whole Score partial class) on the Score poco, it caused trouble for BusinessLogicBase lazy loading, which assumes that Poco columns are named the same as their properties.
- Mod: Org: physical address + postal address now include address4 and PostCode respectively
- MOD: ClubCMS: Fix getting of categories and adjust drop down width
- Fix: Modica: Updated to WSDL v4 to fix int overflow issue.
- MOD: Org: Use TournamentCategories to get the dropdown list data
- Fix: HandicapTxt: Updated Modica txt WSDL to fix int overflow issue.
- Revert mod Fix: HandicapTxt: DFH+KLY - Temporary workaround for Modica int overflow issue. ........
- Fix: HandicapTxt: DFH+KLY - Temporary workaround for Modica int overflow issue.
- MOD: ClubCMS: Added Tournament Category Filter for zTournaments control
- Mod: Org: Address4/Postcode added to club create data
- Mod: Autogenerated poco classes.
- ADD: Org: Added Tournament Category on Tournament Setup
- Mod: Live: add postcode to club details page (so clubs can finally update it)
- Fix: Live/Org/ISVAPI: crashbug when deleting scores after scorerepo removal
- Fix: Build after ClubRepo going away.
- Fix: Build after ClubRepo going away.
- Fix: Live: GroupBooking country/region select load correctly
- Fix: Build after ClubRepo going away.
- Fix: Build after CourseChanges constructor signature change.
- Fix: Org: Build after scorerepo cull
- Mod: ClubRepo going bye-bye.
- Fix: Build after ScoreRepo culling.
- Breaking: UnionAPI build
- Fix: UnionAPI: Build
- Fix: Live: Build
- Fix: Build: Core.Poco.Score mod broke WHSScoreInsertedUpdated
- Fix: Live DG-4945 Fix on save post back date UI binding isssue - date is now correctly populated from what was being saved.
- Mod: ClubCMS DG-4945 Add friendly date to select list for users - monday dictates the date populated TODO: Why is the KO week date UI not updated even though the selected data that is sent to the API is correct
- Mod: Autogenerated poco classes.
- Fix: Okay, maybe third time lucky?  GO statement caused a variable to go out of scope too early.
- Fix: Argh, missed a GO.
- Fix: Changed the order of sql dml statements slightly here to allow the schema scripts to run in sequential order.
- MOD: BulkEmail: Added Member Tags filter under "Members - By category, category type and birthday" Recipients From
- Mod: Autogenerated poco classes.
- ADD+MOD: ClubCMS: Added CWNewsGroup for CWNewsArticle, to filter out articles with assigned news group. GolfNZ news list control has new property for NewsGroupId
- Fix: Build after removing ScoreRepo.
- Mod: Got rid of ScoreRepo, replaced with Scores/Score.
- Mod: UnionAPI: Small changes relating to naming and documentation.
- Fix: Tee booking: #45693 - wa_TBSearchSlotsV2_GetMinGreenFee returns a weekday standard rate for a weekend timeslot. Set Monday as the first day of the week.
- Fix: Build after Scores BusinessLogicBase added.
- Add: Scores + Score BusinessLogicBase implementation (this will cause some reference issues)
- MOD: ClubCMS: Only members that has access to the Clubs that has range booking will be able to access create new booking and access to the booking
- Fix: ParNZ: RSEntryID was not being sent into the segment calculation function, which meant that Freeze Divisions didn't work when printing cards via Draw Card Printer.
- Fix: Adweb: borked the date format for score intent creates and score creates
- Fix: Adweb: borked the date format for score intent creates and score creates
- Merged revision(s) 50054 from Trunk: Fix: Org: RegistrationExport could not handle questions longer than 128 chars (sql server column name limit) ........
- MOD: Revert not supposed to commit files
- MOD: ClubCMS: Range booking show time slot on confirmation message and fix refresh UX issue when Back to my bookings is clicked
- MOD: ClubCMS: Range booking show time slot on confirmation message and fix refresh UX issue when Back to my bookings is clicked
- Fix: Org: RegistrationExport could not handle questions longer than 128 chars (sql server column name limit)
- MOD: ClubCMS: Fix US date format on Range Booking, show no upcoming bookings, fix date issue from My Bookings to range booking
- Mod: Autogenerated poco classes.
- ADD: ClubCMS: Added Content Tiles control, also create a new table that can be store JSON content for new controls. Added zContent Tiles for user to add to the page.
- Mod: Autogenerated poco classes.
- FIX: ClubCMS: CWImageContent can't accept 40+ CTA title
- Mod: COMP score entry: Slight tweak to improve load speed in dev (in prod this isn't a problem)
- Fix: Live: Country/Region not loading in POG
- Mod: COMP clubs: Modernised the UX around the score input control in COMP entry mode, it was starting to look a bit dated.
- Fix: Live DG-4973 #45740 Member tag report fix where the report still showed member deleted tags as result - added missing clause to check if the clubtag has been deleted from user passport.. oops...
- Mod: Live: Report mods for Jack's point visitor counts
- Fix: API: Teebooking: /apply-booking-changes-confirm endpoint (Pay by stored card). Exclude payment transactions that have already been captured or auto-refunded.
- Fix: API: Teebooking: /calculate-fees endpoint - Exclude payment transactions that have already been captured or auto-refunded.
- Mod: ClubCMS: golfireland.css: my profile toggle (on/off) style updates
- Mod: Small CSS tweaks to make score entry look a little more streamlined.
- Fix: Live: penalty score report shows attester correctly
- Fix: COMP score entry: On first load the competition list was blank (until you touch the date, even if you just reselect the same day) Fix: COMP score entry: Do not show the SIC before marker details have been loaded; causes API errors when testing in dev, which presents like a bug.
- Mod: Autogenerated poco classes.
- TBClubVisitor: track whether person is a member or not.
- Mod: TBClubVisitor: track whether person is a member or not
- Mod: ScoreIntentFollowup: should not send Penalty Score email unless we've actually managed to create a penalty score. if it's failed, probably needs manual followup
- Mod: No longer log start/finish times for wa_TBSendPaymentWarningsJob; they only use _log space.
- Mod: Kounta customer hook handler now locks per club, not globally.  Seems we've now got enough clubs on Kounta for this to actually be a problem.
- Fix: ScoreIntentFollowupTask was not assigning the AllHolesAttempted flag to adj gross scores so they got incorrectly treated as hole-by-hole
- Mod: ScoreIntentFromAppFollowup unit test for handling if a score submission gets cancelled in Live by an admin
- Mod: ScoreIntentFromAppFollowup updated to handle if a score submission gets cancelled in Live by an admin
- Mod: ScoreIntentFollowupFlow: increase timeout to 2hr because apparently syncing ~8k penalty scores and score intent deletes to WHS takes a while with our slow webhooks (ran over 1hr) :(. Not a huge priority to fix because it's not using crazy cpu or DB though
- Mod: ClubCMS: Golf Ireland: moved the GI css to the root css folder, just like Golf NZ.
- Fix: Live: Build: missed file
- Add: Live: groupbooking visitortracking by region/country
- Mod: Love Golf Plad Admin Site: handle null coordinates; also expand CGMerchant.* select queries to indicate the specific columns
- Fix: Live: Cancel Group Booking warning blends in with payment summary if club has POS+greenfees
- Fix: BookingService: Service name changed in the CF template.
- Mod: BookingService pointing to the AWS one, no longer using the local proxy. Mod: We have Elasticache for DevelopmentNZ now, so DotGolf.Core is now pointing to that instead of dev1.
- Mod: ClubCMS/GolfNZ DG-4945 Added cache for queried results
- Mod: ScoreIntentFollowupFlow: better logging and increase timeout to 2hr because apparently syncing ~8k penalty scores and score intent deletes to WHS takes a while with our slow webhooks (ran over 1hr) :(. Not a huge priority to fix because it's not using crazy cpu or DB though
- Fix??: WHSAPI: sometimes score intents take a long time to delete and i dont know why. remove petapoco, use primary key??
- Fix/Mod: BulkEmail: recipient filtering by age (adult/junior): added group parenthesis to the Ireland conditions
- Mod: Org: Create Club: make the coordinates required fields. Add an accompanying help text on how to look for the coordinates.
- Add: CRMAPI: new flags for email optins
- Fix: ISVAPI: ORNS when someone does not have a valid category code or category name
- MOD: ClubCMS: Fix district filter of fixtures
- Mod: ISVAPI: if person is resigned from a club, remove it from the Clubs array
- MOD: ClubCMS: Add Currency symbol as well as putting a logic when showing up the Register button
- MOD: ClubCMS: Add CssClassName to update in Admin page of Accordion control
- Mod: Live: prevent people in GBI signing up Scottish members. (we can't do handicap transfers yet)
- MOD: ClubCMS: Fix Admin List update of content after being added by the user to the page
- Mod: Put @ECHO OFF back into postbuild.cmd.
- MOD: ClubCMS: Added Preview of Page Control
- Mod: Live DG-4947 #37291 [Members Address Labels Report] - Modified so the data being pulled is now being ordered by MemberName alphabetically per request by 'Fitzroy'
- Mod: ClubCMS DG-4946 #45038 Advance tab had been re-enabled so that the admin can make the images responsive again on upload or edit
- Fix/Mod: sql: wa_Play9_EmailTheEntrants: update how the first day of the promotion is set. E.g. so that come January, the job/script will still run as expected
- Mod: WHSAPI: don't punish callers if the scoreintent they're posting for has been deleted - we delete the intents whenever a penalty score gets added, and recently deleted a whole bunch in WAL/ENG pre Nov 1st
- Fix: WHSAPI: unit tests again
- Mod: DG-4945 Requested by Dave Mangan from GolfNZ - increased the fields for tournament and competition names from 50 to 100. - Increased to 100 as it is max the column can hold in db
- Mod: Avoid exception when client incorrectly calls ReleaseTimeSlotLock() with no timeSlotId in the POST body. Mod: Stop throwing ERR_NOT_LOCKED_BY_YOU since this isn't handled by anything anyway.  Just try releasing and if it didn't work, return 200 we-did-the-best-we-can.
- Fix: WHSAPI: unit tests
- Adweb: Add DeletedBy column to score listing
- Mod: WHSAPI: remove option(recompile) on the handicap sync. still trying to figure out the bad plan...
- Mod: WHSAPI: option(recompile) on the handicap sync
- Mod: ScoreIntentFollowupTask: actually set the timeout back to 50m in case something is unexpectedly slow when sending penalty scores etc
- Mod: ScoreIntentFollowupTask took 1.2mins for 11k records so lowering timeout to 5 min. Could be faster but not worth optimising a.t.m. because it's only run once a day. Probably need to slap in index on ScoreIntentFollowup, monitoring it.
- Mod: ISVAPI: don't punish ISVs if they scoreintent they're posting for has been deleted - we delete these whenever a penalty score gets added, and deleted a whole bunch in WAL/ENG pre Nov 1st
- Fix: Jenkins build (missing from previous commit svn 49965).
- Mod: Live: Display details about digital scorecards in the Clubhouse.
- MOD: ClubCMS: Add regionid query parameter for club fixtures search
- Mod: Autogenerated poco classes.
- Org DG-4874 Order Of Merit rankings settings Create table and insert default date data from 2022 to 2018
- Mod: Org DG-4874 Order Of Merit rankings settings - Changed so we don't really have to populate the dates and if the use click save it'll just save the default of beginning to end of year by their selected year. - remove nullable prop datetime for EndDate in dto
- Mod: microservice deployment: moving magic incantations from Jenkins into _deploy.
- Mod: microservice deployment: moving magic incantations from Jenkins into _deploy.
- Merged revision(s) 49954 from Trunk: Mod: ScoreIntentFollowupTask: change back to midnight, will run this over RPD for first time ........
- Mod: ScoreIntentFollowupTask: change back to midnight, will run this over RPD for first time
- Mod: ScoreIntentFollowupTask: change start time to 1am for go-live
- Mod: ScoreIntentFollowup: don't sent duplicate emails for new (or past) scoreintents if we can help it (go-live measure so we don't spam too many people because of all their November intents)
- Mod: ScoreIntentFollowup: better logging in scheduled task
- Fix: Oops, needed double quotes here.
- Fix: Scheduledtasks: deleted scoreintent to whs sql
- Mod: Generate set-environment.ps1 so we can use this from Powershell too.
- FIX: ClubCMS: Fix FileManager insert or copy url into CKEditor with filename's that has apostrophe
- Mod: Org DG-4874 Order Of Merit rankings settings Settings area to dictate when a year will start and end for OOM year
- Mod: GolfNZ DG-4874 Order Of Merit rankings Overall Player rankings can now be filtered by week - week numbers are calculated by pulling data from db using dapper
- Mod: ClubCMS DG-4908 The no access page [Needs to be updated in AdWeb as well for this to work] - the zLogin will now look at the the next param and redirect to where the user was previously
- Fix: sql: remove base64 images from scoreintent systememails because it's too large and crashes bulkemail
- Mod: BookingService: buildspec.yaml trying to tag an image as a specific version
- Mod: BookingService: buildspec.yaml trying to tag an image as a specific version
- Mod: BookingService: buildspec.yaml trying to tag an image as a specific version
- MOD: ClubCMS: Added back the comment
- MOD: ClubCMS: Update booking service css for terraces3_1/Template.aspx
- MOD: ClubCMS: Fix 3 column layout
- MOD: ClubCMS: Range booking fix styles on terraces3_1/Template.aspx
- Mod: BookingService: buildspec.yaml work
- Mod: BookingService: buildspec.yaml work
- Mod: sql: remove unneeded tags from score intent attester email
- Mod: ScoreIntentFollowup: test score intents deleted after penalty score applied
- Mod: BookingService: buildspec.yaml work
- Mod: BookingService: buildspec.yaml work
- Mod: BookingService: buildspec.yaml does ECR push now.
- Fix: CodeBuild Dockerfile had a typo in it.
- Fix: BookingService CodeBuild - now we're onto unhappy Docker
- Mod: Moar bookingservice codebuild ing.
- Mod: BookingService: Small codebuild tweaks.
- Mod: BookingService: Small codebuild tweaks.
- Mod: BookingService: Moved Dockerfile and buildspec.yaml to a better place to pick up from codebuild.
- Add: BookingService: some of the codebuild stuff needed to build a docker image.
- Add: BookingService linux target builds.
- Fix: DotGolf.Core.csproj back to normal, I'll just build the damn thing on Windows then.
- Mod: Live: penalty score report column name changes and hyperlinks
- MOD: ClubCMS: Fix 3 column layout
- Mod: ScoreIntentFollowupTask: sync deleted score intents and new penalty scores to WHS when we're done
- Add: Live/Org: PenaltyScores reports
- Fix: Maybe? Try and make generating BuildInfo.g.cs cross platform again.
- Mod: Attempt to make prebuild event cross platform.
- Fix: @$%@$% Conditions won't work for me on Target elements, so can't make DotGolf.Core build on both Windows and Linux aaaaaaaaaaaaaaaaaaaaaargh
- MOD: ClubCMS: Added Register button for Club Competitions Widget, added Title on the Weather Image and added Page properties
- Fix? Condition didn't evaluate the way I wanted, so build failed.
- Add: BookingService docker magic in preparation for new Jenkins docker image build.
- Mod: Bulkemail: test emails now sent with union's default From Address
- Add: Tests: PocoTableFixture test for loading column from memory if already loaded
- Mod: ScoreIntentFollowupTask: add retries so we can see if a score failed to post, and fix it for the next run.
- Fix: Pocotable: now actually uses previously loaded values instead of fetching from DB every time
- Fix: Live: GlobalSetupTeardown constructor failed
- Mod: ScoreIntentFromAppFollowup: better logging of failed score posts
- MOD: ClubCMS: Check JSON for Image Content Tiles before saving
- MOD: ClubCMS: Use UpdatePageControlSettings API when saving content tiles details
- MOD: ClubCMS: Implement GetAllowedDates API for the Range Booking control
- Reverted revision(s) 49885 from Trunk/DotGolf.Adweb - turns out the nginx client_max_body_size change was all that was required.
- Mod: Increase client_max_body_size from 4M to 30M.  30M is the default ASP.NET Core limit, so seems a good number to go to for now.
- Fix: Adweb: Max POST size limit - web.config file has insane limits now; we will restrict this on nginx level so we have a central place to manage the upload limit.
- MOD: ClubCMS+Live: Update error messaging when slot is already booked
- Mod: Autogenerated poco classes.
- Mod: Scoreintentfollowupflow: track penaltyscoreid on the correct table this time
- FIX: ClubCMS: Added back plugins and include wordcount
- Mod: Autogenerated poco classes.
- Mod: Scoreintentfollowupflow: track penaltyscoreid
- Mod: Scoreintentfollowupflow: track penaltyscoreid
- Fix: ScoreIntentFollowupFlow: tests
- Mod: ScoreIntentFollowupFlow: better handling of people with multiple emails, ensure people without emails still get their intents processed
- Fix: DI issue with new ScoreIntentFollowupTask refactor. Add more specifyUTCs for good measure...
- Fix: DI issue with new ScoreIntentFollowupTask refactor
- Mod: ScoreIntentFollowupTask: reminder deadlines should be set from the date we processed the current reminder, not based on when the score was due to be processed. This prevents us sending reminders that say "3rd November" as their deadline for a 1st Nov that we're only processing on 30th Nov
- MOD: BookingService+ClubCMS: Handle max booking
- Mod: ClubCMS: golfireland.css: updated the file paths to the stage/production path
- MOD: BookingService: Change response code for CreateOrUpdateBooking when Entry Number is already taken or Slot has reached the max
- Cleanup: BookingService: Removed a couple of using statements to see if it helps the build error
- MOD: ClubCMS+Live: Range booking Fix delete entry on live and handle already have booking message on ClubCMS
- Add: Booking service will now return the allowed booking date range - passport/{passportUID}/clubs/{organisationUID}/sheets/{sheetType}/allowed-booking-dates
- MOD: ClubCMS: Weather API Key insert to Setting
- ADD: ClubCMS: Added club-weather-widget control
- Fix: Love Golf Play: implement LockWaitAndTake to ensure that we process a Windcave payment result once only.
- Mod: BookingService will now report an error if you try and book more than the max no of slots in a timeslot.
- Mod: ScoreIntentFollowupTask: feature flag
- Mod: Remove redundant constructor from ScoreIntentFollowupTask
- Fix: Live: teebooking ORNS on occasion when removing people from bookings
- Fix: Live: logout bug
- Mod: ScheduledTasks: construct tasks with DI every tick
- Fix: tasks: tick process no longer crashes
- Mod: ScoreIntentFollowup: email tag replacement tests
- Fix: API: Retrieving of potential partners is unnecessary because we already know that the main player (app user) is already teamed - we can already work out the team selections array that is required when invoking Entry.ApplyScoresToCompetitions.
- Fix: Bulkemail: system email template page not reachable in EG+WAL
- Fix: sql: MyEG app -> Wales Golf app (in Wales score intent scripts)
- Add: sql: Wales Golf score intent followup emails
- Fix: Live: subtle PocoTable bug where autofac would use the wrong constructor when constructing something if the intended constructor had a nullable primary key value e.g. public Course(int? primaryKeyValue, IDataConnectionBuilder connBuilder) : base(primaryKeyValue, connBuilder) Mod: ScoreIntentFollowupFlow complete.
- MOD: ClubCMS: Hide leftPanel layout section on mobile
- MOD: ClubCMS: Added Club Competition Results widget and update Club Competitions to display pinned icon
- Mod: Core: ScoreIntentFollowupFlow non-submission penalty score tests
- Merged Reverse revision(s) 49823 from Trunk: Dont have time to deal with this right now... Mod: Core: add some useful string extensions ........
- Mod: Core: add some useful string extensions
- Mod: ScoreIntentFollowupFlow: app scoreintent initial reminder email test
- MOD: Live+ClubCMS: Refactor booking service error checking
- Mod: ScoreIntentFollowupFlow: ISV score intent followup finished. Should only followup General play score intents.
- FIX: Live+ClubCMS: Delete booking timeout
- Mod: TXT Messaging Service should now shut down when NET STOP is called.  The problem was a long duration Thread.Sleep() which would have kept the process running regardless of any Stop() commands.  This has been plaguing me when trying to deploy new code when publishing.
- Mod: UQ_BKEntry_EntryNumber filtered to skip null EntryNumbers.
- Mod: Autogenerated poco classes.
- Fix: Allow nulls on BKEntry.EntryNumber again; this broke the old autobooking stuff.
- Fix: Adweb: Remove hacky timezone thing in editmember page
- MOD: ClubCMS: Implement content update for Club Competitions Widget
- Cleanup: Removed outdated commented code; Grace has already applied a permanent fix for the issue; refer ticket 42844.
- *** DFH CODE REVIEWED TO HERE *** Fix: Wales Flexiclub report header tile showing 0 incorrectly.
- Fix: Wales Flexiclub: Adweb "Send Transaction Reports" section didn't work out fees properly. Fix: Online Subs Transactions report bugs and missed commits.
- Fix: Wales Flexiclub: Rounding error when calculating 3% of £5.50. Mod: Renamed NewMemberSignupReconciliation to OnlineSubsTransactions (a better name given it handles signups, renewals and refunds now). Mod: Slicer now links to OnlineSubsTransactions instead of the old crappy NZ-only ExtQuery report. Mod: ExtQuery: Groups now support SumAggregate which doesn't show its total below a column by default (you use ${Stuff} in the Header or Footer to show it)  ExtQuery docs updated.
- Mod: Core: tests for ScoreIntentFollowupFlow example A (happy path)
- FIX: Live+ClubCMS: Delete confirm timeout
- Add: Utility handler added to allow us to queue unsent/missing emails for an outbound bulk email.  NOTE: Attachments not supported because these can't be re-queued (due to the way the original code works).  To use, go to bulk email /QueueMissingEmails.ashx, it tells you what to do next.
- Mod: Core: ScoreIntentFollowupFlow penalty scores logic
- MOD: Live+ClubCMS: Add Confirm delete booking in Live and change icon and include timeout for deletion
- MOD: ClubCMS: Confirm deletion of Range Booking
- Mod: Reverse Proxy: sites.list: added S,-,1,1,raggc.cw.golf.co.nz and S,-,1,1,royalauckland.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added raggc.cw.golf.co.nz
- MOD: ClubCMS: Add link on the date/time for the Range Booking
- Mod: Core.Tests: DI setup
- Mod: Live: Expire nav cache on logout.
- Mod: SSO: Remove nav cache expiry because it's app-specific of course... -_- moving the code to Live
- Fix: Live: Draw report works for GBI now
- Fix: API: build: missed a file
- Mod: Move dolgolf core DigitalScorecards to namespace. also register with autofac
- Fix: Live: ScoreService build
- Mod: rMyAccount: Account topup: Set minimum top-up amount to 50 and make validation message text more prominent by setting the text color to red.
- Fix: NZCRDataRepo: poco reference
- Fix: ISVAPI: build
- FIX: Live: Range booking delete newly booked
- Fix: API: scorecardcontroller build
- ADD: ClubCMS: Added Clubs Competition Widget
- Add: Core: Businesslogic+Pocotable classes for Course, Marker, and Hole
- Fix: SQL typo in score intent followup code caused unit test to fail.
- Mod: Changed NSwag output filename to include the version number so that we have a way to handle NSwag output changes without breaking everyone's dev environments.
- Fix: XeroAccountingSystem.cs has some different method names now with NSwag 13.14.4.
- Mod: Slicer mods for Wales/Flexiclub.
- Fix: rMyAccount: Account topup: #45141 Pay with saved card - Successfully applied account credit to the member's account but the TBTransaction is left uncaptured and will not be included in the weekly pay-outs to the club.
- MOD: BookingService: Implement email notification on confirmed and deleted booking
- Mod: Configuration profile mod to enable connecting to the Wales development database WADev1.
- Fix: Oops, missed a file for the NSwag upgrade.
- Fix: CreateDB.sql needed database compatibility level 140 so that we can use JSON in some of our latest stored procedures.
- Mod: Upgraded to NSwag.MSBuild.13.14.4 to appease the package nazi.
- Mod: API: AppUserProvider skips DB query if there's no passportId found
- Fix: API: AppUserProvider no longer causes infinite loop. Unit tests.
- Fix: Live DG-4858 #45253 Fix where resigned member is showing in data and return of member data from other clubs
- MOD: Live+ClubCMS: Apply Booking Service API change to handle Delete Booking
- Emergency patch: Commented out AppUserProvider from API since it seems to be causing connection leaks somehow.
- Fix: DG-4859 #45246 Fixed the UI showing that the user is booked for "18 hole" and not "9 Hole" when they have infact booked for a "9hole"
- Fix: Live DG-4858 #45253 Fix join condition for filters
- Mod: ClubCMS: rMemberSignupV2: add a server side validation of the parent/guardian consent.
- FIX: BulkEmail V1: From EmailAddress is not selecting the correct value
- Mod: BookingService now supports updating bookings (we'll only be using this for range booking cancellations for now).
- MOD: ClubCMS: Added 3 layout sections for Terraces 3.1 and update golfnz-news-list control to be compatible
- MOD: Live: Handle API failures and display a message
- Fix: ClubCMS/GolfNZ DG-4853 #45184 Search by date wasn't working for single date search so amended the parse so it handles this
- MOD: ClubCMS: Link my booking to range booking
- Fix: Adweb timezone thing in editmember page
- Fix: Adweb timezone thing in editmember page
- Add: Adweb: Scoreintent create date
- Fix: Teebooking: Fair play policy - Members should still be able to update or cancel bookings even if they have reached the max number of bookings per week. #45267
- MOD: Live+ClubCMS: UI/UX for Delete Booking
- Mod: ClubCMS: Show wordcount in admin control (seems to be silently set to 500 chars so might as well display this to the user)
- Fix: Kounta: Settings page - Unable to save Kounta payment types to internal DG payment types due to an ORNS exception.
- MOD: Live: Range booking show date indicator on hovering slot row
- FIX: ClubCMS: Range booking UTC time at My Bookings
- MOD: Live: Handle deleting the locked slots when changing dates or refreshing the page
- Add: Api: track logged-in-user when making database connections
- MOD: Live: Detect locked message and auto unlock slots using interval call only if there's a locked slots while SignalR push is not available yet
- Add: #results21 README with TODOs etc.
- Mod: Live: Removed Last Login from user management page because it's never set anymore
- MOD: ClubCMS: Range booking not passing entry number and rely on the API for whatever available slot
- Mod: ClubMember: Reverted rev 49569 because seems to be causing failed member searches
- Mod: ScoreIntentFollowup: email sending code
- Mod: sql: Attestor typo
- Add: sql: System email templates for scoreintent followup automation
- Fix: ClubCMS: ClubCmsEmailRegistrationHeaderLogoUrl was pointing to a dead image.
- Fix: Teebooking: Fair play policy: Fix #45267 - Incorrect current booking count for the week.
- Add: #results21 Post competition results back to the API to save it into Competition.R21JSON, and start of code to populate the R21Result table.
- Mod: #results21 UID columns added to various union db tables so that we can track these through to R21.  These columns are nullable and only populated when needed. Add: API endpoint to save R21 json back to union db.  This gets saved in the R21Result table; still a few TODOs sprinkled in there.
- Mod: #results Dirty hack to read results from R21Result and R21ResultMultiRoundResult tables; done by regexing R21 into the SQL source.  Not pretty, but works.  We'll be replacing this over time with logic that renders results directly from the R21JSON (from the Competition table), eliminating the database overhead completely.
- Mod: Autogenerated poco classes.
- Add: #results21 Column aliases
- Mod: SubscriptionRenewal: modify the retry schedule to span 14 days:
- Add: #results21 IX_CompetitionRound_FieldUID
- Mod: Filter these indexes.
- Mod: Autogenerated poco classes.
- Fix: Scheduled Tasks: SubsAutoRenewalReminderEmails: filter the CmemberItem query by ClubId also. A KGC member reported getting a KGC renewal email reminder because his Gulf Harbour subs is about to renew.
- Fix: Nevermind.
- Fix: #results21 the UID column is in fact unique.
- Add: #results21 Covering indexes for new CompetitionDivision and RSEntry UID columns.
- Add: #results21 CompetitionDivision.CompetitionDivisionUID
- Mod: Autogenerated poco classes.
- Add: #results21 RSEntry.RSEntryUID
- Mod: ClubCMS: rMemberSignupV2 and rMemberSignupConfirmationV2: use Windcave transaction's TxnData3 to record the full name. This is useful for identifying Apple Pay and Google Pay transactions, which don’t have a card holder name on Windcave.
- Mod: Autogenerated poco classes.
- Add: #results21 CompetitionRound.RoundUID and FieldUID columns (with index)
- Fix: sql: html syntax error in some system email data: "FS Aldrin" -> ''FS Aldrin''
- Mod: Autogenerated poco classes.
- Add: #results21 schema changes to support adding results back into the union database in a backwards-compatible way.
- Mod: ClubCMS: rMemberSignupV2: add validation to the payment method i.e. make sure the user selects one option
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: rMemberSignupV2: allow tracking of user source (i.e. how the user got to the signup form) using the utm_source URL parameter. To be used initially by EG.
- Mod: #results21 Supports handicap allowances now via the API. Cleanup: Various things.  Added README for nuggets of results21 design tips.
- Mod: ClubCMS; rMyAccountPaymentConfirmation: if the URL doesn't have the "result" parameter, redirect the user to the My Account page
- Mod: ClubCMS: rMemberSignupConfirmationV2: Recurring Mode: replace recurringinitial with unscheduledcredentialonfileinitial as recommended by Windcave
- Mod: ClubCMS: rMemberSignupV2: Recurring Mode: use unscheduledcredentialonfileinitial instead of recurringinitial as recommended by Windcave
- Mod: Internal services are now routed to the dev proxy when we're running in Development; so Dev1 hosted apps will work by default now.
- Mod: Ignored a compiler warning.
- Mod: BookingService: If you pass a null EntryNumber when creating a booking, the API will automatically assign one.  Entries are also returned after creating bookings.
- Mod: ClubCMS: rMyAccount: RecurringMode property value: use unscheduledcredentialonfileinitial instead of recurringinitial as recommended by Windcave.
- Add: BookingService: IX_BKEntry_TimeSlotId to speed up max EntryNumber queries.
- Mod: Teebooking: Index hint because we're trying to find timeslotentries for a member, but sql server chooses the index that gets timeslotentries for a club (which is always greater). Sql server estimates wildly incorrectly when evaluating IX_TBTimeSlotEntry_MemberId_SlotDateTime_Deleted even though it's better in all cases.
- Fix: ClubCMS: "No Access" page redirect: use Response.Redirect instead of PageUtilities.RedirectToPage
- MOD: Live: Implement LockUID on creating booking
- Add: DG-4839 New report [MEMBER DETAILS AND CATEGORY] as request by Royal Auckland and Grange which shows - Member No - Member LastName - Member FirstName - Member Type (Category) - Gender - Member Age - Email Address
- MOD: ClubCMS: Fix range booking
- MOD: ClubCMS: Working on News listing control to render nicely in Terraces 3.1, added 2 properties to handle Page selection of News details and listing page
- Fix: ConnectorAPI: can now handle over 2100 cards in a comp.... O_o
- Mod: BookingService now requires LockUID to be passed into POST booking and POST confirm endpoints for locking to happen properly.
- Mod: BookingService: Locking improved; creating and confirming bookings are now multiuser safe, even with expiring locks. BREAKING: POST booking and POST confirm both require LockUIDs now because of the way the locking works.
- Fix: ClubCMS: temporarily comment out a redirect to the login page. Golf club website users are being redirected to the Golf NZ log in page when accessing the golf club website's My Account page.
- Fix where the clubs weren't being factored in properly for the weekly booking count causing members to not be able to book at multiple clubs for their session in the same week
- Fix: Kounta: Importing an order sometimes crashes if we fail to lookup a product in the products cache.
- MOD: ClubCMS: Added error info
- MOD: ClubCMS: Reload range booking sheet when starting new booking or going back
- Fix: Live: build (KO d.ts files already live in Shared/ts)
- Add: Core.Tests: ScoreIntentFollowupFlow test as POC
- MOD: ClubCMS+Live: Fixes on Range Booking locking UI/UX
- Fix: API: Digital Scorecard: Use the player's marker as the default marker if a) the club does not have a default marker configured for that day b) both player and the playing partner have the same gender.
- Add: Index to avoid clustered index scans on TBTransaction from the Transaction Processor.  This was causing timeouts in Prod NZ.
- MOD: ClubCMS: Range booking get today's sheet
- ADD: Live: Added Range Booking
- Cleanup: Removed rethrown exceptions since the default .Net 5.0 code analyser has decided to take exception to these and fill my build window with warnings.  Rethrowing exceptions for no reason sucks anyway, so good to clean these up.
- Mod: Core.Tests: update DatabaseBuilder+TestBase comments to clarify the DatabaseCollection fixture
- Mod: ScheduledTasks: TASKS ARE CONSTRUCTED WITH DEPENDENCY INJECTION NOW
- Add: Live: new ScoreIntentFollowupFlow.
- Add: Solution file for DotGolf.Core and its unit tests so we can fire these off in a separate Jenkins job rather than as part of ISVAPI/UnionAPI builds.
- Fix: Only run BookingService tests; no need to also test Core.
- Mod: Players Stroke Averages Report Split DOB and Age into separate columns with left text align
- Add: new setting for score intent followup timing
- Mod: Removed the verbose option again, no need to have it.
- Mod: Make build.cmd more chatty so we can see where things are going wrong.
- Fix: DG-4821 #43250 If the VerifyCode has expired the first step will now indicate this - If they're in the middle of creating their actual account and it expired they will get another verification code sent out so they can proceed and complete the account creation.
- Fix: Live: multiclub comp error #45170
- Mod: Bumped NSwag version to fix .Net 5 build error; added net5.0 to DotGolf.Core target frameworks.
- Mod: idk update DotGolf.Core.Tests to include net5.0 to see if that helps.
- Mod: Bumped DotGolf.Core.Tests to netstandard2.1 to see if net-5.0 will play nice.
- Mod: Desperate attempts to make BookingService build with Jenkins and .Net 5.0.
- MOD: ClubCMS: Remove interval refresh of sheets
- Mod: BookingService upgraded to .Net 5.0.
- Mod: Run all tests, not just booking service; hopefully will fix Jenkins unhappiness.
- Fix: ISVAPI: unit tests: remove skipped test (should not have been committed)
- Fix: UnionAPI: finish Core.Tests.TestBase refactor.
- Mod: ISVAPI: unskip test
- Fix: BookingService: finish Core.Tests.TestBase refactor.
- Mod: ISVAPI: DatabaseBuilder has more clear docstring about how to set itself up
- Mod: Core: kill PassportRepo.cs
- Mod: Core: move useful database test base stuff into DotGolf.Core.Tests so we can spin up xunit tests outside of ISVAPI which depend on the database.
- Fix: DG-4817 #45115 When using the file uploader in the Bulk email to hyperlink file etc there is now user feed back when the file is larger than 4MB else there was nothing to go on unless they check the network tab
- Fix: VEND-XERO: Auto-recode closure payments - #43334. GetInvoicesModifiedSince expects modified since date in UTC but we are passing local date instead - convert last register closure invoice modified date to UTC.
- Mod: ClubCMS: Tee Booking payment: card tokenisation: set RecurringMode to credentialonfileinitial
- Mod: ClubCMS: Tee Booking: ConfirmPayment.aspx.cs: after a payment, thought it would make sense to display the booking date and time, not just the time
- MOD: ClubCMS: Fix date selection issue for Range Booking
- Mod: ClubCMS: Windcave card tokenisation: updated RecurringMode from recurringinitial to unscheduledcredentialonfileinitial
- Mod: BulkEmail: recipient query by age (adult / junior): updated indention and removed one extra set of parentheses
- Mod: BulkEmail: recipient query by age (adult / junior): added filtering using Cmember.DOB (so we're not only looking at Member.DOB).
- Mod: DG-4815 View toggle for fair play policy when 'No limit' is selected. Will reset whatever to zero [default] save if the user select 'no limit' and saves
- Fix: Windcave/Transaction Processor: update the Windcave Web Service URL to https://sec.windcave.com/WS/PXWS.asmx - this newer version allows setting of the RecurringMode property using the extendedData element.
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Mod: sql: scoreIntentFollowupState isComplete flag to determine whether we're done
- Add: BookingService: Jenkinsfile.
- MOD: ClubCMS: Handle the locked status for Slots and refresh sheets every 10 seconds
- Fix: Digital Scorecard: /scorecard/list-markers endpoint - Do not apply filter by course Id if the app sends a Course Id value of '0'.
- Fixed missing 'the' for user error message
- MOD: Booking Service: Added LockedUntil for TimeSlot
- Update message from [x hours before the tee time.] to [x hours prior to day tee sheet opens.]
- Fix: Cleaned up some old Adweb crud while I was waiting for a build.  Adweb red bar will now be red in production everywhere.
- Mod: ClubCMS: card tokenisation: set the RecurringMode property to recurringinitial. Also, update the checking of automatic renewals setting--this is already stored in the ClubSetting table
- Mod: ClubCMS: card tokenisation: set the RecurringMode property to recurringinitial. For subs, we auto rebill members during renewals (Flexiclub, KGC, Futures Auckland, EG iGolf, WG Flexi Club), or instalment payments (NZ clubs). For tournaments, we rebill members using their nominated card for their tournament entries.
- Fix: Copy/paste bug replaced DeletedDate load with PassportGuid :(
- MOD: Booking Service: Added PassportBooking to include OrganisationName and OrganisationUID
- Mod: sql: add 'Score Intent Created' to scoreintentfollowupstate
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: 'New Member' should not be available for selection when requesting new membership card in GI - this happens automatically
- Mod: Autogenerated poco classes.
- Mod: Sql: CFRequestReason: update IsHidden and IsChargeable flags on existing data as per Pat's request
- Fix: Schema script error; this index doesn't exist yet.
- Mod: sql: CFRequestreason new columns IsHidden and IsChargeable for GI levies
- fix: sql: added two missing primary keys
- Add: sql: new tables for score intent followup automation
- FIX: BookingService: check client if null
- Fix: API: Get default marker for specific course only - this should be the course where the main player (in the app) is playing. Add: API: DigitalScorecard.GetScoreEntries - Include course name for each entry.
- ADD: ClubCMS: Added Range Booking control, and work around fix to BookingServiceClientEx to resolve local debugging of Booking Service. Added some property in Shared/Data Club and Passport required by Booking Service.
- Fix: API: Build error due to "Passport" class name conflict.
- Fix: DG-4761 #44898 The cropper was throwing [NS_ERROR_FAILURE] when trying to set context filter in Firefox which stops the call of 'SavePromotion' So we only care about this blur if its more than 0. - Removed redundant console logging and fixed JS condition comparer.
- Fix: DG-4797 - Fix removing a player from booking when there is another player waiting in the waitlist - Address the non-payment required when removing player throwing null payment response
- Fix: Clubcms: build (Passport class namespace conflict)
- Add: Ireland: Member benefits link (production).
- Fix: Live: home club change request issue #5003987
- Mod: DG-4797 Redirect old MyTeeBooking page to the new TeeBookings page
- Fix: Performance issue in Forgot Password and Sign Up (EG site)
- Fix: Found an implicit convert that SQL wasn't very happy with (maybe?  apparently?)
- Mod: Reverted part of rev 49069 looking for things that have changed recently and are now using more cpu than before.
- Mod: Will now only add the FailReason to applicable member in the booking and not to the whole lot and checks NonAffiliate so the fair play gets enforced
- Add: BookingService now returns booking entries when getting the whole sheet for a day.
- Fix: Live: Data.Passport references
- Fix: Sub query returned more than 1 value when getting club settings issue
- Fix: BookingService: Client didn't properly initialise itself.
- Mod: Org: Membership card orders on levy invoice
- Mod: wa_tbapplybookingchange_validate Better user message of why they can't book
- Mod: sql: InvoiceLevyItem make NZGASubcategoryId nullable for GI card orders in levy invoice
- Fix: Org: ScoreService build
- Mod: Org: Add member cards to levy invoice for GI
- Mod: wa_tbapplybookingchange uses better index seeking on tbtimeslotentry
- Add: BookingService: Ability to get bookings that belong to a passport OR where the passport is on the booking. Unit tests all work now, which is nice. Moved API structure around a bit to make it extensible and cleaner.
- Add: BookingService: Schema changes to support latest batch of changes.
- Fix: BusinessLogicBase needs to be case-insensitive about primary key column name, because SQL Server doesn't care.
- *** DFH CODE REVIEWED TO HERE *** Mod: Autogenerated poco classes.
- Mod: alter table NZGALevyPrice alter column NZGASubCategoryID int null
- Mod: Autogenerated poco classes.
- Fix: sqlbuild
- Fix: Database builder doesn't appear to like blank files.
- Fix: Gap in SQL scripts.
- Fix: ClubCMS/GolfNZ DG-4759 #43591 Fix the ability to handle 'VerifyEmailOnly' for golfnz site
- Cleanup: Drop unused GMUpload index; it's using disk space unnecessarily.
- MOD: ClubCMS: Make the Image Content Tiles compatible to Terraces 3.1
- Mod: Removed some verbose DebugLog spamming.
- Mod: Removed some verbose DebugLog spamming.
- Mod: Live; correct some tabmember typos
- Mod: Stop logging some Kounta order JSON to avoid spamming DebugLog.
- FIX: ClubCMS: News Article image cropper is having white space when set the cropper to 100%, so I make the autoCropArea default to 0 instead of 0.8
- Cleanup: Removed "Member Balance Updated (Hook)" logging.
- Mod: ClubCMS: iGolf Voucher: shop-payment-result: updated the payment unsuccessful message as requested by EG; also updated the styles
- Mod: Do not log Elasticsearch logging failures to DebugLog; this uses up a lot of space on SQL very quickly.
- FIX: ClubCMS: News Featured control not picking up the latest articles
- Mod: Live: Subscription Voucher Report permissions
- Add: Index to speed up Email deletes overnight.
- Add: IX_Email_Unsent_Filtered_1 to stop mailer service timing out when large bulk emails are sent (sometimes).  Turns out it was not using the IX_Email_Unsent_Filtered index reliably; Priority needed to be the first column on the index.
- MOD: Show all page numbers on the old site News Archive
- Fix: Digital Scorecard: Part 2 of #43150 Hole alias not displaying correctly.
- Mod: Live: Add levy category to member age report for GI #5003980
- Fix: API: /submit-scores endpoint: Assign default start tee Id if Scorecard.StartTeeId is null. #44959
- Fix: API: /list-submitted-scorecards endpoint: Assign default start tee Id if Scorecard.StartTeeId is null.
- ADD: ClubCMS: New control Tournament Venue to display multiple Competition Courses
- Mod: Live: better error reporting when WkHtmlToPdf crashes
- Mod: Live: SubscriptionVoucherReport: apply club permissions - added iGolf's EN stage Club ID
- Mod: Live: SubscriptionVoucherReport: apply club permissions (this report is only applicable to EG iGolf and NZ Flexiclub)
- Mod: Live: SubscriptionVoucherReport: adjust report filter to have Purchase Date From and Purchase Date To
- Mod: ClubCMS: Golf Ireland css: added css to make gallery-swiperjs work on the GI site
- Mod: Live: remove nonexistent file from live csproj
- Mod: Org: replace Golf NZ with {GoverningBody} in two levies email templates
- Mod: NZGALevyPrice table membership card card orders bool column
- Mod: Live: SubscriptionVoucherReport: included voided Order Detail records with VoucherCode for reporting purposes. (Note that these deleted records are not redeemable.)
- Mod: Live: SubscriptionVoucherReport: reorder MemberId column (Member ID is included in the exported Excel file, just moved it next to the Redeemed By column)
- Mod: Live: SubscriptionVoucherReport: date formatting
- Mod: Live: SubscriptionVoucherReport: display Refund Date if the transaction was refunded
- Mod: Live: SubscriptionVoucherReport: added a link (TabMember.aspx?MemberId=x) to Redeemed By value
- Mod: Live DG-4671 Moved 'Junior Age' settings out of 'Fair play policy' section
- Fix: Live DG-4671 Add checks for the current booking week count with year and current operation is not Cancel
- Mod: Org: convert BulkLevyInvoiceCreationProcess to use dapper instead of datasets
- Fix/Mod: ClubCMS: iGolf Voucher: Buy Product: forgot to assign the UserId to user.UserId
- Mod: Autogenerated poco classes.
- Add: BKBooking.BookingUID column
- Add: BookingService: BKBooking.IsConfirmed column to track tentative bookings.
- Add: BookingService: Can now release locks.  Standardised API routes so it doesn't turn out to be spaghetti when we're done here.
- Add: BookingService: Slots controller, locking of timeslots, unit test.
- Fix: API: /list-submitted-cards endpoint fails due to "Hole 19 not found on this marker (Women Yellow 18H Par 72)." exception.
- Mod: EG Women's medal report variable rename
- Add: API: User details - Add first name and last name. Add: API: Teams: Stop users from changing team partners if one of the conditions is true a) Have scored at least 3 holes. b) After round 1. Users can no longer change team partners in the app.
- Add: ClubCMS: zGallery - swiperJS control: Add ability to load images from an existing zGallery - swiperJS control.
- Fix: Live: database access failing after recent mods
- Fix: Live: handicap review report now working for clubs #5003962
- Fix: WHS: Handicap review report was flagging people for upward adjustments too few scores
- Mod: Autogenerated poco classes.
- Add: ClubCMS: DG-4630 - Add column to CMemberHistory to have [UserMemberId] int null - Update Trigger [Cmember_History_Update] to add data to [UserMemberId] on update through ClubCMS - Update View [ClubMemberHistory] so in LIVE the [TabMember.aspx] history tab can have the use who modified details through ClubCMS shown
- Mod: Live: DG-4630 Populate the Member's First and Last name where applicable when they've made the changes in ClubCMS in the history tab with show user ticked
- Add: ClubCMS: DG-4630 Add the ability to keep track of the changes the member is making on their account in clubCMS.
- Fix: Live DG-4328 -The conversion of the ClubId was causing the issue of certain data returning null when the param tries to cast it to string first but was an int then tries to go back to int it blows up and returns null We know it'll be of type int anyway so just force cast to int -- did the same for the date filter look up to cast to DateTime
- Add: BookingService: Unit test (yeah, there's 1) works now.
- Mod: iGolf Welcome Email: copy updates requested by EG
- Mod: Autogenerated poco classes.
- Add: BKGolfRangeTimeSlot table.
- Fix: Live: Subscription Voucher Report: fixed the display of the RedeemDate (it wasn't displaying before)
- Mod: Allow access to the old golf.co.nz if you have a cookie called `x-dg-preview` (any value).
- Mod: Autogenerated poco classes.
- Mod: Autogenerated poco classes.
- Fix: Schema script build broken because of script order - part 3
- Fix: Schema script build broken because of script order - part 2
- Fix: Schema script build broken because of script order - part 1
- Mod: Booking service: got rid of a couple of warnings.
- Fix: Golf NZ public: Remove 'required' CSS class for bank account number if it's not required.
- Mod: Live: SubscriptionVoucherReport: displayed Order No.; added Purchaser Type, Email; make Purchase Date as the first column
- Fix: Org: player handicaps by gender/age report
- Mod: Live: extquery reports cut off sometimes #5003942
- Fix: ClubCMS: apparently there are people with two digit surnames in EG... "Ra"
- Mod: iGolf Welcome Email: apply footer changes requested by Claire, EG
- Fix: API: Unable to submit score via the app due to "Hole 19 not found on this marker (Women Yellow 18H Par 72)." - Should be using the actual hole number and not the alias.
- Add: NSwag tooling and routing for BookingService.
- Add: #bookingservice Development service router added; committing in preparation for generating the nwag proxy.
- FIX: ClubCMS: Fix News Article Tournament tagging not selecting upon loading
- Add: Ireland: Member benefits link to staging environment.
- Fix: Org: PlayerHandicapsByGenderAge RegionSelect broken
- Mod: Scheduled tasks: remove extra diagnostic logging now that issue is sorted
- Mod: Scheduledtasks: truncate lastcroncheckutc date to nearest minute because we only care about minute intervals - the arbitrary number of millisecs taken for the task to run should not mess with things.
- Mod: Scheduledtasks: show milliseconds when outputting starttimes for diagnostics
- Add: Commented-out code to skip the min green fee calculation if we hit CPU troubles on database.
- Add: Index for performance
- Cleanup: Removed disused GetMyBookingsCount().
- Mod: Removed WITH RECOMPILE from wa_TBGetMyBookingsForMember
- Mod: ClubCMS: iGolf Voucher: set the additional message and contact us message to the voucher payment confirmation email
- Mod: Removed WITH RECOMPILE from wa_TBGetMyBookingsForMember
- Mod: Scheduledtasks: diagnostic info to try find out why tasks keep skipping
- Mod: #searchslots Split main query up into 3 smaller procedures so that we can tweak them in isolation.
- MOD: ClubCMS: Enabled Color Plugin in CKEditor
- Mod: #searchslots ClubCMS now calls the new interface to search slots. - Got rid of extensive DataSet code - Changed the main loop from O(n^2) to O(2n) by building a dictionary of timeslot entries. - Removed old defunct SearchSlots green fee popup UI code (haven't cleaned up the proc yet)
- Reverted revision(s) 49344 from Trunk: Mod: Removed unused parameters from wa_TBSearchByClubDayV2_Search_OneClub.
- Reverted revision(s) 49344 from Trunk: Mod: Removed unused parameters from wa_TBSearchByClubDayV2_Search_OneClub.
- Add: Live DG-4671 - Enable or disable additional booking slots
- Add: Live DG-4671 - Check box to toggle visibility and enabling additional booking slots
- Mod: ClubCMS: iGolf Voucher: added a tooltip for the Voucher Code field
- Mod: #searchslots Started refactoring wa_TBSearchSlots so that we can tweak it for performance.
- UPDATE: SystemEmail: Update Sender 'dotgolf@golf.co.nz' to 'no-reply@golf.co.nz'
- Mod: ISVAPI: update unit tests for prev commit
- Mod: sql: drop FK_CMemberHistory_ThirdParty because it's not useful and just gets in the way of unit testing
- Fix: ISVAPI: secondary club could not get DOB for someone they'd uploaded a email/DOB for
- Add: Initial commit of DotGolf.BookingService.
- Add: Live DG-4671 Forgot to commit the designer oops
- Add: Live DG-4671 Schema update to TBClubSettings and Procedure updates to handle the new schema for fair use policy
- Add: Live DG-4671 Fair user policy for member tee booking. Where an administrator can dictate how many bookings a member is allow to have per day, and per week. Also gives them the ability to grant additional booking for the week with x hours prior to opening of tee sheet. TODO: make the checkbox toggle for the additional bookings allowed to either use or ignore
- Add: Live DG-4671 Fair user policy for member tee booking. Where an administrator can dictate how many bookings a member is allow to have per day, and per week. Also gives them the ability to grant additional booking for the week with x hours prior to opening of tee sheet.
- Mod: Live DG-4696 #43520 Move the check for the T2 and VCC tag in a more appropriate location
- Fix: Live DG-4696 #43520 Handle edge cases where vcc or t2 clubs have members that does not belong to them play in a comp
- Fix: Live DG-4696 #43520 Since T2 is legacy and we're shying away from it so we need to make sure this check if the club has VCC attached so the comps by these clubs can be shown
- Mod: ClubCMS: iGolf Voucher: revert previous mod / shorten the query
- Mod: ClubCMS: iGolf Voucher redemption: if the CGOrderDetail redemption dates have values, use them, otherwise, use the CGProduct record's redemption dates to check the voucher's validity
- Mod: Live: Handicap review report region filter for GI
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: iGolf Voucher: mods for the previous commit - rename the new columns added to CGOrderDetail (make it different from the Redemption columns of the CGProduct table) to make sure we don't break anything in Love Golf Play
- Mod: Autogenerated poco classes.
- Mod: ClubCMS: iGolf Vouchers will be redeemable within one year of purchase.
- Mod: Autogenerated poco classes.
- FIX: Script on creating columns CreateDate, ChangeDate and DeletedDate on new table CWLayoutControl
- FIX: Script on creating columns CreateDate, ChangeDate and DeletedDate on new table CWLayoutControl
- ADD: CreateDate, ChangeDate and DeletedDate on new table CWLayoutControl
- Fix: Live: Address field 3 now shows in member history
- Mod: Live: Handicap review report province/region filter for GI
- Fix: API: #44096 - Unreturned team competition card showing up in the app.
- Fix: API: #44096 - Unreturned team competition card showing up in the app.
- Fix: Accidentally committed NOT_SPEC_BUILD
- Mod: UnionAPI: Updated Score endpoint per latest version of the TWG slack messages and spec document.
- Fix: UnionAPI build after recent DotGolf.Core.Data additions.
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: iGolf Voucher: shop-payment-result/view.html: text updates as requested by EG
- Mod: DailyHandicapIndexUpdateTask will trigger every 10 minutes for 2 hours past 00:00, but will skip running if it already executed successfully (per the ScheduledTask table). This will hopefully allow the task to be retried in case we miss a cron trigger or the job times out for any reason.
- Mod: Removed unused parameters from wa_TBSearchByClubDayV2_Search_OneClub.
- Mod: #scd-toggling: Some optimisations to SearchClubDayV2 procedures; these are running (with some success) on NZ1 now.
- Add: Max Server Memory Calculator script added as diag_MaxServerMemoryCalculator so we have it on-hand when we need to do make adjustments on any environment.
- Mod: Live DG-4328 Removed the "_" from the "SubscriptionVoucherReportDataSource" class name
- Add: DG-4328 Subscription Voucher Report will now allow downloading voucher PDFs. Mod: Voucher code is now visible on the report even if it hasn't been redeemed yet. Add: ExtQuery now has generic download capabilities; you only have to add a DownloadFormatter and also implement the GetDownload() method on a custom DataSource to make this work. Mod: ExtQuery now supports Formatters who need to have access to the underlying DataSource; just implement the IDataSourceAccessor interface on your Formatter to have the DataSource property populated.
- Add: ExtQuery now supports FontFamily: MonoSpace if you want to output codes etc.
- Fix: API: Digital scorecard: [DG-4688] Unable to load card after marker changed from B9 to F9.
- Add: Live DG-4328 - Base report for iGolf voucher downloads without the download code at the moment
- Fix: UpdateMemberRankings: no longer crashes on igolf members with no regionId - we'll exclude them until someone complains. They just need to update their address
- Fix: API: Team scoring (app) - Unable to submit a team score thru the app because of an "ERR_TEAM_IS_FULL" exception. The API code calling Entry.ApplyScoresToCompetitions() had all potential partners marked as selected.
- Mod: TLS for members.russleygolfclub.co.nz, I think their HSTS on their apex domain caused the same for their members subdomain.
- Mod: UpdateMemberRankings: allow stats for virtual clubs to be calculated.
- Fix: SSO: was possible for user to PEBKAC something in the ForgotPassword flow and lose their viewstate, so on completing the reset they get thrown to an error page. attempt to prevent.
- Fix: #43510: ClubCMS: rMemberSignupConfirmationV2: Flexiclub: assign a Shopify Discount Code even for returning Flexiclub members
- Mod: #scd-toggling: Run old code by default so that we don't change too many things at once.
- Mod: #scd-toggling: Optimised _OneClub procedure to be as fast as we can make it.
- Mod: ClubCMS: iGolf Voucher: shop-payment-result: in case the user goes directly to the page (without any payment result / not coming from windcave), display nothing (it used to try getting the payment result and display a payment error message)
- Add: #scd-toggling: Another version of the proc that searches only a single club.  At the moment it uses the same code as the multi club version, but we can hack this while we're under load.
- Add: #scd-toggling: Another version of the proc that searches only a single club.  At the moment it uses the same code as the multi club version, but we can hack this while we're under load.
- Fix: Live DG-4696 #43520 - Fix where Nomads and Future clubs can't search for members to enter or modify scores for their competition when they are not at their host clubs and using their own logins.
- Mod: ClubCMS: iGolf Voucher: text casing update
- Add: #scd-toggling Temporary proc to allow us to hack things while the system is under strain.
- Add: #scd-toggling Temporary proc to allow us to hack things while the system is under strain.
- Mod: ClubCMS: iGolf Voucher: shop-payment-result/view.html: html markup update
- Mod: ClubCMS: iGolf Voucher: update labels as requested by England Golf; make the Terms & Conditions label configurable
- Fix: Live: DI scorerepo in scoreservice
- Fix: Live: DI teebookinghelper
- Fix: Live: code style in teebooking.cs passing parameters to something that should have been DI'd
- Mod: #scd-toggling API tee booking controller supported now.
- Mod: #scd-toggling Ability to switch between V1 and V2 of SearchClubDay at runtime depending on a Redis key.
- Mod: Org: deceased flag now show when person deceased at any club, and at which club. #5003901
- FIX: BulkEmail: Build error due to previous commit
- MOD: BulkEmail+Live: Added Email Recipient report linked to Bulk Email Reports
- Mod: Live: I give up, course handicap report goes over 2 pages now. Could not get activereports to format Kenwick Park Mens White in one page. #5003821
- Mod: ClubCMS: iGolf Voucher: allow external links in the pdf
- Fix: ClubCMS: fix the email pattern regex. It was previously accepting incomplete email address i.e. without the domain extension
- Mod: ClubCMS: rMemberSignupConfirmationV2.ascx: replace "Love Golf Play" text with "Voucher"
- Fix: ClubCMS: iGolf Voucher: correct the currency used on the voucher amount
- FIX: Live: Fix Conversion failed when converting the nvarchar value '$EMAILID$' to data type int.
- Fix: API: App not liking anything I did for price annotation text. :(
- FIX: Bulk Email: Refactor query to fix the report not loading
- Fix: API: Teebooking: Set price annotation text to null instead of an empty string. DG app does not recognise this and attempts to render this using the material font library.
- FIX: Bulk Email: Added ClubID in getting the Reports Data
- MOD: ClubCMS: Enable View Poster for Ireland Open Fixtures control
- Mod: Filter out courses that have a TerminationDate set; these should not be visible on golf.co.nz.
- Mod: Filter out courses that have a TerminationDate set; these should not be visible on golf.co.nz.
- Mod: API: Change message to "No tee times available".
- Mod: Autogenerated poco classes.
- MOD: ClubCMS: Enable View Poster for Ireland Open Fixtures control
- MOD: ClubCMS: Implement a way to Add Controls and update Priority of control to reorder the controls of the Page for GolfNZ template
- Fix: Scheduledtasks: GBI interunion course sync now swaps start/end dates on deleted markers like we expect #5003538
- Mod: ClubCMS: iGolf Voucher: update the payment confirmation email subject
- Fix: ClubCMS: no more clustered index scan during forgottenpasswordreset
- Mod: ClubCMS: iGolf Voucher: shop-product/viewmodel.ts: removed unnecessary code
- Mod: API: Teebooking: SearchClubDay - Set TimeRangeText to "Tee times not available" if there are no places available to book.
- FIX: ClubCMS: Image Content Tile hover is outside the bounds of the container
- FIX: ClubCMS: Forgot Password error
- Mod: Live DG-4620 Removed time component when we create NewMembers
- Mod: Live DG-4620 Removed time component as we don't do anything with it as of yet from DateStarted for NonAffiliate
- Mod: ISVAPI: no more no-reply@golf.co.nz
- Mod: ISVAPI: tournament requests sent to generic email
- Reverse Merged revision(s) 49161 from Trunk/DotGolf.ISVAPI: Mod: ISVAPI: Gender change requests go through straight away (this prevents DGI from having to accept all of them, especially if an ISV is erroneously clobbering gender - the club needs to just go back the their ISV software and sort it out) #5003814 ........
- Mod: ISVAPI: secondary club adding DOB should give person an HI #5003852
- Mod: ClubCMS: iGolf Voucher product page: added tick box for T&C's
- Mod: iGolf Voucher: revert one change in the previous commit
- Mod: iGolf Voucher: update voucher pdf template copy, layout, and styles
- Mod: Live DG-4620 Removed time component as we don't do anything with it as of yet from Date_Started
- Fix: Live DG-4620 - Address NonAffiliate_History_Update not triggering when DateStarted had been changed -- Removed the time component from the date time on insert and update for DateStarted for NonAffiliate
- Fix: Teebooking: #43549 Refunds not working - Payments from people who have booked via the app in Guest mode.
- Mod: Autogenerated poco classes.
- Add: Live DG-4620 - Add OldDateStarted and NewDateStarted to the 'NonAffiliateHistory' table and its insert/update triggers
- Fix: Live DG-4620 - Change 'Edit' button to HTML anchor and using JS to toggle visibility of the 'Start Date' calendar component - Address issue for 'SqlDateTime overflow' when Date is unset for 'Date start'
- Mod: ClubCMS: iGolf Voucher: update the pdf filename
- Mod: ClubCMS: iGolf Voucher: applied branding / email header image; fix the quantity value display by correcting the html markup
- Mod: ClubCMS: iGolf Voucher: receipt email: updated the "no-reply" email address to the country's no-reply email address; also updated the sender name to use the merchant name
- Fix: WHSAPI: indexing issue causing sql timeouts when 9h score entered
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: system emails send to all membership contacts (or if there's none, all generic contacts)
- Mod: API: Teebooking: More tee sheet status messages - a) Year (e.g. '21) is no longer displayed. b) Use 24 hour format for time.
- Mod: Autogenerated poco classes.
- Mod: #igolf-vouchers No longer need the GenVoucherCodes utility since voucher codes are now generated on the fly.
- Mod: #igolf-vouchers Removed dependency on pregenerated voucher codes; therefore don't need the CGVoucherCode table anymore.  They are now generated on the fly. Mod: Cleaned up copy and pasted voucher encryption key; instead this lives in Encryption.cs now.
- Fix: API: Include request slot date in the cache key.
- FIX: ClubCMS: Featured article control not hitting the a tag when clicked
- Add: #igolf-vouchers Unique index to ensure no duplicate voucher code ever.
- FIX: ClubCMS: Featured articles control on desktop view and hide description of news article on timeline view for mobile
- Mod: API: Teebooking: /search-slots. Nuke NextDayOpensAt if there is no tee sheet for the day.
- Add: #igolf-vouchers Voucher receipt and PDFs are now now sent out to the recipient email address.
- Add: Squawk can now send email attachments too.  Needed this for #igolf-vouchers.
- Fix: Live: visitors by region syntax error
- MOD: ClubCMS: Implement swiper on News featured block and hide description text on news article for Timeline view
- Mod: #igolf-vouchers small text change, although there are other pluralisation problems in this view.
- Mod: API: Teebooking: /search-slots endpoint. No available timeslots message - add "Please try searching another day for booking availability.".
- Mod: #igolf-vouchers Can download voucher PDFs from the payment confirmation page now.  Multiple voucher files are presented as a list of vouchers so the user can download the individual files. Voucher rendering is in DotGolf.Shared/Shop/VoucherRendering and is built this way so we can call it from wherever to send emails and such.
- Fix: Org: course change email sql
- Mod: API: Teebooking: /search-slots endpoint. Display appropriate message depending on the tee sheet status.
- Fix: ISVAPI: build
- Fix: Org: Build
- Fix: Live: build. ClubStatus.cs is dead, long live ClubStatus.cs (Core)
- Fix: ClubCMS: build
- Fix: API: build
- Fix: ISVAPI: build
- Fix: Live: Build
- Fix: UnionAPI: Build
- Fix: Org: Build. Added ClubStatus pocotable and questionably plural ClubStatuses businesslogic
- Cleanup: Removed obsolete and unused UserSecurityRoleRepo.
- Mod: DotGolf.Core: Marked a bunch of old school ExtendedRepo subclasses as obsolete(warning).  We should be using BusinessLogicBase going forward due to extreme coolness of the latter and extreme suckness of the former.
- Fix: Coursechanges sql error in prev commit
- Add: Clubs business logic to make Marcus happ[y/ier].
- Fix: Build
- Mod: Live: Course change email sent to all generic contacts. #5003753.
- *** DFH CODE REVIEWED TO HERE *** Fix: Missed a reference to LockUniqueIdentifier.
- Fix: Live DG-4633 Added Ordering by their respective name - tag name and member name
- Mod: API: Home club change requested email now sends to all Membership contacts, or failing that, all Generic contacts #5003753
- Mod: Live: 'User' header in the member history should only show if the Blame User checkbox is ticked
- Fix: Left a LockUniqueIdentifier lying around, oops.
- Mod: ISVAPI: Gender change requests go through straight away (this prevents DGI from having to accept all of them, especially if an ISV is erroneously clobbering gender - the club needs to just go back the their ISV software and sort it out) #5003814
- Cleanup: Removed TBLockEx use; we no longer need this (it was previously used by iSeekGolf)
- Fix: API: Teebooking: /search-slots endpoint - Make "no available timeslots message" consistent.
- Fix: WHSAPI: member score listing in combined score mode works properly
- Mod: WHSAPI: backdated 9h scores now recombine in chronological order
- Revert rev 49152.
- Fix: API: Teebooking: /search-slots endpoint - Return next available booking date only if there are timeslots.
- Mod: ClubCMS: Member Signup: iGolf Voucher redemption: adjust the code to allow the user to sign up and "pay" in full using an iGolf Voucher (similar to NZ's Flexiclub Love Golf Play Voucher)
- Add: Live DG-4633 Membership Tags Report Clubs can now view their members with specific tags associated to them under 'Membership' category inside report
- MOD: System Email update sender for some System Emails that I missed to use respective email sender
- Add: #igolf-vouchers Windcave payment flow and voucher code generation. - Payment response is processed (Approve/Decline both handled) through new shop-payment-result control (this control handles both approve/decline results; you can choose whether to implement separate success/failed pages) - We use a dedicated page in /payments to catch the Windcave response; this is important because the response can't be parsed in javascript (for Windcave direct requests). - Voucher code is inserted to CGOrderDetail ready for use - Retry payment flow is implemented; you can try again if the card was declined
- Mod: Live: Add better headers to memberhistory
- Fix: Live: Comp vs general scores report not showing plus handicappers as minus in excel #5003836
- Fix: Live: course change emails should be sent to the club who owns the course, not whichever club we happen to find in clubcoursematrix #5003465
- Fix: SCA: Cards not creating correctly in POS
- Mod: Slicer Report Email DG-3788 Modified so that the NZ support team can access and review sent slicer emails and its break down
- Mod: Live DG-4620 Added 'Edit' for old NonAffiliate members with no 'DateStarted' so the end user can edit a particular NonAffiliate and add the appropriate 'DateStarted' for the NA
- MOD: ClubCMS: Fix failing script
- Fix: API: Typographical errors.
- MOD: ClubCMS: Implement Timeline Layout on Golf NZ News Listing control
- Fix: Live: futuregreenfee product sync was setting a supply price on green fees/cart fees #42447
- Mod: Live DG-4620 Can now modify NonAffiliate start date
- Mod: Autogenerated poco classes.
- Add: Live DG-4620 Add 'DateStarted' so that moving forward the started date for NonAffiliate can be modified in Live Member section
- Mod: api_addscore: turns out the whs validation is weird so i've just copied it for now. If anyone complains about not being able to enter a 9h score with only 6 played holes, maybe we can review WHS and update this. Trying to avoid WHS throwing an error silenty on save and the score showing as Pending.
- Mod: API: Teebooking: DotGolf app enhancements around "Find a Club" a) Ability to determine if the user is searching available time slots from their home club(s), current location or by region. b) Search location no longer excludes clubs with no available time slots. Mod: API: TeeBooking: Search slots endpoint now returns information about when a tee sheet is released for tee booking.
- MOD: ClubCMS: Adjust image overlay of Image Content Tile control for mobile
- Fix: packageversionchecker unhappy with API.Console
- Fix: Shared: tests for finding members, after stopping searches less than 3 chars.
- Mod: Live: remove validation that prevents people adding scores not valid for handicapping (due to incomplete holes). WHS validates for us, at unionlevel we want to avoid throwing away scores.
- MOD: ClubCMS: Adjust margin of Image Content Tile control
- Mod: Autogenerated poco classes.
- Mod: TBLockEx is obsolete (used to be used by iSeekGolf; no longer required and getting in the way now that we want to use Redis for TB locking)
- Mod: Live DG-4620 Start date for membership field is now editable for Members
- MOD: ClubCMS: Add default image to Image Content Tile control
- Add: API: API.Console console app (for testing searchclubday)
- Fix: build after prev commit
- Mod: API: Add parameter to allow ignoring of green fees from searchclubday.
- Add: WHS: Just committing the initial score importer utility with all the hacks/mods we've done to get GBI data in there.
- Add: Indexes added to EN1 while troubleshooting GBI performance.
- MOD: ClubCMS: Add new "Image Content Tiles" control. Also updated FileManager.aspx so the new control can use that to select a previously uploaded image.
- Mod: API: 1900-01-01 is NOT A DOB don't let people login with it in ENG
- Mod: ClubCMS: 1900-01-01 is NOT A DOB don't let people login with it in ENG
- Mod: ClubCMS: replace Cmember reference with CmembersForAssociation
- Mod: ClubCMS: iGolf Voucher: payment step initial commit
- Fix: ISVAPI: hack ProxyResponseHandler to support GetVisitor by uid properly across unions
- Mod: ISVAPI: tests for GetVisitor by uid across unions
- Fix: ClubCMS: No more potential ORNS in debugmode when Teebooking page closes
- Fix: ClubCMS: Search club day boolean changes after refactor
- Add: Default Kounta customer profile images.
- Mod: Org: OK the mens medal report is too slow fetching scores and the page times out :( need a new plan. For now just bring back Women's Medal report
- Mod: Org: Women's medal report has become the Medal report so that the mens teams can use it #5003812
- Mod: Live: Visitors by region report: limit to Jack's Point, remove poorly performing scorecard-deleted validation - will talk it over with Matt
- Mod: Live: remove         private static readonly IConfigurationProfile config = Config.Current;    from GetScoresFromWHS
- Mod: Live: Update Junior Girls medal to latest spec
- Mod: Live: Handicap review report gender and handicap fitlers #5003773
- Mod: ClubCMS: iGolf Voucher: create order and order detail upon form submission
- Mod: ClubCMS: iGolf Voucher: product control: apply minimum number to Quantity
- Mod: Performance: Broke up ListFriendsAsync query into another temp table to avoid execution plan timeouts.  The new query no longer aborts plan generation because of timeouts.
- Mod: Performance: Changed from a table variable to temp table to see if this has any impact on performance.
- Fix: Clubcms: sql error in previous passport commit
- Fix: Live: minor perf issue in MemberCodeManagerEN whereby cmember clustered index could get scanned
- Fix: ClubCMS: other stuff no longer causes scan of the cmember clustered index - BETTER NULL HANDLING NOW
- Fix: ClubCMS: other stuff no longer causes scan of the cmember clustered index
- Fix: ClubCMS: passwordresets to longer cause scan the cmember clustered index TWICE
- Fix: API: friend search cannot be saved
- Fix: API: friend search now recompiles because it keeps making awful life choices. revert previous rev.
- Fix: API: friend search now uses containsTable with a row limit on it so we dont join the world
- Fix: API: Dont search for people if less than 3 chars provided
- Mod: API: The message informing the user to "check-in" at the club is no longer required. Append this message "A recent change to "Find a Club" tab now displays your Home Clubs only on initial load.  To search other clubs, use the search feature to search other clubs by name or in different regions".
- Fix: API: TeeBooking: SearchClubDay performance - part 2. Fix ORNS exception when a person continued as guest in the DG app.
- Mod: API: TeeBooking: SearchClubDay performance mods. (I will add more details after testing. I promise)
- Fix: API: search-club-day
- Fix: ClubCMS/TeeBooking PendingRegistration DG-3787 - Minor bug fix and refactor its actually taking over the booking correctly now
- MOD: ClubCMS: Featured news control adapt if News Article is no longer active, exclude shop-product js
- MOD: ClubCMS: Added Cancel button for News Featured and fix not showing article
- MOD: ClubCMS: Add news-featured control for golf.co.nz home page
- Mod: Vend/Kounta: Remove hard-coded URLs. Use Config.Current.AppResolver to get the appropriate Live URL.
- MOD: SSO: Use ServiceLocator instead of DependecyResolver
- Rename duplicate SQL ID
- *** DFH CODE REVIEWED TO HERE *** Mod: Autogenerated poco classes.
- Mod: ClubCMS: iGolf Voucher: missed in my previous commit
- Mod: ClubCMS: iGolf Voucher: initial commit for submitting the order
- Fix: ClubCMS/TeeBooking PendingRegistration DG-3787 - Will now redirect user to sign up for a casual/flexi club account -> which is in line with the old public site -- Once they complete sign up it'll go to complete the payment/booking per old logic
- Mod: SearchClubDayV2: Create table for #clubs when prepping expensive query instead of using SELECT..INTO
- Mod: SearchClubDayV2: move some variable tinkering of mylat/mylon/regionid/cgregionid out of sql, convert the 'if @OnlySingleClub=1 begin' section into C# string interpolation
- Mod: Revert previous commit:SearchClubDayV2: simplify #datelimits date+time varchar converting to use datetime/date/time conversions instead  (didnt actually help much)
- Mod: SearchClubDayV2: simplify #datelimits date+time varchar converting to use datetime/date/time conversions instead
- Mod: SearchClubDayV2: simplify Category Limit where clause when checking against timeslot date+time (was doing a lot of needless varchar converting) Mod: SearchClubDayV2: only do the console.writelines in DEBUG mode.
- Fix: ClubCMS: Build, after prev commit
- Mod: API: Commit new SearchClubDayV1+V2
- Mod: ClubCMS: iGolf Voucher: product control: style updates
- Mod: ClubCMS: iGolf Voucher: product control: use the image url from the product data
- Mod: ClubCMS: iGolf Voucher: product control: retrieve product details from the database and display on the control
- Fix: Teebooking/Waitlist DG-4472 #43268 - Addresses where some members cannot enter waitlist as the weekday eg friday is registered as 6 and not 5 just setting [set datefirst 1] before selecting from the final table to determine eligibility
- Mod: ClubCMS/GolfNZ DG-4565 #42844 - Will now redirect user to 'my-account' view after login
- Fix: API: Digital Scorecard - Playing partners having different tees. https://dotgolfinternational.freshdesk.com/a/tickets/5003793
- FIX: ClubCMS: SSO issue caused by changes made to use System Email for Verify Member Email
- Mod: Vend: Web hooks: Part 2 - Install web hooks using "https" URLs. #43023
- Mod: Vend: Web hooks: Install web hooks using "https" URLs. #43023
- MOD: ClubCMS: Use System Email for Verify Member Email
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: handicap graph not right aligned #5003739
- Mod: ClubCMS: Refactor SearchClubDay.aspx to use shared wa_TBSearchByClubDay code. Scary. Will review this again in the morning.
- Mod: API: First pass of refactoring wa_TBSearchByClubDay into C#. Moved it to shared code and unit tests passing
- Mod: Scheduled Tasks: Summary Report: added a hidden div to get rid of the extra bullet point that shows up on Outlook (I did a quick Google and it seems like an actual Outlook issue.)
- Mod: Scheduled Tasks: TransactionProcessor/SubscriptionRenewal.cs: add logging of ReceiptId in TBTransaction
- MOD: Live+API: Use System Email for Home club change request
- Mod: ClubCMS DG-4541 #42917 - Remove stray console logging
- Fix: Live: memberinsertedupdate hook could not handle if someone did not have a home club in WHS (import issue) #5003717 #5003722
- MOD: Live+Org: Use System Email for Club Levy submitted for both sending to Clubs and Golf NZ. Update Description for Levy Updated Accepted System Emails.
- Mod: ClubCMS: iGolf Voucher: updated input type and style
- Mod: ClubCMS: iGolf Voucher: text and style updates
- Add/Mod: ClubCMS: iGolf Voucher: initial commit of new shop-product control
- MOD: Org: Use new System Email template for Course changes force approval notification
- MOD: SSO: Use DependencyResolver instead of ServiceLocation for System Email of Forgot Password and Account Creation
- Mod: Live: Allow non-CP clubs to edit the dates for Digital scorecard scores. We've reinstated a lot of EG digital scorecards that had fallen off peoples records at their behest, but people accidentally played on them, e.g. so their score got entered 10/10/2021 but says it was played 01/06/2021 and clubs want to correct this. #5003685
- FIX: BulkEmail: Set Total Unique Recipients to 0 is 1st Recipients From is set to exclude
- FIX: ClubCMS: System Email - Forgot Password Update for Subject and DotGolf logo
- Fix: Reverse proxy: NZ reverse proxy still uses an older version of Centos, so we have to use /bin/service to restart nginx, not /bin/systemctl.
- Mod: minor updates to ManualSoftCapHardCapReportJob after latest run
- Fix: Live: When adding a new international marker for an existing international course, the newly 'created' marker does not show up in the marker drop down despite being selected, which is confusing. #5002386
- Mod: Live: Visitors by region report
- Fix: ClubCMS/GolfNZ/TeeBooking DG-4472 - Addresses button not calling webservice to add user to waitlist - changed waitlist button in model back to input so we can use ID due to the JS being loaded from else where so we can't use ClientID at run time - Address the modal sizing being all funky with certain screen sizes on the mobile. we now calculate available real estate and size this modal accordingly - Fix modal bar not changing colours per page theme. - Addresses rogue add user to waitlist button the side due to one area we didn't need to check - Address onPostback the page wasn't populating the waitlist button on the side
- Mod: ReverseProxy: NZ sites.list: added S,W,1,1,ellesmeregolf.co.nz
- Mod: ClubCMS: bindings.list: added www.ellesmeregolf.co.nz and ellesmeregolf.co.nz
- Mod: ClubCms: hide aussie regions when searching for tee times by region
- Mod: Live: improved the findmembers tests to cover more code paths since there are a lot
- Mod: Enabled Scotland interop for Wales.
- Add: Live: units tests to make sure deleted members are hidden by default
- Mod: prebuild script updated to use new WCREVReplacer utility if it is present on the build server.
- Add: WCREVReplacer utility; MUCH faster than using SUBWCREV.
- Add: Indexes for EN1 performance.
- Fix: ClubCMS/GolfNZ DG-4565 #42844 - Fix when player is not login and trying to navigate to http://www.golf.co.nz/my-account -> this will now bounce them to login page and not 'page-not-found'
- Fix: Live: saving distinct TBClubVisitor info no longer requires loading it into SCA/POG/POS etc - it's selfcontained within applybookchanges #43158 Fix: Live: POS/SCA no longer add memberIds into the nonaffiliateId property (confusing)
- Mod: ClubCMS: replace hardcoded countryId 167 references with Database.CountryCode.
- Mod: Autogenerated poco classes.
- Mod: TBClubVisitor scorecardID column
- Mod: Live: temp hack for Sunday to stop things going into TBClubVisitor until i've refactored it
- Fix: Found another place the NonAffiliate union needed to be excluded.
- Mod: GB&I do not have NonAffiliates in their environment, so we can safely skip running this part of live_FindMembers (it saves about 98% of the query time due to the stuff SQL smokes while building query plans for large queries)
- Mod: Emergency: Slapped `option(recompile)` on a query that was getting a bad plan.
- Fix: ClubCMS/GolfNZ DG-4576 - When a player is entering a national competition their bank account gets deleted. This was caused by the hidden bank account fields during player Registration submission. We're just making it 'hidden' and not toggling visibility through webform as the element is still required by the javascript during submission
- Fix: Live: hotfix for scorecard admin messing up club visitors
- Mod/Fix: Scheduled Task: TransactionProcessor/PayByBillingTokenProcessor.cs: include the Association Name and Tournament Name in the Note, and correct the way the ClubId is derived. (We log the failed payment under the member's home club.)
- MOD: SSO: Use new System Email template for Account Creation
- MOD: SSO: Use new System Email template for Forgotten Password
- MOD: Org: Use new System Email template for Course changes awaiting verification
- Add: /api/v1/automation/vortex-deploy-notify endpoint needed to send JSON to graphite.
- MOD: Update System Email Placeholder Preview Value length
- MOD: Live: Use System Email for Club Levy Updates Accepted
- Add: /api/v1/automation/vortex-deploy-notify endpoint to proxy deploy events to Vortex (the only alternative is to have peering connections which is overkill)
- Mod: Scheduled Task: Transaction Processor: remove the awkward UserSecurityId lookup. PassportNote.PostedByUserSecurityId is now nullable, no need to look up a generic dotgolf or matt user.
- Mod: Autogenerated poco classes.
- Mod: Live: Member Details: update existing PassportNote queries - left join to UserSecurity table. PassportNote.PostedByUserSecurityId is now nullable. If it's null, display 'System'. As recommended by David.
- Mod: sql: make PassportNote.PostedByUserSecurityId nullable, as recommended by David. If this is null, "System" will be displayed on Live.
- Fix: API: #TeamsInApp - "load-scorecard" endpoint now includes team information. Fix: API: #43150 - Hole alias not displaying correctly in the round setup screen (in the app).
- Fix: API: No point running the SQL to fetch players from the tee sheet if the player's scorecard is not linked to a tee booking.
- Fix: ClubCMS/GolfNZ DG-4571 #43149 - CourseInfo markers weren't using Marker Alias but it now is via KO binding
- FIX: #43151 BulkEmail: Check null for href and making sure URL is not empty before execute the block of code
- Mod: BulkEmail: only regions in the current country should be available to select
- Mod: ClubCMS: Flexiclub/igolf members can change their Region in the Edit details page
- MOD: Org: Renamed Club Levy Updates Accepted System Email
- Fix: Live: typo in Region.GetAll sql
- MOD: Org: Change to HTML for Club Levy Updates Accepted System Email
- MOD: Org: Use System Email for Club Levy Updates Accepted
- Fix: Scheduled Task: Transaction Processor: SubscriptionRenewal: replace SubscriptionInstalment with SubscriptionRenewal
- Fix: WindcavePaymentProvider: allow GBP currency
- Add: Index for ScoreIntent, we were scanning this table badly in EN1.
- MOD: Update wa_TBApplyBookingChanges_SendEmails to use System Email Templates
- Fix: Live: Aussie regions showing for NZ in stage
- Fix: API: typo in failed to cancel score submission exception
- Mod: Live: region select code cleanup
- Mod: Live: update code comment
- Fix: Live: if someone is no longer unfinancial at a club, remove that flag from ALL their cmember records #43126
- Fix: ClubCMS: admin-news-article/viewmodel.ts: display Publish Date in local date time
- MOD: BulkEmail/SystemEmail: Set order of System Emails to Name
- Fix: Live: Prevent people's last cmember record from being deleted.
- Fix: DigitalScorecard: User should no longer receive a push notification after creating a scorecard thru the app.
- Fix: ClubCMS: admin-news-article/viewmodel.ts: use the date parser previously used prior Rev 48775, but modify it to accommodate the time component
- MOD: BulkEmail/SystemEmail: Width of System Email name/description column
- Fix: API build error. Fix: API: Digital ScoreCard: Do not send a push notification to the user if a scorecard was created thru the app.
- Fix: API: MyGolf: Handicap change overnight message - convert score captured datetime as per member's home club region time zone.
- Fix: API: #TeamsInApp: Bug fixes after first round of testing with Matt. [DG-4470]
- Fix: Live: Prevent people's last cmember record from being deleted.
- Fix: Live: Prevent people's last cmember record from being deleted.
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: EG want the initial handicap thing removed from Live per WHS which is fair enough.
- MOD: Live: Use SystemEmailProvider to get the System Emails for Club Membership Invoice, Club Membership Statement and Club Membership Subs Receipt
- Fix: Live: deleted cmember record causing error when trying to add a new person with the same name as a deleted person. #5003675
- MOD: ClubCMS: Use SystemEmailProvider to get the System Email for Forgot Password
- MOD: BulkEmail/SystemEmail: Revert using of AngleSharp as it's a big task upgrading System.Runtime.CompilerServices.Unsafe. Refactor System Email cleaning up the HTML within the BulkEmail project so BulkEmail will only be referencing CsQuery. Once HTML is parsed, it will passed to the Provider for saving.
- Mod: ClubCMS: add revision ID to the js file reference
- Mod: ClubCMS: club-fixtures-search/view.html: add revision ID to the js file reference
- Fix: API: Digital scorecard - Part 2. Every time you press 'save and restart round' in the app, a new score intent is created. https://dotgolfinternational.freshdesk.com/a/tickets/5003542
- Fix: Live DG-4523 #34723 - Fixed the 'Member No' not showing up in the active report column for IndividualSubsByCategoryReport
- MOD: BulkEmail: Reference AngleSharp for SystemEmail switch from CsQuery
- MOD: SystemEmail: Use AngleSharp instead of CsQuery
- Fix: ClubCMS: GetNewsArticles: time format update (correct the recent mod: Rev 48775)
- Fix: API: Digital scorecard - Do not create a new score intent every time the user hits 'save and restart round' in the app. https://dotgolfinternational.freshdesk.com/a/tickets/5003542
- Fix: WHSAPI: prevent peoples handicaps being recalculated 100 times when we only needed 1
- MOD: Live > LoveGolf: Set "Show in golf.co.nz?" default to true
- MOD: BulkEmail/SystemEmail: Move System Email to Core project and use interface for DI. Changed undelivered@golf.co.nz to no-reply@golf.co.nz as one of System Email sender
- Mod: ClubCMS: datetimepicker css: make the calendar font size smaller
- Mod: ClubCMS/GolfNZ DG-4524 #41771 - Added sizing dimensions for image 2 links when having a page with 2 - 3 columns
- Mod: ClubCMS/GolfNZ DG-4524 #41771 - Added sizing dimensions for images where it was missing
- Fix/Mod: ClubCMS: Golf Ireland / Golf NZ:
- MOD: Live: Added Help info for Display Fixtures on Competition Setup
- Fix: ClubCMS DG-4541 #42917 - If there is a competition where the rounds numbers and date are the same but is played at a different course the end date for competition will be displayed incorrectly -- Have now grouped the rounds by date time so when we loop over to get the end date time it will get the correct date time by round count
- Fix: Org: women's medal report did not work in org properly
- Fix: Org: women's medal report not returning data in prod for some reason despite it working on my local. hiding from UI
- Mod: ClubCMS: Golf Ireland / Golf NZ: GetNewsArticles: when in edit mode, get all articles (regardless if they are published or not so they could be viewed and edited when the admin is logged in)
- Fix: Org: EG Womens Medal report rename some columns to be more userfriendly
- Mod: Org: EG Womens Medal report rename some columns to be more userfriendly
- Fix: Tasks are started twice instead of once after their scheduled time.
- Mod: WHSAPI: Nine hole scores now correctly combine with adjacent 9h scores, which uncombine if they were already combined.
- Fix: STUPID SPECIFYUTC AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRGH
- FIX: ClubCMS: Fix image doesn't fit on the container for Golf NZ Event Search and Event Listing. Make the overall 100% for the tiles so white texts are readable
- Mod: ClubCMS: Golf Ireland: template: just added rev ID to the js file reference
- Fix: Scheduled Tasks launching more often than they should due to timezone conversion issue from UTC.
- FIX: Live: Fix showing of HTML in the Quill editor, content must still be coming from System Email and user has the ability to modify the invoice email template for sending https://dotgolf.freshdesk.com/a/tickets/43027
- Mod: Live: hide Women's medal report for Live until EG approve it
- Fix: ClubCMS: Golf Ireland: correct the number of total pages
- Mod: ClubCMS: Golf Ireland: News List: apply styles to disabled previous / next link
- Fix: Slicer: RAGGC 3% slice did not work correctly, reports were out of balance and CSV file contained the 5% amount instead of 3%.
- Mod: Live: DG-4450 EG Womens Medal Report - Is now returning required data per spec Handicap, 4 best net scores in entire year, aggregated score differential from the 4 best.
- Fix: TransactionProcessor: Switched to correct version of System.ServiceModel.Http and System.ServiceModel.Primitives.
- Add: TransactionProcessor: Missing packages stopped transaction processor from starting up.
- Fix: Golf Ireland / Golf NZ: Rev 47705 - resolve js trim error when .sticky-right-panel__inner html is undefined
- Mod: TransactionProcessor converted to a scheduled task; using DotGolf.Core Windcave credentials for the environment it is run within. This commit means that it'll be automatically deployed to all environments; only in NZ we have the situation where the old transaction processor EXE is still present; I have committed a mod that makes the EXE quit without doing anything, so ensure that is deployed at the same time as this commit.
- Mod: TBTransactionProcessor: DotGolf.Teebooking.Library contents moved into DotGolf.Shared in preparation to change TransactionProcessor into a scheduled task.
- Fix: Slicer: Removed hardcoded 5.0% for account topup transaction fees; this is now controlled by slicer.Club.AXAccountTopupTransactionFeePercentage (defaulted to 5.0%, set to 3.0% for RAGGC)
- Fix: Vend: We now process gift card top up when importing sales from Vend - ticket #43023.
- MOD: ClubCMS + Live: Added maketime-play9.png image for 9H events if Featured image is not populated. Live Love Golf tab changing Show and view Love Golf to golf.co.nz and making Start and End mandatory (requests from Grace R of GolfNZ)
- Fix: Live: tournament registration player details error
- Mod: ClubCMS: GetNewsArticles: Display only the published articles to date. (Users are allowed to create future dated news articles.)
- Mod: *.cw.golf.co.nz TLS enabled.
- Mod: org.golf.co.nz TLS enabled. Cleanup: Removed unused staging urls.
- Fix: Live: Home club change request bug for in-union home club changes - were not working #5003653
- Fix: Org: hack to hide member count chart for GI because it's all zeroes
- Mod: Live: Move Kounta Gift card addon Enable link to dotgolf only section because apparently we're the only ones who do this anyway
- Fix: Live: kounta product sync throwing an error when trying to locate a dg-created product by barcode #42948
- Add: Live: DG-4450 EG Womens Medal Report - Just a start still need to finish
- FIX: SystemEmail: Changes on retrieving system email making sure it will return default html, subject and sender
- Mod: ClubCMS: Golf Ireland / Golf NZ:
- MOD: SystemEmail: Changes on retrieving system email making sure it will return default html, subject and sender
- MOD: SystemEmail: Update InitialContent
- FIX: BulkEmail: Fix missing column MemberOrNonAffiliateId in SQL query for Tee Booking add recipient
- Add: ClubCMS: bootstrap datetimepicker
- Mod: ClubCMS: DG-4447 #42063 - Date string is now aware of locality - Moved the relevant bits and bobs that's not knockout related to append at the end for the culture and language in UserControlUtilities.cs
- Mod: Slicer: Because we depend on the TransactionFee value when working out iGolf refunds, I had to move the bit of code that updates said TransactionFee to be BEFORE the code that does the refunds.  Otherwise TransactionFee turns out to be null, eliminating those records from the SUM(), and the refund amounts are not subtracted from the slice payment.
- FIX: BulkEmail: Typo error on the SQL query for Tee Books add recipient
- Mod: Live: Capture visitor region details for Jack's Point
- Mod: Autogenerated poco classes.
- Mod: sql: create table to capture visitor region details for Jack's Point
- FIX: SystemEmail: Improper HTML attribute quotation when render
- MOD: BulkEmail: Update default font for GolfNZ to include fallbacks
- Fix: ISVAPI: handicap master withdrawn handicap issue
- Mod: Scheduled Tasks will now retry running missed tasks if they were missed.  This is possible if the /tick process ran for longer than a minute and Task Scheduler didn't start up a new one within the next minute.
- Mod: Autogenerated poco classes.
- Fix: Renamed to -UTC
- Mod: Autogenerated poco classes.
- Add: ScheduledTask.LastCronCheckAt column to track last cron eval time.
- Mod: Autogenerated poco classes.
- Add: TBClubSettings: DG-4490 Add [EnableAddWaitlist] column in [TBClubSettings] so that clubs can toggle the 'Add to waitlist' on or off
- Add: ClubCMS/TeeBooking: DG-4490 - Check if the [EnableAddWaitlist] in [TBClubSettings] has been enabled by the club if yes then show and populate else leave it alone.
- Add: Live: DG-4490 - Checkbox toggling add to waitlist feature for clubs if enabled button will show for members else no
- Mod: ExtQueryCron removed from Live and added as a scheduled task.  This is so that I can get rid of the old school windows task scheduler way of doing things in Ringmaster CF.
- Fix: Subs invoice emails still contained club logo images; cut these away to save on Attachment table size in subs season.
- Mod: Live: feeble mod to connection.hub.url in signalR setup to try get it working in dev AND prod
- Add: API: List markers endpoint - include list of courses in the response.
- Mod: Live: feeble mod to connection.hub.url in signalR setup to try get it working in dev AND prod
- FIX: BulkEmail: Include SPAM to avoid possible issue as per David
- Mod: Clubcms: no more plain text passwords added to tbverifylog
- *** DFH CODE REVIEWED TO HERE *** Mod: API: List markers endpoint - Add ability to filter markers by Course Id.
- Test svn commit speed
- Fix: Live build after ClubhouseProductNavigation cleanup.
- Fix: Live build after ClubhouseProductNavigation cleanup.
- Fix: Org build after ClubhouseProductNavigation cleanup.
- Cleanup: Removed old nav code now that we are using the new Clubhouse navigation everywhere.
- Fix: API build after DataSharingCountries refactor.
- Fix: Org build after DataSharingCountries refactor.
- MOD: ClubCMS+Live: Added ?$WCREV$ to knockout.ckeditor.js and knockout.file-binding.js
- Fix: String case matters - compared lowercase countrycode :facepalm
- Fix: ISVAPI build sorted after the mods to tidy up the interop data sharing stuff.
- Mod: Interop integration tidied up by moving definitions into the configuration profile and removing the API call from Standard.Master.cs.
- Mod: Love Golf Play: header image update, also use S3 (nz.clubassets/900/lovegolfplay) to store the image to avoid having to publish. Golf NZ has been asking to update this every month.
- MOD: BulkEmail/SystemEmail: Update PreviewValue of CourseName and ClubName Placeholder
- Fix: API: MyGolfController: #42377 - Users can only see their most recent scores (first 30).
- Mod: ScheduledTasks: Deploy script now runs NGEN on scheduled task EXEs - this helps startup time and associated CPU overhead on Ringmaster.
- - Add PasswordHash column check so that it can be re-used without repercussions
- Mod: ClubCMS: DG-4471 #42247 - Add PasswordHash column check so that it can be re-used without repercussions
- FIX: SystemEmail: Body is not populating caused by previous commit
- Mod: ScheduledTasks: change to HashPasswords for PassportCredential for non-playing accounts
- Mod: Live: default Reset Low Index to FALSE for handicap adjustments - clubs keep messing this up in GBI
- Fix: CardPoller: Moved Database.ConfigureUsingAmazonSSM() to Program.cs (in the console app and service), not embedded in the bowels of Poller.cs. Doing it this way means the initialisation is done in the right order and you can run it up on your dev PC for debugging.
- Mod: Make DotGolf.CardPoller safe to run concurrently on multiple instances. While we build a new Ringmaster instance there is a short period of time where two boxes will be alive, therefore two card pollers running.  We don't want to print a bunch of cards out at golf clubs more than once.
- MOD: BulkEmail:  Added Mier Font for Golf NZ eDMs
- MOD: BulkEmail:  Use Mier Font for Golf NZ eDMs, remove Styles dropdown on CKEditor and replace it with Font Family and Font Size selection
- Mod: Autogenerated poco classes.
- Fix: ClubCMS: DG-4471 #42247 - Updated SQL Scheme in TBVerifyLog to have PasswordHash when the NonPlaying user gets created - Updated SQL proc [wa_TBCreateAndInsertNewEmailTag] to have PasswordHash during Non-playing account creation
- Fix: ClubCMS: DG-4471 #42247 - Addresses non-playing accounts not being able to reset password when they have an account.
- Mod: Live: show extra info message (GBI only) when club goes to edit their Active Markers
- Fix: Build after prev commit (missing line)
- Mod: Core: remove redundant Feature flag
- Fix: ISVAPI: deleted people not being handled properly when fetching clubmembers
- Fix: ScheduledTasks: Change task priority to Normal (Task Scheduler starts us on BelowNormal by default)
- Mod: ScheduledTasks: Don't launch more tasks if previous instances are still executing.
- Mod: ScheduledTasks: Add Jenkins build number to the directory name in case we deploy the same rev twice.
- Mod: Scheduled Tasks: UseShellExecute=true to avoid blocking the /tick process.
- Fix: ClubCMS: DG-4471 #42247 - Address issue where Non-Playing Member could no login as the SQL was looking for the password hash - Updated SQL Scheme in TBVerifyLog to have PasswordHash when the NonPlaying user gets created - Updaated SQL proc [wa_TBCreateAndInsertNewEmailTag] to have PasswordHash during Non-playing account creation
- Mod: Scheduled Tasks: Instead of run-xxxxx directories, we now use v99999 (with the subversion rev in there) so that we only have to have one new one every time we deploy.  This should save significant CPU and IO on Ringmaster instances.
- Mod: Autogenerated poco classes.
- MOD: BulkEmail/SystemEmail: Added a PreviewValue for CKEditorPlaceholder and use it for System Email Preview
- Mod: UnionAPI: Score endpoint updated with feedback from Adrian (name -> teeName, slope -> slopeRating, crsTeeId -> crsTeeID)
- Mod: Enabling web1+web2 load balancing for golf.co.nz.
- Mod: Live: nav bubble tweak so the number is centred better
- MOD: BulkEmail/SystemEmail: Replace CSS_STYLES
- Add: Live: region select in teebooking for nonaffiliates
- Fix: Live: crashing region filter in player details outside of teebooking/SCA
- MOD: BulkEmail: Revert not used html for System Email Subject and Sender
- FIX: BulkEmail: Error on Update Email Address due to Handicap From or To input
- FIX: ClubCMS: System Email error due to updated query. Also use the Parsed Subject for Forgot Password
- FIX: BulkEmail: Allow add recipients for Members and/or Casuals without Handicap From or To input
- FIX: Jenkins build error due to SQL script
- MOD: Live + ClubCMS: Update Subject for SendEmailSubsInvoice. Update wa_TBSendPaymentWarningsJob to use SystemEmail. SQL scripts to initialize Forgot Password, Tee Booking Cancelled and Tee Booking Complete Payment System Email. Update default subject and sender for Club Membership Invoice, Club Membership Statement and Club Membership Subs Receipt
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"; replace email address nzgolf@nzgolf.org.nz with hello@golfnz.org
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"; replace email address nzgolf@nzgolf.org.nz with hello@golfnz.org
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"
- Mod: Love Golf Play: replace "New Zealand Golf" with "Golf New Zealand"
- MOD: Live + ClubCMS: Use the Subject and Sender from the System Email. Change Forgot Password to use System Email
- Mod: Autogenerated poco classes.
- MOD: BulkEmail: Added Subject and Sender configurable on System Email
- Fix: Live: clubhouse red nav bubble is a funny shape because of change to box-sizing: border-box
- Fix: Live: Member Address and Subs Details report was showing sql in the grid, and missing the address 2 column
- Mod: BackupMonitoringTask: Only report log backup warnings for 1 day after an event. Fix: BackupMonitoringTask: Use database timezone instead of DateTime.Now so that it's easier to run this in development mode for GB&I environments. Fix: BackupMonitoringTask: Only retrieve the last 2 calendar months' worth of backups; no point looking at the entire bucket listing.
- Fix: BackupMonitoringTask opening a new ticket every day due to a log backup hole that happened more than a week ago.
- Mod: Org: deleted person being found by email why
- Add: Live: regionselect for Nonaffiliates when creating scorecards.
- Fix: API: Fix typo in the profile message.
- Add: API: [DG-4462] Add "handicap may change overnight" message if a person has entered a score today.
- FIX: BulkEmail: Communications not visible on Dev
- MOD: BulkEmail: Fix build error due to missing ddls AWS S3 and Core
- ADD: BulkEmail: Added S3 file upload and link attachment to CKEditor
- Add: Shared/ClubCMS: Kiwi Golf Club Welcome Email template
- Mod: ClubCMS: Golf Ireland: pdf file download style update
- Fix: ISVAPI: CRMAPI PEBKAC not checking for ONLY the subscription type that we want when fetching association members by changedate
- Fix: API: Digital Scorecard: #42745 - Rearrange player slot numbers whenever a player is removed from the round. Mod: API: Updated error message.
- Mod: Enable interop pilot for England/Production.
- Mod: Autogenerated poco classes.
- MOD: BulkEmail/SystemEmail: Added BodyForSP column for a clean HTML ready for Stored Procedure to use
- FIX: Live: Fix build by not setting the Club ID
- MOD: Live: Use System Email for HTML Template of Club's Membership Invoice, Membership Statement and Membership Subs Receipt
- MOD: BulkEmail: Guarantee no duplicate message sent to inter-club
- Fix: Org: Could not view resigned member's record if they had home club elsewhere
- Fix: rMyAccount: Stop user from submitting the form when the user presses on the "Enter" key.
- Fix: Org: comp vs general scores report now works #5003589
- Fix: WHSAPI: paging for scores for club endpoint fix
- Mod: Club Communication: Open link (to the solution article) on a another window since this is an external link.
- Fix: WHSAPI: incorrect paging logic when fetching all scores from club
- Mod: WHSAPI: unrounded score diffs should not escape WHSAPI - get scores for club endpoint
- Mod: Live: better sorting of club names when adding other clubs to a multiclub comp
- Fix: WHSAPI: HDPostPCC not correct when fetching all scores for club
- Fix: API: Incorrect handicap index and course handicap displayed on the score detail screen in the app. https://dotgolfinternational.freshdesk.com/a/tickets/5003360
- Mod: Club Communication: Add link to the solution article on push notifications' guidelines and best practices.
- Mod: sql: Make Time Play 9 Welcome Email Sender - update the email template copy and images; make the footer dynamic (get it from BEDefaultElements, removing the Unsubscribe part); update "New Zealand Golf" to "Golf New Zealand"
- FIX: Live: A fix related to my prior commit about the new Competition property FixturePosterUrl and revert the showCharCount
- Fix: ClubCMS: DG-4447 #42063 - JS always rounded the dates to January of next year through the *.format('DD/MM/YYYY') -- Changed the == to === as this is JS...
- MOD: Live: Added PDF filename to FixturePosterUrl
- Add: Live: Player Imports [CSV/Select list previous competition] DG-4262 - CSV upload can now take team names into consideration for grouping players or non-affiliates into their respective teams if the competition is of team type - Select list to import previous competition players also takes into consideration of the competition type if it is of team type then the list is populated by the no. of PlayersToTeam If any players in any of the list both CSV and from the select list is resigned or has an issue there is visual representation on the preview page to show that there is an error
- Mod: Live: display Kounta payment types as preformatted in the settings page, because old House Account has one space, and new House Account has two spaces
- Mod: Autogenerated poco classes.
- Mod: Live: Allow new Kounta Gift Card addon to be enabled for clubs with Gift Card AXAccounts
- MOD: Live+ClubCMS: Convert Fixture Post from Image to PDF. Uploading PDF to Static S3 Bucket and saved the URL to the Competition. Updated Club Fixtures Search to show the View Poster button.
- Add: #results21 unit tests for Scoring (including Max Score). Mod: Give 7 American Stableford points to the magnificent golfer who shoots a hole-in-one on a par 5.
- Mod: API: No longer need to hide House Account payment type because we're going to get it working with the new addon structure.
- Mod: Club Communication: Change "(if any)" to "(optional)".
- FIX: Live: #42656 [DG-4435] UPDATED FIX to Backwards typing on More Details field CKEditor at Competition Setup
- Add: #results21 ResultsController added to allow us to retrieve competition data from the union DB.
- Mod: #results21 Teams structure changed to remove FieldEntryScore[] from FieldEntry; this didn't support singles+team combined competitions, nor did it allow for members of a team to play in different fields. Mod: Removed ResultsTypeUID; we use ResultCalculatorConfiguration for this instead.
- FIX: Live: #42656 [DG-4435] Backwards typing on More Details field CKEditor at Competition Setup
- Cleanup: #results21 Moved a bunch of things around, removed references to the term "multiplayer" because "team" is a better word that is not easily confused with "multiround". Moved Engine to the top level.
- Fix: #results21 Stableford best-of competitions work now; if you haven't played the required number of rounds you are still in the running. Sign removed from Result; replaced by ResultCalculatorConfiguration so that we can carry more info along as the competition types get extended. Added unit test to ensure equality comparer works on this class; it's crucial to allow best-of comps to enforce a single configuration across all rounds.
- Fix: Live: If someone gets reinstated in their original home union after becoming a home member in another union, their home union still thinks it's the home, BUT ITS NOT. Needs to get with the program and update itself from WHS
- Mod: Live: Show comp vs general scores + 9h vs 18 score reports for clubs #5003580
- Mod: Live: Hide handicap comparison report because we're out of go-line and into the wild #5003580
- Mod: ISVAPI: tournament requests now show ISV name
- Add: #results21 BestOf multi round competitions implemented + unit tests.
- Mod: Transaction Processor: SubscriptionInstalment: email template style update
- Mod: Transaction Processor: Renewal Failed email: formatting and text updates
- Mod: Transaction Processor: SubscriptionInstalment and SubscriptionRenewal: summary table style / format update
- Mod: Transaction Processor: SubscriptionInstalment: email text updates
- Mod: Live: Competition invite duplicate checking: code style change
- Mod: #results21 Rolled ConfigurationHistory into Competition so we don't have to deal with 2 top-level objects when sending stuff via the API. ConsoleTest: loaded first test competition from DotGolf.API.
- Mod: Live: Kounta Gift Card add-on production credentials
- Mod: #results21 Refactored to allow easier access to different scoring and result types via JSON.
- Mod: Autogenerated poco classes.
- Fix: API: Digital Scorecard: #TeamsInApp - Ability for users to setup a team in the app - initial commit. Add: PlayerRegistrationService class (/Trunk/Shared/DotGolf.Shared/BusinessLogic/Competitions/PlayerRegistrationService.cs) - I'm going to upgrade DG Live next to use the methods in this class after app testing.
- Mod: ClubCMS: golf.co.nz: Make Time Play 9 query: replace hardcoded dates
- FIX: BulkEmail: Error on editing draft due to PublishToCW not nullable
- Fix: Club Communication: Do not show 1/1/1900 create date when creating a new app message.
- Mod: #results21 Better multitargeting; added some ClientIds, bumped LangVersion to add nullable support.
- ADD: BulkEmail V3: Implement Publish to Club Website similar to BulkEmail Email V2. Making the Email converted to a Club's News Article
- Fix: WHSAPI: handicap review report and getting a single score apply the correct PCC when returning postPCC score diffs.
- Mod: #results21 Multi target .net 5 and .net standard so we can reference the Model project from DotGolf.API (which is on Framework 4.7.2)
- Mod: Autogenerated poco classes.
- Add: #results21 Competition.CompetitionUID column for Results21.
- Fix: API: Filter out old team cards in the app.
- Fix: UnionAPI: swaggerfile was crashing the other solutions. Regenerated the swagger.g.json file and it's looking bare though...
- Mod: #results21 Refactored to have the model classes separated into a different csproj which can be referenced by DotGolf.API.  This is done so we have a bunch of POCOs we can use as DTOs for transporting the competition structure from unionland.
- Mod: #results21 Renamed SubRound to Field; that's easier to get your head around when dealing with multiple round 1's.
- FIX: BulkEmail: System Email is being pickup even if SystemEmailSettingId is null
- Cleanup: #results21 All public types documented; XML docgen turned on to show the warnings.
- Add: #results21 Support added for 4BBB team competitions.
- Mod: Transaction Processor: SummaryReport email template: style updates
- Fix: Live: SSL signalr not working with our hacky subdomain thing
- Mod: UnionAPI: Renamed a few public properties to be consistent with the TWG documentation.
- MOD: BulkEmail: Remove interface and instead use a static method to get the HTML
- MOD: BulkEmail: Remove interface and instead use a static method to get the HTML
- Fix: Org: junior girls medal grouped by club properly, so person can qualify at two separate clubs
- Fix: Live: jargon in Kounta Gift Card settings page header - 'payment type'
- Mod: Live: Kounta gift card settings text description update
- Mod: Live: Kounta gift card API settings description update
- Add: DG-4382 enable/disable check boxes depending on association permission during user creation - When binding view for user creation the disabling and enabling is now being checked depending on if they have the product enabled or not as opposed to before where they could see everything
- MOD: BulkEmail: Delete previous draft before creating new one from System Email and turned on allowedContent for CKEditor to allow tables and other inline styling
- Mod: Live: can delete score intents between unions now #5003468. Score intents from other unions now show the away club name
- Fix: Digital Scorecard: Added 3 guest players but only the main player and first guest player appear on the score entry screen. https://dotgolfinternational.freshdesk.com/a/tickets/5003554
- Add: #results21 Documented public methods; renamed a few things, moved CalculatePlayingHandicap from ResultsBase to SinglePlayerResult. Fixed incorrect DivisionUID being used to calculate multiround results. Add: Check for no duplicated RoundNo values in Competition.cs to avoid the structure being abused.
- Mod: #results21 Got rid of Ranking class, now that SingleRoundResult and MultiRoundResult are in place we don't need this wrapping of simple properties.
- Mod: #results21 Got rid of Result and ResultData, replaced with SingleRoundResult and MultiRoundResult; makes more sense and is faster.
- Mod: TeeBooking DG-4405 - Change 'Save Waitlist' to 'Add to Waitlist' for the dialog -- This button in the dialog will also update to 'Update Waitlisting' if user has a listing - Remove redundant code/Comments
- Fix: Digital Scorecard: Recent submitted scorecards in the app is showing incorrect adjusted scores and 'null' attester names - https://dotgolfinternational.freshdesk.com/a/tickets/5003393 (and it's variants 5003407/5003461/5003484/5003517/5003560). Ensure that we select the active ScoreEntryStage record linked to the scorecard by adding a "DeletedDate is null" check.
- Cleanup: #results21 Renamed SinglesResult to SinglePlayerResult.
- Mod: #results21 Refactor to get more stuff into ResultData so we pass IEnumerable<ResultData> into GetMultiRoundResults() instead of IEnumerable<Result>.
- Mod: #results21 Split results up between single and multiround output for scaling.
- Mod: TeeBooking ClubCMS: DG-4405 - Change main button text from 'Save Waitlist' to 'Add to Waitlist'
- Mod: regenerate WHSClient.g.cs
- Fix: Org: Junior girls medal report updated to match latest spec
- Mod: #results21 Rounds converted to a dictionary as we now need the key lookup.
- Mod: #results21 We now calculate multiround results based on data output from the singleround calculation.  This is done to save processing time and allows us to partition results calculations better.  A single round can now be computed and put in the cache, and then we can compute the multi round results in a separate process.  This means the single round results get produced really quickly, while the multiround results can be queued up and processed later.
- Mod: WHSAPI: score intents return the Organisation name for display in other unions
- Fix: WHSAPI: No HDPrePCC or HDPostPCC should escape WHSAPI unrounded.
- Fix: Live: bulk email for non v3 clubs was not linked to a nav item
- Fix: Live: SpamV3 button showing erroneously
- Mod: Live: ISVTournaments linked to Home Navitem
- MOD: BulkEmail: Added ISystemEmailProvider to be used to retrieve System Email HTML and replace all placeholders with values
- Mod: Transaction Processor: SubscriptionRenewal: use the ClubMemberLoginUrl setting
- Mod: Transaction Processor: Subscription Renewal Failed email templates: minor text updates (for consistency)
- Mod: Transaction Processor: Shared: added the RenewalFailedHeaderImage setting to Settings.Subscriptions.cs (later on I'll be removing it from Settings.ClubCMS)
- Mod: #results21 More validation added: Ensure each entry is only in a round a maximum of one time.
- Mod: Removed WITH RECOMPILE from wa_TBSearchByClubDay because of cpu impact.
- Mod: Transaction Processor: SubscriptionInstalment and SubscriptionRenewal: report format update: added missing tbody tags to properly apply styles to the table
- MOD: ClubCMS: Rename the filter button from Club Search control
- Fix: Live: club membership url now validated with same horrible regex garbage as the club website url
- Fix: TeeBooking ClubCMS: DG-4405 - Addresses where 'Add to waitlist' is not showing when booking slot is less than 4. Mod: TeeBooking ClubCMS: - The side button 'Add to waitlist' will now set 'start time' to whatever slot is clicked on - Verify if booking user matches the criteria of booking slots eg. Female only slot and user is male then 'Add to waitlist' btn will not show
- Mod: Live: Clicking Communications tab will take user to Bulk Email v3 if they have it
- Mod: Scheduled Tasks: SubsAutoRenewalReminderEmails: include annual categories only
- Mod: Report: Missing Billing Card Report: order by Category Name instead of Category ID
- Mod: Report: Missing Billing Card Report (Flexiclub): include Membership Category (so that Flexiclub can determine who are the Honorary members on the list)
- MOD: ClubCMS: Add some style spacing on Club Fixtures as requested by Matt Q
- Mod: Inconsequential change to Connector to check that updates still work in a TLS hosted DotGolf Live.
- MOD: Live: Change the order of Inter Club Messages to Date desc
- Fix: Avoid mixed-content warnings by loading the subs chart over TLS.
- Fix: bootstrap.pl: missing semicolon
- Fix: Nginx bootstrap.pl: Sorted out all non-error stderr output so Jenkins shows us a green icon when a promotion worked.
- Mod: Bunch of http:// urls updated to https:// for new Live/Edge certs.  This is a nice-to-have (slight speed advantage) since there is also an automatic redirect on nginx.
- Fix: Reverse proxy bootstrap.pl: Removed a couple of lines that generate STDERR output.
- Fix: Reverse Proxy deploy: Incorrect S3 bucket location in bootstrap.pl (after Jenkins job rename)
- Reverted send-command fix; turned out it was because of a space in the build job name.
- Fix: Reverse proxy publish in stage stopped working; presumably AWS environment changes??  For some reason && is now escaped to \u0026\u0026.
- Mod: Live and Edge are now TLS enabled.  This was necessitated by the localhost connectivity issues introduced by Chrome 94.
- Fix: ClubCMS: rMyAccount: instalment payment on scheme used by Pakuranga: handle rare cases where the invoice (on instalment payment) doesn't have an instalment item
- Fix: Org: TopNImprovers report: Should not show lowest score in report, it's only for sorting
- Fix: Transaction Processor: SubscriptionInstalment: invoices on scheme used by Pakuranga: handle rare cases where the invoice (on instalment payment) doesn't have an instalment item
- Fix: Build: regen WHS/WHSClient.g.cs
- Fix: Org: updated junior girls medal reports to be correct with postPCC score diffs. Hiding 2 of them because they're too slow and time out.
- DigitalScorecard: Allow team scores to be submitted via the app.
- Fix: Org: Deleted scores should not count towards Junior Girls Medal results
- Mod: WHSAPI: updated unit test for prev commit
- Mod: WHSAPI: getscore returns HDPostPCC properly this time not hammer database
- Mod: WHSAPI: getscore returns HDPostPCC properly
- Fix: WHSAPI: commit updated swagger.g.json
- Mod: WHSAPI: FullScore includes HDPostPCC now
- Mod: Live/Org: Junior Girls medal top improvers breaks ties using lowest score in period
- Mod: Autogenerated poco classes.
- MOD: BulkEmail: Rename new tables of System Email to singular name
- Fix: ISVAPI: timezone handling for changed members not correct for NZ database
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: DG-4392 #42027 - Added regex to check if the http needed to prepend to the url password reset link or not. -- If required append else just use the one given.
- Mod: Shared: SubsRenewalReminderAddBillingCard.txt: updated email text
- Mod: Transaction Processor: SubscriptionRenewal: replaced hardcoded "no-reply@golf.co.nz" with the country's default email address (this will be needed next month, when Wales Golf starts using the automatic renewals).
- Mod: ISVAPI: unremove not-useless memberid saving for clubmember syncing
- FIX: BulkEmail: Push Notification recipients count displaying object type instead of number. Added missing ko mapping options
- Mod: Scheduled Tasks: SubsAutoRenewalReminderEmails: replace $GRACE_PREIOD$
- Mod: Scheduled Tasks: SubsAutoRenewalReminderEmails: include those without a billing card - and send a different email reminder for them (to add a billing card)
- Mod: Shared: EmailTemplates: added email template for subs renewal reminder - add billing card
- Mod: ReverseProxy: NZ: apply TLS to taupogolf
- Fix: BulkEmail v3: Drafts - Pass an empty string to Handicap.TryParse() instead of null.
- Fix: Shared: Handicap class - Revert SVN Revision: 48240.
- Fix: live/org build: missing generated file
- Mod: Live: Kounta House account addon functionality being moved to the main DotGolf addon, gift cards being moved to the secondary addon
- Mod: API: Kounta House account addon functionality being moved to the main DotGolf addon, gift cards being moved to the secondary addon
- Fix: WHSAPI: handicap review report could not handle igolf
- Mod: Autogenerated poco classes.
- FIX: BulkEmail: Add script to reorder System Email SQL scripts
- FIX: FIX: BulkEmail: Delete script to reorder System Email SQL scripts
- ADD: Bulk Email: Added System Emails Tab, added new DB tables for System Emails and its settings for Club or Association. Created CKEditorPlaceholders table to store Placeholder keywords making it standard and unique across all System Emails. Added System Header and Footer on BEDefaultElements, to not use the standard Header and Footer.
- Mod: ISVAPI: when fetching all members for club, order by memberid to make paging consistent
- Mod: ISVAPI: remove useless memberid caching for clubmember syncing
- Mod: ISVAPI: remove useless memberid caching for clubmember syncing
- Add: Scheduled Tasks: SubsAutoRenewalReminderEmails: email notification sending for members whose subscription will be automatically renewed, and whose billing card will be charged soon. They will receive the notification twice: one month, and one week prior the automatic renewal processing.
- Add: #results21 Multi-round results (simple combined results for now).
- Fix: API: better handling if more than one club are linked to the same lightspeed company - the addon doesnt support that
- Fix: API: Refunds were not processing properly for the new house account addon in Stage. Need to verify that this mod doesnt cause double-refunds because of the old code that handles refunds
- Fix: Live: AwayUnion home club would show as blank in member page if the club did not have a full name in WHS
- Fix: Live: Could not add person to competition round for a multiround comp with two Round 1s where the rounds are played at different clubs.
- Mod: #results21 performance, cleanups, nullable enabled, more competitino validation rules added.
- Fix: API: Do not log "AUTH2458 Token is too old and cannot be renewed." exceptions.
- Add: Org: DG-4382 Can now grant user permission(s) if they have the product(s) enabled in their system to: Tournaments - Full access, Read-Only, Live Scoring admin Pennant - Full access Bulk Email - Show this option but ability to toggle this comes down to if they have the product enabled or not
- Fix: Live: weird css issue causing competition page field groups to be smaller in Stage
- Fix: Live: Multiclub comp dapper issue
- Fix: ClubCMS: sql typo in prev commit
- Mod: #results21 more speed.  Going to leave this here for now, I'm not happy with this yet, especially with larger competitions.
- Mod: #results21 more performance tweaks.
- Mod: Results diagnostics report updated to use shared code from Result.cs rather than a copy of the multiround scores SQL. Add: Results diagnostics report now has a link to take you directly to score entry from a multiround result; this will hopefully help when we're desk checking results.
- Fix: ClubCMS: prevent duplicate member record being created for the same number in GBI when signing up for iGolf #5003420
- Mod: API: House account checkouts no longer use Form.ToString to verify signature because it messes with the form data order, which failed for refunds.
- Mod: API: House account checkouts should convert between kounta currency and the AXAccount currency
- Mod: API: Another final attempt to debug this house account checkout thing in Stage before contacting Kounta support
- Mod: API: Another final attempt to debug this house account checkout thing in Stage before contacting Kounta support
- Mod: #results21 Performance improvements, moved to ordinal+countback instead of position+rank.
- Mod: API: Another final attempt to debug this house account checkout thing in Stage before contacting Kounta support
- Mod: API: Final attempt to debug this house account checkout thing in stage before contacting Kounta support -_-
- Mod: #results21 Just some code cleanups.
- Mod: #results21 Moved solution file.
- Add: #results21 Initial commit.
- Add: Directory to house ResultsEngine2021
- Mod: Autogenerated poco classes.
- Mod: NZGALevy.HomeClubId is now nullable to support out-of-union secondary members (someone who doesn't have a home club in our union).
- Fix: Live: course handicap report no longer looks weird for markers with a future end date and another future dated marker version #5003424
- Fix: Live: could not access scoring record for resigned people. #5003447
- Fix: Live: club website URL validation regex update. Awful.
- Mod: ClubCMS: injection attack blocker powerup
- Mod: API: Feeble attempts to fix EG app errors for people who are secondary EG members, home in Wales
- Mod: API: another temp override to check contentlength of incoming kounta request
- Mod: API: temp override to check contentlength of incoming kounta request
- Fix: Live: terminated courses should not be searchable past their termination date when looking for markers in SIC #5002832
- Mod: Transaction Processor: SubscriptionRenewal: log the emails sent to the member in the PassportClubLog table
- *** DFH CODE REVIEWED TO HERE *** Fix: rMyAccount: Club accounts section is not updated after switching to another club. Mod: rMyAccount: Add ability for members to create a house account on the fly - this is done when the user clicks on the "Pay ..." button. Mod: rMyAccount: Remove caching in when loading up member's accounts.
- Mod: API: feeble attempts to read the incoming request body in Staging (House account payment type)
- Fix: API: house account payment type processing was trying to read a request body that has already been read. Need to seek to start of request stream.
- Mod: ClubCMS: rMyAccount.ascx: Move tournament billing cards section down so members don't see this first thing when they go to their my-account page.
- Fix: API: house account payment type processing was trying to read a request body that has already been read. Need to seek to start of request stream.
- Mod: API: Kounta house account payment debugging code - signature verification is not working for some reason.
- Fix: UResults: DG-4362 #42368 (Kenneth+Nikky) - CompetitionTypeId field not populated when building the competition results list.
- Mod: wa_TBSearchByClubDay - added WITH RECOMPILE to avoid parameter sniffing issues when we're under tee booking pressure.
- Mod: TransactionProcessor: updated code comment
- Mod: TransactionProcessor: SubscriptionInstalment: use the summary report template; replace hardcode Windcave User ID
- Mod: TransactionProcessor: SubscriptionRenewal: note text update
- Mod: TransactionProcessor: SubscriptionRenewal: use the summary report template
- Add: Shared: TBTransactionProcessor: summary report email template
- Mod: ClubCMS: rMyAccountPaymentConfirmation: update TBTransaction.ReceiptId so that we link Receipts and TBTransaction records up directly.  This will be used when processing refunds.
- Mod: API: the API side of Kounta house account payment type
- Add: Live: Kounta House account addon auth. Bit of a hack right now, and we don't actually need the extra Settings because we only care about authenticating once, but this is a start so we can test in stage.
- Fix: Live: Subs Reports: Missing Billing Card: added BillingToken.DeletedDate is null in the condition
- Fix: Shared: #42332 CMembersForAssociation method returns null for PGA members.
- Mod: ClubCMS: rMemberSignupV2: validation of checkbox and radio button: use change instead of focus when clearing out the css error class (focus seems not to work on mobile ios?)
- Mod: ClubCMS: Account top-up: Do not charge a 5% transaction fee if the club is absorbing this fee - This is driven by the Settings.OnlinePayments.AXAccountTopUpTransactionFeeChargedToClub. Mod: Hide the message about the 5% transaction fee if the club is absorbing this.
- Fix: Live: DG-4190 [Combine all line items into a single Subscription line item on invoices] - Saving check box state was being messed with on saving during post back by the view state loader. Shifted this to only do this when its not postback... so silly sigh
- Mod: ClubCMS: rMyAccountPaymentConfirmation: removed extra space
- Fix: rMyAccountPaymentConfirmation: use dynamic currency; replace hardcoded dollar currency symbols
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS/GolfNZ DG-4360 #41408 News details for Golf NZ page title is now updated dynamically to whatever the article title is as opposed to 'News detail - Golf New Zealand"
- Add: API: New endpoint for Kounta House Account payments using the new Payment Type option in our Kounta integration
- Mod: ClubCMS: Settings: added the DotGolfShop production PX WS / PX POST username and password
- Fix: ClubCMS/GolfNZ: DG-4358 - Addressed all competition view for players in golf.co.nz where it was not returning data. Filtering out deleted data first into the temp table for be selected.
- Mod: Live: DG-4354 - Add new sub menu under setting called 'Membership Categories' which redirects to [Categories/default.aspx?levelCode=MEMBERSHIP_CATEGORIES]
- Fix: ClubCMS/GolfNZ: DG-4352 #42298 - Address issues where a member cancels their booking from GolfNZ and the wait listed player is not auto-populating the newly empty slot
- Add: Token rebill support for house account topups on golf.co.nz.
- Fix: ClubCMS: DG-4278 - Fix where 'Add to WaitList' where it would appear in non-book able slot
- Mod: ClubCMS: sql: rMyAccount: define existing control property MemberLoginPage
- Mod: ClubCMS: rMyAccountPaymentConfirmation: derive the passport id from the member id (not from session, in case the member is logged out for some reason (we still need to process the transaction))
- Fix: ClubCMS: rMyAccountPaymentConfirmation: replace "Settings.Subs.DPS_USER_ID" with the country profile's Windcave user settings
- Mod: Live: remove old calendar subnav from functions, prize templates, and cleaned up references to it.
- Fix: #41018 (but the Hastings event issue #40310 also depends on this being fixed) Results:  If you remove a scorecard from all competitions it's in, and then add it back to any competition, you get duplicate copies of the same scorecard showing up in Scorecard Admin.  This is because the RSScore record gets left over from the previous batch of competitions (and never deleted - by design I think).  But when the new comps are added back on, the RSResultEntryScore table is used to check for RSScore records instead of the RSScore->ScoreId column. Mod: Results: Small performance fix - don't call into api_AddScore with all NULL values; waste of time, it reports an error which is thrown away anyway.
- Mod: StartSheetMonitorJob made DebuggerNonUserCode because it was annoying me while debugging stuff.
- Fix: WHSAPI: home org changes idempotency not working
- Fix: Live: visitor tab should show local union member number if possible
- FIX: BulkEmail partial views not added to the project
- Fix: Org: account setting page not has proper nav item
- Fix: ClubCMS: Wales Flexi Club Welcome Email: replace double quote with single
- Mod: ClubCMS: Wales Flexi Club Welcome Email updates as requested by Sandy
- Fix: #interop Handicap lookup didn't work for one of the HandicapProviderWHS overrides. Mod: SIC will not allow scores to be returned for AwayUnion homeclub members (until we have done the score endpoint anyway) Mod: Small tidyups around visitor options screen.
- FIX: Bulk Email: Paragraph 0 margin-bottom within CKEditor content
- Fix: ClubCMS: TeeBooking: #42197 - User was not asked to pay for at least 1 booking entry when it is required (TBSetting.RequireOnlyOnePaymentPerBooking).
- Mod: #interop Interop search: Do not create WHSAPI records for away union members; we do not control their handicap. Fix: TabVisitorOptions.aspx had "Affiliated Member" in the subheader for everyone.  Replaced this with their last known home club or union name. Fix: Interop search: Incorrectly returned MemberUID (in MemberQuickSearch) instead of CMemberUID which led to problems with Add Member down the line.
- Fix: #interop Member Quick Search service was returning away union membership numbers in the cached club member listing, which meant that you could search for a scottish member by their Scottish golf number while looking at Live NZ /without/ selecting Scotland first.  For countries with overlapping number ranges this would have caused a mess.
- Mod: Live: HandicapChangeReport can now filter by changed members only
- Fix: #interop Just cleaned up a few unnecessary parameters being passed into a query.
- Fix: #interop Duplicate CMember records inserted when searching for other union members.
- FIX: BulkEmail - Delete Draft not working
- Fix: API: DigitalScorecard: /save-score endpoint - ensure that we retrieve the active scorecard record.
- Fix: Scheduled Tasks: run-* directories were not being cleaned up properly due to an incorrect assumption that "bin\" would be in the path.
- Fix: Shared: Handicap.TryParse method fails when passed a "null" handicap string.
- Add: API: ability to configure how far away from a club you can be to print a digital scorecard - currently DotGolf only (DB)
- Mod: Autogenerated poco classes.
- Add: sql: new ClubSetting: UserProximityToClubHouseForScorecardMetres
- Fix: Live: Ordering of cmember records not as expected when getting a members memberships
- Mod: ClubCMS: Member Signup: Members and payment details section: add frequency of automatic renewal billing (applicable initially to Flexi Club, Flexiclub, iGolf)
- Fix: ClubCMS: my-scores/viewmodel.ts: handle null scores
- FIX: BulkEmail Push Notification not sending on Members/Casuals recipients due to MemberOrNonAffiliateId and PassportId not set
- FIX: Fix Inter Club Message Inbox not clearing the unread status
- Fix: Org: build. Use the same Shared.InterClubMessaging as Live (because competition_ng needs it sigh), and removed interClubMessaging inbox from org because not used
- Mod: Live: Move InterClubMessaging  to Shared folder so org can use it - org doesnt actually need it, but competition_ng need it, and Competition_ng is in the shared folder...
- Mod: Autogenerated poco classes.
- ADD+MOD: Bulk Email: Added Golf Club Contacts as recipients with a feature that can send Email as Inter-club message (query is from the latest email from David). Added Handicap range on Members/Casuals recipients, removed duplicated partial views and updated PushNotification RecipientsFrom with the correct partial views. Updated Email builder button to make it a little smaller.
- Fix: DG-4320 #40310 Results were not being combined properly for team competitions where the individuals forming each team play on different dates (but on the same RoundNo).  Fixed this by joining on CompetitionRoundId -> CompetitionId+RoundNo -> CompetitionRoundId instead of just CompetitionRoundId.
- Fix: ISVAPI: CRMAPI was not filtering unsubscribed people by the correct subscriptiontype
- Fix: Live: duplicate card requests on the same day no longer allowed ever again ever #5003373
- Fix: Org/BulkEmail: [DG-4191] #41796 #41273 - Address where WebUser is null when they have never visited BulkEmail before --- Encrypt and parse webuser data into query url which gets decrypted and deserialised in bulk email
- Fix: Org/BulkEmail: [DG-4191] #41796 #41273 - Address where WebUser is null when they have never visited BulkEmail before -- We create the webuser and save it to its session via parsed encrypted data from url query - Minor clean up on un-needed lines of code
- Mod: API: Get active scorecards - add team name.
- Fix: Build: ??? ScoreEclecticRepository??
- Fix: Build: crappy vs merge messing up my nav file
- Add: Live: multi club comps
- Fix: API: Exclude cards linked to team competitions where each player submits their individual score if Features.AllowTeamScoreInTheApp is off.
- Mod: Updated Comments as to why methods has been added it back for reference
- Fix: Public.2012 - Re-Add the old [ScoreEclectic] Methods as the old site need this
- Add: Save table sizes scheduled task to replace the old sql job.
- Fix: SSO: Web.config.Production not updated
- Fix: API: Fix typo/grammar.
- Mod: Transaction Processor: SubscriptionInstalment: when querying the clubs for processing, make sure that the club has the SUBS and SUBSP products enabled
- Mod: CasualGolf: DG-4171 #41402 - Updated SQL to check for home club and get the home club email
- Mod: Transaction Processor: SubscriptionRenewal: just added sorting when querying the clubs for processing
- Mod: Transaction Processor: SubscriptionRenewal: when querying the clubs for processing, use the ClubHasProduct view instead (to simplify the sql script)
- Fix: Live: courses nav for non NG clubs showed two subnav tabs highlighted
- *** DFH CODE REVIEWED TO HERE *** Mod: Transaction Processor: when querying the clubs for processing, make sure that the club has the SUBS and SUBSP products enabled
- Fix: ISVAPI unit tests
- Mod: Autogenerated poco classes.
- Mod: sql: Add interclubmessageId to CompetitionClubInvite
- Add: Live: course-marker selector lets you specify additional clubs' courses to include alongside home courses - used for Live multi-club comps.
- Fix: DigitalScorecard: Failed to apply a score to singles competition. Mod: Apply ellipsis only to team names longer than 10 characters.
- Fix: API: DigitalScorecard - Unable to submit team score due to missing SQL parameters @GrossH10 to @GrossH18. Mod: Minor mod comment.
- Fix: API: CheckInAtClub.InfoMessage not set.
- Add: API: DigitalScorecard: [DG-4276] Enable scoring for team competitions in the app. Fix: API: When a visitor at the club has paid a green fee using unattended green fee payment, the option to create a scorecard is not shown.
- Mod: _space_used table changes to accommodate slicer schema.
- Mod: Wales: updated Windcave PX POST password
- Mod: Autogenerated poco classes.
- Fix: ISVAPI: change email sender name for ISV tournament emails to use the default
- Fix: sql: rename table ClubCompetitionInvite to CompetitionClubInvite to match existing schema pattern for CompetitionClub
- Fix: ClubCMS: DG-4261 #36669 - Add additional check before returning empty view to see if its eclectic or not
- Mod: SqlTraceToElastic: Work out the vortex hostname properly.
- Fix: API: Some scorecards (not returned) are still hidden from the app. https://dotgolfinternational.freshdesk.com/a/tickets/5003275
- Mod: SqlTraceToElastic: md5 hash for queries, fix duration.
- Mod: Allow multiple roles in TARGET_ROLE (just list them comma-separated).
- Fix: Live: Clubs without POS should not be redirected to the POS url - they dont have permission.
- Fix: Live: POS nav showing for clubs without pos or access to any POS menuitems
- Fix: ClubCMS: Member Signup: days count
- Mod: Scheduled Tasks: Log a few more stats to Vortex around processor time so that we can identify when a scheduled task starts using way more cpu than it normally does.
- Fix: Live: New Member Signup Reconciliation Report: MemberId is needed to form the link for the Member's Name (to view the member record)
- Fix: API: Display message to DotGolf app users to use the digital scorecard in the Golf NZ app - scoring in the DotGolf app will no longer be supported after September 20.
- Now includes PassportId in result set
- Fix: ClubCMS DG-4248 #36669 - Added str undefined check to DialogWindow.js - Removed the old YOLO SQL in getting result and just using the data from the store procedure 'wa_SelectScoreCompetitionResultsEclecticToPrint' -- Remap data so it works like it used to - Fixed missing JS file and missing div tag so that the CallWebMethod actually gets called with document is loaded
- Mod: sql: aw_MergeCasualAffiliateMember: treat member codes as varchar not int
- Fix: StatsDPerfMon: Needed an override for stage vortex url.
- Mod: StatsDPerfMon: Moved from AWSSDK to AWSSDK.EC2 to make it work with instance profiles.
- Fix: StatsDPerfmon: Topshelf install had the wrong command line argument.
- Mod: StatsDPerfMon - move more stuff.
- Fix: rMemberSignupConfirmationV2: new members with previous membership number: for NZ, set the ComputerNo as Membership Number. For the other countries, set it to a dummy number (as done in Live).
- Fix: StatsDPerfMon: Packages properly installed.
- MOD: Set caching of Page Layout to 10 seconds, added Terraces 3.1 Teebooking Layout, rename CSS name override from bootstrap4 to terraces4, added fontawesome/v4-shims.css to fix font-awesome 4 issues on terraces3_1/Template.aspx
- Mod: Autogenerated poco classes.
- Fix: StatsDPerfMon: Packages properly installed.
- Mod: sql: create table ClubCompetitionInvite for new multiclub comp flow
- Cleanup: Moved a bunch of stuff around to make StatsDPerfMon CI/CD work better.
- Cleanup: Moved a bunch of stuff around to make StatsDPerfMon CI/CD work better.
- Fix: API: TeeBooking: #41966 - Home club members are able to book guest players using the Android version of the DotGolf app. Patching this in the server end as releasing an update in Google Play store will take some time.
- Cleanup: Removed unused package-deploy.ps1.
- Mod: ClubCMS: rMyAccount: text update on the Payments table
- Mod: ClubCMS: rMemberSignupV2: membership details notes: add a comma in the duration text only if both months and days info are present
- Fix: Do not try and roll the `archive` directory into the archive.  Handy when you need to zip `.` (for StatsDPerfMon for instance)
- Mod: ClubCMS: Wales Golf Welcome Email updates
- Mod: StatsDPerfMon: Deploy W3WP monitor service on webservers (machines with -web- in the name)
- Fix: Live: delete member checkbox was not deselecting correctly on cancel
- Mod: StatsDPerfMon: _deploy directory was not on the top level which meant we had to have a bunch of Jenkins haxx.
- Mod: StatsDPerfMon: _deploy directory was not on the top level which meant we had to have a bunch of Jenkins haxx.
- Add: StatsDPerfMon Jenkins deployment scripts.
- Mod: StatsDPerfMon now generates the Vortex hostname from the environment name (vortex.{environment}.dotgolf.co.uk) except for NZ where it is vortex.golf.co.nz (just for now, until we have built the new NZ vortex).
- Mod: rMyAccount: added Wales Flexi Club in the conditions
- Fix: rMemberSignupConfirmationV2: new members: for NZ, set the ComputerNo as Membership Number. For the other countries, set it to a dummy number (as done in Live).
- Fix: Member: GetPassportId: replace cm.ComputerNo with cm.MemberCode. cm.ComputerNo is deprecated.
- Fix: Slicer: Report layout...
- Fix: Slicer: Total paid to club tile formatting wasn't quite right; transaction count tile split into No. of Signups and No. of Refunds rather than just a total.
- Fix: Slicer: Total paid to club tile did not take refunds into account.
- Mod: API: Added play time to scores created by digital scorecard returns
- Mod: Slicer: Membership Application refunds are now considered when slicing iGolf money for England Golf.
- Fix: ClubCMS: GolfNZ Mobile Menu DG-4287 #41794 - Menus were appearing with the clickable account button of 761px but at 768px -- Made it work from 761px as; if the button appears then it should work with the button
- Mod: Wales profile: CW stage URLs update
- Mod/Fix: Live: Report: update the Missing Billing Card report query
- Fix: ISVAPI fickle build in Jenkins - maybe adding `/runtime:WinX64` to the NSwag invoke in DotGolf.Core.csproj is needed?  The other NSwag calls have that.
- Mod: define Wales Windcave production credentials
- Mod: define Wales Windcave production credentials
- Add: Live: Ability to delete already resigned people
- Fix: ClubCMS: DG-4278 - Fix where 'Add to WaitList' would occasionally bug out and appear in the player bookable slot
- ADD+MOD: ClubCMS: Added Terraces3.1 Layout to mix Terraces3 and TerracesGolfNZ. This to slowly add adapt new controls into Terraces3 layout. The first focus is to make the Club Fixtures Search control working. Modify GolfNZ to separate the CSS created recently for Tournament Event Feed and Club Fixtures Search to make it modular and can be shared into different layouts.
- Mod: Bulk Email: revert Rev 48066
- Fix: Bulk Email: casual golf query: added missing cte columns
- Mod: Bulk Email: temp fix for the casual golfer query (region filtering needs to be fixed)
- Fix: Live: Functions: #42075 - Otago GC users unable to load a function booking because of a custom item added to the function booking was marked as a product in Kounta even though the club does not have an integration with Kounta.
- Fix: Mailer: BounceTracker ORNS case where the incoming message has no From: header. Mod: Mailer: Increased bounce tracking mailbox checks to every 5 minutes due to the high CPU overhead - Ringmaster can't handle it every 10 seconds.
- MOD: ScheduledTask: Use static HttpClient for both FlocklerClient and VimeoClient
- Fix: Minor XeroSync changes, added commented-out code to enable parallel sync threads (won't deploy this right away because high Ringmaster CPU will only get worse...)
- Add: Index for mailer service grabbing email attachments.
- ADD: BulkEmail: Update BEDefaultElements all ReadMoreImageUrl IS NULL
- MOD: Live: Show Eligibility Options with FixtureWebsiteDisplay checkbox only if DisplayOnlyCompetitions and Visitors only, removed CompetitionSetupUrl logic on Competitions/ListCompetition.aspx and added a check on TournamentSetupWidget.ascx to use Setup/Competition_NG.aspx instead Setup/Competition.aspx
- Mod: ClubCMS: Wales Golf Flexi Club Welcome Email updates
- Mod: CasualGolf: DG-4267 #42042 - Home banner update
- Fix: SSO: package version to match everything else
- Mod: SSO: reworded code comment
- Mod: SSO: Make logging in load navigation from scratch, not the cache.
- MOD: Bulk Email: Added Background Colour for Text with Margin
- Fix: ClubCMS: DG-4261 #36669 - Fixed script files loading not loading properly causing KO to blow up - Removed old commented lines that aren't needed inside the script tag at the bottom of the tile rCompetitionResult2.ascx TODO: Why is result for this competition not in the RSResult [CompetitionId=805992] ??? -> Loads fine from [wa_SelectScoreCompetitionResultsEclecticToPrint] stored proc
- Mod: Live: Make Prize Templates nav item CP/COMP product driven
- Mod: WHSAPI: dont include pending scores in handicap review report - they mess with the count esp. non-scaled 9h scores
- FIX: Live: Competition setup error due to FixtureWebsiteDisplay no longer accepting null, removed the nullable property
- Fix: Live: could not create competition due to sql error
- Mod: API: Deprecated Member.GetLiveHomeClubMember and Member.GetLiveOrResignedHomeClubMember because they crash if the person is a home member in another union Fix: Added AssociationId to all cmember records in api unit tests
- Fix: #ClubCommunications: Make app messages work for Org (association) users.
- Fix: CasualGolf Admin logout not working
- MOD: Live: Added label when Fixture is not promoted for golf.co.nz
- FIX+ADD: BulkEmail: Fix 2 column text not updating and enable color plugin to CKEditor
- FIX: BulkEmail: PGA not seeing all tournaments, include COMPLETED status when retrieving Tournaments Registrants
- Mod: Autogenerated poco classes.
- Add: package-deploy.ps1 script for analytics.
- Add: bindings.prod.list for analytics.
- MOD: Change the FixtureWebsiteDisplay column to NOT NULL and set a 0 default, change the FixtureStatus from int to varchar
- Add: bindings.prod.list for ActivityTracker
- Fix: Unit tests: Increased delays on RedisDataCacheFixture.TestThreadBlocking to counter slow server unit tests are executing on.
- Mod: Transaction Processor: SubscriptionRenewal: format amount with the correct currency
- Mod: Transaction Processor: SubscriptionRenewal: format amount with the correct currency
- Mod: Transaction Processor: SubscriptionRenewal: use external email templates for the Renewal Failed Emails; currency symbol updates; allow applying of header image to renewal emails
- MOD: Change the Order of oom_GetStandings for Charles Tour Event
- Mod: Adweb now TLS.
- Add: bindings.prod.list for Adweb.
- Mod: Scheduled Tasks deploy script no longer has to wait for running tasks to complete before deploying. Fix: Deploy script will now hopefully terminate with an error if the S3 copy ever fails.
- Mod: Scheduled Tasks now run out of a temporary location instead of from the app deployment directory.  This is done so that we can XCOPY deploy while a scheduled task is running and not have to worry about file locks stopping the deployment.
- Mod: Live: Competitions: removed a fullstop from the end of an advanced settings sentence for consistency
- Fix: CasualGolf BulkEmail DG-4233 #41458 It was just adding duplicate recipient emails which would lead to it being sent out the same address multiple times --- man that was grueling... plis. Learnt some good sql though
- Cleanup: Removed XeroSync; we use Scheduled Tasks for this now.
- Fix: Unit tests: some Trace.WriteLines that were slowing things down. Fix: Teardown: MemberSetup missed a few tables, causing FK errors.
- MOD: ClubCMS: Added Event Type filter on tournament-oom control to fill out new type which is Charles Tour, updated oom_GetTournaments to display 'All' Gender for competition with 'A' gender.
- Fix: Unit tests: CreateMemberFixture made more resilient by not using club 245 (which gets messed around in the unit tests)
- Fix: Unit tests: Bunch of these fixed (cause was bad unit test DB data; made this more resilient, and also Features not being properly set up before running some tests).
- Mod: PocoTable: We now pre-load columns only when the first property is accessed.
- Add: PocoTable unit tests.  They live in Shared because we haven't done the plumbing to make DotGolf.Core.Tests cool yet. Refactored PocoTable.Reload() to use expression instead of string column names.
- MOD/ADD: BulkEmail: Replace Quill editor with CKEditor. Updated One Column Layout Full Width Text Tool to not include image, updated Text + Image & Image + Text with one image selection only. Updated Right Side Bar Layout reuse codes that was made on One Column. Added new Toolbar items such as Button and 2 Buttons.
- Fix: BulkEmail (SPAM3): Drafts listing is not displaying the email subject even though it's saved in the database.
- Fix: All Item pocos were being constructed ignoring the primary key value, ignoring the one passed in.
- Fix: All ClubItem pocos were being constructed ignoring the primary key value, ignoring the one passed in.
- Fix: #ClubCommunications: Message.SenderName was not populated. Mod: #ClubCommunications: Rename SendBulkNotification to SendClubCommunication.
- FIX: ClubCMS: OOM Tournaments filter not working on mobile and OOM Standings not calling the API from selected tournament back to Overall Standings
- Mod: Live: updated adjustment page text to be less confusing
- Fix: CasualGolf.API: DG-4238 - More hax but cleaner? to get the new navigation working with CasualGolf. -- At least when it blows up like it use to, it won't just instantly log the user out now.
- Fix: CasualGolf: DG-4238 - Remove redundant html nodes to shrink gap to tidy up for new navigation
- Fix: UNTESTED: Casual golf menu items now retrieved as html from the api instead of using the old html.
- Fix: Casualgolfadmin login now longer throws exception when fetching nav.
- Mod: #ClubCommunications: Set default app message send (per month) to 10.
- Add: Live: #ClubCommunications: Add DotGolf-only section to configure app message monthly send limit.
- Mod: TBTransactionProcessor: SubscriptionInstalment: just added sorting to the club query
- Mod: TBTransactionProcessor: SubscriptionInstalment: just simplified querying of clubs to process
- Mod: TBTransactionProcessor: SubscriptionRenewal: just simplified querying of clubs to process
- Add: #ClubCommunications: App messages monthly send limit.
- Mod: WHSAPI: if we receive a duplicate home club change request, we should fire webhooks even if they've already been fired
- Fix: PocoTables were incorrectly cached by AutoFac regardless of the primary key value being requested.  This was because we had it set to InstancePerLifetimeScope instead of InstancePerDependency; Autofac was caching our PocoTable instances unexpectedly. This broke Xero integration in a ridiculously subtle way (refresh tokens getting used from the wrong club)
- Fix: CasualGolf: DG-4171 #41402 - We now check that the email is current in the CGUser table else we will update it this happens during login. This will stop pre-existing user in CGUser to be sent their vouchers to wrong email address
- Add: UnionAPI: New directory.json schema and json example.
- Fix: ClubCMS: #41912: Member Signup:
- Mod: BulkEmail (SPAM3): #ClubCommunications - Reduced the size of the email and app message icons. Change colors to gray since these are not links. Fix: BulkEmail (SPAM3): #ClubCommunications - Message.LinkValue is not populated.
- Fix: TeeBooking: SearchSlots page throws exceptions for unauthenticated users.
- Add: sql: Cmember.SubsDirectDebitBankAccountNumber now tracked by cmemberhistory
- Fix: CMember History Update Trigger: corrected typo
- *** DFH CODE REVIEWED TO HERE *** Unit tests: API: Teardown delete statement missing, causing FK errors.
- Unit tests: Member ClubNo--> RegionId update was interfering with unit tests that assumed the member's RegionId value could be set at will.
- Fix: Live: Subs: #41834 If an upfront payment amount is set, use the upfront payment date as the invoice document date.
- Fix: API: copypaste bug in prev commit
- Fix: API: Bug where interunion home club change requests would never arrive
- Unit tests: Fix: teardown caused API tests to fail.
- Fix: Database build
- Fix: Whoops, settings url typo in prev commit
- Fix: Live: Events subnav wrong for clubs without any DG product, settings tab also incorrect for non-NG clubs.
- Add: sql: Cmember.SubsDirectDebitBankAccountNumber now tracked by cmemberhistory
- Fix: Live: error when opening various xero settings pages because the new AccountingSystem pocotable classes were being used implicitly instead of a poco AccountingSystem, which crashed dapper since the pocotables have no default constructor.
- Mod: Autogenerated poco classes.
- Mod: sql: CMemberHistory table: add columns: OldSubsDirectDebitBankAccountNumber and NewSubsDirectDebitBankAccountNumber
- Fix: ClubCMS: rEventRegistration: Functions online registration - If a function event does not have questions in the setup, adding a member as a guest does not work.
- Unit tests: Fix: Member renewal didn't work in this unit test because the member was in a category that was 12 months long; and 6 months in we were trying to renew them, resulting in no members to renew.  This is a dodgy test case anyway, because we're renewing them from cyclical to periodic in the SAME category, something that doesn't really happen in real life (normally you change categories when you want to do this for real).
- Unit tests: Fixed a few dodgy things that caused problems in local unit test databases (such as looking up clubs by name rather than ID)
- Unit tests: Increased delay after adding a member to give FTS a better chance to have indexed it before we try loading it.
- Mod: TBTransaction Processor: apply branding to the Payment Confirmation email; use the "DotGolf.Settings.ClubCMS.RenewalPaymentConfirmationEmailHeaderImage" setting, where you can define the URL of the image
- Fix: Live: nav bubbles looks a bit nicer
- Add: Live: can now grant settings access via user admin (without having to grant superadmin)
- Fix: Live: only superadmins or people with the News and Events role should see the news and events nav item
- Fix: Live: only superadmins or people with the News and Events role should see the news and events nav item
- Fix: Live: unit test
- Mod: TBTransactionProcessor: SubscriptionInstalment: use ClubSetting.EnableAutomaticInstalmentPayment to determine which clubs we'll process
- Mod: TBTransactionProcessor: SubscriptionRenewal: use ClubSetting.EnableAutomaticRenewalWithPayment to determine which clubs we'll process
- Mod: Autogenerated poco classes.
- Mod: sql: ClubSetting table: add columns: EnableAutomaticRenewalWithPayment and EnableAutomaticInstalmentPayment
- Mod: Live: Invoice & Accounting System Settings: update DotGolf only section styles: background image position, add more padding. Also update Help popup style: add more padding
- Mod: Live: Invoice & Accounting System Settings: update help text for the Export to Xero Settings
- Mod: Live: Settings: Invoice and Accounting Settings page: Dotgolf only section: add Subs Automatic Transaction Processor Settings
- MOD: Updated query to include current getdate() (casted) when filter by future tournaments
- Add: Live: help file for the subs automatic transaction processor settings
- Mod: Scaled the EG logo down with antialiasing just to make the icon look a little better on high res displays.
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: rEventRegistration: Logging of questions (and answers) into database throws ORNS when an event does not have questions configured in the event setup.
- Fix: Shared: rename copy-pasted variable clubItems => clubTags (because it represents club tags)
- MOD: Updated query to include current getdate() when filter by future tournaments FIX: Typo
- Mod: sql: we will be using the ClubSetting instead of creating new Products for 1) automatic renewals with payment and 2) automatic instalment payments
- Fix: SQL: BulkNotification table: [Code review] Enforce referential integrity by adding references to Association (on AssociationId) and Club (on ClubId).
- MOD: Added Foreign Keys for [CWExternalEventFeed] table
- MOD: Execute only for NZ
- Mod: ClubCMS: Wales Golf Flexi Club: branding update
- Add: Directory.Build.props for UnionAPI.
- Fix: Live: Bug as old as time Song as old as rhyme Beauty and the bug
- Fix: HandicapProviderWHS not returning WHS handicaps.  DFH> Sorry Marcus, my bad...
- Fix: Whoops, caused a Sequence contained no elements error when querying pretty much any member's handicap in dev (because we don't have WHSMemberUID values here).
- Mod: BulkEmail (v3): #ClubCommunications: Grouped Email and App Notifications into "Communications".
- Fix: ClubCMS/TeeBooking [DG-4209][41281][41329] - Change type casting to the new dr.Field<> to better handle type casting and null.
- Mod: Autogenerated poco classes.
- Add: SQL: #ClubCommunications - Add new column RecipientCount.
- Mod: UnionAPI integration is working, although untested (because I think OCS is having issues with their dev API). TODO: - UnionAPI directory helper is currently pulling the json file on demand (cached).  I think we should persist this information in the database instead, because what happens if we can't pull a new file for whatever reason, or the file is corrupted? - Need to finalise the Expires header; can we cache handicaps for a period of time?
- Add: SqlBackupUtility now supports up to point-in-time recovery with the --before command line argument. Fix: Bugs when multiple unions share the same bucket for backups (with different prefixes); this meant we couldn't successfully restore England/Ireland/Wales before. Fix: Bug that caused log restores to fail if we're working with a freshly restored full backup.
- Fix: Bulk Email: recipients filtering: for casual golfers, when "Adults" is selected, exclude everyone without a DOB (reasoning: juniors could be part of those without a DOB; Golf NZ always specifies now to exclude casuals without a DOB when the EDM is intended for adults only)
- Fix: API: (sql error prev commit) when fetching active scorecards, always include cards that were cancelled by an admin, so the user can correct or delete them. Otherwise they get lost  #5003141.
- Fix: API: (sql error prev commit) when fetching active scorecards, always include cards that were cancelled by an admin, so the user can correct or delete them. Otherwise they get lost  #5003141.
- Fix: API: when fetching active scorecards, always include cards that were cancelled by an admin, so the user can correct or delete them. Otherwise they get lost  #5003141.
- Fix: API: when fetching active scorecards, always include cards that were cancelled by an admin, so the user can correct or delete them. Otherwise they get lost  #5003141.
- Mod: Live: Subs Billing Card: display the details of the voided billing card that the system found for the record (for members who were resigned and re-added using their original record)
- Fix?: Live: Pressing 'cancel submission' in Live removes the scorecard from the app #5003188. Testing in stage.
- Fix: API: loading a score's details from another union in the app showing blank page #5003119
- Mod: Live: Member Subscriptions tab: if there's a displayed billing card, allow the admin to reinstate (i.e. un-void) the billing card. Sometimes a member record is resigned by mistake and reinstated right away, leaving the subs billing card in voided state.
- Fix: Live: PaymentsReceivedReport works for 10 digit memnos when sorting by Member Name #5003210
- Fix: API: loading a score's details from another union in the app showing blank page #5003119
- Add: Org: we now show Settings tab to anyone who has access to it - no longer secret.
- MOD: ClubCMS: Update Manawatu Wanganui default news article image
- Mod: Autogenerated poco classes.
- Add: Country.MasterAssociationId column, used to store the association that is responsible for handicapping each country.  We'll be populating these as we set up data sharing between multiple unions.
- Mod: Changed Scotland's country code to the full ISO3166 code.
- Fix: IVortexHostDiscovery no more.
- Fix: IVortexHostDiscovery no more.
- Fix: IVortexHostDiscovery no more.
- Fix: Nav code was breaking the build.
- Fix: IVortexHostDiscovery no more.
- Mod: UnionAPI rate limit reduced to 5,000 requests per day after discussion with Matt.
- Mod: Changed the telemetry code to use ConfigurationProfile provided Vortex hostnames instead of vortex autodiscovery (which was fickle and caused rate limiting issues if not correctly cached).  This will probably cause some build errors; I'll fix those shortly.
- MOD: ClubCMS: Use a Manawatu Wanganui default News Article logo
- Add: Reports: Missing Billing Card Report: filter by Windcave user IDs used for subs
- Add: Reports: Missing Billing Card Report (available initially for NZ Flexiclub, EG iGolf, WG Flexi Club)
- Fix: Live: [DG-4197] - Competition Marker color being too wide with 400px width -- Now its back to being 10px -- Removed black border -- Is now friendly with being a circle - Text line for the list item is now the same as the 'Marker' lable of 30px line height -- Moved marker name into the <img> tag
- Fix: ISVAPI: don't allow null firstname/lastname - it breaks Live
- Fix: Live: DocumentsVoided By Date report and PaymentsReceived By Date Report now England-friendly (allow 10 digit members numbers return correct results)
- Mod: Autogenerated poco classes.
- MOD: Live: Added "Display Fixtures on golf.co.nz" for Competition under Eligibility and only visible for NZ MOD: ClubCMS: ClubLogoHelper.ashx.cs can accept default param for blank image if club logo is not available
- Mod: UnionAPI: DotGolf-only property WHSMemberUID now nulled out for non-DotGolf clients calling the API.  I'll find a nicer way to do this eventually...
- Fix: ConfigurationProfileResolver.Debug.cs accidentally updated.
- Mod: ClubCMS: England Golf: Updated URL redirect for app privacy policy page.
- Mod: UnionAPI: If a third party is not set up in the ThirdParty table, return a 403 Forbidden rather than a "value cannot be null" exception.
- Add: Reverse Proxy: unionapi bindings added.
- Fix: Golf NZ: Tee Booking: #37389 - AboutMultiPayments.aspx page throws "System.Web.HttpException (0x80004005): The file '/Teebooking/help/TeebookingTerracesGolfNz.Master' does not exist.".
- Fix: Org/BulkEmail: [DG-4191] - If 'Create New Email Draft' is clicked from ORG but the user has not been to bulk email before and is a fresh session -- the webuser it tries to use is not existent so have added this to cookies so it can be used across in bulk email --- Uses the 'BulkEmailOrgUser' cookies to build up the webuser incase it cannot get from state.
- Fix: Org: [DG-4191] - If 'Create New Email Draft' is clicked but the user has not been to bulk email before and is a fresh session -- the webuser it tries to use is not existent so have added this to cookies so it can be used across in bulk email
- Mod: Live: [DG-4190] For DotGolf internal use only - Added ability to [Combine all line items into a single Subscription line item on invoices] This is located in Subscription -> Line Item Settings
- FIX: LIVE Set FixturePosterImage to null as it is not used for KO ViewModel serialization when loading the competition setup
- MOD: ClubCMS: secure content moderation of Open Fixtures control
- MOD: Set FixturePosterImage to null as it is not used for KO ViewModel serialization when loading the competition setup
- FIX: Recipients from MemberIndividual not clearing up
- Mod: TBTransactionProcessor: SubscriptionInstalment: renamed SUBSI to SUBSAIP
- Fix: ISVAPI: Turns out handicap master are sending us DOBs with timestamps, and when updating members we're not throwing away the time component -_- #5003120
- Mod: TBTransactionProcessor: SubscriptionRenewal: renamed SUBSR to SUBSARP
- Mod: sql: renamed new product codes to be more specific
- Mod: TBTransactionProcessor: SubscriptionInstalment: use the new SUBSI product to determine the clubs to be processed for automatic instalment payments
- Mod: TBTransactionProcessor: SubscriptionRenewal: removed the hardcoded NZ Flexiclub ID (700). Auto renewals will also be used by Wales Golf Flexi Club (soon) and England Golf iGolf (in July 2022).
- Add: Insert new Products: 1) SUBSR (automatic renewals with payment), and 2) SUBSI (automatic instalment payment). These will be used by the TBTransactionProcessor to determine which clubs to process
- Fix: ClubCMS [DG-4116] WaitLList - Fix where 'Add to waitllist' button next to the time slot is not showing the dialog on click - Fix where 'Add to Waitlist' is being displayed for non members and when tee booking is not allowed for online booking
- ADD: Fixture Poster image for Golf NZ Open Fixtures, Latitude and Longitude properties for zClub Fixtures Search to remove the Dublin default coordinates
- Mod: Country Profile: New Zealand: added the stage and production PxWsUserId / PxWsPassword - to be used by TBTransactionProcessor
- Mod: Country Profile: England: added the stage and dev PxWsUserId / PxWsPassword
- Fix: Live: if competitions name + fixture details were too long, user got unfriendly error #5003194
- Fix: API: DigitalScorecard: Should always select the latest scorecard.
- Fix: Jenkins: #ClubCommunications - new source file missing from previous commits.
- Fix jenkins: #ClubCommunications - arrghh!
- Fix: Jenkins: #ClubCommunications - Bring back CLUB_MESSAGE. Will do a one-time refactor later to change this to CLUB_COMMUNICATION.
- Fix: Jenkins build: #ClubCommunications - Missing compose.ts. Ignore .map and .js files.
- Fix: Jenkins build - #ClubCommunications
- Add: BulkEmail (SPAM3): #ClubCommunications - Initial commit.
- Mod: Autogenerated poco classes.
- Add: SQL: #ClubCommunications - schema updates
- Fix: Live/Org: numbering in score listing can be wrong way around if scores played on same day
- Add: Org: Card fulfilment user role [DG-4113]
- Add: Org: nav permissions for new card fulfilment role. Fixed bug where pgaReports and pgaTraineeOOM menu item permissions where reversed. Minor refactor of org nav item structure to more closely match live.
- Add: sql: Card Fulfilment user role [DG-4113]
- Fix: ClubCMS: GolfNZ [DG-4175][41794] - Fixed binding index for mobile menu for my-golf in GolfNZ
- Mod: Autogenerated poco classes.
- Fix: ClubCMS: [DG-4172][#41418] FileName being too long and won't upload - Changed it so that it can get up to 125 in filename length -- Throws relavent error as opposed to just a generic one
- MOD: zClub Fixtures Search changes for Golf NZ use which includes content moderation, make the GoogleMapApiKey configurable, change UserControlUtilities to be able to set control property value directly into the HTML by using the ###PropertyName### format. ADD: New columns to Competition Table for Fixture Poster Image and Status for content moderation, new control properties for zClub Fixtures Search
- Fix: ClubCMS: rMemberSignupV2.ascx: fix validation for Reason for Leaving when switching between Yes/No (Previous membership number question)
- MOD: Update Email Compose (if any) whenever the Email Draft is saved
- Mod: Live: Rev 47741 continuation: restrict the billing token relinking to the member's subs billing token
- Mod: Org: Removed unused code from TabMember (left over from the Live copy-paste)
- Mod: Live: made EG logo less tiny so it looks a bit better once nav css has loaded. The other image was a bit to small so some of the letters had squished bits.
- Fix: Org: miscoloured nav when create/update clubs
- Fix: Live: logging in as super admin resulted in broken nav
- Mod: Org: TotalScoresEntered report app name column header slightly friendlier on excel
- Mod: Live: EG icon no longer gigantic in the nav bar if css is slow to load
- Fix: API: DigitalScorecard: IsSideMatchOn set default value to false if NULL.
- Fix: Bulkemail/activitytracker logout button no longer throws error
- Fix: API: DigitalScorecard: GB&I - UploadSignature generating a lot of exceptions after a score is verified and submitted for handicapping.
- Fix: ClubCMS: [DG-4160][41427] Fix where previously saved member's email was being used even though their details were updated leading to email sending failures for competition/tournament registrations - It was just using first or default so its luck of the draw for email being used.
- Fix: Nav: Clubs Dashboard nav highlighting.  TabMemberScoresWHS.
- Fix: Org: scores tab nav
- Fix: ClubCMS: - check if the item.ClubIsOnceOff is not null before continuing as this was throwing error while loggin in
- Fix: Nav: Performance: Don't run the scorecards bubble query if the club doesn't have CP or LCP.
- Fix: Org: TabMembers.aspx missing nav highlight.
- Fix: bulkemail/activitytracker: clicking cardfulfilment link no longer goes to dead link
- Fix: activitytracker: nav colour for GBI was wrong (black)
- Fix: Bulkemail: nav colour for GBI was wrong (black)
- Fix: Live: navigation: bulkmemberadmin sublinks
- Fix: Live: navigation: missing path regex for member create, card fulfilment, bulkmemberadmin
- Fix: Live: style user admin Nav correctly in GBI
- Fix: Nav: Missed a wildcard. Sigh.
- Fix: Nav not highlighting property for some menu items (inter club messages, settings, user accounts, account settings)
- Mod: Live: #DG-3086: allow to link the member's voided billing card to their active record.
- Fix: Live: GI competitions nav was showing blue
- Mod: UnionAPI client work to enable us to search Scotland's test API. - Association will be automatically inserted using a well known UID. - UnionAPI directory is pulled from the S3 host location (https://dg-whs-central-directory-t2s5gxfi.s3-us-west-2.amazonaws.com/directory.json) (this is from AWS US PROD) automatically using UnionApiDirectoryHelper. - OAuth2 is fully enabled for connections to foreign unionapi implementations using our Cognito provider. - Some things (GB-SCT etc) are hardcoded for now just to make the demo work.  The plan is to add a MasterAssociationId to the Country table so we can easily resolve the parent union.
- Fix: CentralMemberCode_InsertUpdate trigger updated to stop attempting to populate ComputerNo for overseas union searches (other unions may have numbers that are too long to fit into an int)
- Mod: ClubCMS: #DG-3922: Welcome Email amends: additional sentence requested by EG
- Fix: Live: no more silly sideways scrollbar on every page
- Mod: UnionAPI: Added WHSMemberUID to search golfer response (this needs to be hidden to everyone non-DotGolf)
- FIX: Remove required RecipientsFrom when creating Bulk Email draft
- Fix: ClubCMS: [DG-4159][41446] Payment for tournaments over $1000 fix where it was trying to post eg. 1,000.00 not 1000.00 DPS doesn't like this so it fails it.
- Add: SqlBackupUtility (currently only does restores from S3).  This does a better job than the Powershell scripts I previously used, and does it much faster because of multithreading downloads from the S3 bucket.
- Mod: API: Email AND DOB required to log into app in EG
- Mod: ClubCMS: The cmember.cs DOB points to member.DOB so might as well use member.DOB. Makes sense because EG see member.DOB in the CRM api
- Mod: ClubCMS: remove redundant countrycode checks to prevent future "country code not supported" exceptions when logging in with OTP (see rev 47715)
- Mod: ClubCMS: Email AND DOB required to log into public site in EG
- Mod: API: Email AND DOB required to log into app in EG
- Fix: "Unsupported country code - WAL" when trying to use the DotGolf OTP against wales clubcms.
- Add: Live: Report: Member Address and Subs Details: improvements; also make it work for non-subs clubs
- Add: Live: Report: Member Address and Subs Details (based on the modified iGolf "Members Current Start and End Date" Report)
- Fix: CDC stopped large binary values from being inserted into the database.
- MOD: Show only the control block if there's a feed
- MOD: Added script versioning to general.js
- Mod: ClubCMS: bindings.list: add tieke.cw.golf.co.nz
- Mod: Reverse Proxy: added tieke:
- Mod: ClubCMS: bindings.list: add members.tiekegolf.co.nz
- MOD: Implement sticky right column for Tournament Feed Leaderboard, rename the initial created Layout Section columns to appropriate name for scrollable/sticky columns
- Fix: ClubCMS: [DG-3909][41734] - Select box was not populating the 'required' tag correctly - also when registering for the event if the 'select' was left on as 'select' and not the other options with required tag the validation check failed so logic update is done
- Mod: ClubCMS: Wales Golf Flexi Club Welcome Email text update
- Fix: TBTransactionProcessor: Fixes #41778 (and other related tickets) - Takapuna tee booking refunds failing due to incorrect DPSTxnRef value. We should use the original DPSTxnRef value from TBTransaction.DPSTxnRef.
- Mod: ClubCMS: rMemberSignupV2: display the correct age in the Parent/Guardian panel heading (continuation of Rev 47692)
- Mod: Live: - added opacity to dragging of players while adding to competition tee sheet -- so you know where its going
- Fix: ClubCMS [DG-4116] - Stop 'x' button while closing WaitList Dialog from refreshing page
- Fix: ClubCMS [DG-4116] - Fixed Dialog going all wonky with random location in window - Mod: The Dialog title bar and its text color is now dynamic --- This will now match the site's color scheme and if the color is too light the text will be black else white - Fixed 'Search' Btn not aligning with the search text box in SearchClubDay.aspx - Removed the horrendous time picker from the dialog window
- MOD: Update on Tournament Event Feed to accommodate top 3 for Tournament Detail page, deleted TournamentFeedController.cs and moved my single action to the old TournamentController
- Add: ClubCMS/Shared: Wales Golf Flexi Club: Welcome Email template - initial commit
- Mod: ReverseProxy: sites.list: added -,-,1,1,taupo2.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: add taupo2.cw.golf.co.nz
- Mod: ClubCMS: rMemberSignupV2: use the country profile to determine what age requires guardian consent; update the age calculation (previously, it was off by one month)
- Mod: Country Configuration/Features.cs: added ConsentRequiredForUnderThisAge
- FIX: Golf NZ main navigation on 1280 width resolution due to 4th navigation "District Partners"
- Mod: ClubCMS: terraces_golfnz template: renamed vcmember to fleximember (it's more specific; though, yes, England Golf uses the term "igolf" not "flexi")
- Mod: ClubCMS: terraces_golfnz template: update the code which adds the CSS class name to the page; Wales Golf would need it too (e.g. show My Account menu item to Flexi Club members only)
- Fix: ClubCMS - GolfNZ mailing list subscribe html form not being uniquely grouped
- Mod: [DG-4047] - Added dimensions required for images in certain area for golfnz admin area
- Mod: ClubCMS: rGallery: added HideOnPageNames and DisplayOnlyOnPageNames control properties
- Mod: ClubCMS: rGallery: added HideOnPageNames and DisplayOnlyOnPageNames control properties
- Mod: ClubCMS: My Performance control: HTML Message (used by GI only at the moment): removed the CSS classes to make this element more flexible in terms of styling (you can apply the CSS classes in the HTML message itself)
- Fix: BUILD after previous commit
- Mod: Live: delete DataObject and DataObjectSimpleTable in Core, replaced with PocoTable because it's much nicer.
- Fix: ClubCMS: [DG-4134] MyBooking in club CMS was failing due to de-serialising JSON issue which breaks the view and throw specified cast type error - When de-serialising JSON back from cache into dataset it loses its type so we're saving this as XML now to maintain its type even during de-serialising -- Added test to test above notes is legit
- Mod: ClubCMS: rMemberSignupV2: only check / save the Reason for Leaving if the user selected Yes in the previous club membership question
- Add: A few new PocoTable implementations; updated Navigation.cs to use UserSecurityRoles.
- Add: PocoTable: LazyLoadValue implemented; previously only worked with preloaded columns... Add: BusinessLogicBase.With([]) so you can instantiate arrays of pocos easily (albeit no more efficiently - but we'll do that later.  yeah)
- Fix: Live: InvoiceReport: localise "GST" (should be "VAT" for GB&I)
- Mod: Live: tournament registration by CSV import now working properly
- Fix: Because of the Xero UTC bug previously fixed in rev 47663 the "last imported" date shown in the UI appeared to be 12 hours ago.
- Fix: IVSAPI: Dapper.Contrib was broken by adding TABLE_NAME/PRIMARY_KEY to the pocos since any update would attempt to update those props and crash sql.
- Fix: Org: Extquery: formatter permission logic was inverted when deciding whether to hide columns, resulting in columns being hidden instead of shown.
- Fix: #41713 Xero integration: A condition where the local copy of the last_modified date could get overwritten with an NZT GETDATE(), which means we can lose out on 12 hours' worth of updates from Xero.
- Cleanup: Xero date parameters renamed to -UTC so we are aware of the timezone. Mod: Using the dedicated ContactID parameter when calling the xero api (instead of the where clause) - does the same thing, just cleaner.
- MOD: Change ExternalEventFeedUpdateTask to run every 5 mins
- MOD: Tournament OOM Standings to allow configuration of default event category to support Charles Tour Tournament Standings and also allow Top N Standings, hide of headers and filters and override header HTML for new landing pages of Charles Tour events
- Mod: Org: NewMemberSignupReconciliation too large for pdf and crashes, removed pdf button until we find a workaround
- Mod: Adweb: Removed command timeout increase that is no longer necessary.
- Fix: Adweb: Slicer performance improved by precalculating accumulative transaction counts (since Jul 1st) for England's iGolf tiered transaction fees.  This code affects NZ too because it runs for all unions. Add: Indexes to speed up other queries; other minor performance gains made.
- Mod: ISVAPI: should be checking if member is already a member at the requesting club BEFORE telling them the person is from another union and must be added through the platform.
- Cleanup: PocoTable: Just cleaned up some method/property names and crappy code.
- Mod: PocoTable: Better handling of preloading; removed SqlTransaction support (we don't want to encourage this).
- Mod: WellKnownIDs: added Wales Golf Flexi Club ClubUID
- FIX: Removed USE NZDev1
- FIX: OOM Tournament Add Scores to only update previous added scores by OOMTournamentID and the GetAvailableScores to include OOMResult DeletedDate on where condition
- Fix: Directory.Build.props for clubcms.
- Fix: ClubCMS: rMyAccount: replace "Credit Card Auto Billing" with "Auto Billing by Card" to make the text more generic (it could be a credit or debit card)
- Fix: ClubCMS: rMyAccount: replace "Credit Card Auto Billing" with "Auto Billing by Card" to make the text more generic (it could be a credit or debit card)
- Mod: Core: rename PocoTable primary key generic type argument
- Fix: Live: POS tab not showing for Kounta POS clubs without AX accounts
- Fix: Live: defunct subnav removed from gif card page
- Fix: ClubCMS: [DG-4131][41712] - Fix 'GetParameterValues' method being called while being undefined in certain templates for teebooking -- Fix the image slider from showing the same message with a checker first
- Fix: Live: POS tab not showing for Kounta POS clubs without AX accounts
- Mod: Live: Competition registration - allow selecting members from other linked unions.
- Fix: Hardcode DotGolf.Live name in Directory.Build.props?
- Add: Directory.Build.props for Live.
- Fix: Inject error into BuildInfo.g.cs instead of using the errorlevel; easier to see what is going on.
- Mod: Safety check - we now fail the build if $(SolutionName) is *Undefined* (this is potentially an MSBUILD bug).  We get around this by adding Directory.Build.props into the solution file directory.
- Fix: ClubCMS: rMyAccountPaymentConfirmation: implement LockWaitAndTake to ensure that we only process a Windcave payment result once.
- Fix: Because FTS is a bit dim, we have to wait for it to finish crawling before attempting the friend search.
- Mod: Performance: API excludes the non-affiliate friend search SQL if we have EnableNonAffiliates==false (EN/IE/WA). Add: Basic unit tests for above. Fix: IMemberNumberManager wasn't available when unit testing.
- Add: Full-text index scripts for unit tests.
- Mod: Nav: better error message if resolving relative app url fails
- Mod: Live: Competition registration - allow selecting members from other linked unions.
- Add: Indexes added after discovering some Bad Stuff while looking into England's sqltrace log.
- Mod: sql: no longer dropping wa_recalculatecompetitioneclecticNG_fast
- Fix: clubhouse-navigation: Hopefully the association name will show for districts now!
- Add: PocoTable - DataObjectSimpleTable v2.  This makes it much easier and safer to implement business logic classes.  Check Associations.cs and Association.cs for a sample implementation.
- MOD: Tournament Event Feed DTO changes and layout fix for Twitter feed, code adjustment to ExternalEventFeedUpdateTask
- Fix: Live: POG: #41671 - Part 2. The first tee time is not displayed when you view past time slots.
- Fix: Live: Drawsheet generator now shows the correct round name at the top of the page.
- Fix: Live: POG: #41671 - The first tee time is not shown when you view past time slots.
- Mod: BulkEmail.cs: no longer opening a new DB connection for each recipient because it costs 30ms every time.
- Mod: Autogenerated poco classes.
- FIX: Build error due to these no longer needed classes that I created
- MOD: Corrected SQL script ID
- ADD: Tournament Event Feed control for Articles and Flockler feeds, CWExternalEventFeed table to feed data, add TournamentFeedDisplay property for zTournament Leaderboard control, Settings for new Schedule Task to get Feed MOD: terraces_golfnz/Template.aspx to accommodate new Layout sections (CenteredWideLeft and CenteredNarrowRight)
- Cleanup: clubhouse-navigation: removed an unused variable.
- Mod: API: Digital Scorecard: GB&I - Enable immediate highlighting of score discrepancies in the app.
- Mod: clubhouse-navigation: resurrected the Home link.  Not having a home made people sad. Fix: Tee booking pages didn't all have matching nav regexes.
- Mod: Live: revert Unicode CSV mod because it's gonna cause us pain later. Workaround is remove the pound symbol from CSVs altogether
- Fix: API: Copypaste error in prev commit
- Fix: API: Build
- Fix: Bulkemail: build.
- Fix: clubhouse-navigation: Org now left-aligns too.
- Fix: Core: Build after Application.Gotg enum change
- Mod: [BREAKING] Renamed Application.Gotg to Application.GetOnTheGreenAdmin. Navigation now resolves relative URLs based on which solution you're in.
- Mod: Live: Competitions results report hacking again for 10 digit member numbers
- Add: Live: RSResultDiagnostics report in c# now
- Mod: Live: CompetitionResultsReport: ACTIVEREPORTS ARRRGH WHY CANT I CHANGE THE FONT SIZE OF ONE COLUMN
- Mod: Shared: Appurlresolver can resolve Adweb now.
- Fix: clubhouse-navigation: Left alignment caused problems with the username not showing up in Live and Org.
- Fix: clubhouse-navigation: Build error in CasualGolf.API caused by my last refactor.
- Fix: clubhouse-navigation: Build error in BulkEmail caused by my last refactor.
- Mod: clubhouse-navigation: Left align our nav and content (for the non-full-width pages) so that we don't have to mess with union branding around "Clubhouse".
- Mod: clubhouse-navigation: Refactored to remove a bit of the old crud.  This gets GetClubNav() and GetUnionNav() closer together so we can merge them together one day.
- Fix: Live: SIC: used ?? in JS by accident. nothing broke though.
- Fix: Live: on a day markers changed over, a club's course would not load in the SIC if ALL of their markers had changed.
- FIX: BulkEmail: Order of Tournaments on Club user login and added Past or Future Tournaments filter
- Fix: ClubCMS: [DG-3883][40587] - Shift 'Message' to the bottom and moving 'Comments/Suggestions' above it.
- Fix: clubhouse-navigation: nav not showing up for member score listing or adjustments pages.
- Fix: API: Digital Scorecard: Playing partners may not have a scorecard created so use QueryFirstOrDefault().
- Fix: Live: Course handicap for pending person in SIC UI was not correct (needs to be 54 for 18h, 27 for 9h). #5003051
- Fix: ClubCMS: [DG-4074][41376] - This now checks for the flag of the competition in Tournament registration if it is 'Entries restricted by handicap' and throw relevant error for the registrant to see. - Changed the TournamentController to use [row.Field<>("") as opposed to (type)row["rowname"];
- Fix: Live: New Member Signup report was not displaying £ correctly. Changed encoding to UTF8 but then had to hack it for excel because reasons:  https://stackoverflow.com/a/9016545
- Fix: clubhouse-navigation: Bulk email subnav links broken if you're outside of Bulk Email
- Mod: API: Digital Scorecard: NZ - Enable immediate highlighting of score discrepancies in the app.
- Fix: clubhouse-navigation: Turned on ClubhouseProductNavigation.
- Fix: clubhouse-navigation: User Profile link doesn't work when you're in bulk email logged in as a union.
- Fix: clubhouse-navigation: dotgolf branding on an empty subnav bar was overlapping the platform brand (when logging in as a union)
- Mod: Live: NewMemberSignupReconciliation report shows membercode instead of memberid
- Mod: Org: do not filter 9hVs18h report by gender if we've selected a specific member
- Fix: club-navigation: Subnav menu wasn't visible for clubs using SPAMv3.  Org now uses platform branding for all menus; the DotGolf branding is only used for add-on club products, not union or districts.
- Fix: clubhouse-navigation: some toplevel navs still did not have absolute urls in them, resulting in 404s if you're clicking into CLUBHOUSE from Bulk Email (logged in as a club)
- Fix: Org: 9h vs 18h report not searchable by member
- Mod: API: Digital Scorecard: Part 2 [DG-1508] Retire /save-round-setup endpoint. Rename SaveRoundSetupV2 to SaveRoundSetup.
- Mod: ClubCMS: rMemberSignupConfirmationV2: continuation of Rev 47537: implement LockWaitAndTake to ensure that we only process a Windcave payment result once.
- Fix: ClubCMS: rMemberSignupConfirmationV2: implement LockWaitAndTake to ensure that we only process a Windcave payment result once.
- Fix: Tidy up some css that was causing a persistent scroll bar on Bulk Email.
- Fix: SUBWCREV was being called in a way that it would only care about the project directory revision - if you updated something in shared or core, the revision number would not get updated.
- Mod: ClubCMS: rMemberSignupConfirmationV2: ProcessMembership method: removed the "additional checker" added on 20200602 - this doesn't help prevent the occasional double up member, invoice, receipt issue. (Just found that the issue was caused by Windcave's FPRN process--only when it happens almost at the same time the normal processing of the payment result happens on the user's browser)
- Fix: clubhouse-navigation: oops, leading slash
- Fix: clubhouse-navigation: Tournaments should be an absolute link (all links on the toplevel nav should be because they can move the user between systems)
- Fix: clubhouse-navigation: Levies should be an absolute link (all links on the toplevel nav should be because they can move the user between systems)
- Mod: Clubhouse navigation: empty subnav should retain its size - undo accidental change
- Mod: Clubhouse navigation: empty subnav should retain its size
- Mod: Clubhouse navigation: height of subnav should not change if there's no selected subnav item
- Mod: ClubCMS: rMemberSignupConfirmationV2: logic for isReturningMember before is only applicable to NZ (we checked the first three digits of the previous membership number supplied by the user)
- Fix: Live/Org: solved some subnav styling differences between org and live
- Fix: clubhouse-navigation: ActivityTracker now constructs WebUserModel cookie; can't get session to work reliably.
- Fix: clubhouse-navigation: cookie settings for activitytracker sessions
- Fix: Attempt to sort out session instability in Activity Tracker by moving the UseSession() setup call before UseRouting()
- Mod: clubhouse-navigation: Added an error message if the session[user] is null (ActivityTracker)
- Mod: clubhouse-navigation: Made the cache revision-sensitive so we get new nav data whenever we publish.
- Fix: clubhouse-navigation: Org reports tab.
- Mod: Live: CompetitionResultsReport can handle 10digit member numbers now
- Add: Live: Start of getting competitions working for GB&I - testing with Wales stage
- Fix: API build because of clubhouse-navigation
- Sign, nevermind.
- Haaaaack: Run prebuild in dev otherwise BuildInfo doesn't get set.
- Fix: Gracefully handle it if BuildInfo.SiteOrServiceName is not set.
- Fix: clubhouse-navigation: once again fixed for live, probably broken in org.
- Fix: clubhouse-navigation: once again fixed for live, probably broken in org.
- Fix: clubhouse-navigation: once again fixed for live, probably broken in org.
- Fix: clubhouse-navigation: once again fixed for live, probably broken in org.
- Fix: clubhouse-navigation: once again fixed for live, probably broken in org. Fix: menu highlighting corrections
- Fix: clubhouse-navigation: deployed anti-bootstrap-interference countermeasures to try make the orange bar line up. Fix: Menus moved to better places (tournaments, levies, card fulfilment)
- Fix: clubhouse-navigation: Analytics link corrected; report nav activation fixed.
- Fix: clubhouse-navigation: Clicking on CLUBHOUSE takes you to the members screen now (Live).
- Fix: clubhouse-navigation: nav bubble doesn't look crappy anymore.
- Fix: clubhouse-navigation: Had that height in the wrong place.  whoops.
- Fix: clubhouse-navigation: Report tab fixes; subnav height adjustment for stupid orange bar AGAIN
- Fix: clubhouse-navigation: Minor tweak to get orange active bar to always stick to the bottom of the subnav.
- Mod: clubhouse-navigation: Link added to my tickets (helpdesk)
- Fix: clubhouse-navigation: Added svn rev to css link rel; don't want to leave clients broken if they have an older cached version of the CSS.
- Fix: clubhouse-navigation: Oops, remnant of an experiment that we did with identities.
- Mod: Live: Member History: Receipt items: if the DocumentDate and CreateDate are the same day, use the CreateDate as the log date, otherwise use DocumentDate
- Fix: clubhouse-navigation: Casual Golf reference to MenuItem (this is now NavItem).  TODO check if we need to do anything else with casual golf.
- Fix: clubhouse-navigation: Analytics web.config assembly redirect.
- Nav rework from Branches/Trunk.2021-08-10.fix-the-damn-nav.  The nav now renders serverside.  Styling sorted (center aligned), consistent across all apps.
- Mod: [COUGH] HACK made slicer timeout longer so it'll work, just until I can fix this.
- Mod: Live: Member History: Receipt: use the Create Date as the log date; display the Document Date in the details column (so that the Receipt will be sorted correctly amongst the member history items)
- Fix: ScheduledTasks: WHS Course sync now more robust and will self-heal past screwups in which markers with different whsmarkeruids were given the same markerIDs and markerUIDs #5002456
- Mod: Live: csproj was not up to date for scorecardscanimage.ashx.
- ADD: ExternalEventFeedUpdateTask.cs to pull videos and social media feed from Vimeo and Flockler, and added MOD: NewsArticle.cs to include GetEventFeedArticlesAsync for Competition Event Articles
- Fix: Live: [DG-4046] - More fixes for Live and the alignment should not affect ORG
- Add: Adweb: deleted date column and search for Adweb for DGI
- Mod: ClubCMS: Allow people to be aged between 1 and 100 because we don't enforce any min ages anywhere else in the system so people who set their age to 3 (sigh) in the App can no longer see their DOB in the member portal
- Mod: Reverse Proxy: sites.list: added S,W,1,1,geraldinegolf.co.nz
- Mod: ClubCMS: bindings.list: added geraldinegolf.co.nz and www.geraldinegolf.co.nz
- Fix: Live: [DG-4046] - Anchoring Menu and sub menu to centre and alignment fixes -- Is ugly with JS at the moment but it works until David fixes how the template renders this will do
- Mod: Live: bump interclub message inbox size to 2000 for igolf
- Fix: Live: Build after accidental commit
- Fix: Live: Bug where duplicate home club change requests would get sent into the inbox
- Mod: Clubcms: Log exception if MemberController GetMemberFriends throws any exceptions
- Mod: Core: Member.cs: remove empty trycatch
- Fix: Clubcms: members had no friends. (post-publish)
- Fix: ClubCMS: zHero - Swiper JS: fix the SQL select query (the way it gets the TallerOnMobile control property setting for the Image Content)
- Fix: Live: [DG-4046] - Fix Subscription 'TabEnterPayments.aspx' and 'TabEnterCreditNote.aspx' redirecting and showing 'POS' as active
- Fix: Live: [DG-4046] - Fix various funky toggles and active sub nav
- Fix: clubhouse-nav: Attempt to make everything line up for a range of viewport sizes.  Still couldn't quite make the nav line up with the left of the content though.
- Mod: ClubCMS: Member Signup form amendments as requested by EG.
- Add: Org: 9hVs18hScores report
- Fix: css rev tag to force clients to get latest.
- Fix: Live: [DG-4046] - More Fixes on funky nav not showing the correct active tabs/subnav
- Fix: clubhouse-nav: When you're on the scorecard admin pages, jquery does something weird and the click event on the menu (top right) stops working.  For now I'm just using a manual .onclick.
- Mod: clubhouse-nav: admin-bar z-index reduced to avoid the admin bar overlapping it.
- Fix: DotGolf.Support: More old school Microsoft.Net.Http issues; replaced with System.Net.Http properly this time.
- Fix: DotGolf.Support build was failing due to some weird netfx package crap.
- Mod: Changed subs dashboard screen to use Settings-style layout rather than the old school tiles.  Not a massive improvement, but looks less terrible.
- Fix: Live: [DG-4046] - Fix certain sub menu going to the very left of the screen
- Fix: Jenkins build - Part of the previous commit for Digital Scorecard: [DG-3600] Ability to create a digital scorecard from the Kiosk.
- Mod: Removed help videos (they used Flash so don't work anymore); instead take users to our support knowledge base.  TODO: Figure out how to force users to login, otherwise they see only a few articles.
- Fix: Live/org: [DG-4046] - Fix when screen width is too small and the menu goes funky issue
- Mod: Kiosk: Digital Scorecard: **Does not need to be included in the full publish** [DG-3600] Ability to create a digital scorecard from the Kiosk.
- Fix: ActivityTracker in stage??????
- Mod: ActivityTracker: hostingmodel inprocess
- Mod: API: Digital Scorecard: [DG-1508] Retire /save-round-setup endpoint. It's a very old endpoint and should no longer be used for anything. This endpoint has been replaced by /round-setup-apply-changes.
- Mod: API: Digital Scorecard: [DG-4077] Register score intent at the point of scorecard creation.
- MOD: Enable Update Email Address for SQL option and not calculate the unique count upon loading as the view model already got the Recipients Count
- Mod: Bulk Email: Exclude deceased casual golfers.  Only send to AssociationId==DatabaseAssociationId (so removes the need to filter for NZPGA), added Ireland juniors logic.
- Mod: ActivityTracker: hostingmodel inprocess
- Mod: Live: Delete unused web.config.default
- Fix: Recursive reference to Config.Current from NewZealand.cs.
- MOD: Hide Add Recipients button for SQL option
- Mod: Experimental nuget.config mod to make DotGolf.Support store its packages in ..\..\packages.  It's a small step towards making all csproj files work this way so that DotGolf.World isn't such a massive merge.
- MOD: Update zHero - SwiperJS image resolution recommendation and apply TallerOnMobile height
- Mod: Platform Name: Feature flagging to show either 'Live' or 'Clubhouse' if they have clubhouse enabled
- Fix: Shared will now reliably build out of the box (with a fresh Subversion checkout), every single time.
- Fix: Org: Checkin should not be showing
- Fix: Live: [DG-4046] - Stops 'CheckIns' from showing up in Org
- Mod: Org: remove redundant datasource from JuniorGirlsMedalTopN
- MOD: Added Mobile Image for zHero - SwiperJS control and added TallerOnMobile property, this is to have a different image and height when viewed on mobile
- Mod: ClubCMS: Member Signup: add checking of the payment confirmation pages (SignupConfirmationPageName and SignupPaymentUnsuccessfulPageName) -- make sure they are both set up before the user proceeds with signing up
- Fix: Org: PlayerHandicapsByGenderAge report fixes after testing previous mod some more.
- Fix: Live: Remove 'Systems Email' setting as its not ready and mistakenly committed
- Fix: Live: URL overrides mistakenly committed for localhost testing
- Mod: Org: Increase number of people in the JuniorGirlsMedalTopN reports so GI can filter out anyone who should be in there.
- Mod: Org: PlayerHandicapsByGenderAge report now support provinces as per GI request
- Fixed: BackgroundTasks: Missed a file (FINE, removed hacky evenhandler sync-async bridge)
- Mod: BackgroundTasks: FINE, removed hacky evenhandler sync-async bridge
- Mod: ClubCMS: Member Signup: just updated the default signupConfirmationPageName
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: Member Signup: differentiate the Windcave payment landing page - redirect the user to the "Payment Unsuccessful" page if the payment is unsuccessful; redirect to the "Payment Success" page if the payment is successful.
- Mod: Made GetConfigurationProfile() internal - we should use Config.Current now.
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Fix: Live: [DG-4046] - Remove unnessary comments - adjust help menu to align left if 'Live' so it matches the rest of the menu - Removed 'Home' from Menu population in 'Navigation.cs'
- Mod: Config.Current
- Mod: Adweb: slicer.Payment ClubId and AssociationId columns backfilled using the payee names.  Only a thing for NZ.
- Fix: Live: Removed unnecessary EmailTemplate related files
- Fix: ClubCMS: #41328: at the footer of the My Account control, display the Ts&Cs note only for: 1. Flexiclub members on the Golf NZ website, or iGolf members on the England Golf Member Portal site OR 2. club members on a golf club website, if the club has the SUBSP product
- Mod: Live: update nuglify to latest version
- Mod: ISVAPI: tournaments: ShouldSetEndDateTimeStampToEndOfDayIfNotSpecified to be nice to ISVs #5003007
- Fix: Live: bundler - unexpected css syntax caused UI glitch in live
- Fix: ISVAPI: unit test failing because of Security.cs notimplementedexception
- Mod: iGolf: New Member Signup Reconciliation report - removed footer (because we got the tiles at the top now); changed TRANSACTION FEES to FEES; added club security (so one club can't see all the slices by playing with the PaymentId)
- Mod: iGolf Slicer development. - ReversePaymentBatch works now. - Link to detail report works now (uses PaymentId) - Added ClubId/AssociationId to slicer.Payment table - we need this for security filtering.
- Fix: Clubcms: lapsed members signing up again to igolf/flexiclub should have their member record DOB updated
- Fix: Live: Clubhouse certain click events not removing the blue bar correctly fix [DG-4046]
- Mod: Live: Clubhouse menu fixes for affected Orgs items [DG-4046]
- Mod: Live: Clubhouse menu styling mods [DG-4046]
- Fix: Org: compilation error
- Fix: Org: compilation error
- Fix: Org: compilation error
- Fix: Org: compilation error
- Fix: Org: compilation error
- Fix: Org: JuniorGirlsMedalTopNImprovers should be starting 1st March
- Mod: Org: Rename JuniorGirlsMedalTopN reports because N seems to keep changing
- Mod: Org: JuniorGirlsMedal all reports now match new spec from Pat
- Mod: Live: Welcome Email sender: removed extra space added in the recent commit
- Mod/Fix: Live: Welcome Email sender: update the way we find a CWMembershipApplication record match (consider the scenario where the email address entered by the user (recorded in CWMembershipApplication) is incorrect, and was later on corrected by the club via DG Live)
- Mod: Org: JuniorGirlsMedalTop100 medal report mods based on new spec from Pat
- Mod: Org: JuniorGirlsMedalClubMedal report updated to match spec from Pat
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Mod: Config.Current
- Add: Config.Current is now a drop-in replacement for ConfigurationProfileResolver.GetConfigurationProfile().  This should cut down on keyboard purchasing expenditure.
- Mod: iGolf: Adweb improvements around showing transaction reports.  Now uses code-based ExtQuery report for detail listing (requires my next commit).
- Add: iGolf Slicer: New Member Signup Reconciliation report. ExtQuery: new SingleStat rendering; gives you a nice big text output of a single data point.  Later on I'll add some up/down arrows to extend on this.
- Cleanup: Adweb: Removed SHOP transaction types; we no longer use these.
- Fix: ISVAPI: build warning fixed by removing  <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects> because it does nothing when targeting core
- Mod: ISVAPI: remove cancer datasetextensions nuget package
- FIX: Bulk Email - Not showing the Add Recipients button on Previous Email option reported by Matt
- Mod: Core: regen ISVAPIClient.g.cs
- Fix: The REAL fix was to delete the old crappy XeroAccounting.cs file from my working copy...
- Fix: ISVAPI: swagger shows memberupate response correctly
- Fix: clubcms: deleted cmember record should not stop someone signing up for iGolf/Flexiclub
- Fix: Org: registration stats copypasta error
- Slicer: Small tweaks to at least make the Send Transaction Reports area work; although it needs more work (e.g. the report link is incorrect and doesn't work even when you point it at GBI's environment)
- Add: Slicing now possible for England Golf (iGolf) membership application transactions.  No refunds yet (although this might work out of the box), and no renewals yet (only a problem next year). Mod: Removed GEAP and Shop transaction types; they are long gone. Fix: XeroOAuth2/Client.cs wasn't compiling for some reason that isn't obvious to me; had to remove the cancellationtoken parameter (which was None anyway).
- FIX: Event list control filter not toggling on mobile
- Mod: Platform Name: Updated to reflect 'Clubhouse' branding
- Mod: Live: Clubhouse menu styling mods [DG-4046]
- Fix: Org: email subscribed stats updated to reflect people who are registered for My England Golf
- Mod: ClubCMS: DG-3915: Allow members to update their First Name & Last Name. Added a control property "AllowNameUpdate" that enables name editing. We'll enable this feature for England Golf initially.
- Mod: ClubCMS: DG-3915: Allow members to update their First Name & Last Name. Added a control property "AllowNameUpdate" that enables name editing. We'll enable this feature for England Golf initially.
- Fix: Org: email unsubscribed stats now reads 'subscribed' instead of unsubscribed #5002828
- Mod: Live: Standard.Master code style
- Fix: API: TeeBooking: #41347 - Visitor seeing the "Member's Guest green fee rate" when booking on a timeslot that has already members booked in it (separate booking from the visitor). However, in the final screen (WindCave payment) that visitor gets charge the correct fee (e.g. Standard affiliate rate).
- Mod: sql: drop wa_RecalculateCompetitionEclecticNG_Fast because moved to c#
- Mod: drop proc live_readclubmessagebox because moved to C#
- Fix: Live: Interclubmessage inbox showing Wal Golf instead of actual sender for international home club change requests. #5002414
- Mod: Live/Org: ExtQueryRenderPage now renders correct time when using system print dialog
- Mod: Live: commit codebehind file
- MOD: BulkEmail - Fix 0 Tournament Entrants and remove created by not used Partial view and added empty Select option to Recipients from
- Add: iGolf refunds: Some defensive code around refunding receipts and the Windcave request failing for some reason.  We now void the receipt in our system (rolling back the transaction immediately), then try Windcave, then only void the receipt for real once Windcave has approved the transaction.  This way the database is left in a consistent state after failures.
- Mod: sql: update shortnames/codes of WG/GI/EG to be more correct - (we just made these up during the import process)
- Add: iGolf PXWS credentials for automated refunds.
- Fix: Digital Scorecard: Playing partners - incorrect hole pars.
- MOD: BulkEmail - Improve performance when getting the Total Unique Recipients
- Fix: Org: hole stats report works again for unions AND counties #5002912
- Fix: ClubCMS: rEditMemberDetails: the z-index property was affecting header text rendering (e.g. iGolf appears thin/pixelised)
- Fix: Org: total score entered report not working in GBI #5002940
- Mod: ClubCMS: removed references to non-existent .map files
- Fix: Live/Org: unsatisfied score intents not showing. #5002964
- fix: live: home club change crashbug #5002914
- MOD: Removed the BulkEmailQueries class and move the queries inside BulkEmail where it's meant for. The queries are only for BulkEmail and only BulkEmail.cs class should use it. Also, removed the method (InsertAttachments) I have added but didn't used it.
- Mod: iGolf: Just to keep behaviour consistent, do not allow refunding/voiding receipts if the club has the XERO product.
- Reverted; nevermind.  Bigger problems with this table.
- Mod: Don't let EmailUnsubscribe.PassportId and EmailUnsubscribed.ContactId both be null.
- FIX: Duplicate set of scores from National Tournament due to multiple OOM event.
- Fix: LoveGolf Play: 2x SQL injection attack vulnerabilities fixed.
- Mod: Org: automatically create support user when creating club
- Mod: Autogenerated poco classes.
- Fix: Remove unnecessary 'column' keyword [DG-3883] [40587]
- Mod: ClubCMS: [DG-3883][40587] - Updated LoveGolf Registration to ask for Photo usage for events -- Also during registration it'll ask for comments/suggestions
- Mod: Add Suggestion and AllowPhotoUsage columns to LGOfferRegistration table [DG-3883] [40587]
- FIX: Player not added to Tournament Scores due to text is max character is 4000, setting it to MAX now
- Fix: Digital Scorecard: Wrap around parenthesis before concatenating Marker gender and name.
- Mod: Digital Scorecard: Include gender when displaying the marker name in the app.
- Mod: Kill aw_createclub proc (already dropped)
- Mod: Kill aw_createclub proc (already dropped)
- Mod: sql: aw_createclub should be deleted now
- Mod: Autogenerated poco classes.
- ADD: BulkEmail: New column to BEDraft table to save the multiple types of Bulk Email recipients selection
- Fix: Core: No more explicit dependencies of System.ServiceModel.Http in the csproj because it's just clutter.
- Mod: ActivityTracker: remove unused packages
- Fix: Prod Jenkins build - Feature coalescing assignment is not available in C# 7.3.
- Fix: ClubCMS: Found an additional ';' where it isn't required
- Mod: Digital Scorecard: NZ - Enable immediate highlight of scoring discrepancies in the app.
- Mod: Org: hide specific user admin settings for Org County users as per EG request #5002486
- Mod: shared: dotgolf jquery extension method showAjaxSpinner now monadic and added to out d.ts file
- Fix: Background tasks: whoops, accidentally made the actual program starting/stopping fire-and-forget. Fixed, using odd async event handler stuff because it irks to use .Wait(), EVEN though it's a console app and not (normally) deadlockable.
- Mod: WHSAPI: Nullable reference type mods. new WhereNotNull linq-ish extension method because roslyn doesn't understand Where(x => x != null)
- Add: DG-4027 iGolf: Ability to Windcave refund a receipt from within DotGolf Live.
- ignore JS files generated by typescript
- Mod: Core: REMOVED AN AsyncHelper REFERENCE FROM CORE! BackgroundTaskService Stop/Start are async now. Fixed a bug.
- MOD: Bulk Email interface changes. The change is having the ability to Add or Exclude multiple "Recipients From", Improved UX and Refactor to not use Store Procs on CreateEmail and use the common C# query method.
- Mod: Org: Outgoing connectionmanagement maxconnections set to 64 in web.config to match Live
- Fix: Live: [DG-4031][41257] - Fix additional item being added when multi select add
- Add: Org: JuniorGirlsMedal Top 100 report Mod: Org: JuniorGirlsMedal Top50Improvers speed boost, update JuniorGirlsMedal ClubMedal to match spec description.
- Mod: Reports: minor memory savings by initialising some extquery DataSource row lists with the correct initial capacity
- Fix: Live: [DG-4031][41257] - Remove redundant bool state tracker
- Fix: Live: [DG-4031][41257] - UI fix where it wasn't keeping state of selected players
- Mod: Autogenerated poco classes.
- Mod: Extended CWPromotion.ContentHTML to varchar(max) to avoid string or object would be truncated exceptions.
- Mod: ISVAPI: cannot log in as club if the club is deleted.
- Mod: Org: Further attempts to make JuniorGirlsMedalTop50Improvers not time out
- Mod: Core: Regenerate ISVAPIClient.g.cs
- Mod: ISVAPI: remove debug endpoints from swagger.g.json
- Mod: Org:  JuniorGirlsMedalTop50 no longer times out...? testing in IE prod.
- Mod: Live: minor HandicapChangeDataSource perf improvement
- Updated swagger.g.json for ISVAPI (we include all methods now regardless of role, because we're the only ones using this json file (to generate our proxy classes).
- Add: ISVAPI unit tests to check ChangeDate is not updated if the same member data is reposted.
- Fix: Live: [DG-4022][41257] - Fix where the dragging table row does not reset and expands the left box enabling scroll (not what we want) -- This now shows the user what they're dragging and where it'll go back to
- Mod: Don't update Member and CMember changedate if ISVs call us updating members with the exact same field values.
- Mod: Org: JuniorGirlsMedalClubMedalDataSource cleanup some unused code (WHSMemberUID)
- Mod: Org: hide JuniorGirlsMedalTop50Improvers report because keeps timing out
- Fix: Missing file
- Fix: Org: JuniorGirlsMedalTop50Improvers wrong formatter
- Fix: Org: JuniorGirlsMedalTop50Improvers report too slow getting lots of handicaps :( try to hack it faster.
- Mod: Refactored the TBTransactionRefund code into IPaymentProvider from TBTransactionProcessor.
- Mod: Refactored TBTransactionProcessor to use IPaymentProvider.
- Add: Org: Junior Girls Medal - Club Medal report
- Fix: Org: JuniorGirlsMedalTop50Improvers report removed autorun because it's a slow report
- Mod: iGolf Welcome Email: social media links update (as requested by England Golf)
- Mod: ClubCMS: [DG-4021][37655] - Added Flexiclub to the contact list TODO: Move Flexiclub details to something remote so it can be loaded dynamically
- Mod: Windcave: Some of the payment code and web reference extracted from ClubCMS and made part of DotGolf.Core (as IPaymentProvider).
- Mod: Live: Member: when sending/resending a Welcome Email (via Membership tab), log the EmailId in the PassportClubLog table, then display the log on the Member History tab.
- Mod: Live: newline support in extquery headers
- Mod: iGolf: Update TBTransaction.ReceiptId so that we link Receipts and TBTransaction records up directly.  This will be used when processing refunds.
- Mod: Org: DeleteScoreIntentMemberReason works for orgs now
- Fix: typo in ExtQueryReport.schema.json
- Fix: Live: stray ${MyGolf} text in general play scores report
- Fix: Org: accidentally broke some pages by moving MasterPageOptions to the <head> tag, so just moved it into the <body>.
- Fix: Live: style tag typo in TabMemberScoresWHS.aspx
- Add: Org: 1st Junior Girls Medal report for IE enabled
- Mod: Live/Org: show SoftCapHardCapReport in Live. Report now only shows members with caps
- Mod: Autogenerated poco classes.
- Add: iGolf: New TBTransaction.ReceiptId column used to link up credit card payments directly with receipts, for when we need to refund or pay them.
- Mod: Live: GeneralPlayScores report - remove date range validator (pending testing) and remove timestamp from report because it's not there for app scores. Changed title of IsApp column. #5002900
- Mod: Autogenerated poco classes.
- Fix: Use DatabaseBuilderImpl instead of DatabaseBuilder (the XUnit mutant)
- Fix: Live: [DG-4011][37655] - Change the redirect link to conform to the new golf nz site to view PromotionalCampaign
- Mod: Configuration Profile: NZ - Updated member benefits link for Stage environment. Fix: Digital Scorecard: If someone puts me a real score (on their app) equivalent or higher than a pickup, that score discrepancy should be highlighted in the app. Mod: Digital Scorecard: Rename some variables for clarity; E.g. "sourceHoleScore" to "mainPlayerHoleScore", "destHoleScore" to "partnerHoleScore"
- Mod: Live: tidy up the Welcome Email sender for clubs with the SUBSP product. (It was initially used for iGolf only, but making it available to NZ as well.)
- Mod: ISVAPI: Allow SwaggerGen to output json for all methods on the API regardless of authentication.
- Fix: ISVAPI: stop breaking build
- Mod: DatabaseBuilder wrapper for XUnit.
- Fix: ISVAPI: no deleted members from deleted clubs in a page please (CRMAPI)
- Fix: ClubCMS: DG-4010 - Updated ckeditor/config.js to have config.htmlEncodeOutput to true in loaded settings - Per documentation there could be a chance that the editor will store old data and not new so calling 'editor.updateElement()' prior to saving - Updated error message in the alert to be a bit more meaningful
- Fix: ISVAPI: no deleted members from deleted clubs in a page please (CRMAPI)
- Fix: IDataLogger implementation no longer conformed to the interface because of the new method I added.
- Fix: Fix: ISVAPI: finally got the paging working from CRMAPI without any infinite loops
- Mod: Live: also allow sending / resending of the "New Member Signup" Welcome Email for NZ (Flexiclub and Golf Clubs with SUBSP product). Make sure the  The same email sender tool is already being used for iGolf.
- Fix: ISVAPI: finally paging correctly for CRMAPI change date
- Add: Configuration Profile: New Zealand - Add member benefits link.
- Fix: Oops.  msbuild.exe didn't share my unique sense of humour.
- Mod: Exposed LogDataAsync() on IDataLogger to allow writing structured info to an Elasticsearch index.  Previously the WriteLine() method only allowed lines of text.
- Fix: Digital Scorecard: [DG-3917] Immediate highlighting of score discrepancies (part 4)
- Fix: ISVAPI: restore ByMemberId_AnyEmail to its rightful place because the data gets used to withhold handicaps
- Fix: DigitalScorecard: Calculate playing handicap if we don't have it in the Scorecard record.
- Mod: ExtQuery report list: Show in Live/Org columns.
- Mod: In Adweb you can now see a list of all reports (not just the ones defined in the database), along with permission information that shows who can see them.
- Fix: ClubCMS: [DG-4019] FreshDesk - [41128] - The global aspx redirect will not pick this up thus forcing redirect to new signup page here
- Mod: ClubCMS: High Performance Pro control: defined PlayersPage control property (existing in code)
- Mod: Org: bulkmarkerupdate performance improvements. Moved ORG masterpage options to top of the file (same is in live) so that js scripts can depend on it when loaded.
- Mod: ClubCMS: High Performance Pro: hide OOM link if there's no link defined for the pro player
- Mod: ISVAPI: unit tests for whether deleting a club breaks paging
- Fix: ISVAPI: page size was bugged if a club was deleted for CRMAPI
- Fix: Digital Scorecard: [DG-3917] Immediate highlighting of score discrepancies (part 3) - Fix incorrect calculation of a max score (that is equivalent of a pickup).
- Mod: ISVAPI: add 404 to documentation on endpoints that can return 404s. stop using ByMemberId_AnyEmail for clubs because it's a potential gdpr hole
- Fix: ISVAPI: documentation was not showing after core3.1 migration #5002882
- Mod/Fix: Live: Member History: Email logs: use /shared/EmailViewer/EmailView.aspx?emailId=x$code=x to view the welcome email and payment confirmation email sent during new member signup. The same email viewer is used for invoice emails.
- Fix: ClubCMS: DG-3999 [https://dotgolf.freshdesk.com/a/tickets/41205] - Updated so that matching is case insensitive
- Fix: I dunno, trailing spaces makes this break?
- Fix: Core: purged some AsyncHelper references from BackgroundTaskLogger
- Mod: Core: added missing angry comment in AsyncHelper
- *** DFH CODE REVIEWED TO HERE *** Fix: Live/Org: ineligible 9h score was not showing as having the ineligible for handicapping icon #41256
- Fix: Build: Missing line in prev commit
- Fix: Org: getting report timestamps was not working for top level orgs
- Mod: Org: Restore timestamp to ActiveReports.
- Fix: Random blank inter club message showing up once you publish a bulk email this way.
- Fix: Live: handicap freeze report was not working for top level orgs
- Mod: API: /save-score endpoint - Remove Console.WriteLine().
- Fix: ISVAPI: tests:  System.AggregateException : One or more errors occurred. (Collection fixture type 'DotGolf.Core.Tests.DatabaseBuilder' may only define a single public constructor.)
- Fix: Live: DataCache tests
- Add: Org: Golf IE JuniorGirlsMedalTop50Improvers report
- Mod: Live: display CMember.DOB instead of Member.DOB
- Fix: API: Immediate highlighting of score discrepancies: Exclude pickups (part 2) - if someone scores me a pickup but on my card I entered a score equivalent (to a pickup) or higher.
- Fix: Live/Org: accidental file commit in prev rev
- Fix: Live: Extquery schema fixes - added CountryPermission and removed SystemPermission
- Mod: Org: Deleted 'Avg Score Diff For GP and Comp' report because it's been superseded by Competition vs General Scores report
- Fix: Org: Build (forgot a file in previous commit)
- Mod: Org: International courses added to bulkmarkerupdate................................................... #5002832
- Fix: Live/Org: Restore timestamps on extquery reports and stop printing the current user because it looks often looks weird
- Fix: API: View/Edit profile: Use the DOB from the live home club member record.
- Fix: ClubCMS: DG-3999 [https://dotgolf.freshdesk.com/a/tickets/41205] - Redirecting old golf nz contacts page to the new cms link
- Fix: ClubCMS: terraces3/Template.aspx: just added reference to moment.js (e.g. used by rEditMemberDetails control - for the DOB)
- Mod: CuteEditor Uploader provider implementation added to make it play nice with load balancing. Freshdesk ticket #41127.
- Mod/Fix: ClubCMS: rEditMemberDetails: forgot to use clubId instead of ParentClubId (Rev 47053)
- Fix: WHSAPI: infrequent 504 errors are hopefully fixed, increased kestrel connection timeout to 75 from 60s, where current ELB timeout is 60s. See: https://sigopt.com/blog/the-case-of-the-mysterious-aws-elb-504-errors/
- Mod: Autogenerated poco classes.
- Mod - quick hack: Bulk email interclub messaging integration - if you insert an InterClubMessage row with an EmailComposeId, this will show up in club inboxes and have a View link that previews the bulk email.
- Fix: API: Digital Scorecard: Save round setup - Added check to prevent inserting the same entry multiple times.
- Mod/Fix: ClubCMS: rEditMemberDetails: display Cmember.DOB instead of Member.DOB
- Fix: Shared: LinkScoreCardsToRSScore was deleting Scores, but not calling the score deleted hook. #41229
- Mod: ISVAPI: Forgot to commit MemberRecordManager.
- Mod: ISVAPI: Use MemberRecordManager to insert/update Member/CMember/Passport records (for inter-union searches).  The code is now part of DotGolf.Core so we can call into this from UnionAPI.
- Mod: scheduledtasks: wa_RecalculateCompetitionEclecticNG_Fast c# now does this recalc in sub 1 second (instead of the ~1min that this takes: exec wa_RecalculateCompetitionEclecticNG_Fast @CompetitionId=804415,@MemberId=NULL)
- Mod: scheduledtasks: move wa_RecalculateCompetitionEclecticNG_Fast into c#, asyncify the eclectic results processing queue.
- Mod: Org: [DG-3981] - Shifted 'Registration Stats' report from adweb db to the new report type - Updated SQL queries to exclude resigned member stats - Updated Unsubscribe emails to have a break down of its types with relevant names - Added the required SQL linked to this report
- Fix: Core: DataCache race condition where an object could expire juuuuuust after the code checks whether it exists in the cache, leading to ORNS when we try cast null to (T) (if T is a struct).
- Mod: Shared: DataCache no longer uses weird dictionary code path in DEBUG mode (because we can always use new System.Web.Caching.Cache() now)
- Fix: sql: script 3603 causing unit tests to fail
- Mod: Autogenerated poco classes.
- Fix: Removed a couple of temporary tables from EzPoco so they don't get included in our pocos.
- Mod: Autogenerated poco classes.
- Mod: DatabaseBuilder: Improved sql script downloading to do it in order so that the scripts execute faster. Mod: PristineDatabaseBuilder utility now uses a different database name when I'm debugging (to avoid upsetting Jenkins)
- Fix: Org: don't delete someone's passport when their casual golf membership gets deleted in org - only delete the credentials
- Fix: ISVAPI unit tests: XUnit doesn't like constructors with defaulted parameters, apparently.
- Mod: Changed EzPoco database name to Test_Baseline.
- Fix: Shared: DataCache race condition where an object could expire juuuuuust after the code checks whether it exists in the cache, leading to ORNS when we try cast null to (T) (if T is a struct).
- Mod: PristineDatabaseBuilder now allows revision and branch to be passed on the command line for make glory Jenkins.
- Mod: PristineDatabaseBuilder now allows revision and branch to be passed on the command line for make glory Jenkins.
- Add: _deploy for PristineDatabaseBuilder so that we can have DotGolf.Core build working.
- Fix: Eliminate dots from database names; it exposes way too many places where we don't properly quote database names.
- Mod: CreateDB.sql rolled back a few revs because our unit tests currently still depend on "stuff" inserted in schema scripts.
- Mod: DatabaseBuilder.cs now gets schema files directly from Subversion, which means it doesn't have to check out the whole /sql directory before we can run.  Also we can pull files based on any revision, making CI more stable (once I mod this to allow passing the version number in on the command line).
- Fix: old golf.co.nz: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union).
- Add: Pristine database builder utility to produce a Test_Baseline database on DEV4 which can be used for Poco class generation.
- Fix: Live: Build, after changing iGolf from WellknownIDs.Associations to WellknownIDs.Clubs
- Fix: API: Build, after changing iGolf from WellknownIDs.Associations to WellknownIDs.Clubs
- Fix: ClubCMS: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union).
- Fix: API: Digital Scorecard: [DG-3917] Immediate highlighting of score discrepancies - Incorrect score returned. Someone from the group scored me a pickup but the score returned from the response is the score on my next hole - instead of '0' I got 4 instead.
- Fix: PackageVersionChecker: Show DotGolf.Shared and DotGolf.Core in the output so that we can see their package versions too. Fix: PackageVersionChecker: Quoted svn repo urls in case there is a space somewhere.
- Mod: sql: flexiclub now has ClubUID 'A53CEF26-E18F-4D38-BB66-B83D64172D6E' everywhere, so we can add it to wellknownIds
- Mod: Live/Org: [DG-3971] Removed time component from report footer leaving just the date
- Add: ClubCMS: Add redirect for DotGolf app privacy link.
- Mod: Core unit tests: made the solution name part of the test database name so that UnionAPI and ISVAPI can run tests at the same time.
- Mod: Core unit tests: made the solution name part of the test database name so that UnionAPI and ISVAPI can run tests at the same time.
- Fix: API: Build (forgot to commit file)
- Mod: Dirty dirty hack to make ISVAPI unit tests work.  wa_RolloverUpdateMember should die soon...
- Fix: ISVAPI: Country proxy unit tests weren't working because the UNION-LINK ThirdParty record was missing from the unit test DBs.
- Fix: ISVAPI unit tests: I dunno, seems to need an Association row here.
- Mod: 404 instead of exception if you don't ask ScorecardScanImage.ashx for the image nicely.
- Mod: QueryCache updated to be async compatible, so you can safely await these when you pass an awaitable delegate into it.
- Fix: API: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union).
- Fix: Org: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union).
- Mod: Live: Some small Member.HomeClub cleanups to reduce number of casts to 'Club'
- Fix: Adweb: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union).
- [BREAKING] Mod: Live: Member.HomeClub is not longer a nullable 'Club' - it's been replaced with IInteropClub, which can be either a Club or an AwayUnionClub (i.e. club in another union). Need to fix builds outside of Live.
- MOD: remove duplicate get region param
- MOD: Fixed the duplicate AJAX call on GetClubs that might cause the 0 clubs found
- Fix: API: MyGolf: [DG-3918] Casual golfers - score listing. Use value from actual gross score column (Score.Gross_Act) if Score.Score column is null.
- Mod: Live/Org: ExtQuery reports show daylight savings timezone name vs standard name depending on whether DST is active.
- Mod: golf.co.nz: using our topropercase instead of system.text globalization titlecase to avoid special handling for NZ Players news tag
- Fix: ClubCMS: [DG-3970] - Remove proper casing for 'NZ Players' news tag for golf nz news menu - Updated the ordering of menu with new filters
- Fix: Live/Org: DeleteScoreIntent subreport converts deleteddate to user time now
- Add: Commented code for turning on CDC in production.  In case we need this for GBI later.
- Add: ExtQuery: Specific implementation for doughnut charts.
- Fix: API: TeeBooking: When a club admin adds a cart to your booking and you update the booking thru the app, the cart is removed.
- Fix/Mod: Live: Membership Billing Card Holder Name: do not convert to lowercase
- Fix: Live/Org: adjustments tab could be visited without the correct permissions by hacking memberid in the page url
- Fix: Live/Org: adjustments tab could be visited without the correct permissions by hacking memberid in the page url
- Fix: Live: BulkMarkerUpdateTask was doing clustered index scans after rev 46908
- Mod: sql: update bulkmarkerupdate queue index to include scoreid asc so we can process earlier scores first.
- Fix: Live: added extra safety check to WHSScoreInsertedUpdated playTime updating
- Fix: Live: Typo in rev 46965 causing scores not to update from WHS when edited
- Fix: Live/Org: imported scores not being ordered correctly in score listing relative to WHS - people's 20th/21st scores would be mixed up, causing confusion. #5002676 #5002638
- Fix: Live: Stop trying to load scorecard scan images when editing scores without cards.
- Cleanup: warehousebuilder dapper version
- Cleanup: SyncFreshdeskTickets dapper version
- Cleanup: warehouseservice dapper version
- Add: ClubCMS: Global.asax - Add redirects for app privacy links.
- Cleanup: adweb dapper version
- Cleanup: sso & api/tests dapper version
- Cleanup: live.tests dapper version
- Cleanup: mailer dapper version
- Cleanup: warehousebuilder dapper version
- Mod: ClubCMS: rMemberSignupConfirmationV2: moved the welcome email templates to Shared (for consistency; and so they could be used in Live, as done for iGolf)
- Fix: ClubCMS: [DG-3960] - Added logic to look at the search query in window.location to get the request query -- As when its coming from '/Template.aspx' it was not getting 'page' in the request thus throwing null error during redirect - Added try catch for dataUrl for cropper.js - Change Error message in alert and added log so it makes more sense
- Mod: regenerate WHSClient.g.cs
- Add: WHSAPI: return score playdate when score is created (so we can determine how we should order scores submitted with the same playdate.)
- Mod: S3FileProvider now caches bucket contents to attempt to speed up CuteEditor file listings.  Turns out GetFileItems() is called for multiple filters (e.g. *.jpg, *.pdf etc).
- Fix: API: friends with pending handicap showing as 0.0 instead #5002773
- Mod: ISVAPI: unit test for change-date ordering for CRM API to show that yes we are doing it right -_-
- Mod: API: MyGolf: [DG-3918] Make score listing work for casual golfers.
- Fix: Live: Show all Active/Inactive markers by default if the club has any markers turned off, for clarity. #5002718
- Mod: Live: Member Details: Subscriptions: display billing card details even if it's voided. And if it's voided, make it obvious that it looks as such (use line-through and light font colour). On hover, display the Deleted Date as a tooltip.
- Fix: Build (again): XeroOAuth2/Client.cs is all async now
- Fix: Build (after nswag update)
- Fix: SyncFutureGreenFeesTask: Fix #41122 - Scheduled task was not syncing green fees in VEND/LightSpeed. The default equality comparer is not working so we need to implement our own IEqualityComparer<T>.
- Cleanup: isvapi.core useless package references
- Fix: Live: allow 2 charts in the same report
- Cleanup: nswag package update
- Mod: Live: Resign-Delete member option: show this option as long as the member doesn't have any active invoices.
- Mod: ActivityTracker not using System.Runtime.Caching
- Cleanup: dapper updates to 2.0.35
- Mod: Explicitly installed some packages into ISVAPI.Core to try and get around the package downgrade errors.
- Cleanup: Removed System.IO.FileSystem.Primitives from ISVAPI.Core in an attempt to appease Build1/Jenkins.
- Fix: PackageVersionChecker: Core now shows in the list of projects
- Mod: Core: update JWT to 5.3.1
- Mod: ActivityTracker: remove newtonsoft direct reference
- Cleanup: UnionAPI: dapper update to 2.0.35
- Cleanup: Reports: dapper update to 2.0.35
- Mod: ActivityTracker: remove unused Framework package reference
- Cleanup: dapper updates to 2.0.35
- Fix: Org: BulkMarkerUpdateTask: process earliest-played scores first for BMU entries with the same create date.
- Cleanup: ClubCMS: dapper.contrib update to 2.0.35
- Cleanup: Live: dapper.contrib update to 2.0.35
- Cleanup: Org: dapper.contrib update to 2.0.35
- Mod: Bulk Email: Reinstalled Roslyn package and removed LangVersion (we don't need this anymore starting with VS2019)
- Mod: API/BulkEmail/SSO: update JWT to 5.3.1 to match everything else
- Fix: API: Digital Scorecard: Map result of QuerySingleAsync() to type <int>.
- Mod: Live: Billing Card Details: display card holder name; layout / text updates
- Mod: Live: Member History: display the new member signup payement Transaction ID. Also display the Transaction ID in the existing Receipt rows (only for online payments -- renewals online payment, instalment online payment)
- Fix: Analytics: [DG-3910] - Fixed wrong and duplicate script files being loading via bundler - Fixed/added null checks of data and its object in knockout - Removed unrequired html and bundler loading tags
- Mod: UnionAPI versioning - removed version from the URL.
- Mod: Live: allow iGolf DG Live users (and the DotGolf NZ team) to re-assign the invoice to another member (e.g. this is useful when resigning and re-adding members using their original member record)
- FIX: tags filter upon initial load
- Fix: #41037 PCC value was being applied to PCC-adjusted results incorrectly.  For the Net Vs Par competition type it was applying 9x the correct value; the PCC should have been divided by 18 first so that the correct fraction is applied to each hole.
- Fix: ExtQuery: PostProcessing crash caused by ORNS.
- MOD: corrected type and use SQL alias
- Added region filter on initial load for Golf NZ Event List and Tournament controls
- Mod: API: TeeBooking: [DG-3714] Retrieve DPS credentials from the app configuration profile. Add: DotGolf Core: Add WindcaveCredentials wrapper class - used for retrieving credentials from the app configuration profile.
- ** DFH CODE REVIEWED TO HERE ** Mod: Commented out some old sql schema changes so that unit tests can start working again.  These procs all get dropped in 3603 anyway, so no need to have them in here anymore.
- Cleanup: Removed code analysers that were causing Jenkins to trip up.
- Add: PackageVersionChecker v1
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Fix: ClubCMS: [DG-3909] - Added Logging to Database log of what was submitted by the user's filled form so we have history of what was submitted
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Brought package versions in line with those in Core and Shared.
- Cleanup: Removed Loggly package; this account has long been dead due to inactivity, and we are using Elasticsearch for our logging these days.
- Mod: Live: iGolf Welcome Email txt file rename to "WelcomeMemberIndependentGolfer.txt" (to make it consistent with its original file in ClubCMS)
- Mod: API: Digital Scorecard: [DG-3557] Immediate highlight of score discrepancies part 2.
- Mod: Live: iGolf Welcome Email sender tidy up the temporary/initial solution published on 13/7/2021.
- Fix: ClubCMS: [DG-3909] - Add 'required' tag to select list if it is required - check upon submission of form if all required answers are answered then submit else highlight it in red
- Add: ExtQuery: Redshift database engine support; including settings to enable the NewZealand/Development environment to connect and run queries in our sandbox cluster.
- Add: ExtQuery: Post processing of data before it hits the renderers.  So far we can pivot datatables by adding this into a DataSource:
- Fix: ClubCMS: [DG-3909] - Changed the way answers were being pulled to use '|' and not ',' as demiliter - If the answers are of type text then append to email body else leave it.
- Mod: [MAJOR] Upgraded all AWSSDK packages to latest versions in preparation for Redshift integration.
- Fix: Inadvertently hid the bulk email SEND button from clubs in NZ.
- Add: Live/Org: Competition Vs GeneralScores report for GBI
- Mod: Moved ScoreCardScanImage.cs to /shared to join its cousin.
- Fix: DG-3890 Race condition when members are signing up for Flexiclub/iGolf.  If two people get in at the same time, they can get issued the same membership number.
- Fix: ScorecardScanImage.ashx moved to /shared; security vulnerability fix requires both ScoreCardId and ScoreCardScanId to be sent in now.
- Fix: Security vulnerability; you are able to download any scorecard image anonymously by guessing either the scorecard scan id or the scorecard id.  Now we require both the ScoreCardId and ScorecardScanId before we render out the image.
- Mod: Moved ScorecardScanImage.ashx to /shared/api so that Org can get to it too.  Previously if you tried looking at a scorecard image from Org you'd get a 500 internal server error.
- Fix: ClubCMS: people signing up to igolf were getting timeouts while trying to pay because of stupid webrequest maxconnections - we took their money but then the DPS request 'timed out' and threw exception so no member got created.
- Fix: OutOfMemoryException when dealing with large club logos.  You have to keep the MemoryStream alive for the duration of the Bitmap's existence.  https://stackoverflow.com/questions/46803748/c-sharp-outofmemoryexception-in-system-drawing-bitmap Also found and fixed a few places where MemoryStream was not being disposed of.
- Mod: Core: regen WHSClient.g.cs
- Fix: WHSAPI: endpoint to get member scores for a club much better now and handles 9h scaled and combined scores
- Add: ExtQuery layout capabilities.  You can now layout DataSources in two ways - a list (like it used to render) or a flexbox powered grid.
- Fix: ClubCMS: [DG-3500] Added back missing update for BillingTokenId in during rebill
- Fix: Whoops.
- Add: ClubCMS: Caching for friendly page name lookups.
- Mod: ClubCMS: Got rid of a DataSet in the core ClubCMS control rendering code.  This should squeeze a bit of performance out of the web tier.
- Mod: ClubCMS: In debug mode we no longer permanently redirect to image URLs, otherwise this breaks when we switch between Prod/Stage/Dev environments while debugging.
- Fix: Some BookingState.Slot null checking introduced to stop spiders (and users in some cases - think browser back button) from throwing ORNS exceptions.
- Mod: WHSAPI: AsList instead of ToList to avoid performance cost of ToList-ing something that is a list already
- Fix: Live: Functions: Fix #41006 - Sending function invoice to Xero errors out if a contact (customer) does not have an address set in Xero.
- Mod: ClubCMS: [DG-3806] - Removed unnecessary line for CSS that was causing display issue
- Fix: ClubCMS: GI member with home club in ENG could not get past the password entry stage of signup. #5002577
- Fix: TeeBooking: ConfirmPayment - Check for Passport.DeletedDate to ensure that we only select the active passport record.
- Mod: Live: iGolf: find another way to to send / resend the iGolf Welcome Email to iGolf subscribers (because the first solution has merge conflicts)
- Mod: Live: iGolf: temporary / initial solution to send / resend the iGolf Welcome Email to iGolf subscribers
- Fix: TeeBooking: In dev, pay by existing card not working due to invalid DPSUserId passed in the SQL query statement - it should be Settings.DPS_PXWS_USER_ID.
- Revert svn 46817.
- Fix: TeeBooking: Should be "DotGolfDev" and not "DotGolf_Dev" - this is just to make DEV work with paying a booking using an existing card. We are going to remove this soon and use app configuration profile.
- Mod: WHSAPI: ScoresForClub endpoint now returns less stuff per (makes logging faster and reduces latency per request). Added option recompile >:(
- Mod: ClubCMS: [DG-3806] CSS to make 'The Open' leader board responsive
- Fix: ClubCMS: [DG-3880] - Added indicator to let the user know that the form is being submitted - Hidden the button from user once they've tried to submit
- Cleanup: Couple more warnings; build works again.
- Cleanup: Sped up build a little bit; got rid of some random warnings.
- Fix: England: Reinstate iGolf register link (part 2)
- Fix: TeeBooking: Retrieve the person's passport Id (who made the payment) from the database instead of getting it from the session.
- Mod: Live: inter-country member quicksearch filter placeholder text from '-- Member Code Only --' to '-- Member Number Only --'
- Mod: ClubCMS: England - Reinstate the actual link to the iGolf signup page.
- Mod: WHSAPI: nullable reference types in WHSAPI.Core
- Add: #backgroundtasks Some cleaning up, adding documentation.
- Add: [PROTOTYPE] #backgroundtasks v0.9.  This will allow us to run long-running tasks in a dependable way, automatically suspending/resuming if we need to apply updates, and reporting status back to whoever is executing the task.  I might even document this so it's easy to use...
- Fix: Live: [DG-3682] Fix Competition Entries Report from $ to % for credit card commission - Changed the display from dollar amount to %. - Updated the localization designer to not multiply value by 100 while using %. - Pulling formatter from Localization Designer
- Mod: Core: update WHSClient.g.cs
- Mod: Live: Removed knockout-3.5.0.js + knockout.mapping-latest.js + knockout.dotgolf.extensions.js from some pages because those already exist in standard.master
- Add: WHSAPI: unit testing for endpoint to get member scores for a club.
- Add: WHSAPI: endpoint to get member scores for a club.
- Mod: [MAYBE A BIT OF A THING]: Global database timeout reduced from 60s to 30s.
- Fix: Found 2 places where TXLine could end up with a null ClubId.  This will require data cleanup; will commit script shortly.
- Mod: Removed TXHeader and TXLine from EF model since I suspect we don't use these anymore.
- Mod: Public: remove region/district/county label in Edit Member page because it's readonly and is actually their home club's region - causing confusion esp in Ireland.
- Mod: ClubCMS: simplify Lang.Current call in membersignup page
- Cleanup: Removed old TScore background task.
- Cleanup: Removed old TScore background task.
- Mod: Slight hack to make pagemethod fails show up a little bit nicer in our F12 warning message.
- Mod: WebUser timezone is cached for the duration of a request, just in case someone (like me) calls it a billion times while generating a report or something.
- Mod: API: Do not log specific exceptions to reduce noise in the exception log - determined by LoggingApiController.CanLogExceptionType().
- Mod: API: We are still throwing TimeSlotsLockFailedException in the LockTimeSlots() method but not logging it in vortex.
- Fix: UnionAPI unit tests working again after fixing initial schema script and updating the version number.
- Fix: Hide the "Sign in as" and "Forgot Password" links from Org for districts (privacy complaint by John Christini even tough it doesn't get you access into anything that you get from Org already)
- Fix: Serialization error in Bulk Email caused by public Association property.
- Mod: ClubCMS: [DG-3751] Removed unnecessary console logging
- Fix: API and Live now compatible with TryLockTimeSlots().
- Mod (breaking): LockTimeSlots no longer throws an exception if a timeslot can't be locked; instead I've renamed this method to TryLockTimeSlots() and it returns a value indicating whether the lock worked (true) or not (false).
- Mod: ClubCMS: [DG-3751] - Golf.co.nz to load menus dynamically in news section. - Organise the pulled data into correct order - Changed tags per request by Jason Gulasekharam [https://dotgolf.freshdesk.com/a/tickets/40533]
- Mod: ClubCMS: [DG-3858] Updated alert when there is an error to have a more meaningful error message attached.
- Fix: Hitting the URL http://localhost:61960/view-article?article=22826-1393436358&ComeFromCat will result in an ORNS exception (common request from search bots for some reason).
- Fix: ORNS exceptions when resubmitting ConfirmPayment.aspx (either user or DPS) - if bookingstate is null we now take them off to the My Bookings page instead of throwing.
- Mod: API: stop logging an exception every time member benefits link gets hit. update IConfigurationProfile class to include MemberBenefits and FlexiMemberBenefits
- Fix: ORNS exception if someone tries embedding our camera image directly into their own site.  Now returning 404 instead.
- Add: More sql injection patterns.
- Mod: Block another common sql injection string.
- Mod: Core: "GZ\n" and "RAW\n" string moved to constants inside the redis datacache
- Mod: Unit test for Redis QueryCache loading collections from the cache
- Fix: Core: Redis QueryCache was throwing expections when loading anything of type List or IList. (it was deserialising them as a JArray rather than the type we wanted.)
- Mod: CasualGolfAPI: remove thread.sleep in DEBUG mode
- Fix: Redact method now handles incoming nulls...
- Fix?: API/Public: AppPerformanceTracker should we awaiting Task.Delays, not blocking on them
- Mod: Try to change the LockImage control ID to see if we can make this error go away:
- Fix: API: member benefits link does exist outside EG, trying to fetch it for NZ throwing exceptions in API
- Mod: ClubCMS: England - redirect to the https link.
- Fix: Live: Áine McKay's "Á" was missing from the font used for the grey header tiles on invoice page, member tab etc
- Mod: ClubCMS: England - iGolf signup link redirected to "register your interest page" in the England Golf site. This is just a temporary mod and will revert back to the original once iGolf is launched.
- Fix: It's called ConfigurationProfileFeaturePermission.  Oops.
- Mod: ClubCMS: rMemberSignupV2: add ShowTooltips control property (so we can hide them for NZ)
- Fix/Mod: Live: Subs Billing Card display: use Configuration Profile to determine the Subs Windcave User ID (this fixes displays of the billing card in Clubhouse EN Production)
- Fix: Live: Weird tile display when viewing a subs invoice because of EG membership number length
- Mod: API: IX_MobileDevice_DeviceUniqueIdentifier to speed up Unregister calls and stop them deadlocking with the mailed notification loop
- Revert: Mod: API: IX_MobileDevice_DeviceUniqueIdentifier to speed up Unregister calls and stop them deadlocking with the mailed notification loop
- Mod: API: IX_MobileDevice_DeviceUniqueIdentifier to speed up Unregister calls and stop them deadlocking with the mailed notification loop
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: rMemberSignupV2: when checking a resigned member's eligibility (within the stand-down period or not), we only query their other club membership records
- Fix: ClubCMS: rMemberSignupConfirmationV2: EG (and WA) members use one membership number (we shouldn't assign a brand new membership number when an eligible resigned member joins iGolf)
- Mod: ClubCMS: rMemberSignupV2: remove saving of plain text password on CWMembershipApplication table
- sql: Add index to markerdefault by deleteddate+courseid for (used in live_GenerateOrUpdateCompetitionRoundSegments)
- Fix: ClubCMS: rMemberSignupConfirmation: handling previous membership number (MemberCode) as string not int
- Fix: Live: VendWebhook DeleteScoreCard was not using IX_TXLine_ExternalTransactionId, need to pass it as varchar Mod: Live: Remove unused methods from VendWebhook - IsVendSynced, DeleteTxLine, CreateNewTxLine, UpdateScorecardAmount, SyncRegisterSale, IsFeesSynced
- Add: ClubCMS: England - app permalink to the privacy policy page.
- Fix: Live: VendWebhook IsScoreCardMarkedAsPaid was not using IX_TXLine_ExternalTransactionId, need to pass it as varchar
- Fix: ClubCMS: ko binding typo in previous commit 46702
- Fix: ClubCMS: ko binding typo in previous commit 46702
- Fix: Live: Kiosk: if users session has expired, we were throwing an exception, but the client code (which reloads the page when it gets a NOT_AUTHENTICATED msg) was expecting a successful response CONTAINING ErrorMessage=NOT_AUTHENTICATED
- Fix: Live: scorecardabstract errors if a scorecard reprint call fails, and it attempts to call a null 'fail' callback: DotGolf.api.JavaScriptException: Uncaught TypeError: fail is not a function
- Add: ClubCMS: 'your handicap may change overnight' message
- Fix: ClubCMS: when being redirected from mobile app to public site, if the user was resigned, the public site would crash (since MemberOrNonaffiliateId is null if the member is not live and they're don't have a nonaffiliateID)
- Mod: ClubCMS: Payment Confirmation Email: remove Address
- Fix: ClubCMS: [DG-3751] - Added mobile menu as select List - Loading data dynamically from database [CWTags] to populate view TODO: - Add more tags into DB per request [FreshDesk - 40533]
- Mod: Live: RoundsPlayedByDate report faster using dapper. Fixed bug where members with multiple club memberships would be duplicated in the counts (because of a join on clubmember that wasnt filtered by clubid)
- Mod: Live: RoundsPlayedByDate report no longer times out
- Mod: ClubCMS: iGolf Welcome: hardcoded the additional message since the payment confirmation email's "additional message" is now different from the welcome email's (requirements have changed). It's ok to customise this file for iGolf since only iGolf will use this.
- Mod: ClubCMS: rMemberSignupV2: clear all validation messages before displaying a new one
- Mod: ClubCMS: rMemberSignupV2: updated date format from YYYY-MM-DD to DD/MM/YYYY
- Mod: ClubCMS: rMemberSignupV2: allow lowercase letters in the postcode field; moved IsNumberKey function to the external js
- Mod: ClubCMS: gallery swiper js: mobile style updates
- Mod: Live: SCA loads faster use loads less data
- Mod: API: GDPR: Redact the password field when logging requests to elasticsearch.
- Mod: ISVAPI: log requests by START time not end time.
- Mod: ClubCMS: just updated the description of a control property
- Mod: ClubCMS: rMemberSignupV2: add tooltips to some fields (as requested by EG)
- Mod: ClubCMS: gallery swiper js: mobile style updates
- Mod: ISVAPI: when searching interunion, should add dummy members when searching by membercode AND memberUID
- Mod: Properly upgrade SignalR to v2.4.2 this time (needed to do the javascript components too)
- Mod: ClubCMS: zForgotPassword: use the existing SuccessMessage for setting the message that shows after a successful password reset request (this allows us to customise the message for EG)
- Mod: SignalR: Call the .join method if we reconnect from the client.
- Fix: API: /mygolf/list-friends endpoint: [DG-3843] Display friends' latest score regardless if it's an 18H or a 9H score. Previously we were only showing the latest 18H score - DGI ticket https://dotgolfinternational.freshdesk.com/a/tickets/5001870.
- Mod: Org: [DG-3824] - Limited PCC report to only courses for district in selection - TotalScoresEntered report has now got a new limit of 1 month selection gap as opposed to 7 days - Average Score Differential Report is now hidden from NZ - Course Rating Variance Report selection is restricted to clubs for district - Frozen and Withdrawn handicaps will only show live members that is relevant to the club in the region eg. resigned member from a club out of Auckland (Pahiatua) will no longer show in the list - Unfinancial Members combo box is now limited to clubs in list
- Mod: ClubCMS: rMemberSignupV2: wording amend (requested by EG)
- Mod: ClubCMS: rMemberSignupV2: wording amend (requested by EG)
- Fix: Upgraded SignalR to v2.4.2 to fix https://github.com/SignalR/SignalR/issues/4536 (Chrome intensive wakeup throttling interfering with SignalR connections)
- Mod: Live: signalr NOT YET using websockets now
- Mod: Update member rankings performance improved to a point where it will actually run for England (in testing it ran for 20s on their production data; before the mod I couldn't complete it; had to terminate at 3+ minutes).
- Mod: ClubCMS: iGolf Welcome Email: reduce empty space above the "Additional Message" section as requested by EG
- Mod: Live: signalr using websockets now
- Mod: Try increasing signalr disconnection timeout to 90s (default is 30s) to get around Chrome intensive timer throttling when tabs go to background mode.
- Mod: Log $.connection.hub.lastError on disconnect.
- Mod: Live: Remove old signalr package, nothing depends on it, we're using the Core version now.
- Fix: Live: Scorecards deleted from SCA were not deleting from POS sometimes #37754
- Mod: Try to skip negotiation for signalr connections to avoid the sticky sessions requirement.
- Mod: Org: Updated files that were still referencing - removed [DGSystem] reference
- Mod: Adweb: show clubuid in club contacts/dashboard page for DGI
- Fix: Appease Jenkins by committing my project file (removed SystemPermission.cs)
- Mod: ExtQuery: Removed SystemPermission and DGSystem; we don't need these; use LiveReportSection/OrgReportSection/AdwebReportSection instead. Add: ConfigurationProfileFeaturePermission to check configuration profile feature presence. Add: Ability to hide a column based on a Permission.
- Mod: Scheduled task locking: We no longer take massively long locks in Redis; instead we lock for 10 minutes and extend locks while the task is still running.
- Add: API: UserController: iGolf GetUserDetailsResponse - add BenefitsLink.
- Fix: ClubCMS: rMemberSignupV2.ascx: style updates: centre the payment summary table
- Fix/Mod: ClubCMS: rMemberSignupV2: member details validation
- Mod: Obsoleting DGSystem.ClubCMS.
- Fix: ClubCMS: Allow authenticated user (from the app) access to members-only page. Putting the create user session code in the Application_AcquireRequestState was causing REST API calls to fail because of "System.Web.HttpException (0x80004005): Session state is not available in this context" - so I've moved it TemplatedPage.InitialiseTemplatedPage().
- Mod: API: trim username when authenticating people via the app. #5002570
- Mod: API: trim username when authenticating people via the app. #5002570
- Mod: ReverseProxy: sites.list: added more dotgolfx.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added more dotgolfx.cw.golf.co.nz
- Fix: Live: When someone buys a greenfee which later changes, completing the sale in Kounta POS will no longer error (we soft-delete the product now)
- Mod: SalesUpdate.ashx now locks per-club, not globally, which should mean that we'd be able to process these faster. Mod: Web.config setting to increase WebClient max connections to 64 (the default is 2).  We use WebClient for old school service clients like Vend.
- Mod: ClubCMS: rMemberSignupV2: centralise checking if the user is active member of the club
- Fix: Live: KountaProductUpdate wasnt working when switching a club from Vend POS to Kounta POS
- Mod: WHSAPI: Add unit test for score delete fix
- Fix: WHSAPI: Can now delete scores if you have the right permissions (previously only the ISV who created a score could delete a score)
- Fix: Live: Comment typo
- Mod: ClubCMS: TryTrustedMemberIdLogin() - Add England.
- Fix: Live: When someone buys a greenfee which later changes, completing the sale in Kounta POS will no longer error (we soft-delete the product now)
- Mod: ClubCMS: iGolf - Create the user session for an authenticated request coming from the mobile app. Mod: ClubCMS: iGolf - Minor refactor in the code logic to allow app access to specific pages in the Application_AuthenticateRequest.
- Add: Trigger to keep Member.RegionId up to date.  Script also does a data cleanup after creating the trigger.
- Fix: ClubCMS: [DG-3500] - Added saved card view so the end user can see which card is saved and ready for reuse. - Added CSS for saved card view - Added JS to toggle visibility to hide pay with previous card when 'save new card' is ticked
- Fix/Mod: ClubCMS: rMemberSignupV2: membership number validation: handle member code as string; centralise checking of membership number validity
- Mod: ClubCMS: terraces_golfnz/Template.aspx: viewport metatag: set minimum-scale to 1.0 (on mobile, this removes the very slight horizontal scrolling)
- Mod: ClubCMS: rMemberSignupV2.ascx: mobile styling fixes and improvements
- Mod: ClubCMS: rMemberSignupV2.js: update windcave logo path
- Mod: ClubCMS: sql: rMemberSignupV2: updated default setting for IneligibilityMessageActiveMember
- Mod: ReverseProxy: add S,W,1,1,taitapugolf.nz
- Mod: ClubCMS: remove the second Tai Tapu URL (taitapugolf.nz) temporarily.  DNS changes haven't taken effect; we'll publish the other one (taitapugolf.co.nz) first.
- Mod: ClubCMS: added Tai Tapu URLs
- Mod: ClubCMS: bindings.list: added Tai Tapu URLs
- Fix: ClubCMS: rMemberSignupV2: fix horizontal rule <hr> display
- Fix: ClubCMS: rMemberSignupV2: fix horizontal rule <hr> display
- Mod: API: Digital Scorecard: Disable push notifications for immediate highlight of scoring discrepancies. We could end up spamming a group of 4 with multiple alerts.
- Fix: SQL: new index IX_TBTimeSlot_SlotDate_DeletedDate now has same fillfactor as IX_TBTimeSlot_SlotDate. (Hopefully it was set for an actual reason)
- Mod: ClubCMS: rMemberSignupV2: DOB: removed the minimum (and maximum age) setting, as requested by England Golf
- Mod: ClubCMS: rMemberSignupV2: display the Guardian Consent section below the DOB field
- Mod: ClubCMS: rMemberSignupV2: postcode: prevent special characters; only allow numbers, upper case letters, and space
- Mod: Live: GetCompetitionsForMemberAndDate more SARGable and less likely to generate bad plans.
- Fix: ClubCMS: If you send a broken JWT to golf.co.nz in the auth cookie, this crashes out the auth code and takes out the app pool.
- Mod: ClubCMS: rMemberSignupV2: Previous Membership Number field label amends (requested by England Golf)
- Mod: ClubCMS: rMemberSignupV2: dropdown (e.g. County dropdown) background colour updates. iOS display fix.
- Mod: Live: POG live_NG_GetStartSheetAndEligibility proc moved to C#, restricted-by-courseId filter now ONLY gets used if the user is restricted to a course (~25% savings)
- Mod: ClubCMS: rMemberSignupV2: unset background colour of dropdown (e.g. County). This fixes the dropdown display issue on iOS.
- Mod: ClubCMS: Update Teebooking DPS test payment username
- Fix: ClubCMS: [DG-3500] - Added the missing logic to save and update the card
- Add: Live: IX_TBTimeSlot_SlotDate_DeletedDate, which is like IX_TBTimeSlot_SlotDate but with deleteddate added to the key because it helps our joins esp. in [live_NG_GetStartSheetAndEligibility]
- Fix: Analytics: Fix #39500. Unable to generate rounds by date report due to an exception in decompressing string values (from Redis) - it's only a problem when string size is more than 1024 bytes.
- Fix: [david] Upgraded DotGolf.Public.Pennants to Autofac 4.9.2 so it's happier with DotGolf.Shared using a later version.
- Mod: ClubCMS: rMyAccount: text updates
- Mod: ClubCMS: Payment Confirmation Email: update text as requested by England Golf
- Mod: ClubCMS: iGolf Welcome Email: copy updates requested by England Golf
- Fix: Live: member rankings was running at 10am instead of 00:10am
- Fix: As duct tape as it gets; just trying to get rid of some blocking, and can't find the source of this.
- Mod: ClubCMS: iGolf Welcome Email: copy updates requested by Claire
- Fix: Kiosk: While on the score entry section of the kiosk, if you've just completed all the holes and are focused on the SAVE button, if you hit more numbers on your keyboard, an exception occurs and is sent to the central service.
- Mod: ClubCMS: zGallery SwiperJS: mobile style updates to accommodate long captions
- Fix: ClubCMS: [DG-3751] - File rename to correct spelling of 'embedded' where as before it was 'embeded' - Also addressed minor ratio bug where if you resize the frame dynamically using the dev console the ratio gets lost.
- *** DFH CODE REVIEWED TO HERE *** Fix: ClubCMS: rMemberSignupV2: fix for recent mod done (Rev 46466)
- Mod: WHSAPI: remove NewCountryUID from home org change request accepted webhook because it relied on the member.regionId column which is never updated :(
- Mod: API: When a inter-union home club change request is accepted, the old home union should add a dummy cmember record with the new home union associationId, if one does not exist. Need to test in STAGE.
- Mod: ClubCMS: rMemberSignupV2: previous membership validation improvements
- Fix: ClubCMS/API: friend search no longer crashes if someone enters double-quotes or more than one space in a row.
- REVERTED Merged revision(s) 46520 from Trunk/DotGolf.Live/Trunk/DotGolf.Live/DotGolf.ScheduledTasks: Mod: Scheduled Tasks: Run tasks in the thread pool now; the process startup time was too big a penalty for GBIProd Ringmaster. ........
- Mod: ClubCMS: remove unused ConvertToProperCase methods that were not correctly propercasing anyway.
- Mod: Scheduled Tasks: Run tasks in the thread pool now; the process startup time was too big a penalty for GBIProd Ringmaster.
- Mod: Shared: replaced ToTitleCase with our (better) ToProperCase when formatting member name in  password reset emails Mod: Shared: simplify DataTable ConvertToProperCase extension method using lambda instead of delegate
- Fix: ClubCMS: My Bookings control was title-casing peoples names instead of propercasing #40524. John O'Ehley unhappy. also #39478
- Fix: ClubCMS: Fix incorrect root URL used in the permalinks.
- Fix: ScheduledTasks: Do not launch processes for disabled tasks.
- Mod: Public/MyGolf app: Member search: Ireland only - Allow users to find fellow (home club) members by membership number or name.
- Mod: Scheduled Tasks: Be smarter with CPU cycles since we're running this on a flimsy T3 instance.
- Fix: ClubCMS: [DG-3751] - Method renames and split methods on load
- Mod: API: When a inter-union home club change request is accepted, the old home union should add a dummy cmember record with the new home union associationId, if one does not exist. Need to test in STAGE.
- Mod: ClubCMS: rMemberSignupV2: move down the Previous Membership form section
- Add: WHSAPI: CountryUID is now send with accepted home club change requests, so the old home club can figure out where the person has gone.
- Mod: Live: [DG-3758][40738] - Changed [NZG] text to [Golf NewZealand] per request - Updated CSS from 160px to 165px for form column to fit the text.
- Mod: Live: now handles multiple members being returned from the ISVAPI overseas member search
- Mod: ISVAPI: now handles multiple members being returned from the member search proxy, juust in case. (at some point this was going to bite us.)
- Fix: ClubCMS: [DG-3751] - Handle Firefox not liking the way $('iframe') selection works on ready state so using delay instead.
- Mod: Core: simplify EqualsWithin extension method for DateTime to use the DateTime? method
- Mod: Live: Update code comment in TabInterClubMessageReader
- Mod: Live: removed some uses of the old Handicap constructor (the needed 'nineHole' etc) with the new one that just takes a decimal?
- Fix: Digital Scorecard: Missing from previous commit svn 46493.
- Fix: API: Digital Scorecard: /list-eligible-players endpoint - Marked player as guest if that player does not have a Member or NonAffiliate Id.
- Mod: API: Tee Booking: Processing a payment confirmation - Send an e-mail to DotGolf support if VerifyRSASignature() fails. It's rare but we've seen this happen before.
- Fix: API: Digital Scorecard: /list-eligible-players endpoint crashes because of ORNS exception - invoking string.ToUpper() on a NULL value. Fix: API: Digital Scorecard: Allow user to select playing partners from the same tee time even if that playing partner has the privacy setting turned on.
- Fix: WHSAPI: DisplayIndex and DisplayLowIndex should not return null, they should return Pending or Withdrawn instead as appropriate
- Mod: Live: NZ should respect the rule that clubs cant adjust someone more than 5 strokes over their low index, because it's in the NZ Rules of Handicapping
- Fix: ClubCMS: [DG-3751] - Added JS file for news and events area [golfnz-news-detail/view.html] that will handle youtube or vimeo video resizing on the fly. - Uses regex to find Vimeo and youtube links to resize. -- Will need to update regex as more video sources are introduced
- Fix: WHSAPI: interunion home club change requests should not be sending 'null' as the new home club name
- Mod: ClubCMS: my-header: mobile menu: add css class name
- Mod: Org: publish soft cap/hard cap report to Org so GBI can see it
- Fix: PushMessageSNS: Merge issue caused by svn commit 46453.
- Mod: ClubCMS: rMyAccount: replace hardcoded "NZD" currency with AXCurrency.DefaultCurrency.Code
- Cleanup: Removed StartSheetMonitor.ashx; we have replaced this with SignalR based start sheet updates some time ago.
- Mod: ClubCMS: rMemberSignupConfirmationV2: get the Windcave Subs User ID from the config profile
- Add: Live/Org: Soft cap/hard cap report.
- Mod: ClubCMS: rMemberSignupV2: replace hardcoded "NZD" currency with AXCurrency.DefaultCurrency.Code
- Mod: ClubCMS: rMemberSignupV2: css class name update
- Mod: ClubCMS: rMemberSignupV2: eligiblity check updates
- Mod: Digital Scorecard: Code clean up. 1) SQL - Should specify columns that we only need and not return all. 2) Add HoleScores to Redis cache after retrieving the record from the database.
- Fix: ClubCMS: [DG-3684] Stop event registration from happening if required fields aren't populated.
- Fix: Green Fees: Fix #40702 - For VEND+POS clubs, future green fees gets deleted after creation.
- Fix: ScheduledTasks: DailyHandicapIndexUpdateTask now updates member handicaps in batches of 1000 instead of trying to take copious locks on the member table+indexes to update 10k+ rows in ENG - was causing the query to time out sometimes.
- Fix: Live: [DG-3717] Fixed access permission to QR Payment page set up in settings so its not just SystemAdmin but UserAdmin level can access this
- Mod: Core: England profile: updated England's production Windcave credentials
- Add: DigitalScorecard: [DG-3557] Immediate highlight of any scoring discrepancies. Add: Configuration Profile: Add feature "AppScoringHighlightDiscrepancies".
- Fix: BulkEmail: For some reason the email model doesn't always have an AssociationId, even for union bulk emails.  sigh.
- Fix: BulkEmail: Missing some MVC related packages from DotGolf.BulkEmail.Common.
- Mod: ClubCMS: [DG-3500] - Added back save token billing to credit card [save and rebill] - Fix CSS to have the buttons classes it was trying to use
- Fix: Added back the WHERE clause to exclude PGA-only members from being targeted in EDMs.
- Mod: Updated be_CreateRecipientsMembers to work (without requiring any changes) for NZ and GBI unions.
- Fix: BulkEmail: Some UI inconsistencies sorted; typos; toolbar overlapping rightmost SAVE AS TEMPLATE button.
- Mod: BulkEmail: Removed "Notify DG" button, show SEND button (for DotGolf only for now) Fix: Removed silly synchronous ajax call to Send method - this can only cause death and destruction. Add: Code to stop Send/OK button being hit more than once; this was only fixed in one of the two places it's potentially possible. Fix: The Sender page had the total recipients count, but this value was wrong (depended on Email records that don't exist yet) and not being refreshed as the sender was doing its thing.
- Mod: Core: IFunctions added, this replaces Functions.IsDotGolfIPAddress() in a way that both Webforms and ASP.Net Core can use it.  In the latter you have to declare a dependency on Core.Environment.IFunctions.
- Mod: BulkEmail: Upgraded a bunch of packages to allow me to use Autofac for dependency resolution in this MVC project (need this later on for IFunctions - yet to be committed).
- Mod: ClubCMS: iGolf Welcome Email: update the login page link
- Fix: ScheduledTasks: inter-union course sync now keeps same markerUID if markerID is the same, instead of generating a new one for each nzcrdata row
- Mod: Core: Profile: England and Wales: Windcave settings: assign the Dev credentials to England and Wales Production while we don't have the production credentials yet
- Fix: WHSAPI: Course sync was returning duplicate markers -_-
- Fix: ClubCMS: Tee Booking: Fix #40678 - Tee booking pages styling is broken because it was not applied with the correct tee booking master page.
- Mod: Wales Golf no-reply@walesgolf.org reply-to address added to list. Mod: Bulk Email: Removed hardcoded association, club and country IDs/codes, replaced with WellKnownIDs. Mod: Bumped to C# LangVersion 6 and enabled this in the Razor views; it's 2021 after all.
- Fix: Golf NZ public: Fix #40655 - The alt text for the Golf NZ header image displays "Golf Ireland".
- Mod: ClubCMS: Golf NZ / EG / Wales: main.css: added mobile styles for the gallery-swiperjs control. (This fixes the display of the caption / description of EG member benefits on mobile.)
- Fix: Badly performing query due to NVARCHAR parameter causing clustered index scans on CMember.
- Mod: LOVEGolfPlay: [40493] csproj needs to know about the asset
- Mod: LOVEGolfPlay: [40493] Updated home page banner asset to the one provided
- Revert commit svn 46417 - We can just update the whole text and include the sign up link via AdWeb.
- Cleanup: Removed duplicated GetNumUncapturedBookings() method from Navigation.cs; moved the real method into DotGolf.Core.Teebooking/Teebooking/TeebookingHelper.cs so everything calls the same method now.
- Fix: Golf NZ public: zLogin: Fix #40620 - When you set a custom text for the sign up link (SignUpText control property), the sign up link is not displayed.
- Fix: Live/org: oops, commented out the ConcatenateControl debug code.
- Revert: Sigh, didn't work due to bunch of reverse proxy config crap.
- Mod: Live: lower-case countrycode when passing it to ISVAPI searches (i.e. so the kibana logs show 'wal' instead of 'WAL')
- Mod: ClubCMS: CWGalleryImage.Caption: allow more text
- Mod: Org: bundle and minify Standard.Master and extquery scripts and styles for speeed
- Mod: Signalr will now use the signalr-dedicated subdomains (een, twee, drie, vier and vyf) for all domains but localhost.  I've done this to avoid having to list all our domains in the js file (which is readable by all).
- Mod: Live: [DG-3672] Unattended Green Fee payment details report - updated query to get only the non-deleted tx to show in details
- Mod: ExtQuery: Unattended green fee payments report - Set auto run to true.
- Mod: Live: [DG-3672] Unattended Green Fee payment report - default value is now the current day. - moved this report into the right section which is 'Green Fee' - renamed the details of the report with the right heading [Unattended Green Fee Payments Details] for drill through report
- Mod: Live: Replaced Concatenate.ashx with Concatenate.cs httphandler which lives in Shared, so now we can use the ConcatenateControl in other projects for bundling. MUST REGISTER IN WEB.CONFIG.
- Fix: Simple CSS fix to separate DotGolf logo from following UI elements.
- Fix: Load balancing sorted for TabBatchProcess.aspx in Org (by porting changes from Live).
- Fix: ISVAPI:country proxy updated to always ensure a dummy cmember record is inserted for searched members, even if they are already home in our union
- Mod: ISVAPI: country proxy unit tests updated to check that a dummy cmember record is inserted for searched members.
- Fix: Live/Org/API: When a marker is sent to WHS in GBI, we've been sending the startdate as the DB Timezone converted to UTC. HOWEVER is should be sent as BST to UTC. This is causing issues where scores sent via the app (with no time component) are hitting WHS, the score is converted to UTC (i.e. -1hr) and causing WHS to potentially use the wrong marker #5002104 #5002105
- Fix: In Slicer/Settings we should only list clubs and associations that are already set up in the slicer.* schema; the UI does not yet support inserting new clubs and organisations (since we need more entry fields to grab commission percentage values and such)
- Mod: Live/Org: Golf Ireland would like their 'Manual Adjustments after Jan 1st' column back in the InterclubTeamMembers report. Ok...
- Fix: Org: Approve card requests button could be hit multiple times generating new pin numbers for each member. Fix: Org: when fetching next batch number for a member, order by batch number desc.
- Mod: API: Digital Scorecard: Part 2 - Ability to calculate the correct playing partners allocated strokes. Mod: SQL: Modified script 3624 ScoreEntryStage add MarkerId.sql - I have not run this in the production environment so I will just update this script.
- Mod: ClubCMS: rMyAccount: use the Subs Windcave configuration from the country profile
- Fix: LOVEGolfPlay: [DG-3696] Just a simple logic to strip [,] and [.] in the Merchant name and Product name to stop it from being appended to file name. This will prevent chrome from treating [,] in file name during request as duplicate headers throwing 'ERR_RESPONSE_HEADERS_ MULTIPLE_CONTENT_DISPOSITION'
- Mod: ClubCMS: rMemberSignupV2: use the Windcave configuration from the country profile
- Mod: Core: Environment: added Windcave configuration
- Fix: Adweb: member gender change works again
- Mod: API: Digital Scorecard: Ability to calculate the correct playing partners allocated strokes.
- Mod: Live/org: interclub team member report text change from GI #5002483
- Fix: LOVEGolfPlay: If you bash the DOWNLOAD VOUCHER button too often (i.e. 2 or 3 times) eventually you'll get an error screen in Chrome and the files will stop downloading.  Stopped this by hiding the download buttons for 5 seconds while we're waiting for your file to arrive.
- Fix: LOVEGolfPlay: If you buy a voucher AND the pdf generation falls over for whatever reason, your cart UID sticks.  If you then proceed to buy another item, the cart still contains your previous order details, which means that the receipt that is emailed to you contains duplicated items.  This fixes #39689, #40238 and others.
- Fix: LOVEGolfPlay: GST calculation fixed (noticed it was incorrect while I was debugging something unrelated)
- Cleanup: Removed a few unused things from Org/Shared.cs.
- Fix: Public2012: May as well keep the build working.
- Mod: HandicapProviderWHS.GetMemberHandicaps performance improved (okay, well, maybe not performance, but certainly TCP port usage) because we no longer require a database connection PER MEMBER thread.
- Fix: Live: do not limit downwards handicap adjustments, as per rules of handicapping+Kevin #5002341 Fix: Live: women with an HI between 1.0 and 2.0 could have their handicap adjusted upwards by clubs, which they should not be able to do. Mod: Live: tiny perf improvements to adjustments page by not calling DB so much
- Mod: Live: InterclubTeamMembers report no longer includes redundant columns (after recent fix to prevent ESRs affecting past HIs)
- Fix: Live: do not limit downwards handicap adjustments, as per rules of handicapping+Kevin #5002341 Fix: Live: women with an HI between 1.0 and 2.0 could have their handicap adjusted upwards by clubs, which they should not be able to do. Mod: Live: tiny perf improvements to adjustments page by not calling DB so much
- Fix: WHSAPI: ESRs were applying to handicaps being retrieved from the past! #5002452
- Mod: ClubCMS: iGolf Welcome Email template: footer image update (updated colour from green to red)
- Mod: ClubCMS: Payment Confirmation email template: text colour update
- Mod: ClubCMS: iGolf Welcome Email template: text colour update
- Mod: ClubCMS: zPasswordReset: added FooterText control property so we can customise the links to be displayed under the password reset form
- Mod: ClubCMS: Password Reset: field labels: removed the text "MyGolf"
- Fix: ClubCMS: rMemberSignupV2: fix the Terms and Conditions link
- Mod: WHSAPI: simplify full/brief namespace references in PlayingConditionsController
- Fix: Live: 18H players do not have the option to choose 9H from the Kiosk - Taumaranui #40495 (they only have one 18h marker per gender)
- Cleanup: Removed /Shared/Tournaments/RegistrationDetails.aspx; it's been superseded by /Shared/Tournaments/Registrations
- Cleanup: csproj file reference removed (we deleted this file a long time ago)
- Mod: ISVAPI: remove duplicate members from member changes responses and reduce page size to improve perf
- Mod: ClubCMS: rMemberSignupV2: form validation js: added query string parameter
- Fix: Small CSS tweak to make .active show up when you click on a menu item.
- Mod: ClubCMS: rMemberSignupV2: Reason for leaving: if "Others" is selected, require the user to enter a custom text / reason
- Fix: Nav error if there is no existing session.
- Fix: Ambiguous somethingorother.
- Mod: All ClubCMS sites (except for golf.co.nz) are now load-balanced.
- Cleanup: Removed two useless warnings.
- Cleanup: Got rid of DotGolf.Live.Version.SVN_REVISION in favour of BuildInfo.Revision.
- Cleanup: Removed comments.
- Fix: Load balancer compatibility for TabRenewals and creating recurring bookings (job).
- Fix: POG: Local cache dependency replaced with Session.
- Mod: Clubhouse navigation is now stored in session instead of app pool cache (load balancing)
- Mod: TabBatchProcess.aspx now load balancer compatible; no longer stores batch progress in Cache.
- Mod: Live: [DG-3689] Remove redirection of clubs to a non next gen settings page as its legacy.
- Mod: ClubCMS: rMemberSignupV2.ascx: Reason for Leaving: restrict to one answer only; text update
- Fix: ClubCMS: [DG-3644][40185] Added additional algorithm/filter to help with image sharpening issue from scaling down
- Fix: ISVAPI: EG crm guys were getting ChangeDates in the past because of how the sql was filtering Member and Cmember records.
- Add: sql: IX_Member_Changedate for association member syncing in ISVAPI
- Fix: Unobtrusive validation setting added to dev web.config to allow debugging golf.co.nz.
- Mod: Updated ClubCMS my bookings cache to be load balancer compatible.
- Mod: ClubCMS: rMemberSignupV2: form validation js: added query string parameter
- Fix: ClubCMS: rMemberSignupV2: remove "has-error" css class when the DOB is complete; when a one reason is ticked; when a Gender option is selected.
- Fix: Live: Unsatisfied score intents report no longer able to show intents from members who are resigned at the target club. #5002186
- Mod: Adweb: memberuid added to member details page. increased width of the member details grid so memberUID is in a single line
- Fix: UNetworkCamera is now load-balancing compatible (using redis backing for the cached webcam image)
- Fix: ClubCMS: Needless throwing of this exception on virtually every page load.
- Mod: WHSAPI: removed old score intent logic allowing fetching of all scoreintents for a top level org
- Fix: Another copy/paste bug.  Also removed variable to NSwag that we no longer use/need.
- Fix: Oops, copy paste bug in DotGolf.Core.csproj.
- Fix: Load balancing: DataCache to Redis data cache. Fix: Removed random appsetting that is specific to casual golf; these methods are never called from the CasualGolf projects, and this appsetting is only present in the casual golf solutions...
- Fix: Backstop to ignore BuildInfo.Debug.cs which will by lying around in workspaces everywhere.
- Fix: Backstop to ignore BuildInfo.Debug.cs which will by lying around in workspaces everywhere.
- Mod: Add delay into promote status check so we don't smash the build server CPU while promoting.
- Mod: Redis: Changed a bunch of IDatabase uses to IDatabaseAsync so it's a little harder to accidentally use the synchronous Redis methods (these methods have a penchant to deadlock at the worst of times for reasons unbeknownst to us)
- Add: UnionAPI client into Core. Fix: MSBuild warnings removed (duplicate Compile directives)
- Fix: Vague attempt at removing some potential ORNS exceptions in Standard Page_Load.
- Fix: ClubCMS: [DG-3644][40185] Forced image quality to be 1 to 1 and the load back canvas to be of high quality though the canvas load back is still an experimental feature for browsers as per this doc for reference (https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/imageSmoothingQuality)
- Mod: ISVAPI: added new IE and WAL roles for their new ISV license that includes the handicap record.
- Mod: Adweb: can give WAL+IE ISVs the new licenses via adweb now
- Mod: ISVAPI: added new IE and WAL roles for their new ISV license that includes the handicap record.
- Fix: UnionAPI: Dehardcoded root/api.connect scope.
- Mod: UnionAPI: Cache third party names to avoid latency around another database lookup.  Could really do the same for scopes too.
- Mod: UnionAPI: Track `third_party_name` claim which adds a human-readable client name into the unionapilog, so we don't have to know which client_id is which.
- Mod: Live: reworded a code comment
- Fix: Live: could not save markerdefaults page even when it was valid.
- Add: Live: [DG-3672] Unattended Green Fee payment report with drill through to see specific item(s) linked to the payment
- Mod: ClubCMS: Member Signup: add new property IneligibilityMessageActiveMember (this is the message displayed when an active member tries to sign up)
- Mod: SSO: Bundle and minify js and css to speed up page load times.
- Mod: Hack to try and force DotGolf.Core to compile BuildInfo properly.
- Fix: Digital Scorecard: Missing table alias. Might cause "Ambiguous name column" issues in the future.
- Mod: Renamed BuildInfo.Debug.cs to BuildInfo.g.cs to try and fix Jenkins, in the off chance that .Debug.cs files are not built by MSBUILD in release mode (.g.cs is a better name anyway)
- Mod: Adweb: Allow ability to change ISV role
- Fix: ElasticSearchLogger now uses SolutionName to compute the index name it'll log to instead of hardcoded ISVAPI.
- Fix: Digital Scorecard: Fix "System.Exception: Hole 19 not found on this marker (Men White 18H Par 72)" when calling Marker.GetHolesInPlayOrder() method. Occurs for cards created at North Shore GC.
- Fix: UnionAPI: Return 404 for an invalid golferID. Mod: Trim first and lastnames. Add: README to document SQL to authorise a new credential.
- Mod: UnionAPI: Gave up on version numbers with dots in them; WebAPI not happy, and even when I can make it happy NSwag doesn't like it much.  Simple integer version numbers will have to work.
- Mod: ClubCMS: Member Signup and My Account: replace the hardcoded "no-reply@golf.co.nz" with the country's default email address (e.g. no-reply@englandgolf.org, no-reply@golfireland.ie)
- Mod: Enabled incremental builds for DotGolf.Shared and the Xero swagger def, speeding up the build on dev machines.
- Mod: Enabled incremental builds for DotGolf.Core and the swagger files; WHSAPI and ISVAPI clients will now only be built when needed (i.e. their swagger json timestamps are more recent than the generated clients) - hopefully saving us dev build time.
- Mod: Live: Moved ConcatenateControl to Shared so other projects can use it.
- Fix: Digital Scorecard: If you've printed a scorecard and prefer to enter your round via the app, that card is not displayed in the recent submitted scorecards section in the app.
- Mod: Live: [DG-3645] Change gradient to use hex and not rgba and enlarged fonts for text
- Mod: Live: [DG-3645] Added force background for printing in the css and made gradient top to bottom and not right to left
- Mod: Love Golf Play: insert Facebook Pixel code as requested by Grace R, Ticket 40405
- Mod: CasualGolf API: [DG-3643] Updated Golf NZ logo for new branding and text from NZ Golf Inc to Golf NZ
- Mod: Live: [DG-3645] Updated QRCOde Payment page to match new styles and updated DotGolf new Branding
- Fix: Xero Auth: If the refresh token is still in our system, but not valid, we end up with a club unable to reconnect to Xero.
- *** DFH CODE REVIEWED TO HERE *** Mod: Some cleanups for the Redis backed DataCache.Query<T> commit yesterday.
- Fix: Live: syncing away scores doesnt need to pass a new changedate into every call, because the cursor handles that. If error occurs, return that last change date that we successfully processed so the changedate gets incremented for next time
- Mod: Adweb: EditMember page shows top 100 scores and includes international away scores with no clubID
- Fix: WHSAPI: optimise dates for 2100 in away score sync was causing it to be very slow for past dates. really not needed because option recompile makes it good enough
- Mod: WHSAPI: remove distinct from away scores query because it just incurs perf cost for no benefit. Commit away score MarkerHistory bugfix where createdate was not being set on markerhistory
- Fix: WHSAPI: paging though away scores was really slow using offset-fetch, we now page by changedate because it's less bad.
- Fix: Live: WHS score sync correctly handles updating deleted scores
- Mod: ClubCMS: rMyAccount: display only the first two digits (not the first six digits) of the billing card
- Shared: SQL: Fixed typo in the script filename - it should be "DIGITAL_SCORECARD" and not "DITIGAL_SCORECARD".
- Shared: SQL: Delete script. There's a typo in the filename. Will be committing the correct file after this commit.
- Mod: Live: POG.aspx.cs pedantic whitespace format change
- Add: Implemented a drop-in replacement for DataCache.Query<T>, but uses Redis under the covers.
- Add: New index for make glory SQL server performance.
- Fix: API: AuthController: API is not returning an InvalidUsernameOrPasswordException when a user enters an invalid username/password because of ORNS exception. Add check for null passport.
- Fix: Live: member search was showing deleted members
- Mod: Live: GI wanted adjustments affecting Jan 1st handicap to be added to the InterclubTeamMembers report. This will make them happy but it's actually a bug that the 1st Jan HCAP includes ESRs after Jan 1st...
- Fix: ClubCMS: Member Signup: Eligibility check: treat member code as string data type not int
- Fix: Image resizer was not working in England Production because (I think) the S3 endpoint wasn't set properly.  This was the problem for me in debug mode anyway.
- Cleanup: Got rid of Galleries from Live/ClubCMS maintenance area.  This area does not work because a) you can't create new galleries in NZ, b) you can't upload new images for existing galleries because they go in the webroot, not in S3, and finally c) the gallery maintenance in the ClubCMS solution is /much/ nicer, so using this would suck even if it worked.
- Cleanup: ClubCMS: Removed more defunct stuff including content editing in Page.aspx and RSS feed in Default.aspx.
- Cleanup: Removed some more Aussie cruft from the Live ClubCMS maintenance area.  This stuff was only accessible if CountryCode == AU, so no harm done removing it for NZ.  It means I don't have to go load-balance upgrade code that does not even run.
- Cleanup: Removed some Aussie cruft from the Live ClubCMS maintenance area.
- Fix: Live: Calendar and CalendarHelper use async redis methods instead of sync to fetch events, because the calendar can get pretty large >1MB
- Mod: ClubCMS: [DG-3637] - Logic to check if a user is not logged in then redirect to login page - If its for union [Golf NZ] then redirect to their specific login page url
- Fix: Live: previous Redis rev was broken on app startup - we now register a new'ed up RedisConnectionBuilder with Autofac for Framework project, because servicelocator is not available on app start, and we need to setup signalr on app startup
- Fix: Live: Redis static class uses ServiceLocator.Default because the two files keep getting out of sync
- Mod: ClubCMS: rMemberSignupV2: Address Line 2 should not be mandatory
- Mod: DG-3309 When entering scores for past dates, we will no longer calculate the PCC for that course when the scheduled task runs (every half hour).  We will now wait until midnight (course local time) before producing any PCC value, if scores were entered on the day.
- Mod: ClubCMS: rMemberSignupV2: add rev parameter to js path
- Fix: Live: For GB&I, hide setting "Allow home club members to create digital scorecard from device". This setting is not applicable to them because everyone (e.g. home club members, affiliated visitors) is allowed to create a digital scorecard if they are near the course.
- Fix: Live: Marker Active saving crashbug -_-
- Fix: Live: Marker Active saving crashbug -_-
- Fix: ClubCMS: Global.asax - Use PublicGolfCoNZ from configuration profile as the root URL.
- Mod: ClubCMS: rMemberSignupConfirmationV2: golf clubs: allow user to update the payment schedule / method after cancelling payment (or getting declined)
- Mod: ClubCMS: template update / clean up (as done on the golf nz template)
- Mod: ClubCMS: Member Signup: date picker: prevent resetting of Day value (after selecting the first value from the Year dropdown); also adjusted the min and max age
- Mod: ClubCMS: email communication opt in css updates
- Fix: script 3616 markeractive insert data migration was failing because of unique constraint violation on markeractive
- Mod: ClubCMS: email communication opt in css updates
- Mod: sql remove GOs from script 3616 markeractive
- Mod: Live: remove dropped markerdefault columns from EDMX
- Mod: Live: remove some references to the dropped markerdefault columns
- Fix: sql: 3616 was incorrectly marking valid default markers as deleted if they'd been flagged as locked. Mod: sql: drop locked and inactive columns on MarkerDefault because they're defunct
- Add: Live: new Active Marker UI in Live to better control active/inactive markers. REQUIRES SQL 3616
- Add: Live: new MarkerActive table to allow for new UI in Live to better control active/inactive markers.
- Mod: ClubCMS: Forgot Password email: just updated the font to Verdana for EN / WA
- Fix: Live: admin bar (the one that lets you change clubs) needs a min width, else it collapses weirdly when nothing is selected
- Mod: ClubCMS: Gallery Swiper JS control: rename Save button text
- Mod: ClubCMS: Gallery Swiper JS control: added CssClassName control property
- Mod: Reverse Proxy: apply TLS to hastingsgolfclub.co.nz
- Fix: Live: admin bar (the one that lets you change clubs) no longer goes multiline if the club name is too long. (it would previously cover up useful info or buttons)
- UnionAPI: Reverse proxy sites for UnionAPI in GBIStage.
- UnionAPI: Moved UnionAPI unit test stuff into UnionAPI test project instead of DotGolf.Core.Tests.  Whoops.
- Fix: 'alter full text index' sql script caused unit test DB creates to fail
- UnionAPI: Got rid of old Members.cs unit tests.
- UnionAPI: Added SPEC_BUILD to Release build to appease Jenkins.
- Mod: UnionAPI brought up to spec v0.5.4. Golfer: - Index renamed to Handicap Index. - Gender is optional
- Mod: NZ ReverseProxy: added:
- Mod: ClubCMS: bindings.list: added:
- Mod: ClubCMS: zForgotPassword: SignUpText: allow admins to configure a totally customised signup text or footer message
- ModMod: ClubCMS: zLogin: SignUpText: assign default value: "New to [MyGolf]? Sign up here"
- Mod: ClubCMS: zLogin: SignUpText: assign default value: "New to [Governing Body]? Sign up here" instead of manually entering "New to England Golf?"
- Fix: API: Digital Scorecard: Fix #40147 - In the Android app (DG/MyGolf), the main player is not displayed in the hole-by-hole screen. [Test case] 1. Load 4 players into the round, enter at least 1 score then go back to the Round Setup screen. 2. In the round setup screen, tap "Save and Restart Round".
- Fix: API: Message timestamps are being converted from NZST then to UTC.
- Mod: ClubCMS: My Account: style updates and fixes (icon display)
- Fix: Digital Scorecard: LoadPlayerScorecard errors out if a marker that the score was played at the time is no longer active.
- Fix: API: Digital Scorecard: List submitted scorecards errors out because the marker that was played at that time is no longer valid.
- Fix: ClubCMS: #40143 Unable to access tee booking help pages due to incorrect path to the master page. Use absolute path to the master page.
- Mod: ClubCMS: Member Signup: iGolf Payment Confirmation Email: add header image (configured using the PaymentConfirmationEmailHeaderImage Setting)
- Mod: ClubCMS: Member Signup: iGolf Payment Confirmation Email: add header image (configured using the PaymentConfirmationEmailHeaderImage Setting)
- Fix: Live: Functions: Unable to preview invoice for a new functions customer.
- Fix: Live: Functions: #40174 Unbilled customers page - The selected Xero contact is never set as the customer when you send an invoice to Xero.
- Fix: ClubCMS+API: Can now search for members (Over, Nick) and (Over, Richard) and (OVER, SUE) again. Turns out it's because their names are default sql stopwords. #5001687 --select * from sys.fulltext_system_stopwords where language_id=1033 This increased the full text index size by 10MB. If performance becomes a problem we can introduce our own stoplist, removing words that we find to be member names e.g. 'Over' and 'More'
- Fix: API + ClubCMS: Can search by member first name again. This was broken when we tried to fix searching for members with sql 'stopwords' in their names.
- Fix: ISVAPI no longer keeps a database connection open while firing hooks (these hooks wait while calling Live, which may then call WHSAPI, which makes for a great TCP port starvation party)
- Fix: API: DigitalScorecard: Set the default start tee if we see null in the Scorecard.StartTeeID column. This was a bug in old Android version of the MyGolf app. We have since fixed this in the latest version of the app.
- Fix: FireScoreIntentInsertedDeletedHook will no longer keep a database connection open while firing hooks (these hooks may wait on IO such as calls to WHSAPI, which makes for a great TCP port starvation party)
- Mod: ClubCMS: Member Signup Welcome Email: just renamed a variable to make it specific
- Fix: Org: when updating a club with a latitude or longitude, values were not updating if the values has too many decimal places
- Mod: ClubCMS: rMemberSignupConfirmationV2: club email notification: text and font style updates
- Mod: ClubCMS: Member Signup: add branding (header and footer) to the iGolf Welcome Email. Also replaced $COMPUTERNO$ with $MEMBERCODE$ for consistency in terms.
- Mod: ClubCMS: #iGolf: App permalinks for member and iGolf benefits page. Mod: ClubCMS: #iGolf: Allow an mobile app auth token access to member and IG benefits pages.
- Fix: WHSAPI: course sync wasn't syncing hole-by-hole info. No wonder it was so performant... Also reduced page size from 10 to 5 so Kibana can cope with the response size
- Fix: FireScoreInsertedUpdatedDeletedHook will no longer keep a database connection open while firing hooks (these hooks may wait on IO such as calls to WHSAPI, which makes for a great TCP port starvation party)
- Add: API: #iGolf: Add claim "mygolf_profile". Mod: API: Minor refactor. Use "ApiErrorMessageException" from shared project.
- Mod: API: #iGolf: Return Member/IG benefits page URL based on the user's profile.
- Add: API: #iGolf: Get player profile endpoint - Add member benefits link.
- Fix: WHSAPI: we now respect rule 3.1a -> max hole score for someone with a Pending handicap is Par + 5. It sucks, but it's the rules :(
- Mod: Live/Org: score listing page handicap calculation can now be viewed by Mac users with command+shift+click.
- Add: API: QR code payments and UFP: Add DigitalScorecardActivationCode.
- Mod: ISVAPI: enable CORS for MS Flow in UK prod
- Mod: ClubCMS: Flexiclub welcome email template: replace "Love Golf website" with "golf.co.nz"
- Mod: API: Not Major logging changes: 1. Auth exceptions like JWTTokenExpired no longer logged to ExceptionLog. 2. Requests are now logged even if they fail auth. (unless the auth token is not even close to JWT). 3. API responses now include exceptionId, and exceptionIds also logged to Vortex 4. JWT token expiry exceptions are now caught and re-thrown as a "AUTH8311 JWT is expired."
- Mod: ClubCMS: Member Signup style updates
- Mod: ClubCMS: my-header tab menu: added the page name as the nav item css class name so that we can easily apply styles. The css class name is prefixed by ni- e.g. ni-my-account
- Fix: Live: old score intent endpoint was accidentally being called, fetching all scoreintents for entire union which creates a response so large that kibana cant handle it without painful lag
- Mod: ClubCMS: iGolf: differentiate golf club members from igolf-only members
- Mod: WHSAPI: PCC index on score table updated to include OverridePCC. Only goes from 2021 onwards (still took 1 min to create)
- Mod: Updated CKEditor to include the placeholder plugin, which we'll use in System Email Notifications shortly.
- Mod: ClubCMS: Golf Ireland Competitions/Golfbox: custom css style updates
- Fix: ClubCMS: Futures: allow Futures members without a handicap to register into an event
- Fix: API: Clubs playing at courses belong to other clubs could not find markers to play using the app by searching for their own club. (but workaround is to enter the name of the club who owns the course in the search) #5002149
- Fix: WHSAPI: HDPrePCC was not being returned to the client when querying for away scores across unions. It's on the score table now, so we can do it.
- Add: Global.asax: Add permalink to the QR code and green fee payments page.
- Fix: QR Code payments: Use AsyncHelper.RunSynchronously.
- Fix: Live: people with initial handicaps set were showing as having frozen handicaps in score listing. #5002093
- Mod: QR Code payments - Use code from Shared project for generating activation code. Add: QR Code payments - Include activation code in the e-mail sent to the person who made the QR code payment.
- Add: API: #iGolf: Added AppUITheme - the app checks for this field in the response to apply the appropriate theme in the app (after sign in).
- Mod: ClubCMS: iGolf style updates
- Mod: General Play Scores and Total Scores Entered reports updated to use the new EnteredVia and Attester columns on the Score table.  This was done to a) correct the report output (it wasn't quite right before) and b) for performance.
- Mod: Add data population script for the new EnteredVia, AttesterInfo and AttesterPassportId columns.
- Add: New Score columns to track EnteredVia and Attester information.
- Mod: Save Attester Name/number, passport Id and EnteredVia field onto the Score table for digital scorecards only (we'll do the other apps later)
- Fix: API: QR Code payments - API returns invalid activation code even though it has not been used yet to create a digital scorecard.
- Mod: ClubCMS: rMemberSignupV2: wording updates
- Mod: API: testing potential connection leak in API digital scorecard.
- Fix: ClubCMS: rEventRegistration: allow affiliated visitors to register into the comp (if, of course, the comp allows affiliated visitors)
- Mod: ClubCMS: rMemberSignupConfirmationV2.ascx: removed unnecessary heading text
- Mod: ClubCMS: iGolf styles
- Mod: ClubCMS: iGolf styles
- Mod: ClubCMS: rMemberSignupConfirmationV2: style fixes: add margin; fix the styling on mobile
- Fix: Live: custom membership number ranges were not working in IE #5002080
- Fix: Live: [DG-3602] Delete Score Intent Club select from union wasn't using the filters correctly so have fixed the logic now in the SQL script
- Add: Org: [DG-3598] Added Average Score Differential For General Play and Competition Report - Under Handicapping as 'Average Score Differentials' [Union only]
- Fix: ISVAPI: build, after rev 46032
- Fix: Live: IE - allow card requests from deleted members to be transferred if those members' numbers are pickup up again
- Fix: Live: IE: Picking up an existing female member at a club using an old number starting with the old ladies province prefixes (5-9) did not work. #5002098 Mod: Shared: When creating a ClubMember by membercode, do not return deleted records - this was messing with signing up a person with a previously deleted membership in IE
- Fix: Live: competitions with no duplicate round numbers broken "Please check that your rounds are numbered in the same order as their dates." ........
- Fix: Live: single round comp broken - Competitions
- Fix: Live: covid19 css broken after concantenating Standard.Master css
- Fix: Live: member quicksearch in GI was able to find deleted members when short-circuiting the member search code. (searching by number)
- Fix: Tee booking: Golf NZ: Release all tee booking timeslot locks when user logs out of the site.
- Fix: Jenkins build.
- Mod: Org: Removed extra parameter that is not required in HandicapReviewReport.json
- Fix: Live: deleted home cmembers were showing up in member quick search
- Add: Digital Scorecard: Add UnattendedFeePaymentId in the Scorecard table so we can link scorecards created via activation code. Mod: Digital Scorecard: Creating a scorecard using an activation code - check if the user has reached the max number of activations for an activation code. Mod: Digital Scorecard: Do not allow user to delete a scorecard if a club has the card printing ("CP") product. Add: Digital Scorecard: New message type "Digital Scorecard".
- Mod: Live: [DG-3596] - PDFRenderer is not using region-based time zone info for PDF generated report details at footer
- Fix: Live: Member search was not showing secondary members when filtering by 'secondary' category IF the persons home club was overseas #5001454
- Mod: Org: Ireland wants to add child courses to a club which belong to other clubs (i.e. like the 'Artisans' in ENG)
- Mod: Live: [DG-3602] Expose DeleteScoreIntentCount to unions - Added club select list as is own sql file 'DeleteScoreIntentCount.ClubSelect.sql' - Limit club select to their respective logged in club while union will the full list
- *** DFH CODE REVIEWED TO HERE *** Mod: Live: [DG-3604] Expose HandicapReviewReport to clubs - Moved club select list to its own sql file so is not using QueryRef and not QueryText - Limit club select to their respective logged in club while union will still get their full list
- Mod: Org: Renamed "TotalScoresEntered" report json and sql file to 'TotalScoresEntered.json and TotalScoresEntered.sql' respectively so it is now inline and the file name makes more sense as to what report it belongs to.
- Mod: ClubCMS: rMemberSignupV2: iGolf: add Guardian Consent fields for under 14; hide email communication section if under 14
- Mod: Live: 'Handicap Change Report' - Removed 'May take several minutes' text from the 'All Players' drop down box. Fix: Live: 'Handicap Change Report' - The UI highlight via default value is now working as the keyword for this is not 'DefaultValue' but 'Value'
- Mod: Scheduled Tasks: We now start cron jobs in separate processes, all at once, so we don't have long running tasks delaying the start time of others.
- Fix: Org: member name search was being cut at 10 characters
- Fix: #39870 If a person has an old non-affiliate record linked to their passport (with a dodgy surname on it), said dodgy surname is pulled into RSEntry instead of their current live Member record. We will now use a live member, live non-affiliate, resigned member or resigned nonaffiliate (in this order) name.
- Mod: Live: remove MemberChangedSinceSyncWarningBar.ascx
- Mod: Live: Standardpage: reduce number of individual script+css requests we make on pageload. Removed UseSimpleTemplate flag.
- Fix: Live: crashbug in score listing
- Mod: ClubCMS: rMembershipForm: just added "Enquiry" to the email / message subject as requested by a club (Mat E)
- Fix: ClubCMS: Tee booking: Fix #39947 Search by club day - Tee times from non-TBP clubs should only be available to their home club members.
- Fix: Org: [DG-3595] 'TabMember.aspx' - Removed the out of place "Handicap Type:". - Refactored if else statement for IsProfessional row
- Reverse merged revision(s) 45971-45970 from Trunk: (cmember does need to join on category because cm.categorycode is obsolete) Fix: Live: member search crashbug in rev 45970 ........ Mod: Core: live_FindMembers_LiveOnly_Surname_Number simplifications: cmember doesnt need to join on category to get CategoryCode because it already lives on the Cmember table, ........
- Mod: ClubCMS: Flexiclub Welcome Email: image updates (new Golf NZ branding) requested by Grace, Golf NZ
- Add: ClubCMS: [DG-3586] Added comment to the JS file. - the 'pageLoad()' method is called every update of update panel for the leader board so we're just rebinding the script as previously it was only binding on one game type during load.
- *** DFH CODE REVIEWED TO HERE *** Fix: Clubcms: social nonaffiliates could not log into club websites (they were not being authenticated because the code was checking if they had an associationId, and socials don't) #36561
- Fix: DigitalScorecard: Forgot to commit this mod together with rev 45949.
- Fix: API: DigitalScorecard: ScoreEntryRec.IsGuest is not set. We have the value from the DB but it's not loaded into the POCO.
- Fix: Live: deleting a MarkerDefault was broken after rev 45979 (typescript conversion)
- Mod: Live: MarkerDefaults: removed StaticDate property from marker defaults c#, it's never used.
- Mod: Live: MarkerDefault page typescript conversion complete.
- Mod: Core: added docstring to NamedLocker to describe its use
- Mod: Org: [DG-3595] Added a row to show if a queried member is a professional or not for 'TabMember.aspx'
- Mod: TBTransactionProcessor: SubscriptionRenewal: failed payment email: updates to the instructions / website URL
- Mod: TBTransactionProcessor: Subs Renewal (Flexiclub and iGolf): create a transaction summary report (as we do with instalments and tournament payments)
- Mod: Live: comment typo in Competition_NG.aspx.cs
- Mod: Live: Refactored new competition setup round validation to make the error messages more explicit, renamed some variables to reuse a bit more code.
- Fix: Live: member search crashbug in rev 45970
- Mod: Core: live_FindMembers_LiveOnly_Surname_Number simplifications: cmember doesnt need to join on category to get CategoryCode because it already lives on the Cmember table, purged all references to TScoreAdjustment, removed ` or @UserClubId=@HomeClubId from `(@homeclubid is null or @UserClubId=@HomeClubId)` because that condition is wrong: that bit of the query returns Casual Golfers, who don't have a home club.
- Feature: Live: [DG-3230] Added logic to validate that rounds entered during competition setup are in order by date and round numbers
- Mod: ClubCMS: Casual Golfer Welcome Email: rephrased text: "New Zealand Golf" to "Golf New Zealand"
- Mod: ClubCMS: rMemberSignupConfirmationV2: just added a css class name so we can easily hide the section below the pay again button for iGolf
- Mod: Core: moved live_FindMembers_LiveOnly_Surname_Number to C# - it uses stupid amounts of CPU so now we can start fixing it
- Fix: Live: fixed the ordering bug in basic member search that would not show results in the correct order #5001163 #5001130 #5001496
- Mod: ClubCMS: rMyAccount: removing the EnableCancelMembership control property, and using the Setting table instead
- Fix: Live: restored 18h/9h handicap label, this time without all the old 9 and 9J handicap stuff
- Fix: Live: properly removed 9h and junior handicap flags from Member tab (these are no longer used in WHS and dont link to anything else useful)
- Fix: Live: Ireland - don't allow duplicate card requests via Live because it messes with their printing #5002027
- Fix: ClubCMS: [DG-3586] when viewing the leader board you're able to click into the round scores - the JS binding that did this was broken when a different game type is selected. - The binding is now being called when the page loads and reloads
- Fix: Live/Org: Reports: EXTQuery CSVRenderer was rendering plus handicaps as positive decimals instead of negatives #5002063
- Reverse Merged revision(s) 45944 from Trunk: Mod: golf.co.nz: can search for friends by member number in places you could normally only search by name (e.g. golf.co.nz, GI app searching own club) ........
- Fix: ClubCMS: QR Code payments - Use Lang.Current.GoverningBodyShortName instead of hardcoding the union app name (e.g. Golf NZ).
- Fix: API: Digital Scorecard: Save round setup - set the default start tee if we don't have StartTeeId set in the request.
- ** DFH CODE REVIEWED TO HERE ** Cleanup: Bulkemail: removed 'load balancing issues' i.e. removed datacache expiry calls of a data key that never gets set anymore
- Fix: Live: Advanced member search was including deleted people
- Fix: ClubCMS: [$(…).tablesorter is not a function] on UpdatePanel refresh. This is caused by actual jQuery script not loading
- Mod: golf.co.nz: can search for friends by member number in places you could normally only search by name (e.g. golf.co.nz, GI app searching own club)
- Fix: Org: handicap review data source returns empty dataset if there are no handicaps to review (instead of crashing.)
- Fix: AAAAAAAAARRRRRGGGGGHHHH MARCUS WAS RIGHT ABOUT THE STUPID TUPLES
- Add: Admin.asmx in ClubCMS now logs exceptions whenever any of the web methods fail.  We do not currently give the user any feedback, so now we have to log these to try and find out the reason they are failing.  #39626
- Fix: API/ClubCMS: should not be able to search entire club members by running an empty-string search in GI app. This was a regression from the fulltextindex search we had before
- Add: Index to speed up VendSale queries by created_at (such as the POS data flow report)
- Fix: Performance: In the old Bulk Email List page we precalculated the number of opened, sent, bounced and failed emails to much DB pain.
- Mod: Drop deprecated ps_updrank proc (actually replaces it with a stub so that the scheduled task doesn't break - I'll drop the task manually in each environment)
- Cleanup: Dropped unused columns rk_cluba, rk_regiona and rk_alla (these columns used to store an equals sign when the records are tied for a rank position - but most members are tied anyway, so pointless).
- Fix: ps_updrank increased width when converting ClubId to a string.
- Mod: Cure divide-by-zero errors in the ps_updrank procedures.  If a bucket has zero members in it, we can't produce a rank, so we leave it as null now.
- Mod: Live: MarkerDefaults is typescript now
- Mod: BusinessLogicBase refactor to reduce boilerplate code in descendants.
- Fix: Core: prebuild script to generate BuildInfo.SolutionName failed if the project path had spaces in it. Removed extra backslash after $(ProjectDir)
- Fix: Failed to run this script in NZDev1 because the proc already existed.
- Test: New svn hook
- Test: New svn hook
- Test: New svn hook
- Test: New svn hook
- Test: New svn hook
- Mod: In dev the SiteOrServiceName property is now auto generated using a combination of the solution name (injected via a prebuild script on DotGolf.Core) and the Location (obtained from the static configuration profile).
- Fix: SignalR will now attempt to reconnect if it gets disconnected from the server.
- Fix: Org: Course selector was not removing the time component from the playDate we were filtering on, which would have been broken for markers ending today.
- Mod: Member.cs: removed some default!; values because they really weren't called for.
- Mod: Core: ezpoco.g.cs nullable reference types
- Fix: Org: Course selector now shows courses active at the score play date, instead of only courses active now. Allows score entry for non-terminated courses with past markers to have scores entered for them. Golf ireland wanted to do this with some GUI tournament scores that did not get imported.
- Fix: Cleaned up Scorecard Admin - lots of elements had the same ids which triggered Chrome console noise.  They weren't even used because this uses KO bindings to handle clicks...
- Fix: getComputerNameAndUID will no longer fire off a heap of calls to localhost trying to get the machine name for each scorecard, causing Chrome throttling.  We now keep all the callback references and only do one call to the Connector service.
- Mod: Shared: C# Optional parameters work on WebMethods now! (if you do not pass a webmethod a particular parameter, and the parameter has a default, then the default value is used, instead of throwing a runtime exception)
- Fix: API+Clubcms: ENG - members without live emails could still log in, IF they had an email on a resigned cmember record
- Fix: ClubCms: GI member with an email at their secondary club but not at their home club was not able to complete a password reset (even though logging in and signing up were all ok.) #5001980
- Add: Adweb schema updater: Errors are handled better now, so broken scripts don't go unnoticed. Add: Ability to skip a schema script and go to the next version (good for when an index was already previously run). Mod: When a script fails, do not auto-increment the schema number.
- Fix: golf.co.nz and parnz leaderboards where showing progress scoring columns for Stableford (and other) competition types; progress scoring is only valid for Gross, so we have hidden these columns for the others.
- Add: API: Logging: Log request headers.
- Fix: wa_TBSearchByClubDay: Missing ClubId from the join predicate stopped IX_ClubFee_ClubFeeGroupClubId from being used.
- Mod: Shared: Member.cs nullable reference types to help everyone remember HomeClub might be null. (duct tape, until we can implement an IInteropClub interface and return that from HomeClub) Mod: Shared: Member.cs style changes
- Fix: Live: added Home Club null check to the WHSMemberResigned hook so it won't crash if someone has an away home club. Mod: Live: minor style changes to make it easier to read what's happening
- Fix: ISVAPI: crossunion member search bug after publish
- Fix: Live: [DG-3585] Added logic to check if the HomeClub and update if necessary #39540
- Mod: Live: disabled delete button for members for subs clubs (until we disable the button for people with invoices attached)
- Mod: Live: disabled delete button for members for subs clubs (until we disable the button for people with invoices attached)
- Fix: ClubCMS: openfixtures searches were returning deleted competitions.
- Fix: Live: Newly created superuser in ireland was getting error when viewing handicapping reports. Changed Handicapping assetgroup to ONLY require the HC product Mod: Reports: removed unnecessary permission checks, we have assetgroup checks for a reason
- Fix: Tee booking: Player books a cart online but it's not showing on the tee sheet. #39662
- Mod: Org: AssetGroup.Handicapping is now ON for all org users (because the existing permission didn't really mean anything - it was related to Reports rather than Handicapping per se). Any report that is handicapping related should require the Reports role anyway, which is a parent of the ReportHandicapping role
- Fix: Live: People with frozen handicaps were appearing as if their low index was reset in the memberscores page
- Mod: Core: VortexHostDiscovery RunDiscovery is now async. No change in behaviour. (i.e. it will still crash the app pool if discovery fails... seems bad...)
- Mod: Org: DG-3580: Improved logic in handling drop box error
- Fix: Core: RedisConnectionBuilder issue on app start: when initialising the ConnectionMultiplexer, many different threads could be trying to construct it at the same time, which spams the Elasticache discovery and causes delays. Mod: Core: RedisConnectionBuilder GetConfig is no longer async, because can't use async inside a lock statement, and we need the lock to fix the above issue.
- Add: ScheduledTasks: soft cap/hard cap report generator. Not a real scheduled task, just wanted to commit it somewhere
- Fix: Org: DG-3580: Fix when deleting "Rounds Considered for Results" in competition set up erroring when deleting a round that is currently selected in the dropdown box. This now auto select the previous value in the dropdown index.
- Fix: Member Handicap Listing Report - 9H/18H filters not showing. #39651
- Fix: Jenkins build: Member no e-mail on record.
- Mod: API: No e-mail on record - Throw an ApiErrorMessageException instead.
- Fix: Org: [DG-3556] Handicap Change Report left join was not filtering deleted scores on left join but now it is
- Mod: Org: [DG-3556] Handicap Change Report now handles per club permissions where they can only see their club in the combo box as opposed to unions can select any club to see - Also moved the Club combo select sql to its own file
- Add: Adweb: Slicer settings page to allow us to update the bank account number for clubs and associations.
- Mod: Org: [DG-3556] Handicap Change Report to include submitted score count to time period queried
- Fix: ISVAPI: unit test setup was broken
- Fix: ISVAPI: always get handicap record at start of day, because GBI ISVs are complaining it's returning today's scores which is bad news bears #5001929
- Mod: Core: regen WHSClient.g.cs
- Mod: WHSAPI: HandicapDataManager removed unused petapoco initialisation
- Mod: WHSAPI: add asBeforeUTC url param to Handicap Record because GBI ISVs are complaining it's returning today's scores which is bad news bears
- Add: Tournament system score card labels now include the handicap index and playing handicap.
- Fix: API: Digital Scorecard: When logged in as a casual golfer in the app, active scorecards not returned because of ORNS exception.
- Fix: "Start Tee Mapping" subnav menu option should only be visible to North Shore Golf Club; this is a custom piece of development we did only for them.
- Fix: Supernav not visible in Development.
- Mod: API: people require an email to log into EG app again (WARNING requires app changes to handle ApiErrorMessageException)
- Fix: ISVAPI: Build
- Fix: Core: kill the bugs that caused https://dotgolfinternational.freshdesk.com/a/tickets/5001958  (unable to create a new member in Clubhouse)
- Fix: Get rid of eternal rate limit keys.  We now use a fail-safe way of setting TTL on keys after they have been created.  This way if the INCRBYFLOAT call fails for any reason (or lua falls over or whatever), the next call will mop up the damage and set a TTL.
- Fix: Live: TBP Purchase-Refunds clubs. Not all bookings are refunded when using the "Cancel All" option in the POG. Ticket #39505.
- Fix: Digital Scorecard: ClubId was also not set.
- Fix: Digital Scorecard: Club name not set.
- Add: API: Digital Scorecard: New endpoint /load-dashboard.
- Fix: Found another place where TXLine.ClubId and TXLine.TranDate were not being populated.
- Fix: Found another place where TXLine.ClubId and TXLine.TranDate were not being populated.
- Mod: Org: TabRptOOMOverallPlayer the From and To is will no longer default to 2013 but to whatever the current year is eg. From 01/01/2021 to 31/12/2021 and not from 01/01/2013 to 31/12/2013
- Cleanup: Drop live_FindMembers_SearchText since it now lives in ClubMemberRepo.cs.
- Mod: API: UFP: Create a message in the user's inbox after a payment has been processed successfully. Fix: API: UFP: Send push notifications to registered users only. People who continued as a guest (in the app) can view the activation code in the Green Fee Payments history section of the DG app.
- Mod: ClubCMS: rMemberSignupV2: validation for Reasons for Leaving - the user must tick at least one option to proceed.
- Mod: Member search moved from live_FindMembers_SearchText to embedded SQL.  Lots of optimisations are now possible, so I've added a few of them:
- Fix: Live: Fix report Null text not working as it was just returning empty text instead of what the override should be
- Mod: ClubCMS: rMemberSignupV2: hide Email Communication section if ShowEmailCommunication is false
- Mod: ClubCMS: rMemberSignupV2: add new control property, "ShowEmailCommunication". This is false by default.
- Mod: ClubCMS: rMemberSignupV2: add email communication section - this allows new members to opt in / out of the email subscription types for their club and association (e.g. Golf NZ)
- Mod: Core: ConfigureAwait(false) in HandicapProviderWHS in case someone tries to block on it. Sometimes we want to block on this stuff because of asynchelper overhead
- Mod: Core: Update nswag and generate our WHSAPI and ISVAPI clients with PrepareRequestAsync! 🎉
- Mod: Shared: Added Time Formatter that will determine if it should be using end user's local timezone or the database timezone if its null for reports generation
- Fix: API: Digital Scorecard: /list-markers endpoint order by 18H, then course rating descending. Fix: API: Digital Scorecard: /list-submitted-scorecards - In NZ, users have the ability to enter the attester's name or membership number (free text) - return this info if we do not have any other information about the attester (e.g. passport id).
- Add: Indexes to speed up CWPage and CWNewsArticle table scans.
- Mod: QR Code Payments: Refer user to the Golf NZ app instead.
- Fix: Slicer: Missed a slicer schema mod out from CreatePayments.
- Mod: ClubCMS: Golf NZ: My Account css updates
- Mod: ClubCMS: Golf NZ website: My Account: allow users to update their tournament billing card on the Golf NZ website
- Add: We didn't have an index on TBStartTee.ClubId.
- Mod: Included AssociationId in IX_Passport_UserSecurityId for member score listing query performance.
- Mod: Regenerate WHSClient.g.cs to remove old PCC endpoint
- Fix: WHSAPI: bad swagger gen commit
- Mod: WHSAPI: remove GetPCCOld since it's no longer used
- Mod: Core: remove ConfigureAwait(false) from HandicapProviderWHS: it will only server to make people's brains hurt later on.
- Mod: ClubCMS: rMyAccount: Account Topup: added the note (which was in the previous version of golf.co.nz), "Please note that a 5% convenience fee will be added to your top-up amount."
- Mod: ISVAPI: removed redundant ConfigureAwait(false) (ISVAPI is a .Net Core app, so it does nothing.). Added comment to explain closing DB connection before calling WHS
- Fix: API: MyGolf app on iPad crashes when viewing someone's profile that has play dates and course info hidden (because of privacymode=1 on their profile). Return an empty Marker object instead of null - GB&I Freshdesk ticket https://dotgolfinternational.freshdesk.com/a/tickets/5001916.
- Mod: Use the new "Clubhouse" nav styling in Stage when logged in as `matt`.  We need this for demos prior to the re-brand launch.
- Fix: Live: Allow single quotes e.g. o'reilly in member emails #5001911
- Mod: ISVAPI: More caching of hot path ISV data, pass dbconnection into methods where Repos were previously creating multiplicative new connections, Handicap Record now closes DB connection before calling WHS (sometimes this call is slow so we don't want to keep any connections open and clog the connection pool)
- Mod: ISVAPI: reduce number of DB connections that we create, using some caching of ISV Users and user roles
- Mod: ISVAPI: remove hack to increase connection pool size because it didnt help :(
- Add: API: England and Wales - Peer review for juniors. Allow juniors to find someone if PublicMemberSearchRules.EnableSearchForJuniors is turned on (by default is off). Juniors are still restricted from adding someone as a friend.
- Fix: ISVAPI: jenkins build: added runtime identifier for Core.tests.csproj
- Mod: ISVAPI: attempt to run DotGolf.Core tests in ISVAPI build pipeline on jenkins.
- Mod: ISVAPI: attempt to run DotGolf.Core tests in ISVAPI build pipeline on jenkins.
- Mod: Live: Remove DataCache Core test -> moving it to ISVAPI
- Fix: Slicer sql works on unit test DBs now.
- Fix: API: Build, after rev 45766
- Fix: ClubCMS: can now search for memberid 100654 (Over, Nick) and 100654 (Over, Richard) and 100654 (OVER, SUE). For some reason the full text index could not find them. #5001687 Mod: ClubCMS: can now search for friends who are secondary members at a club, instead of just home members
- Fix: Runtime error running scheduled tasks because of GolfNZ not having a RegionId (and nor should it - bad assumption here).
- Fix: Missing inject for IHttpContextAccessor in Activity Tracker.
- Add: CREATE scripts for all the slicer tables, now that they live in the union database.
- Mod: TBTransactionProcessor: create a summary report for the transactions processed (whether successful or failed), and email it to the association's tournaments person and to grace@golf.co.nz
- Fix: ISVAPI: build
- Mod: Core: exec sp_rename 'Core.NamedLock', 'NamedLocker'
- Fix: Core: DataCache bool Query method locks correctly now based on dataKey, instead of locking on the same object for EVERY method call
- Mod: ClubCMS: rMemberSignupV2: added server-side validation of the password (it should meet the requirements)
- Mod: ClubCMS: iGolf: rMemberSignupV2: added Reason for Leaving field (checkboxes)
- *** DFH CODE REVIEWED TO HERE *** Add: API: Score listing - add PCC.
- Mod: sql: deleted gs_ReportGreenfeeTakings.sql (the report is now embedded in SlicerLib in Adweb)
- Mod: ClubCMS: rMemberSignupV2: previous membership number validation mod (continuation of Rev 45717)
- Mod: sql: ClubCMS: soft-delete two obsolete controls: "../_nzg/rMemberSignup.ascx" and "../_nzg/rMemberSignupConfirmation.ascx" - They are not being used on any website. - They have long been replaced by the "../_responsive/rMemberSignupV2.ascx" and "../_responsive/rMemberSignupConfirmationV2.ascx"
- Add: Live: Digital Scorecard: Add the ability for club admins to cancel a member's score submission in DG Live. In the app, there is no way of cancelling a score submission unless the person assigned to attest the score do something about it (e.g. Reject the score).
- Mod: Adweb: SlicerLib_ImportExport.cs: ReportGreenfeeTakings: mod for the Futures Auckland membership application / subs report
- Fix: Show the Deleted Score Intents report in Org again.
- Mod: Small changes to score intent reports: * List all intents regardless of club they were played at (but for members of the current club) * List the played club on the detail report (remove from header) * Move total count to the right * Get rid of third party - make this OTHER * Total count has to match app + other * Detail report should have App (yes/no) - reverse of what it has now. * Other small formatting issues
- Add: Org now has a Handicapping report section; I've moved a number of reports here that belong in this section.
- Mod: Temporarily hide the deleted score intents report; we have a few more tweaks to do to this before we can release it to the wild.
- Fix: Deleted Score Intent detail report was missing a filter on @ClubId which meant the detail records listed were for all clubs, not the current club.
- Fix: Org: DG-3538 Fix bug where the sp [oom_GetAvailableScores] is looking at old table
- Fix: ClubCMS: replace visible binding with if binding because f*cking bootstrap's !important overrides the visible binding's display: none
- Add: UnionAPI: Authorisation added using ThirdParty and ThirdParty_MetaData.
- Add: Live: Deleted Score Intents and its details as drill through reports
- Fix: ClubCMS: incorrect computed logic in scorelisting from prev commits
- Mod: UnionAPI: Renamed directory.json; this version has been uploaded to S3 at https://dg-whs-central-directory-t2s5gxfi.s3-us-west-2.amazonaws.com/directory.json
- Fix: ClubCMS: KO binding errors
- Mod: ClubCMS: Golf Ireland css mod
- Mod: ClubCMS: SubsPaymentConfirmation.txt: added a "thank you" note and updated the priority font to Verdana
- Mod: ClubCMS: rMemberSignupV2: update eligibility check to cover iGolf's requirements
- Fix: ClubCMS: score listing now respects privacymode=1. Mod: Clubcms: removed unnecessary awaits in scoredetails
- Fix: Org: Total Scores/ScoresEnteredViaApp.sql variable name - should be @FromDate and @ToDate
- Fix: Live: Variable name should be @FromDate and @ToDate
- Mod: UnionAPI: Changes per meeting outcomes (removed low handicap, display index, changed ClubUID to ClubId, bumped version to 0.5draft2preview1).
- Fix: ISVAPI: when getting all members for club, do not create new DB connection for EVERY member in the request
- Fix: UnionAPI: Stopped using dodgy SetJwksOptions and async deadlockable JWKS retrieval; hardcoded public keys because these are static.
- Mod: UnionAPI: Cleaned up the Enum member custom attributes junk; it's a central extension method now.
- Mod: ISVAPI: put DataCache caching back into IsvAuthorizationHandler because would prefer not to create more sql connections than we need to.
- Mod: UnionAPI now implements OAuth2 using AWS Cognito as an identity provider.
- Mod: Bulk Email: add "Membership Number" in the default variables that could be used in an email (just like First Name, Last Name, etc.)
- Mod: ISVAPI: Max pool size up to 2000. HOPEFULLY fixes connection weirdness in ISVAPI with minute-long duration requests.
- Mod: DataCache Core: no more mutex - we dont need DataCache to lock across processes. locking on a static object is fine.
- Mod: API: Score detail - privacymode=1 can now hide course info if feature flag is set.
- Mod: API: Peer review for juniors. Allow juniors to find someone if PublicMemberSearchRules.EnableSearchForJuniors is turned on (by default is off). Juniors are still restricted from adding someone as a friend. Mod: API: Allow user to view a person's scoring record if that person is a member of the user's home or secondary club.
- Fix: UnionAPI: Test build error due to Core update.
- Mod: ClubCMS: rMyAccount: add another sentence (Ts&Cs link) in the note section at the bottom
- Fix: ClubCMS: member with home club in wales could not verify email in GI
- Mod: ClubCMS: Golf Ireland contact page updates #5001633
- Mod: WHSAPI: refactor InsertScore to return the inserted PK. Minor nullable fixes
- Mod: WHSAPI: #nullable enable in ScoresController and appropriate code style changes
- Mod: ClubCMS: rMemberSignupConfirmationV2.ascx: just added css classes to the markup
- Mod: API: privacymode=1 can now hide score listing course info if feature flag is set.
- Fix: ClubCMS: build
- Mod: ClubCMS: rMemberSignupConfirmationV2.ascx: update payment failed text to "Sorry, your payment was unsuccessful"
- Add: ClubCMS: privacymode=1 can now hide score listing course info if feature flag is set.
- Fix: API: build, after my previous commit
- Mod: TBTransactionProcessor: SubscriptionRenewal: updated the Email Subject to "[Club] Auto Renewal Issue" for the email sent when the payment fails
- Mod: Core: added #nullable enable to config profiles, reordered some Features flags (Ireland already done in prev commit)
- Add: Live: Default privacyMode for new members.
- Mod: TBTransactionProcessor: SubscriptionRenewal: updated the Email Subject for the email sent when the payment fails (e.g. declined, etc.)
- Mod: ClubCMS: golf.co.nz: Love Golf events
- Mod: ScheduledTasks: WHSHookCleanupTask looks for unsynced scores in the past 2 days because the query actually runs well now.
- Mod: ScheduledTasks: BMU task runs for 5s less than the timeout just so we don't hit the timeout
- Mod: ScheduledTasks: BMU task now logs exceptions as Error severity instead on Information
- Fix: Live: DG-3530: Where updating unfinancial was not working due to that the logic was looking for resigned member first. Updated logic to look for live members first before resigned ones.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: updated the email subject for the payment confirmation email
- Mod: ClubCMS: rMemberSignupConfirmationV2: updated the email subject for the payment confirmation email
- Mod: Live: frozen and withdrawn handicaps report now works for Live to display all members at a club #5001758
- Mod: WHSAPI: add notnull constraint to generic argument that should not be null
- Mod: WHSAPI: does not need to target netstandard2.1 o this is just wasting cpu cycles
- Fix: Build
- Fix: Slicer reconciliation report: Should be using the Nomads-style calculation when working out competition registration payments for virtual clubs; the Create Payment script already includes these 3 club IDs where the reconciliation report only had Nomads before.
- Mod: regen WHSClient.g.cs
- Mod: WHSAPI: can now get handicap freeze by specific organisation, so clubs+counties can now get a report for this.
- Mod: Org: levy snapshot excludes any cmember record that has a deleteddate set
- Fix: Live: could not load cmember history for people who has changed to overseas home club.
- Cleanup: BulkEmail: Deleted BmwBulkEmail code
- Mod: ISVAPI: remove hardcoded configProfile list from ProxyResponseHandler and moved the code that was using it into Extensions so that stuff lives in one place
- Cleanup: Live: Deleted BmwBulkEmail code (and add some simple usings and code style changes to BulkEmail.cs and CasualGolf.cs)
- Mod: Live: simple using in RoundManagementMemberResigned hook
- Mod: ScheduledTasks: SyncKountaReportingGroupsTask is now async
- Mod: Live: wording changes to Delete Member messages after Matts feedback
- Add: sql: Cmember.DeletedDate now tracked by cmemberhistory
- Mod: WHSAPI: replace console.Writeline with Debug.Writeline in handicapDataManager RecalculateQueuedScores to save resources
- Mod: Shared: [Missing the .csproj before] Additional Parameter accessor with backwards compatibility so that sub report can have access to the parent report's parameters.
- Mod: Shared: Additional Parameter accessor with backwards compatibility so that sub report can have access to the parent report's parameters.
- Fix: Clubcms: GI member couldnt log in with either pin for 2 cards created with same batch number #5001827
- Mod: Love Golf Play: Bulk Email: CreateGotgBulkEmail: update the recipients query (patterned from the bulk email query)
- Fix: WHSAPI: Error in dev server check...
- Fix: WHSAPI: Do not log to elasticsearch in dev.
- Fix: WHSAPI: Nassssty hardcoded prod credentials insert in post-deployment script.
- Fix: Live: searching for someone from ISVAPI works now when searching from previous home union to new home union. Before, the person could not be found by their new home union membercode
- Mod: ISVAPI: insert new dummy cmember record for each other Association someone else is searched from, for completeness. We cant tell which is the home one though :/
- Fix: ISVAPI: always insert dummy cmember record from other association when searching for people and they dont have a dummy record yet.
- Mod: ISVAPI: tests: default the membercodemanager to EN
- Mod: Live: csproj was missing the deceased image
- Fix: Don't log stuff to Vortex in dev WHS.  Not proud of this, but it'll work...
- Add: Live: can now delete members from the Resign member dialog.
- Fix/Mod: Love Golf Play: Bulk Email: added a forward slash at the end of the url http://live.golf.co.nz/
- Add: WHSAPI: Unit tests (ShouldGetMemberScoresWithIsCounter and ShouldGetMemberHandicapsPaged(withChangesSince). Can't really remember why I added these, but they are passing, so there is that.
- Mod: WHSAPI: If we repost a score using a good ClientId value, but a non-existent WHSScoreUID, the API should update the score (finding it by ISVCredentialId+ClientId) and return the score's WHSScoreUID.  This is only a problem when we grab a new dev database (based on a copy from prod) and try to import its scores to the WHS dev database. Fix: Small correction where the API call in a related unit test wasn't checked for an OK result.
- Mod: Love Golf Play: Bulk Email: CreateGotgBulkEmail: update the recipients query (patterned from the bulk email query)
- Mod: API: Allow people to get in to the MyEG app but display a message in the dashboard screen to let them know they need to contact their club about it.
- Mod: API: Unattended green fee payments: Generate digital scorecard activation code - https://dotgolf.atlassian.net/browse/DG-3401.
- Mod: Reverse Proxy: apply TLS certificate to akaranagolf.co.nz
- Mod: ClubCMS: bindings.list: added akaranagolf.co.nz and www.akaranagolf.co.nz
- Fix: WHSAPI: exception was being thrown when estimating recalc completion time.
- Mod: Scheduledtasks: FireWebhooks simple usings
- FIX: CORE: DATACONNECTIONBUILDER sql error
- Mod: ActivityTracker: remove redundant services.AddAWSService<IAmazonS3>(); from startup since it gets added in AddDotGolfCoreServices now
- Fix: BulkEmail: There was an issue when updating a text in a draft with more than 1 text section. Fixed by unbinding the auto save timer.
- Mod: Live: remove commented code in tabmembers.aspx and made minor style changes
- Fix: ClubCMS: TeeBooking: Fix #37879 (follow up fix) - If the logged in user does not have rights to edit an entry in the booking, skip that entry.
- Add: Live: Display column in Live Member History showing who made each change
- Add: Scheduled task to monitor production database backups to ensure they are working and stay current.  Helpdesk tickets are created in DotGolf Freshdesk (by emailing helpdesk@golf.co.nz) if anything unusual is found.  Rules as to what is "unusual" are defined in BackupMonitoringTask.cs.
- Mod: Live: General play score now gets all scores for all clubs played for my members. Eg I belong to akarana but I've played else where it will show up in the report if its in the date range. Also swapped true/false with yes/no
- Fix: Org: Total Scores Entered report fix. Where it wasn't getting the correct score entered through app. Merged the null data from 'isCompetition' as General play.
- Add: ActivityTracker: IUserProvider implementation as POC
- Mod: Activitytracker: replace some x.Result calls with await x. Also some simple usings. Mod: Core: configProfile registers itself in AddDotGolfCoreServices instead on CoreModule now.
- Add: Core: Databaseinfo class to replicate some of the static settings from Database.cs
- Mod: API: Digital Scorecard: England and Wales - Enable access to past scorecards that have yet to be submitted for review (not returned).
- Mod: API: Digital Scorecard: Ireland - Enable access to past scorecards that have yet to be submitted for review (not returned).
- Revert SVN rev 45590 - I'll break this into two parts a) Ireland and b) England and Wales.
- Mod: API: Digital Scorecard: GB&I - Enable access to past scorecards that have yet to be submitted for review (not returned).
- Mod: Shared: DatabaseBuilder simple usings where appropriate
- Mod: ISVAPI: Rename SessionContextKey to IdColumnName for clarity, and rename the ISVAPI userprovider
- Fix: Pennants: Add Servicelocator. (Not fixing anything specific, but this was bound to break eventually.)
- Add: Live: DG-3426 Mod: Added PlayDate to the General PlayScore. Formatter will only show date
- Mod: API: Digital scorecard: Golf Ireland - Proximity check is now turned on for all environments. Previously, this is only turned on in production. If we need to create digital scorecards in Stage, we just have to set the club's coordinates to the DotGolf office (NZ).
- Mod: Core: set session_context when connection is not immediately opened. Mod: ISVAPI: Added test for the above.
- Mod: Core: Apply new country service registration to Live, move vortexhostdiscovery in there to see what it looks like.
- Fix: Unit tests: only create slicer indexes if the slicer schema exists - was crashing unit test DB setup
- Mod: Live: typo in handicap listing report
- Mod: Core: Experimental statically typed compile time service registration (to avoid having a switch statement determining a country's MemberCodeManager. Awaiting criticism
- Add: Live: DG-3426 Added 'GeneralPlayScores' to club level only; also includes competition or not flag. With 7 days date range filter.
- Add: Org: DG-3427 Renamed the report heading to Total Scores Entered
- Mod: ClubCMS: rMyAccount: specify dimensions for the credit card icon (it was distorted on the association site (not the golf club site though))
- Fix: Bulk Email V2: Removing recipients is not working because there is no click event.
- Fix: Bulk Email: revert change on Line 1519 (mistakenly updated in Rev 45550)
- Mod: ISVAPI: remove heathen switch expression
- Fix: ClubCMS: Golf NZ: Casual Golfers - Average score indicator is not shown.
- Fix: ClubCMS: TeeBooking: #37879 Allow logged in user to edit other entries in the same booking only if that user created the entry or the one being charged for that entry. If the user does not have rights to edit the entry, display it as read-only.
- Fix: ClubCMS: TeeBooking: #38777 - Cart booked by admin gets overwritten when a player (from that booking) edits the booking in the public site.
- Mod: Core: revert change to switch expression in Extensions.cs
- Mod: ISVAPI: simple usings
- Merged revision(s) 45563 from Production.GBI/Current: Fix to GBI.Production: Only members with blank email addresses were being returned from the search because of an inadvertent blank string passed in to @EmailAddress in FindMembers. ........
- Mod: Live: member handicap listing report only shows 9h/18h member category options if the club actually uses 9h categories. Options were confusing GBI clubs #5001584
- Mod: Org: move member email filter into Advanced so people dont think its required
- Mod: Org: can search members by email
- Mod: Org: advanced search proc now supports casual golfers being searched by email, or No email
- Mod: Core: ClubMemberRepo simple usings
- Add: Org: deceased indicator on member page and allow searching for deceased people
- Mod: Org: Tournaments: Prizes: Overseas winners csv: include bank account number
- Mod: Adweb View Exception Log section now pulls data from Elasticsearch.  In Development I have kept it pointing at the ExceptionLog table for now, until we clean this up nicely.  Stage there is no telling what will happen - I'll fix that when we get there.
- Mod: Bulk Email: Add recipients from previous email status.
- Mod: API: change missing email error to a different exception so app users see it correctly
- Mod: Bulk Email: Add recipients from previous email status.
- Fix: Live: Build
- Fix: Live: previous commit had a not-code-style-change.
- Mod: Live: code style changes to TabInterClubMessageReader
- Fix: Live: Kiosk errors out when you enter a casual golfer number.
- Add: Forgot to commit some historical ExceptionLogToElastic mods.
- Add: New experimental metric: active requests
- Add: Some StatsD configuration files for various boxen.
- Add: SSO: OTP works for live+org now
- Mod: Removed extra Exceptions.LogException that caused logging of useless message below.  The inner exception was already logged at this point.
- Mod: Use new PushNotificationsTokenMD5 persisted computed column (and nonclustered index) to locate tokens quickly, since we can't index on the varchar(max) beast that it is.
- Fix: Eliminated needless throwing and swallowing of exceptions (these have cpu overhead)
- Add: Store the MD5 hash of push notification tokens so that we can index and find them quicker.  API needs this and we can't index a varchar(max).
- Fix: Build should fail if the code doesn't compile...
- Mod: Experimental code to automatically create distinct SQL logins for each application, based on the site name; e.g. org-newzealand.  This will help us when troubleshooting performance because apps no longer share the same `app` login to get to the database.
- Add: Indexes to speed up the payment batch rollback feature in Slicer to avoid sql timeouts.
- Fix: SQL: Do not drop passport+usersecurity password triggers because those were wiping the password field 😬
- Fix: SQL: Do not drop passport+usersecurity password triggers because those were wiping the password field 😬
- Mod: ISVAPI: remove caching from IsvAuthorizationHandler because it's a hot path and David has sped up the query to ~5 reads. Lets see how the DB copes. Mod: ISVAPI: no more IMemoryCache because it's dangerous, see Startup.cs comment.
- Mod: Slight change to this index.
- Add: Specific index to NonAffiliate to speed up live_FindMembers
- Mod: Love Golf Play: replace Jan's contact details with Mike's contact details (as requested by Mike)
- Mod: sql: ClubMemberHistory view added ThirdPartyId from Cmember table (ignored non-affiliate)
- Add: sql: ThirdpartyId now populated in ScoreHistory,MemberHistory, and CmemberHistory where available. ScoreHistory now tracks which user made the update or delete.
- Add: Indexes to speed up club ID queries in ISVAPI (these get run for most endpoints so this helps a fair bit)
- Mod: ClubCMS: Unsubscribe: display the governing body name on the button which appears after unsubscribing (e.g. Visit the Golf New Zealand website), and not the email subscription type name.
- Mod: ISVAPI: changed session_context key to be generic across IUserProviders so they can't overlap
- Mod: WHSAPI: unit test to cover score splitting 9h scores when backposting 18h scores when the parent score is deleted. Replace infinite retry with a 3m while loop
- Mod: ClubCMS: rMyAccountPaymentConfirmation: database transaction: only enclose the payment creation code
- [DFH CR 20210514 It shouln't be in union databases at all; I have asked Grace to look at this] Fix: sql: units test: gs_reportgreenfeetakings doesnt exist in unit test DBs, so changing this ALTER script to CREATE OR ALTER
- Add: ISVAPI: set a sql SESSION_CONTEXT entry with the ThirdpartyId of the logged in user. We'll use this in History Table triggers to determine if an ISV changes something.
- Mod: ClubCMS: rMemberSignupV2: add password validation; add tooltip for Previous Membership Number
- Mod: Clubcms: codestyle - simplify a Lang.Current call
- Mod: sql: ClubCMS: oom_GetStandings_Pga: display the results even those linked to the obsolete (archived) OOMEventCategory records
- Add: Org: DG-3427 Added Total Scored entered via app report for all unions. Shows PlayDate, Total Scores entered, IsCompetition, General Play, using global variable to determine app name and also determines if the scores were from 9/18 holes.
- Fix: Org: CompetitionTab_Basic: OOM Event section: void existing OOMTOurnament records before inserting a new one (previously, duplicate OOMTournament records were being created for one competition)
- Mod: sql: Added NZCRDataId to IX_Score_PlayDate so we can fetch 18/9 data easily.
- Fix: API: fix friday publish causing people to not be able to log into MyEG app
- Fix: Bulk Email: https://dotgolf.atlassian.net/browse/DG-3304 - If a person unsubscribes from a bulk e-mail mailing list, we should also delete (soft) their corresponding record in the CWMailingListRecipient table. Fix: Unsubscribe page is displaying the union name (e.g. Golf New Zealand) instead of the e-mail subscription type (e.g. Friends of the PGA).
- Mod: New Zealand config profile: reverted Rev 45493 (it looks like it was left out on purpose; NZ uses the default values)
- Mod: BulkEmail: replace hardcoded "no-reply" email address with the config profile DefaultFromAddress
- Mod: New Zealand config profile: added DefaultSenderName and DefaultFromAddress
- Mod: Core: simple usings in AccountingSystemFactory
- Mod: Shared: pedantic style changes to database.cs (simple usings)
- FIX: WHSAPI: REVERT ACCIDENTAL BREAKING CHANGE
- Mod: Slicer: gs_ReportGreenfeeTakings: mod for the Futures Auckland membership application / subs report
- Mod: WHSAPI: simple usings on ALL the new database connections (where appropriate)
- Fix: WHSAPI: sql error
- ** DFH CODE REVIEWED TO HERE *** Mod: sql: dont add scorehistory FK to thirdparty because scorehistory has no other FKs so lets be consistent
- [UnBreaking] Fix: Live: Replacement of Data.ClubTag with Core.Data.ClubTag is complete
- [Breaking] Mod: Replace Data.ClubTag with Core.Data.ClubTag
- Fix: sql: changed order of statements, added warning and if not exists checks for repeatability
- Mod: add thirdpartyid to history table so we can track changes made by ISVs
- Fix: Org: binding errors because of system.componentmodel.annotations. Had to add redirect back to web.config 😭
- Fix: ISVAPI: better score duplicate checking #5001656
- Mod: ClubCMS: people require an email to log into EG portal but only if they have no email at ANY club including resigned
- Mod: API: people require an email to log into EG app
- Mod: Updated code comment.
- Mod: ClubCMS: people require an email to log into EG portal/app
- Fix: Live: DG POS: Fix #38974 - POG printed cards should not be marked as paid if the club has the "POS" product.
- Fix: Live: DG POS: Fix #38974 - KOUNTA POS clubs, cards printed from POG are automatically set as paid.
- Add: Index to speed up a new report (reporting competition vs. general play scores for GB&I - nikky is building this atm)
- Add: ClubCMS: Edit Profile: Add the ability for members to control their privacy mode (to suppress dates) in the member portal. This setting is disabled by default and will need to be enabled in AdWeb (if required).
- Add: Index to speed up report for app attested scores.
- Mod: WHSAPI: Elasticsearchlogger now creates a new index every monday AND friday to stop individual index size getting to large that we have so delete it and lose a whole week of data.
- Fix: Bulk Email: Handled the error in Send page when there is no competition id.
- Fix: Bulk Email: Removed the blurring code to soften super sharp images with text and lines.
- Fix: Org: Draw Time Sheet: Remove report from TabReports page.
- Mod: Bulk Email: Reports: Added link to extquery.
- Mod: Live: Kounta POS scorecards can now be searched by kounta sale id.
- Mod: Org: TabTournaments: when "Recently finished and upcoming tournaments" is selected (it is by default, on page load), only show the tournaments in the past 3 months (much less scrolling for the user).
- Mod: Org: Reports: Added the ExtQuery report for email link clicks and email status count.
- Fix: deploy lib problem introduced while I was building Dev1 deployment stuff.
- Fix: promote script was broken in a really subtle way that only windows batch files can offer.
- Mod: Live: small performance improvement in KountaSales if there are multiple previous sales on a scorecard.
- Mod: Live: Minor pedantic style changes to CompetitionRepository.cs
- Mod: Live: scorecardrepository simple usings
- Mod: Live: Email Mathew Eagleson when a club doesn't have their DG online payment type linked to a Kounta Payment type
- Mod: Live: can search POS by externalsaleID to help Mat with Kounta reconciliation
- Mod: Bulk Email: Display all tournaments in the recipient dropdown.
- Fix: TBTransactionProcessor: Add ServiceLocator. This was broken when we introduced servicelocator to Data.ClubItem
- Cleanup: Removed some non-source code items from Development (these are now in \\EDDY\Development).
- Mod: Org: Changed the tournament email link to open in Bulk Email v3 and automatically create a new email draft.
- Cleanup: Deleted DotGolf.Webservice.
- Removed DotGolf.Shared extern from DotGolf.WebService out of an abundance of caution.
- Fix: ClubUID not being returned. Fix: Typo.
- Cleanup: Removed System.Configuration.ConfigurationManager from DotGolf.UnionAPI.
- SSO: Upgraded to StackExchange.Redis 2.2.4 (just reinstalled packages here to clean up assembly redirects)
- Org: Cleanup: Removed a bunch of unused binding redirects from Web.config.
- Mod: Live: Subs: Export DD: add another confirmation box before proceeding with the rollback. The club thinks that they need to rollback just because they corrected a bank account number. Hopefully, this additional confirmation pop-up will save us time.
- Mod: Bulk Email: - Draft list optimisation - Added the competition id in the email draft so we can preselect the recipients from that competition. - Reports update
- Org: Upgraded to StackExchange.Redis 2.2.4.
- Mod: Bulk Email: Added the competition id in the email draft so we can preselect the recipients from that competition.
- Cleanup: Removed empty directory.
- Cleanup: Removed unused AsyncKeyLock
- AspNetCoreRateLimit: Upgraded to StackExchange.Redis 2.2.4.
- Fix: Bumped ConnectorAPI dev web.config to framework 4.7.2
- ConnectorAPI: Upgraded to StackExchange.Redis 2.2.4.
- Fix: Removed unused NUnit package from DotGolf.CasualGolf.WebApi
- API: Upgraded to StackExchange.Redis 2.2.4.
- Fix: Random missing binding redirect in Analytics.
- Adweb: Upgraded to StackExchange.Redis 2.2.4.
- [MAJOR] Upgraded to StackExchange.Redis 2.2.4 to fix https://github.com/StackExchange/StackExchange.Redis/issues/1120 (no connection available sporadically occur in Prod)
- Mod: UnionAPI changes around /golfers endpoint to conform to interop spec. NOTE: All endpoints not fully working yet; this code is NOT production ready.
- Fix: API: Digital Scorecard: GB&I - Ability for juniors to search for an attester.
- Add: NZGALevy table and proc mods on Matt's behalf (excluding non-union members and storing MemberCode, not computerno)
- Fix: Org: CompetitionTab_Basic: ddlEventCategoryRptOom: correct the event category name display when the competition is using a soft deleted event category
- Mod: Live: ScoreService.aspx.cx formatted code to standardise whitespace
- Fix: Adweb: #38800 Line 409 in MergeScores.aspx.cs was looking for 'newHandicap' decimal and not an object so have specified it to be 'newHandicap.HandicapIndex'
- Mod: Core: simple using in CourseChanges ForceApprove
- Mod: Live/ClubCMS: drop plaintext password backup column and the trigger which populated it
- Fix: Org: Tournament draw time sheet: Added the CourseId filter when getting the course play time.
- Fix: Org: Tournaments draw time sheet: When a club has more that one course (Taupo for example), the report is throwing an error.
- Add: Adweb: App message can now be viewed in Adweb in the member tab.
- Mod: API: made some sql calls async so VS stops issuing CS1998 warnings in MessagesController
- Mod: ReverseProxy: apply https to huapaigolf.co.nz
- Add: ClubCMS: DG-3322 Ability to assume identity of any golf.co.nz from Org (and Adweb)
- Add: Org: DG-3322 Ability to assume identity of any golf.co.nz from Org (and Adweb)
- Add: Adweb: DG-3322 Ability to assume identity of any golf.co.nz from Org (and Adweb)
- Mod: Adweb: explain that we hide the member scores Thirdparty competition columns.
- Mod: API: MessagesController: Retrieve messages 28 days since the first successful logged in on the app.
- Fix: API: default scores entered via app to General Play in GBI #5001623
- Mod: Org: Competition: added EventCategoryName (forgot to include this mod in the recent commit)
- Mod: Org: CompetitionTab_Basic: handle soft deleted Event Category
- Mod: Org: Finalis: rename text from "Refund" to "Do not charge". We don't do the Auth-Complete process anymore; we don't hold any amount on the player's credit card.
- Fix: WHSAPI: 2 potential ORNS when recombining 9h scores while recalculating the handicap for a score.
- Mod: Bulk Email: - Added template Preview - Added bounced and failed email count - fixed the jwt decode expired error when logged in
- Mod: WHSAPI: simple usings and the start of nullable reference types in WHS with #enable nullable :)
- Mod: WHSAPI: simple usings in MarkersController
- Fix: ClubCMS: rEventRegistration: allow non-affiliates (with no handicap index) to register into Futures events
- Mod: Live: Remove unused commented code
- Mod: ISVAPI: a few simple usings
- Mod: ISVAPI: reverted duplicate username error msg change in case it breaks ISVs
- Mod: ISVAPI: include duplicate username in duplicate username error msg
- Fix: Live: deleted clubs showing in advanced member search options
- Mod: ClubCMS: File Manager - added docx and xlsx mime types.
- Fix: Live/Org: User Account Management: Fix #38792 - User logins displaying multiple times because UserSecurityId is linked to more than one active passport.
- Fix: ClubCMS: File Manager: handle displaying of files without a file type (previously, an error was being thrown, and no files are displayed)
- Mod: Bulk Email: Drafts: Auto save.
- Fix: Jenkins build - Missing from my previous commit.
- Fix: Draw Report sponsors image: Report did not show because the request to download the image from golf.co.nz failed. The golf.co.nz url was hardcoded - we've fixed this by using StaticContent instead. Also, the imageID should not have been included in the image url (this resulted in a 404 before).
- Mod: ClubCMS: Golf Ireland: footer: update Instagram URL
- Mod: Shared: Score Intents: Move delete scorecard logic to the IScoreIntentDeleted hook.
- Fix: ClubCMS: rMyAccount: show account area when applicable
- Mod: maxconnection=16 committed to the right places this time.
- Fix: API: Digital Scorecard: Players from the same tee time as the app user - MemberOrNonAffiliateId is null if a player does not have a scorecard created.
- Add: Mailer: maxconnection="16" for mailer so we aren't limited by the max 2 connections (standard framework limit) for outbound SMTP connections.
- Fix: API: binding errors caused by prev commit
- Mod: API: Digital Scorecard: NZ Stage - Allow users access to their previous pending scorecards.
- Fix: Make DataCache cache stuff by default (before it was just doing nothing unless you explicitly set an ApplicationCache on app startup).
- Fix: Bulk Email: Added blurring to the image cropper to remove sharp edges from the images.
- Fix: Live: Overhauled signalR integration to be autofac-based instead of GlobalHost based. REDIS BACKPLANE HOPEFULLY WORKS NOW.
- Cleanup: Core: Marcus should have committed this
- Mod: Scheduled Task cron lines are now interpreted in local union time, not Ringmaster local time.  This means that 00:00 now means 00:00 NZT in NZ and 00:00 BST in GB&I, not 00:00 UTC.  Which means the daily handicap sync will actually happen at midnight local time everywhere.
- Fix: Org: bulkmarkerupdate filters by sss again
- Add: Okay okay okay, so we need a bindings.development.list file otherwise the scripts won't do anything.
- Fix: Bulk Email: Added a remove image button in the modal popups.
- Mod: ScheduledTask: ScoreVerificationReminderTask is no longer required - this was written previously to send push notification messages to score attesters. In the new version of the MyGolf app, users will have the ability to send a reminder to their score's attester/marker.
- Cleanup: Removed unused bindings.development.list - we have hacked the deployment scripts since we're going to old-school IIS. Mod: Removed previous mods to support Prod environment with staging directories on D: (the dev scripts are now separate)
- Fix: Just testing that the powershell interpreter works properly ;)
- Fix: Typo.  Sigh.
- Add: DeployLib_DeploySiteToIIS_OldSchool way to deploy to our internal DEV1 server, it ain't pretty but we need a new dev web box...
- Mod: API: Messages: Retrieve messages 14 days since the user's first logged in on the app.
- Fix: Deploy: ExecutionPolicy magic incantation added to make powershell run my deployment script.
- Fix: Powershell script was hanging rather than terminating due to some STDIN sorcery.  Also had to put the domain in the user credentials.
- Mod: Live: kiosk: remove solved //todo
- Mod: Moved to PAEXEC instead of PSEXEC (allegedly works better with Jenkins)
- Mod: Try another thing to make PSEXEC work on \\JENKINS
- Mod: Live: simplified exception handling logic in Application_Error
- Mod: Adweb: Removed Club drop down menu, only exception in the last x days, computer name, and show 404 not found exception, vortex iframe. Added: Adweb: Kibana direct link
- Fix: Adweb: Local connection string (for PBX pages etc) moved to code instead of web.config (we don't like web.config anymore).
- Fix: webapp-jenkins-promote.cmd psexec -accepteula option.
- Mod: More dev package-style deployment stuff
- Fix: Bulk Email: The images are being duplicated with updating an exiting text + image section.
- MSK+KLY Fix? Live: Signalr Redis backplane still not working. Testing this fix in stage. Again.
- MSK+KLY Fix? Live: Signalr Redis backplane still not working. Testing this fix in stage. Again.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: use the Live URL from the configuration profile to build the interclubmessage URL
- Mod: ClubCMS: rMemberSignupConfirmationV2: use the Live URL from the configuration profile to build the interclubmessage URL
- MSK+KLY Fix? Live: Signalr Redis backplane not working - it's defaulting to in-process signalr in prod. Testing this fix in stage.
- Add: bindings.development.list for adweb in dev.
- Mod: Dev build scripts: Step 1 of being able to use package-style deployments in DEV (without S3).
- Slicer #nomoreNZGreenFeeData Last NZGreenFeeData references gone from TBTransactionProcessor.
- Clean up: Removed AjaxControlToolkit.dll from SVN
- Slicer #nomoreNZGreenFeeData More NZGreenFeeData references in Live.
- Mod: Adweb: Added column 'Is Unfinancial' to the EditMember page. Changed 'Computer No' to 'Member Code'
- Slicer #nomoreNZGreenFeeData More NZGreenFeeData references.
- Slicer #nomoreNZGreenFeeData Deleted NZGreenFeeData database project.  These tables are now part of the union database and will be managed with the /sql scripts now.
- Slicer #nomoreNZGreenFeeData ClubCMS references updated to slicer.* schema.
- ** WARNING READ BEFORE DEPLOYING **  Slicer: Moved NZGreenFeeData tables into union database (into slicer.* schema).
- Mod: Email Viewer didn't handle PLAIN emails nicely if they have preformatted whitespaces.
- Fix: ClubCMS: Member Signup: Fix part 2 for #38685.
- Add: Org: GI category report total counts now match what their Home Members dashboard tile count says.
- Fix: Org: WHSCourseUpdated hook was using create endpoint instead of update endpoint
- Mod: ISVAPI: simple usings in visitor test
- Fix: ClubCMS: Member Signup: #38697 #38685 #38230 Knockout binding errors - UI code (member-signup/view.html) is still referring to the old property name "TypeId" instead of "EmailSubscriptionTypeId". #
- Fix: ISVAPI: restored error schemas in generated V2 swagger which we'd lost after the dotnet core 3 upgrade
- Mod: API: Digital Scorecard: Unfulfilled score intent - Allow user to send a reminder for a past scorecard that is still awaiting attestation.
- Mod: ISVAPI: EG CRM endpoints include resigned and deceased now
- Fix: API: Messages: Extend start date to previous 7 days since the first mobile device registration.
- Mod: Live: update WHS course sync tests with changedate ...change
- Mod: ISVAPI: clubmember tests simple usings
- Mod: Live: WHS course sync increments change date if course name is changed
- #dpsdevmode Fix: Windcave config thing - missing using.
- #dpsdevmode Whoops haha.
- #dpsdevmode Mod: Switched to IsWindcaveDevelopmentMode flag for TBTransactionProcessor.
- #dpsdevmode Add: Missing file courtesy of VisualSVN.
- #dpsdevmode Mod: Removed DPSDevMode option from Web.config file, replaced with IsWindcaveDevelopmentMode flag in configuration profile features.
- Mod: ClubCMS: IE: Friends page dropdown css update.
- Mod: Update WHSClient.g.cs
- Mod: Org: Fire courseupdated hook when course name is updated
- Add: Org: hook for course updates so we update the name in WHS when it changes
- Mod: WHSAPI: Add course change date
- Mod: WHSAPI: simple usings in courses test
- Fix: Live: Hide SIC box showing competitions for england/wales/ireland...
- Fix: Status page: Last Updated date shouldn't show up as DateTime.Now or users won't trust it.
- Mod: Status page: Show the last 3 months' worth of status history so we don't have to keep writing it manually. Mod: Status page: Now resets the status back to "all good" 12 hours after the last update.
- Mod: Bulk Email: Added new tool sections: - text columns - gif section
- Mod: ClubCMS: IE: Added the mobile member search css.
- Mod: Profile: Add feature flag to allow players to access to their previous pending scorecards in the app. Mod: API: ScorecardController: Include previous pending scorecards if Features.AllowEditPreviousScorecardViaTheApp is True in the configuration profile.
- Mod: SignalR event key now driven from BuildInfo instead of Web.config.
- Mod: SignalR event key now driven from BuildInfo instead of Web.config.
- Add: Adweb: WHSAPI course info shows in Adweb when you clock Show Details
- Fix: Missing {} for string templating.
- Mod: API: Digital Scorecard: Golf Ireland - 1) Enable club proximity check when creating a scorecard. 2) Consider scores submitted thru the app for handicapping.
- Fix: Live: The group booking pop is under the background. Adjusted the z-index.
- Mod/Fix: ClubCMS: Golf Ireland: my-header (mobile): fix the friend and notifications icons styling
- Fix: Sigh.
- Fix: Adweb SignalR wasn't working properly when load balanced across servers due to machine name embedded into Redis key prefix.
- Mod/Fix: ClubCMS: Golf Ireland: my-performance: make this control display properly for Golf Ireland. Tested the changes on Golf NZ and England Golf dev sites.
- Mod/Fix: ClubCMS: my-header/view.html: use bootstrap utility class to hide/show the mobile-only element
- Mod: Core: update to langversion 8.0, added a simple using to see which solutions are still using 7.3 or lower
- Mod: ClubCMS: iGolf welcome email: text updates
- Mod: ScoreService: simple using and minor code style changes
- Mod: WHSHookCleanupTask: simple using
- Mod: Live: minor style changes in kiosk Default.aspx.cs
- Add: Live: Conditional setting to turn on cart fees being charged by house account @ Kiosk
- Fix: Adweb: Sending schema updater signalr messages from a background thread was not reliable.
- Mod: Shared: clubmember.cs simple usings
- Mod: Adweb: add CR/Slope/Par to course details in adweb
- Add: Org: basic GI member category report
- Mod: Core: deleted members' membership numbers can be re-used in GBI
- Fix: Scheduledtasks: No longer randomize CronSchedule for GetScoresFromWHS
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: rEditMemberDetails: on/off bootstrap toggle for checkboxes: css updates
- Mod: ClubCMS: rEditMemberDetails: use on/off bootstrap toggle for the checkboxes
- Mod: WHS: Lowercase env name so that the development appsettings file is imported correctly
- Mod: WHSAPI: further attempt to get dev WHSAPI to stop logging stats to prod vortex
- Mod: ClubCMS: fullscreen background slideshow: change speed from 6 seconds to 12 seconds
- Mod: ClubCMS: fullscreen background slideshow: change speed from 6 seconds to 12 seconds
- Mod: WHSAPI: remove petapoco use from MarkerHistory for minor perf gains
- Fix: API: Digital Scorecard: Score verification reminder - Add check if a reminder has been sent (to the attester) in the past hour. If true, don't allow it. Add: Shared: Configuration Profile: Add "DefaultFromAddress" in the MailerService so we can configure the correct sender e-mail address for system generated e-mails. Next, I will be replacing hard-coded "no-reply@golf.co.nz" email sender address to use the value from the configuration profile. Fix: Digital Scorecard: Score verification e-mail: Reference the union name in the e-mail instead of the club where the score was played at.
- Mod: WHSAPI: attempt to get dev WHSAPI to stop logging stats to prod vortex
- Mod: ClubCMS: iGolf: rEditMemberDetails (continuation of previous commit): rename TypeId to EmailSubscriptionTypeId
- Fix: Shared: Build: newly added Autofac stuff wasnt being resolved and crashed at runtime.
- Add: Core: first move of DotGolf.Data classes to DotGolf.Data.Core! UNTESTED. Testing ClubItem.cs and Item.cs to see if our DI magic actually works
- Mod: ClubCMS: iGolf: Email Communication preferences (forgot to include in the previous commit)
- Mod: ClubCMS: iGolf: Email Communication preferences
- DFH+MSK: In ISVAPI the --generate-swagger-conf build step fails unless you have proper AWS credentials set up.
- Mod: API: Digital Scorecard: /list-submitted-scorecards endpoint - Return flag to indicate that a submitted scorecard can be edited.
- Mod: ClubCMS: iGolf: rEditMemberDetails.ascx: label updates; use localisation for the Region field label
- Mod: Org: added Memberdashboard.aspx import of config namespace
- Mod: ScheduledTasks: slightly randomise the time score+course sync runs, so we dont hammer WHS simultaneously
- Mod: ReverseProxy: sites.list: added -,-,1,1,taitapu.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added taitapu.cw.golf.co.nz
- Fix: API: Digital Scorecard: /list-submitted-scorecards endpoint - The attester name property is not set in the response.
- Fix: Live: Build, from previous commit
- Mod: Shared: move NullIf to Core extensions so ISVAPI can use it
- Mod: API: Digital Scorecard: Score attestation - Allow players to send the reminder (to the attester to verify the score) via the app.
- Mod: ISVAPI: simple usings (ClubMembersController)
- Mod: Bulk Email: Additional tools: - Full width text (no margins) - Image (1000px height) - Image (Any height) - 600px width, variable height - Adjustable spacer
- Mod: ClubCMS: Member Signup css: field label: capitalise first letter of first word (localised word for district was showing in small letters)
- Mod: NewZealand profile: localisation: rename district[s] to region[s]
- Mod: ClubCMS: rMyAccountPaymentConfirmation:
- Mod: ClubCMS: rMyAccountPaymentConfirmation: payment confirmation email: email address from: use accounts email (which should always be present for clubs with subs), otherwise, use the club's generic contact email
- Mod: ClubCMS: rMemberSignupV2: removed hardcoded Flexiclub Club ID; added code that generates random first and last names when testing
- Mod: Org: MOAR simple usings (BMU)
- Mod: Org: BMU uses <samp> tag instead of <tt> tag
- Mod: #38517 deceased members are now indicated as such on the Members Resigned report.  They are also (in lieu of a proper group header) listed at the top of the report.  This report should really be upgraded to ExtQuery.
- Fix: Live: Useraccounts SubNavBar link was broken
- Mod: Org: BMU: wales and ireland have same functionality as eng to move between courses as requested by DGI
- Fix: API: ScorecardController: Casual golfers - allow create digital scorecard only if there is a valid activation code.
- Fix: API: ScorecardController: We should only allow a casual golfer to create a scorecard if they have a digital scorecard activation code.
- Fix: API: ScorecardController: Allow casual golfers to select markers. Fix: API: ScorecardController: Allow casual golfers to create a digital scorecard.
- Fix: API: DigitalScorecard: Allow casual golfers to submit a scorecard.
- Fix: Live/Org: When editing an international scores, could change the date back by 1 day, then hit save, and the score would still save, but the NZCRDataID would be wiped
- Mod: API: MyGolfController: /profile endpoint - Display casual golfer's member number in the app.
- Fix: API: UserController: Return an empty list of clubs instead of null to prevent mobile apps from crashing because of ORNS. Fix API: MyGolfController: /search-for-friends endpoint throws a "Nullable object must have a value" exception when doing a search via the app while logged in as a casual golfer.
- Fix: WHSAPI: typo that would cause ORNS to be thrown if countryuid is not found for international score
- Mod: API: AuthController: Allow casual golfers access to the MyGolf app.
- Fix: Org: Tournaments: Fix #38524 - After submitting tournament scores for handicapping, the Live scoring widget is still displaying the option "Submit Scores for Handicapping" because we did not exclude non-affiliate and non-eligible scores.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: payment confirmation email's from email address: use the club email address as we do for the signup email (if none, use the default no-reply email address)
- Mod: ClubCMS: iGolf: rMyAccountPaymentConfirmation: payment confirmation email: use the Setting table (EmailAdditionalMessage) to store the additional email message
- Reverse Merged revision(s) 45097 from Trunk/DotGolf.ISVAPI: Mod: ISVAPI; rate limit: "per ISV credential" ........
- Mod: ClubCMS: iGolf: add footer message to the welcome email; use the Setting table (EmailAdditionalMessage) to store the additional message
- Mod: org: Tournament: Timing Sheet: Moved the report definitions from adweb to file. Added a success message when updating the hole by hole tournament time.
- Fix: IVSAPI: member number in use error should not return HTTP 500
- fix: live: inbox back, gbi was sad about not seeing it
- Mod: ClubCMS: iGolf: rMemberSignupConfirmationV2: add new setting "MemberWelcomeEmailFilename" and use this to assign the welcome email to use for a club. (If this setting isn't set for a club, we use the generic welcome email template.)
- Fix: Live: handicapping reports were not accessible to readonly user despite being visible
- *** DFH CODE REVIEWED TO HERE *** Fix: Digital Scorecard - Do not send the e-mail notification (for attesting a score) if we don't have a valid club email address. Also, use the generic e-mail address instead.
- Mod: ClubCMS: iGolf: rMemberSignupV2: add css class names to elements that will be hidden/modified for iGolf
- Fix: Live: readonly member user role should allow person to see+access member tab. Hide interclub messages from everyone except admins.
- Fix: Live: hide course status permission unless someone have clubwebsite
- Mod: ClubCMS: iGolf: rMemberSignupV2 and rMemberSignupConfirmationV2: localised currency symbol
- Mod: ClubCMS: iGolf: rMemberSignupV2 and rMemberSignupConfirmationV2: localised currency symbol
- Mod: ISVAPI: simple usings in ScoresController
- Fix: ISVAPI: england golf association endpoints were paging incorrectly if the query picked up a member from another association
- Mod: ClubCMS: rMemberSignupV2: rename Membership Fee to Subscription Fee
- Mod: ClubCMS: iGolf: rMemberSignupV2: changes to allow hiding/showing of the membership category dropdown
- Mod: ClubCMS: iGolf: rMemberSignupV2: Payment summary section: add css class names so we can hide/show the Transaction Fee line
- Mod: ClubCMS: iGolf: Windcave MC Visa image update
- Mod: API: MessagesController: #code-review - Use full governing body name instead of the short one.
- Cleanup: Removed unnecessarily injected dependencies.
- Mod: ClubCMS: iGolf: localise the previous x-digit club membership number label
- Mod: Live: Navigation: Removed original navigation code.
- Mod: Casual Golf Admin: Navigation - changed to clubhouse-navigation-products.html to be the same as Live.
- Fix: Live: Frozen and Withdrawn Handicaps report title standardised between live/org
- Mod: ISVAPI: members tests code style changes
- Mod: ISVAPI: memberscontroller code style changes
- Mod: Bulk Email: Navigation - changed to clubhouse-navigation-products.html which is the same as Live.
- Fix: The Redis INCR Lua script had a type comparison bug in it which meant that rate limits never expire, so everyone gets 429s after running up to their limit. Mod: ISVAPI Rate Limiting: Removed the SHA-1 hashing from our redis keys, we don't need that and it makes the Redis console hard to look at. Mod: Do not compile in support for MemoryCache since we run all our unit tests against Redis too. Add: Rate limit unit tests for ISVAPI.
- Mod: Analytics: Navigation - changed to clubhouse-navigation-products.html which is the same as Live.
- Mod: Activity Tracker: Navigation: Changed to clubhouse-navigation-products.html which is the same as Live.
- Mod: ClubCMS: GolfNZ: Recent comments: Added link to the score.
- Fix: Org:
- Fix: Org: member score count when they had prev nonaffiliate scores
- Mod: ISVAPI; rate limit: "per ISV credential"
- Mod: ClubCMS: iGolf: rMemberSignupV2: make the default Country selection dynamic (from profile); add new control property to enable/disable the Country dropdown (false by default)
- Mod: ClubCMS: iGolf: rMemberSignupV2: field label update
- Mod: ClubCMS: iGolf: rMemberSignupV2: label updates; use localised language for District/County
- Mod: ClubCMS: iGolf: rMemberSignupV2: allow hiding of Emergency Contact fields
- Fix: Live/Org: Score intents - Display message only when there is a scorecard linked to the score intent.
- Fix: ISVAPI: dont block score posts because tournament has expired - #5001408 IG missed send date for tournament scores 7/4 for Sussex ladies at Cottesmore GC, now credentials closed – can we re-open their ability to post?
- Fix: Live: members readonly role is now available #5001238
- Fix: Adweb: Build
- Fix: Live: Tee booking popup: In a smaller resolution screen (1366x768), the bottom part of the popup is cut off.
- Mod: Live: now see support users in the user page, but can't edit them unless you're matt
- Fix: golf.co.nz: nonaffiliates could not reset Passwords
- Fix: Live: carts could not be paid for by house account at kiosk, BUT the cart $$ amount showed up in the total-to-pay at the kiosk
- Mod: ClubCMS: rMemberSignupV2: text update
- Mod: ClubCMS: rMemberSignupV2: allow updating of the Member Details section heading (fixes for the previous commit)
- Mod: ClubCMS: rMemberSignupV2: allow updating of the Member Details section heading
- Mod: UnionAPI: Add retryafter header to UnionAPI when rate limit hit
- Mod: ISVAPI: Add retryafter header to ISVAPI when rate limit hit
- Mod: #score-entry-app: England and Wales - Scores submitted thru the app are now considered for handicapping.
- Mod: ClubCMS: sql: CWControlProperty insert for rMemberSignupv2
- Mod: Org: Navigation: Changed to clubhouse-navigation-products.html which is the same as Live.
- Mod: UnionAPI: update with latest changes from ISVAPI around rate limiting
- #aspnetcoreratelimit We now use IRedisConnectionBuilder directly so that the default database ID is set properly.  I had to expose GetMultiplexer() on this class which didn't feel great, but we need to have an IConnectionMultiplexer to keep AspNetCoreRateLimit happy (or modify the latter to use IRedisConnectionBuilder directly, which I'm not keen on right now).
- #aspnetcoreratelimit AspNetCoreRateLimit: Removed dodgy looking SourceLink package.
- #aspnetcoreratelimit Mod: We now use our own AspNetCoreRateLimit project externed from /Shared.
- #aspnetcoreratelimit ignored something
- #aspnetcoreratelimit Add: Pilfered some source code from https://github.com/statusas/AspNetCoreRateLimit/tree/atomic-lua/src/AspNetCoreRateLimit/Store so that we can have a stable rate limiting plugin for ASP.Net Core.
- Add: Live/Org: Score Intents: Delete scorecard whenever a score intent (linked to it) is deleted.
- Mod: Org: Inline the nav control data so that we don't have to do another webservice call to get it while the user waits.  This mod was ported from the Live code, but Org appears to use a different version of the nav html (clubhouse-navigation.html rather than clubhouse-navigation-products.html).  Marco has DG-3346 to address the latter issue.
- Mod: ClubCMS: Tournament List: we now show multiple action buttons at the same time (it used to be just one button e.g. Register Now or Details or Draw); improved the text layout, make it usable on mobile
- Fix: API unit tests: teardown method threw an exception, so decided to remove all the where clauses so it gets rid of everything.  We don't run these tests in parallel so that shouldn't matter.  Shouldn't.  Maybe.
- Mod: Live: remove commenteded code from TabMembers
- Mod: Live: Courses page respects coursesReadonly role (sledgehammer) - course changes are hidden completely
- Fix: Defined GoverningBody language for unit test profile because unit tests need it.
- Fix: Crashbug when trying to write to DebugLog while running unit tests.
- Mod: WHSAPI: attempt to make course sync faster by using OPTION RECOMPILE! >:)
- Fix: ClubCMS: GolfNZ: The eclectic user links are not working because of missing ids.
- Mod: WHSAPI: attempt to make course sync faster by not calling the database so many times
- Mod: Tasks: Update CronSchedule on getscoresfromWHS to be 20m past the hour to see what happens to WHS
- Fix: InsertBasicData.sql corrected to stop inserting duplicate PaymentType rows.
- Fix: ClubCMS: GolfNZ: Revert previous change - [45039] The competition round dates are incorrect for some tournaments because we need to consider competition round segments like in org.
- Fix: ClubCMS: GolfNZ: Tournaments: The competition round dates are incorrect for some tournaments because we need to consider competition round segments like in org.
- Mod: API: ScorecardController: Club proximity check is back for ENG and WAL.
- Mod: Results: Code style changes
- Mod: Kiosk: code style changes, remove commented code
- Mod: simple usings in PDFRenderer
- Mod: API: ScorecardController: Disable club proximity check when creating a scorecard. I will enable this setting back when we go live for the GB&I apps.
- Mod: ConnectionLeakWatcher code style changes to avoid Visual Studio squiggles
- Fix: Org: course changes emails should be from no-reply@golf.co.nz not dotgolf i.e. helpdesk #38410
- Mod: ReverseProxy: sites.list: added S,W,0,1,waimairibeach.co.nz
- Mod: ClubCMS: bindings.list: added waimairibeach.co.nz
- Add: Live: InterclubTeamMembers report now includes Event Name parameter #5001276
- Fix: ClubCMS: GolfNZ: Eclectic detail has an error because of uncaught null values. https://dotgolf.freshdesk.com/a/tickets/38383
- Fix: Live: InterclubTeamMembers report was not filtering out adjustments made before jan 1st #5001330
- Mod: Regen ISVAPI.g.cs
- Mod: remove useless comment
- Mod: ClubCMS: rMemberSignupConfirmationV2: allow setting of custom success message (to be displayed after a successful signup and payment)
- Mod: ClubCMS: GolfNZ: Changed the default image background of the event list. https://dotgolf.freshdesk.com/a/tickets/37895
- Mod: DataCache: There can be semaphore collisions between different processes on the same machine (when using the same cache key), so we now prepend a guid to make these unique.
- Add: Load balancing warning.
- Mod: ClubCMS: rMyAccount: My outstanding invoices section: added css class name so we can easily hide/show the Payment Schedule column
- Mod: ClubCMS: rMyAccount: add a placeholder for a page footer message (with a default "contact us" message if it's not set)
- Mod: ClubCMS: rMyAccount.ascx: code indention
- Mod: ClubCMS: rMyAccount: payment summary section: updated item name
- Mod: ClubCMS: rMyAccount: payment summary section: updated item name
- Mod: ClubCMS: rMyAccount: added css classes (to be used to hide/show the elements)
- Mod: ClubCMS: rMyAccount: replace hardcoded dollar signs with AXCurrency.DefaultCurrency.Symbol
- Mod: ClubCMS: rMyAccount: GetPaymentsByMember: get the 15 latest payments, and remove the date filter from the query (the date query will prevent annual-paying members from seeing their last payment)
- Mod: ClubCMS: rMyAccount.ascx: text update
- Mod: ClubCMS: rMyAccount: replace hardcoded dollar sign with AXCurrency.DefaultCurrency
- Mod: ClubCMS: rMyAccount: replace hardcoded dollar signs with AXCurrency.DefaultCurrency.Symbol
- Mod: ClubCMS: removed EmailTemplates\Receipt.html (this has been replaced by SubsPaymentConfirmation.txt, which is in the Shared code)
- Mod: ClubCMS: rMemberSignupConfirmationV2: payment confirmation email updates
- Mod: TBTransactionProcessor: SubscriptionRenewal: payment confirmation email: include the club name in the description column
- Mod: ClubCMS: rMyAccountPaymentConfirmation: payment confirmation email: include the club name in the description; adjust table column widths
- Fix: Core: column names of data loaded in DataObjects should be case insensitive, because SQL is case insensitive. No point loading CompetitionId from the database when we've already loaded CompetitionID.
- Fix: Shared: column names of data loaded in DataObjects should be case insensitive, because SQL is case insensitive. No point loading CompetitionId from the database when we've already loaded CompetitionID.
- Mod: TBTransansactionProcessro: SubscriptionRenewal: add the custom message for the payment confirmation email
- Mod: ClubCMS: GofNZ: Leaderboard: Reverted the back 9 thru scoring. Already handled in the api.
- Fix: Org: Mobile live scoring: The text input index is messed up when hole assignments are changed.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: added new control property, EmailFooterMessage, which allows the club to add a custom message to the payment confirmation email
- Mod: The "Thru" column has always been incorrect; if you have played 3 holes so far and started on the 10th, it's Thru 3*, not Thru 12*.
- Mod: Org: Tournaments: Added draw timing sheet.
- Mod: Adweb: show markerUID in course details to help DGI debug ISV issues with markeruids
- Mod: Org: Draw timing sheet: Added a new column for tournament hole by hole play time.
- Mod: ClubCMS: CWControlProperty inserts: revert previous mod
- Mod: ClubCMS: rMyAccountPaymentConfirmation: continuation of the previous mod -- derive the Club ID from TxnData2
- Fix: Very old javascript calculation bug that caused issues if you tried to put division splits in (range validation did not work correctly when there are multiple genders)
- Mod: ClubCMS: GolfNZ: Leaderboard: Display number of holes played instead of the hole/tee number.
- Fix: Live: handicap report has not showing people with home clubs in other unions (null clubNo)
- Fix: Live: when creating a new member and their number is in use, error message no longer implies the person is 'active' - in GB&I no-one can reuse anyones number
- Mod: ClubCMS: rMemberSignupConfirmationV2 and rAccountPaymentConfirmation: Payment Confirmation Email: use the template from Shared
- Mod: ClubCMS: GolfNZ: Made the home page banner taller.
- Mod: Org: BulkMarkerUpdate now affects non-imported scores and can be used to update scores to the same marker to fix issues where a scores a wrong or deleted nzcrdataId
- Fix: Org: user creation bugs
- Fix: API: ScorecardController: Fix https://dotgolf.atlassian.net/browse/DG-3303
- Mod: TBTransactionProcessor: SubscriptionRenewal: use an external txt file for the payment confirmation email template
- Mod: Removed unnecessary locking; we are only queueing the product update now, so no need to lock this up.
- Mod: Vend product update code now uses a redis based queue (same way Kounta does it).  This should allow us to manage the 4000+ calls per minute that Vend occasionally tries to lob our way.
- Mod: ClubCMS: rMemberSignupConfirmationV2: Payment Confirmation Email: make the heading text and the email subject configurable
- Fix: ISVAPI: docstring typos
- Fix: API: ScorecardController: /get-player-info endpoint - SQL timeout exception occurs when adding a guest player. Fix: API: ScorecardController: /list-markers endpoint - Return full course name.
- Mod: Slicer: CreatePayment: for Futures Auckland Comp Reg, apply the same DotGolf / merchant fee as the other virtual clubs (Nomads, KGC)
- Fix: live_ReadClubMessageBox backwards compatibility to ease the publish process.
- Fix: Do not show levies notifications in inter club messaging if the territory does not have levies enabled.
- Mod: Core: regen ISVAPIClient.g.cs
- Fix: API: DEV and Staging environments - Disable check to determine if the user has had at least 1 score card printed in the last hour
- Fix: ISVAPI: Update stackexchage redis and use IOptions patter to setup Redis instead of BuildServiceProvider. Same with SwaggerGenOptions. HOPEFULLY FIXES RATELIMITER CRASHES IN GBI PROD
- Fix: ISVAPI: move HomeClub back into Clubs array when returning members and removed HomeClub property. Email:
- Mod: UnionAPI: IConfigureOptions should be singleton not transient
- Fix: API: #qr-code-payments: Fix /list-submitted-scorecards endpoint - Limit results to 2 months.
- Fix: API: #qr-code-payments: Fix /load-active-scorecards endpoint - Do not filter active scorecard by Request.ClubId.
- Mod: API: #qr-code-payments - Enable QR code payments in the MyGolf app.
- Fix: Org: Users: Correct readonly behaviour for: Update club, DOB, member tab, View Scoring History, Print Handicap Cert, Reset password, Report list
- Mod: TBTransactionProcessor: SubscriptionRenewal: email subject update
- Fix: ClubCMS: #qr-code-payments - Digital scorecard activation number is not displayed if you reload the confirmation page or when the link is opened in another browser.
- Fix: Org: when creating users needed to set associationid on passport
- Add: Org: Readonly roles to user creation process. Fix: New roles save/load correctly
- Fix: Org: Build
- Fix: Live: sick of errors when I log out of sites that I logged into in debugmode, because it tries to use the dead localhost logout page.
- Fix: Org: sick of errors when I log out of sites that I logged into in debugmode, because it tries to use the dead localhost logout page.
- Fix: ActivityTracker: remove Shared folder from csproj by default because everytime we add a new webforms page into shared the ActivityTracker build breaks. Shared files should be opt-in for activitytracker, not opt-out
- Add: Org: Add useradmin UI and new style settings for matt users everywhere.
- Mod: Live/Org: Move Users+UserAdmin to Shared so I can use it in Org next commit
- Mod: ClubCMS: rMyAccount: text updates (e.g. automatic renewals message)
- Mod: Org/Live: OTP login code works everywhere now by default
- Mod: Live: useradmin - remove unused AU check
- Mod: Passport.cs: simple 'using's
- Fix: ClubCMS: 'Registration successful' screen: changed FROM: 'You may now login to My Golf' to: 'You may now login to My England Golf' #5001306
- Mod: Org: settings xml loader can handle orgs now (preparation for useradmin port to org)
- Mod: ClubCMS: rMyAccount: text updates; fix display/hiding of action buttons
- Fix: Live: NG Settings in GBI were showing references to 'DotGolf Live'
- Mod: ClubCMS: rMyAccount: minor text updates (based on the new comments from Claire)
- Mod: ClubCMS: rMyAccount: minor text update (based on the new comment from Claire)
- Fix: API: Score Entry: Score submission time not converted to the club region's time zone.
- Mod: Org: nicer dotgolf only styling to match Live
- Mod: Org: replace dotgolf-only.png with new dotgolf logo
- Mod: Org: replace dotgolf-only.png with new dotgolf logo
- Fix: Adweb: BulkCreateISVCredentials was not removing endbrackets from club name
- Fix: TBTransactionProcessor: since the 29th, we've been getting this error logged by the TBTransactionProcessor: "ServiceLocator.Default was not set." It has an effect to subs instalment payments (i.e. the email report doesn't show the successful payments) and flexiclub renewals (i.e. payment record creation)
- Fix: Org: restore caching of reports in member dashboard
- Mod: ScheduledTasks: More frequent polling of WHS for scores from other unions entered for our members (every second hour)
- Fix: Live: Handicap certificate report now works for people with zero scores (and 3 artificial score diffs)
- Mod: Shared: simple usings in Report.cs
- Mod: Core: pedantic code style changes to security.cs
- Mod: Org: can see whether a marker is eligible for handicapping from the View Live courses changes page
- Fix: Org: increase Club region field to varchar 50 because causing errors when creating club #5001275
- Fix: ClubCMS: GolfNZ: Tournaments: When player starts at 10th tee, the scores are not displaying properly.
- Mod: ClubCMS: rMemberSignupV2: added new control property: MembershipAndPaymentSectionLabel
- Mod: Live: Less aggressive thread sleeps during kounta member sync to help avoid signalr timeouts
- Fix: Add NG product for all clubs in GB&I, they should have had it from the start
- Fix: Live: More accurate description of the scores permission in user admin page
- Mod: Org: simple usings in Add Course Change page
- Mod: Org: Course changes: new course change marker select shows 'ongoing' instead of 'present'
- Fix: Org: Add NG product when creating new clubs
- Mod: Org: simple 'using' in create club page to reduce indentation
- 
- Mod: Org: replace a use of #IF DEBUG with Conditional["DEBUG"] attribute instead because it's a bit cleaner
- Fix: Roles: We give the Settings role to union support users by default since that appears to be what we did for GBI.
- Fix: Live: Hide reports panel in member page is user doesnt have access to reports
- Mod: SSO: remove commented test code
- Fix: Live: Kounta member sync signalR crashed an I have no idea why so I'm just adding a retry.
- Mod: Live: Remove a lot of AU stuff
- Fix: ClubCMS: GolfNZ: Returning and passing scorecode to the public score view.
- Fix: ClubCMS: GolfNZ: Nonaffiliate score and tournament list fixes.
- Fix: Live: show warning in reports page if there are no reports the user has access to. Mod: Live: Replace confusing ReportHandicapping and ReportMembers Roles with equivalent combinations. Fix: Live: People without Member permissions no longer see member tab - previously they would see it, then get an error when clicking it.
- Fix: Live: (NEEDS REV 44845) Users without Scores permission should not be able to edit scores or delete intents
- Mod: Shared: removed unused assetgroup CoursesReadonly
- Fix: Org: sick of errors when I log out of sites that I logged into in debugmode, because it tries to use the dead localhost logout page.
- Fix: Live: sick of errors when I log out of sites that I logged into in debugmode, because it tries to use the dead localhost logout page.
- Mod: ISVAPI: typo
- Fix: ISVAPI: better error thrown when duplicate credentials detected #5001292
- Mod: ClubCMS: rMyAccount: added EnableClubSelector control property; removed hardcoded association ID 1000 in the old condition for showing/hiding the club selector before
- Mod: ClubCMS: rMyAccount: added EnableManageTournamentBillingCard control property - this will control whether or not to show the tournament billing card; removed the hardcoded club ID and association ID used to hide/show the tournament billing card before
- Mod: ClubCMS: GolfNZ: Changed the non affiliate text in the tournament registration.
- Fix: Prize Templates: Reverting mod rev 44625. Fix #38216 part 2 - Special prize type not working due to Knockout binding errors.
- Cleanup: Removed some stuff I think we don't need anymore.
- Fix: ClubCMS: GolfNZ: Ticket 37993: Handled when club is null for NA.
- Mod: We now use Configuration/Security.cs to determine the list of roles that should be given to new club admins, support users and `matt` for the areas where UserSecurity rows are inserted.
- Mod: ClubCMS: rMyAccount: removed last hardcoded Flexiclub Club ID.
- Fix: Turns out we can't void payments in bulk (the old Xero api wrapper was faking it by looping internally, which explains why it was so daaaaamn slow).  Had to go back to doing it one-by-one; we'll have to come back here and introduce a background job to do it properly.
- Mod: sql: ScoresEdit role should be a child of Scores because anyone with full Scores access can edit Scores too
- Add: Common code for figuring out which default roles should be given to users when they are created (in Live or Org, for clubs, unions or the matt user)
- Mod: ClubCMS: rMyAccount: removed unnecessary hardcoded Flexiclub Club ID
- Mod: ClubCMS: rMyAccount: removed unnecessary hardcoded Flexiclub Club ID
- Mod: ClubCMS: rMyAccount: removed unnecessary condition which uses a hardcoded Flexiclub Club ID
- Mod: Org: Mobile Live Scoring: Changed the score input border colour when saved.
- Add: Swipecard settings for Waitemata.
- Add: ClubCMS: rMyAccount: added the new Windcave logo; updated some text
- Mod: Shared: Settings.Membership.cs: added EnableAutomaticRenewals, and removed the obsolete setting, "EnableJoiningFee" (this was previously used by Flexiclub; but now, enabling/disabling of joining fee is done through DG Live > Categories > manage line items)
- Fix: ClubCMS: dev: Web.config updated httpruntime to match prod
- Mod: ClubCMS: people who have invalid email now see the No Email on record message
- Mod: ClubCms: no more blocking potential in GetMemberTxtRegistration
- Fix: PrizeTemplates: Fix #38216 - Unable to load prize template because of Competition.Entries is always null.
- Mod: Org: Mobile Scoring: UI updates based on Dave and David's feedback.
- Mod: ClubCMS: rMyAccount: add new property: EnableChangeMembership
- Fix: Public: Members with an 'email' without an @ saw a weird "Index was outside the bounds of the array." error instead of one saying their email was invalid
- Mod: ClubCMS: rMyAccount: little code tidy up
- Fix: Don't mess with the first entry in bindings.stage.list - it is used as the site name and cannot be changed.
- Fix: UFP Gateway token wasn't including the club id, leading to ORNS errors when you scan the code.
- Mod: ClubCMS: rMyAccount: styling changes/fixes (apply bootstrap utility classes); show message after successful reactivation of membership (removed in the previous commit)
- Mod/Fix: ClubCMS: rMyAccount: fix for the previous mod--correctly hide/show the action buttons. Also fixed the positioning of Cancel Membership and Change Membership buttons.
- Mod: Added stage.golf.co.nz to ClubCMS bindings.stage.list.
- Mod: We can now force nginx to purge a URL out of the cache (for our static content sites) by requesting the URL once with the header "X-Recache" on the request.
- Mod: ClubCMS: rMyAccount: Membership Category label update Mod: add EnableChangeMembership property (used to hide / show the Change Membership button); update message display right after updating the renewal membership category Fix: get IsTransactionFeeInclusive value correctly/properly Fix: hide cbAccount control (and the AX panel) if there's no account(s) available (scenario which happened in dev for Akarana)
- Mod: API: Golf Ireland - Enable API as part of go-live preparation.
- Fix: ISVAPI could not start up after .Net Core 3.1 upgrade because of a CORS security check (have to have origins if you want to allow credentials).
- Fix: SSO: can log in as deleted test clubs
- Fix: Org: Mobile Live Scoring: Added loaded checking to fix firing sequence issue.
- Mod: ISVAPI: NOT INPROCESS HOSTING PLEASE #5001277 (this wasnt actually the cause of the issue - it was the CORS in EN stage)
- Mod: Live: UNF report hidden in IE
- Fix: ClubCMS: Account top-up: Fix #38082 - Do not set TBTransaction.NonAffiliateId column when we already have an active member record.
- Fix: ISVAPI: crm api get members associationId filtering not working properly so just going to leave it alone til i've fixed it
- Add: bindings.stage.list for ISVAPI
- Fix: Finally cracked creating the scheduled task on older crappier powershell versions.
- Fix: AAAAAAAAAAAAARGH
- Fix: Casualgolf: add netstandard reference in Web.config
- Fix: Can't use TimeSpan.MaxValue here due to different windows versions on deployed boxes.
- Fix: RepetitionDuration is required when setting up a service.
- Add: package-deploy.ps1 file for ConnectorAPI
- Fix: Live: Kiosk: Fix #38201 - Secondary members unable to get a scorecard from the Kiosk when using their home club membership number. ClubMember.Create method was not working as expected because it was missing the SQL JOIN clause "Cmember.MemberId=Member.MemberId".
- Mod: Cleaned up the bindings.stage.list file for ClubCMS.  I'm not even sure which of these sites are even used; suspect we'll dump the lot.
- Add: package-deploy.ps1 file for Casual Golf API
- Add: Signalr subdomains
- Fix: ISVAPI: name+handicap were not being returned from union API
- Add: bindings.stage.list for SSO
- Add: bindings.stage.list for Org
- Add: bindings.stage.list for Live
- Add: bindings.stage.list for ConnectorAPI
- Add: bindings.stage.list for Images
- Add: bindings.stage.list for ClubCMS
- Add: bindings.stage.list for Casual Golf API
- Add: bindings.stage.list for BulkEmail
- Add: bindings.stage.list for API
- Mod: Org: Live Scoring: Removed hole score computation.
- Mod: API: fix build + kounta redeem/Default.ashx.cs httphandler is async now
- Mod: API: dont need redis in kounta Giftcard balance handler
- Mod: API: kounta LoyaltyActions/Default.ashx.cs httphandler is async now
- Fix: API: asynchelper.runsynchronously instead of .result in teebookinghelper SearchUnattendedGreenFeePaymentClubs
- Mod: Org: Live Scoring: Code cleanup.
- Fix: API: kounta loyalty redemption
- Fix: Async deadlock in API (for Kounta/LoyaltyActions)
- Mod: Org: Live Scoring: Entering of scores is now working.
- Fix: API: Messages: MyGolf - Set GoverningBodyShortName (e.g. Golf NZ, England Golf) as default sender name.
- Fix: Some ISVAPI CI/CD stuff was broken after the dotnetcore3.1 upgrade.
- Mod: Performance improvements in ExceptionLog_FIFO trigger to reduce locking while the system is trying to log thousands of exceptions at the same time.
- Mod: Drop ExceptionLogDeleted table and associated trigger.
- Mod: Drop [dbo].[EmailTaggedException] trigger, it was a silly trigger.
- Fix: Do not log an exception on connection leaks - just send an email to David.
- Added Web.config.Production to the csproj
- Fix: Web.config.Production in ConnectorAPI - binding redirect fix.
- FIX: BUILD: revert commit of shame (configurationprofilerresolver.debug.cs)
- Fix: Analytics: was referencing API.aspx in dotgolf API, which no longer exists.
- Mod: Reverse Proxy: added S,W,0,1,queenstowngolf.co.nz
- Mod: Shared: Reverted (BREAKS analytics build) deleted old GetMenuItems code in the dubious 'utils.cs' since Core Navigation.cs does this now.
- Mod: Shared: (BREAKS analytics build) deleted old GetMenuItems code in the dubious 'utils.cs' since Core Navigation.cs does this now.
- Fix: Live: Navigation: Tee Booking popup top section is cut because of navigation.
- Fix: Moar web.config netstandards.
- Fix: API: web.config     <httpRuntime targetFramework="4.7.2" /> to fix slow score listing calls -> https://stackexchange.github.io/StackExchange.Redis/ThreadTheft
- Mod: Org: Live scoring: Leaderboard UI updates.
- Mod: ClubCMS: Independent Golfer: add new control property IsUseNZGreenFeeData (true by default; but for IG, this will set be false)
- Fix: Web.config.Production had old crud in the <assemblies> element; made it the same as web.config.
- Fix: Well okay fine we need it.
- Fix: Removed crappy old System.Web.Extensions reference, don't think we need this anymore?
- Fix: System.Threading.Tasks.Extensions binding issues.
- Fix: Need SessionStateModuleAsync in web.config for Redis session state to work.
- Fix: ClubCMS: UFavouritesIcon: handle null IconURL
- Fix: API: we were releasing Redis lock in score listing before we were finished processing our AsyncEnumerable of scores - causing large timeouts in API when trying to load score listing + graph concurrently
- Fix: Need SessionStateModuleAsync in web.config for Redis session state to work.
- Add: bindings.stage.list for Activity Tracker in stage.
- Mod: Shared: Scorelisting: remove AsParallel from the member scores Redis query to see what happens to the long duration of this call in stage
- Fix: live: better null checking in whs scores page
- Fix jenkins build
- Fix: API: build. KLY+MSK After making HashGet into HashGetAsync the try prevent redis crash, had to use AsyncEnumerable to fix it.
- Mod: API: #score-entry-app: Add club name in the response.
- Mod: Org: Initial commit of live scoring enhancements.
- Mod: ClubCMS: rMemberSignupV2.ascx: "how did you hear" css fix
- Fix: API: Member.GetWHSScoreListing: Mods to use the "async" methods to prevent Redis timeouts. Sample exception: "Timeout performing HEXISTS (5000ms), active: SET whs-scores-for-memberId-646518-lock".
- Mod: ClubCMS: rMemberSignupV2:
- Mod: ClubCMS: rMemberSignupV2.ascx: added css class name to the category form group
- Fix: ClubCMS: rMemberSignupV2.ascx: fixed markup of Ethinicity field
- Mod: ClubCMS: rMemberSignupConfirmationV2.ascx: added css class name to the payment method form group (used to rename the control label when there's only one payment method option available)
- Mod: Org: deleted CourseDetailCapturePage (TabCourseDetailCapture.aspx). no longer needed
- Fix: API: #mygolf-score-entry: Do not allow digital scorecard to be created if we don't have the club's coordinates.
- Mod: Org: //Take Live users to live (for now at least).  This will go away once we merge live+org.
- Add: bindings.stage.list for Adweb NZ
- Hack: SSO: doomed attempt to redirect Live users to Live and Org users to Org to stop madness in EG with clubs always logging into Org because it's the only one they see on google and EG put Org in their user doc for clubs -_-
- Reverse Merged revision(s) 44489 from Trunk: Mod: Subs: swap ClubMember references for Cmember for speed ........ Reverse Merged revision(s) 44484 from Trunk: Mod: TabRenewals: swap ClubMember reference for Cmember ........
- Fix: ISVAPI: swagger auth works again after finding the magic ordering of calls in Startup.Configure
- Fix: Org: no longer get booted to the home screen after logging into org, when trying to visit a specific URL
- Fix: Well, apparently you have to have SessionStateModuleAsync registered or RedisSessionStateStore won't chooch.
- ** DFH CODE REVIEWED TO HERE ** Fix: ClubCMS: MyAccount: handle null date setting
- Cleanup: Removed XeroApi.dll from bin directory.
- Mod: #xero-oauth2 Removed more Xero OAuth1.0a stuff and old XeroAPI package.
- Mod: Replaced all "NZ Golf" and "New Zealand Golf" strings in Live with their "Golf NZ" and "Golf New Zealand" counterparts.
- Fix: API: TeeBooking: Fix #38090 - Member was able to book a guest to a "Home Club Members" only slot in the DotGolf app.
- Fix: Live: was trying to get score intents for a club that was not a persons home club and was causing errors across unions.
- Mod: Updated to latest openapi spec from Xero. Fix: Discovered that NSwag was using an old copy of the yaml from the .nswag file; put a stop to that.
- Fix: Slight css tweaks to stop SCA from flying to pieces if you dare touch the zoom settings in Chrome.
- CLEANUP: #xero-oauth2 Removed the Xero OAuth1.0a code since all clubs have now been migrated to OAuth 2.0.
- Fix: Org: handicap freeze/withdrawn report works for counties now #5001210
- Fix: #xero-oauth2 Another little casting bug fixed (caused imports to error out).
- Mod: Adweb NZ is now load balanced. Mod: Enabled load balancing on all the .cw. sites (nz production) since they are test/pre-golive sites.
- Mod: API: Digital Scorecard: NZ profile - Set AllowDigitalScorecardOnlyIfWithinClubProximity to "False" for all environments. Previously, this setting was enabled in DEV and STAGE for testing purposes.
- Fix?: Live: signalr hopefully uses redis now and hopefully works
- Fix?: Adweb: signalr hopefully uses redis now and hopefully works
- Mod: #qr-code-payments Updated the GolfNZ dev url to a bound url so we can easily get to golfnz in dev (and I needed it for the UFP poster printing)
- Fix: Org: member home club name was not displaying correctly in member tab
- Mod: #qr-code-payments Better layout on smaller mobile devices (gave up with divs, gone table on this one) Add: Validation to form fields. Mod: Check for UFP product and prevent using this page if it is absent. Fix: Do not overwrite TBTransaction.CapturedDate if the user happens to reload the confirmation page. Mod: Corrected datetime format in device unique identifier. Fix: Back button didn't work from payment failure screen.
- Add: #qr-code-payments On-boarding page for clubs with the UFP product - they can click on Settings > QR Code Payment Setup, print the rendered page and use it as-is to enable QR code payments at their club.  The only thing DotGolf support has to do is tick the UFP product for the club.
- Add: Index for lookup queries against UnattendedFeePayment.DigitalScorecardActivationCode.
- Fix: IE: cant sign up to mygolf
- Fix: ScheduledTask: #mygolf-score-entry: Score attestation process - Create a new private message if there is no active message linked to the score attestation workflow.
- Mod: #qr-code-payments Minor styling adjustments.
- Add: #qr-code-payments - this is v1 of the payment gateway page.
- Fix: ScheduledTask: #mygolf-score-entry: Course name missing in the notification message.
- Add: Scheduled Task: #mygolf-score-entry: ScoreVerificationReminderTask - Check for scores that have not been verified and send a notification to the attester to complete the score verification.
- Add: Column to track digital scorecard activation codes.
- Mod: Live: Removed unused RSEntries field from PrizeTemplateLine now that winner list is used
- Mod: Live: HEAPS of competition data caching. This was making GetRSScore crazy-slow because it was creating a new marker every time segment.Marker got called (72 times).
- Fix: ClubCMS: IE: Member search mobile view is showing even if showMemberSearchInMenu is false.
- Fix: Core: Convert string to uppercase before trying to convert it to the gender enum
- Fix: API: #mygolf-score-entry: Attestation process - Should not allow users to be the attester of their own scores.
- Fix: Live: WORKS THIS TIME: opening nonaffiliate competition scorecard from SIC would not load the member, scorecard could not be edited. Worked fine when opening in SIC by scorecard number/id.
- Fix: ClubCMS: rEventRegistration: proceed to checkout only if there's an amount to be paid
- Mod: API: #mygolf-score-entry: Score attestation process - Add LastReminderSent.
- Fix: Live/org: Can delete score intents again
- Fix: Public2012: targets C# 9 now
- Mod: Live/Org: Score.EnteredByAdjustedGross property is redundant now - can use HoleScores.Any()
- Fix: Live/Org: display entirely pending scores correctly when viewing them in SIC (related to #5001233)
- Mod: ISVAPI: added tests for empty scores - they should not be valid. some simple 'using's also
- Mod: #qr-code-payments Refactored UFP green fee selection query to be in DotGolf.Shared so I can use it for QR code payments.
- Mod: WHSAPI: add simple 'using's to MinimumNoOfHoles test
- Fix: Org: UnsatisfiedScoreIntents report filtering was not working for counties
- Fix: Reports: HandicapChangeReport/HandicapReviewReport/UnsatisfiedScoreIntents reports filter out clubs with no members and regions with no clubs
- Mod: Core: minor namespace reference changes. Add DapperExtensions as backwards compat hack so Core.Data can fake datasets
- Mod: Extensions: move base64Encode to StringExtensions
- Fix: Org: UnsatisfiedScoreIntents sql error. HandicapReviewReport county fix
- Mod: Live: remove commented code from exception page
- Fix: Org: remove reference to DotGolf support in exceptionpage
- Fix: Org: UnsatisfiedScoreIntents report filters by Region now.
- Mod: Navigation: removed NavRoleList and replaced it with the old RoleList. Moved RoleList to Core. (start of user roles consolidation for each union)
- Fix: Live: Clubhouse Navigation: Events shouldn't display for EN and WAL.
- Fix: API: was telling user they could not friend someone because they were a junior when it was because the friend did not have a DOB
- Mod: Core: Moved some static NZconfig profile features into the Features object declaration and out of the constructor because they dont depend on Location anymore
- Fix: Org: Handicapchangereport works for region users now
- Fix: Live/Org: build
- Fix: ISVAPI: Can't get the parameters to render to JSON in the order we previously had them - breaking change, but this is as good as we can get it.
- Fix: Live: If WHS thinks a club is someone's home club, that club can now hit Save in the member record and that person's home club will be set correctly in unionland
- Mod: ClubCMS: GolfNZ: Added total par and distance in the club info.
- Reverse Merged revision(s) 44514 from Trunk: (because it broke lots of things) Fix: Live: opening nonaffiliate competition scorecard from SIC would not load the member, scorecard could not be edited. Worked fine when opening in SIC by scorecard number/id. Need to test with teams comps. ........
- Fix: Live: CourseHandicapReport was not filtering by deleted markers #5001146
- Mod: Bulk Email: sql: BEDefaultElements table: added LogoImageUrl, Spacer1ImageUrl, Spacer2ImageUrl
- Mod: Bulk Email: default elements: added LogoImageUrl, Spacer1ImageUrl, Spacer2ImageUrl (configurable for every club or association)
- Fix: #xero-oauth2 OAuth1.0a path still did not send the correct invoice number to Xero, resulting in INV-xxxx invoice numbers instead of our custom ones.
- Fix: Public: Steve trying to reset password in EG but hes home in Wales ORNS #5000955
- Mod: API: Added code in the score's permalink.
- Fix: Live/Org: regenerate ISVAPIClient.g.cs from new swaggerfile and fix changed enum name in memberquicksearch
- Mod: ISVAPI: feeble hacks to get countrycode back as the 1st parameter while my local is refuses to regenerate swagger.g.json
- Fix: ISVAPI: another Manual hack to swagger.g.json until i can fix parameter ordering in an operation filter in the morning
- Fix: ISVAPI: Manual hack to swagger.g.json until i can fix parameter ordering in an operation filter in the morning
- Fix: ISVAPI: body parameters were not being generated with a name. BUILD STILL BROKEN
- Fix: ISVAPI: remove invalid json operation filters caused by SwaggerOperationFilter to fix Core build
- [BREAKING] Mod: ISVAPI upgraded to Core 3.1
- Add: API Tests: System.Buffers assembly redirect.
- Fix: Language suggesting Xero is the only accounting system.
- Mod: Upgraded Moq to latest in an attempt to cure `Could not load file or assembly 'System.Threading.Tasks.Extensions, Version=4.2.0.0` when running unit tests for Live.
- Fix: Bulk Email: replace the sample image URLs with a relative URL (within the project; the images exist already in the content/images folder except for the 600x200 banner which I added now)
- Fix: Make DotGolf API unit test build and run in Jenkins,.
- Fix: AjaxControlToolkit induced Jenkins unhappiness.
- Mod: Bulk Email: sql: add ReadMoreImageUrl column to BEDefaultElements table
- Fix/Mod: Bulk Email: make the Read More Image URL configurable (BEDefaultElements.ReadMoreImageUrl) so the link button could be used by other countries (previously, it's displaying a broken image for Golf Ireland)
- Fix: Xero: Hide archived or deleted ledger accounts; users should not be able to touch these after they have been archived.
- Fix: #xero-oauth2 Prepayments appear to have Payments == null which causes an ORNS.
- Fix: Bug where FindUnallocatedCreditNotesForMember().CreditNoteType would always throw an exception instead of returning the correct code.
- Fix: ClubCMS: GolfNZ: The friend search icon is missing in mobile view.
- Mod: Bulk Email: Golf Ireland: update the Golf Ireland logo URL
- Mod: ClubCMS: GolfNZ: Added revision number to js script.
- Mod: ClubCMS: GolfNZ: Added redirect to the single score view if url contains /p/app-score.
- Cleanup: AjaxControlToolkit.dll now pulled in as a package, deleted from /bin.  Removed rogue AWSSDK.xml.
- Cleanup: Deleted Adweb bin/ directory from Subversion. AjaxControlToolkit.dll is now referenced using Nuget, so we no longer need this in Subversion. Removed SubversionSharp.dll because we don't use this anymore.
- Mod: ClubCMS: GolfNZ: Changed the position of the link to single score view.
- Fix: Proper fix for Setting.cs and DateTime offset parsing messing up the Kind.
- Fix: Forgot to commit sqlproj.
- Fix: #xero-oauth2 Shared doesn't have a Club property in Org.  Probably fair enough...
- Fix: Live: opening nonaffiliate competition scorecard from SIC would not load the member, scorecard could not be edited. Worked fine when opening in SIC by scorecard number/id. Need to test with teams comps.
- Fix: Live: build after removing unused file
- Mod: Shared: Deleted unused RotateImage class for deskewing lines
- Fix: ClubCMS: Casual Golfer signup: Completing the sign up has an error because because of an unhandled null Member.
- Mod: #xero-oauth2: Migrate process didn't update the organisation name in the AccountingSystem table.  Not that we really need it, but it's nice to have for diagnostic purposes.
- Fix: ClubCMS: , should be a ; in signup viewmodel
- Mod: ClubCMS: GolfNZ: - New mobile hole by hole score view - A new page to load a single score
- Fix: WHS handicap sync off-by-1 bug caused by Settings.cs roundtripping not working with UTC datetimes.  This is a duct tape hack to patch up the situation for the weekend; we'll have a look at that .ToDateTime() next week.
- Mod: Live: code style changes to GetScoreV2
- Fix: scheduledtasks: system.buffers to 4.5
- Fix: ClubCMS: members trying to signup to MyGolf getting error when using link in email after entering code #37936
- Fix: ClubCMS: members trying to signup to MyGolf were not able
- Add: Push notifications are now deleted after 1 year.
- Mod: Don't log raw xero invoice/credit note data into DebugLog anymore; this just wastes space.
- Live Scoring: Fix: Don't clobber the gross total column when blurring a row. Fix: Removed random full stop hanging around at the top of the table. Fix: Current Score column "+2 after 10" wasn't calculated correctly at all due to buggered HoleIndexesInPlayOrder() method. Mod: We now automatically tab across (like in final entry) in live mode (because we believe they will be using mobile live scoring rather than this interface when walking with the groups)
- Fix: Adweb: GBI adweb now shows ALL 3rd party competitions in score table if there are multiple
- Mod: Subs: swap ClubMember references for Cmember for speed
- Mod: Org live scoring now shows a gross total once you've entered all 18 scores (in gross hole-by-hole live scoring mode)
- Mod: Remove club logo from bulk printed invoices and statements to reduce bloating of the Attachment table.
- Fix: API: add back Score.cs ByWHSScoreUID
- Mod: TabRenewals: swap ClubMember reference for Cmember
- Mod: Add deleteddate to clubmember view in case poor souls try to use cm.DeletedDate is null in a sql where clause and cm is referencing ClubMember not Cmember
- Mod: Shared: remove hopefully unused methods from Score.cs - FindScoreByCentralMemberCodeAndDate UpdateProjectedHandicapIndex ByScoreUID ByWHSScoreUID
- Fix: Org: unable to find Sunningdale when choosing courses to add for Sunningdale artisans #5001195 Mod: Org: hide 'delete course' message if a club doesnt have any of its own courses
- Fix: Typo
- Fix: Adweb: update nzga_handicap for a person after they have been merged so their handicap is correct in quicksearches #37734
- Mod: Shared: Deleted ScoreStat.cs since it's no longer used.
- Mod: unionapi: remove markeruid without build failing
- Mod: unionapi: remove markeruid
- Mod: UnionAPI: Include Course data in the Score post
- Mod: UnionAPI: club name search docstring
- Mod: UnionAPI: API changes via matt before meeting tonight: UPDATED CONSOLIDATED LIST: Remove the (All course) requests, PCC remains, and Retrieve Single course remains (to allow them to enter an away score that has been brought back to the home country) Remove the get All club requests, and remove search for single club by GUID. Add a search by club by name to return the clubuid and course uids for the club Include Course data in the Score post, including a PCC value (which could be NULL) Do we need to retrieve only the PCC values for a specific course value? Do we really need Retrieves a Single Score any more? Hide that for now? The update an existing score - this would also need the full course info (in case they updated the marker) Hide the score intent guids - we can add that later if we need to Remove the call into get by memberUID
- Fix: PCC report was aggregating PCC values from all courses for the same club when filtering by course.
- Mod: Live: PCC report was including deleted courses
- Fix: Live: Courses tab only shows courses associated with the clubs who own them
- Mod: #xero-oauth2: Slightly better feedback to user after xero oauth migration, and we now avoid reloading the form.
- Fix: Accidentally committed registration form changes.
- Add: #xero-oauth2: Implemented automatic migration path from OAuth 1.0a to 2.0 by just clicking the Migrate link. You can reverse the migration if needed by grabbing the value of the xero-oauth10a-token-backup-290 key in Redis and setting ClubSettings.AccXeroToken for the club.  These keys are only a backup and are set to expire 20 days after migration.
- Fix: Don't cache individual scores for tournament leaderboards; live scoring updates these too frequently.
- Fix: Push Notifications: #mygolf-score-entry - Incorrect title for score verification messages.
- Mod: Move hookmanager to Core. Still not ideal, but moving in the right direction
- Cleanup: Removed PingV2 method from ConnectorAPI, it's been obsolete for 7 years now; probably about time it gets dropped.
- Mod: #slicer refactored to split SlicerLib into functional blocks (partial class) to keep the file from getting hard to navigate.
- Cleanup: Removed old ETSL code; we haven't used this since 2011.
- Cleanup: Removed a bunch of old cruft from Adweb.  This was long overdue...
- Mod: #slicer All gs_ stored procs deleted and SQL moved into SlicerLib.cs. Mod: #slicer NZGreenFeeData connection string is now computed from the master connection string so that we don't have to hard code it in the web.config.  End goal is to merge all the tables into the main database so this is only a slightly better hack than it was before.  At least it makes it safer when developing...
- Mod: Live/Org: interclub team members report added text from Pat #5001173
- Add: Index for minor performance gain.
- Fix: org: build: incorrect version of stackexchangeredis
- Mod: Org: svn ignore more /bin dlls
- Fix: UnionAPI: web.config hostingmodel
- Fix: Live: build: incorrect version of stackexchangeredis
- Fix: unionAPI: dev1 build
- Fix: #mygolf-score-entry: When a score is approved/rejected, the push notification is sent to the attester instead of the owner of the score. Fix "$REASON$" placeholder is displayed instead of the actual value.
- Fix: Live: Navigation: Some pages are not selecting the parent link properly.
- Fix: Think this should read 3.1?
- Fix: UnionApi: Remove netcoreapp2.2 target
- Fix: UnionAPI: jenkinsfile was 2.2
- Mod: UnionAPI: UseAuthorization and UseEndpoints
- Add: Temporarish indexes to speed up checks for Attachment usage (only really useful while I'm cleaning out this table)
- Mod: UnionAPI: continuing test repair
- Mod: UnionAPI: unit tests skellington working
- Mod: Core: test project now support netcoreapp3.1
- Fix: Live: Email V2: Competition entrants in not showing up because of an incorrect query where it filters out members and non affiliates.
- Mod: Bulk Email: be_CreateRecipientsMembersAndCasualGolfersByRegions: use member.regionid instead of club.regionid to filter the members by region
- Fix: Live tests: update Moq to fix binding errors
- Fix: UnionAPI: deploy script referencing netcoreapp2.2
- Mod: ISVAPI: add /* WHS Playing Handicap Calculation v-4.0-2019 */ comment where it should have been added earlier
- Fix: ClubCMS: rContactForm: corrected a typo error
- Mod: Batch Process form sucked, so made it suck a little less. Fix: Missed a file in that last commit.
- Fix: #xero-oauth2 off-by-one error caused duplicate invoices when pulling closure invoices from Xero, resulting in the Vend recode process not working. Add: Error handling for Xero API (old one) improved a little.
- Fix: Live: marking people as deceased was causing errors in prod :(
- Fix: UnionAPI: Build
- Add: Sane setup defaults for the Subs tables (only does anything if they are empty).  Also sets up default taxes for GB&I.
- Fix: ISVAPI: Build on jenkins because newtonsoft has dependencies that reference different versions of System.IO.FileSystem.Primitives
- Mod: Subs: "GST" now shows as "VAT" in GB&I. Mod: We now have client-side language; e.g.   $lang.Cart.toString() == "buggy"   $lang.Cart.toString(2) == "buggies" Mod: TaxRate table now has IsMainSalesTax to identify GST/VAT in each territory, because we can't use the Code now. Fix: Subs: Invoice screen showing up broken while loading; small punctuation fix. Mod: Moved "There is no club manager email address set; without this all outgoing subscription emails will bounce.  Please set an email address in Settings-Contacts." message to Page_Load because it's annoying seeing this after you've made the effort of picking all the options, only to be blocked after preview. Fix: "Please set an email address in Settings-Contacts." is now hyperlinked to the Settings/Contacts area.
- Fix: Live: update system.buffers to 4.5 to fix binding errors
- Fix: org+clubcms: update system.buffers to 4.5 to fix binding errors
- Fix: bulkmemail: update system.buffers
- Fix: ISVAPI: Build on jenkins because newtonsoft has dependencies that reference different versions of System.Text.Encoding.Extensions
- Fix: CardPoller: web.configs again
- Fix: Live: web.configs again
- Fix: Bulkemail: web.configs again
- Fix: Public2012: web.config.production again
- Fix: Clubcms: Web.config.Production
- Fix: Clubcms: Web.configs
- Fix: API: Web.configs
- Fix: Public2012: web.config.production
- Fix: Bulkemail: web.configs
- Fix: API: Web.config.Production
- Fix: Live: web.config and web.config.production
- Fix: Adweb: build (web.config binding redirect was wrong)
- Fix: Live: Members resigned report
- Fix: Org: build
- Mod: Live: ignore some dlls in bin
- Fix: Live: Build
- Fix: ConnectorAPI: Build
- Fix: Cardpoller: Build
- Fix: Cardpoller: Build
- Fix: BulkEmail: Build
- Fix: Adweb: build: update signalr.redis
- Fix: Public2012: Build
- Fix: API: Build
- Fix: Clubcms: PEBKAC
- Accidental commit fixed by rev 44386
- Fix: Clubcms: build (after StackExchange.Redis update in Core)
- Fix: Adweb: ORNS when trying to login as webforge (because there is no DotGolf menu and we were trying to find that)
- Fix: Adweb: ORNS when trying to login as webforge (because there is no DotGolf menu and we were trying to find that)
- Mod: live: update code comment
- Mod: Org: don't show member chooser parameter in UnsatisfiedScoreIntents report pdf because it looks ugly
- Mod: Live: removed a bunch of isJuniorHandicap logic (this flag hasnt been a thing for a long time)
- Mod: Live/Org: add soft/hard cap text to the low index because Pat wants it #5000502 #5000631
- Mod: Org: bulkmarkerupdate shows deleted courses now #500800 #5000853 #5000950
- Mod: Org: bulkmarkerupdate shows deleted courses now #500800 #5000853 #5000950
- Fix: ClubCMS: Member unable to sign-up/register to Member Portal - Steve Cooke (CDH id 1016088799) #5000955
- Fix: Binding errors after publish.
- Fix: Binding errors after publish.
- Fix: Live: Navigation: Fix for the active marker extra space.
- Fix: ISVAPI: build
- Mod: UnionAPI: upgrade to Core 3.1
- Mod: Core: Move off deprecated Redis.Strongname package (so I can use a newer StackExchange.Redis version on in UnionAPI). Might have to roll this back if there are too many errors in the other projects
- Add: Adweb: favicon because Adweb was feeling left out.
- Fix: Adweb: Signalr issues (added some logging because this is only happening when deployed)
- Hack: include sql folder when publishing adweb - for schema updater.
- Add: Adweb: First cut of schema updater.  I've hidden this from the menu - to show it, select "David" from the users top right.
- Mod: Live: Ordering of product navigation.
- Fix: #xero-oauth2 Bank transactions with no contact ID caused an ORNS.
- Fix: ClubCMS: PGA: DrawAndResultWidget: left join on CompetitionAssociation table (not all PGA competitions have an entry in the CompetitionAssociation table; it's normally used when Golf NZ and the PGA have a joint competition)
- Fix: Connector: Tray app display weirdness after my json/p console error fix (due to previous laziness.  laziness extended)
- Mod: ClubCMS: Golf Ireland footer text update
- Fix: Live/Org: Disable viewstate on Extquery report literal. The literal re-renders with every postback, so we don't care about viewstate preserving it's state on postback #5001104
- Fix: API: #mygolf-score-entry: Placeholders (e.g. $COURSE$, $RESULT$) in the push notification alert message was not substituted with the actual values. https://dotgolfinternational.freshdesk.com/a/tickets/5001158
- Mod: ISVAPI: dont return cmember records for deleted clubs
- Mod: ISVAPI: dont return deleted clubs
- Fix: isvapi: Typo
- Mod: ISVAPI: add clubid for England org CMS people to use (without breaking the build)
- Fix: API: #mygolf-score-entry: IScoreIntentInserted hook not getting fired off.
- Mod: Live: Clubhouse navigation.
- Fix: build
- Fix: build
- Mod: ISVAPI: add clubid for England org CMS people to use
- Fix: Live: ExportInvoiceToXero: fix the $0.01 discrepancy between Xero and DotGolf (this sometimes happens when there's a negative line item in the invoice)
- Fix: UnionAPI: missed a file
- Mod: UnionAPI: get member by number
- Fix: #xero-oauth2 Invoice Number field didn't get sent to Xero as "2372705 FOWLER, R (Subs) 10339822", instead an INV-1234 number was generated.
- Mod: UnionAPI: deleted stuff from ISVAPI that we dont need yet
- Fix: Live: build
- Mod: UnionAPI: svnignore bin/obj
- Add: UnionAPI externals
- Add: UnionAPI: existing files
- Add: DotGolf.UnionAPI, preparing for Scotland
- Fix: #xero-oauth2 Hide the /api/v1/xero/complete-auth endpoint from swaggerdocs because it causes a conflict and it isn't even a "real" API method...
- Cleanup: Removed comment left over from #xero-oauth2 refactor.
- Fix: ClubCMS: build
- Mod: Elasticsearchlogger LogToDatabase no longer hardcoded to ISVAPI - we want to log data-logger scheduled task exceptions well since they're causing ringmaster to die
- Mod: Core: move specifyUTC extensions to DotGolf.Core from ISVAPI
- Mod: ClubCMS: rContactForm.ascx: added css class name to the message field container
- Fix: ClubCMS: GolfNZ: Past tournaments current year fix.
- Fix: ClubCMS: rMemberSignupV2: fixed love golf play voucher redemption (use the correct club ID (700) instead of the association id when validating the voucher)
- Fix: C# 9 not in GB&I yet sadface
- Mod: ClubCMS: rMemberSignupV2: use the AssignClubId value (if not, the ParentClubId) to get the details about the club (for the previous membership number note, and the merchant reference)
- Fix: Org: if member is home club at another union, they were showing with blank mem no in club membersearch #5001122
- Fix: Live: if member is home club at another union, they were showing with blank mem no in club membersearch #5001122
- Fix: #xero-oauth2: More /Date()/ parsing issues; thought I nailed them all but apparently not.
- Fix: API: #mygolf-score-entry: Score already verified but not displaying as "approved" in the app.
- Fix: Live: Dont show club facility preview link for EG
- Fix: Live: could not remove UNF flag in Wales because of null category narration
- Fix: ClubCMS: MyGolf is called 'My England Golf' in England
- Fix: #xero-oauth2 Some incorrect casts (was playing with these while messing around the API data types) and a commented out line which was causing the functions GST adjustment MJ not to be posted to Xero.
- Mod: ClubCMS: my-performance chart no longer overlaps with vital stats pane at 1200px screen width after prev commit
- Mod: ClubCMS: changed padding around my-performance chart so it looks less squished at 1200px screen width #5001125
- Mod: Clubcms: minor style change
- Mod: API: #mygolf-score-entry: Flag to enable/disable a score (submitted via the app) from being considered for handicapping. Also, added ChangeDate and IsApproved (bit) columns to the ScoreIntent table.
- Mod: WHSAPI: More simple 'using's in HandicapDataManager
- Fix: WHSAPI: manual adjustments were being applied to handicaps fetched BEFORE the adjustment was created. Mod: WHSAPI: small perf optimisation in GetScores so we dont fetch adjustments when calling GetHandicapIndexHistory and GetScoresMoreRecentThan Mod: WHSAPI: simple 'using's to reduce indentation in RecalculateScoresAfter
- Mod: ClubCMS: rEventRegistration: just removed displaying "None" as the marker
- Fix: ClubCMS: rEventRegistration: fix the query used to get the competition details (use a left join to the Course table)
- Fix: Live: Excessive text in Quill editor overflows parent container #5001022
- Mod (danger): Sweeping changes to GetPotentialCompetitionPartners() SQL to address problems with team competitions, specifically:
- Mod: (missed commit) - clean up some Jenkins noise.
- Fix: Sometimes console.error messages get generated when the Connector responds to json/p requests; we now check that the callback function exists before calling it, avoiding exceptions if there is something up with the target DOM.
- Fix: Live: when a club READS a home club change request that IT sent AFTER the other club has responded to it, the other club can no longer delete the request  #5000873 . i give up
- Fix: Live: inter union home club change requests werent showing the correct club name
- Mod: Live: remove unused resignation request logic from TabInterClubMessageReader since it just confuses things
- Fix: ClubCMS: GolfNZ: Booking terms and conditions link update.
- Fix: Live: wa_UpdateInterClubMessageReject was not being run when rejecting home club change from another union
- Mod: Live: revert previous commit (except for simple-using style change), it was not what I wanted
- Fix: Live: rejecting a home club change request now updates the message changedate - this was preventing a club from deleting requests they can rejected. #5000873
- Fix: Build: unused PostBuildEvent propertygroup causing nswag error in VS 16.9
- Mod: Live: svn ingnore live dlls
- Fix: Clubcms: people with home clubs elsewhere couldnt sign up to portal. #5000955/5001136
- Fix: ClubCMS: Increased the length of the URL column.
- Fix: ClubCMS: GolfNZ: Tournaments: Added todays year in the dropdown. Hero: Added target blank.
- Mod/Fix: sql: PassportCredential trigger: logically delete the billing token only if the member doesn't have any other active memberships.
- Fix: API: #mygolf-score-entry: Golf Ireland - Scorecard successfully returned but the push notification is not sent to the attester due to "Row not found exception" when retrieving marker details.
- Mod: Block the old Public.2012 from external visitors - only the DotGolf office IP is allowed now.
- Mod: Added logging to debug weird date format exception I'm getting for the association xero sync.  This error is historical and not specific to the OAuth2 stuff.
- Fix: #xero-oauth2 Tenant Picker should be available to users who have access to Settings.
- Fix: API: #mygolf-score-entry: Scorecard not deleted if there is no score intent linked to it.
- Mod: Improved send-command.cmd to wait for command completion and removed some of the log noise.
- Fix: deploy-xerosync script bugs - this is defunct anyway, just needs to run once to clean up the environment.
- Fix: Green Fee Payment Detail Report: FreshDesk tickets #35595 and #36476 - Filter out records if the payment captured date is earlier than the actual play date.
- Mod: Make Jenkins promote output less verbose.
- Mod: Make Jenkins promote output less verbose.
- Fix: #xero-oauth2 Unexpected null reference fun times.
- Fix: Removed an errant reference to Xero.Api from DotGolf.ScheduledTasks (this was causing a MethodNotFoundException due to package differences to the one referenced from DotGolf.Shared). Fix: .Value called for a reason that evades me - causing ORNS.
- Fix: Keep Public.2012 build working (for now) as we use it as a reference site.
- Mod: Live: Hide News & Events sub-tab for GI since they dont use our news control on the website
- Revert revision(s) 44200 from Trunk: Mod: Live: Remove news and events for GI because they aren't using our News control on the website ........
- Fix: API: #mygolf-score-entry: Message is not deleted after a score intent has been approved/rejected.
- Fix: ClubCMS: Forgot .ts file from prev commit #5001115
- Fix: ClubCMS: null checks when trimming member code and ensure new Email reset thru app works #5001115
- Fix: API: #mygolf-score-entry: Score verification result message should be of link type "VerifyScoreResult".
- Fix: ClubCMS: 'Pending' handicap was overflowing the vital stats pane at large (bootstrap lg) resolution #5001123
- Add: API: #mygolf-score-entry: Add the ability to delete a scorecard in the app.
- Fix: Public: added left spacing on menu bar and the 'Welcome {Firstname}' message so they dont hit the side of the page #5001125
- Mod: Bulk Email: Golf Ireland: use no-reply@golfireland.ie as the email return path for GI
- Mod: Bulk Email: Ireland: replace sender (and email return path) to no-reply@golfireland.ie
- Mod: Live: change labels on score entry + member admin user roles to make them say what the roles actually do even though its not intuitive at all
- Mod: Live: Remove news and events for GI because they aren't using our News control on the website
- Fix: ClubCMS: GolfNZ: Force to get latest image from s3.
- Fix: ClubCMS: Trim() member numbers before saving them into redis tokens to avoid this: 'MemberVerificationCode- 1000255164'
- Fix: API: verify email URL
- Fix: Public: can now verify email in public site when it is updated from the app (linked to my previous API revisions). Remove hidden golfNZ SVG
- Fix: ClubCMS: GB&I Member Portals: Return empty results instead of returning a HTTP401 if the user is not supposed to see other person's scoring data.
- Fix: JavaScriptErrorLogger moved from /api to /shared/api so that Org can also use it (we were getting exceptions in the logs because of Org trying to log javascript errors)
- Mod: England config: updated the public site stage urls
- Mod: API: insert verification code into redis when someone changes email via the app
- Mod: Passport: simplify SendVerificationEmail default subject
- Mod: API: Simplify member signup link
- Mod: Added membersignup URL for IE stage to configprofile
- Fix: ClubCMS: zMy Header: fixed hiding/showing of member search functionality
- Fix: ClubCMS: zMy Header: fixed hiding/showing of member search functionality
- Mod: Live: update Delete Score Intent functionality to use Hookmanager
- Fix: ISVAPI: course PCC unit test
- Fix: sql script was erroring during unit test create
- Fix: API: Silent bug in API since the launch of the new golf.co.nz + GB&I public sites, where it was pointing to the wrong public signupURL
- Fix: Bug checking for column existence.
- Add: API: #mygolf-score-entry: Score attestation process - add ability to approve/reject a score intent for scores submitted thru the app. Mod: API: #mygolf-score-entry: Minor refactor. Move helper methods from ScorecardController.cs to DigitalScorecard.cs. Mod: API: #mygolf-score-entry: Player signatures - Store S3 bucket name in the app configuration profile. MOd: API: #mygolf-score-entry: Update error message to indicate that the score cannot be submitted because of the minimum time period rule (9H/1hr, 18H/2hrs).
- Mod: Live: Add Cmember DeletedDate is null filters to queries in live/shared/core where a 'Date_Resigned is null' clause is not included.
- Fix: ClubCMS: GolfNZ: Tournament leaderboard - Competition type dropdown is not working. It was always defaulting to 0 id.
- Mod: add comment to SQL saying it's already run in prod
- Fix: Bulk Email: allow unicode in the email subject again (this was affected by Rev 43739)
- Mod: [IX_Cmember_DisplayMemberCode] doesnt need deleteddate added, removed it from the script
- Mod: add cmember.DeletedDate to ALL THE INDEXES (almost)
- Mod: ClubCMS: GolfNZ: Allow 9h scores to be viewed in the my friends list.
- Mod: Drop unused index on cmember
- Mod: minor style change - removed comment and changed sql indentation
- Mod: sql: add check constraint to prevent live cmember records being deceased
- Mod: add check constraint CHK_CMember_Must_Be_Resigned_If_Deleted to Cmember
- Mod: ClubCMS: GolfNZ: tournaments - Renamed Golf NZ to All Clubs and removed hole number.
- Mod: Add 'if not exists' check when creating cmember.deleteddate column (already added to stage+prod DBs)
- Fix: ClubCMS: GolfNZ: Error hero ui fix - made height to 100% again.
- Fix: Public: EG members with two clubs were not able to sign up
- Mod/Fix: ClubCMS: Golf NZ: removed the commented code; added a "Top" Panel to accommodate the "Top" panel controls added to the _Global page
- Mod: ClubCMS: Golf NZ: simplify the tee booking url
- Mod: ClubCMS: Golf NZ: simplify the tee booking url
- Fix: Live: people could still create adjustments of 6+ even though the validation message told them they couldnt
- Add: Adweb: 3rd party competition IDs now shown in member score table
- Fix: API: Remove simple 'using' statement because Jenkins doesnt like them yet
- Mod: API: members changing their email from the app no longer receive empty emails #5001083 #5001039 #5001032
- Mod: Org: request from Matt to change MEMBERS in org dashboard to HOME MEMBERS so the count matches the Members Counts By Club home members total. (previously, people with home clubs in other unions were included in that count, which was making it different to the report, and EG was questioning it)
- Fix: Send null, not Guid.Empty when creating new objects in XeroAPI.
- Add: New code signing certificate, expires 3/3/2024.
- Fix: ClubCMS: golf.co.nz login and signup url updates
- Mod: ClubCMS: redirect /MyGolf/Register.aspx to /signup
- Fix: ClubCMS: GolfNZ: Tournaments: Reset dropdown when browser back button is clicked.
- Fix: Xero auth baseurl had a trailing slash which Xero didn't like much.
- Mod: ClubCMS: GolfNZ: Made the hero height to 75%.
- Mod: Org: Don't show recently entered scores for orgs with zero clubId because counties were seeing scores from other counties, and scores that had been entered in wales for an english member and synced to england were also showing #5000839
- Fix: ClubCMS: golf.co.nz login and forgot password url updates
- Fix: ClubCMS: golf.co.nz Visitor or Casual Golf registration link update
- Mod: Make Xero OAuth2 work using Dev API.
- Fix: Unit tests: More assembly binding issues in API unit tests.
- Fix: Unit tests: when inserting Products we need to specify values for IsValidForClub and IsValidForAssociation.
- Fix: Unit tests broken in API - attempt to fix that with an assembly redirect.
- Fix: Build: activitytracker
- Build: Feeble attempt to get Microsoft.Bcl.AsyncInterfaces to conditionally compile to netstandard2.0;netcoreapp2.2 in DotGolf.Core. re-added netcoreapp3.1 to DotGolf.Core target frameworks
- Mod: ISVAPI: switch to WHS PCC method that's not deprecated
- Mod: sql: change fncMemberValidateHanidcapDelta function to a CREATE or ALTER because it doesnt show up the the ISVAPI test DBs sometimes
- Build: remove targeting netcoreapp 3.1 to see what happens in Jenkins for the non activitytracker builds
- Build: Revert previous commit because it didnt work and remove targeting dotnetcore 2.2 to see what happens
- Fix? Build: Only reference Microsoft.Bcl.AsyncInterfaces if we are targetting .net standard2.0. in dotnet core 3.1+ it's part of system.runtime
- Mod: Removed "NZG Club Resources" link from nav.
- Add: cmember DeletedDate column
- REINSTATED (after our Vend crisis has passed) #xero-oauth2
- Add: Live/Org: scoreintent UI in member scores page + delete option #5001013
- Mod: ClubCMS: grammar mod
- TEMPORARILY REVERTED #xero-oauth2 in case we need to do an emergency patch to fix the Vend integration.
- Mod: Slicer: gs_CreatePayment.sql: use the same slicer code for Nomads and KGC
- Mod: ClubCMS: GolfNZ: Member dropdown menu text updates
- Fix: ClubCMS: GolfNZ: Casual golf ui update.
- MERGED #xero-oauth2 Branches/Trunk.2021-01-18.xero-oauth2 to bring new Xero OAuth2 integration into Trunk.  Xero interfaces abstracted into IAccountingSystem which means we can (with relative ease) integrate any other cloud based accounting system.  I have implemented both OAuth1.0a (for backwards compatibility) and OAuth2 (which we'll need to transition all clubs/associations to).
- Mod: ClubCMS: GolfNZ: Event list Added previous button.
- Mod: ClubCMS: GolfNZ: make the copyright year dynamic
- Fix: GOTG API assembly binding error due to System.Threading.Tasks.Extensions v4.5.2 installed instead of 4.5.4.
- Mod: ClubCMS: Competition Registration: allow Futures Auckland members to register into the Futures Auckland events (they use a non-conventional event format; they won't use the DG results system; they don't require the member to have a handicap to register into their events))
- Fix: ClubCMS: Calendar.asmx.cs: GetAvailableTeeBookingDates: added the @Distance parameter (assigned a null value)
- Mod: ClubCMS: rEventRegistration: apply the unique home club entry fee business rule to Kiwi Golf Club only
- Mod: ClubCMS; rEventRegistration: handle null handicap (e.g. for new Futures Auckland members. Futures Auckland's events are not the typical club competitions; they won't use the results system)
- Fix: Live: Resigning someone from secondary club no longer deletes their home passportcredentials in ENG/WAL
- Mod: ClubCMS: GolfNZ: OOM list: Added a line between past and future events.
- Fix: ClubCMS: People with home clubs in other unions can now sign up to MyGolf without error in GB&I
- Fix: ClubCMS: GolfNZ: The news list date is incorrect. Changed createdate to publish date.
- Mod: Org: Bulk marker update moving scores to other club (!) only enabled for EG
- Fix: ClubCMS: rMyAccount: btnChangeToMonthly_Click: fix the club ID value
- Fix: API: Golf Ireland: Allow users to view a person's mygolf profile (same club). https://dotgolf.atlassian.net/browse/DG-3091 Mod: API: #mygolf-score-entry: GB&I. Score can only be submitted after a period of time - 1hr/9H and 2hrs/18H. https://dotgolf.atlassian.net/browse/DG-3090
- Mod: Org: Add message to create.aspx explaining virtual clubs
- Mod: ClubCMS: GolfNZ: Added year filter in the national tournament list.
- Fix: Live/Org: PlayerHandicapsByGenderAge report now has inclusive of From Age / To Age
- Mod: Live: low index to handicap cert moved to newline
- Mod: Org: add low index to handicap cert
- Mod: Org: BulkMarkerUpdate can move scores from course to course now 5000980/ 5000758/ 5000865/ 5000870/ 5000699
- Mod: Live: interclub team member report changes based on Pats feedback 5001058
- Mod: Live/Org: add create date to Score Intent report and fix bug where the logged in club would show as Away Club despite having created the intent. Link to member from within the report
- Fix: WHSAPI: actually return the score intent createdate instead of datetime.minvalue, + unit tests.
- Mod: ClubCMS: GolfNZ: Resources: Added the paging buttons on top of the list.
- Mod: WHSAPI: score intent create date returned from API
- Fix: #flexiclub-rebates: Syntax error when trying to invoice for 1 club but not applying the rebate.
- Fix: #flexiclub-rebates: Removed xero line item positive check, because we now have negative lines.
- Fix: Live: False refund posted to Kounta for a split payment sale. Steps: 1. Process two cards. 2. Do a split payment, complete the process. 3. Select the two cards again and hit Close button. #37363
- Fix: Live: False refund posted to Kounta for a split payment sale. Steps: 1. Process two cards. 2. Do a split payment, complete the process. 3. Select the two cards again and hit Close button. #37363
- Fix: Upgraded System.Threading.Tasks.Extensions to 4.5.4 in Org.
- Fix: Live: member quick search wasnt finding home members in dev/stage
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for transaction processor.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for mailer.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for ConnectorAPI.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for Casual Golf API.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for org.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for Bulk Email.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for API.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for ClubCMS.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for Analytics.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for Adweb.
- Fix: Assembly redirects (System.Threading.Tasks.Extensions) for Live.
- Add: Web.config.Production for System.Threading.Tasks.Extensions update.
- Mod: Installed System.Threading.Tasks.Extensions 4.5.4 to get rid of binding problems suddenly present in Stage.
- Fix: ClubCMS: GolfNZ: Reverted back the tournament result cache to 15mins.
- Fix: Syntax error in fncMemberValidateHandicapDelta function.
- *** DFH CODE REVIEWED TO HERE *** Fix: API: #mygolf-score-entry: Should only filter results based on the user's current location if Features.AllowDigitalScorecardOnlyIfWithinClubProximity is true.
- Mod: API: #mygolf-score-entry - disable setting that requires users to be near the golf course in order to create a digital scorecard. Applies only to dev and staging environments.
- Fix: Org: Tournament Registration: when manually registering a player to a competition, set IsPayByBillingToken=0 and TotalAmount=null
- Mod: ClubCMS: GolfNZ: Reduced cache time for tournament results.
- Mod: ClubCMS: GolfNZ: News: Do not go to top when paging buttons are clicked.
- Mod: ISVAPI: remove redundant ISVAPI_RequireDOBAndEmailToRetrieveHandicap feature checks (OtherStuff.IsHandicapInfoWithheld already checks this)
- Mod: Org: Virtual club flag is more obvious
- Mod: Org: if isvirtual is ticked in EG use numbers over 900000, else use numbers less than that (as they did in CDH)
- Fix: ClubCMS: GolfNZ: News: Added date filters and sorting.
- Fix: ClubCMS: GolfNZ: Removed she loves golf title from events list.
- Mod: Org: change InterclubTeamMembers ReinstatedAfterStartOfYear to LiveAtStartOfYear (Pat just wanted to know - "Are these new live members in 2021?")
- Mod: API: #mygolf-score-entry: Minor typo.
- Fix: API: #mygolf-score-entry: Allow create scorecard only if the club has a ClubSetting record so we don't get the "Row not found exception" in Scorecard.CreateScorecardTransaction().
- Mod: Removed Database.Log(Unauthenticated request for...) in favour of a StatsD counter (session.redirected-to-login)
- Fix: StatsBucket will now check IVortexHostDiscovery every minute to ensure we're up to date.
- Cleanup: Removed old documentation.
- Fix: Whoops, build error.
- Fix: AppPerformanceTracker vortex re-discovery didn't work (after a host rebuild/ip change) because _client kept hold of the old IP.
- Mod: Live/Org: score listing shows Reset (until next score is entered) if someones low index is reset
- Fix: Vortex host discovery not available straight after the app has started.
- Add: New links in adweb: /vortex/grafana and /vortex/kibana will autodetect the vortex host in the environment and redirect the browser there.
- Fix: ClubCMS: PGA: DrawAndResultWidget: Draw sql query: corrected the date filter (to include the competition(s) in the past 4 days)
- Fix: Live: ToProperCase null checking
- Fix: Live: reports: async deadlock in InterclubTeamMembersDataSource in Live for somehow
- Mod: Reports: InterclubTeamMembers report has less large header so full club name will fit on page
- Fix: Reports: Didnt completely hide parameter values from PDF reports with HideParameters = true
- Mod: Reports: GI InterclubTeamMembers report now has a header and looks nicer
- Mod: Reports: HideParameters in pdf output in handicap cert report
- Mod: Reports: Reports now have a flag that allows parameters to be hidden so PDFRenderer no longer shows an not-so-pretty table of raw parameters like memberId etc
- Mod: Reports: DOB formatter no longer spills over oddly to new line when the table gets small i.e. like this: 1/01/1900 (Age: 121)
- Test: Jenkins svn hook.
- Fix: BulkEmail: The social member is not being displayed in the members individual search.
- Fix: ISVAPI: add home club field to EG CRM API which should have been there to start with
- Mod: Core: remove redundant Count from social member search code
- Fix: #flexiclub-rebates Sorted out a couple of bugs and display issues.
- Add: NZGALevyPrice.XeroAccountCode column to allow specific Xero accounts for a price (Flexiclub).
- Add: #flexiclub-rebates New column to track the price id so we can put the right description on club invoices.
- Fix: #flexiclub-rebates: Duplicated levy line in levies preview shown to clubs.
- Mod: #flexiclub-rebates: UI and logic for applying Flexiclub rebates to club levies.
- Fix: Org: InterclubTeamMembers report can now be used by districts (not that GI has any)
- Fix: Org: member quick search in SIC wasnt working for districts after prev commit, reverted region filtering in member quick search for them
- Mod: Live: GB&I member quick search service in org now allows searches by name for top level union, and searches by name for districts filtering by region id.
- Mod: #flexiclub-rebates NZGALevyPrice now allows duplicate NZGASubCategoryID+NZGALevyDateID values to allow for Flexiclub rebates.
- Add: #flexiclub-rebates column to NZGALevyPrice to identify this special type of levy (so we can display it separately on the invoice)
- Mod: ClubCMS: rMyAccount: code tidy up (after the series of updates)
- Mod: ClubCMS: rMyAccount: code tidy up (after the series of updates)
- Add: #flexiclub-rebates: Undo column to track Flexiclub rebate amount per member.
- Fix: ClubCMS: rMyAccount: updated the condition used to determine if the user is just adding/updating the billing card
- Add: #flexiclub-rebates Column to track Flexiclub rebate amount per member.
- Add: #flexiclub-rebates new column to track whether they want to apply a rebate to each club.
- Fix: ClubCMS: GolfNZ: Tournaments: No data results for player stats were incorrect.
- Fix: ClubCMS: rMyAccount: add/edit membership billing card fix
- Mod: Refactored to allow us to drop old school trivial proc wa_AssignSlopeIndex.
- Mod: Reports: simplify string interpolation in PDFrenderer.cs
- Fix: Org: Build
- Fix: ClubCMS: rMyAccount: fix insert of xml data into TBTransaction.RawXml (this was caused by Revision 43739)
- Fix: Org: "Details changed in previous course update" works again because we were filtering old markers too aggressively so it would always look like everything was changed (all highlighted blue).
- Cleanup: Drop a few unused procedures/functions.
- Fix: ClubCMS: GolfNZ: Tournament birdie count was incorrect.
- Fix: Live: no longer duplicate par and distance in course info page when there's a deleted marker for a course which does NOT have it's start and end date swapped #5000994.
- Cleanup: Removed DeleteBatch.aspx, it's been disused since the end of DotGolf Enterprise.
- Fix: Live: Conservative is default the ProperCaseMode now because of GB&I issues like these #5001030 #5001044
- Fix: The system farts in your general direction if you try and set someone's initial handicap (override pending handicap) back to "empty" in DotGolf Live.
- Fix: Org: EG no longer creating new clubs over 900000 (for now - will need to look at this later when they are creating new assocs etc)
- Fix: ClubCMS: GolfNZ: Tournament hole by hole is showing 0 if without entry.
- Fix: API: #mygolf-score-entry: Return an error message if geo-location is enabled and user location is not provided to the API.
- Mod: API: #mygolf-score-entry: GB&I - Implement geo-location to create scorecard based on proximity to the clubhouse. Currently set to 3KM. Mod: API: Minor refactor. 1) Make SearchClubs a static method in the MyGolfController class so I can call this method from other controllers (e.g. ScorecardController). 2) Move DitanceBetween() method in DigitalScorecard. Mod: API: NZ - Enable the AllowDigitalScorecardOnlyIfWithinClubProximity setting in Stage.
- Add: Reports: interclub team members report v1.0
- Mod: ClubCMS: Filemanager: Allow '_' in the filename.
- Mod: sql: ClubCMS: rMemberSignupV2 control: insert MemberLoginPage control property
- Mod: ClubCMS: sql: delete the IsCheckIfLiveMember control property for rMemberSignupV2; it's not used anymore
- Mod: ClubCMS: GolfNZ: Added OOM details to result.
- Mod: ClubCMS: rmyaccount.css: css class name update
- Mod: ClubCMS: rMemberSignupV2: prevent current / active members of the club from signing up as a new member.
- Mod: Org: HandicapChangeReport now has links to member adjustments page to be nice
- Mod: WHSAPI: Score listing now includes ineligible for handicapping scores by default because this was confusing users in NZ Live and Public sites
- Mod: Reports: UnsatisfiedScoreIntents member filter actually works now
- Mod: Shared: Member.cs now loads WHSMemberUID by default
- Mod: add type="text/javascript" to some script tags
- Mod: ClubCMS: GolfNZ: OOM tournaments: Added year filter.
- Mod: ClubCMS: GolfNZ: Find a golf facility: Added page size and show pagination settings. Added default location in the input.
- Mod: ClubCMS: GolfNZ: Find a golf facility: Added page size and show pagination settings. Added default location in the input.
- Mod: Shared: more pointless style changes to extension methods
- Mod: Org: HandicapChangeReport now has links to member adjustments page
- Mod: Shared: more pointless style changes to extension methods
- Mod: Shared: simplify IsNumber string extension
- Fix: ISVAPI: CORS in GBI stage allow any origin
- Fix: ISVAPI: CORS in GBI stage ... ???
- Mod: ISVAPI: CORS in EG stage only
- Mod: ISVAPI: enable ALL THE CORS! (in stage). Not proud of this, but just want the England Golf CRM people to be able to test against stage properly. Hopefully they dont mess anything up...
- Fix: ISVAPI: CORS was not disabled properly in GBI stage
- Mod: ClubCMS: add Golf NZ redirects
- Mod: Love Golf Play: updated the lovegolf URLs to point to https://www.golf.co.nz/love-golf-campaign (although there's a redirect in place for lovegolf.co.nz)
- Fix: Love Golf Play: update the obsolete golf.co.nz forgot password link
- Fix: Love Golf Play: updated the obsolete golf.co.nz forgot password link
- Fix: Love Golf Play: updated the obsolete golf.co.nz tee booking link; rephrased the second statement on how users can subscribe to the Love Golf Play emails
- Fix: ClubCMS: in England, a person who's a home member in Wales or Ireland (ClubNo is null) is now shown in the handicap rankings as long as they are a live secondary member at an EG club (or the club running the rankings query)
- Fix: ClubCMS: when signing up for MyEG, a person no longer needs to be a home member at an EG club - as long as they are a secondary member at an EG club, and have an email there.
- Mod: ClubCMS: rMyAccount: make the cancel/reactivate/change membership feature available to Futures Auckland too (apart from Flexiclub)
- Mod: ClubCMS: GolfNZ: Added clubid as param in the offers/events list.
- Mod: sql: wa_ThirdPartyNotifyWinner_Member: used by the Jennian Homes Twos Comp (just updated the content of the email sent to the winner)
- Mod: ClubCMS: GolfNZ: Added event list call to action link.
- Mod: ClubCMS: GolfNZ: CKEditor: Added a more flexible way of embedding iframes (videos).
- Mod: ClubCMS: rMemberSignupV2.ascx: added back a css class ("offset-2") which I removed on Rev ID 43551. It's needed by the Flexiclub signup form on golf.co.nz
- Mod: API: #mygolf-score-entry: Minor tweak in the score intent confirmation message.
- Fix: ClubCMS: GolfNZ: Exclude na from txt messaging settings in my profile.
- Fix: Upgraded to System.Threading.Tasks.Extensions 4.5.4 to match DotGolf.Shared (this avoids some reporting assembly loading exceptions).
- Mod: Don't log an exception when ERR_FRIEND_REQUEST_ALREADY_EXISTS happens - this is not an error, it's a status message.
- Fix: ORNS if an ExtQuery report fails to JSON parse.
- Mod: ClubCMS: GolfNZ: Added the ckeditor video embed.
- Fix: Live: when searching for resigned people by member number, was including all social members in results #36948
- Removed code analyzers.
- Removed Import NunitTestAdapter section from DotGolf.Shared.csproj in a bid to make MSBUILD /t:Restore work in Jenkins.
- Mod: ClubCMS: GolfNZ: Email unsubscription
- Mod: API: #mygolf-score-entry: Change "CreateScorecardWarningMessage" to "ScoreIntentConfirmationMessage". Minor tweak in the score intent confirmation message.
- Mod: Reports: HandicapReviewDataSource renamed table2 variable to table1
- Mod: HandicapCertificateDataSource: intellisense suggestion for dictionary init
- Mod: Shared: Commit stupid UserProperties Extquery jsonschema thing
- Mod: Shared: Deleted unused DataDomain classes and unused methods
- Mod: Live: Move GetBookingInfoFromTimeSlotEntry method into teebookinghelper so we can delete TeebookingRepository
- Fix: Live: build error in ScorecardWebService
- Mod: Live: remove unused ScoreRepository methods (ongoing cleanup of EF stuff)
- Fix: Org: sql typo in prev commit
- Mod: Org: delete two old DataDomain Repository classes and refactor their methods into DotGolf.Data classes. We will cleanse EntityFramework eventually...
- Mod: Org: PgaTaxStatement: remove commented code and old todo
- Mod: SSO: if a club is deleted, don't allow Live users to log in as that club
- Mod: Shared: delete CourseParser.cs as it's no longer used
- Mod: Live: remove unneeded todo from lucky draw and make private classes private
- Mod: Shared: remove expired TODO from fnmenu.cs
- Mod: Org: Can finally delete courses with no active markers OR pending course changes
- Mod: ClubCMS: GolfNZ: Text registration - added the awaiting PIN step
- Mod: ClubCMS: GolfNZ: Text registration - added the awaiting PIN step
- Fix: ClubCMS: Execute Re-Captcha initialisation code after rendering the "g-recaptcha" DIV element.
- Removed: URLLog (we have TrackerLog/Kibana for this now and we can search by session id there with no overhead) Removed: InitialCuteEditorConfig (this was iterating the entire page control collection and only ended up doing stuff for Aus) Performance: Settings query had an implicit conversion preventing index seeks. Removed: Code that lists the current SQL locks in case of a deadlock/timeout exception - this just added insult to injury and has never helped us find the underlying problem that I'm aware of. Performance: Small performance enhancement in .ToJSON() which stops constructing JsonSerialiserSettings every single time.
- Mod: API: more searchable exceptions logged from WHS webhook HttpHandlers
- Fix: WHSAPI: NotSupportedException in updatemember
- Fix: API: #mygolf-score-entry: /load-active-scorecards endpoint - CreateScorecardWarningMessage not set.
- Mod: ClubCMS: comp registration banner: add the bootstrap button class
- Mod: ClubCMS: event promotion banner CSS update
- Mod: ISVAPIS: ISVs can get someone's handicap in England if they have a DOB or email at ANY club, not just the users club #5000988
- Mod: Performance fix getting competitions list in golf.co.nz.
- Fix: ClubCMS: Tidy up js.
- Mod: Prepend ExtQuery queries so we can find them in Profiler.
- Fix: OPTION(RECOMPILE) to enable usage of IX_KountaOrderPayment_KountaOrderId, a filtered index.
- Add: IX_KountaOrder_ClubId and IX_KountaOrderPayment_KountaOrderId to speed up something in the Functions system
- Fix: ClubCMS: GolfNZ: Web service markup fix.
- Mod: GolfNZ: Friends: change type of CurrentHandicap observable to string to match the incoming Dto
- Mod: API: #mygolf-score-entry: /list-submitted-scorecards endpoint now returns the status of the score intent. https://dotgolf.atlassian.net/browse/DG-3036 Mod: API: #mygolf-score-entry: /load-active-scorecards endpoint - Add "CreateScorecardWarningMessage" - Displayed in the app at Create Scorecard screen. https://dotgolf.atlassian.net/browse/DG-3036
- Add: IX_WEAuthLog_UserSecurityId for performance.
- Fix: Last Login column in Users list in Live was unreliable since there was no ordering when selecting the last CreateDate from WEAuthLog.
- Mod: ClubCMS: svn ignore some js and js.map stuff
- Mod: GolfNZ: remove unused handicap suffixes in friends query
- Mod: API: remove unused handicap suffixes from get friends query - they dont exists in WHS
- Mod: ClubCMS: GolfNZ: Filemanager: Added filename length validation.
- Mod: ClubCMS: GolfNZ: Added Txt messaging settings.
- Mod: Performance: IX_CompetitionRound_CompetitionId includes RoundDate now.
- Add: IX_AXAccountTransaction_CreateDate to speed up scheduled task.
- Mod: ClubCMS: GolfNZ: Added Txt messaging settings.
- Add: Another index for KountaOrderLine and a tweak to one on KountaOrderLine to make a scheduled job go faster.
- Add: Moar indexes for performance.
- Add: IX_Invoice_AccXeroInvoiceId to avoid PK scans when Xero wants to update a specific invoice.
- Mod: Performance: Simplified GetEligibleCompetitionRounds query to avoid excessive memory grants.  This still doesn't get rid of the OPTION (querytraceon 9481), but the new query is approx 26% better in measured cost.
- Fix: Live: bulkmarkerupdatetask ends if it hits a score that has no marker for its play date, then waits for the next minute to start again. Makes the task reeeal slow
- Mod: ScheduledTasks: remove good intentioned try-catch from BulkMarkerUpdateTask, we want any thrown exceptions to trigger a failed task.
- Mod [shouldn't be major, but affects all queries passing string values in to sql]: Dapper will now send strings to SQL as VARCHAR, not NVARCHAR.
- Mod: live_FindMembers_SearchText will now use live_FindMembers_BasicWithCategories regardless of @RegionId or @AffiliatedMembers (the latter handles those now with minimal changes)
- Fix: Sprinkled some option(recompile)s in the subs summary chart since this continues to give me bad plan grief.
- Fix: ClubCMS: GolfNZ: Added more file name validation in the filemanager.
- Mod: WHS: better query plan for organisations/overrides because it's taking 4-7s in EN
- Mod: Org: more tweaks to handicap freeze report to handle withdrawn handicaps more cleanly
- Mod: Org: more tweaks to handicap freeze report to handle withdrawn handicaps more cleanly
- Add: Org: Member counts by club report. Renamed Member Counts report to Member Counts By ${Lang.District}
- Mod: Org: Member count not counts members based on number of people who have a live membership at a club. Old method of member.clubno is not null didnt catch people with home clubs in other unions, and for some reason in England there are members who have no live cmember records, but their member record is marked as not resigned
- Fix: TXT message service - app.config updated for the service project; previous commits only updated the console app one.
- Fix: Clearfix to fix a layout problem in some reports.
- Fix: Small styling adjustment to PDF ExtQuery output.
- Fix: ExtQuery now handles the case where a club has no logo image.
- Fix: Build error in ExtQuery after last commit.
- Mod: ExtQuery will now put the club/organisation logo top left, if present.
- Mod: ClubCMS: Golf Ireland: footer css: decreased the "Find us on" font size (based on the provided design)
- Mod: Reports: built Foramtter.LangReplace into the report Displayname so we can have union specific report titles
- Mod: ClubCMS: Golf Ireland: footer: added back the social media icons (and added LinkedIn and Instagram)
- Fix: PlayerHandicapsByGenderAge: Conservatively propercase names.
- Mod: API: #mygolf-score-entry: Check if Attester PassportId is valid. Mod: API: SubmitScoreRequest: Add AttesterMemberOrNonAffiliateId. Add XML documentation.
- Mod: Slicer: gs_CreatePayment.sql: for Futures Auckland (915), use the same commission calculation as Flexiclub's (700)
- Mod: Live: Competition_NG.aspx: added a Help link for Home Member Entry Fee (displayed only for clubs with the VCC product)
- Mod: Org: freeze report is now Frozen And Withdrawn Handicaps report
- Mod: Org: Only show courses that belong to a physical club in course changes page
- Add: Player Handicaps by Gender/Age report for GB&I. Add: Some ExtQuery enhancements; HandicapIndexParameter, DOBFormatter, DataType property on parameters.
- Mod: Live: Competition_NG.aspx: added a Help link for Home Member Entry Fee (displayed only for clubs with the VCC product)
- Mod: ClubCMS: rEventRegistration: for virtual clubs (with VCC product), IsHomeMember is true if they're a member of the competition venue (course/club).
- Fix: ClubCMS: `Duplicated username detected` is thrown even for admin users.
- Mod: ClubCMS: sql: just an update on the default setting for the rMemberSignupV2 control property: IsCheckFlexiclubEligibility (default in the code is false)
- Mod: Tournaments: live_dcr_GetDrawsToPrint sp: return the linked competitions as well (e.g. Golf NZ created competitions are linked to Par NZ)
- Mod: Org: Tournaments: update to the previous commit (rev 43693); use the CompetitionAssociation table to get the linked AssociationId
- Mod: Org: Tournaments: allow linked associations to view the result report (e.g. Par NZ accessing the comp result of a linked competition originally created by GNZ)
- Fix: Modica: Tee times TXT push notifications - Mods to stop repeatedly sending the same TXT message. If we failed to send the TXT message, that message should no longer be retried. Fix: Modica: Added back "ModicaSoap.wsdl". This file was removed from previous commit - svn no. 43020.
- Fix: ClubCMS: GolfNZ: Minor UI change.
- Mod: ISVAPI: slight mods to CORS code to make sure the EnableCors attribute works in Prod
- Mod: ISVAPI: allow CORS to ms flow domains in STAGE, this is for England Golf's crm thing to hook it up to MS Power Automate. We're going to see if they can actually get it working before we put this in prod.
- Mod: ClubCMS: GolfNZ: Enable update tournament billing card.
- Mod: ClubCMS: GolfNZ: FAQs: Made the questions font bolder.
- Mod: ClubCMS: GolfNZ: Tee booking colour updates.
- Fix: ClubCMS: GolfNZ: Tee booking updates: - 'OR' ui fix - Date format changed to dd MMM yyyy
- Fix: Typo (Deceased vs IsDeceased) causing runtime member search errors.
- Fix: TXT message service should be running as local system.
- Fix: ClubCMS: GolfNZ: Add check if NonAffiliate.ClubId has value.
- Fix: ClubCMS: GOlfNZ: - Tables are displaying a vertical scrollbar when loading - Hole by hole: Added a pickup background colour
- Mod: Reverse Proxy: added S,W,0,1,kiwigolfclub.com
- Mod: ClubCMS: bindings.list: added kiwigolfclub.com and www.kiwigolfclub.com
- Fix: A couple more NVARCHAR implicit conversion issues.
- Add: IX_TXLine_AdHocCartId to speed up a query pulling ad-hoc carts (and scanning PK_TXLine!)
- Mod: ISVAPI: change "DotGolf ISV API Technical Documentation" to "DotGolf ISV API Supplementary Technical Documentation" so people stop getting their hopes up
- Fix: DotGolf.Live unit tests, when run in parallel, produce sporadic failures because the number of live markers in NZCRData for a club varies.
- Mod: Reports: HandicapReviewReport hidden in Live for now
- Dirty dirty hack: Because Futures uses the same Xero org as Flexiclub, they keep renewing tokens and clobbering each other.  This mod makes the ClubSetting class return Flexiclub's tokens for both Flexiclub and Futures, making this work until we can put the new Xero code in.  I'll do this properly when that branch is merged back (because this is going to cause me some merge conflicts)
- Mod: Reports: HandicapReviewReport type and style changes
- Mod: HandicapReviewReport: header text change
- Add: Live: Handicap review report.
- Fix: Another VARCHAR performance issue in Vend batch data import.
- Fix: Performance mod in Vend sync (index was being scanned due to NVARCHAR parameter type, thanks to Dapper)
- Mod: ClubCMS: GolfNZ: Enter code text change.
- Fix: WHSAPI: 500 error in handicap review endpoint
- Mod: Core: regen WHSClient.g.cs
- Mod: Reports: update extquery jsonschema with DateRangeValidator
- Mod: England can no longer have members be marked Unfinancial. From Matt: At some stage, it looks like Ireland must have asked to remove the UNF flag from the members area (when resigning a member). Can we please extend this feature flag to include England Golf? Once we merge and publish, I will run a script that will reset the UNF flag on any members. This is causing confusion, and we will need to reintroduce this at a later stage.
- Mod: No longer log full order data for loyalty purposes unless we have Enable Verbose Logging ON for Kounta for the club.
- Mod: No longer log raw sales json from Vend because of DebugLogEntry space use.  We can uncomment and enable this again if we need it.
- Fix: ClubCMS: GolfNZ: Minor my golf dropdown fix.
- Mod: ClubCMS: GolfNZ: Cancel friend request.
- Fix: Live: no longer see non-playing members in advanced search sometimes when they should not be showing #36948
- Mod: WHSAPI: Handicap review report performance updates, removed suggested adjustments because Douglas from R&A said that was not the intention
- Fix: Warehouse builder tests pass now!
- Fix: ClubCMS: GolfNZ: Competition results scrolling issue on mobile landscape view.
- Mod: ElasticSearchLogger: Switched from HashSet<string> to ConcurrentBag<string> for thread safety (if we call ElasticSearchLogger.WriteLine from multiple threads inadvertently) Cleanup: Removed some extraneous log.WriteLines from ActivityTrackerSendRemindersTask.
- Fix: ClubCMS: GolfNZ: Brings back the hole by hole score class.
- Mod: Adweb: commit WHSWebhooks page so it exists.
- Fix: ClubCMS: GolfNZ: Mobile landscape member dropdown menu fix.
- Fix: ClubCMS: Member Signup: fix the displayed transaction fee for low membership amounts -- it should be 1.95 and not 0.95 (it was just a display issue though, the correction transaction fee is computed when the user proceeds with the payment)
- Fix: NZGreenFeeData build - went to new version of SQLPACKAGE.EXE to fix connection to Dev4.  Looks like the SQL Server compatibility level got bumped somewhere along the line.
- Mod: WHSAPI: alter two existing indexes to improve handicap review query
- Fix: Script 3477 did not execute because of missing GO statements.  Also restructured it slightly to avoid having to update all rows in the table to set CreateDate to null/unknown after adding the default.
- Mod: Reports: Extquery regionId system parameter now works for clubs too
- Fix: ClubCMS: Promotions editor: Changed quill to ckeditor.
- Fix: Live: members with OBEs no longer have them show as Obe
- Mod: Live: remove stray Console.beep()
- Revert Merged revision(s) 43124 from Trunk/Shared/DotGolf.Core/Vortex/VortexHostDiscovery.cs: Mod: Core: Vortex host discovery now gets skipped in debug mode if you are not authorized (occurring debugging against GB&I prod). Temp hack until DFH gives everyone the correct AWS permission ........
- Fix: Live: extquery report erroring when clicking View In Excel
- Mod: Slicer: For Futures Auckland (Club ID 915), use the same Merchant Fee computation as Flexiclub's (700)
- Mod: Core: regen WHSClient.g.cs
- Add: WHSAPI: handicap review endpoint
- Mod: Live: validation to stop Live userids being all numbers to stop people using their member number as a Live login #5000725 #5000899
- [CODE REVIEWED TO HERE] Mod: #txline-clubid-performance PART 1 - we're adding ClubId and TranDate to TXLine.
- Mod: Reports: Extquery reports have regionId system parameter now
- Mod: ClubCMS: GolfNZ: Added the club name in the initiative events.
- Fix: Live: Can filter by Family member category in GI #5000367
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Archived old solutions no longer used.
- Mod: ClubCMS: GolfNZ: Added the Display Registration Link in the event details.
- Mod: Live: Love Golf: Added the Display Registration Link when creating/updating an event.
- Mod: Live: Love Golf: Added the Display Registration Link when creating/updating an event.
- Add: Debug code to run manual jobs against prod servers.
- Cleanup: Remove old cruft.
- Performance: Improved debug log viewer performance by eliminating some index scans on IX_DebugLogEntry_CreateDate.
- Mod: Minor performance tweak; see if splitting this cross join query will make a difference in Prod.
- Mod: ClubCMS: GolfNZ: Changed the order of the event list. Added the event details link in the map.
- Fix: Jenkins build: Missing from previous commit 34575.
- Mod: API: /mygolf/search-for-friends: Add "SearchHint".
- Mod: ClubCMS: Member Signup: added "form-group-x" CSS classes for easier selection when needed
- Fix: ClubCMS: GolNZ: Tee times: Player is being cut out on smaller screens.
- Mod: Live: show GI category search box in member tab for GI #5000906
- Fix: Live: do not include deceased social members in basic member search
- Mod: ClubCMS: Member Signup v2: moved up Ethnicity; updated some letter casing for consistency
- Mod: ClubCMS: Member Signup v2: moved up Ethnicity; updated some letter casing for consistency
- Mod: Scheduled tasks: WHS score sync no longer performs terribly, so removed date strict safeguards on syncs
- Mod: ClubCMS: Member Signup: default select card payment method for Futures Auckland (as done for Flexiclub)
- Mod: ClubCMS: GolfNZ: Added the FieldName in the competition rounds dropdown.
- Mod/Add: ClubCMS: Futures Auckland: add a "welcome email" template for Futures Auckland
- Fix: Live: deceased members no longer show in advanced search when purely searching resigned or live+resigned people
- Fix: WHSAPI: Add back 'optimise for 2100-01-01' hack to away score sync in addition to option (recompile) because sql REFUSES to use a good plan otherwise. Filtered index rubbish
- Fix: WHSAPI: Scaled adjusted gross score was 1 less than it should be for people returning a score on a back nine (with HoleNo values from [10,18]).
- Mod: Live: remove AU home club change code in tabmembers
- Fix: ClubCMS: GolfNZ: The adjusted scores is incorrect if a player only played 10 holes.
- Mod: ClubCMS: Member Signup: added two optional fields: Emergency Contact Name and Emergency Contact Number
- 'Fix': Live: change Member Handicap Listing to Member Handicap Index Listing. Glad to see we've whittled the GI support down to these sorts of things. #5000421
- Mod: Live: Handicap listing always shows 9h markers when selecting individual category, even 18h categories. Also it is a bit faster. #5000366
- Mod: ClubCMS: sql: add new columns EmergencyContactName and EmergencyContactNumber to CWMembershipApplication table
- Mod: Live: when merging members, bump number of people in the dedup search up to 250
- Mod: WHSAPI: added failing test for back-9 nine hole scaling bug (Scaled adjusted gross is one less than expected)
- Mod: WHSAPI: simple 'using's in NineHole tests
- Fix: WHSAPI: sql error in prev commit (found while running the unit tests)
- Fix: ClubCMS: GolfNZ: The friends list handicaps is not showing '+' for better players.
- Mod: WHSAPI: Remove optimise for 2100-01-01 hack from away score sync in favour of option (with recompile) since the query plan is fine now.
- Mod: Adweb: gender change requests no longer show multiple times
- Mod: Reverse Proxy: sites.list: added S,W,0,1,futuresauckland.co.nz
- Mod: ClubCMS: bindings.list: added futuresauckland.co.nz and www.futuresauckland.co.nz
- Fix: ClubCMS: GolfNZ: Text correction.
- Mod: ClubCMS: Changed quill editor to CK because of js conflict.
- Mod: Live: handicap listing report wording changed slightly to it's more obvious that '9 hole men' means men in a 9 hole category #5000366
- Mod: Org: bulkmarkerupdate can now also move scores from deleted markers to new markers #5000672, #5000855 and #5000932
- Fix: Org: Omit httpRuntime 4.7.2 for now. Encountered runtime errors after publishing this setting to Prod so may need to allocate some time to test this properly.
- Fix: Org: NavigationService GetClubhouseNavigation no longer causes async deadlocks when running in httpruntime targetframework 4.7.2
- Fix: WHSAPI: stop whsscore sync from timing out by removing awful " and (s.PlayedAtUTC between om.CreateDateUTC and isnull(om.DeletedDateUTC, '9999-01-01')) "  where condition
- Fix: Org: #36655 PaR NZ unable to perform updates to players' registration status because the request payload exceeded the limit of 4mb (default). Increasing the limit to 10mb (same with other systems like Live and ClubCMS).
- Fix: Adweb: can now search for Wales people by membercode
- Mod: ISVAPI: if we find someone whos resigned in another union, ensure the cmember record we create for them is also resigned
- Mod: Adweb: only show "Live CMember record for MemberCode 1008618729 duplicated 2 times." outside Wales and England
- Fix: Live: if someone in our union started as a home member here, then became a home member of another union, there's never a cmember record inserted for the home union. added workaround to get the name of that persons home club in our union
- Fix: ClubCMS: #36704 - Tournament Registrations: Use the person's e-mail from his/her registration record instead of retrieving it from his CMember record.
- Mod: Org: change i to I
- Mod: Org: update club page - made it more clear when a course belongs to another club
- Mod: WHSAPI: Merges update the change date of all scores for the merged members so they sync between unions afterwards
- [NEEDS REVIEW] Mod: Org: Can now terminate a course if all it's markers have ended. Goes against this comment: //DFH Cannot delete a course if it has any NZCRData records linked (even if they are inactive - DotGolf deactivates courses)
- Add: Org: Can now use Org to assign club the course of another club. Tickets 5000652, 5000684, 5000699, 5000720, 5000758, 5000766, 5000797, 5000800, 5000836, 5000853, 5000865, 5000870
- Fix: ClubCMS: GolfNZ: The question are not appearing when logged in via the new control.
- Fix: ClubCMS: GolfNZ: The question are not appearing when logged in via the new control.
- Mod: Org: When viewing live courses, filter courses by clubid - this stops duplicate entries showing for (virtual) clubs like Artisans who PLAY at other courses but don't own the course.
- Mod: Shared: remove ScoreProperties reflection from the ScoreListing class to see if it's still used anywhere.
- Mod: Core: regen WHSClient.g.cs
- Mod: ScheduledTasks: improved the //comments in GetScoresFromWHS
- Mod: WHSAPI: ForceUpdateChangeDate flag when posting scores to ensure changedate is updated (which affects syncing to other unions)
- Mod: WHSAPI: update petapoco
- Mod: WHSAPI: refactored to use some simple 'using's in HandicapDataManager
- Fix: Live: Home club change requests no longer sent to defunct club email. #5000788
- Mod: WHSAPI: unit test for score updates affecting ChangeDateUTC
- Mod: WHSAPI: ChangeDateUTC now updated when a score is updated. The property needs a setter because petapoco is garbage. Purposely excluded from the Equals method because it's an update-only property, and we're always updating it to UtcNow
- Mod: WHSAPI: refactor to use simple 'using's in score CRUD tests
- Mod: WHSAPI: Remove unused HD property from PostScoresRequest
- Mod: Live: Club Member listing now shows full membership number (not abbreviated.) Hopefully NZ doesnt complain. #5000879
- Mod: adweb: not a bug if course detail is duplicated but deleted
- Fix: #mygolf-score-entry: Jenkins build
- Mod: API: #mygolf-score-entry; Distance unit full name instead of abbreviation.
- Fix: API: #mygolf-score-entry: Display appropriate distance (meters or yards) depending on the club's preference (set in Settings.CardPrinting.DistanceUnit).
- Mod: WHSAPI: Organisation pcc test updated to reflect new behaviour of endpoint
- Mod: WHSAPI: Unmerge - more useful error message when merge start date not found
- Mod: Live: Bulk Email v2: club website news topics query: return the news topics from the latest website only to avoid confusion
- Mod: API: #mygolf-score-entry: If we have the attester's passport id, we should still save the person's central member code in the ScoreEntryStage.AttesterInfo column.
- Fix: ScheduledTasks: Build
- Fix: API: #mygolf-score-entry: Round Unable to save round setup error.
- Mod: Org: When course changes force approved, send new markers to WHS BEFORE we insert any affected scores into the BulkMarkerUpdate, to avoid BulkMarkerUpdate encountering a score with a marker that has a null WHSMarkerUID which makes for confusing debugging.
- Fix: API: #mygolf-score-entry: Fix issue unable to load previously submitted scorecard because of an invalid MemberOrNonAffiliateId - was always set to 0.
- Fix: Org: Force approved course changes did not insert into BulkMarkerUpdate table as intended - sql error. Added extra join condition to the insert to pick up scores with incorrect nzcrdataIDs
- Fix: Shared: #mygolf-score-entry: Fix performance - Remove unnecessary joins in ScorecardRepo.GetActiveScorecards. Mod: API: #mygolf-score-entry: Save the attester's passport id.
- Fix: ScheduledTask: sqlexception was being thrown because there was No Marker Match For Play Date for that score, but the code wasn't exiting correctly
- Mod: ClubCMS: GolfNZ: Added news list horizontal layout.
- Mod: ClubCMS: GolfNZ: Added news list horizontal layout.
- Mod: ClubCMS: rMemberSignupV2: replace smart quotes in the last (and first) name with normal quotes.
- Mod: ClubCMS: StringExtensions: added ReplaceIncompatibleQuotes
- Mod: SCHEDULED TASKS run ASYNC and LOG ASYNC now. Needs testing in GBI stage. Prevents task crashes caused by trying to get redis locks synchronously and not awaiting Datalogger calls
- Fix: KountaClient: PostAsync now waits for the ratelimiter asynchronously as well. Added angry docstring to non-async LockWaitAndTake
- Mod: ScheduledTasks: WHSHookCleanupTask doesnt log anything if there's no scores to send
- Mod: ScheduledTasks: WHSHookCleanupTask logs better exceptions
- Mod: WHSAPI: some simple 'using's in HandicapDataManager
- Fix: ClubCMS: GolfNZ: Score hole alias.
- Fix: ClubCMS: GolfNZ: Scores: Added hole number alias.
- Fix: API: Ability to load an already "Returned" scorecard in the app. (Missing from previous commit svn 43421)
- Fix: Org: sql error in pending course change page
- Mod: Live: Competitions: use the course-marker-selector control when selecting the course and marker for clubs with the VCC product. VCC stands for Virtual Club Competitions. These clubs have the permission to play at any course (side note: the creation of the draw sheet has a dependency on the group booking created by the golf club)
- Mod: Live: Competitions: included MarkerId and CourseId in the marker data.
- Mod: Live: Competitions: knockout.dotgolf.extensions.js: markerSelect: added onSelected
- Mod: API: #mygolf-score-entry: Add new endpoint /list-submitted-scorecards - Retrieve previously submitted scorecards. https://dotgolf.atlassian.net/browse/DG-2774 Mod: API: #mygolf-score-entry: Ability to load an already "Returned" scorecard in the app.
- Mod: Live: removed redundant IF condition in create member page submit
- Fix: Live: When searching by number in Golf Ireland, member quick search would show 2 duplicate rows for the same person
- Fix: Org: Eligible for handicapping checkbox always loads as ticked even when the marker is saved as not eligible for handicapping
- Fix: Live: Fix #35113 - Unable to reject a home club change request.
- Mod: Bulk Email: Golf NZ: updated the twitter URL
- Mod: ClubCMS: Golf NZ: updated the twitter URL
- Mod: Live/Org: add tooltip for Matchplay indicator in score listing
- Fix: Live/Org: PCC no longer displays as 0.0 in member score listing
- Mod: ISVAPI: clarify in docs that somethings holeNo can be from 10-18 for a back nine and that all we care about is the order
- Mod: ClubCMS: GolfNZ: Club news control. Grid view.
- Mod: ClubCMS: GolfNZ: Club news control.
- Mod: ClubCMS: GolfNZ: Club news control.
- Fix: Org: Member count report ORNS when trying to LangReplace string format a null value
- Mod: Org: Deploy new cool member counts report
- Fix: Org: ordering of pending/approved course changes no longer weird (now always by course name)
- Fix: Live: Rejected Course Changes were being flagged as accepted incorrectly in the database #34745
- Mod: Freshdesk article link pasted into report source code for future reference.
- Add: Unfinancial Members report (https://dotgolfinternational.freshdesk.com/a/tickets/5000863)
- Add: ExtQuery: In most areas (like header/footer text, column names, cell values etc) you can now put language terms, e.g. ${Lang.District} will be replaced by District in NZ and by County in GB&I.
- Mod: Core: rename namespace of new Core DataCache
- Fix: ISVAPI: downgrade newly added system.runtime.caching to 4.5 so i don't have to upgrade all the packages in ISVAPI
- Add: Core: a new Core version of DataCache that uses system.runtime.caching
- Mod: PCC report now includes score count, also allows users to pick whether they want to see PCC=0 or not. Fix: PCC report data source no longer use WHSAPI properties that do not exist.
- Add: ExtQuery: ColourFormatter allows us to shade cells/text based on incoming data values.  #squirrel Fix: If you set a TextAlignment on a formatter, the header cell should also be aligned suchlike.
- Mod: Org: hide 'Only Members From My Clubs' label when logged in as root union
- Fix: Adweb: can find person by memberid in SearchMember page
- Fix: Had to fix up a few things with the loss of the CoursesWithZeroPCC property in WHSAPI.
- Mod: removed duplicated clause and added clarifying brackets to a bool expression in live_findmembers_basicwithcategories
- Mod: Live: Competition: renamed IsNomads to HasVcc (has "Virtual Club Comp" product)
- Fix: ClubCMS: GolfNZ: Duplicate players in handicap rankings.
- Fix: Live/Adweb: Advanced search finds secondary members again. Fix: Org: Can search by NZGA subcategory again
- Fix: WHSAPI: Sigh, InitialScoreImport is part of the build, so actually has to compile.
- Mod: WHSAPI: Removed CoursesWithZeroPCC property because we now have to return all PCC=0 values too (because we need to look at ScoreCount and do things on report level). Mod: Refactor GetPCCOld to use GetPCC code instead of duplicated. Fix: Made unit tests pass.
- Fix: ClubCMS: GolfNZ: Tag management solution fix.
- Mod: ClubCMS: GolfNZ: Admin tag management
- Mod: ClubCMS: GolfNZ: Admin tag management
- Fix: WHSAPI: Put the safety back on in BaseDataImporter.cs.
- Fix: Ticket #36493 Low balance account notification email - Fix broken link to the my account page.
- Add: WHSAPI: Store the score count when computing PCC for a course and date.  This will allow us to tell the difference between PCC=0 because the course played normally and PCC=0 where there weren't enough scores returned.
- Fix: TeeBooking: We should keep the payment if the booking already exists whenever ApplyBookingChanges fails. Mod: TeeBooking: Send a ticket to helpdesk@golf.co.nz whenever short circuited transactions occur (because ApplyBookingChanges failed).
- Mod: API: #mygolf-score-entry: NZ does not use score intent as of the moment so we should not be creating score intents when starting a round via the DG app (and soon in the MyGolf app).
- Fix: Live: can now search for people by secondary member number again (bug was introduced by a clause being added to the membernumber part of this query that only applies to the surname part) #36137
- Mod: Live/Org: Hide UnsatisfiedScoreIntents report in NZ because they dont support it yet
- Mod: WHSAPI: ScoreHistory memberid index (will help decide whether to unmerge someone)
- Mod: Org: Handicap change report mods so Golf Ireland can filter by when adjustments were made, not just all players with adjustments
- Mod: Live: Unsubscribed members report hidden if club doesnt have bulk email
- Fix: Live: Only show comp fees report if club has Comp product (instead of also card printing+fixtures)
- Fix: Live: Only show comp fees report if club has Comp product (instead of also card printing+fixtures)
- Fix: Bulk Marker Update: Old course name was shown instead of new (in preview area).
- Fix: Org: GetClubProductCodes was always using clubID 290
- Mod: Live: changed text in user admin page to imply that you don't need to type your club number in front of the user id when creating a new user
- Fix: ClubCMS: GolfNZ: Scores table mobile landscape scrolling issue fix.
- Mod: Org: District users can now search across all club members but can only see personal info like email of users from their district
- Mod: Reverse Proxy: added S,W,0,1,wellsfordgolf.co.nz
- Mod: ClubCMS: bindings: added wellsfordgolf.co.nz and www.wellsfordgolf.co.nz
- Fix: ClubCMS: GolfNZ: Future tournaments are being displayed in past tournaments. The competition date is in the future but finished date is in the past.
- Fix: Core: 'distinct' hole-scores when loading Score hole-scores to prevent duplicates caused by deleted markers
- Add: Live/Org: International marker backdating in SIC #5000594
- Fix: Order tournament results by countback on golf.co.nz (for 5CC - hope this doesn't upset GNZ).  (not ranking them that way though)
- Fix: Live: bug preventing international scores getting submitted if WHSCountryUIDs have not been saved in union DB yet
- Fix: 5CC leaderboard was not ordering by countback.
- Fix: API: MyGolf: Unable to find players who have apostrophe on their name (e.g. O'Brien, O'Shea). https://dotgolfinternational.freshdesk.com/helpdesk/tickets/5000802
- Fix: Patch to stop the registration update page screwing up people's handicaps by overwriting them with those from the registration record.
- Mod: Live: score listing shows entered-by org name next to the score if it was entered by an org
- Fix: Live: international scores entered by the parent union now get sent to WHS properly in GB&I #5000620
- Mod: removed old school handicapping from api_addscore. international scores entered by the union in GB&I no longer use capturedbyclubid 900, using 0 instead
- Mod: Live: replace iif with case-when in useradmin because it's a bit nicer
- Mod: ISVAPI: revert ParallelForEachAsync being actually parallel - seems to be causing perf issues in WAL after deploying it on 20/01/2021 8:00pm
- Fix: Org: PCC report ordering was weird
- Fix: Org: PCC report course name wasnt showing
- Mod: Live/Org: PCC report looks a bit nicer but i'm not proud of it
- Add: Live/Org: PCC report now shows summary table at the top
- Mod: Live/Org: extquery CSV reports now support multiple tables being returned from datasets
- Mod: Live/Org: extquery html reports now support multiple tables being returned from datasets
- Fix: Live: commit WHSClient.g.cs
- Mod: WHSAPI: added back the old PCC endpoint so as not to break existing clients
- Fix: Build: missed a file after prev commit
- Fix: Live: commit WHSClient.g.cs
- Mod: WHSAPI: Add non-zero PCC courses to the PCC endpoint response for England Golf's reporting. Will do the Org side before deploying
- Fix: Live: undo PCC string format 0.0 => 0 in WHS score listing
- Fix: Live: hole-scores array is wrong for scores that match a deleted marker. I'm too scared to add a deleted filter to the hole score query so this will have to do.
- Fix: Adweb: deleted scores no longer count as duplicates, only show scores on non-deleted markers
- Fix: Live: PCC string format 0.0 => 0 in WHS score listing
- Fix: Org: UnsatisfiedScoreIntents report works again for orgs in GB&I
- Fix: Live/Org: Sql error in UnsatisfiedScoreIntents. its a bad day today.
- Mod: ClubCMS: GolfNZ: Tournament gallery.
- Mod: ClubCMS: GolfNZ: Tournament gallery.
- Fix: Org: UnsatisfiedScoreIntents works for GolfNZ again
- Fix: Live: UnsatisfiedScoreIntents NOW filters by the logged in club
- Fix: Live: finally fixed the UnsatisfiedScoreIntents report??
- Fix: API: #mygolf-score-entry: Insert into ScoreIntent table failed because of System.Data.SqlClient.SqlException (0x80131904): Must declare the scalar variable "@MemberOrNonAffiliate".
- Mod: Live: UnsatisfiedScoreIntents filtered by the logged in club
- Mod: Live/Org: UnsatisfiedScoreIntents report better exceptionhandling
- Mod: Live/Org: UnsatisfiedScoreIntents maxdop from 100 to 50
- Mod: Live/Org: UnsatisfiedScoreIntents maxdop from 200 to 100
- Fix: Core: no more connecting to the database EVERY TIME we send a request to WHS
- Mod: API: /search-for-friends: AllowProfileView flag to indicate whether to allow viewing of a person's MyGolf overview that is not a friend.
- Mod: Core: remove unused private method from HandicapProviderWHS
- Mod: Live: PCC report UI fixes
- Mod: Live/Org: UnsatisfiedScoreIntents report performance improvement v2 using ParallelForeachAsync
- Mod: Live: PCC report UI fixes
- Fix: ParallelForEachAsync actually parallel now. Will speed up handicap caching and ISVAPI
- Mod: BulkMarkerUpdate: Allow filtering by SSS value of imported scores. Moved SUBMIT button out of the way (float right) and made it angry red to differentiate it from the PREVIEW button. Show score SSS values in preview table.
- Mod: Live/Org: simplified UnsatisfiedScoreIntentsDataSource to not need ServiceLocator when fetching from whs
- Mod: Live/Org: UnsatisfiedScoreIntents report performance improvement v1
- Fix: Live: Preprint service v1 caches handicaps for dates properly
- Fix: Build: commit WHSClient.g.cs update
- Fix: Live: Prevent old users causing duplicate login issues with golf.co.nz if they used their membership number as their live username #35875
- Mod: Live: UnsatisfiedScoreIntents report performance improvement
- Mod: ClubCMS: Golf Ireland: Member Search and Friends
- Mod: WHSAPI: better performance on unsatisfied scoreintents by filtering by orgUID - client can spam us in parallel to get all intents for each club instead of serially paging a zillion times
- Mod: WHAPI: increase score intent page size to stop report timing out in Live. If this becomes a problem again I'll put in a different solution
- Fix: ClubCMS: GolfNZ: B9 scores are showing as F9
- Add: API: #mygolf-score-entry: score intent submitted when starting a round in the DG app, and is fulfilled when the user submits their score
- Mod: TBTransactionProcessor: SubscriptionRenewal (Flexiclub): in the query of payments to be processed, I just excluded logically deleted SubAutoRenewalRetry records
- Mod: WHSAPI: added 'NONCLUSTERED' keyword to ScoreIntent indexes for completeness
- Mod: API: /search-for-friends: Golf Ireland mods.
- Mod: Live: code style change
- Fix: Live: reset username in live updates passportcredential properly
- Fix: ClubCMS: GolfNZ: OOM tournaments not displaying because of invalid cast.
- Mod: WHSAPI: added Member table index to speed up unsatisfied score intent query
- Fix: WHSAPI: forgot swaggerfile
- Mod: WHSAPI: removed obsolete method for getting unsatisfied scoreintents
- Mod: ClubCMS: GolfNZ: Control - golfnz-highlights - combination of news and program events.
- Mod: ClubCMS: GolfNZ: Control - golfnz-highlights - combination of news and program events.
- Mod: Add column to ScoreIntent to prep for score intent creation via the app.
- Mod: Live: Remove AU-specific AdditionalStroke logic that's gone away with WHS
- Mod: Live: Macharg to longer changed to MacHarg
- Mod: Org: Remove dead petapoco reference from csproj
- Mod: Org Tournaments: Show members' current handicap indexes in the tournament players list, not their registered handicap index.
- Add: Org: can now update the region of a club.
- Fix: Org Manage Players: Small UX improvement to the layout.
- Mod: Org: Add Region to club detail page
- Mod: ISVAPI: extend timeframe for Wales Golf to upload members
- Mod: ClubCMS: Cute Editor to CKEditor for rcontent control.
- Fix: When recalculating competition divisions (when you have changed division cutoffs) we need to ignore Freeze Divisions, otherwise people are stuck in whatever division they were in before the user clicked SAVE.  This caused the "Multiple" divisions thing in the Manage Players area.
- Fix: When counting players in a division we didn't filter by withdrawn players, which meant the total didn't match the total accepted players into a competition.
- Mod: Shared: removed unused DatabaseTransaction parameter in HoleDetail.ForCourse
- Mod: BulkMarkerUpdate: Fixed member scoring history link (did not work before), changed to _target=blank, headers are now FROM/TO.
- Mod: ClubCMS: remove old mini-rollover code when signing up flexiclub members - no more rollover in WHS world
- Fix: BulkMarkerUpdate: Only filter by ImportedByScoreId column if it is present in the database.
- Mod: BulkMarkerUpdate: When bulk updating scores to a new marker, only do imported scores for now - this is for safety, we don't want to stuff with scores that were entered in manually or uploaded from ISV systems.
- Mod: Shared: removed AssociationName property from ClubMemberCount since it just points to WebUser.FromHttpContext.Association.Name which is web tier, not database tier
- Mod: Course Changes: When backdating course changes we now insert affected scores into BulkMarkerUpdate so their NZCRDataId values get updated and they get re-sent to WHSAPI. This is only active if AllowBackdatingMarkerChanges is ON (so is safe for NZ).
- Fix: Org: Expire club DataCache value (containing Name and Fullname) after the club is updated by the user
- Mod: BulkMarkerUpdate: Minor UI and performance improvements. Course.cs updated to use Query<X> rather than a foreach loop that fires off 100s of unnecessary queries.
- Mod: Shared: removed redundant constructor from Data.Club
- Fix: DG-2833 Incorrect MinGreenFee calculated if timeslots have a time-of-day limit on them.  This restriction simply wasn't present in the wa_TBSearchSlots proc the same way it is in wa_TBCalculatePlayerGreenFee.
- Mod: Live: added type aliases into the reporting definitions DataSource class to make it easier to understand what IList<IList<IDictionary<string, object>>> means
- Fix: Org: Hole Statistics report: Fix #36055 - Club drop-down is empty. Set regionId argument to "NULL" (when calling ClubRepository.GetAllClubs) if the user belongs to the Union (e.g. GolfNZ, England Golf) association.
- Mod: Live: inlined some out parameters in Score.GetScoreCardId()
- Mod: WHSAPI: some tests excepting exceptions to be thrown no longer cause the debugger to break on said exceptions (because we're expecting them...)
- Mod: ISVAPI: add email address for the test data CMember
- Mod: Adweb: style - remove commented code from sql in edit member page
- Mod: Core: Vortex host discovery now gets skipped in debug mode if you are not authorized (occurring debugging against GB&I prod). Temp hack until DFH gives everyone the correct AWS permission
- Mod: WHSAPI: Added WAL and IE to data import credentials and connection strings
- Mod: TBTransactionProcessor: PayByBillingTokenProcessor: remove the text "PGA" as this functionality will be used by other associations (e.g. GNZ)
- Fix: ClubCMS: GolfNZ: Allow to search all members again after the club has been cleared.
- Fix: BulkMarkerUpdate: Brutal looping once we run out of work to do.
- Fix: BulkMarkerUpdate: Minor UX thing with preview tile showing up right aligned.
- Fix: BulkMarkerUpdate: Removed debug/testing code.
- Mod: Live: Score Entry: Non-CP clubs who have the ASCE (App score entry) product is unable to turn on/off the setting to allow home club members to create a digital scorecard from their device.
- Add: BulkMarkerUpdate: UI to allow Org users to update score markers in bulk (for a date range).
- Add: BulkMarkerUpdate: Background task to update scores and send changes to WHSAPI.
- Mod: Live/Org: update general play and matchplay score indicators to have bootstrappy colours like activity tracker
- Mod: Live/Org: Score listing indicator colour changes
- Fix: Live/Org: missed a file
- Fix: Live/Org: Competition/general play and matchplay indicators show in score listing
- Fix: Org: removed a.prev and a.next CSS causing the SIC calender date to look weird (that css has already been removed from Live)
- Fix: ClubCMS: GolfNZ: The getimagecontentpost query is returning multiple rows.
- Fix: Org: County association users can delete scores now #5000683
- Mod: API: #mygolf-score-entry: For GB&I - Scores submitted thru the app will need to be verified and approved before it can be submitted for handicapping. Mod: API: Move UserHasAccessToScorecard method to DigitalScorecard class (Shared). Fix: Settings.Scorecard - Fix typo in the description.
- Fix: Org: Searching for someones' secondary memno works in org now. #5000698. Simplified some isnulls in live_findmembers_searchtext. Will add another commit to simplify the confusing/duplicate @SearchText+@UserClubId logic but waiting for DFH to sanity check it
- Mod: ClubCMS: GolfNZ: Member search enhancement for mobile.
- Mod: ClubCMS: GolfNZ: Member search enhancement for desktop.
- Fix: Should not consider deleted scores in handicap comparison report.
- Fix: Course Handicap language usage in the calculator.
- Fix: Org: The levy popup is not appearing.
- Mod: ReverseProxy: added two urls:
- Mod: ClubCMS: bindings: added futuresauckland.cw.golf.co.nz and kiwigolfclub.cw.golf.co.nz
- Mod: ClubCMS: My Account: PaymentDataRec: added DotGolfSurcharge
- Mod: ClubCMS: rMyAccount: applied the same logic as done in TBTransactionProcessor SubscriptionInstalment
- Mod: Kounta orders now get a 30 day TTL in Redis so they eventually get purged from cache.  I'm also doing a manual update to set random 30-120 day TTLs on all existing kounta-order-xxx keys so that they will eventually get cleaned up.
- Fix: If a non-affiliate record has a name with trailing spaces, the concatenated `LastName, Firstname` value exceeds the allowed name length.  Trimmed the values before concatenating to sort this out.
- Fix: ClubCMS: GOlfNZ: My Scores: 20th score line indicator on page > 1, there is a line on the page indicating the 20th score (which is not relevant for page > 1)
- Fix: ClubCMS: GolfNZ: Waitlist popup ui fixes.
- Fix: Membership over last 12 months chart was not showing up because Association 1000 regionId == 0 (should be considered as null)
- Fix: If a score PlayedAtUTC value conflicts with another score for the same member, we bump the new score by 10 minutes to keep them sequential.  However, this could cause a score to go into the future, which caused problems in GetScores().  Now we will clamp it to UtcNow so we can't end up with future dated scores.
- Mod: Live: removed redundant old-Handicap-constructor usage inside getresults.cs, and the accompanying large comment
- Fix: Live: club combo no longer cached for 120 min because it's a trivial query and causes confusion when someone creates a new club and expects it to show in a list
- Fix: Live: scores re-imported into WHS using the WHSScoreInsertedUpdated hook had their OverridePCC value clobbered.
- Fix: API: ScoreEntry app: Fix #35931 - Affiliated visitor (from Wanaka) was able to create a digital scorecard at Omakau GC (Got ASCE but no CP and UFP products).
- Fix: ClubCMS: GolfNZ: Minor UI my golf tables fix.
- Fix: GolfNZ: handicap graph would not show if someone had a legit Pending score in the top 20 (e.g. memberid 117783, 9h score with not-attempted holes <- invalid for handicapping). #35198
- Mod: ClubCMS: GolfNZ: Added a separation between my golf sections.
- Fix: ClubCMS: MyAccount: Fix #34951 - Akarana GC members unable to top-up their HOUSE account online because of "ArgumentNullException" (AXAccountTypeClub.AccountTopUpPricesJSON is null).
- Fix: Live: Primary key error in dbo.@Members when creating new members. Root cause is duplicate person-club-details being created at a club for a non-affiliate. Haven't fixed the root cause because I can't figure out how it's happening, but I've stopped it affecting advanced member search. #35867
- Fix: API: Fix Jenkins build - Missing from previous commit :(
- Mod: ISVAPI: Wales Golf requested that ISVs be able to update member details again, turning it on for 1 week as per email from Matt
- Mod: Products table: insert VCC (Virtual Club Competitions) product. This will initially be enabled for Kiwi Golf Club and Nomads.
- Mod: ClubCMS: Member.cs: GetInvoicesForMember: updated the condition used for getting outstanding invoices (look at the OutstandingAmount instead of the PaidDate because apparently, there are zero dollar invoices existing in the system with null PaidDate)
- Fix: ClubCMS: GolfNZ: Remove undefined text from the handicap section.
- Mod: Live: replace "T2" with "VCC" product.
- Mod: Live: TournamentSetupWidget.ascx: replace "T2" with "VCC" product.
- Mod: Live: TournamentRegistrationsWidget.ascx: replace "T2" with "VCC" product.
- Mod: Live: Score/Entry.aspx.cs: document.PrefScoreEntryByComp: replace "T2" with "VCC" product.
- Mod: Live: Navigation.cs: scores: update condition to use "VCC" product (replacing "T2")
- Mod: ClubCMS: GolfNZ: Added news thumbnail.
- Mod: ClubCMS: GolfNZ: Added news thumbnail.
- Mod: Live: Club Competitions: check for VCC product (to allow setup of competitions at golf clubs for virtual clubs like Nomads and Kiwi Golf Club)
- Fix: API: #mygolf-score-entry: App still prompts for user to check in at the club even though it's not required.
- Fix: ClubCMS: GolfNZ: Club banner image get latest from s3 fix.
- Fix: ClubCMS: GolfNZ: Club banner image get latest from s3 fix.
- Fix: Live: SourceTimesheet.aspx.cs: Group Booking: assign a defaultGroupBookingId value when we don't see any matching Group Booking (based on name of the virtual club e.g. Nomads) so that the Timeslots will successful display.
- Fix: ClubCMS: GolfNZ: RTE font fix.
- Mod: API: #mygolf-score-entry: /create-scorecard - If check in at club is not required, retrieve club record by CourseId.
- Mod: API: ScorecardController: /save-score endpoint - No changes permitted once scorecard has been returned.
- Mod: API: #mygolf-score-entry: Add new endpoint "/list-markers".
- Mod: API: #mygolf-score-entry: GB&I business rules. 1. Check-in is not required to create a digital scorecard. 2. Allow affiliated members to create a digital scorecard at any club.
- Fix: Shared: Levy Audit: Fix #35799. Use table alias when referencing IsHidden column from NZGASubCategory table to avoid "System.Data.SqlClient.SqlException (0x80131904): Ambiguous column name 'ishidden'."
- Mod: Modica: Switching to "api.modicagroup.com" as the "gateway.sonicmobile.com" endpoint will no longer be available after 28 Feb 2021.
- Mod: API: HandicapTxt: Modica API Updates 1. Switching to "api.modicagroup.com" as the "gateway.sonicmobile.com" endpoint will no longer be available after 28 Feb 2021. 2. Web.config and Web.config.Production - Added "<security mode="Transport"/>" in the ModicaSoapServiceBinding configuration since the API is only accessible via HTTPS.
- Mod: API: Golf Ireland - Enable the API endpoints in Dev and Staging environments.
- Mod: Live: WHSScoreInsertedUpdated can no longer accidentally send deleted scores to WHS as real scores
- Fix: ISVAPI: properly hide handicap index etc from Association
- Fix: ClubCMS: zPasswordReset: Changed the property name to "ForgotPasswordResetPage" to match the property name in the database. In the database, the property name is "ForgotPasswordResetPage" but in the code it is "ForgotPasswordPage".
- Fix: ISVAPI: was not populating address/email when fetching association members by changedate
- Fix: ClubCMS: zPasswordReset: Fix #35565 Password reset page errors out for casual golfers.
- Fix: ISVAPI: should be using 'W' instead of 'F' as the female gender character when creating test data
- Add: ISVAPI: Member endpoints for associations (i.e. England Golf wanting stuff for their CRM integration).
- Mod: ClubCms/Member.cs removed empty trycatchthrow
- Add: sql: 3 change date indexes to speed up getting member changes by association in ISVAPI for England Golf
- Fix: ClubCMS: Public2020: Remove stats chat row hover.
- Mod: ClubCMS: Public2020: My Overview mobile view: Rearranged the order of member search and dropdown.
- Reverse Merged revision(s) 42993, 42990 from Trunk: (because adjustment column is no longer showing on golfnz, so Phil has asked us to hold fire on this one) Fix: WHSAPI: Correctly add adjustments to HDPostPCC before calculating handicap ........ Fix: WHSAPI: HDPostPCC should NOT include adjustments values - causing confusion in score listing ........
- Fix: WHSAPI: Correctly add adjustments to HDPostPCC before calculating handicap
- Mod: Bulk Email: updated the casual golfer recipient query to further prevent duplicates (caused by multiple passportcredential records for one nonaffiliate record)
- Mod: Bulk Email: updated the casual golfer recipient query to further prevent duplicates (caused by multiple passportcredential records for one nonaffiliate record)
- Fix: WHSAPI: HDPostPCC should NOT include adjustments values - causing confusion in score listing
- Mod: ClubCMS: Public2020: Added a year in the news article admin year dropdown.
- Fix: WHSAPI: unmerge should not be available unless the person is deleted
- Fix: Adweb: 9h scores would not merge sometimes
- Fix: Live: member scores page Updating Handicap spinner gif not found
- Mod: ClubCMS: Public2020: Hyundai text change.
- Mod: ClubCMS: sql: CWImageContent.Description alter column length
- Fix: ClubCMS: Public2020: Primary buttons are hidden in mobile view.
- Add: Adweb: EnglandAssociation ISV role can be created now
- Mod: ClubCMS: Golf Ireland: my-scores legend: minor style update
- Add: ISVAPI: EnglandAssociation role
- Mod: ClubCMS: Golf Ireland: Template.aspx: add rev query string parameter to a js file reference
- Mod: ClubCMS: Golf Ireland: low index css
- Mod: ClubCMS: Golf Ireland: style updates on the scores table on mobile (some were copied from Rev 42709 main.css (Golf NZ) mods);
- Mod: ISVAPI: Remove code allowing WAL to update members before 2020-11-21
- Mod: ClubCMS: Public2020: Hyundai stats chat updates.
- Fix: Org/Live: deleting adjustments borked after previous commit
- Mod: ClubCMS: Public2020: Handicap ranking member link. Show link only when logged in.
- Add: Org/Live: Deleted adjustments now show in the adjustments page UI
- Mod: WHSAPI: swagger.g.json and added deleteddateUTC to Full adjustment returned fields
- Mod: WHSAPI: adjustment.sql whitespace changes
- Mod: WHSAPI: don't filter manual adjustments by DeletedDate so we can show them to the client Mod: WHSAPI: style change - simple usings in memberscontroller adjustment endpoints
- Fix: Org: sigh, merge conflicts
- Add: Org: 'member handicap changes for people with adjustments' report v0.1 for golf ireland
- Mod: Org: Show extqueryresource reports in memberdashboard
- Mod: ExtQuery: Some styling adjustments to make the footer font size appear less out of whack.
- Mod: Show ExtQuery reports in TabReports ordered by name, same as Org.
- Add: Old Member Counts ActiveReport rewritten in ExtQuery, improved to add counts by region section. Mod: ExtQuery improvements: - Allow rendering any column as a TH (so it appears in header style) - Allow for a default item in any LookupParameter so you don't have to union it in from the SQL.
- Fix: ClubCMS: TeeBooking: Add LockWaitAndTake to ensure that we only process one request at a time for a given payment result id (from WindCave). We do receive at least 2 requests for the same payment result id - 1) When the user is redirected from WindCave to /TeeBooking/ConfirmPayment.aspx 2) WindCave posting the result to /TeeBooking/ConfirmPayment.aspx.
- Mod: WHSAPI: don't get adjustments for entire org tree because slow. Must specify an orgUID (club)
- Fix: WHSAPI: missing file
- Add: WHSAPI: get member adjustments for org. Not fitered by date (yet?) Mod: WHSAPI: add adjustment Code to handicap explanation
- Fix: Bulk Email: Image Full element: fix application of the Read More URL to the image
- Mod: WHS: Remove deleteddateUTC filter from adjustment MemberId+Code index, so we can report on deleted adjustments for GI and friends as clubs are using them to manipulate hcaps
- Fix: ClubCMS: Public2020: Hero admin fix.
- Fix: Live: adjusted gross scores were saving their adj gross total into the actual gross field (as well as the adj gross field)
- Fix: Login security warnings: Avoid redirecting the user via an http:// link to DotGolf Live.  This will hopefully avoid the new security warning Chrome has unleashed on the world in the last week or so.
- Fix: ClubCMS: TeeBooking: GetFriendName() - Fix "System.ArgumentNullException: Value cannot be null." when booking a friend who is not yet linked to a Member or NonAffiliate record (exists in TBPendingRegistration table).
- Fix: Login security warnings: Avoid redirecting the user via an http:// link to DotGolf Live.  This will hopefully avoid the new security warning Chrome has unleashed on the world in the last week or so.
- Mod: ClubCMS: Public2020: Tournaments in progress.
- Fix: ClubCMS: Tee Booking: Edit Booking - Fix #35407 There are cases when we see multiple "ClubID" parameters in the query string and the last one is set to blank (&ClubId=). To ensure that we have a valid ClubId, retrieve the ClubId of the tee booking timeslot from the database.
- Mod: ClubCMS: Public2020: Tournaments in progress control
- Mod: ClubCMS: Instead of staying quiet about a duplicated PassportCredential, we will now throw and let the user know that we have struck a problem, quoting an exception number that they can use to contact support.
- Fix: ClubCMS: Golf Ireland: DBUtilities: GetImageContentDetails: fix for the recent commit (not in prod yet); correct the sql join
- Mod: ClubCMS: sql: insert control properties for the image-content-hero control
- Mod: ClubCMS: Golf Ireland: DBUtilities: GetImageContentDetails: update the sql query to correct the image path
- Add: ClubCMS: England and Wales - Permalinks to download the app from iOS or Google Play store depending on the user's mobile device.
- Fix: Some unit tests will now pass.
- Fix: Marker Sync: When sending markers to WHS, correctly UTC the start date even on a dev PC (this wasn't a problem in production, but would be if we triggered hooks in debug mode).  Extensions.DBTimeZoneTo() will now set Kind==UTC if we ask it to get a datetime in UTC, which will make a lot of other stuff frictionless.
- Fix: ClubCMS: GolfNZ: Fix #35205 - Member (who had his privacy setting turned on) logged in to MyGolf is unable to see their own competitions. Fix: ClubCMS: GolfNZ: my-competitions control - Whenever the drop-down filters are changed, reset the page number to 1.
- Mod: ClubCMS: Golf NZ css: make the radio / checkbox label cursor a pointer
- Fix: ClubCMS: Public2020: Club image banners: This is a hack to get the latest image version from s3.
- Mod: ClubCMS: Public2020: Hero: Smaller size in mobile view
- Fix: ClubCMS: rMyAccount: use AssignClubId as the SubsOrganisationId for clubs, and Flexiclub.
- Mod: ClubCMS: Golf Ireland: add the Open Graph meta tags to the rest of the pages (use the details of the first Image Content on the page, if it exists)
- Fix: ClubCMS: Public2020: My Bookings: Some tee bookings are not editable due to incorrect member’s club id.
- Fix: Live: Could not submit hole-by-hole scores between unions in GB&I #5000490
- Mod: Live: TabCreditNote.aspx: corrected an old typo: "lbVoidReceipt" to "lbVoidCreditNote"; "lbEmailReceipt" to "lbEmailCreditNote"
- Mod: Live: TabCreditNote: improvements on the options display (to make it look like the invoice options area; as done on TabReceipt)
- Mod: Live: Receipt: correct last commit (Rev ID 42879): just don't show the entire DG-only section if the conditions aren't met (anyway, there's only one option in this section at the moment)
- Mod: Live: Receipt: correct last commit (Rev ID 42879): separate the DotGolf IP checker for the DotGolf Only section
- Mod: Live: Receipt: show void link only when the receipt is active (although clicking on the void link again won't do any harm; it's handled by the code)
- Mod: Live: Invoice: View in Xero link to open in a new browser window
- Mod: Live: Receipt: View in Xero link to open in a new browser window
- Mod: Live: Receipt: Show the "View in Xero" link if the club has Xero (it used to be displayed though without the link for clubs without Xero)
- Fix: ClubCMS: Public2020: Course info back 9 par total fix.
- Fix: #coursechanges Send course change emails/notifications to the Handicapper email at the club, and the Generic contact if that isn't available, instead of the Club.Email value (which is legacy and should no longer be used).
- Fix: ClubCMS: Club Competition Results (on both club website and Golf NZ): handle when the score is a 9H score
- Fix: #coursechanges Removed/refactored a lot of old cruft.  You can no longer input strokes >9 for 9 hole courses, and if you base a 9H course off an existing 18H one, it'll automatically resequence 2..18 strokes to 1..9 so you aren't stuck with a manual editing job.
- Refactor: #coursechanges AddChange.aspx: DataSet refactored to type-safe pocos in preparation for a few fixes I am about to do.
- Fix: ClubCMS: Public2020: Friends list is displaying all and not picking up default pageSize.
- Fix: ClubCMS/GolfNZ: Hopefully prevent duplicate personclubdetail entries being created at a club for casual golfers (caused creating members at the club to fail) #35248 #35233
- Mod: Reverse Proxy: added -,-,0,1,manawatu2.cw.golf.co.nz
- Mod: Live: Invoice: Payment and Credit Notes section: added a main "Classification" to differentiate between payment and credit note records
- Mod: Live: Invoice: change how we check if it's a payment (to determine the xero url to use)
- Fix: ISVAPI: send Max() of member/cmember ChangeDate to ISVs
- Fix: ClubCMS: Public2020: Hyundai stats chat table loading fix.
- Mod: ISVAPI: member handicap changes now send down to ISVs as soon as they happen #5000531
- Fix: ClubCMS: rCompetitionResult2.ascx: fix display of Stableford points on club websites. Removed unnecessary DisplayAccumulativeResult checking.
- Fix: ClubCMS: Public2020: getMemberFriends is being called 3 times on load. The WCREV is not working for the viewmodel.js
- Add: ISVAPI: unit test for member change date update causes person to show in member changes since a date
- Fix: ClubCMS: Public2020: Friends: Scroll to top.
- Mod: ClubCMS: Public2020: Friends table sorting
- Mod: ClubCMS: Public2020: Friends table sorting
- Fix: GolfNZ: club website links not working, virtual club detail pages not working. DG-2723
- Fix: Org: prevent 2x Facility entries being inserted for a club in NZ which crashed the clubs golfnz page (there's a trigger that does it AND we were inserting it in the create script for NZ)
- Mod: ISVAPI: Trim() club category name/code before sending to ISV
- Mod: ClubCMS: Add "Reset password" link in the My Profile page.
- Mod: ClubCMS: Public2020: Teebooking: Default search date to today.
- Mod: ClubCMS: Public2020: Added the tournament message in the tournament detail control.
- Fix: ClubCMS: Competition Results: Missing closing comment tag <!-- ko if -->. Fix: ClubCMS: Competition Results: Minor UI mods. Display "loading..." message to indicate that a request is in progress.
- Fix: ClubCMS: Public2020: Leaderboard: Removed the hole by hole swiping when in mobile view
- Fix: ClubCMS: Fix ticket #35219. Competition Results not working for clubs.
- Fix: ClubCMS: Public2020: My Bookings: Null exception starttee fix.
- Mod: ClubCMS: rMemberSignupV2: remove references to the old golf.co.nz pages
- Fix: Schema script fails when run against databases where the _HyundaiDataEDM table is not present.
- Mod: ClubCMS: Flexiclub Welcome Email: update email content to remove references to lovegolf.co.nz (which does not exist anymore);
- Fix: ClubCMS: Public2020: Tee booking: added back the Google calendar link. Group booking fix.
- Mod: Live: Invoice: Payments and Credit Notes section: display the payment type: just forgot to concatenate the word, " Payment"
- Mod: Live: Invoice: Payments and Credit Notes section: display the payment type
- Mod: ClubCMS: bindings: added queenstowngolf.co.nz and www.queenstowngolf.co.nz
- Mod: Reverse Proxy: sites.list: added -,-,0,1,queenstown.cw.golf.co.nz
- Mod: ClubCMS: bindings: added queenstown.cw.golf.co.nz
- Fix: ClubCMS: Public2020: - Tournament score hole by hole is not displaying because of the isfinished flag. - Tee time: Default the round dropdown to current round - Cached tournament overview
- Mod: Org: Publish Draw page: just added some space between the links (better usability)
- Fix: #isvapi When copying NZGA_Projected -> NZGA_Handicap, we did not touch the member changedate, which caused ISVAPI not to send these members down to ISV land.
- Fix: #isvapi When syncing handicap changes down from WHSAPI, we did not touch the member changedate, which caused ISVAPI not to send these members down to ISV land.
- Org: Header: Golf NZ logo update
- Org: Header: Golf NZ logo update
- Mod: Org: Draw Report: Golf NZ logo update
- Mod: Org: Draw Report: move down the association logo a bit (so it's not too close to the edge)
- Mod: Reports: Update to new Golf NZ logo.
- Fix: ClubCMS: rMyAccount: show the Outstanding Invoices section when the member has an outstanding amount
- Mod: ClubCMS: rMyAccount: if the user is paying the instalment, the only allowed payment method now is credit/debit card.
- Mod: ClubCMS: Public2020: Optimised my scores to call hole by hole details on demand.
- Fix: ClubCMS: rMyAccount: assign the correct club (for members with multiple memberships)
- Mod: Org: Registration Options: View Mode - Should also indicate whether the registration option is hidden.
- Mod: Results: There is little point in retrying results computation after waiting 40s because any request coming in would have timed out at 15-30s.  We will now throw when we exceed 20s wait time.
- Mod: ClubCMS: Online Registrations: Exclude registration options that has IsHidden set to true.
- Mod: ClubCMS: rMyAccount: just moved the position of the line of code I just committed
- Fix: Org: Online Registrations: Save OptionsText as a comma-separated string.
- Fix: ClubCMS: rMyAccount: show the Billing Card section when the club 1) has the SUBSP product, 2) either A2A or CC is enabled, and 3) on a golf club website
- Mod: ClubCMS: Public2020: Leaderboard: UI change. Display round if finished.
- Add: RegistrationOption: Add new column IsHidden.
- Fix: Adweb: If there is no sent email in the top 200 the page crashes because LastSent==null.
- Mod: Org: Online Registrations: Ability to hide registration options.
- Fix: ClubCMS: Public2020: Renamed the results cache key name to not clash with PGA. Corrected spelling mistake.
- Mod: Bulk Email: Send: show the "SQL Query" option for Association ID 1000 (GolfNZ, England Golf, Wales, Ireland); it used to be allowed for "NZ Golf" only (and DotGolf, and Association Id 1026)
- Fix: Cache now uses HttpRuntime.Cache instead of HttpContext.Current.Cache (which is not set yet in Application_Start)
- Mod: #public2020 Log exception if competition results API call fails.
- Fix: #isvapi #5000473 When you ask to delete one tournament, it deletes all tournaments in the database.  whooooooops!
- Fix: ClubCMS: Public2020: Changed the colour of the no result message when the theme is black.
- Mod: ClubCMS: Public2020: Changed the club banner URL. Added the competition state checking to the tournament controls.
- Mod: API: Use Hole.DistanceInSystemDefaultUnit.
- Mod: ClubCMS: Golf NZ: btn-success button style for rMemberSignupV2 and rMemberSignupConfirmationV2
- Fix: ClubCMS: rMemberSignupConfirmationV2.ascx: fix style for discount code line (appears when a discount code is applied; this feature is used by Flexiclub)
- Fix/Mod: ClubCMS: rMemberSignupConfirmationV2: club id assignment
- Fix: ClubCMS: Due to a typo the hole 8 distance was shown for hole 8 and 9. Fix: ClubCMS: GB&I: Yards were shown for hole distances, but the totals were in metres. Fix: ClubCMS: NZ: Yards were shown for hole distances, but in NZ we should always show metres.
- Fix: ClubCMS: rMemberSignupV2.ascx: apply voucher code: correct the Club ID value
- Fix: ClubCMS: rMemberSignupV2.ascx: validate the Previous Membership Number if there's a value entered
- Fix: ClubCMS: rMemberSignupV2.ascx: fix style for discount code line (appears when a discount code is applied; this feature is used by Flexiclub)
- Fix: ClubCMS: rMemberSignupV2.ascx: apply voucher code: correct the Club ID value
- Mod: ClubCMS: Leaderboard: For clubs - Ability to filter by Competition Type.
- Fix: Revert config.
- Fix: Public2020: News count fix.
- Fix: ClubCMS: Tournament Leaderboard: getTournament() not called during initial load.
- Mod: ClubCMS: GolfNZ: Tournaments: Hide/unhide entrants and tee times depending on comp state.
- Mod: ClubCMS: Tournament Leaderboard: Golf NZ: Ability to filter by Division and Competition Type.
- Mod: sql: ThirdPartyNotifyWinnereTB: just removed "top 1" so that the query returns all the winners drawn out for the current date
- Fix: ClubCMS: Check OtherPassportId is greater than 0.
- Fix: ClubCMS: GolfNZ: Competition Results: Highlight my name, 0 score ui fix.
- Fix: ClubCMS: Golf NZ: Viewing other people's competitions. Wrong parameter name - It should be "OtherPassportId".
- Mod: ClubCMS: GolfNZ: My scores: Paging layout change.
- Mod: ClubCMS: Golf Ireland: allow the member to use any of the latest PINs from any of their clubs
- Mod: ClubCMS: GolfNZ: Competition Results: Display hole by hole score.
- Fix: ClubCMS: rMyAccount: Fix #34856 - Part 2. Check if the member's secondary club has a SUBS or AX product.
- Fix: #5000491 If there are markers with StartDate > EndDate they should be considered as "deleted".  These were causing double ups in total distance calculations.
- Fix: ClubCMS: Golf NZ: Show friends competitions.
- Mod: ClubCMS: rCompetitionResult2: Golf NZ - Add link to the golfer's profile page.
- Mod: ClubCMS: GolfNZ: Made the results table swipeable in mobile.
- Mod: ClubCMS: GolfNZ: Removed journey from footer.
- Fix: ClubCMS: GolfNZ: Hole by hole width fix.
- Mod: ClubCMS: GolfNZ: Unhide all columns in mobile view.
- Fix: ClubCMS: Low handicap index - Show "N/A" instead of null.
- Mod: ClubCMS: My Overview: Display low handicap index. https://dotgolf.atlassian.net/browse/DG-2674
- Fix: ScheduledTasks: CheckUnassignedMemberAccountCreditTask: Check DeletedDate is null.
- Mod: ClubCMS: GolfNZ: Competition Results: Initial commit of clickable player.
- Fix: ClubCMS: Golf NZ: Fix ticket #34856. My Account page - Unable to view accounts from secondary membership. Fix: ClubCMS: Golf NZ: Account Top Up Confirmation - Display club name.
- Fix: ClubCMS: GolfNZ: Mobile Menu: Added friends.
- Mod: ClubCMS: GolfNZ: Mobile menu: Added the member name when logged in.
- Mod: ClubCMS: GolfNZ: Added the my golf menu in the main menu.
- Fix: ClubCMS: Friends search: Do not show the "Add Friend" button in the friend search results if that person is already on the user's friends list.
- Fix: ClubCMS: https://dotgolf.atlassian.net/browse/DG-2662 Friends posting score comments - 1) Only allow posting of comments to only those who are friends. 2) I have placed the code to Post/Delete a score comment in Shared. Please refer to FriendsHelper.
- Mod: ClubCMS: Golf Ireland: member menu dropdown style fix on mobile
- Mod: #public2020 performance: When we get scores from WHSAPI, always get 20 minimum.
- Mod: #public2020 performance: GetHCDiffGraphDataWHSv2 will now internally use Member.GetWHSScoreListing so that we can take advantage of the built-in caching of the score listing.
- Mod: #public2020 Performance: In Member.GetWHSScoreListing() we fired off a call to WHSAPI to get the scores even though we sometimes do not need to (e.g. if the scores are already cached).
- Fix: Org: Golf NZ - Update sign up links to point to the new Golf NZ site. Mod: Remove NullIf on @AssociationId SQL parameter - not needed.
- Fix: Configuration Profile: Golf NZ - Update sign up links to point to the new Golf NZ site.
- Fix: Org: Unable to view the member's scoring history because of an exception in WebUser.LogAndCheckAssetUsage. Tries to insert a ClubId 0 in WEAssetLog - The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WEAssetLog_Club". The conflict occurred in database "NZE", table "dbo.Club", column 'ClubID'.
- Fix: When editing a marker, do not allow the user to change the gender of the marker.  This is a business rule; a MarkerId should only ever exist with one gender; this can't change over time.
- Mod: ClubCMS: Golf Ireland: if the user has previously attempted to sign up and ended at Step 2 only (setting of password), and there's no email in their record (e.g. the club didn't end up entering an email address via Clubhouse), redirect the user to the signup page so they can complete the signup process
- Mod: ClubCMS: Golf Ireland: zRegister: adjusted the grace period (when users can click on any verification link emailed to them) to until January 2021 (as discussed with Matt)
- Mod: ClubCMS: zLogin: Email Verification Step: added title; renamed control
- Mod: ClubCMS: Golf Ireland: zLogin: this fix addresses the "stuck in loop" issue (can't signup, can't login)
- Mod: ClubCMS: GolfNZ: Added url image resizer for event images.
- Fix: ClubCMS: Golf NZ: Casual Golfer sign up - After completing the Casual Golfer sign up process, the user gets redirected to "/MyGolf/Login.aspx?x=<TOKEN>" (the login page in the previous golf.co.nz site). Instead of making a mod to the rRegistrationCasualGolfer control, implement a redirect in the Global.asax.
- Fix: Live: after adding a new club in org, the dotgolf only club dropdown crashes if the club tries to log in within 2hrs
- Mod: #public2020 decreased request timeout to 15s to match Public2012.  Having a higher timeout than this is asking for trouble.
- Mod: #public2020 Log path, hostAndPath separately (without the ?query part) so we can group by these in Kibana. Fix: Log Elasticsearch posting exceptions only if we haven't logged anything in a second - this is to avoid bashing the SQL server (which hosts DebugLog).
- Fix: Live: User Management: Do not accept membership number as login id when creating a user in DG Live.
- Fix: #public2020 ported one of Marcus's fixes from Public2012 relating to showing the handicap chart for people with pending handicap scores in their last 20.
- Fix: ClubCMS: Teebooking: Highlight friend's tee booking.
- Mod: SSO: New Golf NZ logo.
- Mod: Reports: New Golf NZ logo.
- Fix: Org: org users with readonly club access can't create clubs (they could after my previous mod for karen collins)
- Fix: Org: karen collins can create clubs again (org users with full club permissions could not see club creation)
- Fix: ClubCMS: GolfNZ: SearchSlots "back" error fix.
- Mod: ClubCMS: removed some try/catches from ClubCmsScore.cs that just rethrow the exception
- Fix: ClubCMS: rMyAccount: handle null axAccount
- Fix: #public2020 Optimised getting the list of competitions for the day; no longer calling into expensive code only to filter out non-autoentry comps afterwards.
- Mod: #public2020 ScoresController optimised to do a single call to Redis to pull a score's handicap index rather than one per hole.
- Bump SVN rev for this file so I can merge in prod.
- Mod: ClubCMS: Teebooking: Added a region and location field required validation.
- Fix: ClubCMS: Unable to load a casual golfer's scores because of a missing "@WHSCourseRatingMinusParEnabled" SQL parameter.
- Fix: ClubCMS: Sign Up - Move check (if the user has access to other person's profile) out of GetMemberInternal(). Freshdesk Ticket #34725
- Mod: #public2020 Competition.GetEligibleCompetitionRounds() now has an autoEntryOnly parameter which we can use to speed things up in public2020.
- Add: #public2020 index to speed up marking messages as "read" in bulk.
- Fix: GolfNZ: teebooking time off by 13hrs on office ipad and some other IOS devices reported by members.
- Fix: #public2020 Don't crash on blank or null passwords.
- Fix: #public2020 Just return a 401 Unauthorised response rather than crashing the app pool for a failed auth.
- Mod: Do not log event log exceptions if old connectors hit live.golf.co.nz/api/cardprint.asmx - just respond with a 404.
- Fix: API: MyGolf: For NZ only - Users can view other person's scoring history on their profile even if they are not friends or outside their home club.
- Mod: ClubCMS: GolfNZ: Competition result: Highlight friends when in the result table.
- Fix: #public2020 A case where we get "525 Booking was already created previously.  Check My Bookings for the status" back from ApplyBookingChanges, and then we force refund the transaction.
- Mod: Golf NZ post-launch: Enable Friends 2.0 in New Zealand.
- Mod: ClubCMS: Template: appended ?rev=$WCREV$ to js files
- Mod: ClubCMS: Unsubscribe: use GetParameterByName to parse query string
- Mod: ClubCMS: add GetParameterByName js function
- Fix: #public2020 links updated in Org.
- Fix: ClubCMS: Remove the redirect for /TeeBookings/MyBookings.aspx because this page actually exists in other club websites. Else, users will just get redirected to the /my-bookings page in the new golf.co.nz.
- Mod: NewZealand.cs: update GoverningBodyShortName and GoverningBody for Golf NZ
- Fix: #public2020 Store BookingState in Redis instead of application cache (because we load balance now) Fix: Treat any ConfirmPayment.aspx call with ?result on it as a successful booking call - if we can find the result ID from DPS, then it must be good, regardless of the useragent or whether the user still has a session.  Proceed to create the booking regardless.
- Mod: Bulk Email: update unsubscribe link for NZ
- Fix: Apparently DPS sends through "PXL1" as their user agent now.  This stopped the third party callback from working because we were expecting PXHOST.
- Fix: Apparently DPS sends through "PXL1" as their user agent now.  This stopped the third party callback from working because we were expecting PXHOST.
- Fix: ClubCMS: Contact us page club search UI dropdown fix.
- Mod: Bulk Email: update the golf.co.nz contact page URL
- Mod: Bulk Email: rename New Zealand Golf to Golf New Zealand
- Fix: ClubCMS: Competitions mobile view filter fix.
- Mod: Bulk Email: Golf NZ and Love Golf logo updates
- Mod: ClubCMS: Redirect old club search to new URL.
- Mod: Bulk Email: Golf NZ and Love Golf logo updates
- Fix: ClubCMS: My Overview UI fixes for mobile.
- Mod: ClubCMS: Changed the Google Map API key to NZ Golf.
- Add: ClubCMS: My Account: Add property to allow members to top up their account.
- Fix: #public2020 potential async deadlock for Contact DotGolf page when creating a Freshdesk ticket.
- Mod: ClubCMS: News article admin: Added past year in the list of tournaments.
- Fix: ClubCMS: Golf NZ post-launch - More redirects.
- Fix: ClubCMS: GolfNZ: My Golf dropdown overlay fix. Added a logout button for mobile view.
- Add: ClubCMS: GolfNZ post-launch: Perm links copied from old golf.co.nz Global.asax.cs. Mostly app and MyGolf links.
- Mod: ClubCMS: DBUtilities: GetNewsArticleDetails (query used for Open Graph meta tags): define a default image if the article doesn't have an image: make the url dynamic
- Mod: ClubCMS: DBUtilities: GetNewsArticleDetails (query used for Open Graph meta tags): define a default image if the article doesn't have an image
- Mod: #public2020 Do not log 401 Unauthorised as an exception, this is a legit response to the client.
- Mod: #public2020 Standardise exception logging so that we can isolate public2020 exceptions.
- Mod: ClubCMS: Golf NZ / Golf Ireland News Article Open Graph: no need to check for the tags query string parameter
- Mod: ClubCMS: Added a back url from My Booking to edit booking.
- Fix: ClubCMS: TeeBooking: ConfirmSlots - Fix ORNS http://adweb.golf.co.nz/ViewExceptionDetail.aspx?Id=453199554. Fix: ClubCMS: TeeBooking: My Bookings (Knockout control) - User should not see other people's names if 1) They are not part of the booking 2) Has privacy settings turned on.
- Fix: #public2020 ORNS when session has expired and you're trying to load ConfirmSlots.aspx.
- Mod: ClubCMS: Changed the tee booking - my bookings link
- Fix: #public2020 exceptions trying to a) cancel bookings or b) edit paid bookings.
- Mod: ClubCMS: Golf NZ: footer: updated Instagram URL
- Fix: #public2020 Silent exception caused by not passing pretendPath through to WriteSectionControls.
- Mod: ClubCMS: Tee Booking: SearchClubDay - Select the whole text in the location text box (if any) so it will be easier for user to change/remove. Changed default limit clubs to 100.
- Add: www prefix for public2020.
- Mod: Binding change for golf.co.nz go-live.
- Mod: Binding change for golf.co.nz go-live.
- Fix: ClubCMS: Tee Booking: SearchClubDay - Should be passing RegionId -3 not the actual home region id when a member first loads search club day. Fix: ClubCMS: Tee Booking: SearchClubDay - Set default distance to 50KM if searching by location.
- Fix: ClubCMS: Member search: The club filter is taking too long to respond when typing.
- Mod: ClubCMS: GolfNZ: Dean's list: Made the tables vertically inline in my overview.
- Mod: ClubCMS: Golf NZ Template: removed the hardcoded image path for apple-touch-icon and android touch icon (which is the NZ icon). These will have to be defined on each site (NZ, WA, EN) using the HeadInsert control.
- Fix: ClubCMS: GolfNZ - Fix a bunch of errors when viewing other person's profile (My-Overview page) because of permission issues. In NZ, anyone can see other person's profile. Fix: Clubcms; GolfNZ - Apply privacy settings when viewing other person's profile. Privacy mode 1 - Hide score play and captured dates, Privacy mode 2 - Hide all (no scores).
- Mod: ClubCMS: GolfNZ: Added rev to css.
- Mod: ClubCMS: GolfNZ: Changed the default news thumbnail image.
- Mod: ClubCMS: Changed the URL of the club banner images.
- Fix: ClubCMS: Dropdown fixes.
- Mod: ElasticTrackerModule will now load ClubCMS passportId so we log who is doing what on the site.
- Fix: GolfNZ: maketimeplay9 bug after my prev mod - stats not showing
- Mod: CluCMS: TeeBooking: SearchClubDay - Filter results by member's home region instead of home club.
- Fix: ClubCMS: GolfNZ: Member search UI fixes.
- Fix: Live: MostImprovedGolferReport timing out #34071
- Fix: GolfNZ: casual golfers with freetext usernames can't log in using their casual 7 digit membercode (existing bug) so i'm making the login textbox accept text for NZ
- Mod: Pass through site name and profile to AppPerformanceTracker.
- Fix: Sigh, missed one.
- Mod: ElasticTrackerModule will now log the site/service name and aws profile.  This is going to be useful when filtering requests between the two instances of ClubCMS.
- Fix: ClubCMS: TeeBooking: GolfNZ - SearchClubDay is now by default filtered by ClubId (Member) or RegionId (Casual Golfer) when accessed the first time (e.g. from Click Book a tee, Make a booking links).
- Mod: ElasticTrackerModule will now pull the code revision from DotGolf.Core, if available.
- Mod: ClubCMS: less exceptions thrown from userutilities when debugging
- Fix: GolfNZ: hide myaccount in menu dropdown for non-affiliates
- Fix: GolfNZ: hide maketimeplay9 for non-affiliates
- Mod: GolfNZ: playing handicap is back in the member scores table (desktop only)
- Mod: Reverse Proxy: on the golfnz test site: a) go load-balanced and b) TLS
- Mod: Moved GolfNZ to the new nzprod-public2020 application pool.
- Add: TODO
- Add: Vortex notify error fixed.
- Add: Logging to troubleshoot vortex notify error.
- Add: Logging to troubleshoot vortex notify error.
- Fix: Security: do not deploy _deploy into the webroot, it contains sensitive details.
- Fix: Security: do not deploy _deploy into the webroot, it contains sensitive details.
- Fix: Exit with error if aws call fails.
- Fix: BUCKET_NAME should have been used instead of constructing the bucket name manually.
- Add: Error checking in webapp-jenkins-postbuild.cmd - fail with exit code if there is a problem copying to S3.
- Add: Public2020: bindings.list file for nzprod-public2020 profile.
- Fix: ClubCMS: rMyAccount: Disable the ability to top-up an account.
- Mod: Live: Settings: remove the Tee Booking URL regex validation (This is used on the Golf Ireland website - for the fixture tee booking link)
- Fix: ClubCMS: rMyAccount.ascx: temp fix so that the Add Membership Billing Card can be used again (Kenneth will still do the actual fix)
- Mod: Live: playing handicap is back in the member scores table Fix: Live: playing handicap no longer wrong for nonaffiliates in SIC #34000
- Mod: ClubCMS: GolfNZ: Club search: Added an html placeholder after the filter section.
- Mod: ClubCMS: GolfNZ: Club search: Added an html placeholder after the filter section.
- Fix: ClubCMS: My Account: add/update billing card was throwing an error because AssignClubId was not assigned a value
- Mod: Mailer: We didn't bake the build/revision into the DotGolf.Core library as we should (for services).
- Fix: Mailer: Annoying how Micro$oft made the event log so damn cumbersome to use.  Sigh.
- Fix: Mailer: Event Log writing threw an exception.
- Add: Mailer: Log message to indicate successful startup.
- Mod: ClubCMS: Golf Ireland: Template.aspx: css cache-buster (add the rev query string)
- Fix: ClubCMS: Golf Ireland: css mod so that the News menu dropdown items break into columns properly (i.e. Ulster description isn't separated from the Ulster title);
- Add: Mailer: Stat to detect main polling loop failures so we can have an alarm on this when the email service dies.
- Mod: ClubCMS: GolfNZ: Club search: Added programid in the querystring so other pages can go to this page and have a default program filter.
- Add: Mailer Service: Will now retry (infinitely) getting a connection to the database on startup, in case a network/db connection cannot be established.  This will avoid the situation of the service failing to start up when the machine is first booting up (and networking may not be available yet). Mod: Mailer Service: Refactored so there is only one implementation of ServiceBase so we don't have to maintain one for each union. Cleanup: Removed .exe.config files because they were only used for StatsD configuration; and StatsD is now done via IVortexHostDiscovery.
- Mod: ClubCMS: Golf NZ: golfnz-news-detail: just added a lead forward slash to the api url
- Mod: ClubCMS: UserControlUtilities: viewmodel.js cache-buster (add the rev query string)
- Mod: ClubCMS: Golf Ireland, Golf NZ: News Article: add open graph meta tags; rename query string parameter from id to newsarticleid
- Mod: ISVAPI: change redis stringset to stringsetasync in getclubmembers in hopes it will stop SETEX timeouts we're getting in the logs
- Mod: ClubCMS: Golf Ireland: my-header/view.html: add new property: ShowHeaderSpacer (default setting is false)
- Mod: ClubCMS: Added the image resizing so the admin user can upload any size.
- Mod: ClubCMS: Added the capability to embed videos in CKEditor.
- Mod: ClubCMS: Golf Ireland: my-header: my header spacer hide on mobile
- Fix: Shared: Navigation: DotGolf Plus -> Scorecards menu option - Check if the club has the "CP" club product.
- Mod: ClubCMS: Leaderboard: Hide/unhide settings
- Mod: ClubCMS: Leaderboard: Hide/unhide settings
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: "All provinces" and "All counties": update placeholder text; make sure the field is not highlight when "all" is selected
- Mod: ClubCMS: Golf Ireland: club-fixtures-search/view.html: moved up the "Show More Filters" button; style updates
- Fix: ClubCMS: Handicap Index performance graph looks weird when a person's handicap index on a given score is 'Pending' at that time. For now, we should return that score with a handicap 0 (not ideal).
- Fix: WHSAPI: unit tests broke after my previous rev
- Fix: ClubCMS: rMyAccount.ascx: handle null AssignClubId (when the user isn't logged in, the control was throwing an error)
- Mod: WHSAPI: more test mods to account for web7 being slow a.f.
- Mod: ClubCMS: Stats chat menu header mod.
- Mod: WHSAPI: ShouldDeleteMarkerHistory_DeleteFirstHistory test mod to account for web7 being slow a.f.
- Mod: ClubCMS: Stats chat menu header mod.
- Mod: WHSAPI: If a score has no handicap config (i.e. member had no home club) and is saved later when person has home club, set the handicapping config based on the new home club so they can get handicapped.
- Mod: Tournaments #parnz-fixes: @HandicapIndex needs to be passed in because we're updating handicaps for @RoundDate values that aren't necessarily today.
- Fix: ClubCMS: Header UI flickering fix.
- Mod: Tournaments #parnz-fixes: Update handicaps from WHS immediately before we print cards (in the draw card printer API) - this way we are guaranteed to have the current handicap indexes, regardless of the round date (you can reprint yesterday's cards too if a handicap changed for whatever reason).
- Fix: ClubCMS: Tee booking UI: Removed the negative space on top so the add will show OK.
- Mod: ClubCMS: Golf Ireland / Golf NZ: my-header: form responsiveness updates
- Mod: ClubCMS: GolfIreland / Golf NZ: my-header: added showMemberSearchInMenu control property
- Fix: ClubCMS: rMyAccountTopUpConfirmation: Invalid property type for the MyAccount property - It should be 'PageName'.
- Fix: ClubCMS: GolfNZ: Stats chat loading fix.
- Mod: Tournaments #parnz-fixes: Reverted the daily sync change since only /changes/ come down from WHS.  We have to update /every/ player who is playing on the day, so this is not a good place to do the update.
- Add: ClubCMS: rMyAccount: Add "TopUpConfirmationPage" property.
- Mod: ClubCMS: Golf NZ: my-header: adjust breakpoint for .tab margin (previously, "Notifications" was not within the grey box when on 1260-1440 screen size)
- Mod: ClubCMS: Golf Ireland / Golf NZ: my-header: form responsiveness updates
- Fix: ClubCMS: rMyAccountTopUpConfirmation: The "MyAccountPage" not inserted because of a missing condition in the WHERE clause.
- Mod: ClubCMS: Golf Ireland: my-header: fixes for Golf Ireland header (work in progress)
- Mod: sql: displaymembercode length increase for GB&I
- Fix: ClubCMS: GolfNZ: Resources centre mobile view fix.
- Fix: ClubCMS: GolfNZ: - incomplete region list - the filter is not working when collapsed - paging fixes
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: made the calendar icon a background image (making it "clickable"). Previously, only the input field is clickable.
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: css/style updates: made the dropdown icon a background image (making them "clickable" now)
- Mod: ClubCMS: GolfNZ: News list: scroll to top onclick paging.
- Fix: ClubCMS: UI fixes: Accordion and tee booking.
- Mod: ClubCMS: Golf Ireland: club-search: updated dropdown ids
- Mod: ClubCMS: Golf Ireland: club-search: css: limited the height of the dropdown menu; applied highlighted styles (copied from open fixtures)
- Mod: ClubCMS: Golf Ireland: club-search: reverted change done to Club Name dropdown. (The user should be able to type into the field.)
- Mod: ClubCMS: Golf Ireland: club-search: re-arranged the elements to fix how it looks like on the mobile (previously, on the mobile, the buttons were in between the fields)
- Mod: ClubCMS: Golf NZ: My Account Top Up - Minor mods and UI fixes.
- Mod: ClubsCMS: My header fixes.
- Mod: ClubCMS: Golf Ireland: club-search: force dropdown menu to show below the field always (I found while testing in staging that because of the long list, bootstrap displays the dropdown items above the field)
- Mod: ClubCMS: Golf Ireland: club-search: dropdown icon style update
- Mod/Fix: ClubCMS: Golf Ireland: club-search: updated the Club Name field to use the bootstrap markup. The search icon is now clickable.
- Mod: ClubCMS: Golf NZ: My Account Top Up - Updated control name to "rMy Account Top Up Confirmation".
- Add: ClubCMS: Golf NZ: My Account - Top Up initial commit.
- Mod: ClubCMS: Golf Ireland: club-search: define the dropdown-item style
- Mod/Fix: ClubCMS: Golf Ireland: club-search: updated the dropdowns to use the bootstrap markup. The custom dropdown icon is now clickable.
- Mod: Live: Functions: Sync customers (to Kounta POS) 48 hours before the start of the event.
- Fix: Live: NZ Course rating minus par was not being factored into non-affiliate playing handicaps in the SIC UI
- Mod: ClubCMS: golfnz terraces teebooking page destructor no longer throws ORNS exception when debugging
- Mod: ClubCMS: GolfNZ find a course - only show Book Tee link if club has teebooking. NOTE this doesn't check whether the person is a member at the club
- Mod: ClubCMS: svn ignore some generated files
- Mod: ClubCMS: GolfNZ / Golf Ireland: member menu: continuation of layout and style improvements. Work in progress.
- Mod: ClubCMS: GolfNZ: css update to make the notification pop-up display fully; this is related to Revision ID 42350
- Mod: Live: Less angry error message when overseas course form validation fails because user is logged out
- Mod: Tournaments #parnz-fixes: The Edit Players (draw generate) page is now read-only once the round date has passed.
- Mod: ClubCMS: GolfNZ / Golf Ireland: member menu on mobile was overlapping with the page header elements; updated the layout to accommodate the growing number of member menu items (still based on one of the GolfNZ designs: news page menu / filters).
- Mod: Tournaments #parnz-fixes: The daily handicap sync will now update handicap indexes in tournaments for the day.
- Fix: Live/Org: Handicap Certificate report was showing Pending in everyone's report. SD has missing for some people because of missing HDs in unionland, so we use HdPostPCC instead which is what we should have been doing from the start
- Mod: ClubCMS: GolfNZ: Added My Golf links in the top right profile menu.
- Fix: ClubCMS: Golf Ireland: footer: exclude hidden menu items
- Fix: Live: RoundManagement: Fix #34519 Member Inserted/Updated hook is not triggered whenever LoadMemberDetails() throws an exception. Fix: Live: NZ Golf references
- Mod: ClubCMS: Golf NZ: footer: added link for Privacy Policy, renamed "Terms & Conditions" to "Notice & Disclaimer" (that's what is available on the current golf.co.nz) and defined the link for this as well
- Fix: ClubCMS: Reverted the green background color for tee booking for club websites.
- Mod: ClubCMS: GolfNZ: Tee booking: More UI mods
- Fix: ClubCMS: GolfNZ: Teebooking UI fixes.
- Fix: ClubCMS: GolfNZ: Competition result not showing for GolfNZ control.
- Fix: ClubCMS: Golf NZ: Casual Golfers - Round off average score.
- Add: HtmlToPDF: Setup lambda deployment for UK and Ireland.
- Fix: PDFRenderer: Removed hardcoded ap-southeast-2 region; it'll instead come from AWSConfigs now (which is set up by the profile)
- Merged revision(s) 42319 from Trunk: Fix: HtmlToPDF: piece of shit Groovy and its bullshit syntax ........
- Fix: HtmlToPDF: piece of shit Groovy and its bullshit syntax
- Mod: HtmlToPdf: Working version of the lambda - now just trying to get the Jenkinsfile to deploy it with the FONTCONFIG_PATH environment variable.
- Mod: HtmlToPdf: archive.zip updated with latest files for deployment.
- Mod: HtmlToPdf: archive.zip updated with latest files for deployment.
- Add: HtmlToPDF: new version of wkhtmltopdf which is supposedly compatible with Amazon Linux 2.
- Mod: ClubCMS: My Bookings summary.
- Mod: ClubCMS: My Bookings summary.
- Mod: Org: Courses: View Course Information page - Added deleted date check.
- Fix: Live: Create Member: Golf Ireland - Check the display club code part of the membership number regardless if it's a new/reinstated number.
- Fix: DEP0005 error around new Buffer() - last ditch to try and make this work on nodejs12.x, but fearing that I will have to find a new HtmlToPDF function now...
- Fix: ClubCMS: rEditMemberDetails: Golf NZ Casual Golfers - Ability for casual golfers to update their details in the new Golf NZ website. Also, the region field is editable for casual golfers.
- Mod: HtmlToPDF: upgraded to nodejs12.x because Lambda does not support nodejs6 anymore.
- Mod: Jenkinsfile changes to allow deploying HtmlToPDF lambda to Stage.GBI.
- Fix: ClubCMS: Golf NZ: rMyAccount: removed unused code; fix Reactivate, Change Membership (there was previously an error on AssignClubId)
- Add: Autofac to DotGolf.Mailer so that IVortexHostDiscovery will work and Mailer can log stuff to Vortex again.  This stopped working when we introduced IVortexHostDiscovery some months back.
- Mod: Live: Card Fulfilment Requests sort order - Null batchno on top then recently created.
- Fix: ClubCMS: Golf NZ: rMyAccount: removed unused code; fix Finish Cancellation (there was previously an error on AssignClubId)
- Mod: ClubCMS: forgot to include these mods in Rev 42278
- Fix: CardPoller: Sprinkled some Autofac to make Vortex logging work (it needed IVortexHostDiscovery to find Vortex)
- Fix: ClubCMS: Golf NZ: rMyAccount: removed unused code
- Fix: ClubCMS: Golf NZ: rMyAccount: use AssignClubId instead of ParentClubID - previously, there was an error on the golfnz.cw.golf.co.nz when Flexiclub members with base sub balance accesses the My Account page
- Fix: ClubCMS: GolfNZ Casual Golfer issues - https://dotgolf.atlassian.net/browse/DG-2568.
- Fix: When WHS is enabled we do not combine scores in union land.
- Add: live_CardPoller_Poll update to return latest Scorecard.Id for each ConnectorUID.
- Fix: Found a thread safety issue where preprint is still inserting cards while the card poller service is pulling them out for printing.
- Mod: CardPoller now stores the last Scorecard.Id value on the cn-sc-* and cn-bl-* keys so that clients can use this to be thread-safe and not miss out on cards to be printed.
- Fix: ClubCMS: My Account: fixed typo ddlCategory.SelectedValue was meant to be ddlMemberClubs.SelectedValue (where AssignClubId is assigned to).
- Mod: TBTransactionProcessor: SubscriptionInstalment: exclude ClubId 907 (PGA)
- Mod: ClubCMS: GolfNZ: Modded the club competition results for GolfNZ.
- Fix: GolfNZ: `autocomplete="off"` is all we need to turn off autofill in Chrome.  Lots of conflicting advice out there - "off" is the only one that works right now.
- Mod: Live: replace some lambdas with functions in dotgolf checkout, SIC, and clubhouse nav in case some poor soul opens POS or SIC or clubhouse in IE and it crashes
- Fix: Live: remove date.SubtractClientBrowserOffset() from GetCompetitionsForMemberAndDate because in NZ stage it was stopping Steve Mancini in Perth from editing a score entered for today.
- Mod: ClubCMS: Golf NZ: footer: defined the social media links; added Instagram
- Fix: Org: we were not inserting usersecurityroles for matt user correctly
- Mod: ConnectorAPI: Increased parallelism when talking to WHSAPI to get handicaps for batches of scorecards. Mod: Small performance gains by only getting a scorecard's segments once and holding on to them.
- Mod: ISVAPI: ElasticSearchLogger no longer tries to refresh index patterns when posting new values - Elasticsearch does this automatically
- Fix: Upgraded Dapper to 2.0.4 in ConnectorAPI to fix Query<Tuple<>> not correctly mapping SQL results.  This lead to MemberId==0 and the precaching not working at all, which would be performance nassssssty
- Fix: HttpClient properties can't be set if it has sent one or more requests.
- Mod: Connector+ConnectorAPI: Better resiliency when dealing with errors from the webservice while updating card print status.  If one of these requests fails we end up with the Connector "stuck" and unable to print cards.
- Fix: Live/Org: International courses+markers can now be created in GB&I, and no longer crash if the club has no default markers #33995 #5000108. Mod: Live/org: removed international marker warning about selecting playdate before creating the marker - this is fixed since david made the marker reload when playdate is changed
- Mod: ClubCMS: Golf NZ: Footer: just updated some text
- Mod: ClubCMS: Golf Ireland: menu: added some margin (using a bootstrap class) before the "back to main menu" text for the member menu
- Fix: ClubCMS: Golf Ireland: menu: fixed default icon styling (it was stretched) (side note: the default icon is displayed when the user doesn't have a profile photo); also fixed the spacing after the Log out icon
- Mod: Adweb: ClubCMS: Menus: increase the max length for the CSS Class Name text field
- Fix: Restored some changes that were clobbered in rev 39275; these brought back the whole club listing when members make tee bookings, causing performance issues.
- Mod: ClubCMS: Golf Ireland: menu: when the member is logged in, display the my golf menu (member menu) on the mobile menu. Add the "Log out" link as well (at the moment, there's no logout link on mobile).
- Mod: Live: Overseas course-marker form now includes warning that tells you to select the date of play before completing the form because if you don't you get Invalid Fields Are Shown In Red error when saving score, and it's the play date that is 'invalid' because it's outside the date range of the marker we just soft-created. Not fixing the bug right now (sorry).
- Mod: Live: remove a reference to North Shore in a ko binding placeholder on create member page
- Fix: Org: overseas course dialog NO LONGER shows speechbubble popups on ALL inputs if you close it and reopen it again.
- Mod: ClubCMS: Golf Ireland: menu on mobile: when the member is logged in, display the profile photo just like on desktop
- Fix: Org: SIC international course selector was not hiding properly after clicking away
- Fix: Org: remove "North Shore-Blue - Red" placeholder from marker field in SIC. It's not helpful and is already removed from Live
- Fix: Org: associations can edit scores again.
- Mod: ClubCMS: GolfNZ: Initial commit of Topup Account.
- Fix: Org: Handicap cert report not longer throws ORNS when loading members with away home club
- Fix: ClubCMS: Golf Ireland: Find a Golf Club: add the condition "and co.DeletedDate is null" so that the correct "Generic" contact email address is displayed.
- Mod: Live: ignore otp dll in bin folder
- Mod: Live: don't show extra playing handicap text in playing/course handicap table for unions to whom we're displaying course handicap
- Fix: ClubCMS: GolfNZ: My Booking: Added an auto scroll in the table.
- Mod: ClubCMS: GolfNZ: UI mods and fixes.
- Fix: API: User unable to login in the app due to an error in the GetUserDetails endpoint where the member's initial category is not set (CMember.CategoryId is null).
- Fix: ClubCMS: Sometimes the Forgot Password page fails, incorrectly claiming that the member has no email on record.  This is because there is a blank email at one of their clubs (but another club has a valid one), and the code just randomly picked up the blank one.
- Add: ClubCMS: pubsub library to terraces4 which is used by GI.
- Fix: ClubCMS: made profile view work with non-affiliates.  Well, sorta.  It needs a lot of work still, but at least it doesn't simply crash now. Mod: Some styling work to the member search in the header. Fix: profilePassortId typo.
- Fix: ClubCMS: rMyAccount: show the Club selector on the Golf NZ site only
- Fix: ClubCMS: Club wasn't properly selected when page first loaded up.  isSelectedClub renamed to isClubFocused, ditto for member input.  Fixed a few more edge cases where the club wouldn't get deselected properly if the user clears the box out.
- Mod: ClubCMS: Search for member moved to the header. Mod: Member names are now links so you can view their profiles when clicked. Mod: It is now mandatory to select a club if you're searching for players, even in NZ.
- Mod: Adweb: show if scores are deleted in the editmember page
- Fix: ClubCMS: Tournament Registration - Club member logins not working.
- Fix: ClubCMS: Build fix.
- Mods: ClubCMS: New banner control.
- Mods: ClubCMS: New banner control and some UI updates.
- Mod: ClubCMS: GolfNZ: News List: Added default tags.
- Mod: ClubCMS: GolfNZ: News List: Added default tags.
- Fix: Live: Missing from previous svn rev42186
- Fix: Live: TabMember: Hard-coded NZGACategoryId used to determine 1) Enable union category "change" link under Membership tab. 2) When saving, returns an error message if the NZGACategoryID=3 (secondary) and NGACategoryID=5 (Life) - this condition only applies to NZ and not GB&I.
- Mod: ClubCMS: zForgotPassword.ascx and zPasswordReset.ascx: style updates using bootstrap classes
- Mod: ClubCMS: sql: insert a new ControlProperty to the existing zForgotPassword control
- Mod: ClubCMS: Golf Ireland / Golf NZ: zForgotPassword: removed the email field from the Forgot Password form; also updated the validation and css
- Mod: ClubCMS: Golf NZ: add style for td-icon-container
- Fix: API: Enable DotGolfOTP for the app.
- Mod: ClubCMS: GolfNZ: Logo update.
- Mod: Live: style change - replace ConfigurationProfileResolver.GetConfigurationProfile().Language with Lang.Current in CourseHandicapReport.cs
- Fix: Live: playing handicap table page header changes to Course Handicap Table in GB&I, as does another playing handicap reference in the handicap listing report
- Fix: ClubCMS: GolfNZ: Admin rich content block UI fix.
- Fix: Org: can now open member pages of people who are home in another union without fear of ORNS
- Mod: Removed RefreshOnCompleted() in Elasticsearch bulklog call. Mod: Removed unnecessary Console.Write().
- Mod: ... or AuthController.InvalidUsernameOrPasswordException
- Mod: Don't log OperationCanceledExceptions in MessageLoggingHandler.
- Mod: Catch and don't log AuthController.InvalidUsernameOrPasswordException and OperationCancelledException.  These aren't real exceptions.
- Mod: Reports: Handicap Comparison Report - Changed heading to "WHS vs CONGU Handicap Comparison".
- Fix: Potential infinite loop trying to clear out write queue if ES is unavailable. Mod: Increased wait timeout for the BulkAll call to 2 minutes; 10s is not enough for a try and 2 retries. Mod: Removed Console.Write, it just wastes CPU.
- Fix: Org: Card fulfilment was showing members' home club name in the downloadable csv instead of the secondary club name when ordering a card at the secondary club
- Mod: ClubCMS: GolfNZ: Portable mailing list subscription control.
- Mod: ClubCMS: GolfNZ: Portable mailing list subscription.
- Mod: AppPerformanceTracker: Removed REFRESH call - this should not be necessary (https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-refresh.html#:~:text=By%20default%2C%20Elasticsearch%20periodically%20refreshes,default%20interval%20using%20the%20index.) Mod: AppPerformanceTracker: Slow down if we detect errors logging to Elasticsearch (otherwise we bombard it while it's trying to recover).
- Fix: Live: member quick search caching now returns members who are home in other unions
- Mod: Adweb: can choose nzclubreadonly role for isv credentials in adweb
- Fix: Live: county association users can edit scores now (this mod only applies to newly created ones, i've scripted the correct role onto the existing ones)
- Mod: ClubCMS: tournament-leaderboard: Allow site admins to show/hide the competition title.
- Mod: Mailer should be a little more crash-resilient now - because we're running things in separate threads now the exception handling wasn't working as intended, taking out the whole service if we threw.
- Mod: ClubCMS: Contact UI update.
- Fix: Org: IE card fulfilment now PROPERLY includes user's membership number in card number verbatim, instead of constructing it on the fly out of province code + club code + local member code. This is because some people have legacy membership numbers that don't conform to the format e.g. member 22220204 belongs to a club in province 3, so 32220204 was getting incorrectly printed on the card.
- Add: ClubCMS: contact-form-v2 control: EmailAddressTo property.
- Fix: ISVAPI: Because CMember.ChangeDate is currently a smalldatetime, we have to subtract a minute from any incoming changedate to ensure we don't miss any.
- Fix: ClubCMS: BG Video flickering fix.
- Fix: ClubCMS: /GetMemberHandicapIndex endpoint - No handicap index and graph data in the response for a user who holds an active club member and a non-affiliate record.
- Fix: Org: Courses tab: Terminated courses were visible in the Live courses section.
- Mod: ClubCMS: Tee Booking colour change as per Dean's request.
- Fix: ClubCMS: Use "Thread.CurrentPrincipal?.Identity?.AsPassport()?.PassportId" instead of HttpContext.Current.User.Identity.Name.
- Mod: ClubCMS: rEditMemberDetails.ascx: just moved down (below the Save details button) the save success message.
- Mod: ClubCMS: rEditMemberDetails: as discussed with Matt/David - the Region field will be read-only (label) for members.
- Fix: Org: IE card fulfilment now includes user's membership number in card number verbatim, instead of constructing it on the fly out of province code + club code + local member code. This is because some people have legacy membership numbers that don't conform to the format e.g. member 22220204 belongs to a club in province 3, so 32220204 was getting incorrectly printed on the card.
- Mod: Bulk Email: no need to append a forward slash; the Live URL in the country setting has a trailing forward slash
- Mod: Bulk Email: make the Live URL dynamic (from the country settings)
- Mod: Bulk Email: make the Org and Live URLs dynamic (from the country settings)
- Mod: Core: Environment Configuration: added MemberPortalSite setting; Mod: Bulk Email: updated the unsubscribe link to use the MemberPortalSite setting for ENG and WAL
- Mod: Bulk Email: unsubscribe link for ENG and WAL
- Mod: ClubCMS: unsubscribe: make the governing body text dynamic (this will be used by other unions / associations)
- Mod: Bulk Email: unsubscribe link for ENG and WAL
- Mod: ClubCMS: Added club description and logo in the club detail page control.
- Fix: ClubCMS: MemberId property value in the view model was set to the logged in user's passport id.
- Fix: ClubCMS: Should passed the authenticated user's Passport Id instead of MemberId.
- Mod: ClubCMS: Golf Ireland: removed the temp code
- *** DFH CODE REVIEWED TO HERE *** Mod: ClubCMS: Golf Ireland stage: my-performance/viewmodel.ts: temp code to debug issue in IE stage (can't reproduce by debugging in VS)
- Add: Tooltip to the "penalty" icon in the score listing, in case someone doesn't get what [P] means.
- Fix: ISVAPI: score idempotency check did not work after score had been sent to WHS, resulting in duplicate score submission being possible. #5000284
- Add: ISVAPI: NZClubReadonly role for remuera golf club
- Mod: ClubCMS: Background video control
- Mod: ClubCMS: Background video control
- Mod: ClubCMS: We should now be able to grab the user's passport record by using "Thread.CurrentPrincipal.Identity.AsPassport()". Mod: ClubCMS: #CasualGolfers - Allow casual golfers access to Golf NZ web site. Fix: ClubCMS: TeeBooking: Logged in user's name is not displayed when browsing tee booking pages. Fix: ClubCMS: Friends: Add confirmation message when removing a friend.
- Mod: ClubCMS: zPasswordReset and zForgotPassword: clean up code and correct some styles
- Fix: Live: Card request no longer crash when someone with 3+ spaces in their name requests a card
- Fix: Live: added button to Kounta settings page to clear category cache because it cant seem to keep itself up to date
- Fix: Live: added button to Kounta settings page to clear category cache because it cant seem to keep itself up to date
- Fix: ClubCMS: Make time play 9 UI fixes.
- Mod: ClubCMS: zLogin: display a message if the username - password combination is incorrect
- Mod: ClubCMS: zLogin: display a message if the username - password combination is incorrect
- Mod: Bulk Email: "From" field - added option for England Golf and Wales Golf
- Fix: ActivityTracker: Build fix.
- Fix: ISVAPI: deleted ISV records causing errors when isvs try to get a new refresh token
- Mod: ClubCMS: GolfNZ: Make Time Play 9 control
- Mod: ClubCMS: GolfNZ: Make Time Play 9 control
- Mod: ISVAPI: extend Competition name field when posting scores to ISVAPI
- Fix: ISVAPI: NZCRDataRepo did not filter out deleted markers, resulting in Sequence contains more than one element errors if there is a deleted marker with an overlapping date range.
- Mod: ISVAPI: allow Wales ISVs to update members between Nov 16th and Nov 21st (TBD) so they can get the emails+DOBs updated (requested by Wales Golf).
- Fix: ISVAPI: ORNS in member search caused by rev 42008 (was not published to prod thankfully)
- Fix: ISVAPI: interunion scores throwing ORNS when fetching member's scoring record because of a null clubID
- Fix: Live: for preprint in multi gender comps, only marker gender was showing when selecting markers, not marker name.
- Mod: ClubCMS: Golf Ireland: card-ordering/view.html: add note: "Please note: there is a charge for your replacement card and your club may choose to pass this charge on to you."
- Mod: ClubCMS: Golf Ireland: contact-form: text added (requested by the Golf Ireland -- Trello: Contact form intro text change); style updates
- Mod: ClubCMS: My Scores: Ad/html in between scores
- Mod: ClubCMS: My Scores: Ad/html in between scores
- Mod: ClubCMS: DBUtilities: SendEmail: add restriction: make sure there's an EmailAddressTo and and EmailAddressFrom value before inserting into the Email table
- Fix: Live: In WAL/ENG Duplicate member codes could be generated if two clubs created a member at the same time. Now we hold an update lock on the table until we're done updating it, and any concurrent requests have to wait to take the lock BEFORE they can check if their membership number already exists, at which point it does, and an exception gets thrown. Then we just retry it. Only works for unions who we don't let choose membership numbers aka ENG/WAL
- Add: Kounta: Swipecard format for St Clair.
- Fix: Live: Could not search for resigned members at club by centralmembercode in ENG/WAL
- Add: You can now login to ClubCMS and impersonate any member (without knowing their password) using a token that can be generated using KeePass or a TOTP tool like Google Authenticator.
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe: text updates (privacy policy)
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe: text and style updates
- Mod: ClubCMS: My Performance Ad.
- Mod: ClubCMS: My Performance Ad.
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe-verify: fix flickering
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe-verify: made the name fields required, updated hiding/showing of sections
- Mod: ClubCMS: Gallery: Put the image inside a link.
- Fix: Live: hcap adjustments can be decimals again Mod: Live: no UNF tickbox in IE
- Fix: ClubCMS: Spelling fix.
- Mod: ClubCMS: Golf Ireland: card-ordering reasons: display only the first two options: Lost/Stolen and Damaged.
- Fix: ClubCMS: tournament-leaderboard: The value from the URL parameter 'competitionid' was assigned to the tournamentId variable instead of the competitionId.
- Add: ClubCMS: admin-leaderboard: Ability to configure which tournament results to display in the leader board.
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe: add more validation (check if email is already subscribed); updated / fixed styles
- Mod: ClubCMS: Hyundai Stats Chat.
- Mod: ClubCMS: Hyundai Stats Chat.
- Mod: ClubCMS: svn ignore a bunch of generated js files
- Mod: ClubCMS: portal/public score listing page shows Handicap counter score icon next to SD instead of Adj gross, because SDs can be compared more easily and Pat asked us nicely.
- Fix: Org: Part 3 of 3 - score listing page shows Handicap counter score icon * next to SD instead of Adj gross, because SDs can be compared more easily.
- Fix: Org: Part 2 of 3 - move images files TabMemberScoresWHS uses to Shared folder so it's not copy-pasted between org and live
- Fix: Org: Part 1 of 3 - move TabMemberScoresWHS to Shared folder so it's not copy-pasted between org and live
- Mod: ISVAPI: Score play dates are now returned using the union DB as the source, not WHS.  This is because we have had an issue importing scores from union to WHS which resulted in WHS PlayedAtUTC values having the wrong offset, leading to incorrect play dates when ISVAPI queries this information.  The union data is still correct because the import was done directly from the source data using SQL, no timezone issues. Add: ISVAPI: PlayedAtLocal properties added when returning scoring data to ISVs.  This is helpful for them since they don't have to do any conversions into the course timezone before displaying the data to their users.
- Mod: Live: UnsatisfiedScoreIntents report now pages through score intents.
- Mod: WHSAPI: get unsatisfied scoreintents new paging endpoint because the resultset is getting massive
- Fix: Live: teams comp result with composite markers throwing error on score entry for teams after the 1st when teamed after scorecards printed #34092
- Mod: ScheduledTasks: Increment sync dates when syncing courses/scores even when nothing gets synced, for performance on whs level
- Fix: ClubCMS: Exception fixes for getting passport id and member details.
- Mod: Clubcms: card order interclub message text change via Matt so its clearer
- Add: ClubCMS: sql: add MailingListRecipientEmailVerify table (used for verifying subscriber email addresses)
- Fix: API incorrectly assumed that the database timezone was NZST, leading to off-by-one score play dates in the GB&I IOS apps.
- Mod: Live: 24hr timeout on away score sync because syncing courses can take a while, coz import
- Fix: WHSAPI: sync away scores was not syncing away scores
- Mod: Part 2 of 2: highlight card requests instead of automatically approving them when we click on a interclubmessage email
- Mod: ClubCMS: Golf Ireland: newsletter signup verify: footer subscribe widget update
- Mod: ClubCMS: sql: add IsVerified column to CWMailingListRecipient; if this is true, it means that the user has completed the registration process: 1) verified the email address, 2) submitted form with with privacy checkbox
- Mod: ClubCMS: Golf Ireland: newsletter signup verify: show last message; add validation
- Mod: Part 1 of 2: we dont delete card fulfilment interclub message requests automatically, so we no longer allow Approve/Rejects to occur from the massage tab because clubs can approve the same request multiple times
- Fix: Jenkins build. Sorry another one.
- Fix: Jenkins build.
- Fix: Live: teams comp result with composite markers throwing error on score entry for teams after the 1st when teamed after scorecards printed #34092
- Add: ClubCMS: contact-form-v2 control: This control is Golf NZ specific as of the moment. Mod: ClubCMS: AssociationController: /submitMessage - Retrieve the recipient e-mail address (union's contact e-mail address) from the DB instead of using the emailAddressTo from the POST request to ensure that the message is always sent to the union's contact e-mail address configured in the page control property.
- Fix: ISVAPI: build
- Fix: ISVAPI: if someone is a member of your club, return immediately when trying to create them
- Fix: ISVAPI: if someone is a member of your club, return immediately when trying to create them
- Fix: ISVAPI: Don't null out Firstname, Surname or reset Date_Started when you call link member without specifying these fields.
- Mod: Org: Order card requests by clubname
- Mod: WHSAPI: performance improvement to get away scores
- Fix: API: better logging of HomeClubChangeRequested webhook failures
- Mod: Marker Changes: If a marker is deleted (i.e. EndDate is set before StartDate) the marker is now also marked as deleted in WHSAPI.
- Mod: wa_UpdateCoursesToLiveForMarker didn't return a list of /all/ markers that were touched.  This meant not all changes were sent to the hook which means WHSAPI missed out, making it sad.
- Fix: ISVAPI: Do not withhold handicap when searchproxy is querying visitors, because it means we can't see their handicap in Live cross-union search.
- Fix: Live: ORNS in visitor options when loading another unions member
- Fix: Live: Member quick search ORNS when someone has a null handicap (because of DOB/EMAIL requirements)
- Fix: Call the correct GetPassportId method; GetPassportId does not work well, should always call GetPassportIdProperly() (see doctag)
- Add/Mod: ClubCMS: Golf Ireland: newsletter subscribe verification: added the complete my registration step: work in progress
- Add/Mod: ClubCMS: Golf Ireland: newsletter subscribe verification: work in progress
- Fix: ClubCMS: Incorrect condition for unauthorised view.
- Fix: NSwag generated new method names now that we have a DELETE verb on the markers/history route.
- Fix: ClubCMS: Comments: Added a required validation.
- Fix: Live: when setting initial handicaps, allow plus handicaps to be entered
- Add: ISVAPI: Score differential post-PCC is now returned to ISVs so they can display this instead of working it out themselves (which is tricky since it has to be slope adjusted and account for 9H scores properly)
- Mod: ISVAPI: Return pre-PCC value from WHS rather than union database (because the latter doesn't have this information)
- Fix: Build: regen WHSClient.g.cs
- Mod: Org: filter pending card requests by cmember.isMRU=1 so only 1 cmember record gets joined in
- Mod: WHSAPI: The pre-PCC score differential is now returned in handicap/record so we can send it on to the ISVs in ISVAPI.
- Fix: Org: Card fulfillment csv generation was throwing error for GI when logged into Org Mod: Org: Card fulfillment CSV ordered by Club name by request of Pat, for ease of sending to each club
- Mod: ClubCMS: Friend dashboard: Add a back to overview link.
- Fix: When inserting a new marker history with a StartDateUTC in between two existing markers, the start..end date ranges ended up overlapping because the EndDateUTC of the new history record wasn't set to the StartDateUTC of the one immediately following it. Add: New endpoint DELETE /api/v1/markers/history/{uid} to allow deleting a specific marker history.  Handy when an NZCRData record is deleted (or StartDate set to > EndDate) in union land.
- Mod: Live: IE: When reinstating someone after we've resigned their "away member" record, we sometimes want to preserve their membership number, and therefore their card number and pin number. We check Firstname/Surname to help ensure it's the same person.
- Mod: ClubCMS: Allow friends to view my handicap, chart and scores.
- Fix: Core: ORNS when searching resigned members only with basic member search
- Add: Push Notifications: Production ARNs added for England, Ireland and Wales.
- Add: Push Notifications: SNS ARNs added for GB&I Stage.
- Mod: Configuration profile now includes SNS ARNs for push notifications; we no longer have to read these from SSM parameters.
- Fix: Live: Kounta member syncs not working
- Mod: ScheduledTasks: away score sync happens twice per day and is more performant
- Mod: WHSAPI: changed away score endpoint to query courses within an away union instead of ALL away scores for a union
- Mod: ISVAPI: removed go-live specific ISVAPI role permissions
- Mod: Bulk Email: fix image uploader
- Mod: Bulk Email: use the S3 static bucket for the images;
- Mod: ClubCMS: My Account: Made the account controls ready for GolfNZ.
- Fix: Live: ENG: filter the code that gets the next member number by associationId
- Fix: Include the user's session ID in the nav item cache key.  If someone gets a new session OR logs out and back in again, we should calculate the menu again (for example if we give someone a new product we will usually ask them to log out and back in to get the product in their menu)
- Mod: ISVAPI: better score validation message when ISV does no post hole-by-hole score data.
- Mod: ISVAPI: better score validation message when ISV does no post hole-by-hole score data.
- Add: Reverse proxy configuration for Bulk Email England and Wales.
- Add: BulkEmail configuration for England and Wales.
- Mod: Live: don't show merge scores link in Live for ireland prod yet - not ready for in-union merges.
- Mod: Adweb: allow merges of people who dont have dateresigned set on their member record, as long as they have no live cmembers
- Fix: Live: RegionId null on some cmember records in stage, fix ORNS in member search because of it
- Mod: Live: Can view scores of away Ireland members
- FIx: API: can now send email to member who has no home club
- Fix: MergeExisting.aspx postbacks
- Fix: Live: orns in visitor tab
- Fix: Live: merges
- Fix: ISVAPI: If a member has no handicap because they have not been uploaded to WHS (i.e. they have no WHSMemberUID) the API throws an exception when paging through members.
- Fix: ISVAPI did not return the OverridePCC value to clients in the handicap/scores endpoint.
- Mod: API: For Golf Ireland only - Temporarily disable DotGolf API.
- Mod: Live: Allow clubs in IE to merge people within IE
- Fix: Live: error when clicking send merge request
- Fix: Live: ORNS when loading people from our union who dont have a home club
- Add: ClubCMS: Golf Ireland: mailinglist-subscribe-confirmation: initial commit
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe/view.html: typo error fix (original text was copied from figma)
- Fix: Reports: Playing handicap references part 4 - https://dotgolf.atlassian.net/browse/DG-2481.
- Mod: Live: merge existing members : cancel merge button
- Mod: ClubCMS: Golf Ireland: mailinglist-subscribe/view.html: ui/style update
- Fix: Reports: Playing handicap references part 3 - https://dotgolf.atlassian.net/browse/DG-2481.
- Mod: Live: Love Golf: update the rich text editor to allow links (it's a support request we get from time to time) (housekeeping)
- Fix: Live: member's records from other clubs were showing up in card fulfilment
- Fix; Live; sql typo
- Mod: ClubCMS: GolfNZ: Flexiclub confirmation
- Mod: ClubCMS: GolfNZ: Added the AssignClubId property for flexiclub
- Fix: SIC: If the play date is touched, the player details should always reload, because with WHS you can now have a new handicap every day.
- Mod: Live: Createmember: Create card request only if person is a a new member at this club, otherwise assume they still have their old card.
- Mod: ClubCMS: Default isPost to 0.
- Mod: ClubCMS: Updated alter script
- Fix: MemberCodeManagerIE: member number parser: allow any 8 digit number (it doesn't have to start from 1-4); per Marcus, this is only used for parsing not for generating the membership number
- Mod: ClubCMS: GolfNZ: Posts control
- Fix: Live: could not restore female members in ireland because their old membercode would throw an errors when trying to submit the form
- Fix: Live: Fix #33875 - Edit timesheet still showing inactive courses.
- Mod: API: Use SQL table alias.
- Fix: DataCache race condition - very unlikely to be hit, but deadly when it does.  We've seen this a couple times in NZ, and once every few days in England.
- Mod: ClubCMS: Added isPost to CWTag
- Fix: ClubCMS: News Article: Changed createdate to publish date.
- Fix : Live : hopefully sorted signalr not showing scores being downloaded
- Fix: ClubCMS: Golf Ireland: revert previous change on link button styling
- Mod: ClubCMS: Golf Ireland: register: From 4th - 30th Nov 2020, we are allowing users to click on any of the links emailed. After which, only the latest verification code will be accepted again.
- Fix: API: Unattended green fee payments: Fix #33875 Do not return inactive courses.
- Mod: ClubCMS: GolfNZ: Flexiclub signup UI updates.
- Mod: ClubCMS: Golf Ireland: verification email text update (related to Trello: Text change on login screen)
- Mod: ClubCMS: Golf Ireland: verification email text update (related to Trello: Text change on login screen)
- Mod: Ethnicity no longer captured in GB&I.
- Mod: ClubCMS: Golf Ireland: link styling fix: update the html of the button that the user clicks on (the previous fix didn't work Rev 41664 - the padding of the link still didn't apply in Outlook) in the email (email verification, password reset)
- Mod: Live/org: Score intents report has better column headings
- Fix: Live: rename handicap freeze report "Handicap Freeze Report" instead of "Handicap Adjustment"
- Add: Some indexes for Friend Requests to avoid table scans.
- Mod: API: /search-for-friends - Added 2 second delay before processing the request.
- Mod: ClubCMS friends UX improvements to make it more responsive to the user, even though we've got a 3s artificial delay in there.
- Mod: org: header changes to member handicap freeze report , show if handicap is withdrawn
- Fix: ClubCMS friend search: when defocusing the search box, the dialog disappears, so you can't click REQUEST.
- Fix: org: member handicap freeze report wasnt working in org.
- Mod: Core: regen WHSClient.g.cs with some added docstrings
- Fix: Sigh.. Disabling the input causes focus issues and the search dialog disappears.
- Mod: ClubCMS: Friend search: this is a little nasty, but a) throttle search requests by waiting 3s before firing them off to the server and b) disable the input box while we're processing a request, so they can't keep typing and fire off more, and they deliberately have to tap/click back into the box to keep searching.
- Fix: Reports: Playing handicap references part 2 - https://dotgolf.atlassian.net/browse/DG-2481.
- Fix: Mailer multithreading was broken so lots of exceptions got generated when emails were sent.
- Fix: Live: Build
- Mod: Friends Search (ClubCMS et al) performance enhancement - do not do the ranking by members of my club if we're searching only 1 club.
- Fix: Duct tape hack to stop /system-error throwing exceptions when loading itself.
- Mod: Live: Create member Category field changed to Club Category, renamed default for nzga cat
- Mod: ClubCMS: Golf Ireland: reset password email: expand padding style for the button; assign Priority 5 for the email verification Email record
- Add: Live: Can choose nzga category when creating new members
- Fix: ClubCMS: Friends List control: 1) Hide club/member search results drop-down when it does not have the focus. 2) Select all text in the search input when clicked or focused.
- Mod: ClubCMS: GolfNZ: Added the post list and page.
- Mod: ClubCMS: GolfNZ: Added the post list and page.
- Mod: Mailer: Increased to 8 threads for outbound emails.
- Mod: ISVAPI: remove commented code
- Fix: WHSAPI: logic bug causing unauthorised errors when trying to merge members
- Add: Live: transition handicap calculation message for GB&I prod in member page and score listing page
- Mod: ClubCMS: Golf Ireland: card-ordering/viewmodel.ts: update table of request history after submit
- Fix: Org: View Courses - https://dotgolf.atlassian.net/browse/DG-2458. Courses combo box is empty for Org users from the root union (e.g. England Golf, Golf Ireland, Golf NZ) because of the filter @RegionId=0 - this should be null instead because the root union should be able to see all courses.
- Mod: ClubCMS: Golf Ireland: card-ordering: prevent multiple button clicks
- Fix: Live: create member page email validation was wrong in nz
- Fix: Live: Ireland should not require email or date of birth
- Fix: Live: Ireland should not require email or date of birth
- Mod: ISVAPI: RATE LIMIT back to 300
- Mod: WHSAPI: docstrings and remove redundant parameter on GetTransitionHandicapIndex
- Mod: ClubCMS: Golf Ireland: prevent multiple button clicks
- Fix: WHSAPI: ESRs of deleted scores no longer continue to affect transition SDs
- Mod: ClubCMS: Golf Ireland: prevent multiple button clicks
- Mod: WHSAPI: docstrings for member merge requests
- Mod: Live: https://dotgolf.atlassian.net/browse/DG-2477 - I have not run this script in Prod so I will just quickly update the SQL update statement.
- Mod: WHSAPI: delete ESRs for score when score is deleted
- Fix: Live: Added ability to hide/show NZGACategory - https://dotgolf.atlassian.net/browse/DG-2477
- Mod: WHSAPI: transition SDs are now affected by adjustments
- Fix: Reports: Playing handicap references - https://dotgolf.atlassian.net/browse/DG-2481.
- Mod: WHSAPI: docstring
- Fix: ISVAPI: remove last imemorycache reference from ScoresController
- Mod: Live: Playing handicap references - https://dotgolf.atlassian.net/browse/DG-2481.
- Mod: Removed caching of Settings.WHSCourseRatingMinusParEnabled because we suspect IMemoryCache is causing port starvation (assuming it is Redis backed)
- Mod: Reverse Proxy: apply TLS (https) to levingolfclub.co.nz
- ClubCMS: FileManager: Added copy link functionality and security to the page.
- Fix: ISVAPI: logging: incorrect indexprefix created a 'isvapiloglog' index
- Fix: Live: Pat says DOB+email is not necessary in IE - DG-2479
- Mod: ISVAPI: BulkLogDataAsync logging failures now logged to database
- Mod: ClubCMS: Verify email template: expanded padding style as this would work better on email clients (In the actual email i received during my IE testing in prod, the button didn't have padding.)
- Mod: ClubCMS: Golf Ireland: signup email template: update the background colour to light grey (used on the website)
- Mod: Moved gbi golive to 3pm utc.
- Mod: Live: hide membermerge in prod
- Mod: ISVAPI: WiretapMiddleware NOW logs data in bulk like WHSAPI
- Cleanup: Deleted two old source files that were not even part of the csproj.
- Mod: ISVAPI: WiretapMiddleware NOW logs data in bulk like WHSAPI
- Mod: ClubCMS: my-header/viewmodel.ts: call getnotifications if notifications is enabled
- Mod: ClubCMS: my-scores: call getrecentcomments only if showcomments is true
- Fix: ISVAPI: HTTPCLIENT BEING NEW'D UP STARVING THREADS
- Mod: ISVAPI: ElasticSearchLogger now logs data in bulk like WHSAPI
- Duct tape: Get rid of exception loop if system-error page dies.
- Duct tape: Get rid of exception loop if system-error page dies.
- Mod: ISVAPI: Go-live is now midday GMT
- Mod: ClubCMS: video-gallery: update the youtube thumbnail url
- Fix: WHSAPI: merge requests can be accepted by the home club of either member
- Mod: Live: only the global home club can request a member merge - better error messages
- Mod: Live: only the global home club can request a member merge
- Mod: Live: only the home club can request a member merge
- Mod: Live: better logging of swagger exceptions when accepting member merge requests
- Mod: ClubCMS: Golf Ireland: news-list: update mobile styles
- Mod: ClubCMS: Golf Ireland: news-detail: update mobile styles
- Fix: Live: MergeExisting: error when clicking merge members
- Fix: Live: MergeExisting: add space between Enter Member Verification Code and input box
- Fix: Org: course changes approval email had '+isnull(c.fullname, c.name+' Golf Club')+' in it instead of the actual clubname
- Fix: Live: mergeexisting failing because of bad sql
- Fix: Live: member quick search clubs dropdown defaults to disabled when only searching other countries
- Mod: ClubCMS: Notifications: Clear count when the notifications is opened.
- Mod: ClubCMS: tab-menu: style fixes and updates
- Mod: ClubCMS: Notifications: Display unread message count.
- Reverted revision(s) 41389 from Trunk: [BREAKING] Fix: ISVAPI: no longer returning member.DOB to client because it's always null. Will break Clubsystems and possibly IG ........
- Mod: ClubCMS: Typo.
- Mod: ClubCMS: Friends 2.0 - Juniors. For GB&I, club id is required when searching for potential friends. 2) Updated error messages.
- Fix: Live: js error in memberquicksearch
- Mod: ClubCMS: Golf Ireland: css cleanup; remove unnecessary comments
- Mod: ClubCMS: Friends 2.0 - Friends features is no longer accessible for Juniors (GB&I only). Mod: Shared: FriendsHelper - Member's age is should be less than Settings.NZGAJuniorAge.
- Mod: ISVAPI: unhandled exception handler. ErrorHandlingMiddleware now checks if response has started before attempting to write to it.
- Mod: ISVAPI: if logging to elasticsearch fails, try logging to the database.
- Mod: ClubCMS: Golf Ireland: image-content-hero: ids update
- Mod: ClubCMS: Golf Ireland: image-content-hero-single: ids update
- Mod: ClubCMS: Golf Ireland: simple version of the image content hero
- Mod: ClubCMS: Edit Member Details: removed tabindex the from read only fields (the user was allowed to click on the field although it was read only); text case update
- Mod: ClubCMS: Golf Ireland: Edit Member Details: style updates
- Fix: Live: if using member quicksearch to only search other countries, on initial load it would still show "filter by club" option
- Mod: WHSAPI: remove orgmember deletedDatUTC filter from GetOverrides for Organisation because it's much faster without it, and it's not a huge deal (runs in parallel now so it also eats more cpu). Will change it if it become a problem
- Mod: WHSAPI: add UID to override table filtered index for GetOverrides for organisation query
- Add: Shared: ClubMember: Added static method ClubMember.SearchForFriends(). Mod: API: Friends 2.0 - Juniors. Moved code to check if person is a junior in Shared (ClubMember.SearchForFriends) so we can use in other projects (e.g. ClubCMS).
- Mod: ISVAPI: small style change
- Mod: ISVAPI: getallmembersforclub: no longer sort by surname/firstname, dont need to be that nice, it uses CPUs. construct query dynamically in c#
- Mod: ISVAPI: getallmembersforclub: halved page size to help WHS, and reduced the amount of members we're sending to redis so it doesnt time out on set
- Mod: ClubCMS: Golf Ireland: menu on mobile: hide social media icons for now; fixed partial hiding of hero content on mobile because of the fixed-top class; image content: added padding on mobile
- Mod: ClubCMS: Golf Ireland: zRegister: clear the validation message after clicking Next; add some margin on top of the validation message
- Fix: ClubCMS: Golf Ireland: zRegister: correct the server side password length validation (second layer of validation)
- Mod: ClubCMS: Golf Ireland: DG-2465: zRegister: added a new property (FooterAdditionalMessage) where we can define any additional html message such as the link to the tutorial video
- Mod: ClubCMS: Golf Ireland: DG-2465: zLogin: added a new property (FooterAdditionalMessage) where we can define any additional html message such as the link to the tutorial video
- Fix: Org: org users can now add upward adjustments to low handicappers DG-2541
- Mod: ClubCMS: Golf Ireland: footer/view.html: temporarily remove the social media icons as requested by the client
- Mod: ClubCMS: Golf Ireland: my-performance: add placeholder for message; fix mobile styling and order of sections
- Mod: ClubCMS: Golf Ireland: prevent multiple submission of email address submit button and resend button (I just noticed in the IE prod email table that there were multiple send of the verification email)
- Mod: ClubCMS: CreateNewCredential: ensure that a passport and username combination only has one valid record in PassportCredential
- Mod: ClubCMS: Golf Ireland: handle scenario where the user may have just done Step 2 (enter password) but didn't finish Step 3 (enter an email address). This means that the user hasn't received the email with the verification link yet. Hence, allow user to start the signup process again.
- Mod: ClubCMS: Golf Ireland: GetFixtures: handle no results (TotalCount); also, only include club competitions (exclude association comps)
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: View Club link: open in new tab
- Mod: ClubCMS: Golf Ireland: club-details: build the Tee Booking URL and Membership URL
- Mod: ClubCMS: Golf Ireland: club-fixtures-search/viewmodel.ts: build the Tee Booking URL
- Mod: ClubCMS: Golf Ireland: club-search/view.html: fix pagination display condition
- Mod: ClubCMS: Golf Ireland: club detail query: handle empty TeeBookingUrl and MembershipUrl
- Mod: ClubCMS: Golf Ireland: hero: display title as html not just text
- Fix: adweb: Build
- Mod: Live: svn ignore a js and js map file
- Mod; Live; delete dead code
- Add: Live: interunion merges ready for end-to-end testing, although a few edges cases like we don't sync scores for non-home unions yet
- Fix: api: bool logic error in merge accepted hook
- Mod: api: better comments in merge accepted hook
- Mod: API: handle potential null members better, added ravings off a sleepless madman
- Mod: ClubCMS: Golf Ireland: club-fixtures-search/view.html: fix the View Club link
- Mod: API: implement member merge request acceptance. Found a flaw - if a database only has the deleted member, we cant tell ISVs what to use as the new MemberUID for that person.
- Mod: Adweb: slicer/SlicerLib.cs: modify the Love Golf Play commission to be permanently: 5% DotGolf, 0 NZG as instructed by Thiem (discussed with Matt and Dean) (see email from Thiem sent on 29th Oct 2020)
- Mod: Add otherMemberId column to MemberMergeRequest
- Mod: Member: allow lazysaves of MemberUID and WHSMemberUID
- Mod: ClubCMS: Golf Ireland: club fixture fee: use the club currency; fix distance filtering issue caused by recent change
- Mod: WHSAPI: return deleted UID from accept MemberMerge endpoint for convenience
- Revert revision(s) 41468 from Trunk: (maybe we'll use it again...?) Mod: WHSAPI: delete WHSAPI.XML
- Mod: WHSAPI: specify Nonclustered on UID indexes on HomeOrganisationChangeRequest and MemberMergeRequest for clarity
- Mod: WHSAPI: UID indexes on HomeOrganisationChangeRequest and MemberMergeRequest
- Mod: Reverse Proxy: sites-ie.list: added golfireland.ie
- Mod: ClubCMS: IEProd bindings: added golfireland.ie
- Mod: MemberMergeRequest deleteddate not deletedate
- Add: API: Add merge request hook handlers
- Fix: Friends 2.0 - Fix part 4. No scores returned when viewing a friend's profile (who is a member at another club).
- Mod: API: HomeClubChange hooks log better exceptions
- Mod: ClubCMS: Golf Ireland: club-search: handle entered club name (instead of selecting from the list); handle clearing of the club name field (make sure the club filter is cleared)
- Mod: MemberMergeRequest table createddate and deleteddate columns
- Fix: Live: Build: Removed dead methods erroring because of changed swaggerfile
- Mod: ClubCMS: Golf Ireland: club-search: distance field: fix previous commit
- Fix: Mod: Backdated Markers part 7 of n.  In some cases markers end up not being sent to WHSAPI because the new NZCRDataId was never returned from the update procedure.
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: remove default selected Distance; allow to select Any Distance
- Mod: ClubCMS: Golf Ireland: club-search: added an "Any / All" option to Facilities, Province, and County
- Mod: WHS: add VerificationCodeSendMethod when requesting member merges
- Fix: API: Friends 2.0 - Fix part 3 - Return a person's scoring history only if the following conditions are met 1) User looking at the profile is a friend of that person. 2) If they are in the same home club (privacy mode still applies).
- Mod: ClubCMS: Golf Ireland: club-search: distance field: remove default selected distance (as requested), and also added "Any distance" as an option
- Fix: ClubCMS: Improved logging for SaveControlPropertySetting.
- Mod: ClubCMS: Golf Ireland: find a golf club: (temporarily) hide the "Number of Holes" filter as we don't have the full data from the golfnet database. golfnet's Courses table has the data but it's not complete.
- Mod: Live: replace NZ Golf reference with GBI friendly string
- Fix: ClubCMS: SaveControlPropertySetting: Log only saving when not admin.
- Fix: API: Friends 2.0 - Fix part 2 for Return a person's scoring history only if the following conditions are met 1) User looking at the profile is a friend of that person. 2) If they are in the same home club (privacy mode 1 an 2 still applies).
- Mod: Live: enable adj gross score entry for GB&I in Clubhouse
- Fix: ClubCMS: Added a logging and security check for the SaveControlPropertySetting.
- Mod: ClubCMS: Golf Ireland: find a golf club query: add filtering by selected Province; remove unused Program - related code from the Ireland control (affects Ireland only)
- Fix: Friends 2.0 - Return a person's scoring history only if the following conditions are met 1) User looking at the profile is a friend of that person. 2) Same home club (privacy mode still applies).
- Mod: Add an await to AppResolver.Resolve so the visual studio warning goes away
- Fix: Friends 2.0 - Juniors determined by union category.
- Mod: Bulk Email: drafts list: display latest 50 (not just 30) drafts
- Mod: Core: regen EzPoco.g.cs
- Mod: Rename table WHSMemberMergeRequest to MemberMergeRequest
- Mod: Core: regen EzPoco.g.cs
- Add: sql: interunion member merge request table
- Mod: WHSAPI: rename Brief.MergeMembers UIDs property because it generates as UiDs in the C# client
- Fix: Live: Home club change reject shows up in interclub message now
- Mod: WHSAPI: fix docstring and add home club change rejected API test
- Mod: WHSAPI: delete WHSAPI.XML
- Add: WHSAPI: Merging members API and webhooks
- Mod: ClubCMS: Golf Ireland: club-search: geo location - align with open fixtures' geo location
- Mod: API: Friends 2.0 - /search-for-friends Updated exception message.
- Mod: API: Friends 2.0 - Juniors. Throw FriendsNotAvailableException.
- Mod: ClubCMS: Golf Ireland: club-detail: create a simpler query (GetBasicClubDetails) for the club details control (first section on the club detail page). Also modified the query to get the ManagerName from the Contact tables.
- Mod: Return OverridePCC value in Score Listing if specified.
- Mod: Backdated Markers part 6 of n.  Configuration profile updated to allow backdating for England, Ireland and Wales.
- Mod: API: Friends 2.0 - Restrict juniors from searching, adding friends or accepting friend requests.
- Mod: ClubCMS: Golf Ireland: error pages css, make it mobile friendly
- Fix: ClubCMS: Solution fix.
- Mod: Backdated Markers part 5 of n.  Configuration profile updated to allow backdating in Stage
- Mod: Backdated Markers part 4 of n.  Allow backdating markers that have already ended.
- Fix: ClubCMS: Security updates for PageControlApi/PageControlController.cs
- Mod: ClubCMS: Golf Ireland: change back the StaticContentGateway Production URL to https://static.clubhouse.golfireland.ie/
- Add: WHSAPI: Unit test to confirm that backdating markers works in WHSAPI.
- Mod: Backdated Markers part 3 of n.  Course changes now sent to WHS as soon as they are approved in Live.
- Mod: Backdated Markers part 2 of n.  Since course changes can affect more than 1 NZCRData record, we now return an array of IDs affected.  They are also now sent to WHSAPI if you approve a change in Live. Mod: ResolveAppURL no longer throws an exception in unit tests.
- Mod: ClubCMS: Golf Ireland: admin-news-article/view.html: hide Tournaments if there are no Tournaments options to show; also displayed the Summary field in one row again
- Mod: ClubCMS: Golf Ireland: rename Article Date to Publish Date
- Fix: ClubCMS: Commenting: Unable to comment because the the passportid is null.
- Fix: ClubCMS: tournament leaderboard no longer shows deleted divisions
- Fix: Public: tournament leaderboard no longer shows deleted divisions
- Fix: API: MyGolfController - /search-for-friends endpoint was not totally fixed from the previous commit.
- Mod: Backdated Markers part 1 of n.  As long as the configuration profile AllowBackdatingMarkerChanges==true (which it isn't in Trunk until I've completed this), this will allow the Org UI to submit markers with past Start date values, and clubs can accept these in Live. Mod: Got rid of the wa_UpdateCourseChangesForMarker proc which was doing a pretty basic UPDATE statement only.
- Mod: ClubCMS: GolfNZ: Added competitionid in the news article.
- Mod: ClubCMS: GolfNZ: Added competitionid in the news article.
- Fix: API: MyGolfController: /search-for-friends endpoint - Searching for someone from a specific club (that truly exists) is not getting returned (e.g. Search for "Hunter" in "Berrington Hall Golf Club").
- Mod: WHSAPI: Just committing the new OverridePCC index I've created in Prod WHS1.
- Mod: ClubCMS: Golf Ireland: club-details: don't display number of holes if it's not available
- Mod: ClubCMS: Golf Ireland: club-search: make the email a mailto link
- Mod: ClubCMS: Golf Ireland: club contact details: display Loc_Address4
- Fix: Reports: ActiveReports: Reports not working if we fail to load the club's logo. Fix: Reports: ExtQuery: Handicap Comparison Report - Filter resigned and deceased members.
- Mod: Live: Replaced some ConfigurationProfileResolver.GetConfigurationProfile().Language references with Lang.Current
- Mod: Live: bulk member admin style change
- Mod: ClubCMS: Golf Ireland: update the Google Maps API key
- Fix: Live: Build
- Mod: API: removed redundant comments from webhook receivers
- Fix: Live: "NZG Levy Category" was showing in GB&I bulk member admin
- Fix: Live: away union home club change request messages use correct home club name
- Fix: Live/Org: freeze handicap regex had an unescaped . which allowed invalid characters to be entered
- Fix: (theory at this time): If you have the same central member code at more than 1 club (like they have in England), ClubCMS goes into an infinite loop throwing errors while trying to authenticate you.
- Mod: ClubCMS: Golf Ireland: added PublishDate to CWNewsArticle table. This is now the date displayed on the website news article. The admin can manually set the Publish Date when creating / editing the news article.
- [BREAKING] Fix: ISVAPI: no longer returning member.DOB to client because it's always null. Will break Clubsystems and possibly IG
- Mod: ClubCMS: Golf Ireland: news-list: separate the search result text / message from the filters
- Mod: ClubCMS: Golf Ireland: news: show / hide filters
- Mod: ClubCMS: Golf Ireland: news-list: remove unused code
- Mod: ClubCMS: Golf Ireland: News advanced filters
- Mod: ClubCMS: Golf Ireland: card ordering: style update
- Mod: WHSAPI: Put OverridePCC stuff back in preparation for creating the index tonight.
- Mod: ClubCMS: Added showing and hiding facility types
- Mod: ClubCMS: Added showing and hiding facility types
- Mod: ClubCMS: Golf Ireland: card ordering: display existing requests in a table; if the latest request has a status of "Submitted" or "Ordered", hide the Order form.
- Mod: WHSAPI: Emergency patch to remove OverridePCC from the equation (it is causing high IOPS because we could not create the index overnight).
- (Kenneth+Marcus) Fix: ClubCMS: Signup - Incorrect DOB recorded in the database after member signs up for a MyGolf account.
- Mod: ClubCMS: GolfNZ: Added club banner control. - contains other ui fixes for tournaments
- Mod: ClubCMS: GolfNZ: Added club banner control.
- Fix: Org: prevent deleted clubs showing in the club dropdown
- Fix: WHSAPI: Core.Poco.Insert.Score.Equals() wasn't picking up on OverridePCC changes, therefore the changedate wasn't updated and handicap wasn't recalculated.
- Mod: ClubCMS: Golf Ireland: card-ordering: rephrase text
- Mod: ClubCMS: Golf Ireland: high-performance-amateur: if the link is not defined, don't display the link button
- Mod: ClubCMS: Golf Ireland: High Performance profile controls: update Back links (make them configurable)
- Fix: ISVAPI: when ISV posts to create member endpoint with linkmemberUID, and that person is already live, should NOT create new cmember record for them.
- Fix: ClubCMS: GetClubs: Instead of getting all clubs on load we now have get clubs by name.
- Shared: Scores: Allow district users in Org to edit scores.
- Add: Score.OverridePCC column.
- Mod: ClubCMS: Header - Notifications: Removed the bubble when there are no messages.
- Mod: ClubCMS: Golf Ireland: update the contact us URL for Golf Ireland
- Fix: ClubCMS: JavascriptStringEncode names to avoid Javascript syntax errors for members that have an apostrophe in their names (e.g. William O'Halloran).
- Fix: Transaction may not be null, but Transaction.Connection is....  Does not spark joy, but can't get rid of it right now.
- Mod: ClubCMS: Added authorisation to the APIs.
- Mod: ClubCMS: Golf Ireland: remove words / references to "old email addresses" or "email address in the database" (This may not make sense to members; we will ask all members to enter an email address during signup.)(as requested by Pat)
- Mod: ClubCMS: Golf Ireland: email template: update logo URL
- Mod: WHSAPI: change some Core.Poco namespace references; using Poco = DotGolf.WHSAPI.Core.Poco;
- Mod: WHSAPI [MAJOR]: OverridePCC value added to scores.
- Mod: Adweb: search emails by toAddress
- Mod: ClubCMS: Golf Ireland: updated footer menu query: use left join (to include menu items not linked to a specific page)
- Mod: Live: hide Scoring history link in visitor tab when viewing people from other unions, because they probably have scores at home, dont know how many
- Add: password backup column and triggers for clearing passwords when they are inserted alongside non-empty passwordhash
- Mod: ScheduledTasks: task does not try hash empty Passwords (because these have been wiped for GDPR compliance)
- Mod: ClubCMS: GolfNZ: Handicap rankings.
- Mod: ClubCMS: GolfNZ: Handicap rankings.
- Mod: Live: WHSScoreInsertedUpdated handles MemberId=0 (legacy)
- Mod: ScheduledTasks: task does not try hash null Passwords (because these have been wiped for GDPR compliance)
- Mod: Live: DOB required and can't be 'deleted' from TabMember.aspx (although it can be changed to something random - not much we can do there.)
- Fix: Org: password hashing when creating new club. Mod: Org: create club enforces max length more betterer
- Mod: Live: Delete old handicap adjustment page
- Reverted revision(s) 41306 from Trunk: Because seems to ok now...? Fix: ISVAPI: dateofbirth and isHomeClubMember were breaking HandicapMaster, reverting them until we add a workaround for Clubsystems (who asked for them) ........
- Mod: ClubCMS: Golf Ireland: News: added Date and Tag filters (initial commit)
- Mod: ClubCMS: Golf Ireland: moved datepicker css to the global css
- Reverted rev 41307 as the problem appeared to be app pool state on web-2 (unknown as yet)
- Fix: ClubCMS: Get club folder SQL no longer uses datacache because its falling over on EG website signup - database can handle it
- Fix: ISVAPI: dateofbirth and isHomeClubMember were breaking HandicapMaster, reverting them until we add a workaround for Clubsystems (who asked for them)
- Mod: Increased ISVAPI to 1500 calls per minute to accommodate the bulk member uploads in GB&I.
- Mod: Live: after a bold call from Matt, members are now required to have an email AND date of birth in GB&I when signing up in Live
- Fix: SSO: can now log in with matt user again
- Fix: ClubCMS: Build fix.
- Fix: ClubCMS: Added a dob validation to the profile update.
- Mod: ClubCMS: Edit Profile: Store selected region in CMember.State column. Mod: ClubCMS: Signup: Send verification code - Verify URL was double encoded causing some issues for some e-mail clients. Mod: ClubCMS: CW_UpdateMember: Add check isnull check before updating the RegionId column in the Member table.
- Mod: ClubCMS: admin-news-article: redirect the user to the News page after an article is deleted
- Mod: ClubCMS: GolfNZ: Added admin hero control
- Mod: ClubCMS: GolfNZ: Added hero admin.
- Mod: ClubCMS: Golf Ireland: video gallery style updates
- Fix: Live: signing up new member from another union no longer clobbers newly generated union membercode
- Fix: More GetPassportId() references.  Wish we could obsolete this method already...
- Fix: Use GetPassportIdProperly() instead of legacy GetPassportId(), the latter throws an exception if it feels like it, which is not great if you get 200,000 pageviews per hour.
- Mod: Mailer: upgraded to 4 cylinder naturally aspirated.  We now keep 4 connections open to the upstream MX to work around the higher latency between UK and US (where mx3 is located).
- Mod: ClubCMS: Golf Ireland: recently added css for video gallery affected a bit the my-performance styling for Ireland
- Mod: ClubCMS: removed commented code and redundant ProperCase method
- Mod: ClubCMS: replace password with passwordhash in user utils pass-passport checks and JoinGeneric.ascx. No longer store password in view state
- Mod: ClubCMS: Golf Ireland: my-header/view.html: apply back styling for Ireland (doesn't affect Golf NZ)
- Mod: ClubCMS: my-header: add showNotificationsInMenu control property so we can hide the recently added "Notifications" from the menu where it's not needed
- Mod: ClubCMS: removed commented code
- Fix: CasualGolf: can log in as admin again. Mod: CasualGolf: Always validate encrypted credential timestamp
- Mod: ClubCMS: my-scores/view.html: removed css class "js-fade-up-interval" from the table header (Ireland header doesn't show because of this; it doesn't matter for GolfNZ)
- Mod: ClubCMS: my-scores: remove unused / unnecessary code (svg stuff I have pasted when the control was initially created; and also the commented code)
- Mod: ClubCMS: cw_memhaspassword checks passwordhash instead of password
- Fix: Live: Build
- Mod: Shared: remove unused(?) LoginCredentialsValid method
- Mod: Shared: remove unused(?) GetEncryptedCredentialString method
- Mod: ClubCMS: Golf Ireland: club-search: use a different new query with just the essential information
- Mod: Public: new passwords 8 digits long
- Mod: Adweb: fix clubno warning being incorrect in GB&I
- Mod: Live: Reports: The following reports are not useful for GB&I (for now): 1) Membership section - Members Joined Date, Members Resigned Date, Address Labels and Expected Renewals Date 2) Handicapping section - Best Gross/Net by Member, Most Improved Golf (ExtQuery report).
- Mod: Adweb: cull ComputerNOs in edit member page and fix inner join on m.club because it can be null
- Fix: ClubCMS: tournament registration MemberExists check didn't work for England/Wales (if they ever end up using it). Removing computerno references
- Mod: Passport: string change
- Mod: CasualGolf: we're sending plaintext passwords to people signing up for CasualGolf. Not going to fix it right now, but added warning about it.
- Mod: ClubCMS: Golf Ireland: zRegister.ascx: css update
- Mod: ClubCMS: Golf Ireland: news-list: display hidden articles only when the administrator is logged in
- Fix: Public: build
- Mod: Live: remove unused method lnkLGPlay_Click
- Fix: ClubCMS: Forgot Password: Forgot password not working for England and Wales - Emails were sent successfully but there was no content and the DotGolf logo gets displayed in that e-mail. Followed the content from IE using the EmailTemplateWithCodeGeneric.txt template.
- Mod: Live: passwordhash should not load from password field because we'll be removing it
- Fix: ClubCMS: golf ireland verfication email pointed to golf.co.nz
- Fix: Wales config profile pointed to golf.co.nz as public site in Dev
- Fix: England config profile pointed to golf.co.nz as public site in Dev
- Fix: ClubCMS: Golf Ireland: high-performance: don't show the hidden players when not logged in as an admin (it was applied to the amateurs but not the pros)
- Mod: Live: small Changepassword refactor
- Mod: Live: inserting PasswordHash into usersecurity
- Mod: Shared: remove public getter from PassportCredential.Password
- Mod: Live: UserSecurity loads passwordhash from database
- Mod: Live: Hide matchplay/strokeplay/generalplay/competitionplay key in score listing for NZ
- Fix: ISVAPI: swagger doc was wrong
- Mod: Converted GetMemberWithEmailVerifyCode() from GET to POST - there is something up with the API routing code, so we can't use GETs here. Mod: VerifyCode() will now use the tag to verify the person in addition to the memberCode.  It'll use the tag if there is no memberCode specified (which happens when the user clicks the link in the email). Fix: To avoid an error, do not call GetMemberWithEmailVerifyCode() without a code.
- Reverted my last 2 commits - this caused more damage than good...
- Fix: Build error
- Fix: The GetMemberWithEmailVerifyCode() method did not work because there are routing issues with the GET method (I think).  So just sent back to POST. Fix: VerifyCode() did not work (understandably) if you don't pass it a memberCode - but it gets an EmailVerificationTag, which we can use to find the Passport and therefore the correct member code.
- Fix: Another NVARCHAR
- Fix: Increased maxlength from 8 to 12 for membership number.
- Fix: Pass VARCHAR to this piece of SQL since NVARCHAR causes performance issues.
- Mod: Some CONVERT statements since Dapper currently passes strings into the database as NVARCHAR, not VARCHAR.
- Fix: ClubCMS: Signup - Move onloadCallback further up the page.
- Mod: Members have to opt-in to subscribe to newsletters, so we do NOT check the boxes on the signup form by default.
- Fix: ClubCMS: Signup - Place captcha rendering in the $(document).ready();
- Mod: ClubCMS: Signup no email UI updates.
- Mod: Public: Golf Ireland 'signup' and "forgot-password" permalinks for the MyGolf app.
- Mod: ClubCMS: Golf NZ, England, Wales: make the signup form mobile-friendly
- Fix: ClubCMS: Security fixes continuation.
- Fix: ClubCMS: Signup - Only for England Golf. If no e-mail address on record for a valid member number, display the "Unlock your scores" message. Fix: ClubCMS: Signup - Only for England Golf. Add captcha while we sort out some authorization issues in the API.
- Mod (half baked): Various security tidy-ups (Marco will continue with this) to lock down some API endpoints that were previously allowing anonymous access.
- Mod: ISVAPI: return isHomeMember from ISVAPI
- Security: Check for the existence of a cached code before verifying.
- Security: Check for the existence of a cached code before verifying.
- Fix: ISVAPI: in stage (where, member.CentralMemberCode is null for almost everyone) signing up a secondary would create them a new membership number
- Mod: Changed mailer service default sender name away from "DotGolf Mailer Service" for GB&I.
- Mod: ClubCMS-England: Got rid of broken membership number length checks in Forgot Password page - we send it up to get checked. Fix: Error message now makes a distinction between invalid numbers and unregistered numbers so the user knows what to do.
- Fix: Live: If marker is not is WHS yet, and score gets submitted, the marker gets created but the score is sent without a markerUID and fails with 400
- Fix: Live: re-saving scores synced from another union preserves playdate
- Fix: WHSAPI: Finally sorted out score playdate roundtripping!
- Mod: ClubCMS: Golf Ireland, Golf NZ: remove unused code
- Mod: ClubCMS: Golf Ireland, Golf NZ: admin news article: add delete article, and show/hide article functionality
- Mod: Irish clubs can no longer search for visitors by name; they can only locate visitors by entering their full membership number now. This mod should not affect clubs in any other union since it is controlled with the VisitorSearchRestriction feature, which is defaulted to Unrestricted.
- Mod: Shared: When sending scores to WHS, we now send localtime instead of utc, which allows other unions to edit scores without messing up the playdate
- Mod: WHSAPI: Remove required attribute from EnteredByOrganisationUID because we validate it later
- Mod: ClubCMS: Golf Ireland: Menu: GetTabMenu: exclude hidden menu items
- Mod: WHSAPI: allow omitting EnteredByOrganisationUID if updating a score (allows other unions to edit the score and send it back up)
- Fix: ClubCMS: My golf header notification fix.
- Add: bindings for images (en and wa)
- Fix: ClubCMS: Sign up username tooltip fix.
- Fix: ClubCMS: Sign up username tooltip fix.
- Mod: WHSAPI: Wiretap middleware buffers request body using framework method instead of buffering ourselves and replacing it with our own memory stream - HOPEFULLY fixes request body being cut off sometimes (_id : "8VgQQ3UBteIAaC0Y3YxK" in Kibana).
- Mod: ISVAPI: Wiretap middleware buffers request body using framework method instead of buffering ourselves and replacing it with our own memory stream - HOPEFULLY fixes request body being cut off sometimes (isvapi ie stage, _id : "vYgnR3UBl6roMxizQDov" ).
- Fix: ClubCMS: Fix exception "Sequence contains more than one element" in GetMemberByMemberCode(). Added JOIN clause "member.ClubNo=cmember.ClubId" so we only get the home club CMember record.
- Fix: GetEmailSubscriptions killed the isCodeValid flag if it fails; looks like a copy/paste bug. Fix: Using Redis to store email verification codes; DataCache goes away if the app pool is recycled, so is unreliable as a persistent store. Fix: Random number generator is now static to avoid returning the same numbers over and over.
- Mod: WHSAPI: scores can be posted with local playdate instead of utc playdate
- Fix: ClubCMS: Sign up: - Made the code expiration to 24 hours - Return membercode even if not logged in
- Mod: ClubCMS: Golf Ireland: high performance pro/amateur profile mobile styles
- Mod: ClubCMS: Golf Ireland: high performance amateur, accordion mobile styles
- Fix: ClubCMS: Added user session checking for the methods in admin.asmx.
- Mod: ClubCMS: remove sourceMappingURL to fix the 404 error logged in the console
- Add: images subdomain for England and Wales production.
- Add: Reverse Proxy configuration files for static.{en,wa}.dotgolf.co.uk, static.clubhouse.walesgolf.org and static.whsplatform.englandgolf.org.
- Fix: static.clubhouse.golfireland.ie is now working with TLS.  Manually deployed, no promote needed.
- Add: ClubCMS: Golf Ireland / Golf NZ: video gallery control
- Add: ClubCMS: Golf Ireland / Golf NZ: video gallery control
- Mod: ClubCMS: GolfNZ: Added notifications in the header.
- Mod: Live: InterClubMessage: Show date and time according to the user's time zone (determined by the club's region).
- Add: ClubCMS: Golf Ireland / Golf NZ: video gallery control
- Mod: Live: interunion score sync saves local course time into db instead of localtime :)
- Mod: InterClubMessage: Replace hard-coded "DotGolf" name with ConfigurationProfile.GoverningBodyShortName.
- Mod: ISVAPI: no more console logging in production because it is slow
- Mod: ISVAPI: removed redundant ConfigurationProfileResolver call, made AccountController inherit ControllerBase to avoid Controller MVC baggage
- Add: ClubCMS: Golf Ireland / Golf NZ: video gallery control
- Fix: WHSAPI: can't unit test GetPCC in IANA timezone because it uses sql server AT TIME ZONE
- Fix: WHSAPI: We should NEVER be using TimeZoneInfo.FindSystemTimeZoneById, only TimeZoneConverter.TZConvert.GetTimeZoneInfo
- Fix: "NZCR" reference.
- Fix: NZ language reference.
- Add: Course Changes: AllowBackdatingMarkerChanges feature enabled for GB&I.
- Fix: ClubCMS: MemberController: ModifyEmail() method - Return an empty string if a member record does not have an email.
- Revert revision(s) 41120 from Trunk/DotGolf.WHSAPI: Mod: WHSAPI: Add PlayedAtLocal field to score. Replaces PlayedAtUTC because it's got an offset, which client apps need for displaying the date correctly. ........
- Mod: ClubCMS: zForgotPassword.ascx - Set max length for the membership number text input to 50 (which is the actual length defined in DB).
- Mod: WHSAPI: account+health controller inherit from ControllerBase because controller has extra mvc baggage
- Fix: Course Changes: Language improved in validation messages.
- Mod: WHSAPI: Add PlayedAtLocal field to score. Replaces PlayedAtUTC because it's got an offset, which client apps need for displaying the date correctly.
- Mod: WHSAPI: remove redundant pragma warning disable
- Mod: ClubCMS: Golf Ireland: removed !isLoading condition (not needed)
- Fix: ClubCMS: Golf Ireland: menu: fix the close text and icon display on mobile (it was affected by the !isLoading condition recently added)
- Mod: Hide the public registration link until Nov 2 for GB&I (compliance issues because ToS is not on the site yet)
- Fix: ClubCMS: GolfNZ: OOM player standing fix.
- Mod: Live: Homeclubchangerequest newhomeclubfullname column
- Mod: ClubCMS: GolfNZ: Added oom breakdown.
- Mod: ClubCMS: GolfNZ: Added oom breakdown.
- Removed the WITH RECOMPILE from this proc; it was causing high CPU
- Mod: ClubCMS: GolfNZ: Added OOM standings.
- Mod: ClubCMS: GolfNZ: Added OOM standings.
- Dropped this index since it didn't do much to help performance.
- Add: IX_Member_ClubNo_MemberId - identified some areas where we want to see which members are home at a particular club, so this is handy for those queries.
- Fix: Live: interClubMessaging: show correct to/from clubname when viewing interunion home club changes instead of 'DotGolf'
- Mod: API: save NewHomeClubFullName into db when receiving HomeClubChangeRequest from WHS hook
- Fix: POS: Fix #33420. Declined EFTPOS payment lines were included when posting a sale to Vend (for a Subs invoice payment), causing the sale to be overpaid.
- Fix: ClubCMS: Golf Ireland: admin-image-content: fixed the image uploader (it was affected by the !isLoading condition recently added)
- Mod: live_FindMembers_LiveOnly_Surname_Number: try to restrict cardinality in the branches of the union before doing the global TOP N - a vague attempt to reduce CPU and IO requirements.
- Mod: ClubCMS: My Profile - Display the central member code in the user's my profile page. Mod: ClubCMS: Use JPG format for the union logo in the verification e-mail. Mod: ClubCMS: zForgotPassword: Use ConfigurationProfile.Language.MyGolf instead of hard-coding to Golf Ireland.
- Fix: Home members were not returned first, and occasionally not at all (because of TOP N part of the branches of the unions and no specific order by). Replaced these with a derived table with TOPN and order by.  Performance will be worse, but we're deploying this to NZ shortly and going to see how it goes.
- Fix: Live: missed a file
- Mod: Live: Can search for interunion visitors in member search tab
- Mod: ISVAPI: changed some comments
- Fix: ISVAPI: only show home club change message if ISV specified IsHomeMember
- Fix: WHSAPI: rate limit error should produce http 429
- Fix: ISVAPI: rate limit error should be HTTP 429
- Fix: Live: When transferring resigned person to new union, their scores were not syncing
- Fix: Live: When transferring resigned person to new union, their scores were not syncing
- Fix: Live: ORNS when sending home club change request to whs
- Fix: Live: DOB and email required when creating members Mod: Live: Show away home club name in member and member scores tab
- Mod: ClubCMS: Golf Ireland: contact-details: use the GI Google Maps API key
- Mod: ClubCMS: Golf Ireland: menu: on mobile, level 3 menu items, use UrlOverride if it's defined (this fixes the issue I just found when trying to click on the menu items under News)
- Mod: ClubCMS: GolfNZ: Added OOM tournaments
- Mod: ClubCMS: GolfNZ: Added OOM tournaments
- Mod: ClubCMS: Golf Ireland: use the same Google Maps API key used by Open Fixtures. That key was provided by Dorothy.
- Mod: ClubCMS: Golf Ireland: message control: fix condition for applying the alert css class
- Fix: Live: score download inserts nzcrdataid
- Fix: Live: score download inserts passportid so score listing actually returns stuff now for transferred members
- Add: Handicap Comparison Report for EN, IE, WA.  I've also added a CountryPermission for filtering reports based on the country (ugly, should be feature driven, but we need more configurationprofile magic for this).
- Fix: Live: can view scores page of someone added from another union
- Mod: ClubCMS: Golf Ireland: temporarily use "https://static.ie.dotgolf.co.uk/" for the production static content URL. This will be changed back to https://static.clubhouse.golfireland.ie/ when its setup issue has been fixed
- Fix: Live: can no longer generate local member code 0000 in IE
- Fix: Live: Tournament approval requests can be accepted again in Live
- Fix: ClubCMS: My Golf header responsive fix.
- Mod: sql: CompetitionType add new columns: CompetitionFixtureTypeId and CompetitionScoreFormatId (already exists in staging but was not scripted)
- Mod: ISVAPI: make tournament approval email a bit more formal
- Fix: ISVAPI: tournaments controller was sending a wrongly formatted Approve Tournament URL
- Mod: ISVAPI: ensure PROD role restrictions are removed on Nov 2nd for GB&I, and that Wales can't create members after that.
- Mod: Org: simplify tabmembers searching code by adding Database.DatabaseAssociationId property, remove hacks for NZGolf
- Mod: Live: syncing scores for transferred member now shows progress bar in member scores tab
- Mod: ClubCMS: GolfNZ: tournament-course-stats.
- Mod: ClubCMS: GolfNZ: Course stats
- Add: Address4 field for clubs.
- Mod: We need to be able to generate club signup links even if onboarding is disabled.
- Mod: ClubCMS: Golf Ireland: golfireland.css cleanup unused code
- Mod: Live: Members Profile: Golf Ireland only - Display the member's registration PIN number (if any).
- Fix: ClubCMS: Increased code VerifyCode cache time.
- Mod: SSO: Cleaned up the roles thing a bit and added a dirty hack to give Ireland clubs signing on the correct permissions (for fixtures).
- Fix: Live: Some "NZ Golf" references displaying in GB&I. Make this configurable using ConfigurationProfile.
- Mod: ClubCMS: Golf Ireland: image-content (text - image): style fixes
- Fix: Reports: Hole Statistics Report - Not working for county logins.
- Fix: ClubCMS: SignUp - Verify code does not work in GB&I. Change "memberCode" parameter type to "string" to accommodate other value types (e.g. int, bigint, alphanumeric).
- Fix: Live: Score sync bad sql caught by unit tests
- Mod: ClubCMS: Golf Ireland: tab-menu: on mobile, decrease the height of "line" under the menu item
- Mod: ClubCMS: Golf Ireland: image-content: fix positioning of the dots on mobile
- Mod: Shared: Member Search: Ability to search members by region - added new parameter "RegionId" (NULL by default).
- Mod: ClubCMS: Golf Ireland: image-content: correct the padding on mobile
- Mod: ClubCMS: Golf Ireland: image-content-hero style fixes
- Add: Live: Score sync when adding member from another union as a new member in ours.
- Add: WHSAPI: full score download for a member. Only performs as badly as the other score listing endpoint, and this will be called less frequently
- Mod: ClubCMS: GolfNZ: Added tournament player stats
- Mod: (3 of 3) Prize Templates: #33369 Special prizes show up as dollar amounts even though their prize allocation type may be set to percentage.  Now the UI will show $ or % correctly.  Not that we use %, but this was confusing while debugging.
- Mod: ClubCMS: GolfNZ: Added tournament player stats
- Fix: (2 of 3) Prize Templates: #33369 If you have multiple special prizes on a template and you process prizes using this, the values from the last special prize line overwrites all the others because of a missing WHERE.
- Fix: (1 of 3) Prize Templates: Special prizes are always saved as fixed when you generate prizes from a template, even if the template uses percentage-based prizes.  Unfortunately there was a bug that did not properly work out the prize value, and saved the percentage (e.g. 50%) as the prize value -- $50.  Whoops.  This is sorted now, and was the first part of the bug in ticket #33369.
- Mod: ClubCMS: Golf Ireland: show pre-loader on the full length of the page; remove flickering of the white alert box during loading
- Mod: ISVAPI: prevent ISVs signing up inter-union members through the API, must be done through Live (which in fine, saves us having to port score download code to Core for now.)
- Mod: ISVAPI: More accurate return messages from Create member, removed redirectURL code
- Mod: ClubCMS: Golf Ireland: show pre-loader on the full length of the page; remove flickering of the white alert box during loading
- Fix: API: sql error on home club change request webhook received
- Fix: API: Rename HomeClubChangeAccepted to HomeClubChangeRequestAccepted
- Mod: Core: regen WHSClient.g.cs
- Fix: Live: ORNS in interclub messaging when sending home club change request for away union member
- Fix: API: 500 error when receiving home club change webhook
- Fix: WHSAPI: add 201 annotations so our swagger code doesnt throw exceptions when creating webhooks or requests -_-
- Mod: Org: View course information: Club/course combo box filter options according to user's region id. Mod: Org: Course/Marker Data Export report - Display only for Home union (e.g. NZ Golf, England Golf, Golf Ireland, Wales Golf).
- Fix: Live: interclub message orns when submitting home club change for away union member
- Fix: Live: interclub message could not handle null clubId (for members who are home in another union)
- Fix: Live: interclub message could not handle null clubId (for members who are home in another union)
- Fix: Org: bad permission check on courses
- Fix: Org: bad permission check
- Fix: Org: bad permission check
- Mod: Org: Hide OOM Report section for GB&I.
- Fix: Org: Corrected role checking for counties
- Mod: ClubCMS: Golf Ireland: menu sql query: return the correct page path
- Fix: Live: interclub message could not handle null clubId (for members who are home in another union)
- Fix: Org: Allow counties to update club details
- Fix: ScheduledTasks: 96.15384615384615384615384615% percentage in firewebhooks
- Mod: Just use a 24 hour timeout for the WHS handicap sync, because 1 hour is not enough if we do big resyncs.
- Fix: ScheduledTasks: Firewebhooks marks a webhook event as completed if no-one is listening, increments event count correctly
- Mod: Live: Better logging on FireWebhooks
- Add: SSO: can generate url for associations to create accounts for org.
- Fix: Live: Prevent being able to sign the same interunion person up to your club multiple times
- Fix: Live: Prevent being able to sign the same interunion person up to your club multiple times
- Fix: ClubMember.GetMembershipStatsForClub error - Invalid column name "IsJunior".
- Fix: WHSAPI: NOW always include home club membership (even if the user doesnt own it) when fetching members - user should be able to see whether or not they are resigned at the home club (they can already get the UID and name of the home club.)
- Fix: Org: Navigation: "Clubs" permission not working. Remove previous mod from svn 40941 - Line no 73.
- Fix: ScheduledTasks: updatemarkers better where clause to filter markerID=-1
- Fix: ScheduledTasks: completed webhook events continue notifying client even after they've completed successfully.
- Mod: Org: Members and Clubs - #ClubPlatformFeedback For district/county users, they should only be seeing data from clubs that belong to their region.
- Mod: Core: add filterbyregion to member search
- Mod: Core: regen EzPoco.g.cs
- Fix: ScheduledTasks: oops webhookfireattempt completedAt column should be nullable
- Mod: ScheduledTasks: webhookfireattempt + webhookevent completedAt column
- Add: WHSAPI: Test cases to cover member transition handicaps: - Member history triggers - Ensure handicaps are applied to scores without later scores affecting earlier handicaps - Ensure 9H scores (scaled) are handled correctly while in transition mode - Ensure deleted scores in the first 3 are handled correctly
- Mod: Adweb: can now generate county signup links in adweb
- Add: WHSAPI: Another test case for 9 hole minimum no of scores when min is 7 (not used in prod though).
- Mod: WHSAPI: always include home club membership (even if the user doesnt own it) when fetching members - user should be able to see whether or not they are resigned at the home club (they can already get the UID and name of the home club.)
- Mod: WHSAPI: Added TransitionHandicapIndex into MemberHistory (and updated trigger to save changes).
- Fix: Live: IE: Card requests is not showing because of the membercode.
- Mod: Org: replace enumerable .Concat(new [] { <one item> }) with .Append(<one item>) because it's the same but saves brackets
- Mod: WHSAPI: Added explanation to transition HD calculation.
- Fix: Live: IE: Change the card request text.
- Mod: ClubCMS: GolfNZ: New tournament tee time control.
- Mod: ClubCMS: GolfNZ: New tournament tee time control.
- Mod: Org: remove hardcoded "if (Master.WebUser?.AssociationId != 1000) Response.Redirect("~/Default.aspx");" checks because PageAssetGroup attribute does this already
- Fix: Org: build: missed a file
- Mod: Org: implemented ClubsReadonly role has is a subset of Clubs role permissions. Cannot create clubs Mod: Org: added CoursesReadonly role that allows users to view courses but not change courses
- Mod: Live: code style change to unit test
- Mod: ScheduledTasks: better log message in UpdateMarkers
- Add: Support for Transition Handicap Index - a value that is imported from a previous handicapping system and results in fake SD values being included on a player's record.
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: ClubCMS: Golf Ireland: loading mods
- Fix: Live: Update markers task sends markers to WHS if they have not been sent already, and reports exceptions more betterer.
- Fix: Live: Markers not sent to WHS sometimes, because after creating a course we don't assign the new UID to the marker we're inserting.
- Mod: Live: Course sync log messages now tell you which union is being synced
- Mod: ClubCMS: Golf Ireland: breadcrumb menu: use url override if it is defined
- Mod: ClubCMS: Golf Ireland: sub-menu (left menu): use url override if it is defined
- Mod: ClubCMS: Golf Ireland: just added a forward slash to the api url
- Mod: ClubCMS: Golf Ireland: news-list/viewmodel.ts: just added a forward slash to the api url
- Fix: ScheduledTasks: WHS Score/Course sync change dates were not getting set correctly, resulting in an entire org being skipped in syncs
- Mod: ClubCMS: GolfNZ: Tournament player entries.
- Mod: ClubCMS: Control updates
- Mod: Org: removed some redundant whitespace
- Mod: ClubCMS: Golf Ireland: breadcrumb-menu: allow multiple menu items to be linked to the same page, and show the correct breadcrumb menu (by specifying the root menu id in the querystring defined in the menu URLOverride)
- Fix: Member history table (in TabMember) now shows change date/times in the user's timezone (based on the club's region).  Added new DBTimeZoneTo() extension method to allow converting datetimes on the fly.
- Fix: Live: could not double-click to select memberId in the grey tile in tabmembers because it would select the category label as well
- Fix: Live: updating a resigned member's details as a secondary club no longer causes infinite hook loop
- Mod: ClubCMS: Golf Ireland: we don't need to parse hideOnPageNames because this is done by the GetSectionControls (DBUtilities) code
- Add: Scheduled task binary now accepts a /notimeout command line argument for when we need to run a very long process manually.
- Mod: ClubCMS: Tournaments - added gender condition in the registration
- Fix: ClubCMS: Tournament registration bank account hide/unhide.
- Fix: ISVAPI: only disable handicap fetching in England without DOB/EMAIL in PRODUCTION
- Mod: ClubCMS: bindings: added www.mangawhaigolf.co.nz and mangawhaigolf.co.nz
- Fix: ISVAPI: return DOB on member record. Mod: ISVAPI: repaired unit tests to cater for ISVAPI_RequireDOBAndEmailToRetrieveHandicap, added 2 tests for it
- Fix: ISVAPI: Sometimes got "Value cannot be null. Parameter name: configuration" when running rate limiter. Exception 1c31a7c3-6594-4453-af6b-71fac7bab677
- Fix: Invalid cast exception in _InterClubMessaging.SendHomeClubChangeRequestInUnion()
- Mod: ClubCMS: Golf Ireland: image-content-hero: fixed display of hero on mobile device
- Mod: ClubCMS: Golf Ireland: image-content-hero: use unique ids
- Mod: Redirect to / if you hit the course detail capture page and onboarding is disabled.
- Mod: In England we now withhold handicapping info (index and score listing) for anyone who does not have both a DOB and email address on record.
- Mod: ClubCMS: Golf Ireland: content pages margin and padding style updates
- Mod: ClubCMS: Golf Ireland: fix previous commit
- Mod: ClubCMS: Golf Ireland: content pages margin and padding style updates
- Mod: Change default permissions to include more than only courses. This is required for clubs as they sign up to Clubhouse for the first time, to allow the clubs to see the full power of the platform!
- Mod: ClubCMS: GolfNZ: Tournament registration.
- Mod: GolfNZ: Control updates.
- Add: Golf Ireland report logo #ClubPlatformFeedback
- Add: Live: Can search for courses between data-sharing unions so you can enter a score at your home club in England for a round you played in Wales
- Mod: ClubCMS: Golf Ireland: high-performance-amateur: rename World Amateur Golf to WAGR
- Mod: ClubCMS: Golf Ireland: style updates: active tab menu item font style, etc.
- Fix: ScheduledTasks: Score sync updates change date correctly now
- Add: Live: Membership overview widget: #ClubPlatformFeedback List of categories are no longer hard-coded and is driven by the NZGACategory table.
- Fix: Org: build, after previous rename of CallableISVAPIs
- Fix: ISVAPI: build, after previous rename of CallableISVAPIs
- Mod: Core: Rename CallableISVAPIs to DataSharingCountries
- Fix: ScheduledTasks: WHS CourseSync save non-deleted markers with Deleted=null since most of our code expects this for un-deleted markers.
- Mod: ClubCMS: Golf Ireland: menu on mobile: level 2 menu item: define hover style
- Mod: ClubCMS: Golf Ireland: my-header: tab-menu: css class adjustments
- Mod: ClubCMS: Golf Ireland: menu on mobile: add link to level 2 menu items
- Mod: Live: Membership Overview: Pie chart - Use percentage values instead of passing the actual count for Men and Women.
- Mod: ClubCMS: Golf Ireland: Contact Form: fixed form validation and Google reCAPTCHA v3 implementation
- Fix: Live: Handicap listing report was splitting 10 digit member numbers over 2 lines which looked really weird
- Mod: Live: If we're not authorized to see a visitor's WHS score listing, fetch them from the union DB only and ignore the 401 from WHS as it causes the page to error
- #ClubPlatformFeedback - Missing embedded union logos.
- Mod: Live: #ClubPlatformFeedback: Course handicap report should show the appropriate union logo.
- Mod: ClubCMS: Golf Ireland: menu on mobile: fix scrolling issue which I found (last item not visible)
- Mod: ClubCMS: Golf Ireland: menu: allow to use the mobile menu even on desktop (when screen is much smaller)
- Mod: ClubCMS: Golf Ireland: Template.aspx: center left panel: add margin top for mobile
- Mod: ClubCMS: Golf Ireland: tab-menu: mobile styling updates
- Add: Stubs for reporting logo update for multiple unions.  Over to you @kenneth
- Fix: Build
- Mod: WHSAPI: regen WHSClient.g.cs
- Fix: WHSAPI: Change "DistanceMetres" to "M" to reduce the request size below 1449 to stop the request packets fragmenting because they get lost for some %*&#ing reason
- Mod: ClubCMS: Golf Ireland: tab-menu css class heirarchy update (for consistency); fixed high performance tab-menu item clicking issue
- Mod: Org: Show inter-country member search in prod
- Mod: Live: Show inter-country member search in prod
- Mod: ClubCMS: Golf Ireland: tab-menu style update: add some spacing if it occupies two rows on mobile
- Mod: ClubCMS: Golf Ireland: mobile style fixes: sub-menu (e.g. Beginner's Guide)
- Mod: ClubCMS: Sign Up: Add union logo in the Send verification code e-mail.
- Fix: WHSAPI: hopefully fix weird tryvalidatemodel error when trying to post new marker - Value cannot be null. (Parameter 'model')
- Mod: ClubCMS: Golf Ireland: mobile style fixes: image content / intro style 3 (dark; e.g. Beginner's Guide)
- Mod: ClubCMS: Golf Ireland: style fixes: image content / intro style 3 (light; e.g. Learn)
- Fix: Live: Score entry for inter-union visitors works now
- Fix: Live: Membersearch with blank searchtext works again. (IE membercodemanager did not handle old member codes starting with 5-9 and not containing the displayclubcode)
- Mod: Live: WHSStatus widget shows cutover date if we have not hit WHS go live yet
- Mod: WHSAPI: fix typos in docstrings
- Mod: WHSAPI: docstrings for HomeOrganisationChangeRequest
- Add: Live: rejecting an interunion home club change request sends a reject to WHS
- Mod: GolfNZ: Past tournaments.
- Mod: ClubCMS: Golf Ireland: display description value as html
- Fix: WHSAPI: can't reject/accept a single home club change request twice
- Mod: Core: regen WHSClient.g.cs
- Fix: Live: interclub messaging home club change accepts/rejects should now appear correctly in the inboxes of the relevant union
- Fix: API: bad sql in prev commit
- Add: API: Home club change rejection across unions (not tested yet). Fix: API: interclub messaging home club change accepts/rejects should now appear correctly in the inboxes of the relevant union
- Fix: Live: Don't show "North Shore-Blue - Red" when loading SIC - this was happening in GB&I too, and it's not a useful placeholder in NZ anyway
- Mod: WHSAPI: Add HomeOrganisationChangeRequestUID to payload of home club accepted/rejected hooks
- Add: WHSAPI: Home club change rejected endpoint and hook
- Mod: Slicer report (emailed to club): renamed Get on the Green to Love Golf Play
- Mod: Slicer report (emailed to club): add links to existing DotGolf Live reports for these two payments: 1) membership application payments 2) subscription remittance
- Fix: Live: can now sign up person as secondary member in GB&I Clubhouse without error on save occurring
- Fix: Live: when a member home club is changed to another union, leave their current centralmembercode intact
- Fix: WHSAPI: far too many markerhistory entries being sent when fetching away courses
- ClubCMS: GolfNZ: Tournament leaderboard.
- ClubCMS: GolfNZ: new control golfnz-tournment-leaderboard.
- Mod: ClubCMS: Golf Ireland: news-list: add missing image; correct some styling
- Mod: ClubCMS: Golf Ireland: news-list: fix issue on the number of results and display of message when there's no result (this issue was created when the ads were added)
- Mod: Upped Dedup search results to 100 because for common surnames like 'Bob Jones' we could not find him in the dedup results.
- Fix: Course changes email did not spark joy, so fixed it to actually include the club name.  The wording was also updated to make it less 1990-esque.
- Mod: Live: Scoring History: #ClubPlatformFeedback 1. Show handicap calculation explanation when you do a "Ctrl + Shift" on the current handicap index. 2. Display the player's Low Handicap Index.
- Mod: ClubCMS: #ClubPlatformFeedback Remove hard-coded favicon. We will be using the UFavoritesIcon control to configure this per site.
- Mod: ClubCMS: Golf Ireland: message control: to be used by cookies notification
- Mod: ClubCMS: Golf Ireland: message control: to be used by cookies notification
- Fix: Jenkins build: #ClubPlatformFeedback GB&I
- Mod: Live: #ClubPlatformFeedback GB&I
- Mod: ClubCMS: Golf Ireland: file download button style
- Mod: ClubCMS: Golf Ireland: admin-image-content: update alert message: float on top to be easily seen
- Mod: ClubCMS: Golf Ireland: display description value as html
- Mod: ClubCMS: Golf Ireland: mobile style fixes
- Mod: GolfNZ: Tournament leaderboard.
- Fix: API: Build
- Add: Live: Home club change requests for people from other unions. Still need to manually add webhooks into WHS to listen for these
- Add: API: Webhook handlers for WHS HomeClubChangeAccepted + HomeClubChangeRequested. Have to manually insert these into WHS to get them to work right now
- Mod: Live: Homeclubchangerequesttable
- Fix: WHSAPI: changed HomeOrganisationChangeRequested to be more useful to clients
- Mod: Live: Handicap Adjustments - Restrict clubs from entering an adjustment higher than the current player's handicap index.
- Mod: Core: regen WHSClient.g.cs for webhooks and home club change request
- Add: WHSAPI: Home club change requests + accepting home club change requests. Payloads not finalized yet.
- Mod: WHSAPI: corrected CreateWebhook docstring
- Fix: WHS: score intents could not be added retrospectively to scores without changing the score details.
- Mod: ClubCMS: Golf Ireland: style updates/fixes (Trello item: Mobile Font corrections)
- Fix: WHSAPI: updating Scores to include a score intent did not work (unit test was wrong)
- Mod: Live: text.aspx send_scoreintent
- Mod: Live/Org: SIC: GB&I Should have Hole-by-hole score input mode instead of Adjusted Gross.
- Mod: ISVAPI: Scores - Do not allow ISVs in GB& from posting Adjusted Gross scores.
- Mod: WHSAPI: MemberUpdateHandicapIndex hook payload docstring changes
- Fix: WHSAPI: build: forgot a file
- Fix: WHSAPI: can now post score intents with same permissions as posting scores. (before, only home org could post intents)
- Mod: ClubCMS: Golf Ireland: menu: handle null/undefined activepage
- Fix: Live: ScoreIntents from ISVAPI were not getting to Live Hookmanager, therefore never going to WHS
- Fix: Live: Score intents not being satisfied in WHS
- Fix: Live: don't send same scoreintent to WHS twice
- Mod: GolfNZ: Tournament leaderboard partial commit.
- WHSAPI: Webhookserverservice correctly implements IDisposable incl. protected virtual void Dispose(bool disposing)
- Mod: ISVAPI: tidied up TestBase Dispose implementation
- Mod: Org: SIC: Make score entry mode options configurable per country. For GB&I only "Adjusted Gross" mode is available. Also, score entry mode combo box is hidden if there's only 1 option available.
- Fix: WebhooksController: delete webhook was setting deleteddateUTC=getdate() instead of getutcdate(). Added some nameofs to the sql too
- Mod: ClubCMS: Golf Ireland: image-content-hero: fix image display issue on mobile
- Mod: ClubCMS: Golf Ireland: numbered list style update
- Mod: ClubCMS: Golf Ireland: menu: add the underline effect for the level 1 menu when its dropdown is displayed; also added the active class name to the level 1 menu but this wasn't utilised yet (it could be useful in the future though)
- Fix: WHSAPI: PCC test incorrect date filtering was causing the test to fail
- Fix: Live: Page_Init fails due to ORNS - Occurs when an unauthenticated user access DG Live.
- Add: WHSAPI: CanPostHomeOrganisationChangeRequests role Policy
- Mod: WHSAPI: replace a petapoco call with dapper call when creating MarkerHistory with CopyFrom for negligible perf boost
- Mod: ClubCMS: Initial commit of tournament leaderboard. Signup fixes for EN and WAL.
- Mod: ClubCMS: added member signup control.
- Mod: ClubCMS: Golf Ireland: use the terms Counting and Non-Counting
- Fix: WHSAPI: proper index on ScoreIntents when checking for an existing intent
- Mod: WHSAPI: simplify create webhook
- Mod: ISVAPI: simplify CreateWebhook
- Mod: ClubCMS: My Account: show change renewal membership category option for Flexiclub only for now.
- Mod: Core: regen WHSClient.g.cs
- Fix: Some Flexiclub members (me) could not view the My Profile page on golf.co.nz.
- Mod: ISVAPI: Suppress silly async warning better
- Mod: ISVAPI: Suppress silly async warning
- Mod: WHSAPI: remove comment
- Mod: WHSAPI: pcc test passes on local now by adjusting datetime for a date that has definitely has pcc calculated for it. Added test to not return unfinished days
- Mod: WHSAPI: docstring update regen swagger.g.json
- Mod: WHSAPI: docstring update
- Fix: BulkEmail: Email from is showing all club contacts.
- Add: WHSAPI: webhook controller for creating/deleting webhooks
- Mod: ISVAPI: docstring update
- Fix: Live: webhook signature specified sha256, it's actually hmacsha256
- Fix: ISVAPI: webhook documentation specified sha256, it's actually hmacsha256
- Mod: ClubCMS: Golf Ireland: club-search: hide pagination if there are no results; fix issue with TotalCount; tidy up code a bit
- Mod: ClubCMS: Golf Ireland: style updates; align styles of club fixtures search and club search
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: WHSAPI: WebHook.WebhookUID column
- Mod: Live: SIC: Make score entry mode options configurable per country. For GB&I only "Adjusted Gross" mode is available. Score entry mode combo box is hidden if there's only 1 option available.
- Fix: ISVAPI: TournamentISVs can actually post webhooks that work now.
- Mod: ClubCMS: Golf Ireland: menu and image-content-hero controls: loading
- Mod: ClubCMS: Golf Ireland: GI logo: use svg instead of png; move footer css
- Fix: ISVAPI: ISVs no longer delete their webhooks when trying to retrieving them with webhooks/{uid} GET. Soft delete webhooks.
- Mod: ClubCMS: Golf Ireland: club-fixtures-search: api url update
- Mod: ClubCMS: Golf Ireland: club-fixtures: api url update
- Mod: Live: Member quick search no longer hides members who've been added from other unions as secondaries when searching by membercode
- Fix: Live: GetLiveOrResignedHomeClubMember would crash when trying to find a Live homeclubmember
- Mod: Live: Member quick search no longer hides members who've been added from other unions as secondaries. (their ClubNo is null, were hidden by a join) Mod: Add WITH RECOMPILE to live_Findmembers_ResignedOnly_Surname_Number because it's just as dodgy as FindMembers_LiveOnly
- Add: Live: Can add resigned members from other unions as home members, and live members from other unions as secondary members Mod: Shared: Cmember.ClubId is nullable now to cater for interunion visitors. Not possible to test everywhere, so keep eyes open for bugs.
- Fix: BulkEmail: Not all email from items are showing
- Mod: Adweb: cannot delete searchproxy
- Mod: WHSAPI: alias exists subquery in UpdateMember for better sqls
- Fix: Pending handicaps were resulting in 54 playing handicaps regardless of the course rating/slope, leading to incorrect Adjusted Gross values displayed in DotGolf Live.
- Fix: WHSAPI: can now sign up resigned members between unions
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union). FINALLY SORTED IT - NEEDED TO MAKE A MOD TO WHS
- Add: WHSAPI: Specific test to cover the calculation of an adjusted gross value for a pending handicap player playing a high slope course (meaning they end up with a high course handicap, 61 in this case, and a corresponding high adjusted value).
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union). ........
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union).
- Mod: ClubCMS: GolfNZ: Added the tournament header control.
- Mod: ClubCMS: GolfNZ: Added the tournament header control.
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union) ........
- Mod: ClubCMS: Golf Ireland: menu and image-content-hero controls: loading animation
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union)
- Fix: #33032 Handicap Certificate report crashes if you try and retrieve it for a resigned member.
- Mod: Live: WHSMemberInsertedUpdated hook no longer tries set a member's home club after resigning them from the club (seems this is clobbering my attempts to join resign members to a new club in another union)
- Mod: ClubCMS: Golf Ireland: menu and image-content-hero controls: loading animation
- Mod: ISVAPI: return resigned members from visitor search if asked
- Mod: ISVAPI: includeResigned filter now available when searching across unions Mod: ISVAPI: rename CanGetVisitorsById policy to CanGetVisitors for consistency
- Fix: ClubCMS: Added missed file.
- Mod: ClubCMS: Signup: Added email subscriptions.
- Mod: Sneaky plan to try and get different SQL plans cached depending on how we're calling live_ValidateRoundForMemberOrNonAffiliate - embed the caller method name into the SQL text...
- Mod: ClubCMS: Golf Ireland: menu and image-content-hero controls: add loading spinner; menu - move css to golfireland.css
- Fix: ISVAPI: Create passport for people created by inter-country search
- Fix: Live: Subs: Fix #32944 - Fixed one part of the problem last week but not this one.
- Fix: Attempt to get around parameter sniffing in live_ValidateRoundForMemberOrNonAffiliate code.
- Add: Core: dataobject + dataobject simpletable are now in Core. Not serializable though :(.
- Fix: WHSAPI: add extra condition to OPTIMIZE FOR hack when syncing scores - will hopefully fix timeouts when syncing scores between unions.
- Mod: For GB&I they require the districts or unions to do handicap adjustments over 5 strokes; clubs can only adjust up to 5 strokes.
- Fix: Handicap Adjustments regex fixed; now allows -99 to +99 adjustments but no 0.  Phil's request was to be able to do more than a single digit (and it didn't work for +11 before).
- Fix: Preprinting team competitions for a future date with frozen handicaps makes the preprint screen load really slowly, usually resulting in timeouts for larger competitions.
- Fix: Jenkins build
- Mod: ClubCMS: GolfNZ: Added ProgramId control property for event list
- Mod: ClubCMS: GolfNZ: Added the programid control property.
- Mod: Hide contextual help boxes outside of NZ (for now) because we want to author better help (and drive it via Freshdesk) before giving it to GB&I.
- Mod: Tweaked ISVAPI policy so that ISVs can upload members, but not scores, after we go parallel on Oct 5th.  We'll revert this again on Nov 2nd.
- Mod: Adweb upgraded to cope with no more UKClub role.
- Mod: ISVAPI: UKClub role has been split up into IrelandClub and WalesClub because soon we have to enable POST clubmembers for Wales, but not Ireland.
- Mod: Shared: EmailSubscriptions - Changed method name to "GetSubscriptions".
- Mod: ClubCMS: Accordion: added the CssClassName property to give the ui more flexibility.
- Mod: ClubCMS: rEditMemberDetails: 1) Ability to show/hide privacy setting controls. 2) Ability to edit email privacy settings at national level (same as Public site Email Privacy Settings).
- Mod: ClubCMS: GolfNZ: Member signup.
- Fix: Don't generate the same password multiple times.
- Fix: Logic bug caused credential files to be created, but no credentials committed to the database.
- Mod: sql: Make Time Play 9: wa_Play9_EmailTheEntrants stored procedure : improve the code and update the email content
- Fix [SECURITY]: When multiple batch processes are going on at the same time, status messages from the most recently started one propagate out to all clients.
- Fix: BulkCreateISVCredentials random number generation fixed - if you call new Random().Next() too quickly you get the same random number back.  Use the same instance of Random instead.
- Mod: ClubCMS: PGA: Draw and Result widget: include all PGA competitions with result (PGA-only and ProAm)
- Fix: Live: Subs: Fix #32944 - Subs bulk e-mail statements failed to load due to "System.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ComputerNo'."
- Mod: Added permalinks for the Register Now and Forgot Password for the GB&I MyGolf apps.
- Fix: Index out of range error trying to bulk export credentials.
- Mod: ClubCMS: rEditMemberDetails: 1) Ability to update DOB. 2) Display membership type and club Category (if any) as one line.
- Mod: golf.co.nz: MakeTimePlay9: style update
- Mod: Bulk Email: Golf Ireland: unsubscribe URL: get from configuration profile
- Mod: ClubCMS: Golf Ireland: save amateur profile
- Mod: Environment/Configuration/Profiles/Ireland.cs: updated Application.PublicGolfCoNz urls
- Mod: Bulk Email: Golf Ireland: unsubscribe URL: get from configuration profile
- Mod: ClubCMS: Golf Ireland: unsubscribe
- Mod: ClubCMS: Golf Ireland: unsubscribe: style updates
- Mod: ClubCMS: Golf Ireland: unsubscribe: removed unused code
- Mod: ClubCMS: Golf Ireland: high performance amateur / pro: delete functionality
- Mod: ClubCMS: Golf Ireland: unsubscribe
- Mod: ClubCMS: Golf Ireland: unsubscribe initial commit
- Mod: ScheduledTasks: Hash UserSecurity passwords instead of PassportCredential passwords which are all hashed now
- Fix: Live: Unallocated credit note load error caused by not purging enough ComputerNos
- Mod: Live: test to see what happens in different timezones if we specify all times coming into SaveScore as UTC.
- Mod: Live: test to see what happens in different timezones if we make the ScoreModel.playDate a DateTimeOffset, then wipe the offset serverside (see if we can capture the exact date/time from the client)
- Mod: Live: test to see what happens in different timezones if we specify all times coming into SaveScore as UTC.
- Add: Usersecurity passwordhash column
- Fix: Live: crashbug in SIC when submitting new score
- Mod: Disabled on-boarding for GB&I - we're past that now, and need clubs to be able to see the normal courses UI now.
- Fix: Live: RETURN PLAYDATE AND TIME FROM GetScoreV2/GetScore. Preserves play time when saving existing scores.
- Fix: Live: save today's scores with current time
- Mod: ClubCMS: GolfNZ: Added the add player to high performance.
- Fix: Home page broke because of missing file in my last commit. Add: Member public registration URL for each union.
- Fix: Why "Deceased" has to have a capital, I do not know.
- Mod: If there is only a single levy category (Club Members), e.g. England or Wales, just show a pie chart of men vs women instead of the sparsely populated table.
- Fix: ISVAPI: filtering by playdate works properly (was returning an extra record because we were filtering on the utcplaydate instead of local)
- Fix: PCC report now lets you filter by all courses in org
- Fix: Playing Handicap was not showing up in SIC because only NZ and AU code existed.  Removed the branch so we display it for everyone now (ex-NZ rules).
- Fix: Live: processing renewals error after computerno change
- Fix: WHSAPI: pcc report unit test was failing in UTC
- Mod: Live: prevent extra db connection being created when fetching handicaps within a transaction for negligible perf boost
- Fix: Live: Creating comp fee product in Kounta also syncs reporting groups if it had to create a reporting group, and syncs product cache to avoid errors with cache being out of date after saving a comp then saving another comp with the same profit centre
- Fix: Live: Interclub messaging errors for home club changes
- Fix: Vortexhostdiscovery erroring because can't lock on a null object
- Mod: golf.co.nz: display Make Time Play 9 widget again on My Golf, add two more months to the stats
- Fix: Bindings for members.*
- Add: Portal site urls for England and Wales.
- Fix: SharedModule: IAmazonEC2 single instance to prevent IVortextHostDiscovery timer failing when it's ec2 instance gets disposed
- Fix: VortexHostDiscovery: don't let multiple discoveries potentially fire off every five minutes - should only be one
- Fix: WHSAPI: https://github.com/dotnet/aspnetcore/issues/17840 if our middleware fails for whatever reason, Kestrel does not handle it very well.  The response from these errors, I suspect, are confusing AWS ELB, which in turn causes 502 Gateway Errors to be returned to the client.
- Fix: Live: Can't find correct marker for score
- Fix: Scheduledtasks: Build fixed after prev namespace refactor
- Fix: Shared: Build fixed after build break
- Fix: Shared: Build fixed after prev namespace refactor
- Fix: [Breaking build]: moved DotGolf.Core.Logging files out of incorrect DotGolf.ISVAPI.Core.Logging namespace and into DotGolf.Core.Logging namespace
- Mod: Core: Move IVortexHostDiscovery into AddDotGolfCoreServices and out of individual startup methods
- Fix: ScoresController: Convert score play dates back to UTC using the correct timezone when sending them to ISVs
- Fix: Live: The Membership Overview in the dashboard has a space. Added a css to reset that.
- Fix: Hack the hack to stop Russley Xero integration from attempting to pull trial balances - they have removed our reporting role too and this is throwing exceptions.
- Add: Last instalment in the Member.MemNo saga - drop the temporarily renamed column from NZ1.
- Mod: replace computerno with membercode in memberCodeManagerNZ without trying to convert the entire table's MemberCodes to int
- Mod: Member code allocation data type mismatch caused table scans.
- Mod: Argh, entire tablescan converting membercodes to ints
- Fix: Presentation-only code causing exceptions when DPS does the third party hosted payment post to our system (which initially means Master.BookingState is not set).
- Fix: ClubCMS: GolfNZ: Missed file commit.
- Add: API to Reverse Proxy for UKProd.
- Mod: ClubCMS: GolfNZ: Initial commit of tournaments.
- Fix: Don't throw if we don't have ServiceLocator.Default inside Stats.  Stats is best-effort so just smile and wave in this case.
- Add: Global ServiceLocator to ConnectorAPI so we can send stats from Application_Start and Application_End methods.
- Mod: ISVAPI: Remove RedirectUrl from create member - we're doing home club change requests now
- Fix: ISVAPI: GetClubMemberScores uses correct index again when searching scores by club and playdate
- Mod: remove member.memno from entity framework models
- ** DFH CODE REVIEWED TO HERE ** Mod: Live: send score DatePlayed to api_addscore without cutting off time. This will save the time in the PlayTime column
- Fix: api_addscore now automatically saves PlayTime based on the @dateplayed parameter
- Mod: ClubCMS: Golf Ireland: accordion admin updates
- Mod: Hooks: send score play date AND time to WHS :)
- Mod: VortexModule now handles Live/Public instances where the hostname is not like "live.golf.co.nz" or "www.golf.co.nz" - it didn't work for GB&I before (where these hostnames are different).
- Reverted revision(s) 40434 from Trunk: because it did nothing Mod: WHSAPI: changesSince timestamps are now exclusive to avoid syncing the same person/course/score over and over ........
- Fix: Core: EzPoco.g.cs generates time type as c# TimeSpan
- Mod: Core: regenerate EzPoco.g.cs
- Mod: Api_Addscore: PlayTime param with default null. creating it as time type to see what happens on the c#/dapper side
- Mod: ClubCMS: Golf Ireland: high performance small improvements
- Mod: ClubCMS: Golf Ireland: admin list updates: delete item
- Mod: ClubCMS: Golf Ireland: admin list updates
- Fix: removed memno from api_AddMember because the column no longer exists
- Add: sql: score.PlayTime column and score.PlayDateTime computed column
- Mod: ClubCMS: Golf Ireland: high performance small improvements
- Mod: Live: add Score not eligible for handicapping icon to the legend of member score listing
- Fix: Live: SIC is now the only place you can see the cross-country visitor search
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: ClubCMS: Golf Ireland: accordion admin updates
- Mod: service-jenkins-promote.cmd: When scheduled tasks promote throws ERROR: RETRY LIMIT EXCEEDED, fail the promotion so we can see it happened and retry
- Mod: ClubCMS: Golf Ireland / NZ: knockout.ckeditor.js (fix for the admin-list listitem.Body display issue)
- Mod: service-jenkins-promote.cmd: When scheduled tasks promote throws ERROR: RETRY LIMIT EXCEEDED, fail the promotion so we can see it happened and retry
- Mod: WHSAPI: changesSince timestamps are now exclusive to avoid syncing the same person/course/score over and over
- Mod: ClubCMS: Golf Ireland / NZ: ckeditor cleanup
- Fix: ClubCMS: Scores: The 20th score divider is in the wrong place.
- Mod: ScheduledTasks: hack to prevent score syncs searching across more than 2 days of scores because WHS can't handle it
- Add: Multicurrency support per-club; AXCurrency.DefaultCurrency will now return the club's local currency (if Club.AXCurrencyId is set).
- Mod: Adweb: remove memno check from member tab now that Memno have been dropped
- Mod: ClubCMS: GolfNZ: Changed the class name for admin pages.
- Mod: sql: drop column Memno on Member table. It's obsolete and removed from the source.
- Mod: Live: away union score sync + only sync courses/scores every day at 11pm
- Mod: ClubCMS: Golf Ireland: high performance: allow hide/show player
- Fix: Course sync units tests
- Mod: ClubCMS: Golf Ireland: high performance tidy up
- Mod: ClubCMS: Golf NZ: high performance
- Mod: ClubCMS: Golf Ireland: High Performance Pro: add OOM Link field
- Mod: ISVAPI: unit test for ignoring centralmembercode submissions in EN
- Mod: ClubCMS: Golf Ireland: high performance
- Mod: ISVAPI: Don't let people choose membership numbers in the API in GB&I. This errors in production - will notify via David Parker
- Fix: ISVAPI: create score idempotency at union level
- Fix: scheduledtasks: update course syncdate correctly to stop England stage looping on the same few Ireland courses
- Fix: WHSAPI: WHS now returns markerhistory createdateUTC
- Fix: scheduledtasks: sql error in GetChangesFromWHS
- Mod: ClubCMS: Golf Ireland: high performance
- Mod: ClubCMS: Golf Ireland: high performance
- Fix: Org: Don't get registration answers thrice.
- Fix: Scheduledtasks: only sync courses for WHS orgs known to the current union (callable via ISVAPI + correct Location (stage/prod))
- Add: Index for RegistrationAnswer table.
- Mod: Core: move getparentassociationuid to WellknownIds to that we can use it for whs course syncing
- Fix: ClubCMS: UI fixes.
- Mod: WHS: utilcompare publishes in single file and includes framework
- Mod: WHS: Course sync works by getting courses for individual orgs - better performance and no risk of syncing prod courses to stage and vice versa
- Mod: ClubCMS: Golf Ireland: admin-high-performance-pro: add new player
- Fix: Live/Org: adjustments page shows freezes correctly #32769
- Mod: ClubCMS: GolfNZ: Initial commit of posts control.
- Fix: build: update WHSClient.g.cs
- Mod: Scheduledtasks: Turn on WHS course sync. Change dates correctly saved
- Mod: WHSAPI: return score change date from score sync
- Fix: ScheduledTasks: ProcessEclecticResultsTask finally fixed so it actually logs to kibana
- Fix: ClubCMS: Allowed ENG and WAL countries to be able to login.
- Fix: Mailer: ignore exceptions containing "UTF-8X-Priority: 3 (Highest" (purposely excluding the final parenthesis). As per previous log message, these are just spam/phishing messages
- Fix: course sync tests, and markers deleted now
- Fix: ISVAPI: missed some plurals in tournament error messages
- Fix: ISVAPI: missed some plurals in tournament error messages
- Mod: WHS Course sync ignores course with no markers even if we have synced them before. also no longer loops infinitely
- Mod: WHS Course sync ignores course with no markers even if we have synced them before. also no longer loops infinitely
- Mod: scheduledtasks: whatever i give up on ProcessEclecticResultsTask
- Fix: Scheduledtasks: turn off course sync
- Mod: InsertBasicData.sql sets a whscountryUID for nz
- Fix: sql: remove whscountryuid default from unit test setup statement - whscountryuid does not exist yet
- Fix: ScheduledTasks: ProcessEclecticResultsTask was throwing errors after i tried to fix it's errors
- Fix: ClubCMS: Admin roles that were deleted are still being picked up.
- Fix: ScheduledTasks: ProcessEclecticResultsTask was throwing errors after i tried to fix it's errors
- Fix: ScheduledTasks: WHS course sync ORNS
- Fix: Public: Membercode sent to new casual golfers instead of centralmembercode which is null sometimes
- Fix: ScheduledTasks: WHS course sync ORNS
- Mod: ScheduledTasks: WHS Course sync: saving individual markers no longer joins to course, or logs to elasticsearch
- Mod: ElasticSearchLogger is now smarter about remembering indices that exist, saving time on every POST to Elasticsearch.
- Fix: New vortex host discovery did not work because of logic bug.
- Fix: Live: remove line preventing WHS course sync since epoch...because we need it and whs can handle it
- Mod: Live: GetChangesFromWHS course sync
- Fix: WHSAPI: added option (optimize for (@since = '2100-01-01')) to international score sync to match away score sync
- Fix: WHSAPI: restored score sync with hack in place to stop clustered index scan
- Mod: ClubCMS: Golf Ireland/NZ: CWControl insert: admin-content-html
- Mod: ClubCMS: Golf Ireland: high performance admin: add new player: work in progress
- Fix: Adweb: dll hell (system.componentmodel.annotations not found when merging member scores in whs)
- Add: #Friends v2: FriendRequest - add DeletedDate.
- Fix: WHS: unit tests no longer log exceptions to prod vortex
- Mod: ClubCMS: GolfNZ: High performance admin updates
- Fix: ScheduledTasks: WHS Course sync no longer tried to sync clubs
- Fix: ScheduledTasks: ProcessEclecticResultsTask was throwing errors trying to read from the ProcessEclecticResultsQueue memory stream after is was closed
- Mod: ClubCMS: Golf Ireland: high-performance: clean up
- BREAKING: WHSAPI: make GetCourses and GetScores return null because WAL Stage scheduled task in stuck in a loop and won't stop
- Mod: Turn off whs course/score sync in WA stage
- Mod: Alter old sql script that inserted NZ into units test DBs, so that it also adds a WHSCountryUID
- Fix: ClubCMS: Golf Ireland / NZ: rich text editor
- Mod: WHSAPI: return CountryUID as part of Brief.Region so we can map Away courses to a country in unionland
- Mod: Xero Sync for levies is a NZG specific implementation, so I have made it run for them only.  This caused errors in the data log for GB&I prod.
- Mod: ClubCMS: Golf Ireland: text updates
- Mod: ClubCMS: admin-content-html: load content from history
- Mod: ClubCMS: Golf Ireland/NZ: admin-content-html: tidy up alert and button
- Mod: ClubCMS: Golf Ireland/NZ: moved the admin part from content-html to admin-content-html control
- Fix: WHS course sync unit test was mocking the wrong method
- Add: Live: Other-union scores and all courses now sync from WHS, for real this time. TESTING WITH WAL STAGE
- Add: WHS: Away Course endpoint (for admin only)
- Mod: Disable WHS score/course sync because i haven't verified it's going to sync the courses we want (ALL of them)
- Add: Live: Other-union scores and all courses now sync from WHS
- Fix: Live: createmember - previous membership number read from cmember/nonaffiliate as MemberCode not ComputerNo
- Mod: ClubCMS: GolfNZ: Admin css updates.
- Mod: Live: remove commented code that used to prevent people with 9h handicaps entering 18h comps. Everyone has 18h handicaps now under WHS.
- Mod: ClubCMS: Golf Ireland: news style updates
- Mod: ClubCMS: Golf Ireland: news-detail: editContentLink
- Mod: insert a WHSRegionUID for Auckland in unit tests
- Mod: ClubCMS: Golf Ireland: news style updates
- Mod: ClubCMS: Golf Ireland: news-list: add Edit Article button on each article card for quicker editing
- Fix: WHS: unsatisfied score intents failed in england because the list of user orgs exceeded 2100.
- Mod: ClubCMS: Golf Ireland: news-list: renamed newsArticleAdminPage to adminPage for consistency
- Mod: ClubCMS: Golf Ireland: news detail: fix error on newsArticleAdminPage
- Mod: ClubCMS: Golf Ireland: news list: fix error on TotalNewsArticles
- Mod: ClubCMS: Golf Ireland: admin: minor updates: text and button colour
- Mod: ClubCMS: Golf Ireland: sql: high performance admin: insert control and control properties
- Mod: ClubCMS: Golf Ireland: high-performance: control properties
- Mod: ClubCMS: Golf Ireland: high-performance: edit player profile button
- Mod: ClubCMS: Golf Ireland: high-performance: added image uploader
- Mod: insert a WHSCountryUID for NZ in unit tests
- Mod: ClubCMS: Golf Ireland: high performance controls: only display the question & answer item if there's an answer
- Fix: Live: Competition score legend fixed in live score listing
- Mod: ClubCMS: Golf Ireland: high performance admin controls: work in progress
- Mod: ClubCMS: Golf Ireland: high performance admin controls: work in progress
- Fix: Shared: Add WHSCountryUID accessor to Data.Country and fix bug in Country lazy load
- Mod: Reverse Proxy: sites.list: added dotgolf2.cw.golf.co.nz, dotgolf3.cw.golf.co.nz, levin2.cw.golf.co.nz
- Mod: ClubCMS: bindings: added dotgolf2.cw.golf.co.nz, dotgolf3.cw.golf.co.nz, levin2.cw.golf.co.nz
- Fix: ClubCMS: GolfNZ: The get tags and news articles were not firing on the same sequence. Added delay to get news articles.
- Mod: ClubCMS: - Event registration: Include the ability for golf clubs to select who will receive the registration notification - Fix: News is not displaying if tags were deleted
- Mod: Live & ClubCMS: Added a field to accommodate EmailRegistrationTo in LGOffer. Event registration: Include the ability for golf clubs to select who will receive the registration notification
- Mod: Live & ClubCMS: Added a new column EmailRegistrationTo in LGOffer.
- Mod: WHS: Split up away score download and international score download so that FullScores get returned from the away score download - we sync all the course data to union land now, so don't need to send it with away scores anymore
- Fix: Live: error when changing home clubs #32648
- Fix: Gift Card: Fix #32521 - Gift card top-ups not working if you assign a customer (that is a club member). We should ignore GiftCard account types in ProcessAccountCreditsAndLoyalty method.
- Mod: ClubCMS: Golf Ireland: high-performance-pro: updated typo in function name
- Add: Adweb: bulk credential create for ISVs
- Mod: DG-245: Hide the "Void Receipt" link in DotGolf Live if the club has Xero integration.  Receipts can only be voided in Xero in the latter case.
- Mod: Adweb: hide cancel button after saving an ISV
- Fix: Live: Subs: Invoice: Payments and Credit Notes list: handle null XeroId GUID
- Mod: Live: Temp trigger to update computerNo to equal centralMemberCode in NZ while we're still purging computerNo references from the system
- Mod: Live: Temp trigger to update computerNo to equal centralMemberCode in NZ while we're still purging computerNo references from the system
- Fix: Live: Subs: Invoice: Payments and Credit Notes list: handle null XeroId GUID for clubs with subs but no Xero integration
- Fix: ClubCMS: GolfNZ: News article with deleted tags are not showing.
- Add: WITH RECOMPILE to live_FindMembers_LiveOnly_Surname_Number, it helped performance over the weekend.
- Add: When searching by ClubID and IsMRU=1 against CMember it scans the clustered index.
- Fix: Live: Updated computerno to membercode in a heap of places
- Mod: If IsJunior is set on the NZGACategory, use that to determine junior status in TabMember.
- Mod: Use Moq instead of class, sacrificing readability for coolness.
- Fix: Unit tests were not working due to VortexHostDiscovery; added MockVortexHostDiscovery to get around this. Fix: Moved StatsD code outside of the critical path (Database.{Begin,Commit,Rollback}Transaction).
- Mod: ClubCMS: GolfNZ: Added default images.
- Fix: Live: Member quick search works again
- Fix: Live: update wa_deletemember to update MemberCode and CentralMemberCode instead of ComputerNo and HomeClubCno and Memno
- Mod: ClubCMS: GolfNZ: Changed the video controls of the image-video block.
- Mod: drop unused procs 	wa_addsecmember	api_CommitMember wa_HomeClubChangeRequestAction
- Mod: Live: Invoice page: display Outstanding Amount below the Invoice Items table. I also added a DotGolf-only feature:
- Fix: Live: When changing member home clubs, update MemberCode and CentralMemberCode instead of ComputerNo and HomeClubCno.
- Mod: ClubCMS: GolfNZ: Commit missed .ts file.
- Fix: Live: When changing member home clubs, update MemberCode and CentralMemberCode instead of ComputerNo and HomeClubCno. THEY ARE NOW DEAD.
- Mod: Live: Remove unused memno field from RSEntry
- Mod: Live: remove copious debuglog-ing from tabreports intended to find why people's reports would not show sometimes. We never found out why but seems to be OK
- Fix: Live: re-instating a member who is not live at any other clubs using a new membership number did not update the centralmembercode of their member record to the new number
- Mod: ClubCMS: GolfNZ: Added high performance control and added the menu item short desc.
- Mod: ClubCMS: GolfNZ: Added high performance control.
- Mod: ClubCMS: Golf Ireland: contact-form: add Recaptcha control property
- Mod: ClubCMS: Golf Ireland: contact-form: correct the typo error (recaptchaKey)
- Mod: ClubCMS: Golf Ireland: contact-form: apply reCAPTCHA v3
- Mod: Overseas -> International
- Mod: ClubCMS: Golf Ireland: contact-form: include Sender Name in the email notification
- Fix: TabMembers.aspx didn't work for members with away homeclubs (Member.ClubNo is null)
- Mod: ClubCMS: GolfNZ: News: Added the edit link button.
- Mod: Live: Invoice: on the invoice page, display the payments and credit notes against the invoice -- makes it much easier to investigate questions on the invoice payments and credit notes. (In Xero, users can easily see these too when viewing an invoice.)
- Fix: ISVAPI: on the last day before a marker is about to change, MiClub could not submit scores - "Tee marker was not found" #32450
- Mod: ClubCMS: GolfNZ: Added image-video content block.
- Mod: ClubCMS: GolfNZ: Added new controls and altered column length.
- Add: NZGACategory.IsJunior column per DG-1849.
- Mod: Live: member quick search returns no visitors if the searchbox is empty
- Mod: Org: UnsatisfiedScoreIntentsDataSource name formatting and ordering
- Mod: Bulk Email: Golf Ireland: define "From" for Golf Ireland
- Mod: ClubCMS: Golf Ireland: just updated a validation message
- Mod: ClubCMS: Golf Ireland: contact-form: style update
- Mod: ClubCMS: Golf Ireland: contact-form
- Mod: ClubCMS: Golf Ireland: contact-form
- Fix: Org: UnsatisfiedScoreIntentsDataSource sql bug
- Fix: Org: UnsatisfiedScoreIntents report name
- Fix: score intent report was not an embedded resource
- Add: Org: UnsatisfiedScoreIntents report
- Fix: Core: WHSClient.g.cs wasnt regenerating correctly
- Fix: Org exception page now works properly behind nginx (showing us exception stack traces, but not the general public)
- Fix: ISVAPI: no longer return duplicates of people who have been a member of the same club more than once.
- Mod: ClubCMS: Golf Ireland: contact details control
- Mod: ClubCMS: Golf Ireland: contact details control
- Revert Merged revision(s) 40175 from Trunk: Because it's a breaking change for ISVs. Need to inform them this is happening. Fix: ISVAPI: Mergeurl was not set correctly ........
- Fix: ISVAPI: ProxyResponseHandler didnt not preserve the exact response data from cross-country API call - resulted in different casing.
- Sigh, missed a csproj commit. #sorryjenkins
- Mod: Upgraded NStatsD to use IVortexHostDiscovery instead of web.config section, since we use autodiscovery in ieprod and ukprod.
- Add: WHSAPI: Score intent report endpoint
- Mod: ClubCMS: GolfNZ: added default images
- Fix: ClubCMS: Renamed file.
- Fix: ActivityTracker SSO was using the old secret key, so didn't work in Ireland prod.
- Mod: ClubCMS: GolfNZ: Added new news list control.
- Mod: ClubCMS: GolfNZ: Added new news list control.
- Mod: Bulk Email: show a different theme preview / thumbnail image for Ireland
- Fix: API: TeeBooking: /search-slots endpoint - Fix #32233 - Home club member was able to book a non-affiliate on a "Home Club Members Only" timeslot in the DG app. TBBlockTimeSlot.HomeClubMembersOnly wins over TBBlockTimeSlot.IsAffiliatedMembersOnly.
- Mod: Bulk Email: Golf Ireland logo: updated the image URL
- Mod: Bulk Email: Golf Ireland logo: updated the image URL.
- Fix: ISVAPI: Mergeurl was not set correctly
- Fix: Core: MemberCodeManagerEN: FindNextAvailableMembershipNumber correctly checks for existing numbers once again Mod: Core: MemberCodeManagerEN: changed FirstMemberNumberInclusive and LastMemberNumberInclusive to have valid check digits
- Mod: Core: HandicapProviderWHS: removed unused taskfactory
- Mod: Live: member quicksearch: For in-country visitor searches, add extra delay so [live_FindMembers_LiveOnly_Surname_Number] doesn't hog database cpu when people are typing slowly
- Mod: ClubCMS: Golf Ireland: High Performance
- Mod: Live: Add filtered surname/firstname index (filtered by deletedDate) to Cmember to improve dbo.live_FindMembers_LiveOnly_Surname_Number perf
- Fix: Jenkins build - Missing from previous commit.
- Add: API: Friends 2.0 - Added more endpoints (e.g. Cancel friend request, ignore friend request, list friend requests).
- Mod: ClubCMS: Golf Ireland: High Performance
- Mod: WarehouseQueries: remove redundant join from GetRoundsForDateRange and added seemingly redundant WHERE clause that improves performance somehow
- Mod: ClubCMS: Golf Ireland: High Performance
- Fix: WarehouseAPI connection string updated to include application name (for make awesome elasticsearch filtering)
- Mod: ClubCMS: Golf Ireland: High Performance: fix project file
- Mod: ClubCMS: Golf Ireland: High Performance
- Mod: ClubCMS: GolfNZ: Added RTE content blocks.
- Mod: ClubCMS: GolfNZ: Added RTE content blocks.
- Fix: ProcessRenewals never had ServiceLocator configured properly when processing subs in a background thread.
- Mod: In GB&I we will no longer send DOB, email and central member code to WHSAPI (because the latter is hosted in the US, which is problematic for the GDPR)
- Fix: Public: can't view the score listing of member who has scores on Orchard 9 (which is not eligible for handicapping) #32474
- Mod: Improved performance of org draw generation query by building a list of handicaps for all players, if needed, before the main query executes.
- Fix: Live: can't view the score listing of members who've got scores on Orchard 9 (which is not eligible for handicapping) #32474
- Mod: Performance: Rather than doing a full AXAccount balance consistency check before returning the loyalty expiration list, get the list first (cheap), /then/ check the accounts affected.
- Fix: Member Accounts: Fix Freshdesk ticket #32321 - Ensure that the AXAccount record belongs to a club that has the House account low balance notification setting turned on.
- Fix: ISVAPI: some people in the EN DB don't have correct CentralMemberCodes (e.g. memberId #194082), so MemberCodeManagerEN was showing numbers as available when they were not, and the insert member sql threw exception, meaning intelligentgolf-wallsend could never create new members.
- Mod: ClubCMS: Golf Ireland: Pro High Performance
- Add: Index for BKFunctionBooking table which had none before.
- Add: Index for BKFunctionBooking table which had none before.
- Mod: ClubCMS: Golf Ireland: Pro High Performance
- Mod: ClubCMS: Golf Ireland: Pro High Performance: work in progress
- Add: IX_CMemberHistory_ClubId_ChangeDate to speed up category+movements report.
- Mod: Live: when sending scores to WHS, client ID is now ScoreUID - start of master plan to help sync inter-country scores between unions
- Mod: Live: when sending score intent to WHS, client ID is now ScoreIntentUID.ToString() instead of ToString("N") so it's easier to see it's a guid
- Fix: Live: Club_Facility_InsertUpdate - Missing ISNULL() bit in the SQL update block.
- Mod: Changed around RSResults query a little to get rid of nested loops caused by two LEFT JOINs.
- Fix: Live: revert change to basic member search by membercode (caused 2 results to potentially be returned instead of 1)
- Add: Index on NonAffiliateItem to speed up anything that gets club items for non-affiliate members.
- Mod: Live: Basic Member Search is faster + less CPU by enforcing max number of results in stored procs
- Add: Index to speed up subs query:
- Mod: Hacked ServiceLocator.Default.GetInstance into DotGolf.Shared.WHSClientEx to avoid many many IRedisConnectionBuilder instances, and therefore bazillions of redis multiplexers.
- Fix: Org: ParNZ Finalise (Authorise Payments page): correct the display of the outstanding / owing amount for registrations with registration option answers. Also, show the payment amount along with the paid date (for easier support).
- Add: Internal AsyncHelper to DotGolf.Core against my better judgement.  We need this in situations where we're stuck inside synchronous code (such as PrepareRequest in generated API partial classes). ISVAPI client and WHS client both use AsyncHelper now to avoid deadlocks when we're being called Old_School_Code -> DotGolf.Shared.WHSClient -> DotGolf.Core.WHSClient.  We can't do .Result in these cases because it'll deadlock.
- Fix: Got rid of .Result when calling async from sync code.
- Mod: Adweb: EditMember/EditNonAffiliate: Competition Registration Payments: add display of Transaction ID
- Mod: Adweb: EditMember/EditNonAffiliate: Competition Registration Payments: display successful transactions only
- Mod: Adweb: EditMember/EditNonAffiliate: Competition Registration Payments: use DPSCompleteAttempted date stamp rather than CapturedDate
- Mod: Adweb: Member/NonAffiliate: Competition Registration Payments: display the Registration ID as well (this could be used as reference to match the exact payment record in Windcave)
- Mod: Adweb: EditNonAffiliate: add "Competition Registration Payments" tab so that the support team can easily see the competition / tournament payments linked to the non-affiliate
- Mod: Adweb: EditMember: add "Competition Registration Payments" tab so that the support team can easily see the competition / tournament payments linked to the member
- Mod: Adweb: EditMember.aspx: auto clean-up code indention
- Mod: Modica: TXT Tee time notifications - Replace "TXT STOP 2 opt-out" with "Visit golf.co.nz to opt out".
- Mod: ISVAPI: pass AuthenticateAsISV test codes as proper sql parameters to prevent occasional test failures when trying to insert a weird code.
- Fix: Live: nonaffiliate inserts no longer blocked in NZ and test
- Add: Dashboard club IDs are now linked to club dashboard.
- Fix: Org: remove old member scores page
- Add: Populate FacilityType table with initial data and GUIDs.
- Mod: ClubCMS: GolfNZ: Added delete image gallery and the change content area link.
- Fix: ISVAPI: build
- Mod: Make Marcus not sad
- Mod: Live: Strokeplay/matchplay/comp/general indicators.
- Fix: Shared: HandicapProviderWHS no longer potentially blocks inside parallel foreach.
- Mod: Removed TabRptHandicapCertificate.aspx from Org, replaced with new ExtQuery report (which I had to update to work if the ClubId is not available).
- Fix: Shared: Competition.cs: use Asynchelper inside Parallel.ForEach instead of .Result
- Fix: Results: 9H scores now always have CR-PAR applied regardless of the WHS setting.  This won't affect NZ (because we already have CR-PAR) but would affect GB&I when they start using competitions.
- Fix: GetMemberHandicap is async now.
- Mod: Removed old handicap certificate report, updated all links to go to the new one.
- Fix: Comment updated.
- Mod: Missed some changes for some @#%^$@%^ reason.
- Fix: Schema file was missing a comma.
- Add: New Handicap Certificate Report (arguably uglier than the old one, but at least it's ExtQuery now - we can improve the look and feel of it over time). Add: JSON Schema for ExtQuery based json report files, which makes it a LOT easier to edit in Visual Studio.  This is missing schema for some things like Chart, Formatters etc., but it's a good start.
- Fix: Org: revert accidental breaking commit
- Add: Org/Live: better descriptions on the adjustments page of what is going on Mod: Org: TabMember displays withdrawn handicaps properly
- Add: Trigger to block new NonAffiliate records in all databases but unit tests and NZ (to allow legacy things to continue working).
- Mod: ClubCMS: Golf Ireland: news-list: display ad after the third row
- Mod: ClubCMS: GolfNZ: Added image gallery with swiper.
- Mod: ClubCMS: New controls
- Fix: ISVAPI: Score intents post to whs now
- Fix: ISVAPI: dont try timezone conversion when returning PlayedAtUTC from member handicap record
- Mod: Make Marcus not sad.
- i give up on CGRegion Club_Facility_InsertUpdate
- Fix: Live: Tests: add CGRegion entry when inserting new Region for unit tests, to satisfy Club_Facility_InsertUpdate trigger
- Fix: Live: Tests: add CGRegion entry when inserting new Region for unit tests, to satisfy Club_Facility_InsertUpdate trigger
- Mod: Live: hook for ISVAPI to insert/delete scoreintents in WHS
- Mod: Live: hook for ISVAPI to insert/delete scoreintents in WHS
- Fix: Trigger didn't always fire; tested OK now.
- Fix: Trigger bug, whoopsie.
- Add: Trigger to keep Facility table up to date if Club is insert/updated.
- Fix: Live: UserAdmin: the first password used to create that user could still be used to log them in #31763. When updating a user password, that person's passportCredential.password should also change.
- Fix: Live: UserAdmin: the first password used to create that user could still be used to log them in #31763. When updating a user password, that person's passportCredential.password should also change.
- Mod: ISVAPI: Unit test for allowing score intent to have different comp status/play date than the score linked to it (because the score is the source of truth unless an intent has not been satisfied)
- Add: kounta-customer-display Tampermonkey script.
- Fix: Attempted to improve POS customer display styling - failed miserably, but at least they get the total now.
- Mod: Live: Tabmembers shows withdrawn handicap correctly
- Add: POS display prototype code.
- Fix: API: TeeBooking: /list-future-and-suggested-dates endpoint - Fix #32264. Members of clubs that does not use Standard green fees are unable to see available dates in the DG app (Not the Find a Club screen). This is when the user taps on the "+" button from Bookings screen.
- Fix: Live: build fix after previous WHSClient refactor
- Fix: Adweb: build fix after previous WHSClient refactor
- Fix: Public: build fix after previous WHSClient refactor
- Fix: ClubCMS: build fix after previous WHSClient refactor
- Mod: Handicap: is handicap is withdrawn, text now shows Withdrawn instead of Pending. Asking Matt to review if this is too harsh.
- Mod: Live: Deleted the HandicapProviderWHS copy in Shared, and replaced the Shared WHSClient with a wrapper over the DotGolf Core WHSClient. having two copies between Shared and Core was causing them to get out of sync.
- Fix: ClubCMS: Friends: There was an error the score object type because the sql query was returning a string ('pending').
- Mod: ClubCMS: Golf Ireland: don't display the long ad if the news-list control is displayed on the side
- Fix: Results: GetPCCIfAvailable didnt have enough nullability checks, caused lots of ORNS time:(from:'2020-09-09T07:33:55.995Z',to:'2020-09-09T07:38:11.906Z'))
- Mod: ClubCMS: Golf Ireland: insert ad every three rows; removed unused property
- Mod: ClubCMS: GolfNZ: Added content blocks.
- Mod: ClubCMS: Scripts for content blocks.
- Fix: #32199 golf.co.nz Contact Us (DotGolf mode) form did not work after the first attempt.
- Add: Live: Withdraw handicaps. DOES NOT block people from doing stuff in the system yet.
- Mod: ISVAPI: inter-country member search is now live!
- Mod: ClubCMS: Golf Ireland: accordion style update
- Mod: Inline course changes editing: SSS is an int, not decimal in UI.  Added some range checking validation to ensure they don't give us bad data.
- Add: Ability to inline edit SSS, CR and Slope values for all pending markers.  Only enabled for England.
- Fix: API: DigitalScorecard: Fix #32122 -  App displaying incorrect strokes when a player starts off on a different hole except hole no 1. Mod: API: DigitalScorecard: Moved CalculateStrokeAllocations method to Shared.
- Mod: ISVAPI: include deleted records when searching member scores by change date Fix: ISVAPI: only return all scores for live members of user's club.
- Mod: ClubCMS: Golf Ireland:
- Mod: ClubCMS: Golf Ireland: high performance card style update
- Fix: ISVAPI: ProxyResponseHandler timing out on bad sql
- Fix: Live: Kounta: Extract the original order id from the order notes only if it contains the text "original_order_id:". This prevents cases where a number is entered in the order notes and that gets treated as the original order id if we don't put the check.
- Fix: ISVAPI: build
- Fix: ISVAPI: required validation wasnt working because Playedatutc  + Webhook.Event were not nullable
- Fix: Public:  Back nine scores looking weirdly expanded for peoples first score.
- Mod: ClubCMS: Golf Ireland: High Performance controls: work in progress
- Mod: ClubCMS: Golf Ireland: High Performance control: work in progress
- Mod: ClubCMS: Golf Ireland: delete (from svn) files that were already removed from the project
- Mod: ClubCMS: Golf NZ: delete (from svn) files that were already removed from the project
- Mod: ClubCMS: Golf Ireland: delete (from svn) files that were already removed from the project
- Fix: Bulk Email was using old hardcoded secret key; upgraded to use the one from IConfigurationProfile instead.  This should fix Ireland bulk email in GBIStage.
- Mod: ClubCMS: Golf Ireland: css: fix club search card body styling
- Mod: ClubCMS: Golf Ireland: High Performance Amateurs: initial commit
- Mod: Live: MemberQuickSearchService: delete unused variable
- Mod: Reverse Proxy: sites: apply https to both Karori and Mangawhai sites
- Fix: Org: othercallableunions was not in the masterpageoptions for org and it screwed up the member search control bindings
- Fix: Org: Score entry control inline styles to work around bootstrap
- Mod: ClubCMS: GolfNZ: Added admin content block control.
- Fix: Core: typo in ExtraScoreEntryToggles docstring
- Mod: ISVAPI: reverse redundant commit
- Fix: Results: Bad SQL Typo in EstimateDivisionPlayerCount
- Mod: Live: NZ - Make penalty scores toggle take up less space when it's alone
- Fix: Org: out of line score entry control toggles caused by bootstrap
- Mod: Live: Enable penalty scores in NZ
- Fix: ISVAPI: TransferredMemberGenderMismatchException triggers "bad request" response instead of internal server error
- Mod: ISVAPI: enable penalty scores in NZ
- Mod: ISVAPI: prevent club auth from being proxied to other union (resulted in confusion for nexx-change when they could "auth" to eng endpoint using ie credentials because they had set the url countryCode to IE)
- Fix: Shared: HandicapProviderWHS no longer uses async await inside parallel foreach because it screws up
- Fix: Live: Competition.cs: remove async await from inside parallel foreach because it screws up
- Fix: ISVAPI: HandicapProviderWHS no longer uses async await inside parallel foreach because it screws up
- Fix: ISVAPI: HandicapProviderWHS no longer uses async await inside parallel foreach because it screws up
- Fix: SQL: WHS Playing Handicap Calculation update to always include CR - PAR for nine-hole markers regardless of the union CR - PAR setting. "feature" of the spec
- Fix: ISVAPI: WHS Playing Handicap Calculation update to always include CR - PAR for nine-hole markers regardless of the union CR - PAR setting. "feature" of the spec
- Fix: Live: WHS Playing Handicap Calculation update to always include CR - PAR for nine-hole markers regardless of the union CR - PAR setting. "feature" of the spec
- Fix: Core: WHSClient, ISVAPIClient no longer set client default request headers - per request auth headers instead (hoping to prevent 401s all the time)
- Mod: API: IHandicapProvider GetMemberHandicap methods are async now.
- Reverted revision(s) 39939, 39933 from Trunk: Mod: API: use constructor injection instead of servicelocator for DI (hope it works...) ........ Fix: API: IHandicapProvider GetMemberHandicap methods are async now. Pray that units tests pass - changed ScorecardController to use constructor injection ........
- Mod: API: insert NZ into unit test db if not exists
- Mod: API: use constructor injection instead of servicelocator for DI (hope it works...)
- Fix: ConnectorAPI: IHandicapProvider GetMemberHandicap methods are async now
- Fix: Public: IHandicapProvider GetMemberHandicap methods are async now
- Fix: ClubCMS: IHandicapProvider GetMemberHandicap methods are async now
- Fix: Org: IHandicapProvider GetMemberHandicap methods are async now
- Mod: Love Golf Play: CreateGotgBulkEmail: replaced the cursor with a single insert statement (as David has done before on be_CreateCustomRecipientsBulkEmail)
- Fix: API: IHandicapProvider GetMemberHandicap methods are async now. Pray that units tests pass - changed ScorecardController to use constructor injection
- Fix: Live: IHandicapProvider GetMemberHandicap methods are async now
- Mod: ISVAPI: BREAKS BUILD: IHandicapProvider GetMemberHandicap methods are async now
- Mod: Love Golf Play: CreateGotgBulkEmail: NonAffiliate query: add condition AllowBulkEmail=1, and AssociationId = 1000 or null
- Mod: ISVAPI: save membercodes for cross-country visitors into member table because it's better we save them now and null them later if theres an issue
- Mod: ISVAPI: AssociationId saved when copying visitor into local DB
- Mod: ClubCMS: Tournament Registration (used by 5CC, ParNZ): guest registration: when creating the NonAffiliate record for the guest, assign a value to the NonAffiliate.AssociationId.
- Mod: ClubCMS: Tournament Registration: guest registration: when creating the NonAffiliate record for the guest, assign a value to the NonAffiliate.AssociationId.
- Mod: ClubCMS: PGA: tournament checkout: minor text update
- Mod: Bulk Email: NZG recipient queries: filter non affiliates by Association ID (should be 1000 or null) - as discussed with Matt and David
- Mod: remove redundant comments from 3270 insert well-known associations into association table.sql
- Add: well-known associations into association table for all unions
- Mod: Bulk Email: GetEmailSenders: update the AssociationId / ClubId filter
- Mod: ClubCMS: Event detail: Minor UI change.
- Fix: Live: deleting old green fees fails to complete because kounta has changed their error throwing code.
- Fix: Live: KountaSales exception trying to access httpcontent.current when no online payment type
- Mod: Core; remove comment and delete dead code in IClubMember.GetFullName (duplicated with ToProperCase)
- Mod: ISVAPI: add isresigned to Visitor, to be consistent with visitorsearch params
- Add: ISVAPI: intercountry score posting
- Mod: sql: MemberAudit table clubId is nullable NOW (because member.ClubID is nullable)
- Mod: sql: MemberAudit table clubId is nullable now (because member.ClubID is nullable)
- Fix: Nullable AssociationId caused build errors.
- Mod: ClubCMS: Golf Ireland: club-image-gallery: rename query string parameter from id to clubid
- Mod: ClubCMS: Golf Ireland: my-scores: add line after the 20th score; add a legend (about Counter scores) below the scores tables
- Fix: Org: Only update the NonAffiliate.AssociationId if it is not already set; we don't want to overwrite a player's AssociationID if they happen to login to another site (e.g. they registered on PGA's site but now logged into golf.co.nz registering for a tournament)
- Fix: When registering non-affiliates into tournaments we saved AssociationId=1000 instead of the competition associationId (or the club association if doing this for club tournaments).
- Fix: ClubCMS: Renamed clubId param to clubid.
- Mod: ClubCMS: My Score: Added recent comments.
- Mod: ClubCMS: Golf Ireland: Signup/Login: check if the user has done the email verification step before their first login
- Mod: ISVAPI: return proper Error if clienttoken jwt cant be deserialised when fetching access token
- Fix: ISVAPI: ModelStateExtensions now returns json parse errors with a proper message (was blank because there's no ErrorMessage property for those)
- RoundManagement: Code Review mods - 1) We do not have to check if the account top-up is a ROUND, it can just be anything - The line item is being refundeed, the credits should be negative. 2) Instead of checking for line_totals for the sign, check the quantity field instead.
- Fix: ISVAPI: ModelStateExtensions now returns json parse errors with a proper message (was blank because there's no ErrorMessage property for those)
- Mod: ClubCMS: Added 2 new controls, event detail and event search
- Mod: Live: remove dead petapoco reference from csproj
- Fix: ISVAPI: ModelStateExtensions now returns json parse errors with a proper message (was blank because there's no ErrorMessage property for those)
- Fix: ISVAPI: full.visitor.UID docstring mentions that it is that person's memberUID
- Mod: ClubCMS: Golf Ireland: added the missing forward slash at the start of the relative url
- Mod: ISVAPI: minor code cleanup
- Fix: ISVAPI: Swagger ORNS caused by role.AddDebugPolicy
- Mod: ClubCMS: File manager. Added different views.
- Mod: ClubCMS: Golf Ireland: update the logo URL in the email template
- Mod: ClubCMS: Golf Ireland: corrected a typo
- Fix: Kounta and Vend: RoundManagement: Sale Returned (VEND) / Refunded (Kounta) - The round(s) amount was credited instead of removing the amount from the member's ROUND account.
- Mod: GBI UI customisation: Hide campaigns outside of NZ.
- Mod: GBI UI customisation: More minor updates.  Fixed score saving for unions.
- Fix: ISVAPI: scoreintent createdAtAction
- Mod: ISVAPI: remove hack for getting countryCode from url, specified Use Endpoint Routing instead so we can get routedata. Fixed CreatedAtactions for that. Unhardedcoded search credentials
- Mod: ClubCMS: File manager: Added create folder, delete file, upload file.
- Fix: Live: SIC comp/general/stroke/match/penalty toggles were not working
- Mod: Renamed Hdcp Diff to Score Diff per WHS terminology.
- Fix: TeeBooking: RoundManagement: Members who do not have a ROUND account is unable to book online due to an ORNS exception occurs when trying to determine if the member’s ROUND account is depleted.
- Mod: Autocomplete off in Scorecard Admin / card no / member search fields.
- Fix: ISVAPI: typos in tournament endpoint errors (tournment)
- Fix: Sprinkled magic autocomplete=off fairy dust everywhere that a CalendarExtender is in use.  This avoids the Chrome autofill box overlapping our calendar popup (however old school it may be - it works better when unobscured by needless autofill boxes we never asked for)
- Mod: Live: regenerate ISVClient
- Fix: Live: Results error when returning scores for teams comps and teaming people. #32070
- Mod: Disable redis locking when running scheduled tasks in debug mode. Add: /endless option for running competition results recalculations - handy for debugging and ringmaster.
- Fix: Live: angery script errors wherever member quicksearch is used, about showCountryFilter
- Fix: Live: Results error when returning scores for teams comps and teaming people. #32070
- Fix: RoundManagement: If a member does not have a ROUND account, we assume that the he/she has a zero balance.
- Mod: ISVAPI: Return WHSMemberUID from union visitor search
- Mod: Live: Club Descriptions and Facility Types: rename query string parameter from id to clubid
- Mod: ClubCMS: File manager: Folder and file loading.
- Fix: Casual golfers should be included in the quicksearch by default, unless turned off explicitly.
- Mod: Results: only catch exceptions in RecalculateResults if exceptionReporter is not null, instead of catch-rethrow, so we can keep the stack trace.
- Mod: Results: only catch exceptions in RecalculateResults if exceptionReporter is not null, instead of catch-rethrow, so we can keep the stack trace.
- Mod: sql: ClubCMS: add new columns to CWImageContent; inserts into CWControl and CWControlProperty
- Mod: ClubCMS: Golf Ireland: content-html: edit the rich text in another window (like the rest of the admin controls--more space for the user, they can refresh the other page to see the changes)
- Fix: ISVAPI: reinstating members caused old trigger on member table to fire which clobbered centralmembercode
- Fix: Org: ViewPending course changes could not send selected course changes with checkbox - added viewstate to appropriate controls. Tested in ENG and viewstate doesn't crash on postback.
- Mod: ClubCMS: content-html: button style update
- Mod: ClubCMS: Golf Ireland removed renamed cards control
- Fix: #31580 If you create a competition as "Other", then add scorecards to it, return scores, and finally add a real competition type (such as Net or Stableford) to the competition, the competition was recalculated, but no results appeared.
- Mod: ClubCMS: Golf Ireland: admin-image-content: add IsStyledCorner
- Mod: ClubCMS: Golf Ireland: minor mod: edit button position update
- Mod: ClubCMS: Golf Ireland: minor mod: rename id to pcid
- Mod: ClubCMS: Golf Ireland: image-content-card control: use svg for the icon / shape
- Mod: ClubCMS: Golf Ireland: admin-image-content: add HasIcon
- Fix: ISVAPI: Bad model state now returns in the same Error format as everything else ([Required] etc.)
- Mod: ClubCMS: Golf Ireland: admin-image-content: replaced "HTML on Content" with "Hex Colour" field
- Revert revision(s) 39762 from Trunk: Mod: Live: Connector: Dispose of disposables including Graphics, Pen, and SolidBrush when setting start tee mark to reduce memory footprint. ........ failed, no glory today
- Mod: ClubCMS: Golf Ireland: image-content-card control: no cut corner style: use svg
- Mod: ISVAPI: better error when receiving old refresh tokens.
- Mod: ClubCMS: Golf Ireland: TemplatedPage: no admin permission: redirect to No Access page if the page exists (this page would be branded just like the Page Not Found and System Error pages)
- Mod: POS/AXAccounts: Always open an account of the requested type if a topup comes in from Vend or Kounta, even if OpenOnDemand==false for that AXAccountType.
- Mod: ClubCMS: Added commenting on other people's score.
- Mod: ClubCMS: Golf Ireland: image-content-card control: styled corner variation
- Mod: ClubCMS: Golf Ireland: image-content-card control: make the card clickable
- Mod: ClubCMS: Golf Ireland: image-content-card control: Edit Card button
- Mod: ClubCMS: Golf Ireland: image-content-card control: style updates
- Mod: ClubCMS: Golf Ireland: image-content-card control: no image card style
- Mod: ClubCMS: Golf Ireland: image-content-card control
- Mod: ClubCMS: Golf Ireland: image-content-card control
- Mod: ClubCMS: Golf Ireland: image-content-card control
- Mod: ClubCMS: Golf Ireland: image-content-card control
- Mod: ClubCMS: Added score comments.
- Mod: ClubCMS: Added cwcontrolproperty for my-scores.
- Mod: Core: regenerate ISVAPIClient.g.cs
- Mod: ISVAPI: hide debug endpoints from swagger.g.cs, keep them hidden in release mode with IsDebug auth policy that can only be added when DEBUG is defined.
- Fix: Live: Expire all sessions for a username if password is changed. #31763
- Add: ClubCMS File API: allow sorting of file list by filename or last modified; ascending or descending.
- Add: File API which allows getting folder and file listings, creating folders, uploading files and deleting files.
- Mod: ClubCMS: Golf Ireland: ImageContentController: GetImageContent: handle null imageContent
- Mod: ClubCMS security: JWT (for API usage) now contains the user's roles; member, admin and/or super-admin. Mod: We now also parse cookies for the auth JWT to avoid the need to pass the token on an Authorize header.
- Fix: Live: POS: When a prepaid card has an extra product added the sale, and the extra item is paid by house account, their house account gets charged the full amount (including what was already paid online!). No Workaround for kiosk. Workaround in POS screen was to Close sale before adding extra items.
- Mod: ClubCMS: Golf Ireland: image-content: minor update, moved up a line of code
- Mod: ClubCMS: Golf Ireland: image-content-hero: added Edit Hero button / functionality
- Mod: Scheduled tasks: remove dead Petapoco reference
- Fix: Build
- Fix: Core: changed namespace of ISVAPI client so the types don't pollute the ISVAPI namespace (which gets used in isvapi itself)
- Mod: quick-search comment typo
- Add: Live: member quick search can search other union's members - stage. DOES NOT DO ANYTHING with them yet. Add: Core: isvapi client code generation from swagger
- Mod: ISVAPI: remove /searchcode completely because it was never used
- Mod: ClubCMS: Initial commit of file manager ui.
- Mod: NZGreenFeeData/GreenFeeData/Tables/Club.sql: add SubsInstalmentFeeDgPercentage
- Mod: ClubCMS: Golf Ireland: accordion list admin control: added list detail edit form (Subtitle and ListName)
- Mod: Ireland: Automatically accept 9H courses (even if no SSS value entered).
- Mod: ClubCMS: Golf Ireland: accordion list admin control: style updates; display priority on view mode
- Mod: GBI UI customisation: Levies is now feature flagged.
- Mod: Updated broken Club Manual link (now called NZG Club Resources and links to appropriate area on golf.co.nz).  Removed User Manual from new header.
- Fix: dim_CMember build gets a member live when they are actually resigned IF they have a duplicate computerno at their club.  If they are resigned they end up with a duplicate ChangeDate in the history, which messes up our logic, leaving them live forever.
- Fix: Live: ScoreHDDetails datatypes of temp table were all wrong and caused SqlExceptions when clicking detail links in the score HD report
- Mod: ClubCMS: Golf Ireland: accordion list admin control: apply ckeditor to the Body field
- Mod: ClubCMS: Golf Ireland: accordion list admin control: add save functionality: work in progress
- Fix: ISVAPI: logout button not working in Swagger
- Mod: ClubCMS: Golf Ireland: renamed admin page property
- Mod: ClubCMS: Golf Ireland: accordion list: admin control: initial commit
- Mod: ISVAPI: DEBUG only - getting a DEBUG club token in England authenticates you as an EnglandClub isv
- Fix: Live: DotGolf was not catching Kounta webhooks when products were added or removed from a category
- Fix: Live: score hd report details work again after new course handicap calculation was added
- Mod: Live: Connector: Dispose of disposables including Graphics, Pen, and SolidBrush when setting start tee mark to reduce memory footprint.
- Fix: Live: fixed lambda expression in js causing console errors for some clubs using IE/Edge when opening scorecard admin
- Mod: DotGolf Live should not ask for casual golfers to be returned - this is a club (and social) member search only. Asking for casual golfers requires SQL to use the expensive stored proc, slowing everything down.
- FIX: TEEBOOKING STARTSHEET
- Fix: Live: MQS - add ?rev=$WCREV$ to teebooking MQS
- Fix: Live: member quick search control??
- Fix: Live: member quicksearch regex
- Fix: Reverted revs 38828 and 38829 due to crashbug in card printing.
- Fix: ClubCMS: insert new casual golfer
- ** DFH CODE REVIEWED TO HERE ** Mod: ClubCMS: Member Signup v2: differentiate the DotGolfSurcharge from the Transaction Fee.
- Mod: ClubCMS: Flexiclub Welcome Email: minor text update
- Mod: ClubCMS: My Account: Flexiclub: minor text update
- Fix: Live: WHSScoreInsertedUpdated hook ORNS when competitions set to null.
- Fix: compile error from accidental services.AddSingleton<IISVAPIClient, ISVAPIClient>(); commit
- Mod: Core: added Display attribute to Country enum for NewZealand -> New Zealand
- Mod: ISVAPI: Make breaking change not so bad by keeping the old endpoint and adding Obsolete comment. We can tell them to change to the new one.
- [BREAKING CHANGE]: ISVAPI: re-worked visitor search so there's only one endpoint, /search, which breaks TournamentISVs using /searchcode. Mod: ISVAPI: VisitorNameSearchFromIEToENGShouldFail
- Mod: Live: Contact: separated the css that sets the width of one of the elements hoping it will fix the overlapping text I see in production (but not in dev / local). Somehow that original inline style (style="width:900px") was not rendering at all in production.
- Mod: ClubCMS: GolfNZ: She loves golf.
- Mod: ClubCMS: My Account: Flexiclub: add note about the automatic renewal. Also, in the BuildPaymentDataTransactionFee method, handle when there's no outstanding Invoices (in the new code added the other day).
- Mod: ClubCMS: Flexiclub Welcome Email template: added "and Android"
- Mod: golf.co.nz: update the NZ Olympic Committee logo
- Mod: #31619: golf.co.nz: update the NZ Olympic Committee logo
- Mod: ClubCMS: Member Signup Confirmation: updated the Flexiclub Welcome Email content to add a note at the bottom of the email about the automatic renewal
- Fix: Shared: Country.FindByCountryCode syntax error
- Mod: ISVAPI: CountryCodeValidationMiddleware returns a proper ErrorResponse
- Mod: API: TeeBooking: Clubs that do NOT have standard green fees setup should now show in the DotGolf app. Mod: API: TeeBooking: /calculate-fees endpoint - Raise a PlayerRestrictedException if we are unable to determine a green fee for a given player.
- Mod: ClubCMS: Added CWControl - content-htm
- Mod: Live: Shared SSMParameterStore can be DI'd now
- Fix: WHSAPI now computes 9H Course Handicap values that always include the CR-PAR adjustment (regardless of the setting at org level). Impact: None for NZ, none for initial GB&I imports (since 9H scores are going to be imported as 18H equivalents).  However, DotGolf Live still needs to get patched to correctly calculate 9H course handicaps.
- Mod: #RoundManagement: Changes after code review.
- Mod: ClubCMS: GolfNZ: Added search events.
- Mod: ISVAPI: temporarily only allow DotGolf searchproxy role to search other countries, until we're ready to publish to ISVs (so we can test in stage)
- Mod: Core: add svn extern to isvapi swagger.g.json  (if i havent screwed it up)
- Mod: ClubCMS: Golf Ireland: removed the appendToUrl as this isn't used for the page not found error
- Mod: ClubCMS: Golf Ireland: if the website has a "System Error" page, redirect to that page. Otherwise, show the simple error message as before.
- Fix: sql: old NZCRData.MarkerUID script fails to give all markers unique markerUIDs after GB&I initial data import - markers across different courses were given have the same markerUID
- Mod: ISVAPI: source controlled swagger.g.json
- Mod: ClubCMS: Golf Ireland: 404: if the website has a "Page Not Found" page, redirect to that page. Otherwise, show the simple error message as before.
- Fix: ISVAPI: unit test were breaking because Features throws a not implemented exception in unit tests in the middleware - tests shouldnt care about this, we only want to save server.WithFeatures for when real Features are needed
- Mod: ISVAPI: move Country.ToCountryCode extensions method to Core so we can use it in live member search
- Fix: Live: member quick search club dropdown wasnt filtering
- Fix: Public: score detail - first not attempted hole is ONLY scored at net par plus one IF exactly 10-14 holes have been attempted.
- Fix: Live: SIC - first not attempted hole are ONLY scored at net par plus one IF exactly 10-14 holes have been attempted.
- Mod: GBI UI customisation: Postal code field increased in width.
- Add: API: MyGolf: Remove the wrapping "using (conn = Database.GetOpenConnection) {}" statement from these endpoints: 1) /profile 2) /profile/{otherUserPassportId} 3) /whs/list-counted-period-scores 4) /whs/list-scores.
- Add: ISVAPI: Proxy visitor get and search requests between countries
- Mod: ISVAPI: GetClubId returns a nullable int because not all ISVs have a clubId Mod: ISVAPI: Refactored Visitor Search policies to have better names.
- Add: Core: CallableISVAPIs Feature
- Fix: Core: remove privateAsstets=all <PackageReference Include="NEST" Version="7.3.0" /> in attempt to fix isvapi logging
- Fix: Jenkins Build: #RoundManagement - MemberInsertedUpdatedHookData updates
- Fix Jenkins build: #RoundManagement
- Fix: #RoundManagement: Fix #31790 - Initial credits are not applied to the member's Rounds account after changing to a Round Management-enabled category.
- Add: sql: insert ISV credentials for ISVAPI search proxying
- Add: ISVAPI: new Role for searching other unions' members
- Mod: ClubCMS: Golf Ireland: club-search: updated query string parameter from id to clubid to make it consistent with golf nz
- Mod: ClubCMS: Golf Ireland: my-scores: counter score style updates
- Mod: ClubCMS: Golf NZ: my performance and my scores controls: style updates
- Mod: sql: "Rename UkClub ISV roles to EnglandClub in england DBs" no longer needs to be in sql
- Mod: ClubCMS: Golf Ireland: my scores: open the Help link in a new tab
- Mod: ClubCMS: Golf Ireland: my-performance chart: destroy the old chart before creating a new chart
- Mod: ClubCMS: My Golf: my-performance: add score page size filter; update legend styles
- Add: Another retry added to package deploy script.
- Mod: Improved deploy script resiliency with multithreaded IIS package deploys. This now retries failed IIS configuration attempts (because IIS sucks at multithreaded config updates)
- Mod: ClubCMS: Golf Ireland: user menu dropdown style updates
- Fix: Whoops, syntax error in aspx.
- Mod: ClubCMS: Golf Ireland: my-header: style updates
- Mod: GBI UI customisation: More feature flagging for legacy nine hole handicap stuff in NZ. - "MyGolf" language term. - Hide levies on Club Dashboard if no permission.
- Mod: ClubCMS: Golf NZ: make all clubid query string parameter lowercase
- Mod: ClubCMS: Golf Ireland: rename query string parameter from "id" to "clubid" to be consistent with the golf nz club detail controls
- Mod: ClubCMS: Golf Ireland: club-fixtures: removed the View Club link as discussed in Comment 211 in Figma with Dorothy and Danielle
- Mod: Live: Subscription Fees Settings: updated the note for the Subs Instalment Fee DotGolf Percentage
- Fix: Live: Course detail capture page wasnt validating marker name length on Create
- Mod: API: /load-slot-for-editing: Default guest user id to -1 instead of 0.
- Fix: API: /load-slot-for-editing: Fix #31800 #31669 - User looking at the booking should still be able to see his/her name even though privacy mode 2 is turned on.
- Mod: Live: Subscription Fees Settings Page - Update the description of the Instalment Fee Percentage - In the DotGolf Only Section, add a new field: SubsInstalmentFeeDgPercentage; and add another help article link
- Mod: Live: Subscriptions Fees: updated the description of the Instalment Fee Percentage
- Mod: API: /teebooking/load-slot-for-editing: Fix #31669 - This should fix it now. Names should be hidden if privacy mode is set to 2 (Hide All).
- Mod: Transaction Processor: SubscriptionInstalment: starting 2020-09-01, Pakuranga will start making the online transaction fee inclusive in the invoice, as part of the Instalment Fee invoice item.
- Revert mods svn 39608, 39611.
- Mod: GBI UI customisation: Show Club.DisplayClubCode instead of ClubId (because Ireland club IDs) Mod: New language terms, district, marker and course handicap. Mod: Hide Course Status and other tiles for not-NZ Mod: Hide levies if you don't have that product.
- Mod: ClubCMS: just renamed the new setting I've added in the previous commit to make it more descriptive (from NewFeeSchemeStartDate to FeesInclusiveInInvoiceStartDate)
- Mod: TBTransactionProcessor: SubscriptionInstalment: exclude invoices that are being paid by direct debit (even if the concerned member has a billing card)
- Mod: ClubCMS: My Account: starting 2020-09-01, Pakuranga will start making the online transaction fee inclusive in the invoice, as part of the Instalment Fee invoice item.
- Mod: ISVAPI: Add course handicap to Get scores endpoint
- Fix: ISVAPI: Handicap Record / Member scores return correct course handicap when member handicap is pending
- Mod: Core: Regenerate WHSClient.g.cs
- Reverse merged revision(s) 39628-39627 from Trunk: Mod: Core: Regenerate WHSClient.g.cs ........ Fix: WHSAPI: return HDPrePCC from member handicap record endpoint ........
- Mod: Core: Regenerate WHSClient.g.cs
- Fix: WHSAPI: return HDPrePCC from member handicap record endpoint
- Mod: Force course changes through to live even if they have been sent to clubs for approval (because Ireland has been doing this incorrectly)
- Mod: GolfNZ: Friend requests: Removed chrome's autofill.
- Mod: GolfNZ: Added profile photo to friend request.
- Mod: ClubCMS: Member Signup enhancement: sql: insert records into CWControlProperty (for the existing control property IsUseSubsCommision--which will be turned off for Pakuranga in the new scheme)
- Mod: ClubCMS: My Account: starting 2020-09-01, Pakuranga will start making the online transaction fee inclusive in the invoice, as part of the Instalment Fee invoice item.
- Mod: Live: Add ability to toggle casual golfers on/off in member quick search
- Fix: Live: remove placeholders from tab course detail capture to avoid user confusion
- Fix: Org: add coursechange no longer has watermark for sss
- Add: Swipecard strip year for Whangamata.
- Mod: API: Enable ConnectionLeakWatcher in Web.config.Production.
- Fix: API: TeeBooking: Part 2 of Fix #31669 - When viewing a timeslot in the DG app, user should not be able to see player names from another booking.
- Mod: API: Enable ConnectionLeakWatcher.
- Fix: API: TeeBooking: Fix #31669 - When viewing a timeslot in the DG app, user should not be able to see player names from another booking.
- Fix: GolfNZ: Member search result ordering fix.
- Fix: GolfNZ: Logout onclick fix.
- Fix: POS: Incorrect callback.apply() invoke caused cash payment type recovery to crash and the checkout dialog to freeze, stopping the user from continuing until DotGolf.CheckoutState.remove() is called manually.
- Mod: Adweb: Delete button in ISVCredentials page
- Mod: Adweb: Delete button in ISVCredentials page
- Mod: Live: Golf Ireland: Club Descriptions & Facilities: indicate ideal image dimensions; add view club page button
- Mod: ClubCMS: Added API authorisation.
- Fix: TeeBooking: Fix #31695 - Teebooking/MemberSearch.asmx does not filter members who have had their privacy settings turned ON (set to 1 or 2). Fix: TeeBooking: TeeBooking/MemberSearch.asmx - Make sure that the search request is initiated by a logged in user. Otherwise, return an empty search results list.
- Mod: ClubCMS: Golf Ireland: GetClubDetails: updated query to return full url for TeeBookingUrl and MembershipUrl
- Mod: Push Notifications: This hook is currently not in used (no UI for this at the moment). I made this mod while working on the Course Conditions push notifications.
- Mod: ClubCMS: Golf Ireland: club-details: apply the newly added TeeBookingUrl and MembershipUrl club settings
- Mod: ClubCMS: Golf Ireland: knockout.ckeditor.js: reverting previous commit to fix ckeditor (as instructed by marco)
- Mod: ISVAPI: remove unused variable in ElasticSearchLogger
- Fix: ISVAPI: unit test failing on jenkins
- Fix: ISVAPI: Club scores endpoint was not filtering by clubid - timed out
- Fix: ISVAPI: PCC endpoint docstring is wrong
- Fix: ISVAPI: unit tests after adding WHSScoreUID check to get member scores endpoint
- Add: ISVAPI: PCC endpoint Fix: ISVAPI: crashbugs in handicap record found during integration testing
- Fix: WHSAPI: regen swaggerfile
- Fix: WHSAPI: Misnamed memberUID url path
- Fix: WHSAPI: Add DeletedDateUTC filter on GetMemberHandicapRecord when fetching CounterscoreUIDs
- Mod: ClubCMS: Golf Ireland: news-list: display Create News Article above the search filters (e.g. on the News page)
- Mod: ClubCMS: Golf Ireland: added styles for the new tab-menu style used on the high performance pages
- Mod: ClubCMS: Golf Ireland: tab-menu: allow filtering by parent menu id (for pages which are referenced by multiple menus e.g. Club Support / Programmes)
- Mod: ClubCMS: Golf Ireland: adjust the col width if there a left sub menu
- Mod: ClubCMS: Golf Ireland: tab menu query: handle empty urloverride
- Mod: ISVAPI: Remove accidental SerializerSettings.ReferenceLoopHandling commit
- Add: ISVAPI: GET Handicap record.
- Fix: Remove WHSMemberUID default constraint on Member table - should have been removed like the others in script 3046
- Mod: ClubCMS: Golf Ireland: footer: make the footer header items clickable too if they correspond to a page
- Mod: ClubCMS: Golf Ireland: add generic back link styles
- Mod: ClubCMS: Golf Ireland: admin-image-content: added SubTitle and HtmlOnContent fields; also renamed a field name
- Mod: ClubCMS: Golf Ireland: image-content: display the description as html
- Mod: ClubCMS: Golf Ireland: menu sql queries: exclude deleted menu items
- Mod: Live: log exceptions if hookmanager fails to run FireClubMemberUpdatedHook and FireScoreInsertedUpdatedDeletedHook (debugging 500 errors in ISVAPI IE)
- Mod: ISVAPI: REMOVE MEMBER POSTS for Ireland and Wales in line with new license agreement.
- Fix: BulkEmail: Delay redirection after sending to make sure the email has been updated in the db.
- Mod/Fix: Live: Golf Ireland: Facility settings: fix the table border; add the text (Not saved) to the image list as done for the facility type list
- Fix/Mod: Live: Golf Ireland: Facility settings: fix the facility image url path; disable the icons when not applicable; remove misplaced text in css file
- Mod: Core: Set unit test db compatibility_level to 140 to match dev and prod
- Mod: GolfNZ: Made the friends request dropdowns more responsive.
- Mod: Live: Golf Ireland: facility image upload: update the s3 upload settings
- Mod: GolfNZ: Added friend request.
- Fix: ClubCMS: Golf Ireland: remove the S3 region definition (it's causing a problem on the IE sites because they use a different region)
- Mod: GBI UI customisation: SIC for Org now default to correct unit (yards/metres) based on the configuration profile.
- Mod: GBI UI customisation: TabMember.aspx levy category lang replacement.
- Mod: GBI UI customisation: Replace levy category name properly.
- Mod: GBI UI customisation: Removed Junior Handicaps filter on members search - this isn't a thing anymore. Mod: GBI UI customisation: Removed 9/18H filter too - everyone is 18H now.
- Mod: GBI UI customisation: Hid Casual Golfers from the Org members dashboard (except for NZ)
- Mod: ENG development now happens in the AWS Sandbox account (we have nz in there too) against the EN_DEV_A database on DEV4.
- Mod: ClubCMS: Golf Ireland: corrected a typo in the script
- Fix: Org: course change Course Rating range updated from 20-80 up to 20-90 (Karen is trying to enter a marker with 80.3 )
- Mod: ClubCMS: poco file update (auto generated)
- Fix: Friends 2.0: FriendRequestInserted hook - The [Message].LinkValue should be populated with the FriendRequestId not the sender's passport Id.
- Fix: Friends 2.0: Fix 1) Delete friends not working. 2) ListFriendsRequest - Changed "Surname" property name to "LastName". 3) Typo missing "t" for PassportId SQL parameter.
- Fix: EthnicityRepo injected instead of IDatabaseConnectionBuilder.
- Mod: Core: regenerate WHSClient.g.cs
- Fix: Shared: fixed previous commit
- Mod: Shared: register extended Repos with autofac
- Mod: Turn off Friends 2.0 in production for New Zealand - we will set this to ON when we go live.
- Fix: WHSAPI: committing swagger.g.json
- Mod: WHSAPI: docstring for GetMemberHandicapRecord endpoint
- Mod: ClubCMS: rEventCheckout: remove the duplicate forward slash in the url (before the page name)
- Mod: ClubCMS: Comp Registration promotion banner: open the event registration page in a new tab if the page template is terraces3
- Fix: Org: Load SSS from previous marker when adding new course change
- Add: WHSAPI: handicap record endpoint (top 20 scores + full handicap)
- Mod: WHSAPI: removed inexplicable dll reference from Tests csproj
- Add: API: Add new endpoints for Friends 2.0.
- Add: Shared: Friend request listing.
- Add: ISVAPI: Get scores since date endpoint. Still needs a decent index on Score table and docstrings Fix: ISVAPI: All holes attempted set to null for hole-by-hole scores. Fix: ISVAPI: Tournament ISVs can retrieve their scores now.
- Mod: ISVAPI: add generic CursorHelper
- Mod: ClubCMS: Golf Ireland: admin-news-article: hide cropper after image is saved; update tag style
- Mod: ClubCMS: Golf Ireland: admin section style updates
- Mod: ClubCMS: Golf Ireland: news-list: add Edit News Article button; open admin page on a new tab
- Mod: ClubCMS: Golf Ireland: news-list: add Create News Article button
- Mod: ClubCMS: Golf Ireland: image-content control: add Edit Content button
- Mod: ClubCMS: Golf Ireland: admin links style updates
- Mod: ClubCMS: Golf Ireland: admin links style updates
- Fix: API Unit Test
- Mod: Friends 2.0 - Turn on 1) Request/Accept friend requests 2) Bidirectional friendships for New Zealand. Add: Missing schema script for FriendRequest table.
- Fix: Jenkins build.
- Add: Shared: Friends 2.0
- Fix: ISVAPI clarify in documentation that gross should be null when submitting pickups
- Mod: GBI UI customisation: Hide a few more reports and irrelevant settings.
- Fix: Edge case; removed the old script that created the incorrect column, and made the new one handle both cases (old column exists or not)
- Mod: GBI UI customisation: Hide irrelevant reports outside NZ.
- Mod: ISVAPI: competition documentation - clarified competitionId
- Mod: GBI UI customisation: Hide some subs stuff for clubs without the product; changed out "NZG Category" for "EG Category" depending on the union. Fix: ToProperCase() never actually cared about the ProperCaseMode.  Fixed that, and added a new mode - LowercaseOnly, which is acronym/abbreviation safe.
- Fix: Live: Could not search for away member by membership number in ENG because the search control was checking for 7 digit numbers. Hacked it to 7-10 :(
- Mod: GBI UI customisation: Post code lookup, ethnicity combo now working, reference to golf.co.nz is now dynamic
- Add: Data for Ethnicity table (if it's not there already) to fix Member page ethnicity combo box.
- Mod: Adweb: Pages: when creating a new page, create the Edit Page Permission entry too (prefixed with EP_)
- Mod: Adweb: ClubCMS: Page Permissions: when an association website is selected, display the administrator users too (as done for club websites)
- Fix: Live: "NZSCR" -> "Course Rating" in courses page
- Fix: Org: "NZSCR" -> "Course Rating" in view live courses page
- Mod: ClubCMS: Golf Ireland: golfireland.js: just removed extra spaces
- Mod: ClubCMS: Minor tidy up.
- Mod: ClubCMS: Initial phase of content html with CKEditor. Still need a media gallery.
- Mod: ClubCMS: revert part of the changes done in Revision ID 39267 (discussed with Marcus)
- Fix: Accidentally broke everything by referencing RolePolicies inside itself before it was constructed
- Fix: Build
- Mod: Member: Remove unused parameter from get ScoreListing
- Mod: Adweb: ISVCredentials: England only allowed EnglandClub isvapi role, ireland + wales only allowed UKClub (sorry ireland), NZ only allowed NZClub
- Add: ISVAPI: EnglandClub added to IsvApiRole, scripted update from UKClub to EnglandClub for all ENG ThirdParty ISVs in ENG DBs
- Fix: BulkEmail: Except for Love Golf, parent associations can no longer use mailing lists of child associations.
- Mod: ClubCMS: Golf Ireland: Image Content control administration: add image uploader
- Mod: ClubCMS: just corrected the casing of the method name: UploadImageForCLub -> UploadImageForClub
- Mod: Core: make the disabled warnings less obnoxious in Poco.Score
- Add: Scripted dfh_whoisprinting
- Mod: ISVAPI: removed isdeleted flag from score (because deleted scores are never returned anyway)
- Fix: Build: missed a file
- Mod: Live: WHSScoreInsertedUpdated hook now sends ISV competition names to WHS
- Fix: ISVAPI: moved score.thirdpartycompetitions json schema logic into Core so the WHSScoreInsertedHook can read the json and send to whs
- Mod: api_AddScore: CapturedByThirdPartyId (defaults to null)
- Mod: ISVAPI: added some awaits to async methods so visual studio stops giving me warnings for it
- Add: ISVAPI: CompetitionId/Name added to Post Score endpoints
- Mod: api_Addscore ThirdPartyCompetitions parameter, with null default
- Add: Score table CapturedByThirdPartyId and ThirdpartyCompetitions
- Mod: ClubCMS: Golf Ireland: Image Content control administration: add save changes functionality
- Mod: ClubCMS: Golf Ireland: Admin Image Content: admin control for the control using CWImageContent table (initial commit)
- Mod: WHSAPI: scrambles aren't handicapped
- Add: WHSAPI: client competition names on score table
- Mod: ClubCMS: My Account: rename Payment Express to Windcave (formerly known..)
- Mod: ClubCMS: Golf Ireland: menu: add My Golf Overview to the user dropdown menu
- Mod: ClubCMS: Golf Ireland: My Golf changes: highlight active page number; rename text to "dbl bogey or worse" to "dbl bogey or more" (as requested by GI/Pat)
- Mod: ClubCMS: Golf Ireland: My Golf changes: highlight active page number
- Mod: Moved DefaultIfNullOrEmpty string extension from Shared to Core
- Mod: ClubCMS: Golf Ireland: My Golf changes: rename heading text to "Welcome [First Name]"
- Mod: Live: Facility: allow editing of the club image title
- Mod: ISVAPI: better create/update member response documentation
- Mod: Live: Facility: add new feature that allows clubs to upload generic images (not specific to a facility type); this feature will be used initially by Golf Ireland
- Mod: ISVAPI: Create Score intent idempotency
- Mod: WHSAPI: removed memberUID from Create Score Intent returned route values, added competitionplay check to idempotency logic
- Mod: WHSAPI: Removed excess brackets from an if/else
- Fix: ExtQuery report list didn't handle the .sql file that now lives in the Reports directory.
- Mod: Allow results recalc to be cancelled cleanly half way through (if the scheduled task times out)
- Mod: Live: Settings: just removed "and email addresses" from the Club Settings description
- [MAJOR] Fix: SSO: Fix security issue where an app is able to use the same JWT to access DotGolf API endpoints in other environments.
- Add: ISVAPI: Score intent endpoints Mod: ISVAPI: User.GetClubId is no longer async because of the number if times i've accidentally passed it into sql without await-ing it
- Fix: WHSAPI: Bug when updating a score without an intent and setting the scoreIntentUID - would always fail.
- Fix: ActivityTracker: removed unused NEST reference
- Mod: Enable push notification services for England, Ireland and Wales.
- Fix: Configuration profile changes to ensure mailer service is only ever active in Production, not dev or stage.
- Mod: ISVAPI: removed unused NEST reference
- Mod: Live: Club Settings: add Membership URL and Tee Booking URL. Clubs can enter the specific tee booking and membership URL using these new fields. (To be initially used on the Golf Ireland website's Club Detail page)
- Mod: Core: Make NEST package private to DotGolf.Core so the extension methods stop showing up in my intellisense.
- Mod: ClubCMS: rename ThirdPartyBookingUrl to TeeBookingUrl
- Mod: sql: Club: add new column and rename recently added column for GI (see script 3162)
- Add: Association.AssociationUID property.
- Add: Well known ID values for England Golf, Wales Golf, Golf Ireland and New Zealand Golf.
- Add: Association.AssociationUID column and populate it with well-known GUIDs for each of our environments (but they match between dev/stage/prod for each association).
- Mod: WHSAPI: moved score intent endpoints to scoreintentscontroller
- Mod: Reverse Proxy: apply TLS/SSL to howickgolf.co.nz
- Mod: ScoreIntent table rename PlayDateUTC to PlayedAtUTC
- Mod: Core: regenerated EzPoco.g.cs
- Mod: ScoreIntent table was missing memberId
- Fix: ISVAPI: deleteddateUTC typo, postscore test for tournament ISVs
- Fix: ISVAPI: build - missing }
- Fix: ISVAPI: Tournament ISV issue when posting scores
- Mod: ExtQuery now allows sql text to be separated from the JSON blob so that we can benefit from VS syntax highlighting and no longer have to encode/decode JSON data. Mod: Course Marker Data Export report now includes the Province and Region (if available in the territory).
- Mod: ISVAPI: Return centralmembercode when creating new member/memberships
- Mod: Core: Move ServiceCollectionExtensions into Helpers subfolder to make way for tests
- Fix: Removed the old "Download course.csv" button - no longer used since we have APIs now. Mod: Improved the styling of the old View Course Info page.  Still ugly but a little better.
- Mod: Love Golf Play: just renamed the voucher filename from LoveGolf_GetOnTheGreen... to LoveGolfPlay...
- Mod: Love Golf Play: email template: just updated the year from 2019 to 2020
- Fix: CasualGolfApi: Downgraded autofac to 4.9.2 and added to web config prod.
- Mod: Live: Settings: rephrase text
- Fix: Casual Golf Admin: Lightbox popup overlapping fix.
- Mod: Live: Settings: Manage Club Facility Type: rename "photo" to "image"
- Mod: ClubCMS: Golf Ireland: ClubRepo: sql queries: added missing alias
- Mod: ClubCMS: Golf Ireland: ClubRepo: sql queries: added missing alias
- Fix: Org: Lightbox popup overlay fix.
- Mod: Live: Settings: Facility: rephrase some text
- Mod: Live: Settings: Facility: style updates: fix alignment of some field labels
- Mod: Live: Settings: Facility: Details: Quantity field
- Mod: Live: Settings: Facility: updated the icon to an edit icon
- Mod: Live: Settings: Facility: just rephrased the heading (make it consistent)
- Mod: Live: Settings: corrected a typo error (made in the previous commit)
- Mod: Live: Settings: Facility: just rephrased the heading
- Mod: Live: Settings: added "Club Description & Facilities" to the Settings menu
- Mod: Live: Settings: Facility: Details: add Quantity field
- Fix: ClubCMS: GolfNZ: Moved the membership totals into a separate method.
- Fix: WHSAPI: build - forgot to commit swaggerfile with a docstring change -_-
- Fix: WHSAPI: ScoreIntent update typo (fix unit tests)
- Mod: Live: Settings: Facility: renamed nav item from "Club Information & Facilities" to "Club Description & Facilities"
- Fix: Casual Golf Admin: The utils.asmx has been removed. Refactored code to call Casual Golf API instead.
- Fix: Casual Golf Admin: The utils.asmx from API has been removed so we need to add it in the Casual Golf API.
- Mod: Live: Settings: Facility: Details: add Quantity field
- Mod: Core: regenerate EzPoco.g.cs
- Add: ScoreIntent table
- Fix: WHSAPI: scoreintent index has the wrong filter
- Mod: Live: Settings: Facility: amenities description
- Mod: Live: Settings: Facility: Default.ts: added AmenitiesDescription
- Mod: Core: Regenerated WHSClient.g.cs
- Mod: Live: Settings: Added Amenities Description in the Club Information and Facilities page (formerly Club Facilities page)
- Mod: WHSAPI: removed redundant serviceprovider in unit tests
- Mod: WHS: swapped a UnauthorizedAccessException() for a NotFound() in GetPCC for simplicity
- Add: WHSAPI: Score intent Create/Read/Delete
- Mod: WHSAPI: added PetaPoco tablename and primary key to generated POCOs and Score insert
- Mod: Live: Log exceptions thrown when trying to delete scores - it's not normal.
- Fix: ClubCMS: Use our DataCache class instead of MemoryCache.
- Mod: WHSAPI: move adjustmentish tests into their own folder so they can be run in parallel with the other folders for speed
- Mod: WHSAPI: add more docstrings (forgot file from prev commit)
- Mod: WHSAPI: add more docstrings
- Mod: WHSAPI: Removed redundant DbConnectionBuilder parameters from some poco CopyFrom methods, change some <using>s to simple <using>s
- Mod: golf.co.nz: added new sponsor: Laithwaites Wine
- Fix: Bulk Email: The modal that pops up has a table that extends beyond the border.
- Mod: WHSAPI: database fixture no longer complains about possible sql injection in Dispose method
- Fix: WHSAPI: missing AND causing errors in manual adjustments
- ** DFH CODE REVIEWED TO HERE ** Fix: ClubCMS: removed references to DataDomain.Models.Country
- Reverse merged revision(s) 39354-39353 from Trunk: Mod: Public: Deleted old score listing control, MyScoresSummary.ascx ........ Mod: Public: Deleted old score listing control, MyScoresSummary.ascx ........ Because it's still being used by casual golfers -_-
- Fix: Live: removed references to DataDomain.Models.Country
- Mod: Public: Deleted old score listing control, MyScoresSummary.ascx
- Mod: Public: Deleted old score listing control, MyScoresSummary.ascx
- Fix: Public: removed reference to DataDomain.Models.Country.GetCountryFlagURL
- Fix: Public: removed reference to RootRepository.GetPWNewsArticle
- Fix: Bulk Email: Removed hardcoded association IDs. Fix: Bulk Email: If you're missing the SPAM3 product, give them a useful error message. Mod: Bulk Email: Removed one of the annoying "confirm" modals (Successfully added new recipient)
- Fix: Bulk Email: Async deadlock because of .Result call (there is a nested await which could not get a continuation thread) Fix: System.ComponentModel.Annotations package was missing and needed by DotGolf.Core.
- Mod: Org: removed DotGolf.DataDomain.Models Country extensions in favor of Data.Country (because the latter doesnt use the crusty EF CentralDatabase)
- Fix: Org: Pending course changes FINALLY got the Course filter working for all statuses. Disabled view state on as many controls as possible to reduce viewstate bloat and hopefully avoid failed postbacks. Otherwise will convert the repeater to a gridview https://weblog.west-wind.com/posts/2006/feb/20/viewstate-and-onitemcommand-on-an-aspnet-repeater
- Fix: #31387 Results: Logic bug introduced while fixing #30576 caused IncludeMarkerDiffCalculation to take effect on competitions where it should not have.
- Fix: Minor display styling issue in Contacts page.
- Data: Insert ContactType data if it's not present (already run on all 3 Stage.GBI databases)
- Mod: ClubCMS: Golf Ireland: ClubRepo: ClubFacilityTypes: just added a column name to the returned Priority number
- Fix: ClubCMS: Golf Ireland: club fixtures: Competition Date value
- Mod: ClubCMS: Golf Ireland: updated the club contact details query
- Fix: ISVAPI:marker distanceunit was not being returned correctly
- Fix: Org: viewing live markers work in GB&I now
- Cleanup: Removed .bak file.
- Add: Language stuff into IConfigurationProfile so you can now go Lang.Current.Cart.ToString(true,1) to get "Cart" (or "Buggy" in GB&I).
- Fix: Live: Course detail capture less likely to cause confusion to users
- Mod: ClubCMS: Golf Ireland: ClubFacilityTypes sql query update
- Fix: Public: killed WHSMode reference
- Add: ClubCMS: Golf Ireland: FacilityType and FacilityTypeFacility: add columns
- Mod: Removed WHSMode setting because WHS is now in BraveNewWorld mode everywhere
- Mod: AppResolver: Removed obsolete Resolve method
- Mod: ISVAPI: remove comment
- Add: ClubCMS: Golf Ireland: FacilityImageContent table: this is used by the club / facility's image / video gallery
- Mod: API: Removed dead web.config entries (mostly hardcoded NZ app urls)
- Mod: BusinessLogic/Utils.cs replaced appsettings reference to analyticsUrl with AppUrlResolver.Resolve(DotGolfApplication.Analytics)
- Mod: AppResolver: Removed unused GetAppUrl method and unused fields
- Mod: ClubCMS: removed commented code and obsolete/unused methods from DBUtilities
- Mod: SSMParameterStore: removed obsolete GetValue(string countryCode, string relativePath) method
- Mod: Bulkemail: Removed unused code after asmx refactor
- Mod: Bulkemail/API: Removed unused code after asmx refactor
- Fix: Scheduled tasks: FAILED System.IO.FileNotFoundException: Could not load file or assembly 'System.ComponentModel.Annot in FireWebhooks
- Fix: BulkEmail: moved utils webservice out of API solution into the BulkEmail solution because it doesnt need to be a service anymore
- Mod: Documented the OfficeClosures.ashx endpoint; we use this from Asterisk.
- Fix: Typo.  It was a funny typo too, almost worth leaving in there.
- Fix: Bulk Email: Added startup code and tested OK.
- Fix: BulkEmail: moved webservice out of API solution into the BulkEmail solution because it wasn't secured at all and doesnt need to be a service anymore
- Fix: Membercodemanager IE was checking clubId instead of displayclubcode when validating membernumbers
- Add: API: package-deploy.ps1.
- Add: API: Bindings files for GBI stage and UK/IE production
- Mod: Change cmember/non-affiliate update triggers to update based on MemberCode instead of Computerno
- Mod: ClubCMS: Golf Ireland: club image gallery: fullscreen thumbnail navigation, style updates
- [MAJOR] Cleanup: Big as cull of unused stored procedures and functions.  If it doesn't spark joy, it's out.
- Cleanup: Big as cull of unused stored procedures and functions.  Delta script to follow into /sql folder.
- Fix: ISVAPI: fixed member number conflict logic when creating members andcrashbug in membercodemanagerIE Fix: Core: AddClubMember rolls back it's transaction properly now when it hits an error
- Fix: AddLapsedMemberToAnotherClub is back to normal now (after computer number renaming spree)
- Fix: AddClubMember is back to normal now (after computer number renaming spree)
- Cleanup: Deleted DotGolf.Central.2005 because we're replacing it with a new database project in ../2020
- Fix: AddClubMember is back to normal now (after computer number renaming spree)
- Cleanup: Removed DotGolf.Legacy.Webservice - hasn't been used since 2013ish.
- Fix: insert 9000000 for computerno when creating members if we are not in NZ (or null in Member and NonAffiliate tables ) Fix: whoops, Member table doesn't have Membercode column
- Cleanup: Deleted DotGolf.Admin solution (it was used for the Visitor Access Service, which was deprecated when WHS went live in April 2020)
- Mod: Removed _shared from Admin in preparation for solution delete.
- Mod: Org: removed cmember.displayclubcode reference from CompetitionResultsReport
- Fix: Added a default value for @Distance
- Add: Database: Initial schema up to script 3220-ish.  It's not exact because of ongoing unscripted development.
- Mod: drop number table
- Mod: ClubCMS: Registration/InsertNewCasualGolfer: explicitly insert membercode wherever computerno is being inserted (preparing to update  [NonAffiliate_Codes_InsertUpdate] to key off MemberCode inserts rather than ComputerNo)
- Mod: Shared: Replace cmember.DisplayClubCode = @ClubId check with cmember.ClubId = @ClubId because it's correct
- Fix: ConnectorAPI: swapped marker.GetStrokesBasedOnCourseHandicap for marker.GetStrokes because the former has been removed Mod: API/ConnectorAPI: removed AU stuff from CalculateStrokeAllocations
- Mod: ClubCMS: Golf Ireland: club image gallery: hover effect, fullscreen: focus
- Fix: API: swapped marker.GetStrokesBasedOnCourseHandicap for marker.GetStrokes because the former has been removed
- Mod: ClubCMS: InsertAffiliate and AddLapsedMemberToAnotherClub insert MemberCode as well as ComputerNumber Mod: ClubCMS: membersignup no longer converts membercodes to ints when passing them to InsertAffiliate/AddLapsedMemberToAnotherClub
- Mod: Live: Change SIC allowCompetitionOrGeneralPlayToggle, allowStrokeplayMatchplayToggle, allowPenaltyScores to computed observables
- Mod: ClubCMS: Golf Ireland: club image gallery: fullscreen mode: customise arrows
- Mod: ClubCMS: purged computerno from loadMemberDetails and replaced it with membercode
- Mod: ClubCMS: Golf Ireland: club image gallery: work in progress
- Mod: ClubCMS: replace cmember.MemNo references with DisplayMembercode
- Mod: Core: AddClubMember now inserts MemberCode wherever ComputerNo is inserted (preparing to update [CMember_Codes_InsertUpdate] and [NonAffiliate_Codes_InsertUpdate] to key off MemberCode inserts rather than ComputerNo)
- Mod: Org: swap remove right(cm.computerno, 4) reference for DisplayMemberCode in View Email code
- Mod: Adweb: Remove HomeClubCno reference, fix NZ config profile URLs for Public stage/dev
- Mod: ISVAPI: MemberInsert IsHomeMember defaults to true, added comment for it
- Fix: ISVAPI/Live: no more MemNo when creating members, replaced computernumber checks with membercode checks
- Fix: Core: Wales member codes are from 600 to 799, not 800-899
- Mod: ClubCMS: Moved the css files to the root css folder.
- Mod: ClubCMS: Added 'from; for specials. Also changed the css path.
- Mod: ClubCMS: Golf Ireland: club image gallery: work in progress
- Fix: Org: sending checked course changes works again #31146
- Fix: WHSAPI: merge/unmerge now take out memberlocks, fixed bug in unmerge causing leftover ESRs to hand around Mod: WHSAPI: added DeletedDate checks to overrides and adjustments when finding the member who owns the MemberUID specified by the incoming request
- Mod: ClubCMS: GolfNZ Tee Booking.
- Mod: Public & ClubCMS: Added distance var.
- Mod: Public & ClubCMS: Added distance var.
- Mod: Changed a few IDataLogger.WriteLine() calls to Console.WriteLine - we're too verbose here and IDataLogger takes a little while to log each line, slowing down the recalc process.
- Mod: Performance enhancements in results; removed NZCRStroke references (this was Aus code), made additional strokes calculation type safe (and hopefully faster - no more DataSet)
- Add: Core: CanRegisterIntentToSubmitScores feature, swapped the default of UsersCanChooseMemberNumbers to be false
- Fix: Org: selecting course changes to send was not working after changes to speed up the View Pending page in GB&I ('hidden' field was not working) #31146
- Fix: Live: Playing handicap report now accommodates Women's Yellow Remarkable 9 (from 30 Aug 2020). #30646
- Fix: Live: Playing handicap report no longer tries to be clever when removing course name prefix from a marker. Fixes #30646
- Cleanup: Removed a bunch of useless dry run tests.
- Fix: #30576 Multiround competitions that ran before the WHS cutover had brutal adjustments done to their course handicaps due to the marker diff calculation in the old world (and the way this evolved into the CR-PAR adjustment in post-WHS).
- Fix: Live: Create Member threw exception in dev when creating a non-playing member (code tried to request a card for them)
- Fix: Build
- Merged revision(s) 39227-39228 from Trunk: Add: Org: Emergency contact names and numbers in member tab ........ Mod: Org: Emergency contact names and numbers in member tab display more nicely when they are null or absent ........
- Mod: Org: Emergency contact names and numbers in member tab display more nicely when they are null or absent
- Add: Org: Emergency contact names and numbers in member tab
- Add: Live: Emergency contact name and number in member tab
- Add: NonAffiliate table emergency contact name and number
- Mod: Live: delete some unused code and AU code
- Add: Cmember Emergency contact name and number
- Mod: Org: Code review: Removed commented codes - there's no reason for leaving it in there.
- Fix: Debugging WHSAPI fails with "cannot consume scoped service from a singleton" - not sure why this suddenly happens, but IHandicapDataManager no longer needs to be scoped because it no longer does caching (with a private dictionary).
- Mod: WHSAPI: Wiretap middleware will now log 401 Unauthorized responses, including the raw Authorization header.
- Fix: Live: Score Handicap Differentials report parameter sniffing was causing timeouts for Taupo #31277
- Fix: ClubCMS: Query fix. Added aliases.
- Mod: Live: disable user selection of membership numbers in GB&I because it simplifies things - hopefully it can stay that way
- Mod: Love Golf Play: text update: remove "& Deals" from "Find Offers & Deals" as requested by Grace R
- Mod: Love Golf Play: rename "Smoking Hot Deals" to "Offers" as requested by Grace R
- Mod: ISVAPI: If two ISVs try create members simultaneously, only one succeeds: Retry the failure so they don't face an unfriendly exception.
- Mod: MemberCodeManagerIE no longer lets you choose which number you want or taking lapsed numbers
- Fix: Core: IE and ENG member number generation not behaving correctly. Mod: ISVAPI: centralmembercode tests now use and test IMemberCodeManager
- Mod: ClubCMS: GolfNZ: Insert layout and initial controls.
- Mod: Reduce size of Number table to 1 million - takes too long to generate 400 000 000 numbers needed for CDH member number generation, so spinning up test DBs becomes a nightmare
- Mod: drop ck_cmember_computerno_range check constraint since GB&I throws that range out the window
- Mod: Functions: Customer sync job - Extend cut-off to 30days (after end date of the booking). We used to sync function customers 1 day prior to the start of the booking until 2 days after the end of the booking. Some clubs would only add past bookings that have ended more than 2 days old and as a result, the sync job would missed these new function customers and will not be created a customer record in Kounta. Related to ticket #31172.
- Fix: Rounds Played By Member report: Subheader was showing up with markup instead of correct dates. The text was being formatted properly but never assigned to the report textbox.  Whoops.
- Add: Core: ENG/WAL member number generation. Made assumptions like that we never re-use CDH numbers even if resigned, and that ValidateMembershipNumber and IsMembershipNumberAvailable take 10 digit numbers while FindNextAvailableMembershipNumber takes 9 digits
- Fix: Live: Functions: Extras/Equipment - Fix #31227 Unable to remove the last item from Equipment/Extras section. Re-appears after clicking Save Changes.
- Fix: #31193: golf.co.nz: used absolute path for the images (to address the "not secure" issue on the My Golf page)
- Add: live_FindMembers_LiveOnly_Surname_Number: small performance optimisations.
- Add: GBIUpdateCompletedCoursesToLiveTask to automatically activate course changes (for the GB&I go-live process).  We don't send any email notifications when bulk approving courses.
- Mod: Course Marker Data Export report: added Club Id column per request from David Parker.
- Mod: ClubCMS: Golf Ireland: split the club detail control intro three separate controls
- Mod: ClubCMS: Golf Ireland: club photo gallery control: work in progress
- Mod: ClubCMS: Golf Ireland: club photo gallery control
- Add: Course Marker Export report for GB&I to do their comparisons against USGA data.
- Mod: ClubCMS: Golf Ireland: split the club detail control intro three separate controls
- Add: ExtQuery: You can now show/hide the Preview/CSV/PDF buttons on the report form from JSON.  Handy if you want to prevent previewing a report with a big dataset.
- Mod: ClubCMS: Golf Ireland: split the club detail control intro three separate controls
- Mod: ClubCMS: Golf Ireland: split the club detail control intro three separate controls
- Fix: Core: member number generation was generating 4 digit numbers after i refactored it yesterday
- Fix: Live: ScoreModelService prevent exceptions when spamming enter in empty SIC card number Mod: Live: Adjustments tab cancel button no longer loses your tab Fix: Live: ScoreListByDayReport links to SIC when RoundType=Entered work correctly now
- Mod: ClubCMS: Golf Ireland: rename club fixtures to club fixtures search, rename club competitions to club fixtures
- Mod: ClubCMS: Golf Ireland: CWControl and CWControlProperty inserts
- Mod: ClubCMS: Golf Ireland: rename club fixtures to club fixtures search, rename club competitions to club fixtures
- Mod: golf.co.nz: add progolfme sponsor image
- Mod: ClubCMS: Golf Ireland: style update
- Mod: ClubCMS: Golf Ireland: club fixtures: book online link, style update
- Fix: BulkEmail: The GetClubCountryCode is throwing an error for associations.
- Fix: Utils API: The GetClubCountryCode is throwing an error for associations.
- Mod: Removed Alan from the "manager or contact change" email sent out when a club updates their details.
- Mod: golf.co.nz: scrolling sponsors: added progolfme
- Mod: golf.co.nz: SideBarTwitterFeed.ascx.cs: update http://twitter.com to https://twitter.com
- Fix: BulkEmail: Added parnz in the product checking.
- Mod: golf.co.nz: Tournaments/RegistrationDetails.aspx: added display of "text" type of registration option/question. I've also updated the hfAnswers delimiter from comma to pipe.
- Fix: WHSAPI: ESRs were being returned from the manual adjustment endpoint and could be deleted through the Live/Org UI. Will recalc their history from to fix data.
- Add: New column to track result queue exceptions that occur.
- Mod: Handle permanent result queue calculation exceptions and do not try reprocessing those queue entries - they block future results from processing.
- Add: ClubCMS: Golf Ireland: Club Details: Fixtures control: work in progress
- Fix: Core: member number generation wasn't generating enough numbers after i refactored it just now
- Mod: Core: Rename MemberCode folder to MemberCodes (sorry jenkins)
- Add: Core: Member number generation for IE. Moved Member Code stuff into it's own folder
- Fix: Province Code sql had a bad 'if not exists' expression
- Add: Province table Code column (since IE membership numbers need it)
- Fix: SSS value was not copied from NZCRDataTemp to NZCRData when a course was put live.
- Mod: Course Changes: Refactored to move "Force Accept" code into DotGolf.Core (in preparation for calling it from a scheduled task)
- Add: ClubCMS: Golf Ireland: Club Details: Fixtures control: work in progress
- Mod: ClubCMS: Added club member dashboard.
- Fix: Live: Multi course club Course change capture marker edits no longer error. Mod: Org: GB&I users can now edit course changes without adding Course rating or Slope (if they were not present) i.e. no longer required when saving.
- Mod: ClubCMS: GolfNZ - Updates on News & Results control
- Mod: ClubCMS: Golf NZ: Club Details: GetDirectionsLink
- Add: ClubCMS: Golf Ireland: Club Competition: work in progress
- Mod: ClubCMS: GolfNZ - Club news and results control.
- Fix: ISVAPI: DEBUG mode authentication wasnt working
- Fix: NZCRData insert trigger was assigning random markerUIDs when markers were updated which caused MiClub score POSTs to fail
- Reverse merged revision(s) 39128-39127 from Trunk: Fix: Org: save markerUID into NZCRDatatemp when adding a marker change ........ Add: NZCRDataTemp markeruid ........
- Mod: ClubCMS: Golf Ireland: Club Detail: Website
- Mod: ClubCMS: Golf Ireland: Club Detail: Website
- Mod: ClubCMS: Golf Ireland: Club Detail: Get Directions link
- Fix: Score HD and HandicapIndex were not updated from WHS when initially entered (only edits worked this way).
- Mod: Org: Allow orgs to create/edit par 6 holes (to fix GB&I issue where a club has a Par 6)
- Mod: ClubCMS: Golf Ireland: Club Detail: Get Directions link
- Mod: ClubCMS: Golf Ireland: Club Detail: added back to search; modified book a tee CTA (with tooltip)
- Mod: ClubCMS: Golf Ireland: Club Detail: added Facility Description and Amenities Description
- Mod: Live: add markerUID the INSERT INTO NZCRDatatemp parameters for completeness
- Fix: Org: save markerUID into NZCRDatatemp when adding a marker change
- Fix: Org: save markerUID into NZCRDatatemp when adding a marker change
- Add: NZCRDataTemp markeruid
- Mod: ClubCMS: Golf Ireland: club detail: facility types
- Mod: ClubCMS: Course info with member handicap.
- Mod: ClubCMS: Golf Ireland: missed in my previous commit -- oops
- Fix: Org: Tournaments: Fix #31054 - Tournaments system email notifications.
- Mod: ClubCMS: Golf Ireland: Club Detail: display facility types (work in progress)
- Mod: Moved to Digicert timestamp server instead of Comodo (the latter of which is slow and unreliable).
- Mod: Moved to Digicert timestamp server instead of Comodo (the latter of which is slow and unreliable).
- Mod: Moved to Digicert timestamp server instead of Comodo (the latter of which is slow and unreliable).
- Mod: Moved to Digicert timestamp server instead of Comodo (the latter of which is slow and unreliable).
- Mod: Moved to Digicert timestamp server instead of Comodo (the latter of which is slow and unreliable).
- Cleanup: Added verbose logging to cert signing script in an attempt to try and find the timestamp server error in ConnectorAPI build.
- Post Publish: BulkEmail: NZ-API URL was set to "http" instead of "https".
- Post Publish: BulkEmail: First mod didn't fix the issue.
- Post Publish: BulkEmail: Fix Exception: Index and length must refer to a location within the string. Parameter name "length".
- Add: Index to sort out live_FindMember_LiveOnly_Surname_Number performance. The only index we had on NonAffiliate was the FirstName,LastName one, and because of the way the member quick search works, only the last name field is populated 99% of the time.  This makes SQL use a blank firstname for searching, which it thinks is okay, but ends up scanning 500,000 rows...
- Mod: ClubCMS: MemberApi/MemberController.cs: minor updates: code indention and spacing
- Fix: ClubCMS: Code review fix: Changed query to ISNULL(FullName, Name+' Golf Club') as ClubName.
- Mod: ClubCMS: Golf Ireland: club-detail (work in progress): style updates; display Google Maps
- ** DFH CODE REVIEWED TO HERE ** Mod: ClubCMS: Course Info control initial commit.
- Fix: ISVAPI: Remove WHSEnabled check - this setting has been removed everywhere else
- Fix: Vend: Accounts: Fix #31061. Unable to load a non-playing member’s HOUSE account details if he/she has an active membership from another club.
- Performance: Removed some unnecessary joins in wa_TBGetAuthorisationsToCapture and included TicketId in the IX_TBTransaction_ReadyForTBCapture index. This took average page load time for the payments page from 5-10s to under 100ms.
- Mod: ClubCMS: Golf Ireland: club detail: work in progress
- Cleanup: Removed some unnecessary Trace.WriteLine()s.
- Mod: ProcessResults.ashx is now a scheduled task that runs on Ringmaster; no longer a URL invoke that can potentially time out.
- Mod: ClubCMS: Get club FullName when available from club table.
- Fix: Jenkins: Missing from the previous commit. :(
- Fix: API: Fixed failing test cases. Manually populating the Score.HD column when inserting test scores since we couldn't use WHSClient (for now). Added MockHandicapProvider class so we can start using IHandicapProvider in our test cases.
- Mod: ClubCMS: GolfNZ: Club Competitions - added more info table
- Mod: ClubCMS: GolfNZ: Added club competitions control.
- Mod: ClubCMS: Golf Ireland: news-list: image position update
- Mod: ClubCMS: Golf Ireland: added google maps marker info window
- Fix: Live: TeeBooking: Fix #30569 - Recurring Booking is by default booked in as 18H even if the timeslot is for 9H bookings only.
- Mod: ClubCMS: ClubRepo: included Email in the returned data; added indention
- Fix: ISVAPI: ScorePlayDateShouldBeInCourseTimezone test
- Fix: ISVAPI: ScorePlayDateShouldBeInCourseTimezone test
- Mod: ISVAPI: tournament ISVs can now properly approve tournaments in stage Mod: ISVAPI: corrected tests
- Mod: ISVAPI: Hide TournamentApproved webhook from non-tournament ISVs
- Mod: ClubCMS: Golf Ireland: hide No Results Found on load
- Mod: ClubCMS: Golf Ireland: club-search: update default coordinates
- Fix: ISVAPI build after adding authorize attribute to TournamentApproved event
- Fix: Adweb build after Core.ISVAPI.IsvApiRole namespace change
- Mod: ClubCMS: sql: insert into CWControl and CWControlProperty
- Add: Core: IsvTournamentApproval webhook data
- Mod: Core: Rename ISVAPI folder with correct case
- Mod: ClubCMS: Golf Ireland: club fixtures: style update
- Mod: Core: Moved IsvApiRole to the correct namespace. Rename folder
- Mod: Core: Moved IsvApiRole to the correct namespace
- Mod: ISVAPI: Add authorize attribute to TournamentApproved event Mod: ISVAPI: Moved IsvApiRole to the correct namespace
- Mod: ClubCMS: Golf Ireland: club search: work in progress: added "show more filters"
- Fix: ClubCMS: GolfNZ: Solution fix.
- Fix: Jenkins: Missing from previous commit SVN no. 39058
- Fix: ClubCMS: GolfNZ: Solution fix.
- Mod: Live: UX: Member notes can unwittingly be discarded instead of saved - https://dotgolf.atlassian.net/browse/DG-1723.
- Mod: GolfNZ: Added club detail control and ui mods in club search.
- Mod: ClubCMS: Golf Ireland: club search: style updates: work in progress
- Mod: ClubCMS: Golf Ireland: club search: style updates: work in progress
- Fix: Live: Marker name validation for course capture page for 9h markers with long names - editing a marker with a long name causes error
- Mod: ClubCMS: Golf Ireland: club search: card style and pagination: work in progress
- Mod: ClubCMS: Golf Ireland: club search: work in progress
- Mod: ClubCMS: Golf Ireland: club search: work in progress
- Mod: ClubCMS: Golf Ireland: club search: work in progress
- Mod: ISVAPI: [BREAKING] TournamentISVs - changed /clubs/courses/{clubUID} to /clubs/{clubUID}/courses Add: ISVAPI: Tournament ISVs can approve clubs in Staging with an API endpoint
- Mod: ScheduledTasks: Added TournamentApproved webhook handling. Regretfully had to add another 'if' statement, which means webhooks need refactoring :(
- Mod: ClubCMS: Golf Ireland: club search: work in progress
- Add: ISVAPI: New webhook type - TournamentApproved
- Mod: Core: Move MemberMerge webhook data into Webhooks.Data folder
- Add: Live: WebhookManager, to simply abstract inserting into the webhookEvent table
- Fix: Live: POS: Mangawhai comp fee sales were always going to default Competition Fee product instead of the product by profit centre.
- Fix: Live: Clubs with outdated 'DGNVersion' numbers can now delete their tee sheets again, free from the tyranny of exceptions
- Mod: ClubCMS: Club Search: UI updates.
- Mod: ISVAPI: Member updates no longer require IsDeceased or IsUnfinancial - they're optional
- Add: LGU Net vs Par (PCC adjusted) competition type. This may be little bit untested.  Okay, it's not tested at all.  But it compiles!!! I will be testing this on the Prod system as we do not have enough data in dev (including PCC for existing courses) to get meaningful output.
- Mod: ClubCMS: Club Search: Development in progress. Only minor ui development needed.
- Mod: ClubCMS: My Account: just moved the note about the auto billing
- Fix: Org: Add ExtraScoreEntryToggles and Currency.Symbol to MasterPageOptions to match Live
- Mod: ClubCMS: My Account: added a note saying "If you are paying by instalment, your nominated membership billing card will be charged automatically on the day the instalment is due". Also added a ccard fontawesome icon in the table of outstanding invoices when the invoice's billing method is Credit Card Auto Billing.
- Fix: Live: When opening a team scorecard in the SIC, Save/Cancel/Delete would not show, and the team handicap loading spinner kept spinning  #30919
- Add: Net Vs Par competition type (for LGU Medal competitions).  We now do the CR-PAR adjustment to Course Handicaps for NZ, so LGU can't compute their results based on the course rating anymore; they have to take the par of the course off to keep things fair (when computing results across many courses).
- Add: Net Vs Par competition type (for LGU Medal competitions).  We now do the CR-PAR adjustment to Course Handicaps for NZ, so LGU can't compute their results based on the course rating anymore; they have to take the par of the course off to keep things fair (when computing results across many courses).
- Mod: WHSAPI: HandicapDataManager GetScores parameter renaming so they make more sense. Mod: WHSAPI: More renames of asBeforeUTC/asAfterUTC to playedBeforeUTC/playedAfterUTC
- Fix: ClubCMS: People signing up to flexiclub or via club websites were not being sent to WHS, were unable to print scorecards. #30913
- Fix: ClubCMS: People signing up to flexiclub or via club websites were not being sent to WHS, were unable to print scorecards. #30913
- Mod: ClubCMS: GolfNZ: Added club-search control
- Mod: ClubCMS: Golf Ireland: menu style update
- Add: Live: Course detail capture for multi course clubs
- Mod: ClubCMS: Golf Ireland: intro style 3 updates
- Mod: ClubCMS: Golf Ireland: intro style 3 updates
- Fix: ClubCMS: Network Image (live webcam image): fix previous commit (use lowercase r, and limit to 60, not 24*60)
- Mod: ClubCMS: Golf Ireland: news list: revert my recent change on the page number display
- Fix: WHSAPI: ESRs no longer cut off when paging scores. Needs review because the asAtUTC parameter for GetScores doesn't really do what it says. Mod: WHSAPI: removed enableCache from the IHandicapDataManager interface
- Fix: Reverse proxy in Stage.GBI - another config issue.
- Fix: Reverse proxy in Stage.GBI - another config issue.
- Fix: Updated S3 cache folder names (reverse proxy) so they don't conflict in Stage.GBI.
- Fix: WHSAPI: Whoops, didn't assign the score query result to the correct variable. Mod: WHSAPI: moved the score adjustments query below the scores query in GetScores
- Mod: WHSAPI: Remove memberCache from HandicapDataManager since it's not used
- Fix: Can't have funny comments with typos.
- ** DFH CODE REVIEWED TO HERE ** Mod: ClubCMS: sql: CWControlProperty inserts
- Mod: ReversProxy: Added -,-,0,1,golfnz.cw.golf.co.nz
- Mod: ClubCMS: Bindings: Added golfnz.cw.golf.co.nz
- Mod: Reverse: added karori2.cw.golf.co.nz and wellsford.cw.golf.co.nz
- Mod: ClubCMS: bindings: added karori2.cw.golf.co.nz and wellsford.cw.golf.co.nz
- Fix: Org: only send course change email if club has an email address
- Fix: Org: Removed mention of downloading courses, and removed hardcoded Live URLs from pending course change page approval/approve all
- Mod: No longer force club websites to be https://.  This caused validation errors when working with old http:// sites in the database.
- Fix: Org: update club no longer requires manager and lat/long
- Fix: Org: ViewPending course changes is now less terrible. (no longer crashes on postback when marker repeater gets over 1000 items, first dropdown works.)
- Fix: Org: Create club no longer requires lat and long or manager
- Cleanup: Removed Jenkins build status from Live Standard.Master as it hasn't worked in a long time.  Pull rev and build number from DotGolf.Core.Environment.
- Mod: Update Score.NZGA_Handicap and HD from WHSAPI when it is posted.
- Add: WHSAPI: Handicap Index and HD (pre-PCC) values are now returned when a score is posted, so we can update this in union land. This is part of the story to make the Course Variance Report work again (see DG-1718).
- Add: #30485 Best 3 of 5 stableford competition type.
- Fix: Org: Club Search: - removed selectize from member dashboard - added datatype 'json' to ajax post
- Mod: Adweb: Pages: just rearranged a couple of fields
- Mod: Adweb: Pages: just updates some text
- Mod: Adweb: Pages: add Page Title setting to form. (CWPage.PageTitle is an existing column.)
- Mod: Adweb: Menus: add Hidden setting to form. (CWMenu.Hidden is an existing column.)
- Mod: ClubCMS: Golf Ireland: menu: exclude hidden menu items (the CWMenu.Hidden field is used for items that don't need to be displayed on the menu but is part of the structure)
- Fix: Adweb: Create Club Site: comment out the code which creates folders in the clubs folder (this throws an error; and we use S3 for the files already / we don't use the clubs folder anymore)
- Mod: ISVAPI: fix centralmembercode tests in jenkins?
- Fix: Live: extra score entry toggles saved into score table properly, toggling them correctly toggles the corresponding observable model value
- Mod: ClubCMS: Golf Ireland: news list: added displaySearch control property (e.g. the Learn: All News page would show the search and sort functionality but not the tag filters)
- Mod: ClubCMS: Golf Ireland: news list: allow configuration of the View All link
- Mod: ClubCMS: Golf Ireland: allow filtering of news list by a specific tag (configured through a control property)
- Mod:Mod: ClubCMS: sql: CWTag: corrected previous commit (rename IsDisplayAsFilter to IsNewsFilter)
- Fix: Live: Could not enter characters s/m/c/g/p into member search when entering score because of bad $ selector
- Mod: ClubCMS: sql: CWTag: add isDisplayAsFilter
- Fix: API: tests: Added Redis.MasterRedisHostOverride = "dev1.internal.golf.co.nz", removed api_AddScore_UpdateHandicap refs
- Fix: Org: Club Dashbard - Search fix: - Removed selectize due to loading issues - added a sorting for district chart
- Mod: ClubCMS: Golf Ireland: news list search: added clear text functionality, and applied some new styles; added no results found display
- Fix: DotGolf.Live.Tests test passes now!
- Fix: Org: The Club search in club dashboard is not loading properly. Probably because of a loading issue. Added a checking if API is still in process before displaying the DOM.
- Fix: Added CommonServiceLocator v2.0.5.0 to DotGolf.ScheduledTasks.Tests to avoid assembly loading exception.
- Mod: Unit tests: Ignored a bunch of tests that previously had [Explicit] set on them - this used to work with NUnit but XUnit doesn't care.
- Fix: Org: ClubsDashboard.ts:160 Uncaught TypeError: result.forEach is not a function - changed to for loop
- Fix: API: Delete CreateRolloverPeriod and DoRollover from TestObjectTracking
- Mod: Core: Default redis database id for unit tests is now 4. chosen by fair dice roll. guarenteed to be random.
- Fix: GB&I Clubhouse: Added a log to trace the result of club api call.
- Mod: ISVAPI: unit tests use dev redis
- Fix: Live: Functions: Unable to load a function booking when a product (added previously) is no longer available in Kounta POS. Also display a message "Product is no longer available in the POS" below the product name.
- Mod: Do not inject IAmazonElastiCache in unit tests; this is optional now and we'll use the dev redis instance for unit tests. Mod: Removed HandicappingFixture since we have WHSAPI now; no more handicapping calculations on union level.
- Fix: WA Clubhouse: Clubs are not being displayed in the search.
- Fix: Shared: unit tests use UnitTest profile now
- Fix: SharedModule: registering AmazonElastiCacheClient with Autofac uses the same syntax as the other Types (fixes Live/API unit tests?)
- Add: ISVAPI: Added extra score entry toggle fields to api Mod: ISVAPI: Implemented SendTournamentRequestToClub Mod: ISVAPI: Do not break Active Tournament Limit On Update, add Update to CRUD tests Add: Live: Non-functional ISVTournaments landing page for approving/rejecting tournaments
- Fix: CreateDB script: copied old script from Core.Tests because the current one breaks.
- Mod: Bulk Email: sql: be_CreateRecipientsCasualGolfersExcludingJuniors: exclude redundant casual golfers
- Mod: Bulk Email: sql: be_CreateRecipientsMembersAndCasualGolfersExcludingJuniors: exclude redundant casual golfers
- Mod: Core: remove GetMultiplexer from IRedisConnectionBuilder because its only used inside our implementation
- Fix: Marker counts for course changes: Since we're not displaying the count, changed to EXISTS and a bool field instead.
- Mod: ClubCMS: news list: exclude currently viewed news article from the featured / related news list
- Mod: Org Course Update form now allows us to rename existing courses, create new courses and delete unused courses (i.e. those with no expired, current or pending markers).  Discuss: Should we disable course renames for courses with existing markers?
- Mod: ISVAPI: ExtraScoreEntryToggles Mod: Core: unit tests can use features now Mod: ISVAPI: rename IsvTournament to ISVTournament
- Mod: ClubCMS: Golf Ireland: news detail keyword and date updates
- Mod: ClubCMS: Golf Ireland: news list keyword
- Mod: ClubCMS: Golf Ireland: news detail: date format update
- Mod: ClubCMS: Golf Ireland: news list style updates
- Mod: ClubCMS: Golf NZ: news sorting
- Mod: ClubCMS: Golf Ireland: style updates
- Fix: Tests: api_addscore script referenced columns created in later scripts - reverted it and created a new api_addscore
- Mod: ClubCMS: Golf Ireland: added news sorting
- Mod: Live: Re-use old score column - IsMatchPlayScore
- Mod: WHSAPI: Performance improvement in /members/handicaps (for handicap sync calls).
- Mod: Live: Move WHSMarkerUpdated code out of asynchelper because it screws up the stack trace
- Add: Live: New toggles to score entry control (hidden for NZ) - IsCompetitionScore, IsMatchplay, IsPenaltyScore
- Mod: ClubCMS: just removed extra spaces
- Fix: Public: Removed bravenewword check
- Add: Score.IsCompetitionScore Score.IsMatchplay Score.IsPenaltyScore Fix: Public: #30830 clicking Full Details on eclectic comp hit a bunker
- Fix: Course Changes: Slope rating validation changed to 55-155 per USGA recommendations.
- Mod: Course Detail Capture: Changed Slope Rating range from 80-180 to 55-155 per USGA recommendation. Mod: Disabled autocomplete on Course Detail Capture form, it's in the way.
- Mod: ClubCMS: Golf Ireland: news search: display search result summary and text; style updates
- Fix: BulkEmail: Solution build fix.
- Mod: BulkEmail: Changed the way we get the api url. It's now getting it from the Config Profiles.
- Mod: API: MessagesController: If a Passport record has not had any mobile device registrations, set last week's start date/time as starting point in retrieving messages.
- Fix: Public: removed String.prototype.includes from load bindinghandler because it doesnt exist in IE11
- Mod: ClubCMS: Golf Ireland: news search style updates
- Mod: ClubCMS: Golf Ireland: forgot to include in my previous commit
- Mod: ClubCMS: Golf Ireland: added news search filter
- Mod: Course Changes: Some changes to the Org Course Changes area to make it easier for GB&I unions to enter large numbers of markers: - Remember the last club/course selected to make it quicker for a user to add multiple markers at the same course. - The distance unit (yards/metres) is now selected by default per your territory (metres for NZ, yards for everyone else). - Turned off Autofill because it got in the way of us typing simple numeric values like par/stroke/distance.
- Mod: Shared: Parent Score object of HoleScore should be private
- Fix: Live: Not attempted scores from Kiosk were showing up in Live as Pickups #30313
- Mod: ClubCMS: Golf Ireland: news list pagination
- Mod: HospitalityLevyAutomation: Do not apply the Hospitality Levy credit if the SUBS invoice is more than 90 days old. This mod should stop issue similar to FreshDesk ticket #30757 from happening in the future.
- Fix: SSO: We should be able to get to /logout.aspx without being permission checked (it doesn't hurt and would stop some of the SSO edge cases)
- Fix: Org: Tournament registration export: oops, just fixed the previous commit (should have done more testing)
- Fix: Org: Tournament registrations export (csv): make the export work again for tournaments without the optional registration options
- Fix: Eclectic competition results were incorrect because of an errant GROUP BY clause (causing grouping by printed handicap index and therefore duplicated results).
- Fix: Golf IE: Activity Tracker - unable to login due to a null object in the navigation
- Fix: AdWeb: View Ticket Details - Under "Booking Entries" table, cart fees are shown as Captured. Payment for carts are not included at the time of booking and are excluded from the total amount.
- Fix: Org: Force approving a course change only sends and email if the club has an email. Updated email message
- Fix: TeeBooking: Fix #30328 - Exclude cart fees when capturing online payment transactions.
- Mod: Slicer: Reconciliation Report: in the report, also include competitions without rounds set up (use left join instead of join on the CompetitionRound table)
- Fix: Live: Api_AddScore no longer allows any unplayed holes for ninehole scores as per whs spec
- Mod: ClubCMS: Golf Ireland: news control updates
- Mod: ClubCMS: Golf Ireland: news control updates
- Mod: ClubCMS: Golf Ireland: added news tags as "tab menu"
- Mod: ClubCMS: Golf NZ: shorten news query string parameters
- Mod: ClubCMS: Golf NZ: shorten news query string parameters
- Add: Live: new Most improved player report #30475
- Mod: ClubCMS: Golf Ireland: add Priority column to CWTag table
- Mod: GolfNZ: Added control properties to the competitions control.
- Mod: ClubCMS: Golf Ireland: GetNewsTags: added isNewsArticle value
- Mod: ClubCMS: Golf Ireland: GetTags: updated the sorting of the returned tag data
- Add: ProjectInstaller and package-deploy.ps1 script for DotGolf message service.
- Add: _deploy for TXT Message Service package-style deployment.
- Fix: Live: course capture par accumulation bug David Parker reported when clicking Edit to switch between markers
- Fix: API: autofac scope passed in from top level inside MessageLoggingHandler to fix ObjectDisposedException trying to log to tl
- Fix: Adweb: Standard.Master.cs: handle null Menu1.FindItem("DotGolf")
- Fix: AppPerformanceTracker: autofac scope passed in from top level inside ElasticTrackerModule to fix ObjectDisposedExceptions in Kibana when trying to log to tl
- Fix: Try fixing AppPerformanceTracker issues logging stuff in a background thread with DI
- Fix: AppPerformanceTracker throws ObjectDisposedException because lifetime scope is disposed.  I think this is because Autofac or the GC has disposed the scope because of the crazy thread marshalling stuff happening when you go new Thread(stuff), but who knows.  Going to deploy to see if this makes a difference.
- Fix: ClubCMS: Solution build fix.
- Fix: Connector: revert excess changes to LongReceipt that swapped it VerticalResolution
- Fix: Connector: dispose of iDisposables
- Mod: ClubCMS: Changed the GetMember to accept member GUID.
- Mod: Push notifications: Course conditions - Removed Thread.Sleep and just insert all messages in one go.
- Fix: ClubCMS: Added exception logging.
- Mod: Core: dispose of iDisposables in Encryption and SSMParameterStore
- Mod: Push Notifications: Course conditions - Default message type to "TeeBooking" for players who have active Passport records but do not have the apps installed or had Push Notifications disabled on their phone.
- Fix: txtmessageservice: add fxcop analyser to warn us about iDisposables, fixed the warnings
- Mod: txtmessageservice: svn ignore packages for real
- Mod: txtmessageservice: svn ignore packages
- Add: ISVTournament
- Mod: Removed IsvTournament
- Fix: Also alter CMemberHistory width.
- **DFH CODE REVIEWED TO HERE** Mod: ClubCMS: - Added member GUID in the viewmodel - refactored DeleteFriend to accept memberUid - Added my competitions
- Mod: WHSClientEx.cs: JWT sets Expiration and NotBefore dates in UTC instead of local time. Will test in dev that this doesnt break things
- Fix: Live: Un-hardcode interclub messaging url
- Update schemaversion to 3120
- Fix: Push Notifications: Course conditions (e.g. Frost Delay) - If a player on the tee sheet had push notifications disabled, they should still see the notification message when they access the "Messages" screen on the app.
- Fix: Updated DotGolf.Shared.csproj was missing from previous commit. No wonder why the new RSMemberUpdated Hook is not firing in Dev1.
- Mod: ClubCMS: Golf Ireland: news tab menu styles
- Mod: ClubCMS: CWTag: GetTags: updated the select query to accommodate event tag querying (for when we use this to get event tags)
- Mod: ClubCMS: sql: CWTag create table script: added ClubWebsiteId FK
- Mod: ClubCMS: Golf Ireland: news list: css updates (make card height uniform, teaser text: adjust number of characters to display)
- Fix: Alias RSPlayer in the WHERE clause (sub-select query).
- Fix: Unit Tests: Test Setup() fails when trying to run schema updates that are already included in the CreateDB.sql script. Updated to SchemaVersion to 3168.
- Add: ClubCMS: Golf Ireland: add missing ckeditor language file
- Mod: ClubCMS: sql: just added a condition before CWControl insert
- Mod: ClubCMS: Added admin news article control.
- Mod: ClubCMS: sql: removed unnecessary code
- Add: Hooks: Results: https://dotgolf.atlassian.net/browse/DG-1594 If a member name is updated, all RSEntry rows should be updated in the results system.
- Mod: ClubCMS: Golf Ireland: trying to fix a merge conflict
- Fix: Keep Features statically defined in one place rather than setting stuff in the constructor.  This confused the hell out of me when I tried to turn help off in Stage.GBI.
- Fix: Nav UX: Make the username clickable so that you don't have to target the tiiiiiny little arrow.
- Mod: ClubCMS: sql: insert into CWControl and CWControlProperty tables
- Mod: Hide Help menu for Eng/Ire/Wal.
- Fix: ScheduledTasks: HouseAccountPaymentNotification - Fix to stop sending two notifications for the same HOUSE account payment transaction.
- Add: Static content handler URLs for England and Wales (Prod and Stage)
- Fix: Stage.GBI static image handler bucket names were incorrect for England and Wales.
- Mod: ClubCMS: Golf Ireland: news list: view all, style updates
- Fix: GolfNZ: Deleted not needed js files
- Mod: ClubCMS: Golf Ireland: news detail: work in progress
- Mod: Removed line-by-line Elasticsearch logging from GetChangesFromWHS scheduled task - it's too verbose and introduces ES roundtrip time, drastically slowing down the initial sync.  Logging to Console instead.
- Mod: ClubCMS: Golf Ireland: news detail: work in progress
- Add: Ability to switch off the "Events" tab in DotGolf Live entirely (England and Wales have this OFF by default)
- Mod: ClubCMS: Golf Ireland: news-detail: work in progress
- Mod: ClubCMS: Golf Ireland: news-list: removed unnecessary code
- Shared: ClubMember: FindPotentialFriends: Exclude non-affiliate records from the search results for golfers having an active Passport and Member records. This issue was already fixed in Public site (SVN rev no. 31286).
- Mod: ClubCMS: Golf Ireland: news detail: initial commit
- Mod: ClubCMS: Golf Ireland: news list: work in progress
- Mod: ClubCMS: Golf Ireland: news list: work in progress
- Fix: Leaderboard: Occasionally the session appears to be lost, then the page refresh goes into an infinite loop because of an exception thrown.
- Fix: ClubCMS: fixed and found a mistakenly committed mod (a random character was added in Rev 38758)
- Mod: ClubCMS: Golf Ireland: news: initial commit
- Mod: GolfNZ: Added friends list control.
- Mod: ClubCMS: corrected a typo found: "PageControleQueryParameters" renamed to "PageControlQueryParameters"
- Mod: ClubCMS: image content hero control: rename css class name from text-container to hero-text-container
- Fix: Org Tournaments: In recent versions of Chrome, after clicking Edit on a course (in the Markers tab of comp setup), you can't change the course due to a disabled combo box. The original implementation behind this combo is very ugly, with an absolutely positioned combo box being positioned on top of the combo you intended to click on.  This should be dumped and rewritten.
- Fix: Org: Results report was inaccessible due to Standard.Master refactor which changed the say HasPermission() worked.
- Mod: ClubCMS: admin-news-article: removed TotalNewsArticles
- Mod: ClubCMS: GetTags and CreateTag: now using ClubWebsiteId instead of ClubId / AssociationId
- Mod: ClubCMS: GetNews: added alias to ClubWebsiteId column; GetNewsDetail: removed TotalNewsArticles
- Fix: Eclectics: Over-eager partial refactor stopped Eclectic background processing.
- Add: Script to recalculate eclectic competitions (fixing the Net null issue) since WHSAPI go-live.
- Add: New strategy for Eclectic results in light of WHS integration (the old method no longer works because we don't have immediate handicap access).
- Cleanup: Removed some WHSMode.BraveNewWorld usages.
- Fix: Live: POG: Edit timesheet - Push Notifications section should not be visible if the club does not have the "PN" product.
- Mod: Org: Tournament Registration Report: added the custom questions (and answers) to the report
- Mod: Removed apparently unused DeleteScore() method.
- Cleanup: Removed unused NZGAParser (NZGA.TXT) stuff.  This was replaced by ISVAPI.
- Fix: Course Capture: Minor link/text adjustments for undo/redo workflow. Fix: Typo in internal method name.
- Mod: ClubCMS: member signup confirmation: if there's a discount code already assigned to the membership application record, return that one.
- Mod: ClubCMS: member signup confirmation: call CreateMemberInPOS if the club has the POS product (just as an additional precaution)
- Mod: ClubCMS: member signup confirmation: removed unused line of code
- Mod: GolfNZ: Added the login and my golf page for GolfNZ.
- Mod: GolfNZ: - Added Tags table for club news - Inserted new properties in the login and forgot password control
- Fix: MessageService: Disposed of iDisposable causing memory leak (ModicaSoapServicePortTypeClient)
- Mod: ClubCMS: image content hero control
- Mod: ClubCMS: sql: CWControl and CWControlProperty inserts
- Mod: Bulk Email: sql: be_CreateRecipientsMembersAndCasualGolfers: exclude redundant casual golfers
- Fix: ClubCMS: Renamed conflicting service name.
- Fix: ActivityTracker: replace the removed ClubRepo.ByClubID with dapper.contrib conn.Get<Core.Poco.Club>(clubid)
- Fix: Ensure SignalR setup is backwards-compatible by ToUpper()ing the machine name.
- ** DFH CODE REVIEWED TO HERE ** Fix: ISVAPI: isvtournament table usersecurityId col & datetime'd ApprovedByClub Mod: ISVAPI: added code to TournamentsController and ClubRepo for club tournament requests (does nothing yet)
- Fix: Adweb: missed csproj in commit
- Fix: Adweb: isvcredentails
- Fix: NZ: show covid19 help
- Mod: Live: Hide merge functionality because it doesnt merge 2 live members properly :(
- Mod: WHSAPI: Do not start up more than one concurrent DoBackgroundRecalc() on the same node if one of the processes happen to take more than 5s.
- Fix: WHSAPI: Made RecalcHistoryService.DoBackgroundRecalc private to avoid having to XML document it.
- Mod: WHSAPI: History recalc tasks will now randomise the list of members before recalculating and also check the recalculate date is not null before starting, which should reduce collisions between threads (and therefore recalculating the same member multiple times).
- Mod: ISVAPI: docstrings for Tournaments
- Mod: ClubCMS: Golf Ireland: style update
- Mod: ClubCMS: Golf Ireland: menu logout functionality
- Mod: Live: POS+Kounta: Sprinkle comments //dont show variant parents because Kounta errors if they're in an order
- Mod: ClubCMS: Golf Ireland: My Performance: truncate club / region / country name
- Fix: Live: Kounta POS: don't show variant products in the POS because selling them causes a kounta error #30544
- Mod: WHSAPI: ErrorResponse.Error no longer a nested class
- Mod: ISVAPI: standardise error formats to always return ErrorResponse Mod: ISVAPI: replace forbiddens with not-founds
- Mod: GolfNZ: Added CKEditor file browser plugin.
- Mod: ClubCMS: Golf Ireland: menu update: Tournaments dropdown
- Mod: Adweb: ClubCMS: Menus: added Image field to the form (CWMenu.Image is an old / existing column)
- Mod: Moved startup order to make ISVAPI logging work; changed out Environment.MachineName to Dns.GetHostName().
- Fix: Live: Can't reinstate member who doesnt have an email #30534
- Fix: ISVAPI: SearchCode endpoint hidden for non-tournament ISVs
- Fix: Missing IAmazonEC2 service (which is needed for VortexHostDiscovery)
- Mod: ISVAPI: Add more docstrings
- Mod: ISVAPI: Readonly API keys can be created for all roles
- Mod: ISVAPI: IsvTournaments - can post scores, get markers. Mod: ISVAPI: updated post score logic for tournamentISVs
- Mod: Core: Remove ClubRepo.ByClubUID because it's trivial
- Fix: ISVAPI: Update createdAtRoute paths and URI param names to remove instances of 'uid' vs 'memberUID' etc
- Mod: Golf IE: Card Fulfilment: Added the approve and cancel links in the club inbox email.
- Mod: IE Golf: Card Fulfilment: Added the approve and cancel button in the club inbox email.
- Mod: Changed from Environment.MachineName to Functions.MachineName because the former cuts the name off at 15 characters (the NetBIOS limit).  We now have "dg-gbistage-web-1" which is longer than that.
- Fix: API: MyGolfController: /search-for-courses endpoint - Much better WHERE clause to filter inactive courses.
- Fix: Build error caused by AppPerformanceTracker refactor.
- Fix: Build troubles caused by ElasticSearchLogger refactor (and introduction of IVortexHostDiscovery)
- Fix: ServiceLocator didn't work inside AppPerformanceTracker due to background thread. Fix: AppPerformanceTracker didn't start because of earlier refactor.
- Fix: API: MyGolfController: /search-for-courses endpoint - Check for effective and termination dates because inactive courses are being returned.
- Mod: Automatic Vortex host discovery for Elasticsearch logging (not yet StatsD)
- Mod: ISVAPI: Tournament ISV score submission Mod: ISVAPI: moved tests to main Test namespace
- Mod: Core: Moved Plural extension method to Core stringextensions
- Mod: ClubCMS: Golf Ireland: menu style update
- Mod: ClubCMS: Golf Ireland: default user image (or icon)
- Mod: ClubCMS: Golf Ireland: user context menu style updates
- Mod: ClubCMS: Golf Ireland: menu: logged in user changes; user context menu; logout
- Mod: GolfNZ: News article admin code files.
- Mod: GolfNZ: Added a news article admin control.
- Mod: ISVAPI: visitors test friendlier (doesnt throw exceptions)
- Add: ISVAPI: Create/Read/Delete tournaments Mod: Core: regen EzPoco.g.cs
- Mod: sql: IsvTournament table - rename explanation to Description
- Mod: sql: IsvTournament table - default [ApprovedByClub] to 0
- Mod: ScheduledTask: Kounta - Unassigned member account credit task: Send alerts to Helpdesk so a ticket is created for tracking purposes. Previously the alert is sent to my e-mail "kenneth@golf.co.nz". Some minor mods on the email content.
- Mod: ISVAPI: Removed middleman WebhookEvent class
- Fix: Live: Score entry control allows autocomplete after 10h played for 18h markers
- Mod: Core: None.cs has a non-empty country code now (because if it's blank, ISVAPI can't use in the url path, and the unit tests cant find any endpoints.)
- Mod: ISVAPI: add uid columns to isvtournament table
- Mod: ISVAPI: rename date columns on isvtournament table Mod: ISVAPI: some more search tests
- Mod: Core: IRedisConnectionBuilder no longer accepts a db id
- Fix: Redis: GetDatabase(0) removed database ID.
- Fix: Redis: GetDatabase(0) removed database ID.
- Fix: Redis: GetDatabase(0) removed database ID.
- Fix: Redis: GetDatabase(0) removed database ID.
- Fix: Redis: GetDatabase(0) removed database ID.
- Mod: Redis default database ID is now manipulated depending on the environment and location. **NOTE** this means that we should NOT specify a database ID when calling Redis.Connection.GetDatabase() anymore.
- Mod: ClubCMS: Golf Ireland: menu: profile photo display
- Mod: ClubCMS: Golf Ireland: menu: profile photo display
- Mod: Vortex host is now stored in IConfigurationProfile.  DotGolf.ScheduledTasks uses it now for ElasticSearchLogger (IDataLogger), and I've also upgraded AppPerformanceTracker to do the same.
- Mod: ClubCMS: Golf Ireland: menu: profile photo display
- Fix: WHSAPI: Low index reset was not being found correctly when there were no scores after it
- Fix: API: MyGolf: FindPotentialFriends - Do not return resigned or inactive records. Fix #27203. This fix will also help reduced the chances of having these exception messages "ExceptionMessage":"Passport.GetPrivacySetting(): both NonAffiliateId and MemberId are null." logged in Kibana - Occurs when a user tries to view the profile of an inactive record from the MyGolf app.
- Mod: ClubCMS: Golf Ireland: Members menu
- Fix: WHSAPI: Low index reset was not being found correctly when there were no scores after it
- Fix: WHSAPI: Low index reset was not being found correctly when there were no scores after it
- Fix: Live: Competition Results: Fix #30437 - Unable to load report because of exception "<NonAffiliate ID> does not belong to a club, and hence does not have a MemberCode". Check if the player is an affiliated visitor (ClubId is not NULL) before accessing ClubMember.MemberCode.
- Fix: Live: Subs: ComputePaymentScheduleInfoForInstalments: added a condition before considering the category a periodic one: !cm.Category.IsCyclical. We used to look at the SubPeriodId value only.
- Mod: ISVAPI: Pluralise "Posting scores is only permitted for members of your club OR for rounds played on your course"
- Mod: Scheduled Tasks: Task name changed, it was too long so wouldn't appear properly in Scheduled Tasks.
- Mod: ISVAPI: missed a column on isvtournament
- Add: Scheduled Tasks: Who needs it to compile anyway...
- Add: Scheduled Tasks: Now schedules the task in Task Scheduler.
- Add: ISVAPI: IsvTournament table
- Fix: Scheduled Tasks: EXEPath wasn't quite right.
- Mod: Scheduled Tasks: New DeployLib_DeployScheduledTask() function and package-deploy.ps1 for DotGolf.ScheduledTasks. This doesn't actually schedule the EXE to run in Task Scheduler, but will do soon.
- Mod: ScheduledTasks build: New SLN file for Scheduled Tasks; this way we can build and deploy it separately to Live (which works for new package-style deployment)
- Mod: ISVAPI: add Moq to reduce Mock clutter
- Add: ISVAPI: search by CentralMemberCode endpoint Mod: ISVAPI: tests use configprofile.None. Mod: ISVAPI: tournament ISV permissions
- Mod: Bulk Email: recipient queries: exclude PGA only members; update the insert into CWEmailRecipient code (based on be_CreateCustomRecipientsBulkEmail)
- Fix: Mailer Build: Service installer registered the service in the stage directory, not C:\DotGolf\(servicename)
- Mod: Mailer Build: Moved services up a level (NZ, IE, WA), added _deploy directories and package-deploy.ps1 scripts.
- Mod: Bulk Email: recipients: added a "Members" option
- Mod: Bulk Email: sql: just updated a comment on this new sp (still to be deployed)
- Mod: Bulk Email: sql: just updated the new sp (still to be deployed) to exclude PGA-only members
- Add: Bulk Email: sql: add new sp: be_CreateRecipientsMembers
- Fix: Mailer Build: Needed to shift the project location in the SLN too.
- Mod: Mailer Build: Moved DotGolf.Mailer.Service.EN up a level to appease the build scripts.
- Mod: ClubCMS: Golf Ireland: My Golf header initial commit
- Mod: Mailer Build: Automated more of the service deploy stuff; hopefully can build and deploy this from Jenkins now.
- Add: Mailer Build: Sorcery to get Ringmaster Cloud Formation user script to get latest code from Jenkins in the event that it needs to rebuild/autoscale.
- Fix: ISVAPI: webhooks must be https
- Fix: ClubCMS: Tournament Registration: The default email doesn't have a body because the query always returns a an entry even with NULL data.
- Add: Mailer Build: Stub to test deployment logging.
- Add: Mailer Build: package-deploy.ps1
- Mod: Mailer Build: Put SITE_NAME in environment
- Fix: Mailer Build: Whoops, services don't need bindings.*.list.
- Add: Mailer Build: service-jenkins-promote.cmd.
- Add: Mailer Build: TARGET_ROLE parameter to determine where things get published to (currently using webapp and ringmaster)
- Mod: Adweb: can generate tournament isv credentials now
- Fix: SSO: netstandard garbage
- Fix: extern was borked
- Add: _deploy for DotGolf.Mailer.Service.EN
- Fix: SSO: netstandard garbage
- Mod: Mailer service: Changed service names to EN, WA and IE so they show up correctly in SERVICES.MSC.
- Fix: SSO: netstandard issue? Mod: SSO: replace old DG logo with new one on error
- Fix: SSO: add netstandard in razor web.config
- Add: Swipecard format for Tauranga.
- Mod: Bulk Email: Recipients: added new option: "Casual golfers - women only"
- Mod: Bulk Email: Recipients: added new option: "Casual golfers - women only"
- Fix: #error    "marcus committed this by accident and will fix it"
- Mod: SSO: Refactor out header+logos into a partial view Mod: Core: add css class to IConfigurationProfile
- Mod: Shared: Remove some api_AddScore_UpdateHandicap refs
- Fix: Adweb: UKTournaments typo
- Mod: Cleaned up BraveNewWorld references.
- Mod: Dropped api_AddScore_UpdateHandicap - we do not need it in WHS BraveNewWorld.
- Mod: Cleaned up BraveNewWorld references.
- Mod: Adweb: remove WHSMode checks
- Mod: Results: We now use an MD5 string as a cache key in the bowels of results.  Because of the number of RSResultId values strung together in the cache key, it got to be a pain to read in the Output window.  Shouldn't really have affected performance.
- Mod: Obsoleted Settings.WHS.Mode - it's BraveNewWorld now for all environments. I've made this an error in debug mode so that we are "encouraged" to update the code as we check out each solution; in this initial commit I've already completed DotGolf.Live and DotGolf.Shared.
- Mod: ISVAPI: rename tournament isv role to UKTournaments
- Mod: Org: Tournament: Finalise: allow filter by Status Code for Associations with NZGreenFeeData..Association.TournamentEnablePaymentsBeforeFinalised enabled
- Add: ISVAPI: tournament isv Role (blank)
- Fix: API: #app-scorecards: Prevent DigitalScorecard.GetPlayerShortName method from crashing when there are extra spaces between the player's first and last name.
- Fix: Live: england golf logo update in nav
- Fix: Live: Rebind capture complete text when clicking complete in TabCourseDetailCapturePage
- Fix: SSO: roles
- Fix: SSO: Missed a commit for eng golf logo in all sso pages
- Mod: SSS feature flagged for GB&I.
- Fix: Org: Hide help for GB&I, hide WHS Golf.co.nz link
- Fix: Org: Create club for GB&I
- Mod: SSO Login Branding: Added div-{countrycode}' class in <body> so that it'll be easier to apply style changes to other elements.
- Mod: Live: POG: Course conditions push notifications - Allow users to view push notifications recipients (from past tee sheets).
- Mod: Using IConfigurationProfile for Mailer Service configuration (for the most part) now so that I don't have to go around setting up SSM parameters in IE/UK prod. Add: DotGolf.Mailer services for England, Wales and Ireland.
- Fix: Org: Fix #30284 - Thiem keeps getting logged out after successful sign-in because of System.Collections.Generic.KeyNotFoundException.
- Fix: SSO: remove superadmin from new users
- Fix: SSO: newly created clubs users can administer other club users
- Fix: Shared: Course.cs getallcourses and find no longer use hardcoded countryid
- Fix: Org: inject Platform during club creation Fix: Org: null address fields no longer show as nulls
- Mod: Navigation: Moved the urls to ConfigurationProfile instead of parameter store.
- Fix: Org: Create Club Password and username validation
- Mod: Org: Create Club better Password and username validation
- Mod: Org: svn ignore ClubDashboard.js
- Fix: SSO: backspace and shift+tab work in password reset page Mod: SSO: Add platform to create account/forgot password emails
- Mod: Replaced some more old URLs in ConfigProfile, not that we need these right now.
- Fix: Live: Course detail capture tab wasnt showing Mod: Live: Covid19 feature flag to stop checkin showing in GB&I Live navigation
- Mod: Ireland *.clubhouse.golfireland.ie domains for app resolvers.
- Fix: BulkEmail: Fixed tracking (links and beacon) urls.
- Mod: Live: course detail capture undo button
- Add: Bindings for *.clubhouse.golfireland.ie.
- Mod: Reverse Proxy bindings for *.clubhouse.golfireland.ie.
- Mod: Live: PCC report works
- Mod: Live: PCC report almost working
- Mod: Platform.Name and Platform.ShortName added to IConfigurationProfile. I've also changed the Live standard master page to use the Platform.Name in the page title, as an example of how to use this.
- Mod: SSO: Hardcoded England Golf WHS Platform into Create account email for demo -> moving to config profile tomorrow
- Mod: ClubCMS: Golf Ireland: My Performance chart: apply custom tooltip; style updates
- Fix: Live: Course detail: postback rubbish
- Mod: ClubCMS: Golf Ireland: my scores: add more tooltips; update styles
- Fix: WHSAPI: doh, didn't make the PCC endpoint return value IEnumerable
- Mod: sql: ClubCMS: Golf Ireland: added a property to the my scores control
- Fix: Adweb now loads static content bucket name from ConfigurationProfile instead of SSM.
- Fix: WHSAPI: RecalcHistoryService exception catching
- Mod: WHSAPI: PCC endpoint toUTC filter param
- Mod: ClubCMS: Golf Ireland: my scores help link and tooltips
- Fix: BulkEmail: The JSON was invalid because of incorrect comma placement.
- Fix: Ireland static gateway: bucket name fixed.
- Fix: bindings.gbistage.list had Ireland pointing to Wales.
- Fix: Adweb: wild commits attempting to fix ORNS in Report definitions page
- Fix: Live: PCCReport.json bad filename
- Fix: StaticContent: Compiles, doesn't compile, what does it really matter.  As long as we're all happy.
- Mod: Static content bucket name and gateway URL now stored in ConfigurationProfile rather than SSM. This was done to enable England, Ireland and Wales to live in the same stage environment (gbistage) while maintaining separate content buckets for their assets (ClubCMS).
- Mod: ClubCMS: Golf Ireland: my scores: style updates
- Add: Live: PCCReport.json (not complete) - attempting to load reports from embedded resource files into tabreports
- Fix: API: no longer showing null HD scores in the scores graph
- Add: Live: PCC report data source Mod: Live: commit WHSClient.g.cs
- Mod: ClubCMS: Golf Ireland: my performance style update
- Mod: ClubCMS: Golf Ireland: forgot to update the Level 3 menu items which use UrlOverride
- Mod: ClubCMS: Golf Ireland: footer style update
- Mod: ClubCMS: Golf Ireland: Breadcrumb Menu query: exclude root menu items prefixed by an underscore (e.g. _PRIMARY)
- Mod: sql: ClubCMS: altering the existing CWMenu.CssClassName column
- Mod: sql: ClubCMS: Golf Ireland: CWControl and CWControlProperty inserts - new My Performance control, and new properties for Tab Menu and My Scores)
- Mod: ClubCMS: Golf Ireland: cards (rImage Slideshow): make the entire card clickable if there's a URL for the item; card style updates / fixes
- Fix: Adweb: ClubSignupLinkExportPage top 5
- Mod: Public: Change <iframe> source to point to the randa widget.
- Add: WHSAPI: PCC endpoint
- Mod: Configuration profiles for whsplatform.englandgolf.org and clubhouse.walesgolf.org.
- Mod: Bindings for whsplatform.englandgolf.org and clubhouse.walesgolf.org.
- Mod: ClubCMS: Golf Ireland: menu: update clickable area, and update the hover style as well
- Mod: ClubCMS: Golf Ireland: Intro Style 3 Dark: style updates/fixes
- Fix: SSO/Adweb: club signup links go to course detail capture page correctly
- Fix: Adweb: tabcoursedetailcapture route in club signup form fixed
- Mod: ClubCMS: bindings: define the new URL for the Pupuke Member Portal: members.pupuke.co.nz
- Mod: Reverse Proxy: define the new URL for the Pupuke Member Portal: members.pupuke.co.nz
- Add: Adweb: Club signup link export feature to allow the on-boarding URLs to be generated for GB&I.
- Add: Feature flags for configuration profiles.
- Mod: API: DG-1511 House Account payment notifications - Return the latest account balance. Added XML documentation comments to the GetAccountTransactionResponse.
- Mod: Golf NZ: News: Added swiper effect option.
- Mod: ClubCMS: Golf Ireland: footer style updates and fixes
- Fix: Vend: Tampermonkey: Load jQuery from our Tampermonkey scripts because VEND has removed this from their app.
- Mod: GolfNZ: Added tag filters for NewsArticles.
- Mod: ClubCMS: Golf Ireland: CSS: scroll down font size update; accordion +/- (before) and add margin; reduce intro-style-3-dark margin-bottom;
- Fix: SSO: Live -> Clubhouse for account creation
- Fix: SSO: PasswordReset.ResetCode and PasswordReset.SentResetCode posted bac correctly when password is invalid
- Mod: ClubCMS: Golf Ireland: 2-panel pages: right content container: add padding
- Fix: SSO: #error    "marcus committed this by accident and will fix it"
- Fix: SSO: Password reset flow screwed up by not setting IsResetCodeValid in the last Action - if their password is invalid, it sends them to the prev page
- Mod: ClubCMS: Golf Ireland: intro style 3 dark: reduce bottom margin
- Mod: ClubCMS: Golf Ireland: update the padding for accordion headers
- Mod: ClubCMS: Golf Ireland: correct the border for accordions (just apply border top on the header, except the first item)
- Fix: SSO: password policy
- Fix: SSO: Create account merp
- Fix: ISVAPI: memberUID doc update for GB&I
- Fix: ISVAPI: memberUID doc update for GB&I
- Fix: Set GOTG URLs to "DISABLED" to match SSM parameters.
- Fix: ISVAPI: CentralMemberCode length should be 10
- Fix: ISVAPI: Membershipnumber doc update again for GB&I
- Fix: Org: Incorrect GOTG url for prod.
- Fix: Org: District's - Club house  - Clicking on members details & get error message - Just added a null checking to the club
- Fix: ISVAPI: Membershipnumber was meant to be centralmembercode not localcode Mod: ISVAPI: simplify error model
- Fix: Casual Golf Admin: Added production config
- Mod: sql: Bulk Email: be_CreateRecipientsCasualGolfers: modified the casual golfers query: added na.AllowBulkMail = 1 and eliminated duplicate email addresses (many casual golfers tend to have multiple records in the system)
- Fix: API: Performance - Try not to hold up the DB connection while waiting for the WHS calls to complete by moving the WHS calls outside the "using" statement.
- Fix: Xero: Fix #30015. We used to fire off the authorize request in the backend to get the the final URL then send the user to that URL. That is no longer applicable now after Xero made some updates on their Authentication process. We now send the user to the Authorize URL https://api.xero.com/oauth/Authorize?oauth_token=[REQUEST TOKEN] instead of sending the user to the final URL (https://login.xero.com/identity/user/login).
- Mod: Removed support.stage.dotgolf.co.uk from sites-gbistage.list for now; if we need it back we can add it again.  There is no A record for this at the moment.
- Fix: Casual Golf Admin: Instead of using web reference, I changed it to service reference.
- Fix: Index to avoid Slicer import timeouts.
- Fix: Casual Golf Admin: Navigation fix.
- Mod: Org: Registration Options: just added the display of the cost or price associated with the registration option
- Fix: Analytics: The navigation service is not returning any because of the http security mode.
- Fix: GOTG link is incorrect.
- Fix: Removed the usage of sessions
- Fix: Org: delete score permissions - nzgolf couldnt delete scores
- Mod: ClubCMS: Golf Ireland: apply fixed-top css class on menu scroll only
- Fix: Added a checking if webuser is null.
- Mod: ClubCMS: Golf Ireland: correct the accordion minus sign colour
- Mod: ClubCMS: Golf Ireland: Accordion: added expand all / collapse all
- Fix: RunningAsConsoleApp should be set when doing Xero stuff from DotGolf.ScheduledTasks otherwise lots of random RSA certificates get created on disk, causing chronic disk space issues on Ringmaster.
- Fix: The 'format' in js is causing an issue with the datepicker.
- Mod: Live: Display merge member member UI
- Fix: SQL not braining.
- Fix: SQL error fixed (for posterity - don't think this would affect anything in the unit tests)
- Fix: API: save-round-setup endpoint - throws ORNS exception.
- Fix: Added a condition to check EmailDefaultElements is null to avoid the NullException error
- Mod: ClubCMS: Tournament Registration (e.g. Par NZ): allow members to use their secondary membership number to register. Also, use MemberCode instead of ComputerNo (because ComputerNo is deprecated)
- Mod: Added connectionManagement/maxconnection="500" setting to Web.config.Production to ensure ConnectorAPI can always connect out to DotGolf Live to fire Scorecard Updated hooks.
- Fix: Live: SCA: focus member input box on load
- Fix: Shared: WHSAPI stage URL had a trailing space before the "/" - "Invalid URI: The hostname could not be parsed."
- Fix: ClubCMS: tournament controls: update URL http://images.golf.co.nz/countries to https://static.golf.co.nz/countries/
- Mod: Golf NZ: Initial commit of news article controls.
- Mod: Live: casual member score sync error includes memberId
- Fix: EN and WAL have same config for now
- Fix?: Live: casual member score sync "Activation error occurred while trying to get instance of type" error when picking up old casual membership with scores
- Fix: ClubCMS: TournamentRegistration (Par NZ): delimit the answers using a pipe symbol instead of a comma (users can easily use a comma in their answers)
- Add: Live: routes to make course detail url shorter
- Fix: Live: whs daily handicap scheduled task
- ===DFH CODE REVIEWED TO HERE=== Add: Live: Merge existing UI
- Fix: Live: Course capture marker name loading
- Fix: Live: Course details capture saves empty NZCR and Slope as 0
- Fix: Live: Course details capture back 9 - corrected hole nums
- Mod: Live: Course details capture hide add tee when editing
- Fix: Live: Course details capture SSS + edit mode fix
- Mod: add NZCRDATA SSS column if not exists
- Add: NZCRDATA SSS column for course detail capture + mapping to legacy courses
- Fix: Live: Course details capture removed erroneous setting set
- Fix: Live: Course Status: fixed a typo error "Golf Club" should be "Golf Bag"
- Fix: InvalidOperationException: Unable to resolve service for type 'DotGolf.Core.Environment.IAppResolver' while attempting to activate 'DotGolf.ActivityTracker.Controllers.AccountController'. Uncommented the code that causes the error.
- Fix: Missing ActivityTracker for Ireland(Stage)
- Add: Manual configuration files for gbistage static images.
- Add: Static content bucket name is now part of IConfigurationProfile.  DotGolf.Images now uses this instead of the StaticContentBucketName SSM parameter. Mod: Externed DotGolf.Core into DotGolf.Images for ConfigurationProfileResolver. Mod: DotGolf.Images no longer calls SSM to resolve bucket name.
- Mod: ISVAPI: ClubUID required in GB&I when searching for visitors by name Mod: Core: ClubMemberRepo: less weird whitespace trimming rules in FindMembers
- Fix: Stage domains,.
- Add: bindings.gbistage.list for Org.
- Add: bindings.gbistage.list for ClubCMS.
- Add: bindings.gbistage.list for BulkEmail.
- Add: bindings.gbistage.list for Images.
- Add: bindings.gbistage.list for ActivityTracker.
- Add: bindings.gbistage.list for Adweb.
- Add: bindings.gbistage.list for ActivityTracker.
- Add: bindings.gbistage.list for Images.
- Mod: Live: Course capture: union email for golf england, and Complete link
- Fix: Golf IE: Fixtures: Query optimisation
- Mod: ClubCMS: Golf Ireland: Golfbox tournament styling updates
- Fix: Org: Tournament Registration: Manual Registration: Registration Options: allow entering / editing of "text" type of registration question
- Fix: Live: Kounta client rate limiting was not the same between the async and sync WaitForRateLimit methods
- Mod: WHSAPI: better explanation when someone's handicap is frozen or withdrawn
- Mod: ClubCMS: Golf Ireland: View All Scores link
- Fix: Corrected stage urls and gbi-stage profile name for England, Ireland and Wales.
- Mod: GolfNZ: Added display order column and altered the length of the VideoUrl column.
- Fix: Live: forgot a file
- Mod: Live: Kounta member sync no longer falls over if it hits one error
- Fix: Table was a temporary fix.
- Mod: GolfNZ: Added hero slider.
- Fix: Live: Course details capture after Matts testing
- Add: bindings.gbistage.list for Live.
- Mod: Better error message reported when SSM parameter can't be found.
- Mod: ClubCMS: Golf Ireland: My Scores: style updates
- Mod: ISVAPI configuration for gbistage.
- Mod: .stage. in bindings.gbistage.list.
- Add: bindings.gbistage.list for SSO.
- Fix: SSO: username/password field lengths, no longer set Shortname
- Fix: SSO: username validation
- Fix: SSO: Resend code was pointing to old sendemail method
- Fix: SSO: password reset $CODE$, create passport+credentials for the new user account, remove s signature from url to see what happens
- Fix: ReverseProxy config: Unix-style newlines.
- Fix: GBIStage configuration in Reverse Proxy build.
- Mod: SSO: Can now create a magic URL that takes someone to the create account page.
- Mod: Preprinted cards are now marked with IsPreprinted=1 in the Scorecard table so we can differentiate these.  This will help our print delay metric not to get skewed by massive batches of preprinted cards.
- Mod: Reverse Proxy: ukstage --> gbistage
- Mod: SSO: Don't expose httpget CreateAccount since validation isn't done
- Mod: SSO: Create account flow for GB&I club login urls
- Mod: ClubCMS: Golf Ireland: My Scores pagination
- Mod: ISVAPI: If no timezone info is found for a course, assume the score play date is in UTC so the handicap calculation wont do anything too weird
- Mod: ISVAPI: Return correct handicap from get score endpoint
- Mod: Had to add `OPTION(RECOMPILE)` to the PCC query because otherwise it sometimes stops using the filtered PCC index on Score.
- Fix: ISVAPI: user club endpoint
- Mod: [ukstage] Reverse proxy configuration.
- Mod: ClubCMS: Golf Ireland: My Performance: member stats
- Mod: ClubCMS: Golf Ireland: My Performance: member stats
- Mod: ClubCMS: Golf Ireland: My Performance: member stats
- Mod: ClubCMS: Golf Ireland: My Scores: hide the member handicap info (this has been transferred to the My Performance control)
- Mod: GolfNZ: Added footer control.
- Mod: ConnectorAPI: The webrequest that tells Live that a scorecard was printed now has a timeout built-in so that we don't end up with a 100s call that causes connectors to block while they should be printing cards.
- Add: WHS PCC logging code (marcus to test)
- Mod: Org: WHSClubInsertedUpdated hook no longer calls WHS for no reason
- Mod: ClubCMS: Golf Ireland: Member Dashboard: work in progress
- Mod: ClubCMS: Golf Ireland: member dashboard: handicap performance chart
- Fix: ClubCMS: timeout value should not change
- Mod: WHSClient: Do not change timeout value, otherwise we get "This instance has already started one or more requests. Properties can only be modified before sending the first request"
- Mod: Release sql connection a little earlier (before we do the 15s long poll)
- Fix: Core: WHS URLs for prod and stage
- Fix: SSO: refactored Forgot Password into two views
- Mod: GolfNZ: Initial commit. Contains layout and navigation.
- Mod: ConnectorAPI: Removed old school async call for BeginPingV3 because live_Connector_Poll only runs to the order of milliseconds these days. Add: ElasticTrackerModule url suffixes to allow us to see which API methods are being called via SOAP.
- Fix: API: Fix ORNS.
- Add: API: Added HoleDetail.HoleName.
- Fix: Dev: WHS url
- Add: SSO: new password reset mechanism
- Mod: ClubCMS: Golf Ireland: corrected typo error
- Fix: Links in test email are not working when opened in outlook mobile client.
- Fix: StatBucket actually fixes the problem now - we keep a dictionary of UdpClients for each Vortex host (we will only have one methinks, but good to be safe about this).  Re-use clients instead of constructing a new one every request.
- Mod: NStatsD/StatBucket.cs now uses a static UdpClient to avoid allocating a new udp source port when a new packet is sent (risking port exhaustion)
- Fix: Navigation: Added an alternative way of getting the country code.
- Mod: AppUrlResolver: Moved the URLS to code instead of AWS parameter store and DB.
- Mod: golf.co.nz: home: add FlexiTours to the sponsor logos
- Fix: Live: Course details capture loads 9 hole marker names correctly
- Add: Live: Course details capture (hacked from the Org Course Changes form)
- Mod: ClubCMS: Golf Ireland: my scores css updates
- Mod: ClubCMS: Golf Ireland: my scores css updates
- Mod: ClubCMS: Golf Ireland: My Scores: change the css class assigned to a hole without a score
- Mod: ClubCMS: Golf Ireland: Tab Menu: use UrlOverride if it's not null
- Fix: ClubCMS: Tournament Registration (5CC/ParNZ): MemberExists: correct the sql script used to check if the member has registered. It was referring to Member.ComputerNo previously and I changed it to Cmember.MemberCode. (So previously, members with multiple memberships possibly can't be detected as registered as we were looking only at the Member record)
- Mod: ClubCMS: RegistrationPayment: GoToDPSPayment: added http:// to the URL (assuming this is causing the error in the dev environment; but not in my local)
- Fix: API: System.ComponentModel.Annotations >:(
- Mod: Org: Tournaments: Opened the Export Registration link to all associations.
- Mod: ClubCMS: Golf Ireland: Member Dashboard: My Performance initial commit
- Mod: ClubCMS: Golf Ireland: Golfbox css, and tab-menu changes to accommodate its different design on the Golfbox pages
- Mod: Performance: HttpClient made a singleton for WHSClient and others.
- Mod: Shared/Core: Move ToEnum to StringExtensions
- Fix: Org: using(var wc = new WebClient()) to dispose webclient in Reports
- Fix: WHSClient is now IDisposable so we should get rid of HttpClient once we're done with it.
- Mod: Org: Tournaments: Instead of getting the template from CWEmailTemplate we should be getting it from competitions table where it is saved.
- Mod: Org: Tournaments: UI changes for the Email Template setup in tournaments.
- Mod: ClubCMS: Golf Ireland: My Scores
- Mod: ClubCMS: Golf Ireland: My Scores
- Mod: ClubCMS: Golf Ireland: My Scores
- Mod: ClubCMS: Golf Ireland: My Scores (work in progress): added count and css class
- Mod: ClubCMS: Golf Ireland: My Scores (work in progress)
- Fix: Navigation: Not all associations have a ClubId so the Club.CountryCode will throw an exception.
- Fix: Live: annoying intellisense errors in TabCourses.aspx
- Fix: Live: scoreservice error caused by running NotifyScoreEntered in a thread
- Fix: ClubCMS: Golf Ireland: authenticate from cookie
- Fix: WHS: Tests: add STATIC to the bool used to check if extra localdb databases are cleaned up yet
- Fix: WHS: RecalcHistoryService references
- Add: WHS: RecalcHistoryService IHostedService
- Fix: CardPoller: redis version fixed for real this time
- Fix: CardPoller: redis version update and auto generated binding redirects
- Mod: IE ClubCMS: Card ordering UI updates.
- Mod: PCC calculation only allows -1 to +3 per v1.0 of the spec.  Until now we allowed -2 per v0.6; this is now removed. Next steps: - Publish WHSAPI (and RunPCC) when all clear from @Marcus - Delete PCC rows from PlayingConditionsHistory table for PCC=-2 and let the job recreate these as -1
- Mod: ConnectorAPI will now include the clubid to send to the ScorecardPrintedNotificationHandler to avoid Live having to get this from the database. Mod: ConnectorAPI long polling delay for scorecard images decreased from 29s to 14s to avoid nginx send timeouts (causing load balancing problems).
- Mod: IE ClubCMS: UI update and added distance filter.
- Mod: WHS: simple using in WebHookSenderService
- Fix: golf.co.nz: Performance improvement on Comments.aspx by refactoring out some OR statements and caching a list of member IDs to show scores for, as well as precalculating the score order.
- Mod: WHS: sprinkle simple using statements in RecalcHistory program.cs
- Mod: Live: ScoreService: HookManager.Fire and ScoreEntryHub.NotifyScoreEntered both take ~400ms; run them in parallel
- Fix: API: "save-round-setup" endpoint - Include the player/partner's details (e.g. Name, Gender, Handicap Index) when inserting a row into the ScoreEntryStage table. Fix: API: "save-score" endpoint - Update ScoreEntryStage.ChangeDate column when saving scores.
- Mod: Live: Remove some #DEBUG thread.sleeps
- Fix: ENG Live: Handling of member search for England which is using a 10 digit member number.
- Fix: Shared: Add dapper.contrib to shared
- Mod: Live: Remove final Entity Framework stuff from TransactionRepository to save 300ms on CreateScorecardTransactions
- Mod: SSO performance improvement - we use UserSecurity.UserIdFull now (which is indexed) rather than the non-SARSable ClubId+UserId filter in the where clause.
- Add: UserSecurity.UserIdFull column which persists and indexes ClubId+UserId for fast lookups.
- Fix: Moar speed.
- Mod: live_GetScoreCardPrintQueue: The opposite gender stroke (OG* columns) is expensive to calculate, so I have split it out to a separate update against a temp table ONLY IF the club has it enabled in their ClubSettings.
- Fix: Live: DailyHandicapIndexUpdateTask should copy handicaps over AFTER we've got post-pcc handicaps into ProjectedNZGA_Handicap
- API: Score Entry App: Ability to score for 4 players.
- Fix: IX_MarkerDefault_ClubId_DeletedDate for performance.
- Fix: Scheduled tasks: System.ComponentModel.Annotations binding redirect Add: Scheduled tasks: score cleanup task
- Add: ClubCMS: Golf Ireland: MyScores: work in progress
- Add: ClubCMS: Golf Ireland: MyScores: work in progress
- Add: ClubCMS: Golf Ireland: MyScores: work in progress
- Fix: Live: POS: Fix - Wait for the competition select control to finish loading before allowing the user to perform a "Check Out".
- ==DFH CODE REVIEWED TO HERE== Fix: InjectionAttackBlocker: Remove clauses that are too generic
- Mod: SSO: Removed <RestoreProjectStyle>PackageReference</RestoreProjectStyle>
- Fix: WHSAPI: update home club when a resigned member joins a new club.
- Mod: WHS: add home club checks to merge tests
- Mod: WHSAPI: removed ToUniversalTime() calls on PostScoreRequest.PlayedAtUTC because everything gets converted to utc by our DateTimeConverter Mod: WHSAPI: switched CreateOrUpdateScore to simple using statements for dapper/petapoco
- Add: WHSAPI: tests for ShouldReinstateMember and ShouldChangeHomeClubWhenResignedMemberJoinsNewClub Mod: WHSAPI: reformat tests membership tests with simple usings
- Mod: Live: Delete checkout code from Test.aspx
- Mod: WHS: use scorecreatedobject instead of createdobject in Score CRUD tests
- Mod: Removed <RestoreProjectStyle>PackageReference</RestoreProjectStyle> from all projects because it doesnt work :(
- Fix: ISVAPI: when posting new members, all fields are saved
- Mod: Core: Downgrade System.ComponentModel.Annotations in core in hopes of fixing dll hell
- Fix: Live: Scoreentry control not showing pickups correctly #29779
- Fix: Org: EN and WA. This is to fix the issue with the missing parameters in the nav.
- Fix: Org: EN and WA. This is to fix the issue with the missing parameters in the nav.
- Mod/Fix: ClubCMS: RegistrationOptions: fix processing of the cost (depending on the user selection), apply required field validation, apply bootstrap classes
- Fix: Connector API: orns because of assuming dateplayed value returned from PrecacheHandicapsForScorecards was never null
- Mod: Live: Attempt at preventing dll hell with <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects> and <GenerateBindingRedirectsOutputType>true</GenerateBindingRedirectsOutputType>
- Mod: ISVAPI: Removed old versions of JWT package
- Fix: Live: GetPotentialCompetitionPartners was not returning the any selected players because of duplicate table aliases
- Mod: Core: Upgrade JWT package to 5.0.1 to match Shared and SSO
- Fix: Ireland ClubCMS: Changed centralmembercode to membercode
- Mod: Ireland ClubCMS: Card Ordering: Added a notification to club when a request has been submitted.
- Fix: ClubCMS: Par NZ: registration options: fix row number display
- Fix: Ireland ClubCMS: Card ordering - changed the status code to submitted
- Fix: Live: Card Fulfilment: Fix for the card requests that's not displaying if request came from web.
- Fix: Org: Card Fulfilment: Changed where the member number is being pulled from.
- Mod: Ireland ClubCMS: Card ordering control.
- Fix: Scheduled tasks Commonservicelocator version matches the other projects
- Fix?: Live: Remove binding redirect for System.ComponentModel.Annotations, remove reference to System.ComponentModel.DataAnnotations in the csproj
- Mod: ClubCMS: Member Signup Confirmation: ProcessMembership: added another layer of checking (isProcessed) before proceeding. This could eliminate the issue for Flexiclub wherein a new member signup result to two cmember records (happened to a few members e.g. https://dotgolf.freshdesk.com/a/tickets/29325; but I wasn't able to reproduce in dev)
- Mod: ClubCMS: ClubMember: GetMemberOrNonAffiliateIdBasedOnMembershipNumberAndLastName: when getting the Member ID, get the original member id. AddLapsedMemberToAnotherClub: if the user is a returning member, update only one cmember record when reactivating their membership (just caught this while doing some testing--it just so happened that the test case probably had bad data (but could still happen in prod))
- Mod: ClubCMS: Member Signup: default select the card payment method option if paying in instalments
- Fix: ConnectorAPI: Redis -> Redis.StrongName
- Mod: WarehouseBuilder: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Mod: SSO: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Mod: Analytics: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Mod: ConnectorAPI: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Mod: CasualGolfAPI: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Mod: TBTransctionProcessor: generated binding redirects
- Fix: API: Redis -> Redis.StrongName Mod: API: <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in RELEASE mode
- Fix: Shared: Redis -> Redis.StrongName
- Fix: Core: remove PrivateAssets="all" from StackExchange.Redis.StrongName Fix: TBTransactionProcessor: Add <RestoreProjectStyle>PackageReference</RestoreProjectStyle>
- Fix: Org: updated Microsoft.AspNet.SignalR.Redis to version="2.4.1", switched to Redis.Strongname
- Mod: ScheduledTasks: switch to StackExchange.Redis.StrongName to match Live/Shared
- [BREAKING???] Mod: DotGolf Live now uses <RestoreProjectStyle>PackageReference</RestoreProjectStyle> in release mode to copy Core dependencies over properly (!!!!)
- Mod: InjectionAttackBlocker: remove unused redis reference
- Mod: Connector API: removed redundant parens
- Fix: Connector API: slow preprint caused by caching handicaps for the wrong date, then having to calculate them all again
- Mod: Shared: remove redundant caching code in RSTeam CalculateCourseHandicap - we already cache these in the calling code
- Mod: Org: svnignore some new dlls
- Mod: ClubCMS: sql: inserts Card Ordering into CWControl
- Mod: Live: WHS now returns adjusted gross when a score is posted to it - updated the Live score hook to reflect this. (github 94)
- Mod: Core: Commit WHS/WHSClient.g.cs
- Fix: Live: When resigning a member and creating them again as a social member, an error was thrown even though the operation succeeded
- Fix: Live: pls fix System.ComponentModel.Annotations again, <bindingRedirect oldVersion="0.0.0.0-4.2.0.0" newVersion="4.2.0.0" />
- Fix: Live: pls fix System.ComponentModel.Annotations
- Mod: WHS: Return adjusted gross after score is created
- Mod: Ireland ClubCMS - fixtures: Added back region and provinces
- Fix: API: exception was being thrown when someone tried to request zero scores for their score listing somehow
- Mod: Ireland ClubCMS - fixture: Added a club search functionality.
- Fix: Live: Playing handicap report now more responsive to font size
- Fix: WHSAPI: Manual adjustments causing recalc to loop infinitely in some cases. Mod: WHSAPI: Removed some ToUniversalTime() calls, they are redundant in the WHS environments (which are UTC) and only serve to mess with Localhost.
- Mod: Ireland ClubCMS - Fixtures: Added the google api places integration with the near field.
- Mod: Ireland IMemberCodeManager updated to latest membership number knowledge per `\\eddy\development\GB&I\Membership Numbers\Membership Numbers across the DotGolf ecosystem v1.0.docx` I've also introduced code to resolve a club ID to a DisplayClubCode (because the two are not identical in IE1)
- Fix: Gracefully degrade in TabMember if we can't reach the WHSAPI.
- Mod: Increase the width of CMember.DisplayMemberCode and NonAffiliate.DisplayMemberCode to accommodate English CDH numbers (10 digits) without a local component.
- Mod: WHS: swagger.g.json
- Mod: ISVAPI: documention fixes
- Mod: ClubCMS: Golf Ireland: Signup Step 3: clear the info message after submitting the email address
- Mod: ClubCMS: Golf Ireland: text updates and add message for Step 3 when user doesn't have an email address
- Mod: ClubCMS: Golf Ireland: text updates
- Add: Ireland: BulkEmail package-deploy.ps1
- Add: Ireland: Bulk Email bindings file.
- Mod: ISVAPI: Allow UK ISVs to get clubs, add Region name to Brief.Club
- Mod: ClubCMS: Golf Ireland: allow to submit a Forgot Password request using an email address
- Mod: ClubCMS: Golf Ireland: style updates
- Mod: ClubCMS: Golf Ireland: style changes
- Mod: ClubCMS: Golf Ireland: My Scores (work in progress)
- Fix: Ireland ClubCMS - Open Fixtures: Fixed the bug where the date dropdown closes when the date range controls are clicked.
- Fix: Org: Adjustments - show low index reset in current adjustments table
- Mod: Ireland ClubCMS - Open Fixtures: Added the Show More Filters function
- Fix: Org: Expire member's whs score cache when an adjustment is created or deleted.
- Fix: Live: DeletedDateUtx
- Fix: Org: adjustments text changes
- Mod: Org: Adjustments tab in TabAdjustments Mod: Org: format changes to member handicap adj report
- Fix: WHS: Adjustment POST/DELETE were using incorrect handicap recalculate date
- Mod: Org: remove old handicap adjustments page link code
- Mod: Org: remove old handicap adjustments page link code
- Mod: Live: POS - log exception if club has no ONLINE payment type but online payments are coming in
- Mod: ClubCMS: My Scores control: work in progress
- Fix: Live: Subs - If member has no active passport, Subs invoice was throwing errors when trying to update the invoice after sending.
- Mod: ISVAPI: Clubs - add ability to get own club or a club by UID Mod: IVAPI: extra Get Course validation
- Mod: ClubCMS: Golf Ireland: if the password reset link is invalid, redirect the user to the Forgot Password page and display a message
- Mod: ClubCMS: Golf Ireland: alert warning icon update and css update
- Mod: ClubCMS: Golf Ireland: Forgot Password: clear the message on every form submission
- Mod: ClubCMS: Golf Ireland: Forgot Password validation message (membership number not registered) changes
- Mod: ClubCMS: Golf Ireland: password requirement: fix checking if name or email was used
- Fix: ISVAPI: missing 'using'
- Mod: ISVAPI: better score validation for cleaner union data
- Add: ISVAPI: Clubs controller. Not exposed to ISVs yet
- Fix: Org: Deleted unused member search code for card fulfilment.
- Mod: ReverseProxy: added S,-,0,1,tournaments.parnz.co.nz
- Mod: ClubCMS: bindings.list: added tournaments.parnz.co.nz
- Mod: ClubCMS: Golf Ireland: Forgot Password and Register: fixed country code hidden field value
- Mod: Removed a bunch of pages that were deprecated when WHS went live.
- Mod: Updated MemberCodeManagerEN to latest understanding of English member codes (9 digits persisted + 1 digit Verhoeff which we don't parse right now)
- Mod: Removed `DisplayClubCode+DisplayMemberCode` references with `MemberCode` as these are equivalent AND we want to deprecate `DisplayClubCode`.
- Mod: Updated CreateDB.sql to latest production database schema.
- Mod: ClubCMS: sql: inserts into CWControl and CWControlProperty
- Mod: Live: Removed hardcoded NZ assets for other unions.
- Fix: golf.co.nz: EnsureOnlyOneActive: have a separate condition for side banners (on the member dashboard page).
- Fix: golf.co.nz: member dashboard page: exception was thrown when this page is accessed by an admin user. I just added a condition which makes sure that the pageState is not null before trying to use it.
- Fix: IE open fixtures: - Fixed the default country id for the club query - Added Dublin as default marker if user didn't allow location - Updated the map icons
- Mod: WHS: Add failing test for ESRs not applying correctly when paging scores. Skip it in test runner because it's not a huge deal right now, but needs fixing
- Mod: ORG: Members dashboard input placeholder update.
- Mod: Disable Connector network diagnostics by default.  We can enable this by adding a DiagnosticsIntervalMinutes setting in the exe.config.
- Mod: ISVAPI: Add IsWithdrawn to full handicaps returned from the API
- Fix: "ClubID is not available yet - the user may not be authenticated?" error caused by my last refactor to Shared.cs.
- Mod: WHS: Extra clause in ESR unit tests to check exactly 20 scores are getting ESR applied
- Mod: Removed NZ from Courses report description
- Mod: ClubCMS: only display the title "Registration Options" if there are Registration Options for the competition
- Mod: Removed hardcoded NZ assets for other unions.
- Fix: Live: Build - missed a file
- Fix: Live: Build
- Mod: ClubCMS: My Scores: work in progress
- Mod: ClubCMS: Golf Ireland: Login: just added TabIndex
- Mod: ClubCMS: My Scores: work in progress
- Fix: Org: Errors caused by noble but doomed attempt to remove gender, nineHole, isHandicapModified, isProfessional from Handicap.cs
- Fix: Public: Errors caused by noble but doomed attempt to remove gender, nineHole, isHandicapModified, isProfessional from Handicap.cs
- Fix: Shared: Errors caused by noble but doomed attempt to remove gender, nineHole, isHandicapModified, isProfessional from Handicap.cs
- Mod: Core: Noble but doomed attempt to remove gender, nineHole, isHandicapModified, isProfessional from Handicap.cs
- Fix: ISVAPI: remove Category from Membership
- Fix: ISVAPI: Removed Category as a required field when creating members.
- Mod: Core: Commit WHSClient.g.cs after WHS adjustment
- Fix: Kounta: ImportQueuedWebhookProducts - Remove product from the "kounta-product-update-" cache if Kounta API returns HTTP 404 (Not Found).
- Fix: WHSAPI: HandicapStatus needed [JsonConverter(typeof(JsonStringEnumConverter))]
- Fix: WHSAPI: extended a timespan to fix unit test on web7 because it's slow
- Fix: WHSAPI: Manual Adjustments now idempotent if posted within 1 min Fix: WHSAPI: commit swagger.g.json
- Mod: SQL: Association - update shortname and code for the unions.
- Mod [Breaking]: ISVAPI: Remove Member Category from ISVAPI Mod: ISVAPI: Document MemberInsert, add unf and dec to full member
- Mod: SQL: Association - added code and shortname columns.
- Mod: WHSAPI: Add HandicapStatus to Full.Handicap so we can expose Withdrawn in ISVAPI
- Add: WHSAPI: Manual Adjustments endpoints and Adjustment.Adjustment column rename (!)
- SQL: Added WarehouseServiceURL in Settings table. Will store the URL in db instead of parameter store.
- Mod: ClubCMS: PGA Tournament Registration: the "text" type of registration question is now in a textarea; save it accordingly
- Fix: Org: Registration: Details popup: display the registration option answer too for "text" type of questions
- Mod: Org: RegistrationOptionsEdit.aspx.cs: if the user leaves the DisplayOrder field empty, assign 1 as the DisplayOrder value
- Fix: Crashbug in Standard.Master.cs - if you access the private field `shared` before the public property `Shared` has been called, `shared` is null and causes ORNS exceptions.
- Mod: Org: updated help text for Registration.DisplayOrder
- Fix: Performance improvements when using the new Clubhouse styles for DotGolf Live.  A whole bunch of permissions code is now superseded by the navigation service. - Removed the IsDotGolfDemoUser; no longer used. - Added DebuggerNonUserCode to StartSheetMonitorJob; it interferes with debugging.
- Mod: Org: updated help text for Registration.DisplayOrder
- Mod: Org: RegistrationOptionsView.aspx: added display of DisplayOrder and sort the registration options by DisplayOrder
- Fix: No longer log localhost data to Vortex - otherwise when we debug stuff and really long requests get logged, alerts get tripped.
- Mod: ClubCMS: tournament registration options: order by DisplayOrder
- Mod: TournamentRegistrations: GetRegistrationOptions: order by DisplayOrder
- Mod: ClubCMS: tournament registration options: sort the options by DisplayOrder
- Mod: Org: Registration Options: included entry of DisplayOrder (which is an existing column in the RegistrationOption table but apparently not used to date)
- Mod: Ireland site - fixtures: Styling updates.
- Add: SQL version of the Verhoeff check digit algorithm.  Plagiarised from https://github.com/rstens/verhoeff.
- Mod: ClubCMS: TournamentRegistration: removed Residency Status (we just save an empty string on this column now since it's a required field in the Registration table).
- Fix: #29476 $0.00 manual journal lines cause errors in Xero (can't do zero GL line items).  Added filter to exclude these lines.
- Fix: Live: Subs: Fix #29317 - Initialize "IsForInstalmentOnly" property value to "False" when adding a new Subs line item to prevent "System.InvalidCastException: Specified cast is not valid." from happening.
- Mod: ClubCMS: Golf Ireland: css update
- Mod: ClubCMS: Golf Ireland: just updated the "Verify your email" email content for Ireland
- Mod: ClubCMS: Golf Ireland: Register: fix resend of verification email (scenario: user has an existing email address)
- Mod: ClubCMS: Golf Ireland: Signup Step 1: fix validation (it was just affected by recent changes for the forgot password form)
- Mod: ClubCMS: Golf Ireland: Password Reset: password requirements: text colour update - requirements not satisfied
- Mod: ClubCMS: Golf Ireland: Password Reset: just updated the field labels
- Mod: ClubCMS: Golf Ireland: just updated the text in the password reset email
- Mod: ClubCMS: Golf Ireland: Forgot Password: add membership number validation
- Mod: ClubCMS: Golf Ireland: Forgot Password: confirmation message
- Mod: ClubCMS: Golf Ireland: Forgot Password design changes: style updates; added another line of text with the signup link below the button
- Fix: ClubCMS: public.asmx.cs: registration options: also add an empty div col 1 if the bit question price is null
- Mod: Golf Ireland site: Added the 3rd party booking url.
- Fix: ClubCMS: public.asmx.cs: MemberExists: oops, caused a new bug in my previous commit
- Mod: ClubCMS: Tournament Registration: few css updates (forgot to include in the previous commit)
- Mod: Club table: added a column for 3rd party booking url. This is an Ireland requirement.
- Fix: ClubCMS: Tournament Registration (used by ParNZ and 5CC): fixed display of registration options
- Mod: Golf Ireland Fixtures: Added google maps.
- Mod: Live: Member score listing slightly faster by using offset+fetch instead of inserting `row_number() over (order by [Order] desc, [ScoreId] desc) [RowNum]` into a new table Mod: Live: Delete nzga_projected from the score listing query and removed placed where it's consumed
- Mod: API: #app-scorecards: Scorecards created via the API should have the "IsSentToApp" column set to True.
- Mod: Org: Remove projected column from member scores table
- Fix: Live: SCA: Fix issue where a card is printed after clicking "Save" button. When creating a digital scorecard from the Tee Sheet, set Scorecard.IsSentToApp column to "True" so we can distinguish against virtual scorecards created from the Kiosk. A scorecard can be created as virtual (not printed) if the club does not allow visitors to print a scorecard from the Kiosk.
- Mod: Performance: GetPotentialCompetitionPartners SQL refactored to remove LEFT JOINs and use the derived table UNION to achieve the same.
- Fix: Performance: Member Score Listing query improved by selecting by @PassportId, because there is only one.  No need to join Score-Passport to filter these records.
- Mod: Reverse Proxy: apply "https" to Waimairi Beach's URLs S,W,0,1,waimairibeachgolf.co.nz S,W,0,1,waimairibeachgolf.nz
- Fix: Org/live: handicap freeze report member page links work again. Mod: Org/live: removed some old world code from MemberHandicapAdjustmentReport
- Mod: POS: Show date scorecard was printed when hovering over the '123 mins' text
- Fix: WHSAPI: when constructing 9-hole scores with a parent, filter by DeletedDate when querying the parent.
- Fix: Public: Handicap graph no longer breaks for people with less than 23 scores
- Mod: ClubCMS: Golf Ireland: Forgot Password: added email address field; client-side validation (one of the fields is required)
- Fix: ClubCMS: Member Directory: GetMembersByFirstLetter: handle missing record in the Image table (null was returned before as MemberPicURL)
- Fix: WHSAPI: Protection against missing auth attributes by denying access by default unless user is admin
- Mod: ISVAPI: Better protection against missing auth attributes by denying access by default unless user is admin
- Fix: Security: Unit test added to check that authorisation is definitely denied if there is an invalid (or no) authorisation for the request.
- Fix: Shared: Digital scorecards - Fix #29116 The system still prints a physical card when you click on the "Digital Scorecard" button.
- Mod: Live: Remove redundant trycatch from WHSScoreDeleted
- Fix: Live: SCORE ENTRY CONTROL FINALLY SHOWS CORRECT ADJUSTED GROSS FOR NOT ATTEMPTED HOLES Mod: Live: Changed some computed to pureComputeds in dotgolf.score.js and added some { deferred: true } for less observable re-evaluations.
- Fix: Added System.ComponentModel.Annotations in web.config
- Fix: Typo "CountyCode".
- Fix: Typo "CountyCode".
- Fix: Typo "CountyCode"
- Fix: Header Rebrand: The pin is problematic on initial load of page because of unhandled cookie.
- Mod: Removed "Due to the 9 hole handicapping transition, scores earlier than 12 February 2015 may not be edited." restriction because WHS has no such restriction.
- Mod: Adweb: correct whs merge messages
- Mod: Trigger dgConfigureNavigation on document.ready so that we can avoid the setTimeout() and race conditions.
- Mod: Adweb: Move the WHS merge code to one place
- Fix: API: #app-scorecards: Set a max course handicap (27 for 9H and 54 for 18H) for players who do not have a handicap.
- Fix: Build: dont use NUglify for string isnullorwhitespace checking
- Fix: Live: TabAdjustments checks if expiry date in null OR WHITESPACE <- foiled by my own auto-complete bypass tactic of having a single space in the textbox.
- Fix: StartSheetMonitorJob throws an exception when the app pool is shut down.
- Mod: To make the nav bar show up faster (to avoid flashing the wrong styles while the page is loading), a) inlined the nav html and b) inlined the data. I've done this in a backwards-compatible way, so if other apps want to ajax the html/data in, they still can with no changes.
- Fix: Nav: Roles are now matched by name, not ID. Fix: Typo "CountyCode"
- Fix: Data.Club.CountryCode refers to Region.Country.Code now - the CountryCode on the Club table is a decoy and should not be used.
- Fix: Public: Change Login / Member ID / Email Address to Login or Member ID or Email Address to avoid confusing members Fix: Public: Social members with a privacy setting can now see their scores and score dates again
- Mod: ClubCMS: Golf Ireland: apply change the designer has recently done on the position of the background image (dots)
- Mod: Live: Update new settings checkbox to control existing AllowDotGolfClubCreateDigitalScorecard setting
- Mod: Live: Update new settings checkbox to control existing AllowDotGolfClubCreateDigitalScorecard setting
- Mod: Live: Add member digital scorecard printing settings. Does nothing.
- Mod: ClubCMS: Golf Ireland: Register/Signup: more form validation mod
- Mod: ClubCMS: Shared: Passport: CreateNewCredential: do the insert only if the exact same record doesn't exist yet
- Fix: ISVAPI: accidental commit of ClubMembersController
- Fix: Core: accidental commit of ClubMemberRepo
- Fix: ISVAPI: scores crashbug. Fix: ISVAPI: use cmember.centralmembercode because the member's is null in IE right now
- Fix: API: #app-scorecards: Use UTC for play date.
- Mod: Header branding for WAL and ENG.
- Mod: ClubCMS: Golf Ireland: signup: client-side validation mod
- Mod: API: #app-scorecards: (1) Remove new method ScoreCard.ScorecardAlreadyCreatedForTeeBooking(). (2) Removed the "and sc.Printed=1" part of the WHERE clause in ScoreCard.CardPrintedAlreadyForTeeBooking() method so it can be used in both for API (digital scorecards) and the Kiosk.
- Mods: IE Fixture: Intitial commit - IE branding of fixture results - Added paging to results
- Add: API: #app-scorecards: Do not allow user to create digital scorecard if (1) An active scorecard is already created/linked to the player's tee booking. (2) The player has an active scorecard (digital or printed) created an hour ago.
- Mod: Live: Use GetScoreV2 for a less slow score hover.
- Mod: Live: Score page hover runs ko.cleanNode before removing hover box to save tiny amount of cpu
- Fix: Live: SIC and score listing hover correctly displays adjusted gross when holes are not attempted Mod: Live: Made GetScore less slow for the score hover. Mod: Live: Cache handicaps for ValidateRoundForMemberOrNonAffiliate when getting a score.
- Fix: API: #app-scorecards: Fix ORNS exception.
- Fix: API: #app-scorecards: Set "restrictToCourseId" parameter value to null when calling TeeBookingHelper.FindFirstTeeBookingLaterToday().
- Add: API: #app-scorecards: When a user is allowed to create a scorecard, set the prompt message to "Create a scorecard at <Club Name>".
- Fix: API: #app-scorecards: If a player creates a digital scorecard, we should linked that to his/her tee booking (if exists).
- Fix: Live: Playing handicap report now shows new future markers
- Mod: #app-scorecards Moved FindFirstTeeBookingLaterToday() over to TeeBookingHelper so that we can use this method from the API (for digital scorecards)
- Mod: Shared: Removed AU code from Marker.cs CalculateAdjustedParForHole
- Mod: ClubCMS: Golf Ireland: password validation mod and improvements (work in progress)
- Mod: ClubCMS: Golf Ireland: added tabindex
- Mod: ClubCMS: Golf Ireland: Signup Step 3: verification email (work in progress)
- Mod: WHSAPI: Do not accept hole scores where PickedUp and DidNotAttempt are both true; they are mutually exclusive.
- FIX: LIVE/API: WHSScoreInsertedUpdated HOOK WAS SENDING NOT ATTEMPTED HOLES AS PICKUPS SO THE ADJUSTED GROSS VALUES WERE WRONG IN WHS
- Mod: ClubCMS - Open Fixtures: Changed the layout of filters based on IE design.
- Mod: Reverse Proxy: added S,-,0,1,members.pupukegolf.co.nz
- Mod: ClubCMS: bindings.list: added members.pupukegolf.co.nz
- Mod: ClubCMS: Member Signup: duration left: tidy up previous commit
- Mod: postbuild step to do archiving via a batch file instead of using Jenkins' (slow) artifacts zip feature.
- Fix: ClubCMS: Member Signup: fixed the display of the number of months and days left for periodic categories but with prorata disabled.
- Fix: Public: Casual golfers have their most recent score details opened for them
- Fix: Public: Casual golfers can see their scores again.
- Mod: ClubCMS: Golf Ireland: signup process steps 2 & 3 work in progress
- Add: API: #app-scorecards: When a user is allowed to create a scorecard, set the prompt message to "Create a scorecard at <Club Name>".
- Fix: Digital Scorecard button wasn't visible for visitors when creating a scorecard from the POG on the day.
- Fix: Live: Opening preprint page to preprint scorecards for a comp is less slow. But still slow. The printing part is also still slow though.
- Mod: ClubCMS: Golf Ireland: signup step 2 WIP
- Fix: ISVAPI: ScoresController was throwing away hole by hole values when adjusted gross values were supplied
- Mod: API: #app-scorecards: Playing partner's signature is not required for now so omit the code to upload the playing partner's signature. Mod: API: #app-scorecards: Removed redundant code to check if a scorecard has already been returned.
- Mod: ClubCMS: Golf Ireland: signup step 1 validation
- Fix: API: #app-scorecards: DG-1428 - When submitting cards through the app, the `Gross_Act` value is empty. This should be (for completed scores) the gross value, and should only be null if the score was incomplete (picked up or not attempted holes).
- Fix: API: #app-scorecards: /submit-scores endpoint - (1) Populate Score.Gross_Act column if all holes have been entered. (2) Score.AllHolesAttempted should be NULL if we are entering a hole-by-hole score. (3) Score.Played[1-18] set to 1 only if a score has been entered for that hole (score or pickup).
- Fix: Removed another DataCache.Query() call with TimeSpan.FromMinutes(0)
- Fix: Live: Weird leaderboard loop seemingly caused by DataCache lookup in UserSecurity causing infinite cache fetch retries (cache object lock not released after app pool recycle?)
- Mod: Live: Stop RecalculateSegmentsForAllFutureCompetitionsOnDefaultMarkers timing out by iterating over each competition in C# instead of with a cursor
- Mod: NEED REVIEW Added more shoddy sql injection attempts to the injection attack blocker
- Fix: Adweb Slicer Import Data page fixed to do async updates and to avoid timeouts.  The import process is now taking too long to complete in a single POST.
- Fix: Public: scoredetail column header alignment was skewed
- Fix: Public: Removed stray set transaction isolation level read uncommitted from BindNewsFeedScoreComments
- Fix: Removed the digital scorecard inserted hook as we do not need it (the reprinted hook takes care of all cases where a new Scorecard row is created where it replaces an older row)
- Fix: Public: Scores widget in MyGolf now auto-opens most recent score details again Fix: Public Performance issue caused by trying to GetMemberHandicap every time we construct a score.
- Mod: Reverse Proxy: added -,-,0,1,parnz.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added parnz.cw.golf.co.nz
- Mod: ClubCMS: TournamentList: just added bootstrap classes to the link buttons (e.g. Register, Details, etc.)
- Mod: Emergency fix to stop scorecard printing crashing.
- Fix: API: digital scorecard sql
- Mod: ClubCMS: Golf Ireland: Signup step 1: work in progress
- Fix: Shared: Hooks: #app-scorecards - Fix SQL syntax error "The multi-part identifier "sc.PlayedWithMemberId" could not be bound."
- Fix: API: #app-scorecards: /save-round-setup - Ensure that the latest scorecard id is used.
- Mod: Message Service: Added missing app.config stuffs to make the service work.
- Mod: Index for performance of DotGolf Message Service.
- Fix: Jenkins: build #app-scorecards
- Fix: API: #app-scorecards - Ensure that the latest scorecard id is used when retrieving an active scorecard.
- Fix: TXTMessageService: insertmessage inserts messages (in C# !)
- Mod: ClubCMS: Golf Ireland: menu markup update to narrow down .dropdown-menu custom style scope
- Fix: TXTMessageService: SendMessage sends a message in C#
- Fix: TXTMessageService: Add Reference.cs to svn
- Fix: Jenkins Build: #app-scorecards
- Mod: TXTMessageService: deleted old app.config
- Mod: TXTMessageService: converted to c#. (!!!). Lets see what jenkins makes of this.
- Add: Shared: Hooks: #app-scorecards - Hooks to update ScoreEntryStage rows linked to a scorecard.
- Fix: marker select control: When switching between men/women in competition setup, an error occurs which stops the popup from re-binding the list of markers to the correct gender.
- Fix: WHSAPI: PCC calculation was counting all eligible-for-PCC scores against a course when checking the 8 player limit, instead of just checking the number of scores played against the course on the day we're calculating for.
- Fix: Whoops, didn't even compile before committing that one...
- Mod: Update Score.Score (if it is null) using the Adjusted Gross value that was calculated by WHS.
- Mod: API: remove old world code in GetProfileAsync/GetOtherProfileAsync that was calling wa_SelectUSGACalcDatesCurrentEffectiveDays
- Mod: API: Remove old-world handicap code from HandicapTxtHandler
- Fix: Live: "+" handicap display in SCA and pre-print
- Mod: Live: No longer need this ConfigureThreadIfNecessary call in TabMember.aspx.cs
- Mod: Public: profileMemberKey lasts 2hrs instead of 30m
- Mod: Live: Add ability to preview nine-hole scores again
- Fix: Live: NEEDS REVIEW Tentative attempt to run ServiceLocator.ConfigureThreadIfNecessary(scope) inside every AsyncHelper.RunSynchronously call so that accidentally nested RunSynchronouslys dont crash Mod: Live: replaced ServiceLocator.Thread = scope with ServiceLocator.ConfigureThreadIfNecessary(scope)
- Fix: Header rebrand: Active link behaviour fix.
- Fix: Live: Nested asynchelper crap
- Mod: Live: attempts to make member search go faster
- Fix: Bulk Email: Revert the API url to previous setting.
- Fix: Love Golf Play Admin: Checkin link fix.
- Fix: Activity Tracker: Checkin link fix.
- Fix: Analytics: Solution fix.
- Fix: Bulk Email: Solution build fix.
- Mod: Header rebrand: This only affects unions that's not NZ.
- Fix: Live: Changed default score listing size to 25, which is 5 less than the WHS page size. Prevents score 30 showing as Pending sometimes if the member's record has duplicate scores
- Mod: API: #app-scorecards: Logging of exceptions again.
- Mod: API: #app-scorecards: Log exception.
- Mod: ClubCMS: sql: Golf Ireland: inserts into CWControl, CWControlProperty, CWLayoutSection
- Mod: ClubCMS: Shared: Golf Ireland: created an Ireland email template (e.g. used for the password reset email)
- Add: ClubCMS: Golf Ireland: Register control initial commit
- Mod: ClubCMS: Golf Ireland: Forgot Password: just update the alert style
- Mod: ClubCMS: Core: Golf Ireland: MemberCodeManagerIE: update regexCentral from 10 to 8
- Fix: Live: Missing POS tab for OHOPE
- Mod: Very slight tweaks to the POG styles (box shadow and made borders a little more subtle for a more streamlined look)
- Mod: POG: Added "Digital Scorecard" button (if the club has the ASCE product) to create (but not print) scorecards.
- Fix: Live: Kounta categories now updated in the cache via webhook
- Fix: Jenkins build: #app-scorecards - File not included in the previous commit.
- Add: API: #app-scorecards: Added new setting 'DotGolf.Settings.Scorecard.AllowDotGolfClubCreateDigitalScorecard' - When set to true, allows club members to create a digital scorecard through the DotGolf app. Fix: API: #app-scorecards: Start tees should be sorted in ascending order.
- Fix: golf.co.nz: news article share link: removed extra spaces
- Mod: ClubCMS: Golf Ireland: checkbox fixes
- Fix: ServiceLocator bug: If we already have an instance of IServiceLocator we do NOT set one on the thread-local property.  This is to avoid accidentally populating this value when we should not (such as when AsyncHelper.RunSynchronously decides to run something inline (synchronously) and not on a new thread).
- Fix: Fix: revert asynchelper change
- Fix: revert asynchelper change
- Mod: ClubCMS: sql: CWControl and CWControlProperty inserts
- Mod: ISVAPI: remove common service locator
- Fix: AsyncHelper.RunSynchronously sets thread servicelocator correctly now.
- Fix: WHS Score hook wasn't firing due to a ServiceLocator problem when run in a background thread (as part of AsyncHelper.RunSynchronously)
- Mod: ClubCMS: Golf Ireland: login: updates on the alert message after password reset
- Mod: ClubCMS: Golf Ireland: password reset: added password requirements
- Mod: API: #app-scorecards: Put back original messages.
- Mod: #app-scorecards: Insert TBStartTee records on-demand, as clubs require them.
- Fix: Rebrand: The background colour is not being applied because of !important in jquery.
- Mod: Reinstated WITH INDEX and LOOP joins; removing these had a detrimental impact on performance (reads and cpu in particular)
- Mod: Performance: wa_TBSearchByClubDay updated to only show clubs you're a member of (when searching home regions, RegionId=-3). Mod: wa_TBGetPlayerFriendsEligibility refactored to make it go around 9 times faster (cutting down a lot of IOPS)
- Add: API: #app-scorecards: Added new prompt message for people who has not checked-in at the club.
- Fix: Live: XeroSubsSync: update the club settings checker (either AccXeroBankAccountIDForExportedPayments or AccXeroBankAccountIDForDirectDebitDeposits should be present, not necessarily both). (Note: In the background Xero Sync, we actually export online payments, not DD payments. Maybe in the future we can also filter the export by Payment Type ID... e.g. xero sync will export online payments, and the DD export code will only export dd payments...)
- Fix: QR Code checkin: Added a validation to the purpose of visit.
- Fix: #qr-code-checkins: Changed code to VISITING_CLUB_FACILITIES, not VISITING.
- Mod: QR Code Checkin: Added club fullname and terms and conditions.
- Fix: TabCourses: A course wasn't selected in the Course Handicap Calculator when the page first loads, triggering the Required validator and stopping the user to save changes to accept courses unless they select a course in the bottom combo first (workaround). Fix: TabCourses: Validation groups weren't set between the two forms on this page, which meant the Save Changes button triggered validation for the course handicap calculator.
- Fix: Public: Issue where a score failed to constructed with a Code
- Fix: Member: fix errors when viewing fully resigned member
- Fix: Live: Casual golfers were being returned before affiliates when searching by name
- Fix: API: #app-greenfee-payments - Added spacing. Green fee description was showing "18 HolesAdult" instead of "18 Holes Adult".
- Fix: API: #app-greenfee-payments: Fix green fee display name.
- Add: ClubFeeDetail.ClubID column (commented out for now)
- Fix: Jenkins: #app-greenfee-payments
- Add: API: #app-greenfee-payments: /list-green-fees endpoint - Advanced green fees (enabled for unattended app payments) is now supported.
- Add: Live: #app-greenfee-payments: Added "IsAppGreenFeePayment" setting for Advanced green fees.
- Add: ClubCMS: Golf Ireland: password reset initial commit
- Add: ClubCMS: Golf Ireland: forgot password control; style updates
- Mod: ClubCMS: Golf Ireland: zLogin: updated the markup and also the rendering of links to pages
- Mod: ClubCMS: Golf Ireland: zLogin: style updates; added tooltips
- Mod: ClubCMS: responsive UContent: just added a new property called DisplayOnlyOnPageNames
- Mod: #qr-code-checkins: Print this page - now a link. Fix: csproj missing an image.
- Mod: ClubCMS: DBUtilities: GetSectionControls: exclude page controls that are supposed to be displayed on select pages only (Finally, there'd be a way to "reuse" a page control on select pages. i.e. Add it to the _Global page and define page names in the DisplayOnlyOnPages control property.)
- Add: #qr-code-checkins Submit code added.
- Mod: Bulk Email: Added Ireland email header.
- Mod: #qr-code-checkins CLUB CMS Control: CV19 checkin form.
- Mod: #qr-code-checkins CLUB CMS Control: CV19 checkin form.
- Mod: ClubCMS: DBUtilities: GetSectionControls: exclude controls which are not supposed to be displayed on the given page (if the page name is in the HideOnPageNames control property setting)
- Mod: ClubCMS: Golf Ireland: menu and footer: added hideOnPageNames property
- Add: #qr-code-checkins Stylesheet to allow printing the check-in form - this produces a full page QR code that can be printed and put up a the club for touch-free check-ins.
- Add: #qr-code-checkins QR code generation to Covid19 check-in form.  Does not print yet, that's next.  The URL generated is https://dotgolf.co.nz/cv19?c=290
- Fix: #app-scorecards: /submit-scores endpoint - Incorrect hole-by-hole scores when choosing a starting hole other than "Hole 1".
- Fix: Another SqlTraceToElastic regex fix to allow numbers with decimal points.
- Fix: SqlTraceToElastic regex adjusted to properly clean SQL for wa_TBSearchByClubDay (this affected vortex reporting on this procedure)
- Fix: golf.co.nz: Error page did not correctly get the user's IP, so the DotGolf version of the exception page never showed up for us.
- Fix: Catch Task.Wait exceptions if the wait is aborted (such as when the app pool is shutting down)
- Mod: ClubCMS execution timeout set to 30s (I suspect it was 360s before causing unnecessary locks) - Reverse Proxy is already 30s.
- Mod: Deprecated PerformanceTrackerModule.  It's been replaced with ElasticTrackerModule which logs requests straight to the tl-* index on Vortex (Elasticsearch). This eliminates the need for the NZ_TrackerLog database on DEV4 as well as the firewall setup to allow traffic to get sent here.  It may also save us some bandwidth since Vortex lives in Sydney.
- Mod: Deprecating PerformanceTrackerModule.
- Mod: Deprecating PerformanceTrackerModule.
- Mod: Deprecating PerformanceTrackerModule.
- Mod: Deprecating PerformanceTrackerModule.
- Fix: Removed extra logging - discovered the problem was with AWS inbound firewall rules for Vortex - only allowed web1's nat gateway to talk to it on port 9200.
- Fix: AppPerformanceTracker: Suspect race condition, so added a 10s timeout on the wait handle.
- Fix: Moar logging.
- Mod: Log more detailed Elasticsearch exceptions to try and diagnose the AppPerformanceTracker errors.
- Add: Logging to see why ClubCMS AppPerformanceTracker is not working.
- Mod: Moved ClubCMS to new ElasticTrackerModule.
- Mod: Moved DotGolf Live/Edge to new ElasticTrackerModule.
- Fix: AppPerformanceTracker had a loop issue which caused it to throw away some elasticsearch entries.
- Mod: #app-scorecards: Updated check-in prompt messages. We will put back the original messages when we are at alert level 2.
- Mod: sql: ClubCMS (Association): CW_UpdateMember: removed saving of Fax; allow saving of member details if coming from an association site (e.g. NZG, GI)
- Mod: ClubCMS: Golf Ireland: edit member details markup updates and corrections (also removed fax field); css updates; also applied mobile styles for zlogin
- Mod: Renamed a couple fields to make it the same as TrackerLog of yesteryear.  This way we can put an index pattern in Kibana to union the old and new indices.
- Fix: AppPerformanceTracker wasn't logging all requests to Elasticsearch, dequeuing requests that were not logged where batch sizes were less than 1,000.
- Mod: Moved Public to ElasticTrackerModule to skip the DEV4 trackerlog inserts (which were a bottleneck).
- Fix: Jenkins: #app-scorecards - again... missed the new file.
- Fix: Jenkins build: #app-scorecards - New file not included in the previous commit.
- Mod: #app-scorecards: /save-round-setup endpoint - Added ScorecardSettings in the response.
- Fix: API: Initialise the cache so that code that use DataCache will actually cache stuff.
- Fix: Performance when saving scores with many competition types on them, due to new WHS checks.
- Fix: WHSAPI: RunPCC and RecalcHistory utilities were missing the MemoryCache packages, which meant PermissionEnforcer could not be instantiated.
- Fix: Jenkins build: #app-scorecards - file not included from the previous commit.
- Add: #app-scorecards: /load-player-scorecard endpoint - Added Message of the day.
- Fix: #28793: Live: Subscriptions: Bulk Email Statements: EmailAddressFrom should be the club's email address, and the EmailReturnPath should be no-reply@golf.co.nz (not the other way around)
- Fix: #app-scorecards: Crashbug changing someone's marker.
- Fix: WHS: updating existing combined score to be ineligible for handicapping now un-combines it correctly
- Fix: #app-scorecards: DotGolf.Live build fixed (signature change in DotGolf.Shared)
- Mod: #app-scorecards: Refactored to remove copied code and use DotGolf.Shared apply competition selections code instead.
- Mod: #app-scorecards: Moved competition [de]selection code into DotGolf.Shared (Results/Helpers) so that we can call it from the API rather than copying/pasting this complex business logic into another area.
- Mod: Bulk Email: This is part of the email optimisation. Instead of inserting the whole html body to the Email table, we are now only inserting JSON objects.
- Mod: #app-scorecards: Scorecards from clubs without the ASCE product are no longer displayed in the app.
- Fix: #app-scorecards: Don't force members of UFP clubs to pay a green fee :)
- Mod: #app-scorecards: Don't let the app enter scorecards that are part of a multiplayer competition.
- Fix: #app-scorecards: Allow user to get another scorecard. Updated prompt messages.
- Fix: WHS: build - missed a file
- Fix: WHS: Do Not Combine Ineligible Scores
- Fix: Jenkins build error: #app-scorecards - missing from previous commit.
- Add: #app-scorecards: Added "AppGreenFeePaymentEnabled".
- Mod: ClubCMS: Golf Ireland: added the sign up alert and footer note to the login control
- Fix: #app-scorecards: Should allow the user to create a scorecard after submitting a score.
- Mod: #app-scorecards: /markers endpoint - Added SlopeRating and TotalPar in the response.
- Mod: ClubCMS: Golf Ireland: Login: if the user is logged in, redirect to the corresponding landing page (for members and admins)
- Mod: ClubCMS: Golf Ireland: rEditMemberDetails: made this control usable by an association website; tidy up the code a bit (didn't do much changes yet as requirements could still change)
- Fix: #app-scorecards - A person can have only 1 active scorecard at any time. Set CanCreateScorecard=false if the user has an active scorecard.
- Mod: WHS: Test for Not Combining Ineligible Scores
- Add: #app-scorecards: New endpoint to allow creating digital scorecards (but not print them)
- Fix: Live: UpdateMarkers was not putting future markers live (>1 day away)
- Mod: #app-scorecards: Refactored the main scorecard print method into DotGolf.Shared so that we can call it from the API. This dragged a whole lot of POS and FeeSelectorControlService stuff with it, so hopefully I didn't break anything in the process.
- Fix: Live: When a club accepts course changes, put the marker live immediately
- Add: #app-scorecards: New markers endpoint to retrieve a list of markers for the club where the member is checked in.  We can use this to create a digital scorecard, once they have selected a marker.
- Mod: #app-scorecards: Had to refactor UserSecurityId out of here.
- Mod: #app-scorecards: More factoring.
- Refactor: #app-scorecards: Moved list markers code from Kiosk into DotGolf.Shared.Data.Marker class so we can re-use it from the API for digital scorecards.
- Mod: #app-scorecards: Prompt message adjusted to include club name.  "Pakuranga does not allow digital scorecards."
- Fix: Check-ins: Search was slow because it included resigned members; now searching live only for speed.
- Add: #app-scorecards: Club product ASCE for App score entry
- Fix: MemberQuickSearchService: PassportId was not being returned, even though the field existed.
- Fix: ISVAPI: Ireland uses MemberCodeManagerIE
- Mod: Bulk Email: Added recipient filters.
- SQL: Bulk Email: Filters using stored procs.
- Fix: ISVAPI: Ireland uses MemberCodeManagerEN instead of NZ
- Fix: API Utils asmx fix: Added the System.ComponentModel.Annotations in the prod config.
- Fix: #app-scorecards: (1) Missing the "from CheckInHistory" in the SQL statement. (2) checkedInatClub was not initialized.
- Fix: #app-scorecards: Oops, missed a file.
- Mod: ISVAPI: change documentation version number
- Mod: ISVAPI: change documentation version number
- Fix: ISVAPI: Make visitor search and clubmember fetch faster by using GetMemberHandicaps. Fix: ISVAPI: Stop rate limits from crashing things
- Fix: ISVAPI: clarify sample credentials
- Add: #app-scorecards: load-active-scorecards endpoint returns flags saying whether the app allows a digital scorecard to be created for the club, based on products at the club and whether a UFP fee (if applicable) has been paid.
- Mod: ClubCMS: Golf Ireland: my scores initial commit
- Fix: Utils web service: Package error.
- Mod: Bulk Email: Added recipient filters.
- Fix: Public: password reset by email wasnt working.
- Mod: Live: Invoice: added display of the billing card (if the member has one); and grouped it under "Payment Method" along with the Direct Debit tick box
- Mod: Live: Member: Subscriptions Tab: Billing Card: just added the display of the expiry date
- Mod: Live: Invoice: added display of the billing card (if the member has one); and grouped it under "Payment Method" along with the Direct Debit tick box
- Mod: Live: Member.cs: GetSubsBillingCard: just added ExpiryDateStr in the returned values
- Fix: Needed some assembly references in Web.config.Production to make DotGolf.Core references work properly.
- Add: ClubCMS: Golf Ireland: zLogin control: work in progress
- Fix: API: Score entry app: #app-scorecards Submit scores endpoint - Make sure to pass the Transaction object when executing a query within the context of a database transaction.
- Mod: ClubCMS: Golf Ireland: just organised the footer and mailing list api a bit
- Fix: Jenkins build - #app-scorecards accidentally removed "PlayerSignature" field.
- Mod: API: #app-scorecards: Submitting scores - Added new field "AttesterInfo" for storing the attester's full name or membership number (if he/she is a member).
- Mod: ClubCMS: Golf Ireland: login control: work in progress
- Fix: MarkerUID was incorrectly generated (same value was reused) when you insert markers for multiple courses in the same INSERT batch (this happened in the Ireland demo data insert script).
- Mod: Org: Put all course changes live immediately (now that the course data csv download is gone)
- Fix: Hardcoded "ire" country code.
- Add: ISVAPI [MaxLength] attributes for all visible models.  Now we have maxLength documented in Swagger, and POSTed values will be validated by model validation before processing.
- Add: EzPoco modified so a Schema class is now generated containing column maximum length info for all varchar/string columns.  For example you can now reference DotGolf.Core.Poco.Schema.Club.Name.MaxLength for a constant int value indicating the maximum length of the Name column on Club.
- Fix: ClubCMS: Member Signup: display the number of days in whole number (no decimal)
- Mod: ClubCMS: rMemberSignupConfirmationV2.cs: just added the new member's mobile number in the DotGolf Live message created
- Mod: ClubCMS: Member Signup form: if the user is paying in instalments, the only allowed method of payment now is by credit/debit card.
- Fix: IRE code deprecation: Forgot to update NonAffiliate records with old country code.
- Fix: Ireland "IRE" country code deprecated and replaced with "IE".
- Fix: Ireland country code is now "IE".
- Mod: ClubCMS: Golf Ireland: login control initial commit
- Mod: sql: comment the entire script (hold off implementing this as per Matt)
- Fix: #26063 PGA: When sending a bulk email that is mostly made up of Mailing List recipients AND those recipients are more than 200 in number, the paging in the API is broken in a way that the same recipients get returned on each page (because of it ordering by a MemberId only, which is null for mailing list recipients).  Fixed this by adding an explicit ORDER BY EmailAddress, MemberId, NonAffiliateId and MailingListRecipientId.
- Mod: sql: CWEmailRecipient: UQ_Recipients: mod on the previous commit: just updated the EmailComposeId
- Add: CWEmailRecipient unique nonclustered index: to prevent duplicate recipients for a particular emailcompose record
- Mod: Slicer: New index to speed up slicer merge for TBP transactions. Fix: Slicer: Rollback Batch threw an FK violation because of UFP transactions; had to update gs_ReversePaymentBatch.
- Fix: ISVAPI country code now validated
- Fix: Horrible bug where score objects could not construct
- Fix: Public: potential ORNS in adjusted gross fix
- Fix: API: Revert projected text change
- Fix: API: potential ORNS in adjusted gross fix
- Fix: HoleScoreCollection uses correct handicap to calculate adjusted gross
- Mod: API: Revert svn rev nos 37365, 37367.
- Fix: API: incorrect adjusted gross in score detail page
- Fix: API: incorrect adjusted gross in score detail page
- Mod: Public: Fix bunker issue github 92
- Fix: API: Do not convert date to LocalTime.
- Fix: API: /list-future dates endpoint - Members of non-TBP clubs are not getting any suggested booking dates even though the club has a tee sheet opened for members-only.
- Fix: Public: incorrect course handicap used in score details widget
- Mod: ClubCMS: Golf Ireland css: back to top
- Mod: ClubCMS: Terraces4: added centerFullWidthLowerPanel
- Fix: WHS: revert accidental commit
- Fix: WHS: Default IsLowHandicapIndexReset to 0, rename ManualAdjustments test class
- Fix: WHS: Low handicap index logic Add: WHS: 'M' Adjustments, and AdjustmentUID + unique index
- Fix: Check-in asset group relaxed so all users can access this.
- Fix: StartSheetMonitorJob: If a club has tags for more than a single date, the monitor job crashed and got stuck in a neverending loop.
- Fix: StartSheetMonitorJob: Cleanup comments, removed Redis locking (don't need it for now).
- Fix: Live: Member score count in score in member ribbon tile
- Fix: ISVAPI: nz doc should ask for nz county code
- Fix: ISVAPI: generated files messed up because of internal access modifier
- Mod: ISVAPI: documentation changes at runtime based on the environment.
- Fix: API: Score entry app: /submit-scores endpoint Should return an unsuccessful response if we fail to apply scores to competitions (the card was entered into).
- Add: ISVAPI: Documentation link in swagger HARDCODED TO UK RIGHT NOW!
- Mod: API: Remove debug logging in search-slots endpoint
- Fix: API: /search-slots - App guest users do not have auto-bookings. Return an empty list in the ListUserAutoBookings().
- Fix: SignalR start sheet - disable Redis locking because it looks like the Redis-SignalR backplane isn't configured properly.
- Mod: ClubCMS: bindings.list: added mcleansislandgolf.co.nz and www.mcleansislandgolf.co.nz
- Mod: Reverse Proxy: sites: added S,W,0,1,mcleansislandgolf.co.nz
- Fix: Adding legacy StartSheetMonitor back in caused build to break because of new namespace.
- Mod: Temporarily put StartSheetMonitor.ashx back to avoid breaking clients in-flight.  Once the new method has rolled out we can revert this commit.
- Fix: Org: When updating clubs, club website link can have subdirectories
- Fix: Invalid tokens threw a 500 error which caused nginx to return a gateway timeout.
- Fix: Org: When updating clubs, club website link can be https now
- Mod: WHS: removed an unnecessary line of ESR deletion in the member unmerge.
- Fix: WHS: merge wasnt deleting old ESR adjustments.
- Fix: SignalR start sheet: in dev/debug mode we want to fire up the job on localhost without bothering to get a lock first, otherwise we won't get the messages sent (because we don't have a common SignalR backplane in dev mode).
- Fix: Ooooold bug in Start Sheet where booking information does not get updated if there are no TimeSlotEntries (bookings) in the timeslot.
- Mod [MAJOR]: SignalR to replace StartSheetMonitor.ashx.
- Fix: Live: Member score count now correct when the member has a linked nonaffiliateId. Fix: Adweb: Expire score cache in redis for member after merging.
- Fix: API: ORNS occurs when trying to convert NULL address fields to proper case.
- Fix/Mod: ClubCMS: rMemberSignupV2: display a warning message when there are no categories set up in DotGolf that allow online payments instead of throwing an error
- Fix: WHS: merge wasnt doing a recalculate on the correct member
- Mod: Live: Removed /Teebooking/StartSheetMonitor.ashx because we only use /Teebooking/NextGen/StartSheetMonitor.ashx now (the old POG is no longer in the solution)
- Mod: Bump the Connection Pool size to 500 (default is 100) to see if I can fix the Live pogo issue.
- Fix: Performance: TabMember going slow because of two handicap index lookups (today and tomorrow) - paralleled these. Fix: Also Ethnicity table contents should be cached, this has never changed.
- Fix: API: Unattended green fee payments - Fix green fee display names.
- Fix: WHSAPI: Broke build.
- Mod: sql: ClubCMS: set the default settings for existing controls
- Mod: sql: ClubCMS: set the default settings for existing controls
- Mod: ClubCMS: just updated some of the default values of existing control properties
- Mod: WHSAPI: Performance improvement for ElasticSearchLogger - new BulkLogDataAsync() call on IWiretapLogger will use Elasticsearch bulk calls to log requests instead of doing them one-by-one. When we do bulk score imports or the API gets really busy, the single Elasticsearch calls could not keep up.
- Mod: sql: ClubCMS: set the default settings for existing controls
- Mod: API: App check-ins - forgot to include phone number.
- Mod: API: App check-ins - Added Email and Address fields in the GetUserDetailsResponse.
- Mod: ClubCMS: rMyAccount: paymentConfirmationPage: just updated the default value to My Account Confirmation
- Fix: Adweb: Merging scores now ensures the merge target gets an un-deleted WHSMemberUID
- Fix: Check-ins: Address not saved correctly in Live.
- Fix: Adweb: Merging members now merges in WHS too
- Fix: golf.co.nz club details page - Check the course handicap displayed is using the new playing handicap calculation. Rename the label from course to playing. Change a negative playing handicap to be a "+"
- Fix: WHS: Merge member: Score table updates not using an index and causing blocks.
- Add: WHSAPI Index to speed up sync.
- Mod: Slicer: PaymentReconciliation.aspx.cs: updated the GOTG_DOTGOLF_COMMISSION_FRACTION from 0.085 to 0.05M (this is effective until 21st July 2020. It's NZG's initiative to lower the commission to 5% and this all goes to DotGolf to cover the online fees)
- Fix: Adweb: Member search errors
- Fix: SQL: Unattended green fees - Fix empty results for TBP clubs.
- Fix: API: /list-greenfees endpoint - Fix empty results for TBP clubs.
- Fix: API: Unattended green fees: Fix /list-greenfees endpoint - Should return regular Standard green fee rates if there is no public holiday rates configured for the club.
- Mod: sql: ClubCMS: create CWList and CWListItem tables
- Mod: sql: ClubCMS: CWControlProperty updates
- Add/Mod: ClubCMS: Golf Ireland: accordion knockout control
- Mod: sql: ClubCMS: included accordion knockout control insert
- Bulk Email. Added email recipient filters. Copied what's in SPAM2 compose page.
- Bulk Email: Added email recipient endpoints.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: just added a default value to the MyAccountPage control property
- Mod: ClubCMS: rMyAccount: just added a default value to the TermsAndConditionsPage control property
- Org: Club detail update. Added longitude and latitude. Removed the old contact email fields.
- Mod: ClubCMS: rMyAccount: display a message instead if the club doesn't have the SUBS product
- Fix: Course Changes should be visible to all (old Aus remnant)
- Fix: Course Changes should be visible to all (old Aus remnant)
- Add: SQL: wa_ClubNameMatch - Set HasTBP to false if a club does not have a tee sheet for the day.
- Fix: public: Show number of scores in score listing
- Fix: public: Show number of scores in score listing
- Mod: Check-ins: only consider last 4 hours worth of checkins when returning checked-in status.
- Mod: ClubCMS: Golf Ireland sub-menu style updates
- Mod: ISVAPI: Doc change to clarify asBeforeUTC
- Mod: API: Unattended green fees - Waived the $2.00 transaction fee.
- Mod: sql: ClubCMS: added insert of sub-menu knockout control
- Mod: sql: ClubCMS: rMyAccount control properties: just updated a few default settings
- Mod: ClubCMS: rMyAccount: set default value of enableCreditCard to true; set default value of enableChangeToInstalment to false
- Mod: ClubCMS: rMyAccount: when the Account for Exported Payments (AccXeroBankAccountIDForExportedPayments) is not set up, display a message instead of throwing an error.
- Mod: ISVAPI: Allow readonly token to work + doc changes
- Add: DotGolf-Only Bulk Course Import utility that sucks in a CSV file and puts new courses/markers into the Course Changes area for the club to verify. Mod: IMarkerUpdated hook now supports creating new courses in WHSAPI (if they don't exist and they match the union database country).   - I've also done a mod to WHSAPI to make sure POST courses is idempotent; this wasn't the case before.
- Fix: WHSAPI: POST courses should be idempotent (corrected and added unit test)
- Mod: ClubCMS: Golf Ireland: added sub-menu knockout control; terraces 4 template updates; a few other minor updates
- Mod: Live: Subscription Line Items: add IsForInstalmentOnly setting; also put all three checkboxes in one column only
- Fix: Maximum hole length on a course increased to 900 metres.
- Mod: EmailViewer will now do the email compose body replacement too, so "view online" links will work.
- Fix: Whoops, other things were using this method; renaming back.
- Mod: Removed CWEmailTemplateId from Email table and replaced with CWEmailComposeId reference.
- Mod: Removed CWEmailTemplateId from Email table and replaced with CWEmailComposeId reference.
- Add: Check-ins: Address field. Fix: Check-ins: Purpose "VISITING_CLUB_FACILITIES" and not "VISITING" to be consistent with the app.
- Add: Check-ins: Basic promo tile to let people know we have this feature on the DotGolf app as well.
- Add: Check-ins: Check-in form added to main nav bar with Covid19 styling. Add: Check-In Register report to view check-ins for a date and club.
- Mod: Live: Category Settings page: just updated the help text on the Required Upfront Amount
- Fix: Live: Subs: Invoice & Xero Settings page: just fixed a typo error in the help text
- Fix: Check-ins: LocationText fixed to not have "- -".
- Add: Public: Redirect URL for app terms and conditions page.
- Mod: ClubCMS: Golf Ireland: get menu sql script: include menu items without a corresponding page linked to it (e.g. Level 1 menu items)
- Add/Mod: ClubCMS: Golf Ireland: tab menu knockout control
- Fix: Public: Hide existing player name in teebooking if that player has highest privacymode
- Mod: sql: ClubSetting: apparently, there's already a default constraint for EnableSyncReceiptToXero and EnableSyncInvoiceToXero in NZ1. I just modified the script to match the name of the default constraint already in prod.
- Fix: Live: Subscription Fees: fetch / display, and save the DotGolf-only settings for DotGolf users only
- Mod: golf.co.nz: My Golf: My Profile: make the Date of Birth a required field if the user is editing the profile. The minimum date required is 1902-01-01.
- Mod: Live: Invoice & Xero Settings: DotGolf-only section: save the changes on the Xero sync settings for DotGolf users only
- Mod: Live: Invoice & Xero Settings page: add a DotGolf-only section where we can enable invoice & payment sync (export) to Xero
- Add: API: New endpoint /regions/all to retrieve all regions. The list of regions in the response is similar to what is being displayed in the golf.co.nz website.
- Mod: sql: ClubSetting table: just adding a new default constraint (0) to the existing ClubSetting.EnableSyncInvoiceToXero and ClubSetting.EnableSyncReceiptToXero
- Mod: sql: Club Setting table: just altered the length of the new column to be added from varchar(50) to varchar(80)
- Mod: Live: payment export: use the new Payment Account ID (GUID) when exporting online payments to Xero (instead of the Account Code)
- Mod: Live: Shared.Subscriptions.cs: just added a space or "new line" to the online payment message
- Add/Mod: Live: Category: added more description to the Required Upfront Amount using a help pop-up.
- Mod: Live: Invoice & Xero Settings page: added the configuration of the Online Payments Account (Xero Bank Account) setting through the UI.
- Mod: sql: ClubSetting table: add two new columns: AccXeroBankAccountIDForExportedPayments and AccXeroBankAccountNameForExportedPayments. We will be using these instead of the AccXeroAccountCodeForExportedPayments (account codes are optional and could be changed easily).
- Fix: Activity Tracker: Added the S3 in the startup services.
- Fix: Love Golf Play: Fix for the display name in the header.
- Fix: Love Golf Play: Saving passportid to session.
- Fix: Love Golf Play: Rebrand is not displaying when logged in from SSO. Saved the association id in session.
- Fix: The instance  registration 'Amazon.ElastiCache.AmazonElastiCacheClient' can support SingleInstance() sharing only.
- Fix: Public: Sharedmodule registers IAmazonElastiCache to fix Public
- Fix: Casual golfers get old score widget in WHS. replace some bools expressions with pageState.GetState() checks
- Mod: ClubCMS: Golf Ireland: breadcrumb menu: missed to include this in the previous commit
- Mod: sql: ClubCMS: added insert of breadcrumb menu knockout control
- Mod/Add: ClubCMS: Golf Ireland: breadcrumb menu knockout control
- Add: Check-ins: Address field to checkins endpoint and database table.
- Fix: ActivityTracker: change startup to reflect moving aws setup to AddDotGolfCoreServices
- Fix: Jenkins, after commit of shame
- Fix: Core: AWS DI in CoreModule, fixing Redis in public in next
- Fix: Love Golf Play admin solution fix.
- Mod: Love Golf Play admin rebrand.
- Mod: Live: freeze expiry message - reverted change to message
- Mod: Love Golf Play admin rebrand.
- Mod: Live: handicap freeze expiry message less confusing, but sufficiently ambiguous that we dont get in trouble with timezones.
- Fix: RedisConnectionBuilder was instantiating AmazonElastiCache and not using DI to get an IAmazonElastiCache reference.  For apps where we don't call ConfigurationProfileResolver.ConfigureAWS() this means that we don't use the proper AWS profile.
- Fix: ISVAPI unit tests race condition caused MockAppResolver not to get reliably injected. I suspect ConfigureTestServices() wasn't doing the right thing if the Environment is not set to "Test".  Also ConfigurationProfileResolver was interfering when set to anything other than Development (Redis connection failures).
- Fix: ISVAPI unit tests are passing now (apart from race condition that I will commit shortly) - A few tests were checking Handicap Index values where these are now set to NULL (new api_AddScore behaviour in WHS mode) - A couple of tests were checking Adjusted Gross values returned when these are no longer calculated (in hole by hole mode)
- Fix: Live: nine-hole scores always show 9h indicator even when not fetched from WHS
- Fix: ISVAPI score inserted/updated/deleted hook didn't work for deleted scores, so a bunch of scores are now live in WHS but deleted in union land.
- Fix: API: SQLException "Incorrect syntax near '1'".
- Mod: ReverseProxy: apply https to redwoodparkgolf.co.nz
- Fix: Public: scores page logged in user check ORNS
- Fix:Fix: Public: privacy mode Hide All no longer hides member's scores from themselves
- Add: Check-ins: /api/v1/check-in/status endpoint will return some status info on your last check-in (if it was within 12 hours).
- Mod: API: MyGolfController: /search-for-courses endpoint - Make endpoint available for app guest users.
- Fix: build
- Mod: sql: ClubCMS: add VideoUrl column to CWImageContent table
- Mod: sql: ClubCMS: CWControl insert (zMailing List Subscribe knockout control); and CWControlProperty inserts
- Fix: API: score listing page graph now uses Member.GetWHSScoreListing (which caches in redis) to hopefully fix database hammering
- Mod/Add: ClubCMS: zMailing List knockout control
- Fix: Removed HandicapProviderParallel - don't need it anymore (and it won't compile because HandicapProviderLegacy is now internal to DotGolf.Core).
- Mod: ISVAPI upgraded to WHS Handicap Provider.   Unit tests are still failing though.  Hopefully @Marcus will fix them for me :)
- Fix: Analytics: Changed the position of clearing the session when logging out.
- Mod: Analytics: Header rebrand.
- Cleanup: Removed empty try..catch
- Mod: DotGolf.Core dropped back to JWT v4.0.0 to make other solutions happy.
- Mod: Dropped System.ComponentModel.Annotations back down to v4.5.0 to help other projects that are failing to build.
- Fix: Public: privacy mode Hide All no longer hides member's scores from themselves
- Add: DotGolf.Core WHSClient generation using NSwag.
- Mod: ClubCMS: Golf Ireland: story block style 2 - video
- Add: Check-ins: DotGolf Live now has a check-in capture form.
- Fix: Allow nulls on device unique identifier because we can check people in from Live too.
- Fix: Bulk Email: Added the missing folder.
- Fix: Bulk Email: Added files in proj.
- Mod: Bulk Email Rebrand: Removed unused code.
- Mod: Bulk Email: Rebrand. Added a new get navigation for the header rebrand.
- Fix: Check-ins: Updated the controller summary comment for Swagger.
- Mod: Rebrand: Added the code to get navigation for Org.
- Add: Check-ins: Purpose free-text field.
- Add: Check Ins controller and new log table.
- Mod: Slicer: SlicerLib.cs: COVID-19 NZG initiative: 5% commission goes to DotGolf to cover the online transaction fees, nothing goes to NZG (from 20 April 2020 until 23 July 2020)
- Fix: API: old score listing endpoint calls new WHS code now
- Fix: Live: Score listing page: Sometimes nine hole scores did not have a hover
- Fix: API: score listing no longer pulls entire score history now that rollover is gone.
- API: Search green fee payment clubs - put back radius to 300 meters.
- API: Search green fee payment clubs - expand radius to 5km
- Mod: ClubCMS: Golf Ireland: story block style 2
- Fix: WHS: GetHandicapOverride will include overrides that take effect exactly on the asBefore date, so they are included when we get midnight handicaps
- Fix: Org: update member scores page
- Mod: API: removed comment - we still have counter scores in WHS
- Mod: Hide the Interface panel in TabMembers until we have content to put in there.
- Mod: golf.co.nz: My Golf: hide the Make Time Play 9 widget. Thiem said the promo will run again in October.
- Fix: PreprintV2: If you don't put anything in the Additional Competition Lines box, "undefined" prints on the scorecards.
- Fix: Small text change to clarify Handicap Freeze removal.
- Fix: TabMember.aspx had some HasPermission calls lying around that weren't updated to the new signature.
- Mod: Scheduled Tasks will now log to the `data-logger-*` index in Vortex instead of DebugLog.
- Fix: Build error caused by Org change for HasPermission()
- Fix: Warning message.
- Fix: New AssetGroupPermissionChecker implemented for Org.
- Fix: I reckon this will sort out the reports that sometimes go invisible in TabReports.  It was a static AssetGroupPermissionChecker instance assigned to a class, so in theory if another page request came in at just the wrong time, it would clobber your permission checker and cause HasPermission to return false for all the reports.
- Fix: WHS: Stop swagger assuming we'll return ProblemDetails from 404s and 409s (could change this later)
- Fix: Activity Tracker: Activity search - Return an obj instead of null.
- Fix: Activity Tracker: More knockout fixes. FYI - this is not occurring when connection is fast.
- Mod: ClubCMS: Golf Ireland: remove hide/show of body on load
- Fix: Public: handicap ranking handicap formatting
- Fix: Activity Tracker: Contact search is throwing an error for some weird reason (maybe slowness due to server location). Added a condition in the knockout.
- Fix: Activity Tracker: Fix logout issues when there's an api error. Branding: default to always display.
- Fix: Live: arrgh null reference in scorecard.cs
- Mod: Public: handicap index is back in the handicap graph
- Mod: ClubCMS: UserControlUtilities: updated the knockout control key
- Mod: WHSAPI: We'll now send resigned members down to clients when they ask for all members.  This is so that we can show details for resigned members when we are about to join them to a new club.
- Mod: Org: - Clubhouse branding - Removed Total Casual Golfer chart in members dashboard for non NZ
- Fix: Live: Scorecard printing from comp when theres a freeze date
- Fix: Live: Scorecard printing from comp when theres a freeze date
- Mod: ClubCMS: Golf Ireland: footer: made the logo url dynamic
- Fix: Removed Projected column from My Friends.
- Mod: ClubCMS: Admin.asmx.cs: just removed hardcoded website folder name
- Reverted because it stuffs with the X-Rate-Limit headers: Rate limit of 10,000 calls per ISVCredentials per 24 hours.
- Fix: Activity Tracker: More API fixes. The webuser being null is causing issues.
- Fix: Activity Tracker: API fix. Throws an error when webuser is not found.
- Add: Rate limit of 10,000 calls per ISVCredentials per 24 hours.
- Mod: ClubCMS: UserUtilities: allow IE or IRE country to log in
- Mod: ClubCMS: UserUtilities: allow IE or IRE country to log in
- Mod: Activity Tracker: Added the missing images.
- Mod: Activity Tracker: Changed the files property to copy always.
- Mod: Activity Tracker: Static file code change in Startup.
- Mod: Activity Tracker: Branding update.
- Fix: Ireland: Passthrough hostname wasn't correct so resizing did not work.
- Fix: Ireland: Reverse proxy target url was still NZ.
- Fix: Ireland: upstream name.
- Mod: ClubCMS: added clubFolderPath to knockout controls
- Fix: Ireland: Ok, so we should be using the static hostname.
- Fix: Reverse Proxy for Ireland: dg-ieprod-webapp needed, not dg-prod-webapp.
- Fix: Reverse proxy updated for Ireland static images.
- Add: package-deploy.ps1 for Images.
- Fix: API: MyGolfController: Fix Unable view other person's profile. Disable rollover dates / projected handicap - no longer applicable in WHS.
- Fix: Temporary hack to make wa_GetMemberHandicapIndex return a handicap beyond the end of the last rollover period.
- Mod: ClubCMS: Golf Ireland: css updates
- Mod: ClubCMS: Golf Ireland: menu: apply URL Override to level 2 items as well
- Mod: ClubCMS: Golf Ireland: css updates
- Mod: ClubCMS: Golf Ireland: style update
- Mod: ClubCMS: footer knockout control: made the Mailing List ID dynamic
- Mod: sql: ClubCMS: footer: add MailingListId control property
- Mod: ClubCMS: Golf Ireland: story block style 1 updates
- Mod: ClubCMS: Golf Ireland: story block style 1 updates
- Mod: ClubCMS: rendering of knockout control: use unique keys for the same control used multiple times on the same page
- Mod: ClubCMS: menu knockout control: made the level 2 menu clickable (e.g. Learn)
- Fix: ISVAPI: docstrings being messed up by commented code
- Mod: sql: ClubCMS: CWImageContent - add SubTitle column; insert control properties for the image-content knockout control
- Mod: ClubCMS: Golf Ireland: story block style 1
- Fix: Live: Added missing reference.
- Fix: Org: Deleted unused file.
- Fix: Activity Tracker: Build fix.
- Mod: Org Branding: html and css only. Not yet applied to Master. Still need to test with microsites. Fix: Card Fulfilment: IE MemberNumber change
- Add: package-deploy.ps1 file for ActivityTracker.
- Mod: ISVAPI: removed CentralMemberCode from Brief.Membership
- Mod: ISVAPI: add member+handicap to get all club members endpoint
- Add: Ireland: Images binding.
- Mod: Adweb: Disable contracts and attachments for clubs except for NZ.  The buckets don't exist for other countries and it's unlikely that we'll use them. Mod: Adweb: Removed Web.config settings that are now controlled by DotGolf.Core.
- Fix: Corrected Ireland production profile name (used when running against Prod database in Debug mode - your ~/.aws/credentials configuration file has to have prod credentials under ie-production.
- Fix: ClubCMS: UImageSlideshow.ascx: removed unnecessary form tags mistakenly added; it was causing an issue on using the rich text editor for a few clubs
- Fix: Some filters (gender, categories) were not working on the Handicap Listing report. Mod: Removed Delta functionality as it doesn't make sense for WHS daily revisions.
- Add: Ireland: ActivityTracker binding.
- Add: Ireland: ActivityTracker hostname.
- Fix: ISVAPI: update handicaps to start-of-day
- Mod: ISVAPI: "Temporary" hack...
- Mod: ClubCMS: Golf Ireland: intro style 3 dark updates; added a control property for the image-control knockout control
- Fix: Live: Don't pre-populate DOB if it's more than 100yrs old (fixes issue 54 where 1/1/1900 gets prepopulated)
- Fix: Live: scorecard printing CreateCompetitionCard no longer uses old stored proc
- Mod: Live: changed bad sql filtering in GetScoreListing, removed isTScore
- Mod: Removed "Effective from" header from handicap listing report.
- Fix: Handicap Listing report showed Pending handicaps because of a USGACalcDates dependency.  It was also using the old Course Handicap calculation and retrieving handicaps using wa_GetMemberHandicapIndex; now updated to WHS specs.
- Fix: USGACalcDates problem in Handicap Listing.
- Fix: golf.co.nz: Today's handicap fixed
- Mod: ClubCMS: menu control: also apply the custom css class name to level 3 menu items
- Mod: Hide Download Courses CSV button.
- Mod: Removed some legacy Rollover stuff (mostly performance reasons, but also to get rid of USGACalcDates references)
- Mod: api_AddScore_UpdateHandicap will no longer run post WHS.
- Mod: ClubCMS: website menu query: exclude deleted menu items from the result
- Mod: No more wa_RolloverUpdateMember_LiveAndResigned.
- Fix: Log file text corrected - we're updating members' daily handicaps in this part of the sync.
- Add: IX_Member_WHSMemberUID to speed up member handicap updates in WHS sync job.
- Mod: ClubCMS: sql: just updating the Notes (or description) of the existing HtmlOnAllImages control property (rImage Slideshow control)
- Fix: Attempt to speed up member searches.
- Fix: Public: scores page country flags
- Fix: API: scores show counter flag
- Add: Index to speed up MobileDevice queries (used for push notifications)
- Fix: Public: counter scores info text in golf.co.nz
- Fix: Public: counter scores marked in golf.co.nz
- Mod: Public: Show old score widget in dev (no WHS)
- Mod: Hide Batch Status report.
- Fix: Found more links that should be hidden.
- Mod: Disable old CSV course export.
- Fix: Hide old Scores widget in golf.co.nz.
- Fix: Typo in CFRequestReason column name.
- Fix: Live: WHS score hook null reference when merging casual scores
- Mod: Live: Remove testing delay from casual-golfer-becoming-member score sync
- Fix: Live: Sync casual scores up to WHS ONLY when WHS is ON...
- Mod: Live: Sync casual scores up to WHS when a non-affiliate is signed up as a new Member
- Mod: Live: dont show Merge Members yet
- Fix: HD, Handicap Index and Course Handicap values were not shown on the Handicap Certificate report.
- Mod: ClubCMS: CWControl: include insert of club-fixtures knockout control
- Mod: ClubCMS: CWControl inserts: knockout controls
- Mod: ClubCMS: Golf Ireland: intro style 3 updates
- Mod: ClubCMS: Golf Ireland: club-fixtures/viewmodel.ts: defined the pageControlId and clubWebsiteId observables
- Mod: ClubCMS: Golf Ireland: css updates for intro style 3 light
- Fix: SIC: Display "Pend" for null handicaps always.
- Mod: Create Member screen DOB validation made a little stricter to enforce slashes, otherwise serverside code doesn't grok and save the DOB value.
- Mod: golf.co.nz: news article: social media share: use "https://" if in prod
- Fix: Removed Score Handicap Index off Score Listing By Day report - this value is no longer available in the union database so we can't show it.  Best we can do is get the PrintedHandicapIndex from the scorecard (for card printing clubs) but that's not always correct.
- Fix: Results should always be using the printed handicap index.
- Mod: Central nav using jquery to render
- Mod: Org: Renamed "Course Handicap" references everywhere to "Playing Handicap".
- Mod: Live: Renamed "Course Handicap" references everywhere to "Playing Handicap".
- Add: Daily 00:00 task that will update Projected --> Current handicap index (for all members with NeedsHandicapUpdate=1, which is set by the sync job)
- Add: Column to speed up daily handicap update.
- Mod: Member_History_Update trigger performance improvement if non-tracked fields are updated.
- Fix: Whoops, untested SQL error.
- Fix: Dashboard fixes for Levies and club dropdown.
- Ignored generated js and js.map files.
- Mod: WHS Client: Sync the handicap at two points in the day - 00:00 (start of day) and real-time, storing these values into NZGA_Handicap and NZGA_Projected respectively (in BraveNewWorld mode anyway)
- Fix: WHSAPI: Clobbered swagger.g.json
- Fix: WHSAPI: Accidentally committed web.config.
- Fix: WHSAPI: Sigh.  Forgot about swagger.g.json.
- Add: Allow GetAllMemberHandicapsForISV() to be invoked in a way that retrieves handicap indexes as at a point in time.
- Fix: WHSAPI: Dispose of SHA256 crypto provider.
- Add: WHSAPI webhook sender mechanism.  If we insert something into the WebHook table this will trigger HTTP POSTs to anyone who cares.
- Mod: Card Fulfilment. Automated the creation of card order when an member is created.
- Fix: CFRequestStatusLog FK fix
- Mod: ClubCMS: Golf Ireland: "Intro Style 3": initial commit
- Fix: API: Score Entry App:
- Fix: Nooooooooooooooooooooooooooooooooooooooooooooooooooooooooo i committed ConfigurationProfileResolver.Debug.cs
- Mod: Live: Union systems to retrieve 00:00 handicap for golf ops during the day. removed GetHomeMemberhandicaps from IHandicapProvider
- Fix: Minor UI fix.
- Mod: Card Fulfilment: Added the CRDF asset group checking
- Fix: Minor alert message UI fix.
- Mod: Card Fulfilement: Live initial commit.
- Mod: Activity Tracker: Type fix.
- Mod: golf.co.nz: news article: updated the facebook share button code (generated from https://developers.facebook.com/docs/plugins/share-button/)
- Mod: golf.co.nz: updated previous commit: use 200x200 default nzg logo image as og:image for news articles without an image. Apparently there's a "minimum 200x200 size constraint" for facebook
- Mod: golf.co.nz: updated previous commit to use a smaller default image for news articles
- Mod: Card Fulfilment - Initial commit
- Mod: golf.co.nz: news article: define a default og:image (NZG logo) for articles without an image so that when shared on social media, the NZG logo will appear as the article image instead of some random image from the website (e.g. sponsor logo)
- Mod: Card Fulfilment - Create DB tables
- Mod: Changed "Course" to "Playing" in the Course Handicap Table report.
- Mod: Hacked the handicap certificate report to be more WHS-like.  I've had to combine the PCC and Adj columns; hopefully this doesn't attract the ire of anyone until we've had a chance to rewrite this report in not-active-reports.
- Fix: Non-affiliated players could not enter competitions from the tee sheet.
- Mod: Don't allow users to delete handicap overrides that area already in effect; these can only be expired.  Future ones can still be deleted.
- Fix: Error when adding a non-affiliate into a competition via pre-registrations.
- Test: post-commit hook
- Test: post-commit hook
- Test: post-commit hook
- Test: post-commit hook
- Mod: Renamed "Course Handicap" to "Playing Handicap" on all scorecards.
- Fix: Public: slightly better paging css
- Fix: Public: css typo
- Fix: Public: scores page works all the time now, fixed off-the-page paging
- Fix: When reinstating a lapsed member of our club (who is a home member somewhere else), the DOB and Email values from our club were not prepopulated.
- Fix: When resigning a member, the resign (as UNF/DEC etc) panel stays visible and editable.  Changed so it reverts to the status display.
- Mod: Changed WHS widget font to Arial to match the old widget.  Sad to lose Segoe UI but the site is going to be replaced soon.
- Mod: WHSAPI: Hourly PCC job will now also touch member changedates for those who have had a handicap override expiry.  This will cause the sync endpoint to return their details for update in union databases.
- Mod: WHS handicap tile made to look a bit nicer.
- Mod: WHS score listing will now pop up hole-by-hole details same as the old score listing control.
- Mod: WHS: Moved override memberchangedate Asserts to a new test
- Mod: API: ScorecardController: submit-scores endpoint - Allow scores submission only if it meets the criteria for handicapping. E.g. 18Holes (at least 10 scores) / 9 Holes (all holes must be played)
- Mod: WHS: Override unit tests now Assert member change date is updated appropriately after CRUD operations.
- Mod: Public: Removed nolock from Handicap Rankings query because it's not slow after removing sql functions
- Mod: Public: Remove handicap suffixes and rollover dates from handicap rankings
- Mod: SIC will now always pull the handicap index from the printed scorecard rather than the member's record.
- Mod: sql: ClubCMS: CWControlProperty insert new properties to existing controls; update existing properties
- Mod: ClubCMS: sql: insert new Knockout controls into the CWControl table
- Fix: Incorrect numeric sql data type caused crashes in competition select control in some situations (e.g. handicap index of 6.0 gets converted to int of 6, then freezes stop working).
- Mod: sql: CWImageContent table: add three new columns: CssClassName, IconImageId, HtmlOnContent
- Mod: SIC: Changed "CRSE" to "PLAYING".
- Fix: WHSAPI: Whoops, some errors caused by that last commit to return counter score IDs on overridden handicaps.
- Mod: WHSAPI: Return counter score IDs even if the handicap has been overridden.  This is technically incorrect (because the counters have nothing to do with the current handicap index), but my hand was forced.
- Mode: ClubCMS: Golf Ireland: css updates for intro style 2
- Fix: Org build after TS fix
- Mod: Now doing handicap freezes (for competitions) in managed code rather than SQL; this should make it work for BraveNewWorld. Fix: When printing a member scorecard for today, get the realtime handicap rather than the 00:00 handicap.
- Fix: PCC column changed from Pend to -- since null could also mean that we haven't computed a pcc for the day (e.g. too few people in the field)
- Mod: Show "Pend" if PCC has not yet been calculated for a day.
- Mod: Don't show hole-by-hole popup for scores entered by Adjusted Gross.
- Add: WHSAPI: IsHoleByHoleDataPresent flag on BriefScore so we can hide hole-by-hole popup for scores entered by adjusted gross.
- Fix: Live: missed some files
- Mod: Live: Refactor duplicate JQueryDotGolf declarations into d.ts
- Mod: ClubCMS: Golf Ireland: initial changes for intro style 2 (work in progress)
- Mod: ClubCMS: UImageSlideshow: made the read more link clickable
- Mod: ClubCMS: UImageSlideshow.ascx: open edit form
- Mod: ClubCMS: Golf Ireland: UImageSlideshow.ascx: fixed border radius styling, and saving of HtmlOnContent value
- Fix: API: MyGolfController: Score listing - Course handicap is always 0 (in the app) because of property name mismatch. App expects "CourseHandicapIndex" while the API returns "CourseHandicap" in the response.
- Mod: ISVAPI: missing deleted date on thirdparty_metadata
- Mod: Moved some stuffs out of BEGIN..COMMIT TRAN.  May help performance.
- Cleanup: Got rid of some test code.
- Fix: Always pull the latest handicap when printing scorecards for today.
- Fix: Crashbug with live_CreateCard procedure drop.
- Fix: Turns out we create unnecessary ScorecardNonAffiliate rows for most affiliated cards.  Meh.  Changed so that the object is checked for values before we bother to run this extra insert.
- Mod: ClubCMS: Golf Ireland: UImageSlideshow: edit mode: updated saving of CWImageContent details and images
- Fix: Live: error in PrePrintService
- Mod: live_CreateCard proc moved to code (Scorecard.cs)
- Mod: live_CreateCard proc moved to code (Scorecard.cs)
- Mod: Reprinting a scorecard no longer updates the handicap index - the old printed handicap is reprinted verbatim.
- Fix: Jenkins build.
- Fix: API: MyGolfController: Score listing - course names not displayed in the current app (pre-WHS). Fix: API: MyGolfController: WHS compatibility - No graph data in the testflight version of the NZG app.
- Fix: Since Request.QueryString[] is already decoded, there is no need to URLDecode() this value again.  Doing so causes broken Base64 data.
- Add: DeletedDate to ThirdParty table
- Fix: API: MyGolfController - New nullable properties (Slope and Course Rating) were not compatible with the app.
- Fix: API: MyGolfController: /list-scores endpoint - Course rating and slope not displaying in the live app (pre-WHS playing handicap feature).
- Mod: Disable WHSAPI authentication when WHS is not yet enabled.
- Fix: Whoops, didn't number a sql script.
- Fix: ISVAPI: Hooks work properly
- Mod: Live: throw on error inside FireScoreInsertedUpdatedDeletedHook
- Fix: Live: ashx error from incorrect hook name. sigh
- Fix: Live: ashx error from incorrect hook namespace
- Fix: ISVAPI/Live: Score insert hooks from ISVAPI work now. Removed enteredbyorganisationuid as required field from PostScoreRequest
- Mod: ClubCMS: UImageSlideshow: edit mode: icon image uploader
- Mod: ClubCMS: UImageSlideshow: edit mode: icon image uploader
- Mod: ClubCMS: UImageSlideshow: edit mode: layout updates (work in progress)
- Mod: Live: Expire ListLiveClubMembers_Cache every hour (?) so the handicaps refresh. GetPlayerDetails always returns current details (todo - verify)
- Mod: ISVAPI: changed the order of the markers list in Course JSON for readability
- Mod: ClubCMS: UImageSlideshow: edit mode: added fields to the form (work in progress)
- Mod: WHS Client: Send CentralMemberCode to WHSAPI when members are updated.
- Mod: WHSAPI: Allow CentralMemberCode to be set when creating/updating members.
- Fix: Set/Update Initial Handicap should only be visible to the home club.
- Fix: Home club change request is not sent straight after reinstating a previously lapsed member.
- Mod: ClubCMS: UImageSlideshow.ascx: updating the edit mode to add the new fields (work in progress)
- Mod: ISVAPI: removed unused connbuilder call
- Mod: ISVAPI: add CentralMemberCode to the get all memberships for club endpoint
- Mod: Card Fulfilment: insert product
- Add: DotGolf.Mailer now does template-based bulk emails (I've already deployed this to Prod).
- Fix: Script wouldn't run because it didn't like this FK.  #ohwell
- Fix: Activity Tracker: Removed the nav component and instead added it in layout. Also added a condition to check for webuser.
- Add: Email.CWEmailTemplateId column to allow for bulk email templated sending.
- Mod: DotGolf.Mailer performance optimisation when retrieving emails to send (using new filtered index).
- Add: Index to speed up Mailer service (filtered index)
- Fix: Live: Handicaps weren't being fetched at the correct date in score entrycontrol. Deprecated HandicapDateRange
- Fix: Activity Tracker - another attempt to fix the navigation async issue
- Fix: Activity Tracker - navigation - instead of retuning null an empty object is returned to avoid js error
- Mod: SQL script change to see if it'll help the ISVAPI unit tests.
- Fix: Activity Tracker: Fixed the async warning for the Navigation.cs
- Fix: In release mode the compiler should throw an error (so that we fail the build) if the build script is not set up properly (ConfigurationProfileResolver.Release.cs should be overwritten by the prebuild script)
- Fix: Activity Tracker: Project fix - added jquery ui in the project.
- Fix: Activity Tracker: Product Code checking fix when logging in.
- Mod: API: MyGolf: WHS Compatibility - Omit Parent score as we no longer combining 9-hole scores. Mod: API: Updated comments for clarity.
- Add: API: Extract the app's unique deviceId from "X-DG-ClientAppId" header (if exists).
- Mod: ClubCMS: Golf Ireland: css work in progress
- Mod: ClubCMS: Golf Ireland: menu view updates
- Mod: ClubCMS: Golf Ireland: menu view updates
- Fix: Reverted PackageReferences mod.  Not time for glory yet.
- Mod: Moved DotGolf.Shared and DotGolf.Reports to PackageReference (csproj style package management) so that transitive references in DotGolf.Core are deployed to the build output directory.  Experimental... let's see what Jenkins makes of this.
- Mod: ClubCMS: Golf Ireland: more card style 1 style updates: mobile styles
- Mod: ClubCMS: Golf Ireland: UImageSlideshow: more changes on this control to accommodate "cards style 1"
- Fix: Public: incorrect handicaps in mygolf page
- Mod: Live: Fix validation error when email is empty but DOB is filled
- Fix: Live: MemberHandicapAdjustmentReport missing 'else'
- Fix: Build
- Fix: Live: partial commit adding freeze report to csproj
- Fix: Move member handicap freeze report to Shared
- Add: StatsD config for dg-whs-db-2
- Fix: WHS: Only add 10 minutes when separating scores on the same play date
- Mod: Live: whs member hook - replace new Member() with cmember.Member
- Mod: ClubCMS: Golf Ireland: UImageSlideshow: more changes to accommodate cards style 1
- Fix: Live: Score count fixed for people with a memberId and nonaffiliateId on their passport
- Fix: BUILD: missed a file
- Fix: Live: Send initial handicaps to WHS
- Fix: Public: error when clicking View all scores on WHS widget
- Fix: API: MyGolf Controller: Unable to see own scores after privacy mode is turned on. Fix: API: MyGolf Controller: Course name is not being displayed in the score listing screen (NZG app). Changed ScoreRec.Course.Name to ScoreRec.Course.CourseName. App is expecting "CourseName" instead of Name in the response.
- Fix: ISVAPI: Search: searching other clubs by full membership number in FindMembersBasic works again - need to check for any side-effects
- Fix: Live: Clubs can get to adjustments page now
- Mod: Live/Org: Hiding extra adjustment page options for now so clubs don't ask questions.
- Fix: Live: Revert rev 36209 Mod: Live: Score listing: corrected passport join in Member score listing and removed virtual score checks
- Add: WHSAPI: Test to check that individual club membership records are being updated as they should.
- Fix: Jenkins build error. These mods were not included in the previous commit svn no. 36649.
- Mod: API: MyGolf: WHS Compatibility - New endpoints for score listing, get full score detail and score comments.
- Mod: Updated comment for clarity.
- Fix: Activity Tracker: Added default value to IsActivityContact.
- Fix: Deploy script nonzero exit code caused Jenkins loop.
- Fix: WHS Client: if you resign, then reinstate a member, the member remains resigned in WHSAPI::OrganisationMember.
- Fix: Activity Tracker: Added missed file.
- Fix: WHS Client: if a secondary member is resigned and subsequently updated by the home club, they get recreated at the secondary club as a live member.
- Fix: Activity Tracker: Login is looping because it couldn't find ACT id, so I changed the condition to get the product code.
- Mod: WHS Client: When changing a member's home club, tell the WHSAPI about it.
- Mod: No-more-XeroSync: Changed deploy script to nuke XeroSync.exe instead of updating it (effectively disabling this app).  It is now a scheduled task.
- Mod: ReverseProxy: sites.list: added -,-,0,1,stclair2.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added stclair2.cw.golf.co.nz
- Fix: Removed JsonSerializerOptions hack from TestBase because it was causing incorrect test passes.  Now injecting JsonOptions into any methods using JsonSerializer.Deserialize<T>(), which means members no longer get their names nulled out if we post changes.
- Mod: WHS: test for IsCalculating being true when a recalc is happening
- Fix: Live: Handicap refreshes properly
- Fix: No more DatabaseMacros.
- Fix: No more DatabaseMacros.
- Fix: No more DatabaseMacros.
- Fix: WHS: Recalculate bug loading handicap
- Fix: No more DatabaseMacros.
- Mod: XeroSync refactored to remove standalone EXE - now it's a scheduled task.  We also say goodbye to DatabaseMacros.cs, it's been good, but you're just annoying now.
- Mod: Part 2: New DotGolf.Live.ScheduledTasks implementation of XeroSync for Org.
- Mod: Part 1: Removed XeroSync.ashx from Org (to be replaced with a DotGolf.Live.ScheduledTasks implementation)
- Fix: Live: annoying bug stopping two member quick search controls being the same page
- Mod: Adweb: Got rid of old-school SVN_REVISION code in favour of new DotGolf.Core stuff. Fix: A few compiler warnings, old defunct references.
- Mod: ClubCMS: sql: CWImageContent table: add Title column
- Mod: Live: Undo changes that allowed dedup page to open using a memberId
- Add: Live: Merge URL for ISVs/clubs
- Fix: Live: score-entry navigator check updated to match stage
- Fix: Live: score-entry attempt to resolve #26910
- Mod: Live: testing input type='tel' on ipad
- Mod: Live: more ipad score changes
- Fix: Kiosk: attempting to resolve #26910
- Mod: ClubCMS: menu/view.html: hide the secondary menu on scroll
- Mod: ClubCMS: UImageSlideshow: handle display of card title, text, link (work in progress)
- Mod: ClubCMS: Golf Ireland: cards style 1 css: work in progress
- Fix: WHSAPI: RunPCC Dockerfile updated.
- Mod: Updated Dockerfile for .Net Core 3.1. Mod: Updated README
- Mod: WHSAPI: Another attempt to make the swagger conf generator work.
- Mod: WHSAPI: Set ASPNETCORE_ENVIRONMENT in an attempt to make the swagger conf generator to work.
- Mod: Live: notify user if handicap has a pending calculation. Lazy
- Mod: ISVAPI: set role properly in DEBUG
- Mod: Trying to make WEB7 build.
- Mod: Some log entries added to build.cmd to help with diagnostics.
- Fix: WHSAPI: Added XML doc for this method to avoid warning.
- Fix: WHS: UnderlyingTypeFilter works again
- Fix: WHSAPI: Return an error if the build failed. Fix: WHSAPI: InitialScoreImport package version issues.
- Fix: Live: WHS to core 3.1 swagger changes
- Fix: WHSAPI: More work to try and make this thing build on Web7.
- Fix: WHS: forgot swaggerfile
- Fix: WHS: UnderlyingTypeFilter works again hopefully
- Fix: WHSAPI: Okay okay, no quotes then.
- Fix: WHSAPI: Generating swaggerconf didn't work properly on Web7 in Jenkins.
- Fix: WHSAPI: Publish profiles updated to .Net Core 3.1.
- WHSAPI .Net Core 3.1 upgrade.  Merged revision(s) 36528-36575 from Branches/Trunk.2020-03-23.whsapi-dotnet-core-31-upgrade/DotGolf.WHSAPI:
- Add: WHS Status widget to replace old Rollover widget.  Just for awareness and to put the WHS FAQ link somewhere for clubs to access.
- Mod: Disable rollover when Settings.WHSEnabled=1.
- Add: Control copy of Rollover T-Scores job - we don't need this anymore since T-Scores have been out of play for a while.
- Mod: WHS: Bypass Rollover when WHS is active.
- Mod: ClubCMS: Golf Ireland: footer css update
- Mod: ClubCMS: golfireland.css updates (work in progress)
- Mod: ClubCMS: UImageSlideshow: just updated the casing of the BottomHtmlonImage property name
- Mod: ClubCMS: sql: insert new control properties for existing controls responsive login control: CssClassNameFormChild responsive image slideshow: BottomHtmlOnImage
- Mod: ClubCMS: UImageSlideshow: added new property: BottomHtmlonImage
- Fix: SSO: Ireland login issue because &ds=ire.
- Fix: Added conditions to query associations by name instead of just inserting with hard coded ids
- Fix: Missing a GO statement.
- Fix: Missing a GO statement.
- Fix: Missing a GO statement.
- Add: Ireland: Bindings for SSO.
- Add: Ireland: Bindings for Org.
- Add: Ireland: Bindings for Live.
- Add: Ireland: Bindings for ISVAPI.
- Add: Ireland: Bindings for ClubCMS.
- Fix: Ireland: Hardcoded UK bucket name.
- Add: Ireland bindings file for Adweb.
- Mod: Ireland: Reverse proxy bootstrap scripts updated to work with new environment.
- Add: Ireland: Sites.list.
- Mod: ConnectorAPI: Introduced prebuffering of member (and team player) handicaps at the start of a batch of cards being printed.  This will help performance of large pre-print batches where CardPrint.asmx would otherwise time out.
- Fix: Live: DG POS - KOUNTA: The line item for an added product on a scorecard got duplicated. Remove extra "products.add(productLine)".
- InjectionAttackBlocker: Added "CHAR(45,120,49,45,81,45)" to the list.
- Fix: Live: Member create validation error when email is null
- Mod: ClubCMS: missed to include in Rev 36521
- Mod: ClubCMS: responsive: ULogin: added control property CssClassNameFormChild
- Add: ClubCMS: Golf Ireland: adding an external css file for Golf Ireland (for now at least, for quicker and tidier css development)
- Fix: WHS: swaggerfile
- Mod: WHS: Add IsCalculating to handicap
- Mod: No longer log Elasticsearch exceptions.  App performance is a metadata thing so is done on a best-effort basis.  Logging stuff at high speed causes database performance issues (and we have to deal with storage space later)
- Fix: Live: Xero Import: CreditNoteInterface.cs: ImportCreditNotesFromXero: apply contact filter to the credit notes as done for pp and op
- Fix: ISVAPI: crash if any endpoints are missing a ISVAPI.Helpers.AuthorizeAttribute. ideally we catch this in dev
- Mod: Live: WHSScoreinserted hook fires WHSmarkerupdated if the score's marker is missing from WHS
- Mod: WHSAPI: Dockerfile now explicitly pulls .Net Core 2.2 image.
- Fix: Org: Edge case where the distance unit gets out of sync with the UI.
- Add: Manual hook code for Marcus to use while cleaning up data.
- Mod: Adweb: DebugLogger page uses transaction isolation level read uncommitted to not block everything
- Mod: Live: better logging in UpdateMarkers Task
- Fix: API: MyGolfController: /search-for-courses endpoint - Fix the order of search results (nearest proximity to the course).
- Fix: Jenkins build error - Missing from previous commit.
- Add: API: MyGolfController: /search-for-courses endpoint - Add RegionId filter.
- Fix: API: MyGolf: /search-for-courses endpoint - Updated SearchForCoursesRequest payload.
- Mod: ClubCMS: Golf Ireland: more footer styling updates (work in progress)
- Mod: ClubCMS: Golf Ireland: footer mobile styling updates (work in progress)
- Fix: Incorrect precision on column data type caused SQL error.
- Add: WHS Member Sync enabled in ParallelOnly mode.  In parallel mode the WHS handicap is stored in Member.WHS_Handicap instead of NZGA_Handicap.
- Fix: ISVAPI: missing endpoint permission
- Fix: WHSAPI: Edge case where deleting an 18H score would cause a crash in the UpdateCombinedScoreLinks() code (since my earlier commit).
- Fix: WHSAPI: If you delete one of a combined 9H score pair, the combined links are not removed from the remaining orphan.  This causes problems combining the remaining score with the next 9H score.
- Fix: Live: VendPOS: concatenate line notes instead of adding multiple and crashing vend Fix: Live: KountaPOS: attach correct cardno and passport id to each sold product
- Fix: WHSAPI: Return a 404 instead of an exception if you try and delete a score that doesn't exist.
- Fix: Live: VendPOS: Loyalty + double-refund bugfix working together - vendSales attaches scorecard cardno to each product as an attribute so we can trace them
- Fix: Contact table: Added the dropping of index before altering the column IsActivityContact to not null.
- Fix: Live: preprint slowness in new world because of handicap lookups. Fixed KO js exceptions in preprintV2 and made it go faster
- Add: ExceptionLogToElastic will now RDNS lookup ip addresses and geolocate them, adding more metadata into the Elasticsearch Exception indexes.
- Fix: Live: Vend-POS: Re-printing scorecard - Ensure that the TXLine.VendProductId is set in the new TXLine(s) associated with the new scorecard.
- Mod: WHS Client: HandicapTXT service updated to send out a new WHS-friendly reply to people who request their handicap from the 3673 shortcode.
- Fix: Live: Vend-POS: Fix #24102 #26892 - Multiple cards on the same sale gets wrongfully refunded. Based the mods to the same approach we did in Kounta-POS mod (SVN rev no. 36349).
- Mod: ClubCMS: Core: Golf Ireland: missed in the previous commit
- Mod: ClubCMS: Golf Ireland: Footer: made the newsletter subscribe work with validation, updated html markup and styling
- Fix: Live: Create Member email validation regex wasnt working
- Mod: Refactored to pass references to IHandicapProvider instead of instantiating everywhere; this enables use of CachedHandicapProvider.
- Fix: Live: Prevent cross-club email scraping in create member page
- Fix: Preprint slowness when printing cards (it was okay loading the page, just not printing)
- Fix: Build error caused by an earlier refactor of mine.
- [DFH review: probably okay, but needs testing of each area calling CMember.SaveChanges()] Fix: Live: Data.CMember SaveChanges updates to only update the record with the same UID as our CMember instance #27579
- Mod: Activity Tracker link. Added visibility condition.
- Mod: Preprint performance: Introduced cached handicap provider that wraps any other IHandicapProvider and keeps handicaps for the lifetime of the instance. I've also added some code that calls the bulk GetMemberHandicaps() method to precache all the handicaps before we start looking at eligibility for each player.
- Mod: Live: Prefill Email and DOB in Create.aspx when reinstating a member #27596
- Mod: Activity Tracker: Added the filtering of logs by association id.
- Mods: Activity Tracker - added web user session - added the checking of ACT product - added the association id when insert to db
- Mod: Activity Tracker table updates - Added association id in the tables - Created a script that inserts ACT (Activity Tracker) association product
- Fix: Competition Setup extra strokes box went missing with last publish.
- Fix: Live: Preprintservice: ToList ALL the linq queries.
- Fix: Org: Tournament registration error fix compiles now
- Fix: Org: Tournament registration errors
- Fix: Don't log ScriptResource 404s.
- Fix: Network Cameras: Max refresh time is now 24 hours, to avoid a massive number causing exceptions.
- Fix: Live: RSScores no longer causes Hookmanager exceptions. Fix: WHS: NZ Cutover date updated
- Mod: Log the full URL in Exceptions.LogException, not just the path and query.  Handy for ClubCMS virtual hosting.
- Cleanup: Ignore js and js.map files generated from typescript.
- Fix: Deal with ORNS exceptions due to potentially null layouts.
- Mod: Don't throw a LayoutNotFoundException when a layout is not found; just return null and let the system deal with the 404.
- Fix: Live: WHSScoreInsertedUpdated no longer throws exceptions
- Mod: Public: remove profilememberkey encryption logging because it's bullsh*t and we'll wait til someone complains
- Fix: Didn't commit a file.
- Mod: WHS transaction not set when dealing with HandicapProviderParallel, causing lockups.
- Fix: Preprint performance improved to stop service timeouts.
- Fix: Don't pass DateTime.Now.Date into GetMemberHandicapIndex() because we want the handicap index right now rather than at 00:00.
- Mod: Improved handicap lookup performance in kiosk (EnterMemberNumber and GetNonAffiliateMarkers)
- Fix: Minor nav UI fix.
- Fix: Changed to another way of anti-scraping by adding DateTime.Ticks into the encrypted profile member key.  This way the key stays valid across deploys and it keeps changing so there is no single value that is obvious to hold on to.
- Fix: pageSize and pageNumber parameter missing errors from Public.  Added a stub webmethod to handle old scripts out there, and replaced ConcatenateControl with a script tag to make sure caching doesn't happen.
- Mod: AAAAARGH
- Fix: SQL error.
- Mod: No longer go to WHS to obtain the most current handicap indexes for the friends search.  It's unnecessary to get it /perfect/ - this is just informational.
- Mod: Dropped back to 16 threads as 64 doesn't seem to be helping much.
- Mod: WHSAPI Client: Increased to 64 threads for bulk handicap queries.
- Mod: Handle bulk handicap lookup failures gracefully.
- Mod: Added IHandicapProvider.GetMemberHandicaps() which can get handicaps in bulk.  This uses multithreading to get handicaps from WHS in bulk.
- Fix: Public: Get scores WHS logging decrypt errors
- Mod: Removed all DotGolf.Data references from HandicapProviderWHS to avoid transaction-based locks.
- Fix: Alter contact table. Added a object checking before running adding constraint and index.
- Fix: SSO: If your passportcredentials are not unique, do not allow logins.  Clubs have passwords saved in their browsers and often these are kiosk/kiosk or proshop/proshop.
- Fix: Public: Hide WHS all scores link
- Fix: Public: publish issue - automapper version conflict crashing teebooking
- Fix: Hacked TabMemberScores.aspx in Org to work.  We need to get back to this one and check that it is accurate and not missing any info.
- Fix: Public: Occasionally the WHS widget throws a "bad data" crypto exception; we suspect it's the string encoding that is broken by base64 encoding.
- Fix: Public: publish issues - missing page-size in WHS scores page, clientbrowseroffset doesnt work when theres no webuser
- Fix: Kiosk: Score Entry broken due to WHS readiness mods.
- Mod: Bring back HandicapProviderParallel now that the WHS provider locking bug has been fixed.
- Fix: HandicapProviderWHS was inadvertently accessing the database without the Transaction reference, causing blocks in some areas of DotGolf Live (applying competitions to scorecards).
- Mod: Temporarily switch back to legacy handicapping (not parallel) to see if this will fix high blocks we're currently experiencing.
- Fix: Kounta: Loyalty Redeem endpoint: Improvements to an existing fix to stop over-charging a members house account. Check if sum of previous payments + requested payment amount does not exceed the order total.
- Add: IX_TBLog_ClubId for performance.
- Fixes: - Clubhouse menu when collapsed is not displaying the ul > li properly. Made the collapsed menu to float left. - Clearing WebUser session when logging out
- Fix: Public: Resolved circular references
- Fix: Public: Attempt to resolve circular references
- Fix: Public: ASCX reference to a property that doesn't exist.
- Fix: Live: ORNS in RoundManagementScorecardDeleted hook, exceptionLog id: 440143301
- Mod: WHSAPI: Configure JWT package to set User.Identity.Name to the audience from the token.  This will make WiretapMiddleware log the ISV credential name to Elasticsearch.
- Fix: Live: Kounta-POS: customer is set correctly-ish.
- Add: ActivityTracker to reverse proxy sites.list.
- Fix: Adweb build after WHS MergeURI removal
- Mod: ClubCMS: Golf Ireland: terraces 4: footer markup updates
- Add: ActivityTracker: bindings.list so we get URLs to this app.
- Mod/Add: ClubCMS: Golf Ireland: footer control: work in progress
- Mod: WHS: Remove De-dup URL from merge process - this is the job of ISVAPI/ DG Live
- Mod: Superficial Connector change to test a re-update on Stage (given the extent of our last batch of changes I want to make sure updates still work)
- Mod: Adweb: Menus: allow editing the existing column CWMenu.ParentMenuId
- Mods: - altered IsActivityContact to not null - Added an FK to the BusinessId column - added an IsActivityContact index
- Fix: Live: KountaPOS: Customer set based on the first passportid found in the sale payments. Todo: fix splitting a sale by house account...
- Mod: ClubCMS: CWMenu table: added three new columns: ShortDescription, CssClassName, UrlOverride
- Mod: ClubCMS: Golf Ireland: menu knockout control: made the secondary menu data-driven
- Cleanup: Connector: Removed old unused .wyp files.  We only have connector-api now (in prod, stage and dev).
- Fix: Connector: Interop.WIA.dll added to installer and updater projects so it gets out there.
- Mod: ClubCMS: Menu control: updates on menu query (with the introduction of the "menu grouper"--e.g. primary, secondary, footer). work in progress.
- Fix: Live: Kounta POS: more ORNS avoidance when fetching previous orders
- Fix: Live: Kounta POS: removed Task.Run from KountaLocal.ImportOrder call just in case it screws up
- Fix: Live: Kounta POS: bug when re-closing sale with multiple scorecards, products attached to a card were wrongly refunded against all other cards.
- Mod: ClubCMS: web.config: defined static content for the woff and woff2 font files
- Fix: ClubCMS: Terraces4: corrected the path to the fontawesome css file
- Add: ClubCMS: missed in the previous commit (Rev 36343)
- Add: ClubCMS: Core: missed in the previous commit
- Fix: Org: call score inserted hook in the tournament system you can submit scores for handicapping in bulk
- updated typescript from 3.6 to 3.7 Mod: ClubCMS: Golf Ireland changes: initial commit: - updated dapper from 1.42 to 2.0.4 - added Dapper.Contrib.2.0.4 - added menu knockout control, MenuApi - added aldrin font, fontawesome 5 pro files
- Mod: Club Health: Some styling to get it more in line with the Clubhouse theme.  Added permission checking.  /shared/api controllers were not getting session; Global.asax corrected.
- Mod: ClubCMS: terraces4: theme.css: updated the common / reusable css code to be used by this template
- Mod: ClubCMS: Terraces 4 (as yet, this is not used, but it will be by Ireland and NZ): removed unnecessary code and corrected some text. WriteSectionControls: passed on clubWebsiteId (for use by knockout controls)
- Mod: ClubCMS: UserControlUtilities: WriteSectionControls: knockout controls: added two observables: pageControlId and clubWebsiteId
- Mod: Club Health incremental fixes + member age chart - You can now select any club in the country to view their stats. - Member Age Chart now works (fact_Membership table added to warehouse builder) - Fixed Up/Down/Unchanged text displays (they were incorrect occasionally)
- Add: Warehouse Builder: AgeF (age with a decimal for fractional years) added to fact_Membership
- Mod: Live: easier to see selection in Admin club select box
- Mod: Live: Use ClubID instead of centralClubCode for ClubCombo (nomads and a few others dont have centralclubCodes in dev)
- Mod: Adweb: Club Website: Menus: added the three new CWMenu fields: ShortDescription, CssClassName, UrlOverride
- Add: Warehouse Builder: fact_Membership columnstore table to compute member ages over time.
- Fix: Org: some Nonaffiliates from TournamentRegistrations weren't getting associationid set
- Mod: Adweb: Club Website: BindMenuCombo: concatenate the priority number with the menu name (to easily identify it)
- Mod: Adweb: Club Website: Menus: BindParentMenuList: concatenate the priority number with the menu name (to easily identify it)
- Mod: Live: add extra docstring to knockout.dotgolf.extensions.js "load" binding
- Fix: Live: MasterPageOptions DistanceUnit ORNS when webuser is null
- Mod: #27435: ClubCMS: PGA Registration: when a member registers, and the system finds an existing Registration record for that passport, update ManuallyCreated=0 in case this member was manually created first. I think this is what happened in Ticket 27435. Arron Harding was manually added then he registered.
- Add: API: MyGolf: New endpoints for WHS Playing Handicap Calculator feature in the app.
- Fix: Course Changes: Error messages were no longer stopping the form from submitting (I think this is related to the jquery upgrade)
- Fix: TabCourses.aspx in Live will now display the unit that the course was rated in.  Perhaps we should be displaying this in the unit per the club's preferences; let's see if anyone complains.
- Add: Score Entry Control will now show Metres or Yards depending on the club's preference.  If you click on the Metres/Yard text in the score entry control, it'll toggle between them.
- Fix: Compile error caused by refactoring.  Course Changes area now uses UnitConversion class instead of inline math.
- Fix: Distances in golf.co.nz are now converted and displayed properly (always in metres for our public site). Fix: Unit conversion constant names were confusing.
- Mod: Refactored to move the yards vs metres constant into DotGolf.Core for re-use.
- Mod: DG-968 Support capture and display of marker distances in Metres or in Yards, depending on the club.
- Mod: Minor UI update. Removed the association name from brand.
- Fix: Live: Dont show social members in teebooking search
- Fix: Live: Social members show as expected in Member Search #27121
- Mod: Activity Tracker: Search enhancement. Replaced the contact keyword with the contact search control.
- Mod: Live: Course handicap report make everything fit on 1 page
- Add: Yardage: Marker.DistanceUnit so I can use this in other solutions.
- Mod: SSO: Add infobox to Forgot Password view to remind clubs about their new username.
- Mod: Activity Tracker: Minor UI change
- Mod: Activity Tracker: Wording change for initial log.
- Cleanup: Reformatted an inline sql script to make the pain go away.
- Fix: Live: newly created social members no longer get an associationid
- Mod: Activity Tracker: Added the ability to search by club, assoc, and business name
- Mod: DG-1107 In WHS BraveNewWorld we will always apply the extra strokes calculation for multi marker competitions, even if the competition is for a single gender.  Clubs no longer get the option of disabling the calculation.
- Fix: API: ScorecardController: GetPlayerInfo should not fail if a player does not have a handicap index.
- Fix: api_AddScore did not populate Score.NZCRDataId when saving/editing scores.
- Fix: Excluded TabAdjustments from project.
- Fix: Italic "loading" style on nav bar always annoyed me...
- Mods and Fixes: Activity Tracker: - create contacts validation - changed default page to search - renamed field labels
- Mod: WHS Client: In BraveNewWorld mode we no longer do all the old handicapping system processing (combined scores, calculating the adjusted etc.)
- Mod: Live: Moved live_FindSocialMembers_Surname_Firstname_Number to c# and dropped proc
- Fix: Live: AllHolesAttempted wasnt loading correctly for adjusted gross scores
- Fix: SendForgotPasswordEmail - GetUserCredentials() query returns a whole list of members and non-affiliates when retrieving a casual golfer's record. Removed the Where clause "@ClubId is null or @MemberCode is null" from the Member and Non-Affiliate SELECT statements.
- Fix: WHS Client: Sync date wasn't correctly stored due to a UTC-Local roundtripping issue.  SpecifyUtc() updated to handle DateTimeKind != Unspecified.
- Mod: Live: Show PCC as 0.0 when null for WHS scores
- Mod: Live: Handicap Adjustment link goes to new page in brave new world
- Mod: WHS Client: Handicap sync diagnostic output improved.
- Fix: When saving global settings (ClubId, AssociationId and all the other filters are null), duplicate [Setting] rows get inserted and old values are returned instead of new ones.
- Mod: Org: Moved TabAdjustments page to Shared so Live can use it
- Add: DG-968 Distance Unit: NZCRData column and new setting added.  We don't do anything with these yet.
- Mod: ActivityTracker: Use app_offline.htm to take down IIS app pool while we apply updates.
- Fix: members dashboard ui fix. Made the total counts more mobile friendly.
- Mod: WHSAPI: Add ESR test Should Not Apply Penalty To Handicap As Before Exceptional Score PlayDate
- Mod: Live WHS Sync: handicap changes sync from WHS should now be a bit quicker as we're using a dedicated endpoint for this.
- Fix: WHSAPI: ChangeDateUTC query error (tests failed)
- Mod: WHSAPI: Yanked FullMember.ChangeDateUTC to BriefMember because we need it for the members handicaps endpoint.
- Add: WHSAPI: /api/v1/members/handicaps endpoint for getting updated member handicaps in bulk (1,000 at a time).
- Fix: Org: new adjustments page errors when posting an empty Expiry date for adjustments
- Mod: HandicapProviderWHS: call member handicap endpoint instead of member endpoint for supersonic speed
- mods: Activity Tracker table schema updates
- Mod: SSO: Only show the login warning to users who are navigating via DotGolf Live.
- Mod: SSO: If you login as an association, then navigate to Live, it's sort of broken and sort of working.  The user will now be taken to Org where they belong.
- Mod: Show the SSO clubid+username warning only to NZ users, and only until the end of 2020.
- Mod: Live: Fix course handicap report marker select ordering
- Fix: SSO Org: Permission page styles fixed.
- Fix: SSO Org: Navbar was showing most of the items if you logged in as a club (even though you couldn't click on them)
- Fix: SSO Org: More problems trying to show the permissions page.
- mod: SSO: UI change. Added the club note as an alert warning.
- Mod: Added a loader to remove the blinking effect
- Fix: SSO Org: ORNS error if null webuser association.
- Fix: SSO Org: ORNS error if null webuser.
- Mod: Changed "loading this page" error message; this isn't a startup error.
- Fix: SSO Org: Another ORNS.
- Fix: SSO Org: Permission page still not visible.
- Fix: SSO Org: Case where logging in as a club and then navigating to Org causes a redirect loop.
- Fix: Org SSO: Show the "no permission" screen if you try and login to Org as a club.
- Fix: SSO: Sprinkled some maxlength properties on input boxes.
- Fix: SSO: Whoops, missed one.
- Cleanup: SSO: Remove SqlConnection references being passed around, since we only support 1 database now.
- Fix: ISVAPI build
- Fix: SSO: Do not null out Database.ConnectionString after an exception.
- Mod: ISVAPI: Added date parameter to endpoints that get Handicaps
- Mod: Added activity tracker in the link.
- Fix: SSO: Logout didn't work due to incorrect cookie prefix.
- Mod [SECURITY]: SSO: a) removed multi database support (no longer needed in the new world).  b) merged Club ID and Username fields together for club logins.
- Mod: More InjectionAttackBlocker Malicious request filters >:(
- Fix: Activity Tracker: Navigation fixes. - added the nz and ireland logo - fixed the ssm parameter for sso and activity tracker
- Mod: Add "%24(nslookup%20" and "../../../../../" as malicious url candidates to InjectionAttackBlocker
- Fix: Removed selectize.min.js from wwwroot/js
- Fix: More deployment testing.
- Fix: Moved 1 file to wwwroot to check if this is picked up by deployment.
- Fix: Added back selectize.min.js
- Fix: Static files deployment issues. Renamed files.
- Fix: Recommit to check if this will be picked up already.
- Fix: No longer call api_AddScore_UpdateHandicap in BraveNewWorld mode - it causes timeouts in Stage.
- Fix: The build is not picking up wwwroot/Shared. Removed Shared path from wwwroot and created a StaticFileOption instead.
- Fix: WHSCourseRatingMinusParEnabled column name typo.
- 
- Fix: For some reason ClubDashboard.js is not being updated when there's a new build
- Mod: Clubs Dashboard - method renames
- Bug: ActivityTracker - shared folder is causing a build error
- 
- 
- Mod: Live/Public: Quick pre-meeting hack to allow 'force' url parameter to show old score listing pages in Brave New World
- Fix: DG-1168: Marco's handicap was quite a way from his USGA projected, leading us to question the new WHS index. Turns out the top x sort order (when selecting acceptable scores) was not correct, ordering by the HD of a child score without considering its parent.  This was only a problem when selecting the top 8, not when calculating the end result, but it meant that the wrong scores got selected, leading to a very high handicap index.
- Mod: Activity Tracker: SQL table updates and objects rename.
- Mod: HandicapProviderLegacy: getHomeMemberHandicaps no longer returns resigned members. (Slope.csv wont show them anymore) #27231 #27301
- Fix: ActivityTracker: Incorrect source folder for publish.
- Fix: ActivityTracker: Web.config file corrected to launch dotnet.
- Add: ActivityTracker: Web.config to make hosting on IIS possible.
- Fix: ActivityTracker: use bin/Release/netcoreapp3.1/win10-x64 for the source directory when publishing to Dev1.
- Mod: Live: Score listing: corrected passport join in Member score listing and removed virtual score checks
- Mod: Public: MyScores - refactor to await gethandicap call AFTER getting scores for smol speed boost
- Mod: Added `netcoreapp3.1` to DotGolf.Core csproj so we can use `dotnet publish` to build ActivityTracker.
- Mod: ActivityTracker: Ignored generated js and js.map files.
- Add: ActivityTracker: build.cmd to appease Jenkins.
- Add: ActivityTracker: Jenkinsfile and build dependencies for internal build.
- Fix: Live: scores page - corrected score counts by excluding virtual scores and sort by PlayDate by default
- Bug: Club Dashboard - ClubDashboard.ts is not loading properly. This is just to refresh the file.
- Mod: Activity Tracker: Added a null checking for the alerts and reminders.
- Mod: #27276 Do not show Handicap Index for NZG Gross tournaments.
- Mod: Live: expire redis score cache when score edited or deleted
- Fix: Connector: File.Delete no longer necessary.
- Mod: Clubs Dashboard - Added the activity alerts and reminders.
- Mod: Connector: Avoid saving the multiframe tiff file to disk because WIA seems to hold on to it, causing our reader to crash.
- Fix: Connector: Dispose of images so that they don't keep the files on disk locked up.
- Add: Connector: Interop.WIA.dll so that we don't have to rely on COM on build servers (these do not have Desktop Experience installed so can't use WIA)
- Add: Connector: Optionally access the scanner using a new WIA implementation.  WIA is the default for new installs, but existing ones are left on TWAIN (for now). Mod: Connector: Refactored TWAIN code to IScanner so that we can plug in new WIA code. Mod: Connector: openTWAIN debug output is now written to the memory log in debug mode.
- Mod: Live: member handicap freeze report for all members
- Fix: WHS: With MARS enabled, the units tests for Away Scores passes, but will break in prod. Fixed Away score endpoint to use a separate connection to the QueryAsync dataReader query when populating the AwayScore pocos
- Mod: Activity Tracker: Added back the reminder email sender.
- Mod: Activity Tracker. Added columns (BusinessId and IsActivityContact) to Contact table.
- Mod: WHS: fixed score tests
- Mod: Activity Tracker: Added Alerts and Reminders in the club dashboard.
- Mod: Activity Tracker: Renamed table businesses to business.
- Mod: Activity Tracker: SQL tables
- Mod: WHS: removed uid parameter from Get overrides for Org, uses the logged in user's organisation. Sped up score test.
- Fix: isLegacyHandicapping mod broke kiosk scanning.
- Mod: api_Addscore: parameterise + change max unplayed holes to 8 for 18 hole markers
- Mod: Reverse Proxy: apply https to newplymouthgolf.co.nz
- Mod: Activity Tracker: Added log IsAlert input.
- Fix: Live: Kiosk: Category limits - #27103. Consider leap year when constructing Category limit "From" and "To" date objects.
- Mod: Removed USE NZ1 from wa_ThirdPartyNotifyWinner
- Mod: WHS: get overrides for org endpoint
- Mod: Club Poco: Fullname no longer appends ' Golf Club' if the Name already ends with ' Golf Club'
- Mod: ISVAPI: unit test data creation fixed to resolve test failures. Now facing code bug when less than 18 holes are sent to the create score endpoint
- Fix: Public: myscores WHS paging not showing because the minifier(?) does something funny when the spread operator is used in a typescript file
- Mods: Activity Tracker: - Renamed table names, from plural to singular - Added the file upload functionality
- Mod: sql: wa_ThirdPartyNotifyWinner: altered the sp so it can be used for Hyundai 13th Hole Promo - sending of winner email notification to NZG
- Mod: WHSAPI: RecalcHistory now takes a command line argument to recalculate the history for a single member (handy for troubleshooting and debugging). Mod: WHSAPI: Comparison utility added to check that stuff is in the union database as well as WHS1.
- Mod: WHSAPI: Reworked GetMembers for speed.  Anything that updates OrganisationMember will now also touch the Member.ChangeDateUTC so that we don't have to do expensive joins to filter by that too.
- Mod: Public: privacy mode settings work in WHS score widget + page. Add $WCREV$ to urls passed to load binding
- Mod: pre-build.cmd: add subwcrev file replacement to all builds
- Fix: SQL: TBP: Fix SQL Exception - Column name 'TicketId' in table '#visible_in_capture_payments' is specified more than once.
- Fix: Removed ActivityTrackerSendRemindersTask. Will be added back when Activity Tracker is ready.
- Fix: Don't attempt to log org javascript errors (for now) because the API doesn't live in /api/JavascriptErrorLogger.ashx in Org.
- Mod: Live: HandicapCertificateReport works in WHS
- Mod: Public: Paging in WHS scores page
- **DFH CODE REVIEWED TO HERE** Mod: TrackerLogToElastic and SqlTraceToElastic updates so they can run on the prod sql box.
- Mod: DotGolf.Mailer performance improvements (already in prod).
- Mod: AppPerformanceTracker is now an IRegisteredObject which means IIS gets moar power to shut it down cleanly. Note that most of our apps (except adweb and org) still use the old PerformanceTracker module which writes to the TrackerLog table on DEV4.  I didn't do the upgrade to this old code because it should really be obsoleted and replaced in all our apps.  I'm not doing this upgrade across all the apps today because I'd like to ensure this last change is stable first.
- Fix: Bollocks.
- Fix: Moved PerformanceTrackerModule to a ConcurrentQueue<> to see if it'll help the array out of bounds error that is thrown by Public occasionally.
- Mod: Live: Course handicap report shows 9 hole markers better
- Mod: Live: Course handicap report shows 9 hole markers better
- Mod: Public: WHS scores page shows casual scores
- Mod: Live: Course handicap report fixed as per Karen's feedback (halve handicap for 9 hole markers)
- Mod: DotGolf.Message Service: Error in ErrorLogger, whoops.
- Mod: DotGolf.Message Service: Store errors in the DebugLog instead of attempting to write into a file on disk (which doesn't exist and crashes the service...)
- Mod: golf.co.nz: sponsors: removed Winefriend, added Tower Insurance
- Mod: Live: Refactor fetching WHS member scores into new method
- Fix: ExceptionLog_FIFO trigger performance improvements - we were hitting heaps of deadlocks when lots of exceptions were being inserted.
- Mod: DG-1107 part 16 of ?: New course handicap calculation for Eclectic competitions (net/half-net calculation)
- Mod: DG-1107 part 15 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Mod: DG-1107 part 14 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Mod: DG-1107 part 13 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Mod: DG-1107 part 12 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Mod: DG-1107 part 11 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Mod: DG-1107 part 10 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().
- Fix: Someone did a SlopeRating <-> CourseRating swapsie in the kiosk.  I've fixed this and checked - it wasn't displayed anywhere.  Phew.
- Mod: DG-1107 part 9 of ?: New course handicap calculation in Marker.cs::CalculateCourseHandicap().  I removed some unused parameters from this method - prepare for broken builds...
- Mod: Public: WHS scores widget works in scores page (1 page, no score detail).
- Mod: Activity Tracker: Reminder - added DueAsUTC - handling of datetime as UTC
- Mod: Activity Tracker: Reminder email sender task.
- Mod: DG-1107 part 8 of ?: New course handicap calculation for score entry (api_AddScore).
- Mod: DG-1107 part 7 of ?: New course handicap calculation for Connector based card printing.
- Mod: DG-1107 part 6 of ?: New playing handicap calculation for the Draw Card Printer (tournaments system).
- Mod: Instead of throwing "System.Exception: Expected a numeric ClubId on the query string." just redirect the client off to / to avoid exception log spam.
- Cleanup: Removed CardPrint.asmx from DotGolf Live as it has been obsolete for some time; all Connector installs should now be using ConnectorAPI.
- Fix: SQL error caused CourseHandicapReport to crash.
- Fix: CasualGolf.API: Member Search: almost refactored away confusing tri-state completely, but didnt want to change UserController SearchClubMembers webmethod signature
- Fix: Course Handicap Report will now work for unions with or without the CR-PAR adjustment enabled.
- Mod: DG-1107 part 5 of ?: New playing handicap calculation for DotGolf Live - Member Best Score report.
- Fix: Adweb: FindMembers / Member Search: refactor applied.
- Fix: Org: FindMembers / Member Search: refactor applied.
- Fix: ClubCMS: FindMembers / Member Search: refactor applied.
- Fix: ISVAPI: FindMembers / Member Search: refactor applied
- Fix: API: FindMembers / Member Search: almost refactored away confusing tri-state completely, but didnt want to change BulkEmail.asmx webmethod signature
- Mod: DG-1107 part 4 of ?: New playing handicap calculation for DotGolf Live - competition division player count estimate (EstimateDivisionPlayerCount)
- Mod: FindMembers / Member Search: refactored away confusing tri-state member search params. Build will break, i will fix. resolves #26001
- Mod: DG-1107 part 3 of ?: New playing handicap calculation for DotGolf Live - competition eligibility checks.
- Mod: DG-1107 part 2 of ?: New playing handicap calculation for DotGolf Live - score entry control updated.
- Mod: Cleaned up old obsolete 'straya code.
- Mod: DG-1107 part 1 of ?: New playing handicap calculation for DotGolf Live (if WHSEnabled=1, and depending on WHSCourseRatingMinusParEnabled in Settings table).
- Add: Settings.WHS* columns as we need this stuff in stored procs and the like.
- Fix: Oops, accidental commit.
- Mod: CompetitionSelectControlService: Removed old Aus code.
- Fix: WHS client: Deal with some score upload error conditions gracefully rather than throwing ORNS (causing log entries).
- Add: DebuggerNonUserCode to HookManager.Fire as this makes debugging hook code a lot easier.
- Fix: API: ScorecardController: save-round-setup endpoint inserting extra rows intended for playing partner in the ScoreEntryStage table.
- Mod: Activity Tracker: Added reminder and refactored ajax calls (changed from success to done).
- Fix: #26825 Logic bug caused the BySlotDate parameter of the TB Green Fee Detail report to be reversed, reporting by booking date instead of captured date and vice versa.
- Mod: ClubCMS: included shared ckeditor and knockout files
- Fix: Live: Handicap cert report
- Fix: Org: member scores page wrongly named binding
- Fix: ClubCMS: rMyAccount: only go through the instalment related code if EnableChangeToInstalment is true
- Fix: Org member scores page
- Fix: Build. Need to update HandicapCertificateReport for WHS.
- Mod: Live: MemberScoresWHS all working. Removed combined scores from member scores page to pretend we never had them. Still need to fix Handicap Cert report.
- Mod: ClubCMS: sql: CWControlProperty inserts
- Mod: ClubCMS: sql: CWMembershipApplication add custom columns
- Mod: Live: Help: Allow Online Signup with Payment: just updated the help text
- Mod: Live: Categories: Default: Member Signup section: text updates only
- Mod: Live: Subs: Settings: Fees: style and text updates only
- Mod: Live: Subs: Settings: Fees: handle transaction fee null values in NZGreenFeeData..Club. If the club doesn't have a record NZGreenFeeData..Club, hide the entire form and display a message instead.
- Mod: ClubCMS: rMembershipForm: added the two custom text fields
- Mod: ClubCMS: Member Signup V2: just renamed a method from PopulateCustomDropDownLists to PopulateCustomFields
- Mod: ClubCMS: Member Signup V2: added two custom text fields
- Fix: Styles in /shared/clubhealth are now a little less messed up.
- Add: WHS client: New clubs inserted into Org will now be sent to WHS.
- Mod: Activity Tracker: Added the ability to create new contacts in the new activity page.
- Fix: Build error caused by old reference to Settings.WHS.CutoverAtUTC.
- Add: WebUser.FromHttpContext.LocalNow and WebUser.FromHttpContext.TimeZone to make it easier to work with timezones when webservers are in UTC. Mod: Settings.WHS.CutoverAtUTC removed in favour of Settings.WHS.CutoverAtLocal which is now expressed as a local date and time depending on your region.
- Mod: Kounta: rename defaultCompFeeRegex to nonDefaultCompFeeRegex for clarity
- Fix: Kounta: Remove barcode from comp fee products
- Mod: ClubCMS: Member Signup V2: add the ability to disable prorata amount. E.g. Futures Waikato's periodic membership is a fixed $120. (But the club will have to adjust the membership item to $60 when they have to.)
- Mods: Activity Tracker: Update contacts.
- Mod: ISVAPI: remove shortname from Course
- Mod: ISVAPI: Renamed Brief.Club UID to ClubUID
- Mod: sql: wa_NettEagle_EmailMember (Hyundai 13th Hole): just modified the sp to define the font for the body text (td level)
- Fix: ISVAPI: populate club info in course object, Add better debug support
- Mod: Activity Tracker: Create new contacts.
- Fix: WHS: delete 1 day old localDBs each test run
- Fix: missing using in Gender.cs
- Fix: ISVAPI: Course endpoint returns markeruids
- Fix: ISVAPI: Course endpoint returns markeruids
- Mod: sql: Hyundai 13th Hole: wa_NettEagle_EmailMember: updated the create sp script: exclude members without a handicap index yet, remove "top x" (for testing only)
- Fix: WHSAPI: ORNS exception when updating a home club member via the API if that member does not have a Member.HomeOrganisationId set.
- Fix: WHSAPI: If you delete a score, the system would try and pair up existing orphan 9H scores in the history in error (even if scaling is used), because the Handicap Index rule wasn't checked.
- Fix: WHS: Better way of checking whether a score is international (CountryId).
- Add: WHS: Home/secondary club member updates sorted; should now be able to add secondary members and do homeclub updates to existing people.
- Mod: Removed seemingly obsolete method Score.DeleteScore.  Will see what Jenkins makes of this.
- Fix: Scores that were deleted from the Live UI were not deleted in WHSAPI; there was no delete hook fired.
- Fix: WHS: unit test database setup failure
- Fix: WHSAPI: Crashbug creating new members because of update mod.
- Add: If you call the members/{uid} endpoint with a homeOrganisationUID, the member's homeclub is updated (if the ISV has access or the member is an away member).
- Mod: WHS: unit test intermittent failure - set timeout on dacpac command and always wait for process to finish
- Fix: Live: Load all holes attempted value correctly in Adj Gross score entry
- Fix: Bump version
- Fix: Kounta card swipe fix for Cambridge.
- Mod: WHS: unit test intermittent failures. 🐿️ . I give up
- Mod: Public: WHS widget hides Adjustments column unless there are adjustments
- Mod: Live: WHS Score page hides Adjustment column unless there are adjustments
- Mod: WHS: unit test db create process.HasExited check to try fix weird "Process must exit before requested information can be determined" error in jenkins
- Add: WHSAPI: Ability to add an existing WHS member to a club.  Previously we could only create brand new members.
- Mod: WHSAPI: Added HD values into the handicap index explanation.
- Mod: WHSAPI: If PCC affects a course, update member handicaps for all members who played that course.
- Add: Live: TabMemberScoresWHS which shows in BraveNewWorld
- Mod: WHS: fix brief brief in swagger gen file.
- Mod: ClubCMS: rMemberSignupV2: added the two custom fields (dropdown lists) to the form
- Mod: Live: Course handicap report better for multicourse clubs now
- Fix: Loyalty: Kounta: Do not process account credits and loyalty if the passport record belongs to a function customer and is not a club member.
- Mod: ClubCMS: sql: insert new control properties for Member Signup V2
- Add: sql: create new stored procedure: wa_NettEagle_EmailMember. This will email each member who gets a nett eagle (or better) on the 13th hole of any course during the NZ Open week (24 Feb - 1 Mar 2020)
- Mod: Activity Tracker: Topic search enhancements.
- Mod: current WHS cutover date -> April 6th
- Mod: WHS: Exclude HDPrePCC from Full.Score again
- Mod: Public: sped up score handicap diff chart
- Mod: Public: score handicap diff chart uses POST PCC HD (tis a bit slow though)
- Mod: Live: async-ify the WHSScoreInsertedUpdated Hook
- Mod: Activity Tracker: Added activity search criteria.
- Mod: Public: MyGolf handicap diff chart runs off WHS data when in BraveNewWorld mode
- Mod: WHS: Include HDPrePCC in Full.Score
- Fix: WHS: CounterScoreIds moved to the right place in HandicapIndexCalculator
- Mod: Activity Tracker: Added activity search.
- Mod: No more rollover date range or projected handicap when WHS goes live.
- Mod: no-more-suffixes: Remove "N" suffix from DotGolf Live.  This does the most obvious places; there will be more.
- Mod: ISVAPI: Fixed failing score playdate timezone test - saving an Alaskan score and getting it again will preserve the playdate correctly
- Mod: WHS: New HandicapProviderParallel will pull handicap info from Legacy and WHS simultaneously, returning the legacy results and discarding those from WHS.  This is for performance testing; we want as few surprises as possible.
- Mod: WHS: In BraveNewWorld mode, hide all the old SLOPE.CSV, Legacy Upload, NZGA.TXT upload and batch status report stuff.
- Mod: Do not allow SlopeExport.ashx in BraveNewWorld.
- Fix: Live: WHSScoreInsertedUpdated should convert score playdate to UTC using the Course timezone, not the captured club timezone
- Fix: Cachebuster tag for MyScoresWHS.html.
- Mod: Put back the Redis code.  Fixed the Elasticache resolver by using IAmazonElastiCache (the new .Net Core way of doing AWS) and adding config.ConfigureAWS() plus some haxx to make that play nice in .Net Core. Because of these changes, we no longer need the AWS section in the appsettings.development.json file.  Should do the same in WHS if we are able.
- Fix: Live: Correct Social members returned from basic Member Search
- Mod: Public: Hide the explain link for the WHS handicap and replace it with a magic link (ctrl+shift+click on Current Handicap header).  There was a concern that the explanation text would (in its current tech-speak shape) cause more confusion for golfers than it would help to explain the situation.  So we've hidden it by default so that we can still access it if we need to.
- Mod: sql script was erroring unit test DB create
- Fix: Public: Fix # 26589 - MyAccount page fails to load when a member does not have any SUBS statement lines.
- Mod: ClubCMS: Membership Form: added two customisable dropdown fields
- Mod: ClubCMS: sql: CWControlProperty: insert new properties for the Membership Form control, and update an existing property name
- Mod: ClubCMS: sql: add new columns to CWMembershipApplication table
- Mod: DG-1078: Remove column defaults for WHS UIDs.  These are now inserted using hooks.
- Mod: Use the new WHS.CutoverDateUTC to restrict adjustments and course handicap report pages
- Mod: Settings.WHS.CutoverAtUTC changed to return a future date even if we're not in BraveNewWorld yet.
- Mod: MyScoresWHS widget is now visible to all golf.co.nz users; DotGolf-only code removed.
- Mod: DG-337: New mixed gender/tee results adjustments now that the WHS optionally includes the CR-PAR adjustment to the playing handicap.
- Add: WHSAPI: Return the ScoreUIDs for the scores that form part of the handicap index calculation (the best 8ish).
- Fix: #26505 When validating dates for category limits, Feb 29 was producing an error because validation wasn't considering leap years.
- Mod: Public: Hash memberId passed into WHS Score widget web methods
- Mod: Live+ORG: Member Handicap adjustment report now flips over to WHS version ONLY in BraveNewWorld mode
- Fix: WHSAPI: One more POST organisations error.  Work, damn it!
- Fix: WHSAPI: POST organisations did not work (sql error).
- Add: WHS client hook code that will be triggered when a club is inserted into the database.
- Mod: Member Handicap adjustment report no longer includes old data Mod: Live: Fix member handicap freeze report to match ORG
- Fix: TicketId was not being set properly if request.TicketId was present.
- Add: Org: Member Handicap adjustment report runs off WHS now
- Fix: WHSAPI: Missing MarkerHistory.DeletedDateUTC filter.
- Fix: WHS marker updated hook problems fixed. - NZCRData.WHSMarkerUID and WHSMarkerHistoryUID values were never actually updated (DataObject.SaveChanges() wasn't implemented for Marker) - Don't send international markers (these are handled via the international scores data structure)
- Fix: WHSAPI: Missing MarkerHistory.DeletedDateUTC check.
- Fix: WHSAPI: POST MarkerHistory endpoint is now idempotent.  Unit test added for an edge case.
- Mod: WHS: update override tests to include UID
- Mod: WHSAPI: failing CreateMarkerShouldBeIdempotent test :(
- Mod: WHSAPI: Whine if there is nothing in Holes[] when creating a new marker.
- Fix: API: AccountsController: API AXAccountTransaction query performance - Add AXAccountId to both RIGHT OUTER JOIN clauses (e.g. Kounta, Vend) to make use of the SQL index on AXAccountTransaction. Avoid dirty reads by removing the "with (nolock)" SQL hint.
- Fix: WHSAPI: GET /api/v1/markers/history/{uid} endpoint had a sql error in it.  Fixed and unit tests added.  More data errors found and sorted.
- Mod: Org: Handicap freeze page doesnt crash when WHS is OFF
- Fix: Org: remove hardcoded test id from freezes
- Fix: WHS: override test fixed
- Mod: ClubCMS: rContactForm: just updated the default Google Recaptcha keys
- Fix: Org: Handicap freezes session rubbish
- Fix: Another place where OwnerMemberId and OwnerNonAffiliateId were not being saved.
- Fix: OwnerMemberId and OwnerNonAffiliateId were not being inserted into TBTicket.
- Fix: Something off with linq2sql, I have rewritten this in good old Dapper instead of trying to figure it out.
- Fix: api_AddScore double negative boolean caused every score to throw an error when editing/saving.
- Fix: SQL error here caused Capture Payments page to error out in Live.
- Mod: Updated swagger.g.json.
- Add: WHSAPI: Documentation to get rid of compiler warnings.
- Fix: Don't call WHS score hook for negative ID scores (these are RSScore records).
- Mod: Org: Finished new freezes
- Mod: WHS: Order overrides by EffectiveAtUTC
- Mod: Performance: Changed ClubMember joins out for CMember where possible/appropriate.
- Mod: WHS: get Overrides returns all overrides
- Mod: Performance: Changed ClubMember joins out for CMember where possible/appropriate.
- Mod: Score entry now allows the user to hit "*" as a shortcut to tick/untick the "all holes attempted" box.
- Mod: Activity Tracker: Added the contact page
- Add: IX_NonAffiliate_CasualGolfers for performance.
- Fix: Removed two silly home url redirects (just use /)
- Fix: Performance: Additional WHERE condition added to improve result system performance.
- Mod: Live: 'Course Handicap Table' -> 'WHS Course Handicap Table'
- Mod: ClubCMS: bindings: added futureswaikato.co.nz and www.futureswaikato.co.nz
- Mod: Reverse Proxy: added S,W,0,1,futureswaikato.co.nz
- --DFH CODE REVIEWED TO HERE-- Mod: Org: style changed on adjustment page
- Mod: Org: style changed on adjustment page
- Mod: Live: InvoiceReport: Removed the hardcoded payment instruction. Clubs can use either the "Additional content on invoices" or "Footer text on invoices" in the Invoice settings area to add their payment instructions.
- Mod: Adweb: ClubCMS: Pages: order the control property settings by type then by name
- Mod: ClubCMS: UCourseListWithAds.ascx: when the colour name returned is a hex code, strip off the # from the string assigned as the css class name
- Fix: WHSAPI: MarkerHistory.Par value was being reset to zero and not set to the sum of the incoming par values.
- Fix: WHSAPI: Markers endpoint was updating the EndDate of a random markerhistory, not the one we're working on.
- Mod: ClubCMS: Shared: Course.cs: MarkerNameToColor: defined slate colour
- Mod: org: better validation + bugfix when saving Freezes
- Fix: WHS: Changes to existing markers were being considered brand new markers.
- Fix: ClubCMS: DBUtilities: GetValidClubCategories: handle null base subs amount
- Fix: WHS: Course changes in Org were not being sent to WHS for card printing clubs (when using forced approval).
- Fix: WHSAPI: Trick for young players.  swagger.g.json needed rebuilding after updating from source control.
- Add: WHS: We can now create brand-new markers in the WHS in response to course changes.
- Fix: Don't crash out TabMember if we can't get a handicap from WHS.
- Mod: WHSAPI: Refactored to make Swagger do the right thing generating the API client.
- Mod: WHSAPI: Changed markers endpoint (this is a breaking change) and refactored to allow inserting brand-new markers.  Jenkins won't like this.
- Mod: Activity Tracker: Added the functionality to add CC in the topic
- Mod: ORG: new Handicap adjustments save to WHS, loading is bugged though
- Mod: Reverse Proxy: sites.list: added mcleansisland.cw.golf.co.nz and newplymouth2.cw.golf.co.nz, updated waikatojunior.cw.golf.co.nz to futureswaikato.cw.golf.co.nz, applied https to christchurchgolf.co.nz in anticipation to the upgraded site's go live
- Mod: ClubCMS: bindings.list: added mcleansisland.cw.golf.co.nz, newplymouth2.cw.golf.co.nz, updated waikatojunior.cw.golf.co.nz to futureswaikato.cw.golf.co.nz
- Fix: Forgot to commit this file, part of the performance improvement for member handicap sync.
- Mod: WHS handicap sync: performance improved by using a single update query to set new handicaps.
- Mod: WHSAPI: Performance: Only update Score.IsEligibleForHandicapping if it has changed (there is a penalty to updating this because of a covering index). Mod: RecalculateScoresAfter() now supports a TextWriter for logging output. Add: Index to OrganisationMember to speed up sync queries. Mod: RecalcHistory now runs multi-threaded when doing a whole-database recalculate.
- Mod: Reverse Proxy: added -,W,0,1,waimairibeachgolf.nz
- Mod: ClubCMS: bindings: added waimairibeachgolf.nz and www.waimairibeachgolf.nz
- Mod: Org: new handicap adjustment accidental commit fix
- Mod: Org: new handicap adjustment accidental commit fix
- Fix: API: load-player-scorecard - get the playing partner's info only when Scorecard.PlayedWithMemberID is not null or 0.
- Fix: ISVAPI: check DeletedDate in GetScore endpoint
- Mod: Org: new handicap adjustment page calls WHS
- Fix: API: Jenkins Build error
- Fix: API: ScorecardController: submit-scores endpoint - Calculate comp results if a scorecard is linked to a competition. Fix: API: ScorecardController: list-eligible-players endpoint - Friends list not sorted in alphabetical order.
- Fix: ISVAPI: missing XML comments
- Mod: Live: CourseHandicapReport default to datetime.now
- Fix: Live: people entered into 5cc by accident #25832
- Mod: Live: CourseHandicapReport style changes again FINALLY DONE
- Fix: Scheduled Tasks: Redis interlocking didn't work because I put it in the wrong method...
- Mod: WHS member sync now has a 24 hour timeout if it's the initial sync.  Normally the timeout is 1 hour.
- Fix: Scheduled Tasks: Do not allow the same scheduled task to be started if another is already running (using Redis locks).
- Mod: WHS: Removed mistaken #pragma warning disable CS1591
- Mod: Changed Stage to work in WHS BraveNewWorld mode.  Removed most of the WHS sync code except for member handicaps, because in ISVAPI land we will take care of these.
- Fix (preventative): Set ServiceLocator.Thread in ScheduledTasks so that we can use DI in these. I don't think there are any problems at the moment, but this will stop us getting ServiceLocator.Default not set errors.
- Mod: Activity Tracker: Added the adding of new Tags.
- Fix: ISVAPI: Consistently resolve real client IP directly or behind ALB or Nginx.
- Mod: WHS: corrected override POST response types
- Fix: API: BulkEmail: GetTournamentFilters and GetTournamentEmailRecipients: allow the PGA club users to select the PGA association tournament entrants
- Mod: WHS: Split up override create/update POST methods to generate the correct swagger
- Mod: Org: icon change
- Add: Org: New adjustments page
- Mod: #26106: Live: Renewals: Reverting revision 35777. Don't want to affect other things in renewals. I would suggest a workaround instead (tick once off or remove item)
- Fix: WHSAPI: Implemented rounding rules for the HD per section 5 of the E20 v1.0 spec (needed to be to 1dp except for parents of combined score pairs). Mod: Round HDPostPCC values returned via member score listing.
- Mod: Activity Tracker: Added knockout validation
- Fix: Public: MyScoresWHS: no more storing ProfileMemberId in the Session
- Fix: Public: MyScoresWHS: no more storing ProfileMemberId in the Session
- Add: Adjustments and PCC figures into WHS widget.
- Fix: WHSAPI: ESR penalties were all applied against a single HD (the ESR score) instead of being applied against the 20 individual HDs.
- Fix: WHSAPI: Another crash caused by null adjustments on combined scores.
- Fix: WHSAPI: Crashbug when retrieving score listings containing combined 9H scores.
- Mod: WHSAPI: Reduced member scores listing page size to 30.
- Fix: Reverted the poco connection string
- Mod: WHSAPI: Combined score children are now included in the member scores listing. This method was refactored internally to use the HandicapDataManager.GetScores() method (which also calculates penalties and adjustments) rather than its own simple Score query. Unit tests were added to validate the GetMemberScores endpoint.
- Mods: Activity Tracker - added moment - created a template for the activity form - created the log timeline
- Add: Public: new way to load KO modules using a custom binding
- Fix: #26322: TabXeroAssignCreditNotes.aspx.cs: BindGrid(): added missing ClubId sql parameter
- Fix: WHSAPI: Picked up holes were causing scores to be ineligible for handicapping (rather than not-attempted ones)
- Fix: Annoying tabbing in this old school proc.
- Add: Scripted CourseUpdatesNZG job before we drop it.
- Mod: Live: More course handicap rpt format changes
- Fix: WHSAPI: More score eligibility bugs when entered by Adjusted Gross (no scoreHoles[]).
- Fix: WHSAPI: (inconsequential, but fixed anyway) 18H scores were not marked as ineligible if the minimum number of holes == 18 and the score contained fewer played holes. Add: Unit tests added for minimum hole restrictions.
- Mod: WHSAPI: Changed handicap explanation language slightly to account for non-combined 9H scores before an initial handicap is issued.
- Mod: Live: More course handicap rpt format changes
- Mod: Org: member name search defaults to '' instead of undefined
- Fix: WHSAPI: Taken care of a few other intellisense warnings.
- Fix: WHSAPI: Compiler warning about missing xml documentation.
- Mod: WHSAPI: Cleaned up Tests project, removed the doubled up Tests.Tests namespace.  Split Scores tests up into logical groupings.
- Mod: WHSAPI: Implemented minimum number of holes played restrictions (default is 9 for 9 holes and 10 for 18 holes) for a score to be eligible for handicapping.
- Fix: WHSAPI: Error when doing 9H combining on pending handicap for international scores.
- Mod: Live: Finished Course handicap report
- Mod: Poco updates
- Mod: Added the creation of an Activity Log
- Mod: Live: Course handicap rpt date selector and INSTRUCTIONS
- Mod: API: Ability to reset a round. Fix: API: ScoreEntryRec.PlayerName to be in <FirstName>+<Surname's First Letter> format.
- Mod: Live: Course handicap rpt format changes
- Fix: WHSAPI: A few bugs around retrospectively modifying a scoring history for these 9H combined scores on pending handicaps.
- Fix: WHSAPI: IsEligibleForHandicapping flag was calculated based on the old rules.
- Mod: WHSAPI: While using Scaling mode, the rules still allow for 9H scores to be combined while the player has a Pending handicap. This solves the problem of players who only ever play 9 holes never getting an initial handicap.  Now they'll have an initial handicap after 6 9H scores and a fully developed handicap after 23 9H Scores.
- Mod: Live: Course handicap rpt format changes
- Mod: Live: svn ignore dapper dlls in bin
- Mod: add nzgolf logo to Shared/img
- Mod: Live: removed unnecessary #warning
- Add: WHSAPI: Prod settings for debugging against Prod environment (commented out though)
- Fix: ISPAPI: delete score test
- Add: Live: Course Handicap report
- Fix: API: ScorecardController endpoint - Check PlayedWithMemberId column instead of PartnerScorecardId.
- Fix: ORNS again. :(
- Fix: ORNS exception occurs in GetPlayerInfo
- Add: API: Scorecard: Ability to add players without a scorecard.
- Mod: golf.co.nz: added two sub menu items under Play Golf: Love Golf Play and Make Time Play 9 (requested by Matt Q). Also updated the Facebook and Twitter URLs to use https
- Mod: Working contact name search.
- Fix: ISVAPI: Visitors endpoint enumerable issue causing db connection to be null
- Add: API: Scorecard Controller: load-player-scorecard endpoint - Added playing partner basic info in the response. Add: SQL: ScoreEntryStage: Add DeletedDate column
- Fix: Live: dapper contrib error in Merge page
- Fix: #26106: Live: ProcessRenewals_Build.cs: BuildSubsRenewalData: cyclical categories: when getting the latest set of category items, we don't need to join with the ClubItemId (this was causing a problem e.g. Mangawhai where the item defined previously is still being included in the renewals)
- Fix: ISVAPI: removed references to WHS
- FIX: ISVAPI: ACCIDENTAL STARTUP.cs COMMIT
- Fix: Core: dapper contrib correctly ignores Core.Poco.Club.FullName
- Fix: Core: circular reference in Core.Poco.Club.FullName
- Fix: ISVAPI: add memberuid to getmembersforclub
- Mod: Public: WHS faq link - increase padding
- Add: Public: FAQ page for WHS handicaps
- Mod: added System.Data.SqlClient 4.7 to API.Tests,ISVAPI,Live.Tests,Shared because for some reason binding-redirects dont get created for the old version
- Mod: sql: changed 3036 wa_TBFindPayeeKeysForBooking CONTROL.sql to not crash units tests by commenting it out
- Mod: sql: removed duplicate GO from 3027 that was crashing unit tests
- Fix Jenkins Build: Missing from previous svn commit no.35757
- Add: API: Scorecard App: Added "IsSideMatchOn" field in the SaveRequest for enabling/disabling side match.
- Fix: Public: give Linq2Sql DataContext a ConnectionString instead of a closed Connection because it cannot be trusted.
- Fix: Live: DeleteScore works again
- Mod: Live: Wording change to subs import page
- Mod: Live: Can now copy data from Subs balance import into excel #26061
- Fix: Public: Possible connection leaks
- Mod: Activity Tracker: Added api authorization.
- Fix: ExtQuery: Missing a "<div class="field_name"></div>" - action buttons appears left-aligned.
- Fix: Live: Eclectic results were including scorecards that had been removed from the competition
- Fix: Live: Teebooking: Fix #25572 - When you add a new block of 9H or 18H on the timesheet, the "Holes" setting goes back to "Any".
- Fix: Live: Kiosk score entry More button not working #25927
- Mod: ISVAPI: removed InnerError from the API
- Hack: ISVAPI: DISABLED REDIS because it aint working and David is away.
- Fix: Removed assignment to System.Net.ServicePointManager.SecurityProtocol because it was causing compile errors.  I suspect this is also causing runtime errors in Prod.
- Mod: TXT message service: added app.config so we can easily debug against prod.
- Mod: TXT message service: Upgraded to .Net 4.7.2 to bring it in line with our other solutions.
- Mod: Added SSO functionality.
- Fix: Build fix because of club repo refactor.
- Mod: Moved GetClubHierarchies back to repo as it is used in another place.
- Mod: Removed dashboards code from Data Repo. Created a new Reports domain folder.
- Fix: Updates to the Total Casual Golfer count and Club product codes sql queries.
- Mod: Core: kill petapoco package
- Fix: Scheduled tasks csproj was wrong
- Fix: Live: csproj had wrong dapper
- Merged revision(s) 35724 from Branches/Trunk.2019-10-29.one-solution-to-rule-them-all: Mod: Core: Removed petapoco. Use Dapper.Contrib instead. Made POCOs simple ........
- Mod: Shared: Update Dapper to 2.0.4
- Mod: Added UK logos and CSS colours
- Mod: Adweb: 32 char secrets and better field validation
- Mod: Reverse Proxy: sites: added -,-,0,1,waikatojunior.cw.golf.co.nz
- Mod: ClubCMS: bindings: added waikatojunior.cw.golf.co.nz
- Fix: Adweb: IsvCredentials crashed when no records were returned
- Fix: Live: SCORE HANDICAP DIFFERENTIALS report wasnt working (unless filtering by member no.)
- Add: Core: Dapper.Contrib micro ORM to replace petapoco
- Add: Adweb: Generate new credentials for new ISVs
- Mod: ISVAPI: Moved IsvApiRole to DotGolf Core so adweb can see it
- Mod: ISVAPI: Rename Role to IsvApiRole before I move it to DotGolf.Core (adweb needs it to create ISVs)
- Fix: Markers dropdown UI is messed up. Added a width to fix the issue.
- Mod: Live: Automatic payment type mapping for Vend/Kounta now removes the phrase DOTGOLF when deciding if a payment type can be automatically mapped.
- Fix: There was a mismatch between the Membership Total report and dashboard. I removed the region in the condition.
- Mod: Live: Cache WHS client SSM parameters
- Add: Live: Score deleted hook to update WHS
- Fix: API: Scorecard: Return holes in play order based on the selected starting hole (tee). Mod: Shared: Marker: Make IsBack9Course get accessor public.
- Fix: no-more-ticketno: ConfirmSlots wasn't assigning the new TicketId as it should.
- Fix: no-more-ticketno: ConfirmSlots wasn't assigning the new TicketId as it should.
- Mod: WHS: Marker tests working again
- Mod: WHS: Creating new markerhistory updates end date of previous markerhistory.
- Fix: no-more-ticketno: Syntax error in one of the procs.
- [MAJOR] Remove TicketNo and switch to Ticket.Id for all ticket references.  TicketNo was a surrogate primary key value and, limited to 10 digits, we were about to run out of them.
- Mod: Renamed sql script to get back in sequence.
- Mod: WHS+Live: COMPLETLY remove ability to update MarkerHistory because Org cant do it.
- Mod: WHS: make failing tests pass
- Mod: WHS: dispose serviceProvider in testBase
- Mod: WHS: Move test output helper from PCC tests to TestBase, resolved stupid Dispose warnings in TestBase 🙄
- Mod: Live: WHS marker updates create a new WHSMarkerHistoryUID, so assign it back to the marker we've just posted
- Mod: WHS: Can update marker hole data
- Fix: Live+WHS: Swaggerfile didnt like me adding 404s, had to manually add the default response type
- Mod: Live: WHSMarkerUpdated hook finished
- Mod: WHS: add 404s to applicable endpoints
- Fix: Build after WHS swaggerfile change
- Mod: WHS: Marker created with holes
- Mod: WHSAPI+ISVAPI: added a space
- Mod: WHSAPI+ISVAPI: Better model state error reporting
- Fix: WHSAPI: Couple of broken unit tests after the override[s] rename.
- Add: WHSAPI: /api/v1/members/{guid}/overrides endpoint to list all overrides for a member. At present it is not possible to get a list of all overrides for all members, but we'll wait until that is needed.
- Mod: WHS: Give David his green bar back (by skipping unit tests until the story is finished, shhh)
- Mod: ScheduledTasks: small code style fixes
- Mod: Live: rename WHS Course update hook to Marker update
- Fix: builds
- Mod: WHS: basic marker insert
- Fix: WHSAPI: PCC calculation job is now much faster, leveraging Member.LastEnteredDateUTC to filter down to a shorter list of scores. Mod: RecalculateQueuedScores now does batches of 100. Fix: Member.LastEnteredDateUTC was not updated for pending handicap members. Mod: RecalcHistory will now send out StatsD updates for remaining members to recalculate.
- Mod: WHS: Marker update flags old record as deleted
- Mod: Shared: update nswag version
- Mod: Live: UpdateCourses error logging
- Fix: Builds
- Mod: Live: Marker updates (no holes)
- Mod: WHS: Get MarkerHistory/update existing MarkerHistory
- Mod: Live: Replace AppUrlResolver checks with WHSMode check
- Fix: Petapoco didn't work properly with .Net Core 3.1+ due to a weird issue trying to get a reference to SqlClientFactory (it moved from System.Data.dll to System.Data.SqlClient.dll).
- Fix: ActivityTracker: We needed an appsettings.Development.json file to make debugging work properly.
- Fix: API: Jenkins build errors.
- Mod: Added DI
- Add: API: Scorecard: Initial commit - endpoints required for the mobile score entry app.
- Fix: Upon checking, appears I have clobbered some changes.
- Mod: #25629: ClubCMS: rMemberSignupConfirmationV2: on successful signup, create the member in the POS system(s). This is applicable to clubs with the POS product (e.g. Pakuranga).
- Mod: More Score.DeletedDate IS NULL.
- Mod: Sprinkled Score.DeletedDate IS NULL to taste.  That was mildly unpleasant.
- Fix: #25693: golf.co.nz: My Account: filter by CreateDate instead of DocumentDate (which is sometimes a future date, and this prevents the invoice from being displayed on the My Account page)
- Fix: wa_deletescore was messing up member.last_playdate when deleting scores.  Modified so that it now recalculates the last playdate using the remaining scoring history, after deleting the score.
- Cleanup: wa_deletescore cleaned up to remove old crud, unused variables, commented out code and the like.  This commit doesn't change what it actually does.
- Mod: Removed api_DeleteScore from DotGolf.Core.Tests CreateDB.sql script.
- Mod: Drop [api_DeleteScore].  Sayonara!
- Cleanup: Removed api_DeleteScore from comments and sql script.
- Mod: Another api_DeleteScore reference; doesn't need to do the extra validation so we call wa_deletescore directly.
- Mod: Another api_DeleteScore reference; doesn't need to do the extra validation so we call wa_deletescore directly.
- Fix: WHS member hook handles blank email addresses (pass null to WHSAPI instead of blank string)
- Add: WHS cleanup scheduled task (not scheduled but can be run manually from the command line)
- Mod: Removed duplicated Score.DeleteScore logic; this now uses ScoreRepo.DeleteScore() from DotGolf.Core.  It also no longer uses api_DeleteScore; calls wa_deletescore directly.
- Mod: Public: Removed non-affiliate whs scored check from MyGolf default page since it should live in the widget, not the calling page
- Add: WHS: Marker controller skellington
- Fix: Live: regex
- Fix: Live: Kounta POS error because of regex problem
- Activity Tracker initial solution commit.
- Mod: WHS widget: Changed "why?" to "explain" and made the Low Index a bit lighter to focus the user on their Current Index.
- Mod: Hide WHS widget for non-affiliates (Marcus also did a mod but I'm committing this so we can talk about which one to keep in the morning)
- Fix: Public: Hide whs score widget for nonaffiliates but making sure ProfileMemberID is set
- Fix: Public: Hide whs score widget for nonaffiliates
- Mod: WHSAPI: More explanation fine tuning.
- Fix: WHS widget - show pending handicaps as "Pending". Fix: If no low handicap, don't even show the heading. Fix: Don't show the score table header if there are no scores.
- Cleanup: Don't need this connection anymore.
- Mod: Public WHS client: Swallow WHS requests if they take too long, and do not log exceptions.  This is a temporary measure until we have everyone's histories calculated.
- Fix: Live: WHSPI bug where duplicate entities named Course caused Course update object to be excluded from swagger gen
- Fix: WHSAPI: duplicate entities named Course causing Course update object to be excluded from swagger gen
- Fix: Core: add top 1 to an executescalar query so it always returns a scalar
- Fix: WHS client: Country query was failing due to Dapper invoke error; countries were getting synced for every score entered.
- Mod: WHSAPI: Update RecalculateFromAfterUTC after recalculating history as part of a score listing call.
- Fix: Changed deprecated jquery 'live' code
- Fix: Analytics: RoundsByDateForRegion.cshtml: moment date conversion: updated D/M/yyyy to D/M/YYYY
- Fix: Live: Admin Booking: Carts - Revert mods from Rev no. 35406 and 35424.
- Mod: Reverse Proxy: apply https to helensvillegolf.co.nz S,W,0,1,helensvillegolf.co.nz
- Fix: Small explanation tweaks.
- Fix: WHSAPI: Explanation wasn't always returned (particularly for pending handicaps). Fix: Compile warning in unit tests.
- Mod: Public: WHS score widget makes calls to WHS for load testing.
- Mod: WHSAPI: Added an explicit parameter for scaled adjusted gross to ScoreCalculator.CalculateHD() so that we're forced to think about that. Fix: Corrected CalculateHD() calculation; the course rating needed to be doubled when dealing with scores scaled to 18H.
- Fix: Live: mitigated Kounta POS error because of renamed comp fee product
- Add: Kounta: Settings: Sync Kounta products by tag (DotGolf-only).
- Fix: Course changes table is not displaying properly when printing. Added a css fix.
- Mod: Store the Scaled Adjusted Gross value separately in the Score table so that we can display the traditional Adjusted Gross value to the user.  The Scaled value would be very confusing to show in a score listing. Mod: Include Hole{1..18} in the IX_Score_MemberId_Cover index for performance.
- Mod: Org: Course changes sql job moved to a scheduled task
- Fix: WHSAPI: Hole-by-hole data was not sent to RecalculateScoresAfter(), therefore scores were not re-adjusted in light of new handicap index values. Fix: WHSAPI: dynamic update didn't work (threw runtime exception) if the Adjusted Gross value was to be updated. Fix: HandicapDataManager threw exception in the case of an adjusted value that changed (because it is outdated and does not match the newly calculated one).
- Fix: WHSAPI: 9H score scaling wasn't properly summing the net par adjustment for the synthesized 9 holes.
- Mod: WHSAPI: Recalculate member scoring history on demand if we call /api/v1/scores/member/{guid}.  This helps golf.co.nz to be up to date pretty much immediately while we're waiting for the background recalculate job to finish.  After we've moved everyone over we could get rid of this.
- Mod: WHS preview widget - properly format plus handicaps.
- Fix: WHSAPI: Hole-by-hole adjustments were being done with incorrect stroke indices because the markerHoles[] parameter passed to the ScoreCalculator was unordered.  Fixed by running this array through an OrderBy before doing anything with it.
- Mod: org: Move live_InsertCourseChanges into C#, drop the proc
- Add: Live: Adjusted gross scoring All Holes Attempted checkbox
- Fixes: ORG: - Live scoring table input width and height Fixed issue - Draw formula UI fix
- Mod: Added ?rev=$WCREV$ in Standard.css
- Mod: Make the production warehouse API the default one (for now, until it goes away in favour of the new US ALX server)
- Fix: Live: DG Kounta POS - when syncing profit centres with Kounta, add a dummy product so Kounta syncs the reporting group to the Xero add-on
- Mod: Minor UI change - bubble UI change SQL: Update the [Live_HomeUrl] to '/members/membersdashboard.aspx' for associationId 1000
- Mod: WHS widget on golf.co.nz: improvements on look-and-feel, now shows the current and low handicap indices and an explanation.
- Mod: WHSAPI: Small explanation text tidyups.
- Mod: WHSAPI: Surface the Explanation - for real this time.
- Mod: WHSAPI: Surface the low handicap index and explanation values when you get a member handicap via the API. Mod: Recalc History utility can now run as a console app in an infinite loop.
- Fixes: Master.ShowMessageBar removed in Club Update.aspx Add non-minified files to /shared/js and add it to the litJQueryScriptTagDebug literal in Standard.Master Check rogue signalr references at the top of Standard.Master •TabMemberScores.aspx needs jquery.signalr
- Fix: ClubCMS: Member Signup v2: prorata: corrected the note about the discount
- Fix: Public: Forgotten password doesnt work for some members #25637
- Mod: ClubCMS: Web.config (Dev): updated the LiveInterClubMessageReaderUrl value from my old local URL to the dev URL
- [MAJOR] Reintegrated Branches/Trunk.2019-12-09.org-reskin to Trunk.
- Add: Live: Kounta POS competition fees should respect profit centres (Needs more testing when XERO api stops failing)
- Fix: WHS client: Send <null> for picked up holes rather than 0.
- Add: #24880 Kiwibank KBB DD export file format per their documentation (emailed to me Fri 17/01/2020 10:40 AM).  It is the same as the BNZ one except for the file extension (KBB).
- Mod: ClubCMS: rMyAccount: display a list of the member's credit notes (CN, OP, PP) as well
- Mod: ClubCMS: Shared: ClubMember: added GetMemberCreditNotes
- Mod: ClubCMS: Shared: Member: add GetMemberCreditNotes. This will be used on the rMy Account control.
- Mod: WHSAPI Import Utility: Credentials for Prod and Stage, make timezones and UK/NZ imports play nice, updated IMPORT_PROCEDURE document,
- Cleanup: Removed TODOs.Where(x => x.IsDoneAlready)
- Fix: If you enter scores for the same date/time, they get adjusted to have their time component in a natural sort order, but unfortunately subsequent scores for the same date do not get a HandicapIndex.  The handicap calculation was using the incorrect time component.
- Mod: ClubCMS: Member Signup Confirmation v2: correct the CWMembershipApplication.Amount saved when a user tries to pay again. Slightly updated the text in the email notification sent to the club when a new member signs up.
- Mod: WHS hooks now update Score.WHSMemberUID with hand-coded SQL since Score.SaveChanges() is not implemented. Fix: SQL error in Country query (for international scores). Fix: WHS score hook crashed because of Dapper QuerySingle usage.  Some .net standard bollocks.
- Fix: WHSAPI: If you post multiple scores for the same PlayedAtUTC, each score should get its play time adjusted automatically so that they fall in chronological order.
- Fix: WHSAPI: Post member was returning IActionResult instead of ActionResult<CreatedObject> which meant that the NSwag generated code didn't know how to process a 201 response.
- Mod: ReverseProxy: apply "https" to stclairgolf.co.nz
- Mod: #24728: golf.co.nz: redirect /whs or /WHS to /About/Handicapping.aspx
- Mod (breaking): WHSAPI: BriefScoreMarker.{CourseRating, Slope, IsNineHole, Par} are now always populated, for local and international markers.  To reflect this, their data types are no longer nullable and descriptions updated.
- Mod: WHSAPI: Performance: Disabled the memberCache with a hack (enableCache = false) because it was causing data problems. - Added HandicapDataManager.GetMemberOverridePendingHandicap() to replace a full petapoco Poco.Member retrieve. - Bypassed PCC and initial handicap override lookups in the initial import phase. - Using StringBuilder for explanation text now. Fix: Avoid exception if the scaled adjusted gross value is > 255.  Instead we clamp it to 255. Mod: IX_Score_MemberId_Cover updated to cater for international scores. Mod: Small documentation update to clarify GetCurrentHandicapIndex() usage.
- Mod: ClubCMS: Member Signup: consider the redemption period when validating the voucher or getting its value
- Mod: WHSAPI: We now include marker slope, 9H, course rating, par and course/country names in Score objects, international or not.  This will help for when we display member score listings; it avoids an extra NZCRData lookup for every record.
- Mod: ClubCMS: sql: insert records into CWControlProperty for existing controls
- Add: ClubCMS: sql: create tables Voucher and VoucherType, insert two records into the VoucherType table
- Mod: ClubCMS: Member Signup: add the ability to accept promo voucher code (e.g. no joining fee promo code). This feature will initially be used by Flexiclub.
- Add: ClubCMS: Shared: added the Voucher data object
- Fix: Live: Vend POS no longer treats cart fee payments as Online Payments when accompanied by an online green fee
- Fix: Live: Kounta POS no longer treats cart fee payments as Online Payments
- Mod: Ported MSK's mod to remove favourites function from ExtQuery reports, since it doesn't work.
- Fix: ExtQueryResourceName mod broke Live reports tab.
- Mod: Removed UserVoice script from Org, we haven't used that in a decade.
- Add: Club Health dashboard: new Player Engagement detail report/chart added.
- Add: ExtQuery reports can now use JSON files embedded in DotGolf.Shared instead of rows in the ExtQuery table.
- Fix: Removed rate limits on stage isv client (for now).
- Fix: Don't send the adjusted gross score to WHSAPI if we're also sending hole-by-hole.  If we calculate the adjusted wrong (due to an outdated handicap index or whatever) we'll get an error.  Better to let WHSAPI do this job.
- Fix: Org: updated ORG TabBatchProcess.aspx to match live (rev 34044): was having an issue accessing ServiceLocator.Default due to the absence of HttpContext.Current. To work around this we used ThreadLocal<> to store the service locator, initialising it in a new ILifetimeScope that we manage in the thread.
- Fix: In /Subs/Settings/ClubItems.aspx you cannot enter negative default amounts.  Some clubs (e.g. Mt Maunganui) use this, and someone hacked a value into the database for them, rendering this page effectively read-only and causing support.
- Mod: Live: Send international scores to whs
- Fix: Use deep linking for invoices, credit notes and receipts.  This will automatically select the right organisation in Xero (as long as the user has access), so the links will no longer error out if the wrong org is logged in.
- Fix: Live: hole in 1 and eagle report are no longer terrible
- Fix: Suspect broken data when you try to save AccXeroToken or AccXeroRequestToken == null.
- Mod: Country table add WHSCountryUID for sending international scores
- Fix: ClubCMS: casual golfers werent given an associationid #25573
- Fix: Public: exception getting a resigned member's username when they try to log in
- Fix: Org/live: #24966 weird sorting when searching all members caused by inconsistent insert order into heaped temp table
- Mod: Performance mod to wa_TBReportGreenFeeDetail to try and improve the hot path.
- Fix: Live: Subs payments page no longer crashes when entering from a social member's page
- Mod: Performance improvement in the ClubCMS green fee list controls.
- Fix: Public: multiple search results for each person in member search #25562
- Fix: Live: Social members missing from searches #25532
- Fix: Public: Forgotten password emails work again
- Fix: Restored anti-sniffing to 2 member search procs
- Fix: Live/Org: Advanced member search no longer returns weirdly ordered results when searching all clubs #24966
- Mod: Live: stop jenkins complaining about missing Kounta method
- Fix: Live: Ohope Int. errors when processing subs payments through POS
- Mod: Live: Help desk article for DG POS (KOUNTA) profit centre setup
- Add: Index for performance (MemberBlockedFriend)
- Fix: Live: Jquery update issues
- Fix: Live: When trying to add players to draw sheet, click on players name and whole table moves, not able to select player #25533
- Mod (performance): Remove Scorecard LEFT JOIN from ListScoresAsync().
- Fix: Typo.  Sigh.
- Mod (performance): Removed LEFT JOIN Scorecard, IsCourseHandicapOverridden and MAXDOP 1 from GetMemberScoreListing query.  I've searched the source and could not find any references to these fields anywhere, yet the LEFT JOIN was causing some severe performance issues for some member IDs.
- Fix: Live: Teebooking console errors when loading an extra jquery ui script into the page. Should use the Standard.master version instead
- Fix: Missed UploadedToGL reference.
- Fix: SQL scripts clobbered changes by other commits.
- Fix: Live: undo style change in 35350
- Fix: WHSAPI: Problems caused by score.Marker now possibly being null (international scores). Add: Some indexes for performance. Mod: ScoreHistory table now properly tracks international score changes. Add: Folder publish profiles for initial import and recalc utilities.
- Fix: Live: Member: Fix #25446 - Error when re-instating a non-playing member. Non-social members will not have any record from Member table - before calling MemberRepo.Single(), check if previous ClubMember record is of type CMember.
- Fix: WarehouseBuilder: AWS Region parameter didn't work.
- Mod: WarehouseBuilder: Tightened up command line argument usage - invalid arguments are now errors, not warnings.
- Add: WarehouseBuilder: Allow command line overriding of various storage parameters (so that we can get Dev to pull files from S3 rather than a local folder, without having to add a new conf file for it)
- Mod: WarehouseBuilder: Print json file acquire error to console for diagnostics.
- Fix: WHSAPI rate limit response: Can't set content type after writing content.
- Fix: Missed a commit; Shared should include AXAccountTypeClubPermission.cs in the build.
- Mod: Cleaned up Web.config a little.
- Fix: Scores may be entered by adjusted gross (no hole-by-hole data) and these should still be sent to WHSAPI.
- Fix: Removed unnecessary ko code in UI
- Mod: Hide the 'More Details' for NZ when creating a new Event/Competition. Remove this if this NZ will be using it.
- Mod: Since Chrome insists on autofilling pretty much anything, make the name of the Card No input something else to trick it into staying out of our way.  Unfortunately setting AutoComplete="off" no longer works and they haven't given us any alternative.
- Mod: Slicer: updated the Get on the Green commission payment reference (to NZG) from "GetOnTheGreen" to "LGPCommission"
- Add: IX_TBTicketEntry_LastPaymentWarningSent to speed up the Send Payment Warnings job.
- Fix: Duct tape fix to make the tee booking capture payments page work if you have a booking which was partially paid via golf.co.nz and the rest via the app.  This caused duplicates in the proc which caused the page to break.
- Mod: WHSAPI: WiretapMiddleware will now sync with 8 concurrent threads to shovel into ElasticSearch faster (without using Bulk Index)
- Mod: WHSAPI: Performance tweak to ElasticSearchLogger; avoid checking for index existence before every post.
- Fix: ScheduledTask: InterClubMessageCleanupTask - Fix #25226 and #24476.
- Fix: Adweb: EditNonAffiliate.aspx.cs: RebindData: when retrieving the non affiliate details, left join with the passport table (instead of inner join). Apparently some non affiliates don't have a passport record (we'll probably need to fix this too).
- --DFH CODE REVIEWED TO HERE-- Fix: Live: Admin Booking: Carts - Treat the value returned from self.NumHoles() as number instead of string - Ticket #24715
- Add: Live: Kounta DG POS green fee transactions respect profit centres. AS LONG AS THE USER SETS THE REPORTING GROUP SALES ACCOUNT CODE in the Kounta XERO Addon
- Fix: Order account topup bonuses by FromAmount to stop weird chart display things from happening when there is a smaller amount lower down in the list.
- Fix: Live: Jquery downgraded to 1.7.2 in live to fix dialogs. They'll be replaced by what Marco decides to do in ORG, after which we can continue the upgrade
- Add: Index for ExtTicket query performance (first prod nonclustered columnstore index - exciting!)
- Mod: Commented out NZCRStroke joins - we do not use these in NZ, and I doubt we'll use NZCRStroke going forward given it's not a WHS concept.
- Add: NZCRData index for live_GetScoreCardPrintQueue performance.
- Mod: Live: master page code-style change
- Mod: wa_TBSendPaymentWarningsJob: added WITH RECOMPILE to try and get better plan consistency.
- Mod: Removed COACH DEVELOPMENT menu item per request from NZG via Matt.
- Add: ProfitCentre KountaReportingGroupId
- Fix: WHSAPI: Instead of an ORNS; return a 404 of the MemberUID was not found.
- Add: Counters for dg-whs-db-1.
- Fix: TabMember submit error if we have no direct debit schedules in the database. Fix: WHS hook interfaces uncommented so they'll kick into gear now.
- Fix: Live: TeeBooking: Fix #24715 - live_TBCheckCartsForSlot. Check for TBGroupTimeSlot.DeletedDate when calculating the total group carts booked at the specified timeslot (Applied in NZ1 DB 9:28am, 20 Dec 2019).
- Mod: WHS API credentials now live in SSM because they are unique per environment.
- Mod: Live: syncing Kounta product cache deletes old product and category Redis keys before syncing
- Fix: #24916 Bulk Email: When you click Add Recipients twice with a mailing list selected, it was possible to send the same email to the same recipients multiple times.
- Fix: Live: stray jquery .live() causing errors
- Fix: Live: Jquery parseJSON upgrade bugs. Prior to jQuery 1.9, $.parseJSON returned null instead of throwing an error if it was passed an empty string, null, or undefined, even though those are not valid JSON.
- Mod: Live: style change to category creation so Category Code box is aligned better
- Mod: Live: Deleted old PlayerRegistration.aspx and related files
- Fix: Live: un-broke help popups after jquery update
- Mod: Add HACK so 7 digit EN1 member numbers work, until we get real numbers
- Mod: Live: removed AUS code, fixed permission caching hack from prev commit
- Mod: Live: Levies only show for NZ
- Fix: Looks like some debug code made it into Trunk.  VoucherCode is not encrypted, so should be encrypted before passing into SQL.
- Fix: Live: replaced more deprecated jquery functions
- Fix: Live: Functions search bug when entering search text
- Mod: Live: CLEANSING UNUSED JQUERIES
- Mod: Live: check signalR script into source control because they arent being restored on Dev1
- Fix: deploy-lib.ps1 didn't use the correct source webroot.
- Fix: PS syntax error in deploy-lib.ps1.
- Mod: deploy-lib.ps1 can now deploy out of a subdirectory.  Useful for .Net Core apps like DotGolf.ISVAPI.
- Fix: Typo in bindings.ukprod.list.
- Mod: ISVAPI ready to deploy to UKProd.
- Fix: Live: cleansing old jquery-ui script references
- Fix: Live: replaced deprecated jquery functions
- Fix: Monkey-patched jquery tag-it.min.js for jq 3.4.1
- Fix: Monkey-patched jquery tag-it for jq 3.4.1
- Mod: Public: type definition fixing
- Mod: Org: type definition fixing
- Mod: Adweb: type definition fixing
- Mod: Org/ClubCMS/Adweb: type definition references fixing
- Mod: Live: revert accidental change from previous commit
- Mod: Live: Update ts typings
- Fix: ClubCMS: Could not load ChooseClubWebsite.aspx because Request.UserHostAddress was being used (and this doesn't work behind nginx)
- Add: Bindings for EN, WA to reverse proxy.
- Mod: Live: remove comment
- Mod: Live: Signal upgrade complete
- Add: ClubCMS: package-deploy.ps1 added for UK deployments.
- Add: UKProd bindings for EN, WA for ClubCMS.
- Mod: Live: Signal upgrade through nuget
- Mod: WarehouseBuilder: Trying to make unit tests work
- Fix: WarehouseBuilder: oops, no file extension on this script made the unit tests ignore it.
- Mod: Live: Upgrading JQuery in progress
- Mod: Shared: Merged some of Marco's changes from the org reskin branch
- Mod: WarehouseBuilder: Create script didn't work for unit tests.
- Mod: API: remove Core.Tests from sln
- Mod: Remove DotGolf.API Core.Tests extern
- Fix: WarehouseBuilder tests not working due to USE statement in the 000 Create Database.sql script.
- Add: Warehouse Builder: dim_Member.Gender.
- Mod: Increased initial SSO JWT expiry to 1 month to try and combat the Token Expired message a user gets if they camp out on the Login page for >5 minutes.
- Mod: Increased initial SSO JWT expiry to 1 month to try and combat the Token Expired message a user gets if they camp out on the Login page for >5 minutes.
- Fix: Tournament side, top and sponsor image uploads are now working again (we never updated this when we moved the files into S3).
- Mod: WHSAPI: Updated Brick to v0.4.1 to remove 1 Jan 2020 time-bomb.
- Mod: ISVAPI: Removed a useless async
- Mod: WITH RECOMPILE.  Infrequently run query doesn't really benefit from cached plans.
- Mod: Removed JW from legacy comp results - it just wastes CPU time. Add: Competition.ResultSystemVersion so we can quickly determine which system to use when listing legacy results.
- Fix: Competitions with no result types (e.g. Ambrose) caused exceptions when viewing results on golf.co.nz, instead of saying "no results posted".
- Fix: For competitions with no results, golf.co.nz would use the old competition result queries (which returned no rows, but performed very badly). Modified so that we now track the version of the results system along with every competition, so we can choose the appropriate page to display the output without much thinking about it.
- Mod: Upgraded TrackerLogToElastic to NEST 7.x.  Changed to remove dependency on TrackerLog indexes (which I've just dropped to reduce the load on DEV4).
- Mod: Query uses new TXLine.IsCompetitionExcludesGreenFee column for performance.
- Fix: WHERE clause error, whoops.
- Mod: fncTBIsMemberOutOfCategory updated to use new TXLine.IsCompetitionExcludesGreenFee flag.
- Mod: wa_TBCalculatePlayerGreenFee now uses the new TXLine.IsCompetitionExcludesGreenFee flag.
- Add: Store Competition Excludes Greenfee info on TXLine level so that we can use it to make wa_TBCalculatePlayerGreenFee faster and keep this flag for the moment the transaction happens rather than getting it from Competition every time (it can change so that is less accurate).
- Mod: ISVAPI: delete webhook
- Mod: api_addmember associationid
- Add: Club Health dashboard prototype.  Not linked anywhere but available in /shared/ClubHealth on Org.
- Mod: WHS Client: Support international scores in golf.co.nz WHS scores listing.
- Fix: Broke the build because of GetScore refactor.
- Mod: WHSAPI: GetScore refactored to improve international scores.
- Mod: kill AU things in api_Addmember (we won't need it in the New World anyway)
- Mod: WHS Client: POST Score endpoint signature changed.
- Mod: WHSAPI: POST score endpoint refactored to have better consistency for international scores.
- Mod: Removed some references to old automapper as its not netstandard compatible
- Mod: WHSAPI: Small refactor to clean up passing the country parameter in a consistent way for local vs international scores.  I.e. not.
- Fix: ClubCMS: rImageGallery: initialise photo swipe only when not in edit mode; the photo swipe js is conflicting with the remove photo tickbox in edit mode
- Fix: WHSAPI: Region.CountryId wasn't being populated in away score download, leading to exceptions.
- Mod: WHSAPI away score sync updated to new API structure.  TODO: make international scores sync down; these will currently throw an exception due to the null Marker.Course.Region property.
- Fix: Org: Save jenkins from ClubHealthDashboardController error
- Mod: WHSAPI: Jenkins not too happy with embedded class definitions, probably something to do with how WHSClient.g.cs is generated.
- Mod: Live: removed some duplicate show_for au junk
- Mod: WHSAPI: Refactored away score download endpoint to handle international scores using a better model structure.
- Fix: ClubCMS: Shared: Flexiclub: IsFlexiclubEligible: forgot to commit this fix which replaces ComputerNo with MemberCode in the sql code
- Mod: WHSAPI: Terminology clarification; we now refer to "International" scores rather than using the "Away", which is already in use for non-home scores.
- Add: WHSAPI international scores support, first cut.
- Fix: Live: Shared: PaymentInterface.cs: ExportPaymentsToXero: we use AccXeroAccountCodeForExportedPayments when exporting online payments to Xero (e.g. online payments done through the club website); and we use AccXeroBankAccountIDForDirectDebitDeposits when exporting direct debit payments to Xero.
- Mod: ISVAPI: removed InsertBasicData.sql from Core.Tests
- Fix: Shared unit tests back to normal
- Fix: Shared unit test GlobalSetupTeardown
- Mod: Shared: delete duplicate createDB/insertbasicdata scripts
- Mod: sql: unit test insertbasicdata.sql shouldnt insert nz if it already exists
- Mod: sql: insert NZ country into unit test DBs so province table inserts work in test
- Add: /Shared/api/Controllers and ClubHealthDashboardController prototype.
- Fix: Functions: Invoicing a customer's bar tab from the calendar, does not successfully marked that order as invoiced.
- Mod: WHS: feature flag in Settings is easier to use
- Fix: WHSAPI: Inadvertent removal of .ToUniversalTime().
- Mod: WHS Importer: filter for NZ-only scores (for now)
- Mod: Live: api_addscore: removed country specific adjusted gross calculations, we just use NZ now (which uses the same as WHS)
- Mod: Live: score entry page always uses nz/whs adjusted gross calculation
- Mod: Public: Only show whs scores control from dotgolf ip
- Fix: Ireland bindings for Live.
- Add: Club.Loc_Address4 field to accommodate 4 line addresses in Wales.
- Mod: Removed the NZGolf watermark so it doesn't interfere with demos.  The Org stylesheet update is imminent anyway.
- Fix: ENG, WAL and IRE now used as country codes rather than the 2 letter counterparts.
- Mod: BaseRepo comments to clarify paged fetch usage
- Mod: Live: removed dead typescript reference path
- Mod: Increased Settings.SystemCountryCode length to 3 to accommodate ENG, WAL and IRE. These codes have to match the Country.Code value so I've had to update them from their 2 letter counterparts.
- Fix: Live: Member creation exception when there's multiple old cmember records
- Fix: Live: ClubMember InsertNonAffiliateAndPersonClubDetail incorrect syntax
- Fix: Public: Hide WHS widget if we cant find WHS
- Add: Public: WHS Scores widget has data now
- Fix: WHS: ScoreWithAdjustments object construction
- Fix: Build, after whs commit
- Mod: WHS: swapped member query param on GetScores for a separate DG only endpoint
- Fix: Removed some NZ specific clauses that were messing with UK.
- Fix: Divide by zero exception if club has no contacts and you try and view the dashboard.
- Fix: WHS tests in shared
- Fix: WHS: swagger.g.json
- Mod: WHS: alter indexes on score and omember for score sync
- Mod: WHS: swagger.g.json
- Mod: WHS: Score posted date property
- Mod: Fixture: minor UI changes
- Mod: Fixtures: added boostrap-datepicker js and knockout binding (shared/js)
- Fix: CWControlProperty table has high scans, so added index.
- Mod: Antisniff on live_FindMembers_LiveOnly_Surname_Number.
- Add: TOP 200 clause to live_FindSocialMembers_Surname_Firstname_Number to stop a kabillion results returning on simple search filters.
- Add: Public: MyGolf tile for WHS scores + handicap
- Mod: wa_TBSearchSlots anti parameter sniffing.
- Mod: Fixtures - added eligibility in search
- Fix: Didn't need 100^4 here, only 10^4.
- Fix: Removed another WITH RECOMPILE.
- Mod: Removed WITH RECOMPILE from wa_TBSearchSlots - looks like it's wasting more CPU than it is helping the parameter sniffing issue.
- Fix: wa_TBGetMyBookingsForMember was being called more than necessary.
- Mods: Fixtures - county search filter
- Fix: Nonaffiliate registrations go slow when you don't enter a firstname and lastname because nearly 100,000 of these have been created, and the random suffix only went up to 100,000.
- Fix: NonAffiliate.Username gets scanned a lot; added index to sort this out.
- Mod: Fixtures - Added the filter in the club search
- Mod: Fixtures - added the fixture type, score format and holes filters.
- Fix: Make glory SQL Server performance.
- Fix: Added cf.ClubId=@ClubId filter on ClubFee inner join so that SQL can seek IX_ClubFee_ClubFeeGroupClubId instead of scanning.
- Mod: Fixtures - UI changes
- Fix: Vend: Vend sync fails due to an ORNS exception.
- Mod: Fixture - included jquery and knockout in project
- Fix: Improved performance of ClubMember.FindPotentialFriends by refactoring a left join query into a union to make use of Passport.MemberId and Passport.NonAffiliateId indexes.
- Mod: Externed in /shared/js to ClubCMS for Marco.
- Mod: Fixtures with search functionality
- Fix: Parameter sniffing around dsCategoriesWithNoItems for subs renewal process.
- Mod: ReverseProxy: added S,W,0,1,glenitigolf.co.nz
- Mod: ClubCMS: bindings.list: added glenitigolf.co.nz and www.glenitigolf.co.nz
- Mod: Kounta webhook (OrderUpdate) performance improvements.  Use the product cache in a more efficient way, and also replaced some Kounta.GetProductAsync() calls in favour of the cache.
- Mod: ClubCMS: Member Signup: renamed "computerNo" to "memberCode"
- Mod: ClubCMS: rMemberSignupV2.js: show / hide the validation message
- Add: Warehouse Builder: Ability to use an S3 bucket for data dump files, which will let us have the warehouse in a different DC. Add: Experimental Club Health queries (just for archival purposes) Fix: dim_Date build error.
- Fix: Swiping a membership card didn't activate the customer search screen (Kounta changed something).
- Mod: Added North Island and South Island into the NZ database as provinces.
- Add: Province table.
- Mod: Initial commit of Fixture UI - dynamically loading grid
- Fix: Scheduled Tasks: InterClubMessageCleanupTask - Fix #24476 - Should also check if the message has reached the expiry date before deleting (soft). Changed schedule to daily at 1am.
- Add: WITH RECOMPILE.
- Fix: Anti parameter sniffing in MemberCodeManagerNZ.
- Mod: Live: Subs/Settings/Fees.aspx: added notes and a link to the internal help article
- Mod: ClubCMS: Member Signup: accommodate using a fixed instalment fee / amount instead of percentage. E.g. In Whangaparaoa GC, $100 is added to the invoice if the member is paying by instalment.
- Mod: ClubCMS: DBUtilities: GetValidClubCategories: correct the RequiredUpfrontAmount returned when the only required upfront amount is only considering the base subs (no levy items)
- Mod: Shared: Data: Invoice: CreatePaymentForInvoice: when querying the instalment records use "order by DueDate, InstalmentId" (previously, it was only "order by DueDate"). This is useful in cases where there are instalment records having the same DueDate for some "odd" reason (e.g. the due date for the first instalment record for an upfront payment is the same as the "next" instalment's due date).
- Mod: wa_TBSearchSlots anti parameter sniffing.
- Fix: UK testing: If handicap provider returns null, handle this gracefully.  Only really a problem while we're still testing.
- Mod: Initial commit of API structure for the knockout controls in ClubCMS
- Add: Live: Settings/Fees.aspx: added InstalmentFeeAmount setting
- Add: ClubCMS: Shared: Settings.Membership: added InstalmentFeeAmount
- Add: Live: Settings/Fees.aspx: this new settings page is where we can view or modify subs related fees including the instalment fee percentage
- Fix: Live: POS: Kounta bugfixes
- Fix: Live: Kounta product sync no longer fails because of "duplicate" green fees
- Add: Index to stop scans on MemberUploadChangeList clustered index.
- Mod: wa_TBGetMyBookingsForMember changed to WITH RECOMPILE to try and help performance.
- Add: Redis Desktop Manager (Free) installation.
- Mod: Removed CompetitionFixtureTypeId and CompetitionScoreFormatId from Competition table
- Mod: Changed SqlTraceToElastic to use XEvents rather than old school tracing.  This is MUCH easier on db cpu and the API is also a lot cleaner. I've stolen the outline of this from WorkloadTools at https://github.com/spaghettidba/WorkloadTools Add: SqlTraceToElastic wasn't in svn.
- Fix: Live: POS: Variable price items taxed correctly
- Fix: golf.co.nz: youtube url: update http to https
- Fix: golf.co.nz: youtube url: update http to https
- Fix: golf.co.nz: youtube url: update http to https
- Mod: Connection string update for warehouse API.
- Mod: Updated Adweb greenfeedata connection string.
- Mod: ClubCMS: rMemberSignupConfirmationV2: if the new member signs up using a voucher, display the voucher code used in the message created in the club's DotGolf Live inbox.
- Fix: Live: member merge Webhook event works properly now
- Fix: ClubMember: change wording when inserting nonaffiate + personclubdetail (it's for casual golfers not social club members)
- Fix: ClubMember: Add ClubId when inserting nonaffiate + personclubdetail
- Mod: Core: changed BaseRepo update/insert generics again, because jenkins needs more work.
- Mod: Core: BaseRepo updates/inserts dont require a poco, so we can use partial objects
- Add: golf.co.nz: add a new page called NationalGolfAwards
- Mod: Reverse proxy: Made everything TLS for UK.
- Mod: ClubCMS: Resolved MemberSignupConfirmation TODO: Check if the computer no has been reassigned to someone else
- Mod: sql: CWMembershipApplication add new column VoucherCodeApplied
- Mod: sql: CWControlProperty inserts for member signup controls
- Mod: Core: removed failover partner from SetConnectionString.ttinclude
- Mod: Reverse proxy: More deploy script tweaks.
- Fix: Reverse Proxy: missed out the region.
- Mod: Core: update SetConnectionString.ttinclude to point to Test_XUnit_Lastest_Schema
- Fix: Reverse proxy: Escaping is now a problem; suspect new version of Perl is being more pedantic.
- Mod: Updated Reverse Proxy send-command script to work better (like the new webapp promote ones in UK)
- Mod: Core: Keep a Lastest Schema database around so we can generate POCOS from it
- Mod: ClubCMS: Flexiclub voucher: validation of voucher code; form validation
- Mod: Core: Regenerated ezpoco
- Fix: Shared: Passport: Fix Ticket #24382 - Vend sync is failing for Manawatu when processing loyalty points for a sale linked to a non-playing member - due to an exception in Passport.LiveOrResignedMemberOfClub(). Check if the passport is a member at the specified club before calling Passport.GetHomeClubMember().
- Fix: Live: Recalculate eclectic results after Bulk card admin add/remove from competition #24376
- Mod: ClubCMS: member signup v1 only accepts previous memberships numbers from current association
- Mod: Public: finding friends - association filter on club search dropdown
- Mod: Public: finding friends association filter
- Mod: ClubCMS: member directory association filter
- Mod: ClubCMS: teebooking member search association filter
- Mod: Golf Ireland preps: Added Terraces4 with bootstrap 4, knockout 3, jquery 3. This will be used moving forward. Added the web api configs Added the open-fixture control, initial commit
- Mod: ClubCMS: member signup only accepts previous memberships numbers from current association
- Mod: Deleted unused code in ClubMember.cs
- Mod: Deleted ClubMember.AddClubMember
- Fix: Core: set nzga category correctly when creating clubmembers
- Mod: ClubMember.AddClubMember obsolete
- Mod: Live: separated VendProduct type property between 0.9/2.0
- Mod: Core: Comment on ClubMemberRepo
- Mod: Live: Deleted a DEBUG Thread.Sleep(500);
- Mod: WebApi added into Org solution in preparation for new Club Health API endpoints.
- Fix: Live: re-fixed casual golfers working in member search.
- Add/Mod: Ireland: Fixture product - hiding of elements in the competition setup when a club has FIXT product ckeditor 4 - minimum implementation for the Fixture details field
- Mod: DFH+MMC Basic framework to support client side (happens to be Knockout) controls in ClubCMS without using Web User Controls.
- Add: shared folder to ClubCMS so we can suck in the ts definitions.
- Mod: Org: show course handicap member code association id filter
- Mod: Public: more registration associationid filtering (can become a casual member in both EN and NZ)
- Mod: ClubCMS: Flexiclub voucher: initial commit: member signup mods to allow "payment by voucher"
- Fix: #23601 Proper case for MacAuley.
- Mod: ClubCMS: Shared: CWMembershipApplication: added VoucherCodeApplied
- Add: ClubCMS: Shared: Flexiclub class (one of the initial commits for the "Flexiclub voucher" enhancement)
- Add: ClubCMS: Flexiclub voucher: added lgplay image and MemberSignup class to the project
- Fix: Live: reverted POS scorecard sale checking Vend product deletedDate (because it's not the real culprit - issue is extra TXLines)
- Fix: Live: 9 hole group bookings load correctly in booking editor #24199
- Fix: Live: Group bookings can be edited from 18 hole to 9 hole
- Fix: Live: loading POS scorecard sale checks Vend product deletedDate so we dont see zillions of duplicate delete products
- Fix: Live: Crooked silver border on 'Freeze Competition Handicaps' 'Use handicaps from' setting
- Mod: Live: some ClubMember.Create association id filtering
- Fix: org: build fail after Database.DatabaseAssociationId name change
- Mod: Live: Database.cs now uses collection of database associationIds (parent + children) instead of single id
- Fix: Search: reverted person-club-detail changes to search procs
- Fix: ClubCMS: PGA: Earning: fix the default SelectedYear (to show the current period)
- Mod: ClubMember: AssociationId set when inserting new cmember or nonaffiliate (except for social members)
- Mod: API: Friends filtered by associationid
- Fix: Live: applied fix for DG-844 (rev 34986) to the Kounta POS: "Make a paid online booking, print your card from the kiosk, then go to the POS and change the green fee to Complimentary.  This causes a negative balance on the sale because a negative Online Payment entry was not posted. Turns out the code already did mostly the right thing, it just didn't do the update when there was an existing sale.  All I had to do was remove an if statement."
- Fix: Live: batch import not updating handicap #24182
- Mod: CasualGolf: Rename IsSocialGolfMember to IsCasualGolfMember
- Mod: Org/Live: Rename IsSocialGolfMember to IsCasualGolfMember
- Fix: ClubCMS: error in login sql
- Mod: ClubCMS: Can't log into club websites if you dont have a passport linked to NZGolf (or a child association)
- Mod: Live: Better association filtering in searches
- Fix: Live: css bug in score entry control #23998
- Mod: public: affiliates from other unions no longer show in SearchResults
- Mod: public: associationid filtering - PGA can log into golf.co.nz because we are merciful gods
- Add: Warehouse: 000 Create Database.sql script for initial builds.
- Fix: Warehouse: These scripts were committed in the wrong order. (2/2)
- Fix: Warehouse: These scripts were committed in the wrong order. (1/2)
- Removed: VisibleAssociations view
- Mod: Swipecard strip year for Whangaparaoa GC Kounta.
- Add: VisibleAssociations view
- Fix: unit test DB failing to drop aw_CreateClub in script 2850
- Mod: ClubCMS: PGA: Earning: just simplified the Year dropdown population
- Mod: public: when opening golf.co.nz using encrypted member details, don't log them in if they dont belong to our Association
- Mod: Adweb: clicking Launch golf.co.nz in stage opens stage.golf.co.nz
- Mod: public: filter login requests by associationId 1000
- Fix: Live: null reference exceptions during member creation #24163
- Fix: Live: resolved System.ArgumentException Missing value for parameter cmemberUID, part of #24163
- Mod: ReverseProxy: sites: added -,-,0,1,gleniti.cw.golf.co.nz
- Mod: ClubCMS: bindings: added gleniti.cw.golf.co.nz
- Fix: Golflink removal schema script breaking unit test DB creation
- Fix: Vend: Add Redis lock-wait-and-take in Vend/ProductUpdate.ashx to block incoming request for the same product while the current request is still being processed.
- Add: Live: AssociationId filtering during advanced search. Lets see if this is sensible
- Fix: live_FindSocialMembers_Surname_Firstname_Number should not return casual golfers
- Mod: ClubCMS: rCourseStatus: simplified the code a bit (updated the previous commit too)
- Mod: ClubCMS: rCourseStatus: add css class ("yes" or "no") to the status icons so we can differentiate yes from no and customise the styles easily
- Mod: ClubCMS: Terraces3 templates: updated font awesome reference (to use the latest font awesome icons). The code was generated using dotgolfnz@gmail.com free fontawesome account.
- Fix: FindMembers_ResignedOnly now matches FindMembers_LiveOnly
- Mod: Public: null protection when casual golfers are returned in teebooking member search
- Fix: Live: Searching for social members no longer returns casual golfers, and casual golfers correctly returned from searches
- Mod: ClubCMS: Love Golf: Facility page: define logo for Live Long programmes / events
- Fix: FindMembersBasic bug
- Fix: #22331: ClubCMS: rEventRegistration: Competition Registration: IsUserAlreadyRegistered: update the query to check RSCompetitionEntry only (when a player is removed via DG Live, only the RSCompetitionEntry record is updated)
- Fix:       <dependentAssembly>         <assemblyIdentity name="StackExchange.Redis.StrongName" publicKeyToken="c219ff1ca8c2ce46" culture="neutral" />         <bindingRedirect oldVersion="0.0.0.0-1.2.6.0" newVersion="1.2.6.0" />       </dependentAssembly>
- Add: ExtQuery: Permission checker added so that you can display a report to only clubs with a particular AXAccountType enabled.
- Fix: Public: no binding redirect for StackExchange.Redis.StrongName crashing injection attack blocker
- Mod: golf.co.nz: footer logos: removed Experience Golf, added Sky Sport Next and NZSC, replace R&A logo
- Mod: Flexi: Automatically expire all unused rounds when a Flexi member is resigned.
- Mod [MAJOR]: Removed old GolfLink code, now that we don't have to deal with Pennants.AU anymore.
- Mod [MAJOR]: Removed old GolfLink code, now that we don't have to deal with Pennants.AU anymore.
- Mod [MAJOR]: Removed old GolfLink code, now that we don't have to deal with Pennants.AU anymore.
- Mod: Bring back InjectionAttackBlocker, now that there is a singleton IRedisConnectionBuilder in DotGolf.Shared.  ClubCMS worked, now it's Public's turn.
- Mod: Bring back InjectionAttackBlocker, this time with a singleton IRedisConnectionBuilder.  Suspect the initialisation cost for this class caused the cpu meltdown this morning.
- Fix: Org: Fix ticket #24103 - Accessing a non-existent column "TScoreAdjustment" from the FindMembers search results causes an error (e.g. Column 'TScoreAdjustment' does not belong to table Member). TScoreAdjustment has been deprecated and is no longer returned when you call ClubMemberRepo.FindMembers() method.
- Mod: Removed InjectionAttackBlocker - suspected cause of runaway CPU.
- Mod: Removed InjectionAttackBlocker thinking this could be the source of the runaway CPU problem on ClubCMS.
- Mod: golf.co.nz: GO Rentals logo update
- Mod: Webhook log string grammmar
- Mod: Fire webhooks: better logging
- Mod: Enable swipecard strip year for Gulf Harbour.
- Mod: Fire webhooks: Cancellation token cancels, changed indentation
- Mod: Bulk Email: RightSideBar.cshtml: add new toolbar option: Image (Full) to the full width sections (Header and Footer). This new tool allows users to upload the original image (no cropping required).
- Mod: BulkEmail: initCropperImgFull: just removed unnecessary width parameter
- Mod: Removed pennants and org (AU) from reverse proxy.
- Mod: ScheduledTasks: Webhook task finished with async smarts. Needs logging
- Mod: Bulk Email: RightSideBar.cshtml: updated toolbar image option labels to make them more descriptive. (I will also be adding Image (Full) later.)
- Mod: Bulk Email: add new toolbar option: Image (Full) which allows users to just upload the original image (no cropping required). Also renamed the existing Image tools to make them more descriptive. Image -> Image (300px) Image (Med) -> Image (200px) Image (Small) -> Image (100px)
- Fix: EmailTaggedException trigger no longer takes a lock on the Email table just in case it needs to send out a notification for a tagged exception.
- Add: Live: Functions - Ability to report on function invoices. https://dotgolf.atlassian.net/browse/DG-797
- Mod: Live: Firewebhooks doesnt force sql server to sort WebhookEvents
- Mod: ISVAPI: Merge history added to search results
- Mod: Public: block malicious IPs
- Fix: Live: MergeHistory data uses memberUIDs not CMemberUIDs
- Mod: ISVAPI: updated MergeHistory object and added it to Full.Membership
- Mod: ISVAPI: edit a comment
- Fix: Add PetaPoco.TableNameAttribute to all Pocos so Inserts and updates get the correct tablename
- Mod: Live: insert into mergehistory after a member merge
- Mod: Svn-ignore some xml junk in /bin folders
- Mod: Live: change MergeHistory to UTC
- Fix: DG-844: Make a paid online booking, print your card from the kiosk, then go to the POS and change the green fee to Complimentary.  This causes a negative balance on the sale because a negative Online Payment entry was not posted.
- Mod: Live: update webhook pocos and LastAttemptDate to UTC
- Mod: Live: Update FireWebhooks success/fail flows
- Mod: Live: Improved search performance a bit by avoiding Enumerable.Take
- Fix: Search: correctly return members from other clubs
- Fix: If you have a deleted ClubFeeGroupClub with live ClubFee+ClubFeeDetail records, these green fee appear for selection on golf.co.nz.
- Fix: SyncFunctionCustomersTask - Use the first 40 chars from the function customer's name to make room for "(...)" - ellipsis.
- Fix: Live: StackOverflow Exception when social members were returned from TabMembers search
- Fix: Live: Create member error when not merging
- Fix: Membersearch error when CountryId is null
- Fix: Adweb: Search member
- Fix: Member search failing on xml string
- Fix: Org: Add System.Data.SqlClient 4.7 nuget package to avoid shitty runtime errors
- Fix: Adweb/ClubCMS/Public/Org: Add System.Data.SqlClient 4.7 nuget package to avoid shitty runtime errors
- Mod: TabMembers: uncommented some lines of code for future copy-pasters
- Mod: Public: MemberSearch.asmx ClubMembers.FindMembers replaced with Core version
- Mod: ClubCMS: event registration ClubMembers.FindMembers replaced with Core version
- Mod: Live: Categories/Default.aspx.cs: comment out the LoveGolfProgress stuff which isn't used anymore
- Mod: API: ClubMembers.FindMembers replaced with Core version
- Mod: Org: ClubMembers.FindMembers replaced with Core version
- Mod: Live: move reflected FindMemberRec properties to shared code
- Fix: Live: SCA: Fix #23989 Error message "Object reference not set.." (ORNS) appears when entering a non-affiliate card into a comp (printed from the tee sheet). Steps:
- Mod: Live: Replace ClubMember.FindMember with the DotGolf.Core version. Culled datasets (except in TabMembers >:[ )
- Mod: ClubCMS: terraces3/Template.aspx: added catid-xx to the made div class along with the existing pageid-xx
- Mod: ClubCMS: TemplatedPage: added PageCategoryID: we can use this to determine the menu or category id the page belongs to
- Mod: ClubCMS: DBUtilities: GetPageMenu: if the page is not "under" a menu but it is the landing page for the menu, return that menu id
- Mod: Get Subversion rev in there too.
- Mod: New way of baking the subversion rev and jenkins build number into the DotGolf.Core binary.
- Fix: alter clubmember sql remove USE NZE
- Fix: Xero manual journal posting was incorrect when sending gift card and house account transactions to Xero on the same date.
- Mod: Preload AssociationId in a couple more places
- Mod: Slightly rejigged the unblocker as we don't have run all modules in the stage web.config.
- Fix: ClubCMS: ComputerNo usage
- Add: Ability to unblock a site from the ip ban list.
- Add: ClubMember associationId
- Add: InjectionAttackBlocker class; hooked into ClubCMS to stop the constant script kiddie requests clogging up our exception log.
- Add: CMember.AssociationId
- Fix: Adweb: exception detail page after TBExceptionlog drop
- Mod: sql: dropping dead TBExceptionLog table and related proc
- Add: Trigger to restrict the ExceptionLog to 100,000 rows, deleting a row as soon as a new one is inserted. Doing this in a trigger will eliminate part of the overnight cleanup job.
- Fix: Public: LeaderBoardWidget error when there's a decimal round total (for some reason)
- Fix: Public: Teebooking: Fix #20265 - Exclude cart fees that has a $0.00 amount.
- Mod: Remove FK between TBExceptionLog and ExceptionLog; technically I don't even think we need TBExceptionLog anymore.
- Fix: Live: cant delete score
- Fix: Live: cant delete score
- Mod: ClubCMS: rMemberSignupConfirmationV2: update invoice status to AUTHORISED because the member has successfully paid. An invoice has to be AUTHORISED so that it will be synced to Xero, and the payment will consequently be synced to Xero as well.
- Fix: golf.co.nz: Facebook share button: just updated sdk.js version to check if this will fix the error in dev and prod ("invalid version specified") though in my local, the Facebook share button is displaying properly
- Fix: Fix: SubmitScoresForHandicappingProcess blocking again
- Fix: Live: Functions: Fix UI issue on Booking.aspx - "Catering Services" heading in the Quick Edit dialog is pushed to the far right where it supposed to be on the left-hand side.
- Mod: Live: Kounta pos sale speed boost
- Mod: Live: Kounta POS order tracking works with DB Fix: Live: Kounta POS no longer double-pays house account refunds
- Fix: TeeBooking.cs - Fix #23736. Fix 'System.ArgumentException: Column 'EntryFeeVisitor' does not belong to table Table.' exception.
- Mod: Revert checkout external sale code until i can actually make it work
- Mod: Live: Kounta POS Order updates/Refund tracking uses KountaOrder table instead of redis Fix: Live: Kounta POS member account topups work now
- Fix: Live: externalSaleId set correctly-ish in dotgolf checkout js
- Fix: Live: POS: empty name no longer breaks scorecard search #23761
- Add: sql: new column for KountaOrder
- Fix: Live: Comps showing correctly in score entry form #23738
- Add: Index to speed up XeroSync and other transaction lookups.
- Mod: Small performance improvement in XeroSync.
- Fix: Application Name added back into the connection string in Database.cs; we lost this when I upgraded to ConnectionProfileResolver.
- Fix: Live: Syntax errors loading kiosk in IE11 *shudder*
- Mod: ScheduledTasks: House account payment notification task - reduced debug logging. Create debug log entry only when there are messages to send.
- Fix: Warehouse: Schema script missing some GO statements.
- Add: Warehouse: ClubNID and MemberNID to fact_Score for faster filtering. Add: Warehouse: fact_Score_Engagement columnstore table to allow for engagement charts over time.
- Fix: Live: POS: signalR updates to the active scorecard no longer error the POS
- Mod: ReverseProxy: apply https to ohopegolf.co.nz
- Mod: Live: Renewals: just removed question mark from "Get members on instalments only" field label. (Also wanted to trigger Live rebuild in dev.)
- Fix: Org: Slow casual golfer page load
- Fix: TeeBooking: wa_TBSendPaymentWarningJob - Fix ticket #23314 #22567. (This is now in Prod enabled on 05 Nov 2019 13:35)
- Fix: Live: replaced call to replicate with string.repeat in Member email selector
- Mod: ISVAPI: make a repo call async
- Fix: ISVAPI: convert between webhook event type enums
- Fix: SubmitScoresForHandicappingProcess blocking
- Mod: Kiosk: Simplified script tags in Kiosk.Master
- Add: Live/Core: in progress scheduled task for the new webhook system.
- Fix: Live: Competition page name and fee validation
- Fix: Settings: Errors caused by unsetting direct debit export format
- Fix: Live: ScoreCard printing: proper error logged when checkActiveTimeslots fails (exceptionlog error id 424,907,059)
- Fix: DG-821 The "Team" header on the results report was always visible, overlapping the round headers if you have a 6+ round report.
- Fix: Live: Servicelocator not found when recalculating results in a thread after saving a comp
- Revert: Org/Live: undo Global ServiceLocator hack
- Fix: Org: ServiceLocatorNotSetExceptions in ProcessResults.ashx
- Fix: Live: ServiceLocatorNotSetExceptions in ProcessResults.ashx
- Mod: sql: Make UnmergeDate nullable on mergeHistoryTable
- Fix: MessageType - Insert new message type code "ACCOUNT_TRANSACTION".
- Fix: System.Buffers package version bumped to 4.5.0.
- Mod ISVAPI: CreateWebhook update
- Mod: ISVAPI: Webhook event enum + added brackets to hookmanager
- Fix: Live: ScoreService doesnt lock itself anymore
- Fix: AppPerformanceTracker: If an error is encountered while logging to ElasticSearch the logging stops and never resumes (due to a wait handle that was never signalled on error)
- Fix: Kounta: ImportOrder - Truncate product names longer than 50 characters
- Fix: (tx?.Connection != null ? tx.Connection : conn)
- Fix: emergency fix for tx blocking
- Fix: Adweb: updated System.buffers package and DotNetCompilerPlatform packages path
- Fix: Live: System.ArgumentException: Missing value for parameter: memberOrNonAffiliateId
- Mod: TBTransactionProcessor: send a summary report of instalment payments to the club's designated membership contact; implement the minimum transaction fee of $1.95
- Fix: TeeBooking: wa_TBSendPaymentWarningJob - Fix ticket #23314 #22567.
- Add: Indexes to speed up warehouse player engagement queries.
- Fix: sql: adding columns to the webhook table before its created was breaking unit test DB
- Fix: old webhook table sql was breaking unit test DB
- Add: sql: WebhookEvent and WebhookFireAttempt tables
- Fix: sql 2911 column name
- Add: Webhook table again, minus a column
- Mod: more columns for the Webhook table and added MergeHistory table
- Mod: sql: wa_ThirdPartyNotifyWinnerTB: just removed extra space at the beginning of the email message
- Mod: sql: wa_ThirdPartyNotifyWinnerTB: modified this sp (originally created for GO Rentals) to make it generic and usable by other "third party" winner notifications as well (e.g. MTP9)
- Mod: rename Event column to EventType on Webhook table
- Add: ISVAPI: create webhook endpoint
- Add: netstandard assembly reference to make Adweb work in visual studio debug mode.
- Add: Adweb: Preview link in Report Definition editor.
- Mod: ISVAPI: re-gen Pocos
- Mod: ISVAPI: Add thirdpartyId column to Webhook table
- Fix: Assembly version conflicts in BulkEmail project.
- Mod: WHSAPI console logging made less verbose so that we don't spam CloudWatch with unnecessary log entries.
- Mod: Bulk Email: AccountController: allow 5CC Association to access Bulk Email
- Mod: Public: Dispose of some more LinqToSql DataContexts
- Fix: Public: Connection leak in Tee Booking due to Linq to SQL constructed with an open connection. Refer to https://www.mattburkedev.com/sql-connection-leaks/.
- Fix: Live: WHS score upload saves the WHSscoreUID back to the score
- Fix: Public: Friends listing - Mods to the SQL query to improve performance.
- Fix: API: MyGolfController: ListFriends endpoint - Updated SQL query to improve performance. Fix: Shared: ClubMember: FindPotentialFriends() - Updated SQL query to improve performance.
- Mod: WHS Score Inserted/Updated hook implementation to send scores to WHS from NZ1. Add: Settings.WHS.UploadOnly_ParallelRunMode to allow us to only push changes to WHS, but not get anything back.  This is handy for when we want to run it in parallel with the existing handicap calculations.
- Mod: ISVAPI: silly build warning fixed
- Fix: Live: Kiosk obeys max handicap index restrictions (but not course handicap yet)
- Mod: ClubCMS: bindings: added www.omokoroagolf.co.nz and omokoroagolf.co.nz
- Add: Hooks for score inserted and updated in Score Entry as well as legacy NZGA.TXT uploads.
- Fix: Kounta: KountaClient: PostAsync/PutAsync - More detailed error messages in the exception. Fix: Kounta: Sync members - Handle "invalid_request_body" error messages from Kounta. Fix: Kounta: KountaMemberInsertedUpdated hook - Use the first 10 characters from the member's PostalCode before posting to Kounta.
- Mod: Reverse Proxy: added S,W,0,1,omokoroagolf.co.nz
- Add: Make database go fast.
- Add: IX_PushNotification_Sent_Failed_DeletedDate for push notifications query speedup.
- Fix: Live: stabilised the null transaction handling in calls to Core.Results.RSResult.DeleteResult to work consistently.
- Fix: Live: properly fixed null transaction handling in calls to Core.Results.RSResult.DeleteResult
- Fix: API: Removed api_AddScoreDeprecated
- Mod: Live: Removed api_AddScoreDeprecated references from Live
- Fix: Live: null transactions handled in calls to Core.Results.RSResult.DeleteResult
- Fix: TeeBookings: Send Payment Warnings Job: Fix ticket #23314 #22567 - Checking if TBTimeSlotEntry.GreenFeeClubId column is not null no longer works as this condition always result to false - TBTimeSlotEntry.GreenFeeClubId has not been set since 2015-11-05 16:48 (last entry that has a GreenFeeClubId value).
- Argh!  Warnaserror doesn't appear to work?
- Mod: Treat "Found conflicts between different versions of" warning as an error.
- Mod: Treat "Found conflicts between different versions of" warning as an error.
- Add: Some more dev pc build stuff.
- Fix: ElasticSearch.Net and NEST bumped to v7.3.0 to match DotGolf.Core and DotGolf.Shared.
- Fix: Go up another level for DotGolf Mailer.
- Add: DotGolf Core to SyncFreshdeskTickets solution.
- Add: _deploy directories to Warehousebuilder, Freshdeskticketsync and Mailer.
- Fix: API: api_AddScore refs changed to api_AddScoreDeprecated
- Fix: Live: api_Addscore reference changed to api_AddScoreDeprecated in legacy upload script
- Add: _deploy for TransactionProcessor.
- Fix: Live: Creating Undefined members fix
- Fix: Live: added api_AddScoreDeprecated to stuff that was using the slow api_AddScore to avoid publish issues.
- Add: _deploy directory for CardPoller.
- Fix: Couple of prebuild issues.
- Add: prebuild validation for SERVICE_NAME.
- Add: Jenkins prebuild scripts for console apps and services.
- Mod: Configuration/ConfigurationProfileResolver.Release.cs will now cause a build error in its pristine state - it should be overwritten by Jenkins if the build job is properly configured.
- Fix: Live: use the new System.Data.SqlClient nuget package
- Fix: Live: Create member FindMembers errors
- Mod: Core: Default DEBUG config profile is now NZ Development
- Fix: Live: Create member web method had incorrect parameters
- Fix: Core: Hardcoded ISVAPI SQL application name
- Fix: Accidental Startup commit
- Fix: ClubCMS: DBUtilities: GetValidClubCategoriese: handle null BaseSubAmount (e.g. Templeton has a category with no base sub: 6 year membership)
- Mod: Live: ScheduledTasks will now deploy its .exe.config as committed to app.config; no more Mr Nice Guy.
- Fix: Got rid of a few compiler warnings.
- Fix: "reader already disposed" exception when trying to print a card for anyone from the Kiosk.
- Mod: Add "Handicaps frozen: Using player handicaps from 1/07/2015" if handicaps are frozen for a comp.
- Fix: Bulk Email: Send: show "SQL Query" option to DotGolf
- Fix: Bulk Email: Send: show "SQL Query" option to DotGolf
- Fix: Typo.
- Add: DotGolf.Core project to DotGolf.CardPoller. Mod: Removed and ignored packages directory.
- Add: DotGolf.Core project to DotGolf.Mailer.
- Reverted accidental commit.
- Fix: Prebuild syntax errors corrected.
- Mod: Made webapp-jenkins-prebuild.cmd backwards compatible so we can call it from solutions not fully upgraded to the new build workflow.
- *** DFH CODE REVIEWED TO HERE *** Mod: golf.co.nz: added Apex Insurance to the scrolling footer sponsor logos
- Fix: Payment.Name has to be "Green Fees" always, otherwise Fastnet Business gets upset when Matt uploads the payment CSV.
- Reverting this mod for now - will put it right back next week, Tuesday when we published to prod.
- Mod: Live: Invoice page: moved the new feature "Reassign Invoice" to its own box/section on the right-hand side and used the heading "DotGolf Only".
- Mod: Live: Invoice: allow DotGolf users to reassign an invoice from one member to another. This is a useful tool for the support team so that they can reassign invoices to the correct member record when clubs mistakenly select a wrong member record and have to resign and re-add a member.
- Add: Deploy: bindings.ukprod.list and package-deploy.ps1.
- Fix: TeeBookings: Send Payment Warnings Job: Checking if TBTimeSlotEntry.GreenFeeClubId column is not null no longer works as this condition always result to false - TBTimeSlotEntry.GreenFeeClubId has not been set since 2015-11-05 16:48 (last entry that has a GreenFeeClubId value).
- Add: package-deploy.ps1 for Adweb.
- Fix: Adweb: Couple of issues snuck in when I reinstalled packages.
- Mod: BREAKING Jenkins: Adweb moved into DotGolf.Adweb so that its solution folder layout is the same as all the other projects. DGAdmin.sln /DotGolf.Adweb /DotGolf.Adweb/_deploy /DotGolf.Adweb/sql /DotGolf.Adweb/Shared /DotGolf.Core /DotGolf.Shared
- Add: Adweb bindings for England, Ireland and Wales.
- Fix: Reverse proxy: sitesfile wasn't correct for UK which meant the SSL certs weren't being created properly.
- Add: Deploy: Sites for Wales.
- Fix: UKProd: Ireland added to SSO config.
- Meh.
- test
- test
- Add: Comment updated.
- Fix: Deploy: Try to get rid of trailing slash.
- Mod: Deploy: Capture and set environment variables at prebuild, postbuild and promote, so that we only have to set them once.
- Mod: webapp-jenkins-prebuild.cmd made backwards compatible so I don't have to go and update all the Jenkins jobs... again...
- Mod: webapp-jenkins-prebuild.cmd made backwards compatible so I don't have to go and update all the Jenkins jobs... again...
- Mod: Prebuild.cmd now takes care of the subversion revision number replacement, filtering bindings.list and the web.config transforms.
- Mod: Resolved NEST assembly version conflict between DotGolf.Core and DotGolf.Shared by upgrading to Nest 7.3.0.
- Add: ISVAPI: stub webhooks controller
- Mod: Core: updated pocos
- Add: Webhook table to fire merge webhooks
- Mod: Live: Merge: delete unused webmethod
- Mod: Tightened up some of the methods that allow a CountryCode to be passed.  This is now in the configuration profile. Mod: Throw a specific exception if the build configuration is incomplete.
- Mod: Allow SSO to connect to other databases within the region by letting it specify a country code.
- Add: ConfigurationProfileResolver: World profile (for use with WHS and SSO)
- Fix: Removed use of deprecated Database.SqlBatchComplete feature.
- Fix: DotGolf Live Jenkinsfile updated to call prebuild.
- Mod: Live: POS: a few Kounta POS colours
- Mod: ISVAPI pipeline updated to call jenkins-prebuild
- Mod: ISVAPI pipeline updated to call jenkins-prebuild
- Mod: ReverseProxy: apply "https" to wgcgolf.net (Whangaparaoa)
- Fix: Deploy: Prebuild: Sigh.
- Mod: Prebuild can now locate DotGolf.Core in Org.
- Fix: Deploy: Some problems with the prebuild script.
- Fix: Deploy: Prebuild == bug.
- Fix: Deploy: Prebuild == bug.
- Fix: Removed use of deprecated Database.SqlBatchComplete feature.
- Accidental commit reverted
- Accidental commit - reverted
- Fix: Deploy: Shared pre-build script so I don't have to keep maintaining this in each Jenkins project.
- Add: Deploy: Shared pre-build script so I don't have to keep maintaining this in each Jenkins project.
- Fix: ISVAPI: Null member firstName causes dedup search error
- Fix: Bulk Email: allow DotGolf "association" to use Bulk Email :P
- Fix: Vend: Fix ticket #23378 - Vend sync was failing for Paraparaumu because of a product that has 14 tags. When stored as one whole string is about 160 characters, reaching the max column size of 100 (e.g. VendSaleProduct.product_tags). (Already in Prod) Add: Kounta: Increase the size of the KountaOrderLine.product_tags column to varchar(MAX) - (Already in Prod)
- Fix: SSMParameterStore didn't care about the configuration profile Location (dev/stage/prod).
- Add: Core: FindMembers. Scary.
- Fix: Whoops, modified the file that I intended NEVER to modify.  heh heh.
- Add: Web.config transforms for Org.  This generates appropriate Web.config.Production files for each NZ and UK environment. Mod: Environment-specific web.config settings moved into configuration profiles. Mod: Removed sql query analysis code - we have better tools for this now. Mod: Improved configuration profiles somewhat. Mod: Culture setup is now done in code rather than web.config.
- Fix: ClubCMS: Functions: Only show function bookings that have registration open and close dates.
- Add: Test web.config transforms by Jenkins.
- Add: ISVAPI: generate dedup redirect url after creating a member
- Mod: Slicer: Payment Reconciliation Report: added "Unattended Green Fees - Captured" and "Unattended Green Fees - Transaction Fees"
- Fix: Live: incorrect DedupSearch params
- Fix: Live: CreateMember: Dedup search reimplemented and back to normal, webmethod attributes fixed
- Fix: Core: use CentralMemberCode instead of DisplayCode in merge member search results
- Mod: Live: rename MemberMerge to MergeMember
- Fix: Live: Copying Competitions no longer copies the FreezeHandicapDate #23315
- Mod: Backwards compatibility for ConfigurationProfileResolver, just until the Jenkins jobs can all be updated.
- Mod: ConfigurationProfileResolver added.  This will allow us to bake configurations into the binaries; eg. NZ will run on different binaries to EN.
- Fix: ISVAPI: FindMembersBasic reference
- Fix: ISVAPI: MemberType reference
- Fix: ISVAPI: MemberType reference
- Mod: ClubCMS: rMemberSignupConfirmationV2 css: hide note about instalment fee by default
- Fix: DFH: An attempt to sort out NSwag causing sporadic build errors when we build projects after a clean checkout.
- Mod: DFH: Public 2012 now builds on Marcus's PC.  Incorrect Google.Apis.Calendar reference (suspect manual csproj hacking was the problem), and added v701 of Youtube to packages.config.
- Fix: Live: GetFullName
- Fix: ClubCMS: NameFormat
- Fix: Public: NameFormat build error.
- Fix: TBTransactionProcessor: Core reference
- Fix: ORG: StringExtensions
- Fix: ORG: StringExtensions
- Mod: Live: Refactored merge/create member into Core. Mod: Shared: Moved some extensions to Core (todo: fix other builds)
- Add: ScheduledTask: https://dotgolf.atlassian.net/browse/DG-645 - Scheduled task that deletes (soft) messages pertaining to members who have resigned from the home club. Add: Live: InterClubMessage: Adding an "Ignore" option which will simply mark the message as read, without performing an accept/reject.
- Fix: Live: Calculate course handicap
- Fix: ORG: Calculate course handicap
- Add: Deploy: Post-build safety check for bindings.(profile).list - if this file isn't there, we can't deploy the webapp, and the deploy scripts will fail with obscure errors.
- Add: Deploy: bindings.ukprod.list for org.
- Add: Deploy: package-deploy.ps1 script for Org.
- Mod: Performance improvement by forcing a single commit thread in PerformanceTrackerModule.
- Fix: Public: Gender.Both
- Fix: Analytics: Gender.Both
- Fix: ClubCMS: Gender.Both
- Fix: Reports: Rename Gender 'All' back to 'Both' for now
- Fix: ISVAPI: set NZGACategoryId when creating Cmembers
- Add: ScheduledTask: SyncXeroTrialBalanceTask - Imports trial balances from Xero. Runs daily at midnight.
- Fix: Public: Encryption references
- Fix: Adweb: Encryption references
- Fix: ClubCMS: Encryption references
- Fix: CasualGolfAPI: now references DotGolf.Core
- Mod: Live: Moved Encryption constants to DotGolf Core
- Add: ScheduledTask: House account payment push notification
- Add: webapp-jenkins-postbuild.cmd for post-build commands like uploading artifacts to S3.
- Add: Deploy: webapp-jenkins-promote.cmd script added.
- Add: ISVAPI: mock HookManager in tests and more CMember tests
- Mod: Deploy: Changed to en.dotgolf.co.uk for England.
- Fix: Deploy: Damn you Powershell!!
- Fix: Deploy: Syntax error
- Mod: Deploy: filterbysitename is now an optional parameter, since we can't specify blank strings on the command line for some reason.
- Add: Deploy: More logging.
- Mod: Deploy: More logging.
- Fix: Deploy: Extra logging added, fixed empty line bug.
- Fix: Deploy: Error when initially bootstrapping a site.
- Fix: Deploy: Forgot to commit a change to package-deploy.ps1
- Fix: Live: GetEligibleCompetitionRounds throwing error. Fixed indentation
- Mod: Deploy: Can now publish all sites for a profile (blue/green) OR a single site (in-place deployment).
- Add: Deploy: can hopefully deploy multiple sites to a single set of webservers (for England, Wales and Ireland who will be sharing the same web tier).
- Mod: ISVAPI: Visitor tests
- Fix: Powershell.  Sigh.
- Mod: Deploy: Now using profile specific bindings files, so we can have bindings.ukprod.list for UK.  Backwards compatible so will read bindings.list as a backup.
- Fix: Powershell function arguments are space separated AAAAAAAAAAAAAARRRRRGHHHH
- Mod: Some deployment script improvements to make the log output fit within SSM limits. Fix: Only create the IIS site once the site folder exists.
- Mod: ReverseProxy: apply https to maraenuigolf.co.nz
- Add: Deployment script for SSO as well as shared dotsourced functions.
- Mod: ISVAPI: Removed DatabaseOld from unit tests
- Fix: set DatabaseOld value from Datebase.cs
- Mod: ISVAPI: GetCourses test
- Mod: ISVAPI: Course.CourseUID
- Add: ISVAPI: Course.CourseUID
- Fix: Pennants: Added <add assembly="netstandard, Version=2.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51" /> to web.configs so I stop getting build failure emails
- Fix: ISAVPI: Get Course - petapocos sql parameters are case sensitive :(
- Mod: ClubCMS: web.configs now have <add assembly="netstandard, Version=2.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51" /> just in case
- Mod: ISVAPI: GetVisitor test
- Mod: ISVAPI: base GetHandicap test
- Fix: API: AccountsController: If a line item from an order did not earn any loyalty points, return an empty string instead in the AmountText field.
- Fix: API: AccountsController: /accounts/transaction/{id} endpoint - Order lines were not returned for clubs that does not use loyalty points.
- Fix: Live/Org/Public: Added <add assembly="netstandard, Version=2.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51" /> to web.configs so webforms don't crash
- Fix: Pennants: Shared extension method cleanup
- Mod: Core: Removed useless reference
- Fix: Live: <Reference Include="netstandard" /> in DotGolf.Core
- Fix: SQL: dga_SendFunctionsUnbilledCustomers: Fix #23211 - Filter out deleted club contacts. (Already in Prod)
- Fix: Public: Shared extension method cleanup
- Fix: Public: Shared extension method cleanup
- Add: Test package-deploy.ps1 file.
- Fix: WarehouseBuilder: Shared extension method cleanup
- Fix: ConnectorAPI: Shared extension method cleanup
- Fix: API: Shared extension method cleanup
- Fix: Analytics: Shared extension method cleanup
- Fix: Live: Shared extension method cleanup
- Fix: Public: Shared extension method cleanup
- Fix: ORG: Shared extension method cleanup
- Fix: Builds: Moved StringExtensions to DotGolf namespace
- Fix: SSO: Shared extension method cleanup
- Fix: Adweb: Shared extension method cleanup
- Fix: Analytics: Shared extension method cleanup
- Fix: Shared: Shared extension method cleanup
- [MAJOR] Mod: Deleted extension methods from Shared, to use the same ones from Core, just add a 'using DotGolf.Core;'
- Mod: ISVAPI: rename Database to DatabaseOld to avoid conflicts in other projects for now
- [MAJOR] Mod: Deleted Handicap and Gender, and almost all DI'd classes from Shared, replaced them with Core equivalents
- Fix: ISVAPI: public static async Task main
- Mod: ISVAPI: public static async void main
- Fix: Pennants: DotGolf.Core external
- Fix: Live: Null references in enter payments page for resigned members
- Fix: Org: Missing reference to DotGolf.Core
- Fix: Public: Missing reference to DotGolf.Core
- Fix: Analytics: DotGolf.Core external and guid in solution file
- Fix: API: DotGolf.Core external and guid in solution file
- Fix: TBTransactionProcessor: DotGolf.Core external and guid in solution file
- Fix: ConnectorAPI, CasualGolf.API: DotGolf.Core external and guid in solution file
- Fix: ISVAPI: CoreModule rename
- Mod: Live: CP or SUBS required to see lucky draw menuitem
- Mod: Live: CP or SUBS required to access lucky draw
- Mod: Live: CP and SUBS required to access lucky draw
- Add: IX_KioskScheduleEntry_ClubId_DeletedDate for performance (gets called quite often because kiosks have to refresh their settinsg)
- Fix: golf.co.nz: My Competitions is able to list all comps in the database if you manually hack the URL.  It also performed badly due to this, so I've added a condition to cut down the maximum amount of data returned.
- Fix: TabRptMembersJoined was doing an unnecessary and expensive query to determine the history epoch; hardcoded 2011 because that's more than enough.
- Mod: wa_TBSendPaymentWarningsJob TBTimeSlotEntry join modified to improve performance (by using a better index)
- Add: Index to speed up a specific Vend query.
- Fix: WarehouseBuilder: DotGolf.Core external and guid in solution file
- Fix: CasualGolf.API: DotGolf.Core external
- Fix: BulkEmail: DotGolf.Core external and guid in solution file
- Fix: SSO: DotGolf.Core external and guid in solution file
- Fix: Adweb: DotGolf.Core external and guid in solution file
- Fix: ClubCMS: DotGolf.Core external
- Fix: ClubCMS: DotGolf.Core guid in solution file
- Add: Org/Public/Live: DotGolf Core into the solution. Might need to upgrade to VS 2019 if this breaks for you. Mod: Refactored 2 Results methods from Shared to Core
- Mod: Live: TabMember: just updated the billing card text
- Add: Live: mastercard and visa icons
- Mod: Live: TabMember: Subscriptions tab: display the member's nominated subs billing card
- Mod: Live: Member / ClubMember: added GetSubsBillingCard: this returns the latest subs billing card nominated by the member
- Fix: IVSAPI: FINALLY DROPS THE TEST DATABASE IN JENKINS
- Mod: Cache loyalty xero account code lookup for 4 hours (Remuera hitting Xero API rate limits)
- Mod: Jenkins send-command.cmd now handles the new AWS region.
- Fix: Handle ukprod environment properly when generating sites for nginx.
- Add: sites-uk.list to control UK site bindings. Mod: jenkins-send-command.cmd now handles the new AWS region.
- Add: Credentials for JenkinsBuildServer in UK.
- Fix: IVSAPI: Deadlock when creating test member
- Mod: ISVAPI: drop test database properly v2
- Mod: ISVAPI: Jenkinsfile for xunit tests on pipeline
- Mod: ISVAPI: drop test database properly
- Mod: ISVAPI: Jenkins Database name change
- Fix: ISVAPI: Redis in unit tests
- Fix: Slicer report: gs_ReportGreenfeeTakings.sql (I've run this against prod today to fix the report to be sent out)
- Mod: ISVAPI: Database will be disposed after a test run in Jenkins
- Mod: ClubCMS: rMemberSignupV2.js: just added a note about the instalment fee--to make it more obvious that it is added on top of the membersehip amount
- Bump revision numbers again.
- Bump rev numbers.
- Mod: ScheduledTask: SyncKountaReportingGroupsTask - wrong Cron schedule. It should be "0 1 * * *" to make it run daily at 1 am.
- Merged revision(s) 34466 from Branches/Trunk.2019-10-14.one-solution-to-rule-them-all-v2: Mod: Passwords: Always check Password Hash for auth instead of (hash or password) ........
- Mod: golf.co.nz: Home: just removed the FrontPageSidebarimage control (where NZG advertised WHS before)
- Mod: golf.co.nz: Home: just removed the FrontPageSidebarimage control (where NZG advertised WHS before)
- Add: Kounta: Store Kounta reporting groups in Redis cache. We will now use this cache to get the assigned reporting group of a product. Add: ScheduledTask: New task to import and cached Kounta reporting groups in Redis - Runs daily at 1am.
- Fix: Public: My Golf: MakeTimePlay9: handle admin users e.g. nzgmatt; terminate execution of DisplayStats if the user logged in is an admin
- Mod: ISVAPI: don't Invoke if dispose handler is null
- Mod: ISVAPI: Easier to trace exceptions during test disposal
- Fix: ISVAPI: Update member + test data fix
- Fix: ISVAPI: Create + Get member bugfixes and tests
- Mod: ClubCMS: sql: add new optional columns to CWMembershipApplication
- Mod: ClubCMS: sql: add new control properties to rMemberSignupV2 to allow to hide the optional fields; add new control properties to rMemberSignupConfirmationV2 to allow custom start and end member number search
- Fix: ISVAPI: Generate POCOs from test DB
- Fix: ClubCMS: TemplatedPage.cs: when the page is not found, terminate the execution of the method (and proceed to show the page not found message). This eliminates the "Value cannot be null. Parameter name: stringToUnescape" exceptions
- Mod: ClubCMS: rMemberSignupConfirmationV2: the minimum transaction fee is only applied to golf clubs (not Flexiclub -- although Flexiclub doesn't use this control yet at the moment).
- Mod: ClubCMS: rMemberSignupV2: added new required field: Mobile Phone; and new optional fields, which could be hidden: Ethnicity, Occupation, How did you hear about us, What made you choose our club;
- Mod: ClubCMS: rMemberSignupConfirmationV2: added saving of mobile phone; allow setting of MembershipNumberSearchStart and MembershipNumberSearchEnd
- Mod: ClubCMS: CWMembershipApplication: added saving of mobile phone, and these optional fields: Occupation, EthnicityId, HowClubWasFound, WhyClubWasChosen
- Mod: ClubCMS: ClubMember: added saving of mobile phone (which is an existing column in Cmember)
- Add: AXAccountTypeClubHistory table and triggers to keep it populated.
- Fix: Live: ScoreIdIfEditing works again
- Fix: ExceptionLogId no. 423817061 - Truncate product names longer than 100 characters.
- Mod: CompetitionRound: removed annoying whitespace
- Fix: Comps: Re-applied DFH changes to live_ValidateRoundForMemberOrNonaffiliate
- Fix: Catch and don't log a common base64 mail parsing exception.
- Fix: api_Addscore corrected after merge
- Fix: ClubCMS: aspx pages not updated
- Fix: Live/Org: Missing RoundDateTimeLocal property on CompetitionRound after merge
- Add: Shared: SQL CHANGES from merge
- Fix: Build: Dapper package reference
- Merged revision(s) 33912-33913,33916,33924-33929,33955-33956,33959-33960,33962,33964-33965,33967-33968,33970,33974,33977-33978,33992-33993,34076-34078,34084-34086,34123,34336,34340 from Branches/Trunk.2019-09-05.one-solution-to-rule-them-all:
- Fix: New ScoreCount method caused exceptions in Merge.aspx if you load it up for a non-affiliate.
- Fix: Error in Teebooking.cs caused 'System.ArgumentException: Column 'EntryFeeVisitor' does not belong to table Table.' exception.
- Fix: Missing scoreIdIfEditing parameter to /validateRoundForMember.
- Fix: ISVAPI: Account unit test was clobbering Auth in other tests. Mod: ISVAPI: Test fixes and some NotImplemented tests added
- Mod: ISVAPI: Added Club FullName to poco
- Fix: Missing scoreIdIfEditing parameter to /GetCompetitionsForMemberAndDate.
- Fix: ORNS error if you try to add a non-affiliated player to a booking.
- Add: XeroSync: Save house account payments from Vend register closure invoices.
- Add: API: AccountsController: One commit for this mod => Add new end point /accounts/{transactionId} - Retrieves transaction details for the authenticated user.
- Excluded GetAccountTrasactionResponse.cs (will do a one-commit)
- Revert rev 34401 to 34404.
- Bump rev no to trigger new build in Jenkins
- Fix: Jenkins build error - forgot to include the new source file.
- Add: API: AccountsController: Add new end point /accounts/{transactionId} - Retrieves transaction details for the authenticated user.
- Mod: KountaLocal: Removed debug log.
- Mod: KountaLocal: Add debug log (will revert the mods later)
- Add: Live, Org: DotGolf.Core external
- Add: Public: DotGolf.Core extern
- Mod: ISVAPI: playdate timezone test uses a course in Alaska
- Fix: ISVAPI: Save scores in Course timezone not the timezone of the Club who entered the score
- Mod: ISVAPI: svn ignore Core.Tests bin & obj
- Mod: ExtQuery Charts: Improved the colour scheme for line charts a little bit.
- Fix: TabVisitorOptions did not show the correct score count in the ribbon.
- Mod: KountaLocal: Using Kounta Products Cache so we don't put too much load on the API calls that could hit the rate limits.
- Fix: ISVAPI: Use identity column instead of primary key where possible
- Fix: ISVAPI: accidental commit
- Mod: ISVAPI: Add primary key attributes to pocos
- --- DFH TESTED TO HERE --
- Fix: More #23048 bugs fixed around COMP clubs (non card printing) and competitions with multiple rounds on the same day.
- Mod: ExtQuery: AXAccountPosSummaryReportDataSource: Show "+" and "-" indicators for clarity.
- Mod: ISVAPI: pass Database.CountryCode into create Region/Club
- Merged charts from branch.
- Mod: ISVAPI: More test classes and fixed region disposal
- Fix: #23048 Bugs fixed around COMP clubs (non card printing) and competitions with multiple rounds on the same day.
- Mod: ExtQuery: AXAccountPosSummaryReportDataSource - Add daily difference between DG closing balances.
- Mod: ClubCMS: Member Signup: for periodic categories (which mean prorated amount), use the prorata base sub amount to compute the instalment fee amount instead of the full base sub amount
- Mod: ClubCMS: Settings.Membership: updated the default value of InstalmentFeePercentage from 8 to 0
- Fix: ISVAPI: Jenkinsfiles no longer ignore externs
- Fix: DotGolf.Core in svn Shared folder
- Mod: ISVAPI: DotGolf.Core externed
- Mod: ISVAPI: DotGolf.Core externed
- Mod: Moved DotGolf.Core to svn Shared folder to extern it
- Mod: sql: ClubItem table: add IsForInstalmentOnly bit column
- Mod: Live: ProcessRenewals_Build: just added "and ci.IsForInstalmentOnly = 0" for now in the ClubItem table join so that "IsForInstalmentOnly" items won't be included. IsForInstalmentOnly is a new column just added to the ClubItem table which will first be used in the ClubCMS member invoice items and invoice creation after a successful membership signup. It allows us to add an Instalment Fee Item to the invoice if the member choose to pay by instalment.
- Mod: ClubCMS: Settings.Membership: added InstalmentFeePercentage, and updated the JoiningFee description
- Mod: ClubCMS: Member Signup: add instalment fee item if the member is paying by instalment; use an external js file for the common signup js
- Mod: ClubCMS: DBUtilities: GetValidClubCategories: include BaseSubAmount in the returned data
- Fix: ExtQuery: AXAccountPosSummaryReportDataSource - DG Closing balance amount is wrong for dates where there are no transactions. It was showing the next date's (available) closing balance.
- Add: ISVAPI: Delete score implementation
- Fix: ISVAPI: Null checks before adding Connection to Pocos
- Mod: If a club has XERO and AX and they attempt to post prizes without either a) a default prize expense account or b) profit center with a Xero account set, an error will be shown to the user and prize posting will not continue. Fix: If Post Prizes returns an error, the UI didn't display it properly.
- Mod: TeebookingHelper is now static
- Mod: Scheduled Tasks: HouseAccountLowBalanceNotification - Removed hard-coded email address (kenneth@golf.co.nz).
- Fix: ClubCMS: TemplatedPage: InitialiseTemplatedPage: assign a value to PageName (previously, null PageName was causing exceptions to be logged)
- Mod: ISVAPI: Swagger: hide error and innerError from root level Models
- Mod: ISVAPI: change ErrorResponse classes to be nested
- Fix: WHSAPI: build fix + Consistent error objects
- Fix: ISVAPI: Consistent error objects, Auth filter no longer loses models
- Fix: WHSAPI: auth filter was causing missing models
- Add: ExtQuery: AXAccountPosSummaryReportDataSource - Display online top-ups
- Add: dotpeek to dev pc build script.
- Mod: Round Management: If you renew a member who is part of a Round Management category, their initial credits did not renew.  Per Remuera's rules, a) any unused initial credits from the previous year must expire; b) member topups do NOT expire and c) new initial credits are applied every time they renew. Mod: The IMemberUpdated hook is now fired for every member that is renewed, regardless of whether their category is changing or not.
- Fix: ISVAPI: add Delete score method to ScoreRepo
- Mod: ISVAPI: make response type for HTTP 201s more specific
- Mod: ISVAPI: Hide health controller from swagger
- Add: SQL: AXAccountTypeClubXeroBalance - added new columns (already in prod)
- Fix: ExtQuery: AXAccountPosSummaryReportDataSource - Use AXAccountTypeClubXeroBalance.XeroBalanceAsAt to get the closing balance for that day instead. Amounts displayed for each Kounta register takings should be the "Counted" amount.
- Mod: ISVAPI: Consistent error responses to match MS guidelines
- Mod: ISVAPI: style changes and renamed Auth Filter
- Fix: Make Time Play 9: wa_Play9_EmailTheEntrants: just committing the change but this was ran against prod on 2nd October before the second batch of MTP9 welcome emails were sent out.
- Merge: Accidentally committed some unrelated stuff to a branch. Merged revision(s) 34312 from Branches/Trunk.2019-10-03.subs-tabmember-ko-upgrade/Shared/DotGolf.Shared: Add: ExtQuery: Chart support - basic line chart only for now.
- Merge: Accidentally committed some unrelated stuff to a branch.
- Mod: ISVAPI: refresh tokens no longer multiply
- Mod: ISVAPI: BaseRepo refactor, removed multipoco queries, 'proc' methods,  page and skiptake methods, added Connections to ALL THE POCOS
- Mod: ISVAPI: User.Identity.Name now works (by adding JwtRegisteredClaimNames.UniqueName to the JWT)
- Mod: ISVAPI: rename variable
- Mod: ISVAPI: Create score test + data + required code fixes
- Fix: ISVAPI: HandicapProviderLegacy bug I introduced
- Mod: ClubCMS: PGA: TournamentList: BindYearCombo: left join on CompetitionAssociation table (not all competitions are in that table) and filter the Competition or CompetitionAssociation by AssociationId
- Mod: Green Fee Data: updated gs_ReportGreenfeeTakings sp to correct the slicer subs and membership application reports for other golf clubs (Tauranga, Pakuranga, etc.)
- Fix: Reconciliation report was not working out membership application and subscription commissions properly for flexiclub, takapuna and PGA, resulting in slice differences being incorrectly reported.
- Fix: Xero: Call GET Accounts endpoint in Xero only if Settings.Loyalty.EnableLoyaltyAccountsPerTag is enabled. - We were calling the GET Accounts endpoint in Xero too frequently even though it's not required - happens when we are processing each line item from an order (e.g. Kounta or Vend).
- Mod: Bulk Email: add a delete attachment functionality (denoted with rubbish bin icon beside the filename)
- Fix: Live: Removed useless clause in member subs import so no-one thinks it's useful
- Fix: Live: Subs import duplicate issue finally
- Fix: Live: Subs import duplicate issue
- Mod: Enable Swagger.
- Fix: Live: Subs import no longer shows duplicate records for people who have a Nonaffiliate AND a CMember record at the same club.
- Mod: ISVAPI: Baserepo refactor to use TPoco to simplify calls
- Fix: ISVAPI: test setup errors
- Fix: ExtQuery: AXAccountPosSummaryReportDataSource - fix incorrect totals for (DG) columns.
- Add: ExtQuery: AXAccountPosSummaryReportDataSource - Add member top-ups totals (per day) from Kounta and Vend.
- Mod: ExtQuery: AXAccountPosSummaryReportDataSource - SQL query mods to fetch the AXAccountTypeClubXeroBalance row we have from 3:00 am to 3:05 am. Our assumption is that no transactions are getting posted at this time of the day.
- Mod: Strip swipecard year for Paraparaumu Beach.
- Fix: sites.list had a trailing slash.
- Mod/Fix: Live: update Xero API SDK from 2.2.0 to 2.2.8. In this update, fetched prepayments and overpayments include their line items already (i.e. we don't need to make another api call just to get a prepayment/overpayment line item's description like we used to)
- Mod: TBTransactionProcessor: SubscriptionInstalment and SubscriptionRenewal: replaced ToShortDateString() with .ToString("dd/MM/yyyy") to explicitly specify the correct date formatting. (Because in prod, ToShortDateString() formatting is MM/dd/yyyy)
- Mod: TBTransactionProcessor: PayByBillingTokenProcessor: replaced ToShortDateString() with .ToString("dd/MM/yyyy") to explicitly specify the correct date formatting. (Because in prod, ToShortDateString() formatting is MM/dd/yyyy)
- Fix: Added back EC2 instance tag call to find the environment name.  This should make things work in Stage.
- Mod: ISVAPI: Applied same Jenkinsfile fixes to Stage.Jenkinsfile.
- Mod: Try to get web.config in there.
- Fix: ISVAPI: appsettings.json now includes a country code. Fix: ISVAPI: web.config now copied to output dir.
- Mod: ISVAPI: Corrected publishdir.
- Fix: PEBKAC.
- Mod: ISVAPI: Call build.cmd to do the build.
- Fix: ISVAPI Now appears to be building a good EXE to run on Windows.
- Fix: Org: PGA: Finalise: if the player is paying by billing token and is withdrawn, Original Amount and Amount should be null.
- Fix: ISVAPI: publish source directory corrected.
- Fix: ISVAPI: UseAppHost.
- Fix: ISVAPI: Publish step
- Add: ISVAPI: Publish profile for Windows.
- Fix: ISVAPI: DotGolf.ISVAPI.null
- Add: Reverse proxy: isvapi.golf.co.nz
- Mod: Xero Sync: get prepayments and overpayments: filter by contact (as we do with Invoices)
- Okay, fine, reverted this.
- Mod: WHSAPI: In debug mode, don't filter out operations or parameters; this makes using the Swagger UI hard.
- Add: ExceptionLogToElastic tool for shipping the ExceptionLog to ElasticSearch.
- Mod: ISVAPI: added publish artifacts to S3 to JenkinsFile, commented for now
- Add: fact_Scorecard index to avoid timeouts on Visitor Counts (Beta) report.
- Mod: ISVAPI: starting attempts to publish ISVAPI
- Add: ISVAPI: _deploy folder
- Add: ISVAPI: Test data setup
- Fix: Competition result ordering was incorrect for Net ambrose competitions (where course handicap fractions come into play).  Omaha Beach reported this one; ticket is unknown, #11312 was related but not the same bug.
- Fix: Report: AXAccountPosSummaryReportDataSource: Fix - error in generating the report. Was using LINQ.SinlgeOrDefault() when retrieving an item - throws an exception if the result contains more than one matching item from the list. Changed to LINQ.FirstOrDefault() instead.
- Add: ISVAPI: Neat XUnit test teardown mechanism
- Mod: ISVAPI: disable annoying warning
- Mod: ISVAPI: simplify null check so VS stops bugging me
- Mod: KountaLocal: Using DataCache to store and retrieve the product from Kounta (short-lived for 2 mins).
- Fix: Live: Resigned members sync properly to Kounta. Hopefully fixes subs autoresign task
- Fix: Stop trying to pull a trial balance for Gulf Harbour; we don't appear to have the appropriate role within their Xero org.
- Fix: Concatenate: Only set ETag if a rev was provided on the query string.
- Fix: Got rid of the "Missing or invalid code" errors; instead giving the user a 404 or redirecting them to the home page, whichever is more appropriate.
- Fix: #22631: #22827: Xero Sync: apply filter when getting the prepayments (as we are hitting the rate limit for prepayments)
- Fix: Do not throw if client UID is invalid.
- Mod: Handle a null @ClubCardPrinterUID value gracefully.
- Fix: #22823: Live: TabXeroAssignCreditNotes: fix the default matching of the member based on the reference text. (This fixes the changes done in Revision ID 33824.)
- Add: TrackerLogToElastic utility to source control.
- Mod: Got rid of the TopExceptions.aspx page - the query behind this was very heavy and caused blocks in Prod.
- Fix: ISVAPI: POCO generation wasnt adding POCO mappings
- Fix: ISVAPI Loading roles from DB
- Mod: #22747 Exclude deceased members from bulk email recipients (bulk email V2).
- Mod: TBTransactionProcessor: run the Subscription Instalment auto-billing when unattended
- Add: Index to make some Message queries run marginally better.  Already in Prod.
- Mod: Ignored *.xml in the ClubCMS bin folder.
- Deleted LoveGolf 2014; we do not use this anymore; it's been migrated to ClubCMS.
- Mod: TBTransactionProcessor: SubscriptionInstalment: just updated the text in the email
- Mod: https://dotgolf.atlassian.net/browse/DG-518 Remuera: Exclude Flexi members from getting charged rounds, when competition fee includes green fee.
- Mod: sql: wa_Play9_EmailTheEntrants alter sp: added a condition when checking if the member has been emailed
- Add: Push Notifications: Ability for clubs to create Cart notifications from the TeeSheet. Mod: Push Notifications: Code refactor to streamline the process of sending different types of push notifications: Course conditions (e.g. Course closed, frost delay, carts availability) and Bulk Email notifications which is current not in used. Invoking the IPushNotificationService.SendBulkEmailNotifications method will throw an exception.
- Add: sql: Make Time Play 9: create wa_Play9_EmailTheEntrants stored procedure, and create EmailLog table (logging of processing - only one record inserted per day)
- Add: ScheduledTasks: HouseAccountLowBalanceNotification - This task takes care of emailing members when their house account get down to a certain amount - configured in AXAccountTypeClub.MinBalanceBeforeReminder.
- Mod: ISVAPI: Dev pipeline uses dotnet restore
- Fix: IVSAPI: Stage pipeline uses dotnet restore
- Fix: ISVAPI: Jenkinsfile NUGET RESTORE works hopefully
- Fix: ISVAPI: Jenkinsfile uses latest MSbuild
- Fix: ISVAPI: credentialsId hopefully correct in Stage.Jenkinsfile
- Fix: Live: COMPETITION FEES REPORT (currency)
- Fix: Scheduled Tasks were not starting up due to a problem in the order that we're initialising the database connection.
- Mod: TBTransactionProcessor: SubscriptionInstalment: when creating the TBTransaction record, also define an amount for the DotGolfSurcharge (transaction fee amount) column
- Add: ISVAPI: Stage Jenkinsfile
- Mod: Slicer: Calculation updated in the right place this time.
- Add: ISVAPI: Can now renew access tokens using refresh token
- Fix: Wrong condition caused NULL Amounts.  Removed this because it was only a safety check anyway.
- Mod: ISVAPI: sln file guids have changed
- Mod: ISVAPI: Rename BaseRepository to BaseRepo
- Mod: ReverseProxy: added S,W,0,1,hgc.co.nz
- Fix: Line breaks standardised.
- Add: Category.IsVisitorFeeChargedForCompetitionFeesThatIncludeGreenFees
- Add: ISVAPI: Actual role based Auth (removed PolicyAuth Handler #error)
- Add: ISVAPI: 2 passing Account tests
- Add: ISVAPI: thirdparty login logic Mod: ISVAPI: Remove IAccountRepo
- Mod: ISVAPI: username column on ThirdParty table is now 50 chars
- Mod: ISVAPI: username column on ThirdParty table is now 50 chars
- Mod: Club membership subs slicer formula updated.
- Mod: TBTransactionProcessor: SubscriptionInstalment: updated the contents of the email notification sent to the member when auto billing fails
- Mod: TBTransactionProcessor: enabled subscription instalment auto-billing. (Tauranga is the first club to use this!)
- Mod: TBTransactionProcessor: SubscriptionInstalment: updated the transaction fee computation; added a "thank you" note to the notification email that the member receives after a successful payment
- Add: Kounta: Record the product tags and reporting group at the time of transaction. Add: Vend: Record the product tags and product type at the time of transaction. Add: VendProduct: Added "@type" property to store the Vend product type. Add: SQL: (1) VendSaleProduct: Add new columns product_tags and product_type (2) KountaOrderLine: Add new columns product_tags and reporting_group
- Mod: ISVAPI: Remove unneeded excludedRegions bit from Jenkinsfile
- Mod: ISVAPI: Empty whitespace commit to test Pipeline
- Mod: Send some caching headers for ColorGenerator to make clients cache these.
- Add: ISVAPI Jenkinsfile.
- Mod: IVSAPI: Remove Shared extern
- Mod: ISVAPI: Ignore bin and obj
- Add: ISVAPI + DotGolf.Core new world order
- Mod: Remove old ISVAPI version from SVN without deleting Shared
- FIX: SHARED IS BACK NOW, SORRY
- Mod: Remove old ISVAPI version from SVN
- Fix: Vend: TamperMonkey: Fix #22119 - Vend cash drawer kicking too early before a sale is completed. North Shore GC has been using the script since 25 Sep 2019 and so far so good.
- Mod: Removed "No customers to sync at this time for xxx" message as it clutters the debug log.
- Fix: Because of the bugfix in rev 34046, if we have a null or empty loyalty account, this would be selected as the expense account.  Some clubs have bank accounts with empty account codes, so this would effectively select the bank account to post loyalty to.  This causes an exception (thankfully) because you can't journal to a bank account.
- Mod: API: BulkEmail: GetEmailDrafts: return the 30 latest email drafts instead of just 15
- Fix: Loyalty to CoA bug in Settings caused Account select combos to show even though the setting is not turned on.
- Fix: Assembly redirect for XeroSync.
- Fix: XeroSync needs ServiceLocator.Default.
- Fix: Performance issue in score comments (MyGolf) when ordering it by latest comment first.
- Mod: Fix visual glitch and console error when [re]loading lucky draw
- Mod: Lucky draw: removed all members from viewmodel
- Mod: golf.co.nz: updated the Twitter Share code while I'm at it. I used the article Title as the text in the tweet (The text used to be the page title, which is "Articles - Latest News - News and Media - golf.co.nz - powered by DotGolf" always)
- Mod: golf.co.nz: moved the main meta description (NZG association's short description) from the master page to the home page so that we could define different meta descriptions for different pages (e.g. news articles, etc.)
- Fix/Mod: golf.co.nz: News Article: Facebook share button; I've also defined the og meta tags, as these are used by Facebook share
- Mod: Lucky draw: removed !
- Fix: Blue lucky draw winner banner always overlaps red bar
- Add: Autofac and ServiceLocator.Global set in ScheduledTasks.
- Mod: Lucky draw style changes + Select All checkbox
- Mod: Org: Tournament: Finalise: PGA: if the player registered online but has withdrawn, there's no need to display the outstanding amount and the Process dropdown options. There is no TBTransaction record to update. (For the PGA tournaments, when players register, we only tokenise the card; there is no TBTransaction record.)
- Add: Language install step.
- Mod: ClubCMS: define the Live Long "program type" image **DFH CODE REVIEWED TO HERE**
- Mod: Don't allow setting UFP if club has no bank account in Slicer.
- Mod: Reverse Proxy: added -,-,0,1,omokoroa.cw.golf.co.nz
- Mod: ClubCMS: bindings: added omokoroa.cw.golf.co.nz and whangaparaoa2.cw.golf.co.nz
- Fix: LG Play Admin Site: Voucher Report: corrected the condition used to show the "Redeem" button
- Mod: Catch an unhandled exception that was causing an app pool recycle for Live.
- Mod: TBTransactionProcessor: PayByBillingTokenProcessor: just updated the text / note inserted into PassportNote when a payment fails
- Add: ClubCMS: Visa and Mastercard icons
- Fix: ClubCMS: UserUtilities: allow Flexiclub members to log into Love Golf (an NZG site which is considered an association, not a club); this functionality was affected by the previous mod
- Mod: ClubCMS: rMyAccount: My billing cards section: add a tournament billing card (for the PGA); also display the card logo (Visa and Mastercard)
- Add: Score.AllHolesAttempted parameter for api_AddScore.
- Add: Score.AllHolesAttempted for ISVAPI.  This field will eventually become NOT NULLABLE.
- Add: /api/FireClubMemberUpdatedHook.ashx to support ISVAPI until we modernise/centralise HookManager.
- Fix: Direct Debit Report membercode showing again
- Mod: ExpectedRenewalsReport membercode showing again
- Mod: golf.co.nz: added Make Time Play 9 control to My Golf (displayed only when the logged in member is viewing one's own My Golf page)
- Fix: Truncate Vend product names if they exceed 100 characters, to avoid an SQL error when syncing products.
- Mod: Org: Finalise: join to one PayByBillingToken record only (a player may have multiple attempts to pay for a particular tournament if there's a problem with their billing card)
- Mod: TBTransactionProcessor: PayByBillingTokenProcessor: send an email notification to the player when the payment fails; insert a new record into PayByBillingToken table so that the payment is automatically retried after 2 days
- Mod: Shared: Data: Association: just included two existing columns: WebsiteURL and TournamentsReplyToEmailAddress
- Add: fiddler.
- Fix: ClubCMS resigned login check no longer hit by default (was causing live passportcredentials to be deleted)
- Fix: Don't indiscriminately delete PassportCredentials if a deleted @PassportCredentialId is passed to this piece of the query.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: create a payment record only if the amount is greater than zero (in my testing in my local, a zero payment was created because the member happen to have two outstanding invoices, and I'm only paying for one invoice)
- Fix: ClubCMS: rMyAccount: for Flexiclub, PaymentData.TransactionFee must be zero
- Mod: ClubCMS: rMemberSignupConfirmationV2: updated the welcome email header image path
- Mod: ClubCMS: rMyAccount: added BuildPaymentDataTransactionFee which defines the transaction fee in the PaymentData object
- Mod: ClubCMS: rMyAccountPaymentConfirmation: send an email notification to the club when someone pays for their subs online
- Fix: Damn it!
- Fix: ServiceLocator.Global is back.
- Mod: Squawk: Push Notifications - Amazon SNS support for the new apns-push-type header field.
- Add: ISVAPI: Some mods to DotGolf.Shared (should be safe to keep in Trunk) that will eventually be used for ISVAPI.
- REVERTED revision(s) 34074 from Trunk: Add: Initial version of ISV API.  This messes with DotGolf.Shared a bit since it now needs to be referenced from a .Net Standard app. ........
- Add: Initial version of ISV API.  This messes with DotGolf.Shared a bit since it now needs to be referenced from a .Net Standard app.
- Mod: Live: Lucky draw displays member name
- Fix: Obscure Javascript error that happens when you hover over a 9 hole score entered prior to Feb 12, 2015.
- Fix: Free radical bracket.
- Fix: Member.GetPassportId() method replacement - GetPassportIdProperly().  This fixes the "member has no passport" log message coming in from ClubCMS all the time. I couldn't just remove/obsolete the old method because it's still being used in several kabillion places.
- Mod: Live: Lucky draw prize text
- Fix: "DotGolf.api.JavaScriptException: Uncaught TypeError: result.slice is not a function"
- Fix: ClubCMS: NonAffiliates with string usernames can log into clubcms again.
- Fix: Upgraded Dapper to the same as DotGolf.Shared (1.42) to stop missing method ExecuteScalar<> errors.
- Fix: Handicap reports missing membership numbers.
- Fix?: ClubCMS: login exceptions when authenticating from cookie
- Fix: Passporthash exceptions when password is null
- Fix: Standard.Master OR to AND
- FiX: OR to AND
- Mod: Live: Lucky draw page now uses a blank Standard.Master knockoff masterpage for logging etc
- Fix: API: MyGolfController: Update profile endpoint - /mygolf/profile fix exception System.Data.SqlClient.SqlException (0x80131904): The variable name '@UpdatePostalCode' has already been declared. Exception details http://adweb.golf.co.nz/ViewExceptionDetail.aspx?Id=422174882.
- Fix: Response.Redirect() calls corrected to Response.Redirect(..., false) and ApplicationInstance.CompleteRequest() to combat ThreadAbortExceptions littering the exception log.
- Fix: Kiosk: short member codes works in Teebooking again Fix: Kiosk: Central member codes from other clubs work in card printing again.
- TEMP Lucky Draw MOD, DO NOT PUBLISH. Typo fix.
- Mod: Because DotGolf.API uses WebAPI we have to have a global service locator, otherwise deeply nested ServiceLocator.Default calls fail with ORNS errors.
- Fix: Performance issue around constructing regexes for parsing membership numbers.
- Fix: Loyalty: ProcessLoyalty() - fix null reference object exception.
- Fix: TabBatchProcess.aspx was having an issue accessing ServiceLocator.Default due to the absence of HttpContext.Current. To work around this we used ThreadLocal<> to store the service locator, initialising it in a new ILifetimeScope that we manage in the thread.
- Mod: Live: Lucky draw Draw and Redraw buttons
- Fix: Port fix from #34039 to Live.
- Merged revision(s) 34038 from Branches/Trunk.2019-09-05.one-solution-to-rule-them-all: FIX: Set httpcontext.current inside Batch Process to avoid servicelocator crashes ........
- Fix: Missed rename of ComputerNoGroup to MemberCodeGroup.
- TEMP Lucky Draw MOD, DO NOT PUBLISH
- Mod: Lucky Draw gradient tweak again
- Mod: Lucky Draw radial gradient is more DotGolf-coloured. Needs a logo too
- Mod: Delete comment
- Add: Live: Lucky draw v1.
- Mod: Live: Delete CategoryListPicker commented code
- Fix: API: Unattended Green Fee Payments - For green fees that applies to both affiliated and non-affiliated players, use the group name as the display name.
- Fix: When restoring a previous member, their previous membership number is used if it is available. Mod: When restoring a previous member, their email and DOB values are populated by default.
- Mod: LG Play Admin Site: Voucher Report: add "Item No" column (which is the Order Detail ID) so that clubs can reconcile the slicer report easily (the slicer report uses the Order Detail ID)
- Fix: Updated Vortex URL.
- Fix: Hardcoded vortex URL.
- Mod: Stats go straight to Vortex; preparing to decommission office Vortex box.
- Mod: Enable ElasticTrackerModule for LoveGolf.
- Mod: API: Unattended Green Fee Payments - Removed unnecessary join to TBClubSettings table. As of now, UFP is more suitable for clubs that does not have tee booking.
- Mod: ClubCMS: TeeBooking - #21351 Release locked timeslot upon logout. https://dotgolf.atlassian.net/browse/DG-656
- Fix: www.golf.co.nz as well as golf.co.nz get logged to Vortex.
- Fix: A few more script tags needed https for Public.
- Mod: Live: Love Golf: Offer: updated the supporting text for the Campaign Image label (and hide the help link with obsolete content)
- Fix: Live: Love Golf: image and file uploaders update (upload files to S3)
- Add: Dev PC build: telnet client for Windows.
- Fix: Loyalty CoA settings fixes.
- Add: Score.ScoreUID column.
- Mod: Live: remove resolved TODO.txt file
- Mod: Swipecard format for North Shore+Kounta.
- Add: ISVAPI: Root directory added so I can start externing some stuff.
- Mod: ClubCMS: Facility: display the 9h logo for 9h events
- Mod: ClubCMS: Love Golf: Event Search control: limit the offer description being displayed (so the box doesn't extend vertically); also display the 9H logo for 9h events
- Add: Handy sp_whoisactive 3rd party util to see what's running in sql server. See http://whoisactive.com
- Fix: Removed dev appsettings from XeroSync project; these broke the Stage environment.
- Fix: Live: Competition: Copy competition - Fix ticket #13281. Comp created using "Copy Competition" does not get created with new CompetitionTypeData but instead, the new comp gets linked to the original comp's CompetitionTypeData.
- Add: Index to speed up subs report.
- Mod: TBTransactionProcessor: PayByBillingTokenProcessor: just corrected a typo error in the email subject
- Fix: Bulk Email: Send (Email Details): fix the previous commit. no need to display "none" for now
- Fix: Bulk Email: Send (Email Details): fix the previous commit. We need the divUploadedAttachmentsMessage element always.
- Mod: Bulk Email: Send (Email Details): display the attachments alert box only if there's an attachment
- Add: VMware VSphere installer.
- Add: ClubCMS: Make Time Play 9 logo
- Mod: ReverseProxy: sites: added the HGC url
- Mod: ClubCMS: bindings: added the HGC urls:
- Fix: Bulk Email: Send View (Email Details): display the existing attachments in the divUploadedAttachmentsMessage element so that when the email is re-saved, the draft won't lose the existing attachments saved
- Fix: Bulk Email: GetEmailDraft: when getting the existing attachments, include the attachment ID (we'll need this when the user tries to save the email details again)
- Fix: API: Bulk Email: GetEmailDraft: when returning the existing attachments, include the attachment ID (we'll need this when the user tries to save the email details again)
- Fix: API: Fix failing test cases around auto booking.
- Mod: Live: Functions: Unbilled customers page - Changed invoice reference text to "Bar Tab(POS) charged to <Customer Name>". Add: Live: Functions: Unbilled customers page - Log invoice and manual journal payloads when posting to Xero.
- Add: NZCRData.MarkerUID key, generated with a trigger (since we have to make it up)
- Add: Club.ClubUID column for ISV API use.
- Mod: ExtQuery: AXAccountPosSummaryReportDataSource: Changed the way we display the columns. It will be easier to compare when we put identical columns (from different data sources) side-by-side. For example Xero (Opening) vs DG (Opening).
- Mod: ExtQuery: AXAccountPosSummaryReportDataSource: Display breakdown per Kounta register only if the club has the Kounta product.
- Add: ExtQuery: AXAccountPosSummaryReportDataSource - initial commit.
- Mod: ClubCMS: rMemberSignupConfirmationV2: add new control property: EnableInstalmentOption (clubs may or may not want to give an option to pay by instalment)
- Mod: sql: ClubCMS: insert a new control property for the signup confirmation control
- Mod: ClubCMS: rMemberSignupV2: Category dropdown: added a "- Select One -" option
- Mod: Live: just rephrased the message added to the invoice about paying through the club website
- Mod: Live: just rephrased the message added to the invoice about paying through the club website
- Mod: sql: ClubCMS: insert new control properties
- Mod: Live: XeroSync: ExportInvoicesToXero (used by Flexiclub, Tauranga, and now, Pakuranga so far): when syncing the invoices created in ClubCMS (when a member signs up), the invoice should always be approved or authorised because signing up in ClubCMS means there'll be a corresponding payment to be linked to that invoice. The invoice must be authorised in Xero so we can have payments against it.
- Mod: ClubCMS: rMyAccount: added new control property, EnableChangeToInstalment, which we can use to turn on/off this feature (some clubs may want their members to contact them if they want to pay by instalment)
- Mod: ClubCMS: rMemberSignupV2: add new control property: EnableInstalmentOption (for clubs who don't want to give an option to members to pay by instalment)
- Add: Member.MemberUID uniqueidentifier column for ISV API use.
- Mod: ClubCMS: rMyAccount: add the House/Rnd Account table at the bottom (copied the code from UMyAccount)
- Fix: ClubCMS: rMyAccount: hide the instalments preview and button (change to monthly) if there's no instalments data to show
- Merged revision(s) 33932 from Branches/Trunk.2019-09-05.one-solution-to-rule-them-all: MOD: HandicapProviderLegacy works with NonAffiliateIds. !important ........
- Mod: Live: Xero Sync: FindInvoicesToExportToXero (used by Flexiclub, Tauranga, and Pakuranga): only try to export (to Xero) invoices with an amount greater than zero.
- Fix: "These columns don't currently have unique values" error when searching and attempting to add a casual golfer as a new member, when that casual golfer has played before and has an existing PersonClubDetail record.
- Mod: golf.co.nz: redirect access to old path "http://www.golf.co.nz/uploads/AucklandGolfFacilityReportFinal.pdf" to the home page. We may want to physically delete this file as well in prod. Matt Southerden, NZG requested to take down the file / link.
- Fix: API: Unattended Green Fee payments - /list-greenfees endpoint returns empty results because of issue converting the Date parameter value passed from the app. As a workaround, we will used the server's current date which is in NZST to the api_UFPGetGreenFeesForDate SP. Safe to do for now since we only allow green fee payments on the current day.
- Revert previous commit svn 33917.
- Fix: API: Unattended Green Fee payments - /list-greenfees endpoint returns empty results because of issue converting the Date parameter value passed from the app. As a workaround, we will used the server's current date which is in NZST to the api_UFPGetGreenFeesForDate SP. Safe to do for now since we only allow green fee payments on the current day.
- Add: Git for Windows to dev-pc-installer
- Fix: Silly SQL bug caused my form not to save.
- Fix: Cachebuster
- Mod: https://dotgolf.atlassian.net/browse/DG-513 Ability to set a Xero Account Code on CategoryClubTags so loyalty gets posted to the correct GL account.  A practical example is when the club wants to expense loyalty earned in the shop to a different GL code to loyalty earned in the bar/cafe.
- Add: dev-pc-build: Agent Ransack installed.
- Mod: ClubCMS: update EmailReturnPath to no-reply@golf.co.nz
- Add: Script for CategoryClubTagLoyalty.AccXeroAccountCode.
- Mod: (world-merge) Fixed another localmembercode ref in Advanced member search
- Mod: ClubCMS: UMembershipApplication and rMembershipApplicationPaymentConfirmation: updated the EmailReturnPath to no-reply@golf.co.nz
- Fix: Org: Tournaments: Finalise: for manually added participants, hide the fields and indicate "Manual"
- Fix: Xero trial balance import was not getting the right data columns; for some reason we need the YTD debit/credit columns to get the full amounts for the GL accounts.
- Mod: world-merge: ClubCMS: removed unused method after Login refactor
- Mod: Include some files in the warehouse builder csproj.
- Add: Some indexes to make the NZGolf Rounds by Date report work without timing out.
- Mod: world-merge: ClubCMS: Split the trusted memberId login code and username/password login code
- Mod: ClubCMS: Subs Online Payment: added new field: TBTransaction.DotGolfSurcharge: Slicer will be using this new field to determine the fee charged to the customer (this amount will stay with DotGolf, and will be subtracted from TBTransaction.Amount to determine the amount to be paid to the club)
- Mod: world-merge: ClubCMS: refactor IsValidLogin to remove IsValidPasswordForComputerNo and simplify logic.
- Fix: http image loading caused mix content warning.
- Mod: sql: TBTransaction table: add DotGolfSurcharge column (to be used initially for golf club subs online payments)
- Mod: TLS cert for golf.co.nz.
- API: Unit Tests: Wrong method call. Instead of Assert.AreEqual() I was calling Assert.Equals().
- Add: Build script (powershell mostly) to build a new development PC from a vanilla Windows 10 installation.
- Add: Unattended Fee Payments now form part of the "Send Reports" area of Slicer.
- Fix: #22030: ClubCMS: DBUtilities: GetClubWebsiteAddress: assign @Website to one url only (it just so happened that members.manawatugolfclub.com was assigned to two sites--the old and the new one, and this threw an error)
- Fix: Crash when visiting the Vend Settings page when a club is not yet linked to Vend.
- Add: API: Messages: New endpoints /mark-as-deleted and /undo-mark-as-deleted. Also, cleaned-up some commented lines of code.
- Mod: world-merge: Style improvement for ORG SSO fix
- Fix: ClubCMS: rMyAccount.ascx: added parseFloat to subs cc/a2a transaction fee (recently added)
- Fix: world-merge: SSO: use query instead of executescalar
- Fix: world-merge: ORG SSO fix
- Fix: world-merge: Logging into Org fails with 'The ConnectionString property has not been initialized.' trying again
- Fix: ClubCMS: oops, reverting the previous commit (didn't have to do that previous change)
- Mod: ClubCMS: rMyAccount: temporarily revert ComputerNo change (will need to merge & publish a change)
- Mod: ClubCMS: My Account: update the transaction fee computation (we now add 50c before getting the ceiling of 2.5% of the amount); also implemented a minimum transaction fee (it now will always be at least $1.95)
- Fix: world-merge: ClubCMS build
- Fix: world-merge: Logging into Org fails with 'The ConnectionString property has not been initialized.' trying again
- Mod: ClubCMS: rMemberSignupV2 & rMemberSignupConfirmationV2: temporarily revert ComputerNo changes from these two controls (will need to merge & publish a change)
- Fix: world-merge: Logging into Org fails with 'The ConnectionString property has not been initialized.'
- Mod: ClubCMS: Functions Online Registration: Renamed TotalAmountDue to AmountToPayExcludingFee, TotalAmountDueWithTransactionFee to AmountToPayIncludingFee in the FunctionRegistration class. Fix: ClubCMS: Functions Online Registrations: Had the values for TBTransaction.Amount and TBTransaction.CapturedAmount interchanged.
- Mod: Future proof: Compile error when we upgrade to .Net Core 3.0 so that we can revisit the AllowSynchronousIO thing.
- Add: Small experimental kounta-frame mod that I forgot to commit.
- Mod: ClubCMS: rMemberSignupV2 and rMemberSignupConfirmationV2: update the transaction fee computation (we now add 50c before getting the ceiling of 2.5% of the amount); also implemented a minimum transaction fee (it now will always be at least $1.95)
- Fix: world-merge: advanced member search was incorrect when searching someone's secondary membership number at the logged in club.
- Fix: API: Unattended Green Fee Payments: The TBTransaction.CapturedAmount should only contain the total amount due without the transaction fee. Mod: API: UnattendedFeePaymentService: Remove duplicate method UpdateGreenFeePaymentTBTransaction() - this method is not used elsewhere.
- Mod: No longer catch exceptions thrown during global nunit setupteardown. Renamed the setupteardown class so errors are more obvious. Fix: WHSAPI disabled in unit tests
- Fix: world-merge: Only drop wa_IsValidPassword proc if it exists to fix unit tests
- Fix: world-merge: AdjustedGross is back to an int because for some reason C# can't cast it to a short even though it's a smallint in the DB
- Mod: API: Unattended green fee payments: Endpoint /list-greenfees - Handle Null CourseId in the ListGreenFeeRequest
- Add: Unattended Fee Payment slicing.
- Fix: Unattended Fee Payment: FK copy/paste error.
- Add: Unattended Fee Payment slicing database mods.
- Fix: world-merge: invalid sql in GetPassportCredentialIdForCredentials resolved. In theory this should work.
- Mod: API: TeebookingController: Endpoint /club-name-match now indicate if the club has TBP and UFP products. Mod: SQL: wa_ClubNameMatch - Added HasTBP and HasUFP columns
- Mod: ClubCMS: rEventSearch: GetEventsDs: exclude events 7 days after their End Date has passed (the original requirement was to keep displaying those past programs unless they are marked as inactive)
- Fix: world-merge: invalid sql in GetPassportCredentialIdForCredentials
- Fix world-merge: Put @IsDeceased back for live_FindMembers_SearchText (merge clobber)
- REINTEGRATED world-merge ComputerNo changes from World.
- Fix: Live: Shared: Club: ControlIsActive: update the query which check if a certain control(s) is used in the club website. (We now have two course status controls, and this caused an issue wherein only the new control is the one being queried, when it should query both course status controls
- Mod: Whitespace change to force new DotGolf.Live.DLL version.
- Fix: Create Member: Date format issue for new d/mm/yyyy.
- Mod: Casual Golf Admin: allow voucher redemption from the report page
- Mod: Casual Golf API: RedeemVoucher: made the voucher code optional (order detail id is the only mandatory field)
- Fix: ClubCMS: DBUtilities: GetValidClubCategories: corrected the LastInstalmentDate returned for periodic categories with no required upfront amount
- Mod: ClubCMS: rMemberSignupConfirmationV2: updated the EmailReturnPath to no-reply@golf.co.nz of the email notifications sent to the new member; also updated the welcome email header image path (use own unique path, and not the bulk email emailHeader.jpg)
- Fix: ClubCMS: rMemberSignupConfirmationV2: update CWMembershipApplication (MemberId and Status) after a successful payment; update the EmailReturnPath to no-reply@golf.co.nz for the email notification sent to the club; use PaymentTypeId 715 if the payment is A2A, otherwise use 700
- Fix: ClubCMS: DBUtilities: GetValidClubCategories: corrected the LastInstalmentDate returned for periodic categories
- Mod: ClubCMS: sql: insert new control: rCourse Status Style2
- Add: ClubCMS: Course Status Style 2 control: to be used initially on Pakuranga's site
- Mod: Bulk Email: toolbar: add line and dashed line elements
- Mod: TBTransactionProcessor: SubscriptionInstalment: just updated the email content (sent to member with failed auto billing)
- Fix: Tasks: CheckForMismatchesOnFinalisedTakingsTask - Avoid sending an e-mail if there are no mismatches.
- Mod: TBTransactionProcessor: SubscriptionRenewal: just updated some email css, and added a ClubId condition when querying the generic matt usersecurity record
- Mod: TBTransactionProcessor: SubscriptionInstalment: just rephrased two email subjects
- Mod: TBTransactionProcessor: SubscriptionInstalment: send an email notification to the member about the failed auto billing. Also, insert a Member/Passport Note.
- Mod: Strongly type the AppPerformanceTracker output so that we don't end up with Elasticsearch errors about changing anonymous type names.
- Add: Stats SystemPrefix for API.
- Add: Vortex configuration to DotGolf.API so we can get the missing Kounta stats.
- Fix: Okay, okay.  SendAsync is useless and doesn't get called for everything; resorting to a sprinkling of IncrementKountaApiCallStat() calls everywhere we call off to Kounta.
- Fix: Can't use absolute prefixes since we have more than one host calling into the Kounta API; one clobbers the other's stats.
- Fix: For some reason Stats.Increment doesn't work for this??
- Fix: Applied Marcus's fix from rev 31905 to this branch of the code.
- Add: Vortex logging for each Kounta API call so we can detect when we're getting close to the 180 limit.
- Mod: WHS: style; combined attributes
- Mod: Bulk Email: update default text colour to #222222 (dark grey) from #7c7c7c (light grey)
- Mod: API: BulkEmail: GetEmailDraft: also return EmailAttachments linked to the draft (missed to include in the previous commit)
- Mod: Bulk Email: draft details: display the list of existing attachments for the draft
- Mod: Bulk Email: GetEmailDraft: also return the list of existing attachments for the draft.
- Fix: ClubCMS: rMemberSignupV2: corrected the displayed discount amount
- Mod: ClubCMS: member signup v2: just added the text "(plus transaction fee)" to the note about the monthly payments
- Fix: Live: KountaSync: Sync non-complete orders - Fix null exception when parameter "order-status" is not set.
- Mod: Updated README to document swagger build chain.
- Fix: (David) csproj post build job needed quotes for people who have spaces in their working copy path.
- Mod: Undo Jenkins test
- Mod: Jenkins test
- Add: swagger.g.json sorted; put back the double GetSwagger() call to fix the entityJS object type error.
- Test: build test
- Fix: build.cmd logic error.
- Mod: Updated swagger.g.json.
- Mod: Jenkins will now double check that the swagger.g.conf file is current, and fail the build if this is not the case.
- Add: swagger.g.json so we can extern and use it from other apps.
- Fix: Moved AuthOperationFilter out of the --generate-swagger-conf condition; it should always be active. Mod: Refactored a little bit to make glory.
- Mod: sql: ClubCMS: insert a new property for Member Signup Confirmation v2 control
- Fix: WHS: First load issue with UnderlyingTypeFilter
- Aaargh, broke the build.
- Mod: Changed some comments, ignored .g.json file.
- Mod: golf.co.nz: scrolling partner logos: added Geo Foundation
- Mod: golf.co.nz: About the Game: Default: added Sustainability section, as requested by NZG
- Add: Automatic generation of swagger.json.
- Mod: ClubCMS: rmembersignupv2.css: removed margin top from membersignup-title
- Mod: ClubCMS: updated the default reCAPTCHA keys to be used for rMemberSignupV2
- Add: Kounta: KountaOrderStatus (was not included in svn commit 33719).
- Add: Kounta: Ability to sync Non-COMPLETE orders from Kounta - by default the sync job imports orders with status ON_HOLD into our DB.
- Mod: golf.co.nz: added a 300 x 116 right hand small banner on the home page (to be used to promote Handicapping 2020 initially); this uses the existing FrontPageSidebarimage control
- Fix: Build, because csproj
- Mod: Reports: Removed HandicapCertificateReportAU, because AU
- Add: API: Messages: New endpoint /view/{messageId} - returns the Message details and the URL (e.g. EmailViewer) to access the full content of the message.
- Mod: Removed HandicapController.cs since it is no longer required. Add: Unit tests for GET members/{}/handicap
- Add: GET /members/{}/handicap endpoint to retrieve a handicap at a point in time. Mod: Moved /handicap/members/{}/override to /members/{}/handicap/override to fit better with our naming conventions.
- Fix: Wiretap middleware was causing trouble in the unit tests.
- Mod: WHS: Swagger doc decimals fixed
- Mod: Updated WHS Client.
- Fix: WHS: Decimals correctly generated by swagger
- Mod: golf.co.nz: remove the On Par logo as requested by Matt Q
- Fix: Live: Settings: Fix null access exception.
- Fix: #21798 When adding a new member and merging with an existing casual golfer, the new affiliated membership ends up with no Passport record.
- Mod: Live: Functions: Changed line description format from "KOUNTA POS: <reporting group" to "Bar Tab (POS): <reporting group". Products that are not assigned to any reporting group in kounta will be under "Bar Tab (POS): Miscellaneous".
- Mod: TBTransactionProcessor: SubscriptionInstalment: just filtered the query further to golf clubs only "and inv.ClubId < 700" (this eliminates Flexiclub and the PGA)
- Add: CMember, NonAffiliate MemberCode columns, populate, triggers, indexes and view mods.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- REVERSED ComputerNo cleanups from Branches/one-solution-to-rule-them-all.  We're changing tack on this a little bit, adding {CMember,NonAffiliate,ClubMember}.MemberCode columns to store the full 7 digit local codes to make a better replacement for ComputerNo.
- Mod: Kiosk: Partial local member code search works again
- Mod: drop api_GetActivePassportForCredentials since it's been moved to C#
- Fix: Compile error around XeroBatchDataImport after LocalMemberCode refactoring.
- Add: Partial local member code parsing
- Fix: LocalMemberCode: SQL error in GetActivePassportForCredentials caused exception when logging into ClubCMS. Fix: Login errors were swallowed by try..catch clauses with no exception logging.
- Mod: ClubCMS: rMemberSignupV2: just removed the unnecessary Club ID condition
- Mod: ClubCMS: rMemberSignupConfirmationV2: apply the changes to the transaction fee here as well
- Mod: Adweb: Reverted ContactSearch computerNo changes
- Reintegrated ComputerNo cleanups from Branches/one-solution-to-rule-them-all.
- Fix: WiretapMiddleware was again messing up request bodies.
- Add: WHSAPI: Some logging so that I can find the appsettings issue in Prod.
- WHSAPI: Updated TODO.
- Mod: Production appsettings.json file added.
- Fix: Knockout click bindingHandler for ipad responsiveness wasn't passing along all the arguments to init(), causing unexpected Knockout errors at runtime.
- Mod: Upgrade ko.validation.js
- Mod: ClubCMS: sql: insert another control property for rMyAccount
- Mod: TBTransactionProcessor: SubscriptionInstalment: add join to ClubProducts table so we only process the auto instalment payments for clubs with the SUBSP Product only
- Mod: ClubCMS: rMyAccount: when inserting into TBTransaction, set IsPurchase to true
- Mod: Build assembly version from Jenkins environmental variables.
- Mod: /health now reports assembly version. Mod: Build now sets assembly version numbers. Mod: Don't log connection string in RunPCC.
- Fix: ClubCMS: rMyAccount: correct the fee for single payment using credit card (applicable only to the PGA)
- Mod: WHSAPI RunPCC: Don't try and run for the last 8 years; seems a bit excessive.
- Fix: WHSAPI RunPCC: Don't wait for Console.Readline().
- Mod: WHSAPI: Use TimeZoneConverter (https://github.com/mj1856/TimeZoneConverter) to support Windows timezone identifiers on linux.
- Mod: WHSAPI RunPCC: Log connection string so I can check it.
- Fix: rMyAccount: there are some clubs who are allowed to pay the full amount using a credit card or a debit card (this is only applicable to the PGA at the moment)
- Mod: sql: CWControlProperty: insert a new property for the rMyAccount control
- Mod: ClubCMS: rMyAccountPaymentConfirmation: email notification: rephrase text; use full club name
- Mod: ClubCMS: rMyAccount: include saving of transaction fee amount to TBTransaction
- Mod: ReverseProxy: added -,-,0,1,ohope2.cw.golf.co.nz
- Mod: ClubCMS: bindings: added ohope2.cw.golf.co.nz
- Mod: ClubCMS: edited the Pakuranga entries
- Mod: ReverseProxy: updated the two Pakuranga entries
- Mod: Live: Functions: Change line item description to "KOUNTA POS: <Reporting Group> (Qty: X)".
- Add: Live: Functions: Group Kounta POS sale items by Reporting Group on the Xero invoice.
- Fix: WHSAPI: Relative path error in codebuild for RunPCC.
- Mod: WHSAPI: Build fixes.
- Mod: WHSAPI: Build fixes.
- Mod: WHSAPI: Build fixes.
- Mod: WHSAPI: Build tightened up a bit by using MSBUILD to build the sqlproj and dotnet build to do the rest. There is also a BUILD.CMD script that does the build, so Jenkins can call into this for now.
- Add: Global.asax - Check if Request.UserAgent contains "iPhone" or "iPad" then redirect to the appropriate apple store links.
- Add: Ability to search for deceased members by selecting a checkbox in the Members search area in DotGolf Live.
- Add: Redirection and browser sniffing for /p/app/mygolf QR code link.
- Add: Redirection and browser sniffing for /p/app/dotgolf QR code link.
- Add: Allow single sale overdrafts: Business logic and unit tests added.
- Add: Allow single sale overdrafts: Setting added.
- Fix: Public: HelperFunctions: The mod in line number 1617 should NOT have gone in with the previous commit svn no. 33526.
- Mod: Turns out the Loyalty Liability Account setting is no longer used by anything; so I have removed it.
- Mod: WHS: Scores added to member merge tests
- Mod: WHS: Unmerge looking good
- Mod: Live: Club Facilities: Remove the "hidden" checkbox (not applicable for now). Fix: Live: Club Facilities: This mod stops the user from adding the same facility type. E.g. If driving range is already in the list, the user should not be able to add another driving range.
- Add: Live: Functions: Make venue list scrollable in the booking page.
- Mod: WHS: Unmerge working mostly as indended.
- Fix: Live: another ko computed not firing in bookingeditor #21642
- Fix: Live: markerSelect binding wasnt notifying subscribers when selectedMarker was set #21642
- Fix: Live: Renewals: ClubMemberItemSummary: fixed typo: from "CurrectAmount" to "CurrentAmount" from revision 33322
- Fix: Live: #21552: Renewals: correct the @LastSubPeriod query (added "top 1" and "order by EndDate desc". Some clubs have two subperiods for the year (to accommodate summer periods). Taupo was returning the SubPeriodId 214 (Summer) when it should return SubPeriodId 206.
- Fix: WHS: Reverted previous change, because PetaPoco
- Mod: WHS: Added primary key names to petapoco inserts for clarity
- Mod: WHS: Unmerge almost done more (2 questions)
- Mod: Try _IsPortable=false to see if this helps the publish issue.
- Mod: WHS: Unmerge progress, for code review
- Add: Live: Functions: Display "list" button in the calendar - when clicked, goes to the Events Report page.
- Fix: Live: Functions: Booking - Check if the catering service date/time is within the event Start and End date/time. Add: Live: Functions: Copy Booking - Added a quick edit dialog when user clicks on the Copy Booking feature that allows them to quickly edit the title and the catering dates.
- Mod: golf.co.nz: just updated the namespace of the new Sustainability from "DotGolf.Public.PlayGolf" to "DotGolf.Public.About"
- Add: golf.co.nz Golf Operations Guide page under About the Game as requested by Phil A.
- Fix: ClubCMS: rEventRegistration: Functions online registration - minor UI fixes.
- Add: golf.co.nz: Sustainability page under About the Game as requested by Jan
- Add: Experimental Kounta payment gateway which uses a Tampermonkey script to glue our payment iframe into Kounta, overriding a strategically set up Payment Type in the checkout area.
- Add: Public: Ticket #21351 - Release the timeslot locks (if any) held by the current user during logout from MyGolf.
- Fix: Live: Xero Sync: corrected the column names used to query the new table PaymentReference
- Fix: WHS: trigger Ambiguous column name 'IsProfessional'.
- Fix: ClubCMS: Functions: rEventRegistration: Show the main registration options for a function attendee only if the event type is a Function.
- Add: WHS: trigger for Member -> MemberHistory
- Mod: WHS: changed member merge earliestScoreToBeMerged.AddMilliseconds to be larger than sql datetime error range of 3.333 ms
- Add: WHS: MemberHistory table
- Fix: Live: Functions: Registration options - Turns out Registration.ClubId column only exists in Dev (NZE). Removed ClubId from the SQL queries to RegistrationOption table. SQL: RegistrationOption: Change Registration.CompetitionId to Nullable.
- Mod: WHS: Rename linux publish profile
- Add: WindowsX64 publish profile to make Jenkins happy.
- Fix: Path in RunPCC Dockerfile.
- Mod: WHS: Unmerge member stub and failing test
- Mod: Trying to make publishing RunPCC work.
- Mod: Trying to make publishing RunPCC work.
- Mod: Trying to make publishing RunPCC work.
- Add: Functions: Events Report - Added new filters (1) Confirmed Events, (2) Invoiced Events, (3) Pending Invoice. Also, there is now a link to the function invoice in Xero.
- Add: <Project Sdk="Microsoft.NET.Sdk">
- Add: More csproj fun
- Add: More csproj fun
- Mod: WHS: Add RuntimeIdentifiers to RunPCC.
- Mod: WHS: Removed Platform from csproj to try and make it publish.
- Fix: Stupid microsoft
- Fix: Stupid microsoft
- Mod: Rename WHS.Sync to WHS.Syncing
- Mod: WHS: Renamed runpcc publish profile to WHS-RunPCC-LinuxX64.
- Mod: Adweb: packages.config targetframework="net472"
- Mod: Unsacrificed WHS.Sync namespace (didnt fix dev adweb build 8714)
- Fixed accidental commit.  Ignored a .user file.
- Add: WHS: Dockerfile and publish profile for RunPCC.
- Revert revision(s) 33492 from Trunk: Mod: Shared: sacrificed WHS.Sync namespace to Jenkins (dev adweb build 8714) ........
- Mod: Shared: sacrificed WHS.Sync namespace to Jenkins (dev adweb build 8714)
- Mod: Adweb: Small refactor of WhsMergeMembers
- Add: Temp mod to allow Adweb to merge members in WHSAPI
- Fix: rEventRegistration: parseFloat() returns NaN if the registration option does not have a set price.
- Fix: Create Member: The Merge links became visible again momentarily once the save completes (and before the redirect is done) - giving the user the opportunity to click Merge and cause untold pain.
- Mod: #21556 Changed DOB format from yyyy-mm-dd to dd/mm/yyyy.
- Add: ClubCMS: Functions: Online registrations - registration options.
- Fix: Live: Functions: Return 0 if venue cost is null.
- Add: Live: Functions: Online registrations - Allow clubs to add registration questions.
- Fix: Adweb: Merge scores uses correct event handler
- Mod: golf.co.nz: redirect direct access to these files (http://www.golf.co.nz/uploads/Full%20Report.pdf and http://www.golf.co.nz/uploads/Executive%20Summary.pdf) to the golf.co.nz home page.
- Fix: Adweb: prod will no longer be broken next publish because of web config garbage
- Fix: http://adweb.golf.co.nz/ViewExceptionDetail.aspx?Id=420623766 This function worked for 1 ClubFeeDetailId but not more than one.
- Fix: Adweb: Dev is broken because of web config garbage
- Mod: Create Member: Validate the new membership number supplied by the user to ensure it's within the range for their club.
- Add: Some defensive code to ElasticTrackerModule to try and address some ORNS errors I've spotted in the logs.
- Fix: Should never use Response.Redirect(xxx, true) because EndResponse() causes exceptions and causes dirty thread aborts, possibly resulting in resources not disposed of properly.
- Fix: API: Exception when parsing the client unique id and UserAgent is absent.
- Fix: Lapsed social members were not properly reinstated.
- Mod: Adweb: Added DI and ServiceLocator
- Add: Validation to MemberNumberManager to ensure users don't pass nonsense into the form.
- Fix: Live: {0:$01,000.00 #21554
- Fix: Duplicated bearer token sometimes hits the API due to a suspected framework bug in Xamarin.
- Fix: Live: $##.##0.00;-$##.##0.00
- Fix: Create Member: Crashbug when trying to reinstate a lapsed non-affiliate/social member.
- Fix: Handle MemberOrNonAffiliateId==-1 gracefully when running scorecard inserted/deleted hooks where we only deal with affiliated members.
- Mod: _deploy: Changed max-concurrency to 1 to try and make failover a bit smoother while deploying new code to Live.
- Fix: Public: Viewing scorecards (in the competition results page) works again (after KO 3.5 broke it)
- Fix: EnterPaymentsPage
- Mod: WHSAPI: //todo cache this --> Consider it cached.
- Mod: EnableStripSwipecardYear enabled for Christchurch.
- ** DFH CODE REVIEWED TO HERE ** Mod: Teebooking: Release Times unit tests for latest teebooking early release time bug
- Fix: POS: Bad code causing checkout recovery fails #21473
- Mod: golf.co.nz: added a new page called "Handicapping 2020", which is accessed through the "About the Game" menu
- Mod: Performance: No longer query old DotClient/DotGolf Enterprise green fee data in the Greenfee by Month/Day report; it's just not fast enough and causes database locks.
- Fix: Live: Casual golfer page performance issue
- Fix: Org: Member Counts Report: use the member's club's region to count the member total for the region.
- Mod: #21314 Flexi membership low balance email - use category name, not code.
- Fix: Kounta gift card topup would fail if it was part of an order with other items.
- Mod: Org: improved button height of the Calculate Course Handicap button in Course Info
- Mod: golf.co.nz: added new sponsor (WineFriend) to the scrolling sponsor logos
- Fix: Early Timesheet Release bug causing an extra day of slots to be available to early members
- Fix: Love Golf Play: offer page: added line height to the merchant name / header text. Words used to overlap for extra long merchant names e.g. National Association of Left Handed Golfers NZ (NALGNZ)
- Fix: Competitions: Division estimated entries work on page load #21306
- Fix: Competitions: Division estimated entries work on page load #21306
- Fix: Competitions: THIS TIME division estimated entries works again after KO upgrade #21306
- Mod: Org: Replaced a //todo with an actual comment
- Mod: Removed a dead //todo
- Fix: Competitions: Division estimated entries works again after KO upgrade #21306
- Mod: Shared: Removed original MemberCode class since we're working on better stuff in a branch
- Mod: Shared: More MemberCode code
- Mod: Shared: Removed ChangeCentralMemberCode from NonAffiliate
- Mod: TBTransactionProcessor: SubscriptionInstalment: 1. include all instalments due on or before the current date 2. add the transaction fee, which is computed as ceiling(amount * 2.5%) - $0.05 3. indicate the transaction fee in the payment confirmation email 4. also updated some other email contents 5. save the transaction fee amount to the TBTransaction.TransactionFee column
- Add: Shared: MemberCode struct to handle our transition to 7 digit local member codes (now) and n digit central member codes (later, from WHS)
- Mod: ClubCMS: rMyAccount: Secure Online Payment section: rename the label if there's no other option but to pay the full amount using A2A
- Mod: ClubCMS: rMyAccount: apply the updated transaction fee for paying the instalments: ceiling(amount * SubsCommissionPercentage) - $0.05
- Fix: Scheduled Tasks: No longer logs an error if a task is defined with a null CronSchedule. Mod: No longer writes debug log entries every minute if a task is disabled in the ScheduledTasks table.
- Fix: Crashbug when trying to sync a member to Kounta if that member has no CountryCode on their record.
- Fix: Xero import for direct credit to member account now trims member numbers if we accidentally get trailing spaces in there.
- Mod: WHSAPI: Unskipped a few unit tests because we've settled on a workaround for https://github.com/dotgolf/world-handicap-system/issues/14.
- Mod: WHSAPI: Ability to update a member's OverridePendingHandicap value in POST /api/v1/members/{uid} Mod: WHSAPI: Removed organisationUID from POST /api/v1/members/{uid} as it's not intuitive and our permissions code doesn't need it anymore. Mod: WHSAPI: Standardised IsEligibleForHandicapping calculation by creating a single static method that does this. Fix: WHSAPI: Ability to make scores eligible for handicapping if this flag changes (eg. you add an OverridePendingHandicap value for a member in retrospect) Add: WHSAPI: Unit tests for the above.
- Mod: WHSAPI: Better test database names for debugging. Mod: Safety check the CreatedObject.UID value against empty guids; fail tests if this happens. Mod: Safety check against short/long 9/18H courses being created through CreateMarker() - indicating an incorrect nineHole flag.
- Mod: Sql: Add LocalMemberCode to ClubMember view
- Mod: WHS: Update existing DotGolf user to Admin in Postdeployment script
- Mod: WHS: Set DotGolf user to Admin in Postdeployment script
- Mod: WHS: Role/policy authorisation works with swagger
- Mod: WHS: Authorisation implemented, but need to assign roles to ISVs, possibly create Roles table + endpoints
- Mod: ClubCMS: rMemberSignupV2: just corrected the comments
- Mod: ClubCMS: rMemberSignupV2: transaction fee: align the A2A (monthly) transaction fee with the credit card (monthly) transaction fee. Also added notes and comments.
- Mod: WHSAPI: Better way of intercepting data to log to Elasticsearch, which doesn't involve putting a buffer in the pipeline.  Should give us slightly better performance.
- Fix: WHSAPI: Given the WiretapMiddleware uses a disposable MemoryStream, we add that into the pipeline first followed by the ExceptionHelperMiddleware.  Otherwise the exceptionhelper might try and write to a disposed stream.  Basically the WiretapMiddleware must be the first thing in the pipeline (of middlewares that modify the content) otherwise this error will occur.
- Fix: WHS: Fixed Wiretap "Fix"
- Mod: Love Golf Play Web API: CreateGotgBulkEmail: exclude empty email addresses in the condition which excludes the deceased (as it used to)
- Add: WHSAPI: Committee Handicap Override functionality added.  This is where the Committee can completely override a member's handicap index for a period of time, setting it to a value they choose OR withdrawing it altogether.
- Fix: WHS: WiretapMiddleware no longer swallows request body
- Mod: Live: XeroSync: rephrased columns from the new table PaymentReference
- Mod: WHS: Authorize attributes for everyone Mod: WHS: Moved UpdateOrganisationMember to the member controller and renamed it
- Mod: Live: Replaced more plaintext 'NZD' with DefaultCurrency Code
- Mod: Live: Replaced plaintext 'NZD' with DefaultCurrency Code
- Mod: Live: XeroSync: Xero payment reference: we now get the reference text to use from the new PaymentReference table
- Mod: sql: this script creates the PaymentReference table which will be used for the Xero payment reference, for easier reconciliation
- Fix: #21238: golf.co.nz Forgot Password: Passport: GetUserCredentials (by Membership No. or CentralMemberCode):
- Fix: ClubCMS: Corrected currency display in event checkout
- Fix: ClubCMS: ascx build failures
- Fix: ClubCMS: ascx build failure
- Fix: ClubCMS: missing reference to DotGolf.Data in rCompetitionList
- Fix: ClubCMS: missing reference to DotGolf.Data in UCompetitionsCalendar
- Mod: ClubCMS: Multicurrency - Replaced ToString("C") with ToString(AXCurrency.DefaultCurrency.FormatString)
- Mod: Live: DELETED StartSheet.aspx and related unused files. Added a redirect.
- Mod: Public: KO 2.3 -> 3.5 upgrade. Possibly breaking, TBD
- [MAJOR] Mod: Removed T-Score functionality from DotGolf Org.
- [MAJOR] Mod: Removed T-Score functionality from DotGolf Org.
- Mod: Org: Update csproj to be accurate after KO 2.3 -> 3.5 upgrade
- Fix: Crashbug when trying to connect a new club to Kounta.
- [MAJOR] Mod: Removed T-Score functionality from DotGolf Live (Org will soon follow).
- Fix: Live: Build fix (missing namespace import)
- Mod: Live: Multicurrency - replacing "C" string formatting with AXCurrency.DefaultCurrency.FormatString
- Mod: wa_TBCalculatePlayerGreenFee: added WITH RECOMPILE to try and rule out parameter sniffing issues with this proc.
- Fix: WHSAPI: WiretapMiddleware broke the unit tests due to a missing IWiretapLogger dependency.
- Add: WHSAPI: Wiretap middleware to log all requests and responses, including ISV username, ip and execution durations to Elasticsearch.
- Fix: PEBKAC, dammit.
- Fix: Date_Started is now updated when a member is reinstated at a club.  Previously this wasn't being updated, resulting in members incorrectly keeping their original start date.
- Mod: Live: DefaultCurrencyFormatter defaults to Accounting format
- Mod: Live: Extquery DefaultCurrencyFormatter accepts both accounting or human formats
- Add: Live: ExtQuery DefaultCurrencyFormatter for better multicurrency in reports
- Mod: Adweb: Shared: Email Viewer: display the EmailReturnPath; separate the display of the Sender Name and the Email Address From (previously, this was a cause of confusion because when you actually view the email received on an email client, e.g. Outlook or Gmail, the email address displayed beside the Sender Name is the Email Return Path, not the Email Address From).
- Mod: Adweb: MailerStatusViewEmail: display the SenderName and EmailReturnPath
- Fix: Adweb: Weird WHS build failure
- Fix: Adweb: Removed new line from Editmember
- Mod: Adweb: Moved KO 3.5 to master page, remove duplicate KO 3.5 from packages
- Fix: Live: Subs: assign the club's email as the EmailAddressFrom; assign "no-reply@golf.co.nz" as the EmailReturnPath.
- Mod: Adweb: Email Resender: include copying of EmailReturnPath and SenderName
- Mod: Adweb: Typo fix
- Mod: WHS: Replaced Roles with Policy auth.
- Fix: Live: Comp setup Delete modals show their text again Fix: Live: Comp setup correctly displays deleted rounds when editing a comp
- Fix: Live: Updating member without a DOB no longer throws a Hook error
- Fix: Live: Removed debugger line from CardPrinting.aspx
- Fix: Live: KO bug in CardPrinting.aspx
- Mod: ClubCMS: rMemberSignupV2: by default, use SubsCommissionPercentage to compute the transaction fee to be paid by the member
- Mod: Live: Functions: Remove tags from Functions.
- Mod: Adweb: KO 2.3 -> 3.5 upgrade
- Mod: Org: KO 2.3 -> 3.5 upgrade
- Fix: WHSAPI: appsettings.development.json missing comma
- Fix: Strange comparison to an empty string wasn't catching undefined.
- Fix: Live: Member History: Include Emails Sent: handle null email ID
- Mod: WHSAPI: Improved elasticsearch exception logging, fixing some bugs around hostname. Mod: Updated README.
- Fix: Org: Finalise: save changes: corrected the condition when saving the changes (when count is greater than zero, not one)
- Add: WHSAPI: Exception logging (to Elasticsearch).  Errors are now returned to the client with an ID (guid) which we can use to find the exception using Kibana.
- Fix: WHS: Unit tests. Disabling roles until they can be assigned
- Add: WHS: ISV Roles. Not hooked up to anything yet
- Fix: golf.co.nz: footer: view all partners link: added a margin-top style to make the link clickable again (the slick slideshow dots got in the way)
- Fix: Create Member: Null reference exception inadvertently added.
- Fix: Live: Weird KO bug causing the subs import balance/startdate computed from not notifying subscribers. Updated other places to be safe
- Fix: Subs Import: If the ID hasn't roundtripped to the browser it is possible for a second request to insert a duplicate import row.
- Sacrifice Shared csproj to Jenkins
- Mod: WHS sync: ParentUID on awayscore now enabled
- Fix: WHS: Away score parentUID
- Mod: WHS: ParentUID on awayscore
- Mod: WHS sync: Refactored SyncScores to be DRYer
- Mod: WHS Sync: Updated to latest WHSClient Fix: Shared: databaseAssociationId compiler warning
- Mod: WHS: Changed UID on Score model object to ScoreUID for consistency
- Mod: WHS sync: Enabled AwayScore sync
- Fix: Subs import: Goes much faster and saves async
- ** DFH CODE REVIEWED TO HERE ** Mod: Live: Member History: cleared some table header text as it's not applicable to half of the history items (e.g. email sent, subs stuff)
- Fix: Live: Member History: fixed the condition which check for the "EmailSent" change type; also updated the text displayed
- Mod: Live: Shared: ClubMember: RetrieveHistory: added generic "Data1" and "Data2" columns to the data table; initially will be used by the following change types: 1) emails sent 2) invoice sent 3) statement sent.
- Fix: Create Member: Edge case where you can create a duplicate live member at a club by merging the new member with itself.
- Mod: WHS sync: AwayScores unit test 1
- Fix: Whoops, angered Jenkins by leaving a deleted aspx in the csproj.
- Fix: WHS Sync: DatabaseAssociationId
- [MAJOR - workflow change for clubs] Mod: Members/Create.aspx is now the way we create/add members in DotGolf Live.
- Mod: #20987: Live: Member History: Subs: allow the club to view the invoice email that was sent to the member
- Fix: Kounta: Redeem endpoint - Reject a redeem request if the payment amount exceeds the order total.  Fix ticket #19065.
- Mod: WHS: Swagger doc authentication works now
- Mod: WHS: exclude generated files from svn
- Mod: WHS: Removed package-lock.json
- Add: WHS: Inject javascript into swagger ui
- Mod: Scheduled Task engine now keeps a list of tasks in the database along with some basic status information and the ability to disable a task by setting Enabled=false.
- Fix: Scheduled Tasks: task timeouts did not work, the tasks never actually get cancelled on timeout. Fix: WHS Sync: CancellationToken is now cared about.
- Mod: WHS Sync: Away score syncing. Split it up from Home score syncing
- Mod: Bounce tracker will now handle UTF-8X error messages gracefully.  These are normally spam/phishing messages anyway, so we just delete them.
- Fix: WHS: GetAwayScores sql
- Mod: Reduced log retention for DebugLog since this table got up to 60GB in Prod.
- Mod: WHS: AwayScores populated in one DB query contains more useful data
- Fix: JOIN should be a LEFT JOIN otherwise @IsGreenFeeCharged and other variables never get set.
- Fix: wa_TBCalculatePlayerGreenfee - slow when running for nonaffiliates.
- Mod: Performance improvement by pre-filtering a member's scorecards before running the chunky category queries.
- Add: Index for performance, and made some changes to wa_TBCalculatePlayerGreenfee to get around cardinality estimation problems.  These were causing tee booking performance issues at 7pm and 8pm (example trace http://vortex.golf.co.nz:3000/dashboard/db/test?refresh=30s&orgId=1&from=1563865134707&to=1563865412674)
- Fix: WHSAPI: Get changed scores only returned scores for a particular organisation when it should also include scores for that organisation's children.
- Mod: WHSAPI: We now serialise ALL DateTime values as UTC.
- Add: WHSAPI: IX_Score_ChangeDateUTC for sync performance.
- Fix: WHSAPI: Course copy/paste bug (this.DeletedDateUTC = source.CreateDateUTC)
- Mod: WHSAPI: For code reusability (even though I ended up not using this new method), split the PermissionEnforcer AppendChildOrganisations() call into the Organisation class.
- Mod: ClubCMS: rMyAccount: rephrased text
- Mod: ClubCMS: rMyAccount: make the radio button look like buttons (bootstrap); rephrased some text; improve script which hides/shows the payment methods
- Add: Index to speed up Score by WHSScoreUID lookups.
- Mod: WHS Course sync: Lock when inserting new NZCR data
- Mod: Live: Split WHS sync last change dates into separate Settings
- Fix: WHS Member sync assumption about only a single CMember record per club
- Fix: Pass CancellationToken.None for the new override sync methods.
- Mod: WHS Sync: Implemented cancellation tokens for scheduled task. Mod: Don't bother syncing markers older than a year if we are doing the first sync.
- Add: WHSAPI: MarkerHistory.CopyFrom() override that is not database dependent or async. Fix: WHSAPI: Organisation.CopyFrom handles orgs with null parents now. Fix: WHSAPI: Organisation.Type wasn't being populated. Mod: WHSAPI: Get Courses performance improvement by doing a split select and avoiding nested poco retrieval. Mod: Removed AllowSynchronousIO=false because Newtonsoft internally uses blocking IO when writing to response objects.  This is fixed in aspnet core 3.0 but we don't run on that yet. Mod: WHSAPI: MarkerHole.CopyFrom doesn't need a database connection.
- Mod: Member.RunUpdateStatement implemented to support WHS sync. Fix: WHS Sync: Course update was not filtering by the course ID. Fix: WHS Sync: NZCRData EndDate to 9999-12-31 if null. Fix: CMember resigned date needed a UTC->Local conversion. Mod: Defensively check the Organisation.Type in case something unexpected happens (like null) Mod: Sprinkled some Console.WriteLines around.
- Mod: WHS COURSE SYNC: Added failing test
- Fix: Live: POS: scorecardHub was sometimes firing a reprint and selectedPrintedScorecardIds being out of date #21038
- Fix: Vend: TamperMonkey: Fix for ticket #20917 - Cash drawer is not opening after choosing "Cash" payment type in Vend.
- Add: WHSAPI: PCC calculation FromUTC timestamp otherwise it'll try to do it since the dawn of time.  or Golf. Add: Some handy logging/console spam in RunPCC. Fix: FirstName and LastName fields were the wrong way around. Add: OrganisationMember.LocalMemberCode is now imported. Add: MarkerHistory.Name is now imported. Add: Some prod appsettings.json parameters. Add: StatsN to RunPCC. Mod: Changed Swashbuckle document title to DotGolf WHS API.
- Mod: WHS sync - Use cool implicit DateTimeOffset conversion
- Fix: WHS scheduled task: Could not convert from string to type DateTimeOffset.  Please implement in Setting.cs.
- Fix: WHSAPI: Error when updating a member which has more than one OrgMember record for a particular club.  Eg. a live record and a previously resigned one.
- Mod: 9 hole combined scores and back 9 score tests
- Mod: Removed EnableWHSIntegration Web.config setting; instead setting the SSM parameter to "DISABLED" until we're ready to go live.
- Mod: Bulk Email: NZG: updated the mailto link to golf.co.nz contact page URL
- Fix: Live: Functions: Booking.aspx - Quantity is always set to 1 when calculating the total amount per product item.
- Mod: 9 hole parent/child linking in WHS sync
- Mod: Bulk Email Common: added GetMemberSearchResult.datasource
- Mod: Bulk Email: Send: added new option: filter by member - individual
- Add: Bulk Email Common: missed in the other commit
- Mod: Bulk Email: BuilderService: added GetMemberSearchResult
- Mod: Bulk Email Common: updated Bulk Email Web Reference (GetMemberSearchResult was added)
- Mod: WHSAPI: Do not enable SwaggerGen and SwaggerUI in production.
- Mod: Bulk Email: added a GetMemberSearchResult WebMethod: to be used in the Bulk Email recipient filters
- Fix: WHS: Full.Score CopyFrom when ParentScoreId is null
- Fix: Org: Tournament Registrations: Fix ticket #20261 - failed to import players from a csv file. We were passing the Competition object instead of the competition id.
- Fix: WHSAPI score update test actually tests score updates Mod: Refactor score sync test markers
- Mod: WHSAPI: Removed EnteredDateUTC from database and API endpoints; we will use CreateDateUTC, there is little point in tracking two values.
- Mod: ClubCMS: Functions: Online registrations - minor mods to the confirmation email content. Displaying the full date and time instead of just the event date.
- Mod: ReverseProxy: sites: added: -,-,0,1,windross2.cw.golf.co.nz
- Mod: ClubCMS: bindings: added windross2.cw.golf.co.nz
- Fix: Live: Functions: Send invoice to Xero. Fix for ticket #20979 - User was able to click "Send Invoice to Xero" link while an ongoing request is in progress.
- Mod: Small ScoresSync test Refactor
- Mod: WHS sync tests: Removed null-related tests since they done really test behaviour Mod: WHS sync Create/Update scores
- Fix: WHSAPI: SSMParameterStore wasn't getting the Environment appsetting when declared in the JSON file (usually the case in dev mode) Fix: WHSAPI: Sporadic build error in Release mode about System.IO.FileSystem.Primitives, so I just installed the package explicitly. Fix: WHSAPI: A few fixes and performance improvements in the data importer utility. Add: WHSAPI: Set header X-DotGolf-Bulk-Import: true to stop the system calculating a handicap for each score (we'll do that in the recalc afterwards)
- Add: Live: Functions: Open the functions dashboard page only if online registration is ON and Settings.Functions.OpenDashboardPageAsDefault is set to true.
- Fix: ClubCMS: Functions: Confirmation e-mail is not sent out when online payment is disabled. Also made some changes on the content of the subject and content of the e-mail sent to the club and the person who registered for the event.
- Mod: WHSAPI: Replaced IX_Score_MemberId in favour of IX_Score_MemberId_Cover.  It's a tradeoff, but I think we're better off with a covering index. Mod: WHSAPI: Removed some old TODOs. Add: WHSAPI: X-DotGolf-Bulk-Import header to score importer.
- Add: WHS score sync + failing test Mod: Removed some custom exceptions in favour of rownotfound exceptions
- Fix: Live: ContactContactType: ClubContacts method: we've recently used this query to get all the system contacts as well, and some system contacts don't have an entry in the ContactPerson table, hence, we only should do a left join to the ContactPerson table
- Add: WHSAPI: whs-db-1 statds configuration.
- Mod: WHSAPI: Increased connection pool size to 1000.
- Mod: Cache Organisation table contents for 30s to improve performance (hot code path) Add: Index updated for Organisation. Mod: Removed unused UserExtensions method (it was broken anyway) Add: Documentation for import procedure.
- Fix: Live: Bulk Notification: PushNotifications.ascx - if ViewState["SlotDate"] is null, extract the date from the HTTP "Date" parameter.
- Add: WHSAPI: Environment.MachineName into stats metric names for http code counts.
- Mod: Live: Bulk Notification: Edit TimeSheet - load push notification messages (for the day) only if the club has the "PN" product. Mod: Live: Bulk Notification: PushNotificationService - Should use TBBlockTimeSlot.ClubId instead of TBTimeSlotEntry.ClubId.
- Add: WHSAPI: Environment.MachineName added to health endpoint.
- Fix: Live: Bulk Notification: Performance - Should filter by TBBlockTimeSlot.ClubId instead of TBTimeSlotEntry.ClubId. Also removed unnecessary joins to Passport table.
- Fix: Live: Kounta: Settings - Enable verbose logging to DebugLog checkbox is not ticked even though the setting has already been enabled.
- Fix: Live: Functions: Settings - Changed EnableKountAndXeroIntegration to DisableKountaAndXeroIntegration on FunctionsSettingsRec class.
- Mod: WHS: Add default to Marker name
- Fix: WHS: Test fixtures after adding marker name
- Mod: WHS: Courses test for updating existing course markers Add: WHS: MarkerHistory Name.
- Add: Live: Bulk Notification: Final tweaks. (1) Minor UI changes (e.g. Warning and error messages) (2) Ability for users to view who are the intended push notifications (course conditions) recipients (that has the DotGolf or NZG app).
- Mod: sql: CWEmailCompose: alter Subject column datatype to nvarchar
- Fix: WHSAPI: Permission checking bug fix(?)
- Mod: WHSAPI: Performance enhancement for getting all organisationIDs for an ISV. Add: README documentation about Delayed Durability.
- Fix: WHSAPI: Removed simultaneous queries from Create Score (now that we don't have MARS anymore)
- Mod: WHSAPI: Disabled MARS; this is causing some edge cases under very heavy loads.
- Fix: Live: Bulk Notification: Course conditions - Date passed to PushNotificationService.SendCourseNotifications() method was fixed to current day only.
- Mod: WHSAPI: Just return OK from /health as a test.
- Fix: Live: notify: 'always' on computed observables that subscribe to several other observables after KO 3.5 update
- Add: SQL: New table BulkNotificationRecipient - forgot to include from the previous commit. :(
- Add: Shared: PushNotificationService: Log push notification recipients to BulkNotificationRecipient table so we can link these to the PushNotification table for building a report.
- Mod: WHSAPI: Health check now simply checks for database connectivity rather than actually running a query (which skews metrics)
- Fix: WHSAPI: MemberLocker wasn't being called.
- Mod: ClubCMS: bindings: removed manawatu.david.internal.golf.co.nz; added manawatu2.cw.golf.co.nz
- Fix: Live: Instalment Preview KO 3.5 issue #20914
- Fix: Live: Levies: NZGALevyInvoice: ambiguous column error: added the table alias to the DeletedDate column reference. (Per checking the SVN logs, DeletedDate was added to the Association table recently.)
- Mod: WHSAPI: Reinstate member locking. Mod: Increased connection pool size to 500 for better concurrency. Mod: Speed up Member Locker by optimising delete statements. Mod: Disable synchronous IO in Kestrel (.net core 3.0 readiness given this is going to be the new default)
- Mod: WHS Course sync tests no longer throwing exceptions
- Fix: Live: Bulk Notification: Course conditions - add condition TBTimeSlotEntry.Deleted=0 so we don't send notifications to players who have cancelled their booking.
- Mod: golf.co.nz: The Open widget: adjusted the width and height
- Fix: Live: Direct Debit Export: include only dd instalments for "authorised" invoices
- Fix: Live: GenerateDirectDebit_Preview: include only dd instalments for "authorised" invoices
- Mod: golf.co.nz: updated the iframe code for The Open
- Mod: API: Bulk Email: GetTournaments, GetTournamentFilters, GetTournamentEmailRecipients: modified the sql queries to handle club competitions
- Add: WHS Course sync tests
- Mod: WHSAPI: Temporarily disable MemberLocker to see if this is the source of the performance issue.
- Mod: WHS org sync UPDATE tests, fixed bugs in ByWhsUid methods
- Mod: WHSAPI: Alternative way to handle member locking without having to do a table lock.
- Add: Decent WHS org sync test, fixed some bugs in sync
- Mod: WHSAPI: Increased MemberLocker lock retry delay in case this is causing performance issues.
- Mod: ReverseProxy: apply "https" to members.manawatugolfclub.com
- Mod: Shared: WHS org sync tests and mocking setup
- Fix: API: BulkEmail: GetMailingLists: add an alias to "DeletedDate" (I found that the Association table was recently altered to have the DeletedDate column)
- Mod: WHS: Revert accidental commit
- 
- Fix: WHSAPI: Added cleanup to MemberLocker so that we get rid of expired locks to avoid PK insert errors.
- Mod: WHSAPI: Removed EC2 using.
- Mod: WHSAPI: Removed EC2 using.
- Mod: WHSAPI: Removed EC2 using.
- Fix: WHSAPI: Cleanups.
- Mod: WHSAPI: Removed Amazon.EC2 since we're not using it; we're planning on deploying to ECS/Fargate. Other small refactoring.
- Mod: POS: Checkout "recovery" implemented for cash and AX account checkouts to hopefully fix #20835
- Fix: WHSAPI: Missing query hints on member lock table; this insert..select should take an exclusive lock to avoid getting trampled on by other queries.
- Fix: WHSAPI: Had the lock timeout comparison the wrong way round.  Sigh.
- Add: WHSAPI: Exclusive locking for member records so that we can push scores in a thread safe way. Add: Implemented the GET scores/{uid} endpoint.
- Mod: sql: insert a record into the ThirdParty table for GO Rentals; create stored procedure which sends an email notification about the winner
- Cleanup: WHSAPI: Unused code.
- Mod: WHS: Supress warnings in importer for ex variable not being used
- Mod: Live: Replaced KO 2.3 with 3.5
- Fix: Live: Club Facilities: Facility type photos - Provide default dimensions when constructing a public URLs.
- Add: ClubCMS: Functions: Online registrations - added debug logs.
- Mod: Live: Push Notifications: Updated info message.
- Mod/Fix: Live: Club Facility: Manage Facility Types
- Add: SQL: Club Facilities - schema updates to FacilityTypeFacility table and added new table FacilityTypeFacilityImage.
- Add: Live: Club Facilities: Manage club facilities
- Add: Live: Push Notifications: Updated business rules around (1) Max notifications sent in a day and (2) Allow clubs to send notifications in advance (default is 1 day).
- Mod: WHS: Updated XML doc for MarkerHistory MarkerHole
- Fix: Fix build again because csproj is stupid
- Mod: Fix build
- Mod: Live: Refactor WHS sync tasks into their own files. Mod: Shared: Deleted KO 2.3 from Shared and Pennants code
- Mod: WHS Marker hole sync implemented
- ** DFH CODE REVIEWED TO HERE ** Mod: WHSAPI: Small unit test update.
- Add: WHSAPI: GET scores endpoint for retrieving all scores for an organisation.  We're using this for score sync to NZ1. Fix: Update ChangeDateUTC whenever DeletedDateUTC is updated.
- Mod: Sync courses scheduled task implemented. Not pretty.
- Mod: Subs bulk import correctly parses values with commas
- Mod: Subs bulk import splits on tabs as well as spaces
- Fix: WHSAPI: DataImporter refactoring/testing.
- Mod: WHSAPI: asyncified SSMParameterStore. Performance enhancements in Score Import.
- Mod: ClubCMS: bindings: added maraenui.cw.golf.co.nz
- Mod: WHS: Add UIDs back to marker history, rename MarkerInfo back to MarkerHistory for now Mod: Update WHSClient with changes
- Mod: Updated WHSClient with latest changes
- Mod: WHS: Added hole data to course markers
- Fix: Shared build after WHSClient update
- Mod: Updated WHSClient with latest changes
- Mod: WHS: Swagger security check done per-endpoint with AuthOperationFilter Mod: WHS: Changes for RFC compliance (checked this using https://editor.swagger.io/) Mod: WHS: MarkerInfo Gender changed to enum
- Fix: #20636 Do not credit prizes to account for resigned members.
- Fix: WHS Sync - One failed sync now causes other syncs to abort, so all incoming items retried next sync with the same last-change date
- Fix: Build fail in WHS scheduled task
- Mod: Updated WHSClient with latest changes Mod: WHS: Test for getting markers at a point in time
- Mod: WHS: Courses sync tests Add: WHS: Can get course marker info (history) at a specific points in time Fix: WHS: Courses
- Mod: Org: TabTournaments: default view "Recently finished and upcoming tournaments": for the "recently finished" tournaments, include the ones from the past year only (we don't want to show the 2014 competitions)
- Mod: Org: TabTournaments: default view "Recently finished and upcoming tournaments": include upcoming tournaments happening in the next 12 months (used to be 6 months only)
- Fix: Live: POS: Fix ticket #20212 - When processing competition fee line items, compute the tax amount and the GST exclusive price only if the product has GST.
- Revert mods from rev no. 32997 - After discussing with David about the mod, we agreed that it is safer to apply the change to ProcessCompetitionFees() only - Comp fees are handled differently than any other products in Vend (e.g.: green fees, course fees and cart fees) - these products are always expected to have GST. Will do another commit just for ProcessCompetitionFees().
- Mod: golf.co.nz: added Hyundai and The Loop; re-arranged the logos (just put the commercial sponsors first); removed NZWS and Toro; updated the DotGolf website url
- Mod: golf.co.nz: sponsors: show the "dots" slick navigation, update the autoplaySpeed to 4000
- Add: golf.co.nz: Hyundai and The Loop logos
- Mod: golf.co.nz: updated a few sponsor logos (use a transparent background instead of white, make the size more uniform)
- Fix: UNF-DEC: Error in Members Resigned report.
- Mod: WHS: Org controller EnsureUserAccess check set to private until we delete it
- Add: WHSAPI: Managed code for importing Associations, Districts, Clubs, Regions, Countries, Handicap Config, Courses, Markers and Holes. This supersedes the SQL import script that I previously used; we can't use that because of the way the environment is structured (no connectivity between NZ1 and WHS1 except through the API).
- Add: WHS: Lots of XML comments Mod: WHS: Can pass a changed_since date to Get Courses
- Mod: Live: Contact: display the newly added ContactTypeDescription; rephrased some text
- Mod: Live: ContactType: ContactTypes: return the newly added ContactTypeDescription
- Mod: sql: ContactType table: add new column ContactTypeDescription
- Mod: Live: Contact: just rephrased some text
- Mod: Live: Contacts: text updates; updated the text of the contact hyperlink (combined the name and email address); display completion percentage for staff and non-staff
- Mod: Live: Contacts: updated the tool tip text
- Mod: Live: Contact: load the DotGolf-only contacts in the Contact dropdown if the user is from DotGolf
- Mod: Live: Contacts: make the name a hyperlink; display the contact type description in the system contacts tables
- Mod: Live: ContactContactType:
- Mod: Live: Contact: Delete: show the js confirm popup once only
- Mod: Live: ContactContactType: ClubContactsActive: update the DisplayName
- Fix: Manual adjustments were broken for gift cards due to rev 32597.
- Add: Create Member: First cut of the dedup view.
- Mod: Live: Club Contacts:
- Mod: Updating existing Members works via the WHS member sync. Minimal implementation i.e. cmember record changes are limited to resigned date (or creating cmember record if it doesnt exist)
- Fix: Live: ContactType: ContactTypes: exclude deleted contact types
- Mod: Live: ContactContactType: ClubContactsActive: just updated the DisplayName format
- Mod: ReverseProxy: added -,-,0,1,manawatu.cw.golf.co.nz
- Mod: WHS: GetMember returns Memberships now Mod: WHS: GetMember/s ChangeDateUTC = most recent changed date of the member records and the membership records
- Mod: Completed WHS SyncOrganisations implementation Mod: Update WHSClient with latest changes
- Add: WHS: GetCourses endpoint for syncing. NEEDS TESTS Mod: WHS: Replaced Select.Course with Full.Course Mod: WHS: Replaced Select.Organisation with Full.Organisation
- Cleanup: Category.Deleted no longer nullable, so don't have to do any isnull() checks.
- Mod: Create Member: Fire hooks when member is created.
- Fix: Should not try and put blue links on top of green message bars - go to underlined white for these.
- Mod: UNF-DEC: Improved deceased status in header.  Upgraded to ribbon-style header for TabMember.aspx.
- Fix: UNF-DEC: You could reinstate a deceased member because the reinstate link was still visible.
- Ignored some binaries.
- Fix: UNF-DEC: Search bug showed deceased members. Fix: UNF-DEC: When restoring a lapsed member that is deceased, the deceased flag should be cleared.  To be honest the UI should stop them doing this in the first place, but at least we won't end up with live deceased members...
- Fix: UNF-DEC: Missed out an IsDeceased=0 check.
- Add: sql Association table DeletedDate
- Fix: UNF-DEC: Missed a proc that was including deceased members.
- Fix: UNF-DEC: Deceased message showing when unfinancial. Mod: Removed unicode cross; can't be bothered making it work.
- Add: AddExternalClub method for creating clubs from WHS sync data
- Fix: Org: Create Club "Virtual" flag was not being set
- [MAJOR] Removed UNF and DEC categories in favour of {CMember,NonAffiliate}.{IsUnfinancial,IsDeceased} bit flags.
- Fix: #12899 The hole alias box for the 10th hole was incorrectly sized (too small). Increased the size to match the other holes, so now a hole alias like "10w" will fit.
- Mod: ClubCMS: bindings.list: added manawatu.cw.golf.co.nz
- Fix: Live: #20526: Member: GetOverdueAmount: corrected the computation of the paid amount so far (credit note payments were previously being doubled)
- Fix: Live: Functions: Run Sheet - Quantity not displayed for catering products that are charged per person. Manawatu GC requested to have the quantity displayed so the kitchen know how many people are to be catered at each service.
- Mod: WHS: spreading the async cancer to fix unit test
- Cleanup: Drop unused procedure wa_SelectCategoryForResignation.
- Fix: Live: POS: Fix ticket #20212 - Compute the tax amount and the GST exclusive price only if the product is assigned a GST rate.
- Mod: WHS: ExceptionHelperMiddleware logic fix
- Mod: WHS: Attempting to debug weird test error
- Fix: WHSAPI: Do not try and write exceptions to the response stream if it has already started; this causes unit test failures.
- Mod: WHS: undo SpecifyUtc. Why is my unit test failing, Jenkins, why?
- Mod: WHS: Score tests - Replaced DateTime.Now.Date.ToUniversalTime with DateTime.UtcNow
- Mod: WHS: Combined Sync models into the Full models Mod: WHS: Merged member sync endpoint with Get endpoint
- Add: When adding the CF product a new section appears where you can set the 9H and 18H fees.  This is then inserted into the database as part of the course fee setup.  Supersedes manual instructions at https://dotgolf.freshdesk.com/support/solutions/articles/6000190589
- Add: NUnit2 test adapter for VS2019 added to Shared
- Fix: Update csproj with rename
- Mod: Rename unit test
- Mod: golf.co.nz: rename "Olympics 2016" to "Olympic Games"
- Mod: golf.co.nz: added a new page, "OlympicGames"
- Add: AXAccountStatementReportDataSource: SystemCode is also needed. Wasn't included in the previous commit.
- Add: AXAccountSatementReportDataSource: Add ExternalSystemId column
- Mod: Live: Save club changes during WHS Organisation sync
- Add: Scheduled Task test project
- Mod: WHS: Sync.Organisation contains a Brief ParentOrganisation Mod: WHS: Membership contains a BriefOrganisation instead of OrgUid Mod: Live: Updated WHSClient and GetChangesFromWHS
- Mod: ReverseProxy: removed S,W,0,1,waihigolf.co.nz
- Mod: ClubCMS: Shared: Registration: removed the temporary DebugLog entries
- Mod: ClubCMS: ProcessDPSResponse: removed the temporary DebugLog entries; when registering guests, define the RegistrationSource to be RegistrationSource.CLUBCMS
- Fix: ClubCMS: Shared: WebUser: when a user is registered into a competition from ClubCMS, the User Security ID is 0. Handle this in the code. I also added the missing comma in the "insert into PassportCredential(PassportId, Username, Password, PasswordHash)"
- Mod: ClubCMS: bindings.list: added teebooking.shandongolf.co.nz
- Mod: ReverseProxy: added S,-,0,1,teebooking.shandongolf.co.nz
- Mod: WHS: Organisation table ChangeDate Mod: WHS: Organisation sync object Mod: Updated WHSClient
- Mod: WHS: Added WHSFriendlyId type extension to allow generic Brief/Full/Sync classes in Swagger Mod: Live: Updated WHSClient
- Mod: ClubCMS: ProcessDPSResponse: added DebugLog entries
- Live: Functions:
- Mod: WHS: Removed classes extending PagedResponse since Swashbuckle can handle the generic version Add: WHS: Organisation sync + really basic test
- Fix: Create Member: Don't allow clubs without NPM product to create non-playing members. Fix: Reset the form if the user wipes the content of the previous members search box. Add: Quicksearch: onSelectionCleared event that can be used via options.
- Fix: Cleaned up unused variable.
- Fix: WHS: Bug in the queuing mechanism where a member's handicap info would not get updated after they post a new score.
- Mod: Create Member: Replicate the same behaviour as the old Live member create screen, where we can only create social members, we can't transfer them.  The new code mostly supports transfers, but it's too early to be doing this... Fix: Crashbug on empty email address. Fix: Removed generated .js and .js.map files. Fix: Populate NonAffiliate.NZGACategoryId when transferring socials.
- Mod: Live: Generated new WHSClient and updated class names
- Fix: WHS: SVN crashes after moving Sync classes to their own namespace
- Fix: Org: Shop: fix recent commit (Revision ID 32509): escape single quotes in sql script 'color: red' to ''color: red''
- Mod: WHS: Moved Sync classes to their own namespace Mod: WHS: Swagger now adds Brief/Full/Sync prefixes to classes
- Add: WHSAPI: StatsN contracts and some stats sending from RecalculateScores. Add: Caching for markers, history, holes and handicap config in RecalculateScoresAfter(). Add: Queueing mechanism for recalculating handicap history.  We can run this in a background job (RecalcHistory) rather than inline with the REST call. Mod: Score.UPDATE trigger performance enhancement by checking for mods before firing the history insert. Add: New index on ScoreHistory. Add: Autofac dependency injection for unit tests. Mod: Immediately recalculate handicap history in unit tests for our asserts. Fix: All Brick tests pass now against Brick v0.4.
- Add: Dedicated assembly redirects to make Nunit-console play nice with Autofac.
- Mod: ClubCMS: UMyAccount.ascx: updated some of the html table markup to use bootstrap classes
- Fix: API tests with autofac binding redirect
- Fix: Warehousebuilder tests autofac binding redirect
- Fix: ClubCMS: #20523: My Account controls: handle admin users accessing the my account area
- Fix: Reverted removed DLL.
- Mod: API: Reinstalled packages and removed dead package DLL reference from csproj
- Add: WHS: Member.RecalculateFromAfterUTC column added.
- Add: WHS: LocalMemberCode column for OrganisationMember
- Mod: Refactor GetChangesFromWHS to be more unit testable
- FIX: More autofac binding redirects
- FIX: MISSING ASSEMBLY REDIRECT
- Fix: Schema script causing unit tests to fail some more
- Fix: Schema script causing unit tests to fail still
- Fix: Schema script caused unit tests to fail.
- Fix: AddClubMember: Bunch of nasty little ClubMember.AddClubMember() SQL bugs. Add: Autofac to test setup. Add: Unit tests for ClubMember.AddClubMember() - covering adding/transferring/reinstating affiliates (lapsed or live) and social members (reinstating lapsed or live).
- Mod: Live: GetChangesFromWHS throw some NotImplementedExceptions for NotImplemented things
- Mod: Live: AddClubMember now returns the new or existing MemberId AND the created or updated CMember or NonAffiliate uid
- Fix: AddClubMember: boolean logic error when finding already live records. Fix: AddClubMember: removed stray scope_identity() select. Fix: AddClubMember: Email address was not being saved.
- Fix: Category Round Management: Fix #20122 - Members under flexi-membership with a balance of 1.0rnd are charged with a green fee instead of taking a round off from their 18Hole Rounds account.
- Mod: WHS: Renamed OrganisationMembership to Membership
- Fix: Live: #11590: if the DotGolf Live user doesn't have the "Subscriptions" permission level, do not update the IsDirectDebit flag in the Cmember or NonAffiliate tables
- Add: Live: GetChangesFromWHS Member Insert logic. Still several gaps (todo), but we're close.
- Mod: Undo tabmembernew refactor
- Mod: Reverted Adding brackets to Club.cs GetAllProductCodes because it broke the WarehouseBuilder tests for some reason?
- Mod: Live: Bulk Email Statements: added SenderName and EmailReturnPath values
- Mod: ClubCMS: PGA: rename "PGA PDP.pdf" to "PGA Continuing Education.pdf"
- Add: WHS: HandicapDataManager refactored, added caching for large history recalculations. Mod: POST score (updating an existing score) will now compare the incoming data with the database and only do an update if something has actually changed.
- Mod: Added brackets to an 'if' and 'using' in Club.cs GetAllProductCodes
- Mod: Live: PGA: (missed in the other commit): replaced TabMember_PGAPDP with TabMember_PGAContinuingEducation
- Mod: Live: PGA: FindMembers: updated PdpCode
- Mod: SQL: Default of 1000 for DatabaseAssociationId in NZ* databases
- Mod: Live: PGA: rename "PDP Activities" to "PGA Continuing Education"
- Mod: Live: PGA: renamed "PDPActivities" to "ContinuingEducationActivities", and "TabMember_PGAPDP" to "TabMember_PGAContinuingEducation"
- Add: DatabaseAssociationId column to old Settings table
- Add: Live: Push Notifications: Course conditions - push notifications.
- Fix: MemberCreator: accidentally committed invalid variable
- Fix: Live: Feature flag hooks that  call WHS
- Mod: Live: Moved TabMemberNew member creation functions to Shared
- Mod: Updated WHSClient after NSwag update
- Fix: Live: #13263: when editing a tee booking in Live, and updating the details of the NonAffiliate record through wa_TBApplyBookingChanges sp, make sure we are updating the correct Non Affiliate record.
- Fix: WHS: Intermittent member merge test failure fixed with a Thread.Sleep
- Mod: WHS: Removed old Brick DLLs (VS got too smart and tried to use the v0.3 DLLs because they had the same assembly version)
- Add: Missing Autofac DI settings in Web.config.
- Add: Missing Autofac DI settings in Web.config.
- Add: Missing Autofac DI settings in Web.config.
- Fix: Property injection wasn't working in DotGolf Live because of some missing web.config modules.
- Fix: DI doesn't seem to work in Live - hotfix to sort out new member form.
- Fix: golf.co.nz: fixed the js issue with displaying the Google Maps infowindow on page load
- Mod: WHS member sync up to date with latest WHS code
- Mod: WHS: Corrected <cref> tags to <see cref="">
- Add: WHS: Member sync test - no merge stuff yet Fix: WHS: Member sync
- Mod: Live: Member Region is updated by WHS sync
- Fix: Oops, left some test code in here.
- Mod: WHS: removed unused variable in Sync
- Add: WHS: Member sync endpoint. Needs unit tests and doesn't handle merges yet
- Mod: WHS: OrgMember create date checks changes from < to <=. ** DFH CODE REVIEWED TO HERE **
- Mod: Use IMemberNumberManager to find new membership numbers in ClubCMS.  I had to add the DI code to the ClubCMS solution too.
- Fix: WHS: Check OrgMember created date when GET-ing members
- Add: New Create Member area for DotGolf Live.  Available at /Members/Create.aspx, but not linked in anywhere. MemberQuickSearch now allows searching for resigned members too (when asked)
- Mod: WHS: Updated member changed_since test to cover GetAllMembersForISV
- Fix: WHSAPI: Connection leak due to stats.TimingAsync taking an Action and not a Func<Task>.
- Mod: EnableWHSIntegration <appsettings> flag for Live and ScheduledTasks
- Mod: ReverseProxy: defined Shandon Golf Club URLs: -,-,0,1,shandon.cw.golf.co.nz S,-,0,1,members.shandongolf.co.nz
- Mod: ClubCMS: bindings.list: added shandon.cw.golf.co.nz
- Mod: ClubCMS: bindings.list: added members.shandongolf.co.nz
- Fix: WHS: Thought connection leak was caused by IDataConnectionBuilder being scoped, not a singleton.  Mean-while it was stats.TimingAsync - see rev 32879
- Mod: WHS: Small rename.
- Mod: WHS: Performance improvements around CreateOrUpdateScore. Mod: ScoreHistory trigger performs better when non-history-tracked fields are updated on Score. Fix: Score.ParentScoreId index didn't exclude NULLs. Add: Updated Brick to v0.4.  Still doesn't pass tests... Add: Telemetry to CreateOrUpdateScore.
- Mod: Shared: Registration: RegisterPlayer: added DebugLog entries to investigate Nomads registration issue
- Fix: ClubCMS: ProcessDPSResponse: defined the RegistrationSource as ClubCMS (Nomads registrations coming from the Nomads site used to be marked as coming from Live)
- Mod: Shared: Registration: RegisterPlayer: added DebugLog entries to investigate the Nomads registration issue
- Mod: WHSAPI: Performance improvement on Score update (only update AdjustedGrossScore if it has changed) - history penalty if we update it with no change.
- Mod: ScheduledTasks: GetChangesFromWHS only fires in DEBUG builds
- Mod: WHS: Member Brief UID no longer nullable in our code
- Mod: Live: Getting a member ByWhsMemberUid doesnt go via a constructor to avoid exception throws
- Mod: ScheduledTasks: Last changed date handling for GetChangesFromWHS
- Add: ScheduledTasks: Sync all members from WHS to Live every 2 seconds. Doesn't handle changed_since yet. Disabled for code review
- Fix: Live: TabMember RebindAccountTab no longer assumes the member will have a house account if there are > 0 accounts
- Fix: Build
- Mod: WHS Client updated from nswagstudio
- Mod: Scheduled tasks Run method is async now, no more AsyncHelper
- Add: ClubCMS: sitemap-174.xml for Gulf Harbour
- Mod: Scorecards: Net scores show for Net Foursomes and Net Ambrose, same for Par scores and Par Foursomes
- Mod: Tournaments: KO 3.5 update for SourceTimesheet, PrePrint and Registration
- Merged revision(s) 32562-32727 from Branches/Trunk.2019-05-28.whs-api-integration: Mod: Temporarily commented out some code that we think might be causing a performance issue in Prod. ........ Mod: (To Test) Refactored FeeSelectorControlService.LoadComplementaryReasonLabelsForMemberAndTime() for performance.
- Mod: Live: Delete app.config in Tests
- Mod: WHS: GetAllMembersForISV works now, Tests pass
- Fix: WHS: ShouldReturnFullDetailsForISVOrganisationMembers now fails for the correct reason
- Mod: WHS: Updated a get member test to handle two different endpoints. Failing tests are because GetAllMembersForISV is not correct
- Mod: golf.co.nz: Global.asax.cs: set up "/clubresources" to redirect to "/About/ClubManual.aspx"
- Add: WHS: GetMembers implemented. Useful for syncing
- Fix: WHS: Merge member code after last commmit - wasnt fetching member correctly Add: WHS: GetMembers endpoint that will share code with GetMembersOfOrganisation. Currently returns 404.
- Mod: golf.co.nz: cute editor: added a "button" css class
- Fix: WHS: Merge member unit tests after removing omember UID
- Mod: WHS: Remove OrganisationMember UID from sql and member merge
- Mod: WHS: Run merge member tasks sequentially
- Mod: WHS: Recalculate handicap history for the destination member when two members are merged together. Mod: WHS: Yanked some score calculation code out of ScoreController and put it into DatabaseHandicappingDataProvider to enable ^.  ScoreController started becoming a bit of a mess; it seems logical to put business logic in the Core project instead of the Controllers.  Perhaps later we can call the core logic directly from the initial data importer (for more speed).
- Mod: API: Search green fee clubs end point.
- Mod: Mailer: Added a stat for total no-reply@golf.co.nz inbox messages so we can set a vortex alert on it. Mod: Delete unhandled messages older than 7 days so they don't use space. Mod: New App.config for development.
- Add: Mailer: A few more common bounce message subject tags.
- Add: StatsD config for Mailer.
- Mod: Mailer: Upgraded to OpenPOP.Net because our previous POP library no longer works with Webdrive. - Bonus: SSL enabled for POP now. Add: Mailer: Telemetry added so we can set Vortex alerts if things go wrong again.
- Mod: WHS: Moved member dedup checking code into Member.cs (IsProbablyTheSamePersonAs) Fix: Tests were breaking because of missing StatsN in the unit tests project. Add: New unit tests to check IsProbablyTheSamePersonAs.
- Add: WHS: Default host and IP for telemetry.  Probably going to remove this later.
- Add: WHS: Basic telemetry via StatsN and Vortex.
- Add: WHS: A couple of unit tests to check permissions are restricting access to organisations not under our control.
- Fix: WHS: I didn't like how @OrganisationIDs was passed into the permission checking queries. This array got rather long for the DotGolf user (because we have access to the org, districts and all clubs underneath).
- Fix: WHS: Whoops, didn't actually return all the permission rows we should have.
- Mod: WHS: Refactored and cleaned up permissions checking. We now have a centralised place where permissions are checked rather than having this implemented in the POCOs.
- Add: WHS: Test for invalid merge member params
- Add: WHS: MergeMember endpoint testing for a really obvious duplicates and merging them
- Add: WHS: UID for OrgMember table. We'll give this to ISVs instead of the MemberUID
- Fix: WHS: Sorted out all the missing XML documentation and other compiler warnings - we're back to 0 now.
- Add: Scheduled task to cleanup network scan table (ClubCardPrinterNetworkScan) at 2:45am).
- Fix: Another AsyncPoco reference.
- Argh, I commit ONE line without compiling...
- Mod: WHS: Removed AsyncPoco in favour of PetaPoco now that the latter supports async/await. It looks like AsyncPoco is dead now, so this is a good time to get rid of it.
- Mod: WHS: Updated MergeMember comment
- Add: WHS: Merge members endpoint and failing unit test
- Fix: WHS: Index create syntax error.
- Mod: WHSAPI: Better performance around adjustments (ESR) by avoiding joins to Score.
- Fix: WHS: Member EnsureUserHasAccess checks deleted date of orgmember record Fix: WHS: Scores permission check
- Mod: Check course permission instead of member permission when posting score updates
- Mod: WHSAPI: ESR penalties were being applied in the wrong place; I took "end of process" literally.  Now we apply any adjustments to the HDPostPCC value.
- Add: WHSAPI: More tests to validate our results against the Brick.  This time I got lazy and built the tests straight into our existing unit tests; when the brick expires we'll need to nuke them out again.
- Fix: WHSAPI: Meant to double the column lengths also.
- Add: WHS: HomeMember flag when creating members Add: WHS: Test bad data throws errors when creating members
- Add: WHSAPI: Tests for permissions around entering home/away member/visitor scores.  Currently one of them is failing; we need to fix this bug.
- WHSAPI: Member names can be unicode. Ignored bin/ and obj in RunPCC.
- Add: WHSAPI: RunPCC console app to run outstanding PCC calculations. Mod: Refactored startup code to put service registration in the Core library (so we can call these from console apps and unit tests)
- Fix: WHS: Made resign member test more stable by ignoring time component.
- Fix: WHS: Made resign member test more stable by ignoring time component.
- Fix: WHS: Round ResignedDateUTC in unit test to nearest minute to prevent the rounding of seconds causing test failures
- Fix: WHSAPI: Improved ScoreHistory trigger From..To date calculation for accuracy.
- Mod: WHSAPI: Importer now shows number of scores imported on a regular basis.
- Add: WHSAPI: ScoreHistory table and trigger to populate.
- Fix: Adweb: Member MyGolf link in production adweb works again
- Fix: WHS: Fixed build for Ensuring User has access to course when updating a course
- Mod: WHS: Ensure User has access to member when updating their scores Mod: WHS: Ensure User has access to course when updating a course
- Add: EnsureUserHasAccess for Course poco. Removed comment.
- Mod: WHSAPI: Performance improvements, avoiding use of dynamic IN(...) from Dapper; this causes query recompiles which hits the database server CPU pretty hard.  STRING_SPLIT, where have you been all my life?? Mod: Refactored to do separate delete/insupd queries when saving an ESR adjustment.
- Mod: Adweb: EditNonAffiliate.aspx: display CreateDate and RegistrationSource as well
- Fix: WHSAPI: It's valid not to have a HandicappingConfig instance (e.g. an association which does not do handicapping for its members, or scores entered prior to the date the handicapping system commenced).  Previously we were getting ORNS errors. Mod: Refactored/cleaned up a few minor things. Mod: Indexes tweaked for performance.
- Fix: Jenkins error
- Fix: API: Unattended Green Fees - removed date filter when retrieving green fee payment details.
- Fix: API: Unattended Green Fee Payments: Fix SQL DateTime overflow exception.
- Mod: Bulk Email: email details: recipients: show "Database" and "SQL Query" options to "NZ Golf" user only (it used to show to any user from Association ID 1000 or 1026, and the NZ Golf user)
- Mod: API: Unattended Green Fee Payments: POST /list-greenfee-payments will now return payments made on the day. If we need to get past payments, we should call the GET /greenfee-payments endpoint.
- Fix: WHSAPI: Better way of testing for unauthorised response on broken JWT, this way the exception doesn't cause a debugger break if we're debugging while running the tests.
- Mod: Live: Functions: RunSheet - Display Extras/Equipment notes on the Run Sheet.
- Fix: Functions: Booking.css - removed extra %.
- Add: Functions: Customer Sync - Apply ellipsis on the customer name when syncing a functions customer to Kounta. Kounta does not like first names with more than 45 characters.
- Mod: Functions: Booking.aspx - changed sync button to hyperlink.
- Mod: Love Golf Play: voucher file name: update from "LoveGolf_GetOnTheGreen_" to "LoveGolfPlay_"
- Mod: Love Golf Play: update the first sentence of the "no deals found" message from "Deals are available the first Thursday – Sunday of every month." to "Sorry, there are no deals for this region at the moment, but please do check out the other regions."
- Mod: Love Golf Play: remove FAQs mentioning green fee deals are only available from Thursday - Sunday (because it's not true anymore)
- Mod: Bulk Email: From / sender: show PGA of New Zealand for the PGA (Club Id 907)
- Add: Live: Functions: Add ability for user to send a customer to Xero after a booking is confirmed.
- Fix: Bulk Email: saving email details for user nzgolf: assign CWEmailCompose.ClubId only if AssociationId is null. CWEmailCompose has an existing constraint which only allows either ClubId or AssociationId to be saved.
- Fix: Live: TabMembers: Fix #20113 - caused by a non-affiliate records having two different passports (i.e. one is active and the other is deleted).
- Fix: Committed a blank file... genius
- Mod: Lenovo touch screen hotfix is now enabled for everyone by default.
- Fix: Multicurrency'd remaining active reports (except in the Org folder)
- Fix: Multicurrency'd reports: AgedSubs,CompetitionEntryFee,CompetitionRegistrationFee,IndividualSubsByCategory,MemberSubItems
- Fix: Live: Multicurrency'd UNALLOCATED CREDIT NOTES
- Fix: Live: Multicurrency'd Member Account Activity subquery (not in Prod)
- Fix: Live: Multicurrency'd Paid By Item and Member Balance reports (Subs)
- Fix: Live: Multicurrency'd Payments Received reports
- Fix: Live: Multicurrency'd Unbilled Members Report
- Mod: API: Unattended GreenFee Payments: Refined the results from /list-greenfees endpoint - return applicable fees for that date only.
- Add: IX_ClubCardPrinterNetworkScan_ClubId_CreateDate to speed up Adweb network diagnostics page.
- Mod: API: Unattended Green Fee payments - Mods to allow user to retrieve past green fee payments. Previously, we are only returning payments made on the current day.
- WHSAPI: Split up some of the score unit tests to make logical groups.
- WHSAPI: Skip some Brick tests that currently break because of a known bug.
- WHSAPI: Fix: ShouldComputeESRDependingOnPCC test corrected now that the PCC calculation is fixed.
- WHSAPI: PCC: Corrected some calculation bugs. - Fix: We should be calculating p(n) where delta is LESS THAN n. - Fix: if p0 is less than L- and there are no cases where p(n) < L-, then PCC=0. - Fix: if p0 is more than L+ and there are no cases where p(n) > L+, then PCC=0. - Fix: The Min/Max aggregations were the wrong way round for p0 <> L-+. Add: Tests to target the Brick v0.2.  This will expire somewhere in August 2019, at which point we'll have to remove it again.
- WHSAPI: Added more comments to PlayingConditionsAdjustmentCalculator.
- Mod: Scheduled Tasks: #19825: after auto resigning a member or nonaffiliate, set the AutoResignAtEndOfSubscription value to 0.
- Mod: Live: Shared.Subscriptions.cs: SendEmailSubsStatement: use "no-reply@golf.co.nz" as EmailAddressFrom; added EmailReturnPath = club's Accounts email
- Mod: Live: ExportReceiptToXero.aspx: rephrased the textbox placeholder text
- Mod: Live: Shared: SendEmail: added EmailReturnPath
- Mod: Live: Shared.Subscriptions.cs: SendEmailSubsInvoice
- Add: Just for fun, add a Vortex exception graph to the Adweb View Exceptions page.
- Mod: Live: BulkInvoiceGenerateProcess: use the shared code SendEmailSubsInvoice to send the invoice
- WHSAPI: Fix: PCC local date to UTC conversions were flawed, I think.  This only fails when Jenkins runs it in UTC... WHSAPI: Log diagnostics data from the PCC routine in test output.
- WHSAPI: Mod: lock() {} should be fine for this; get rid of my mutexes.
- WHSAPI: Cleaned up and refactored a few things around the PCC calculation, including a better distinct on local play dates (previously we included times, which would have been pointless) Add: Unit test to ensure that we don't accidentally calculate PCC values for partial local days.
- WHSAPI: Add: Output to PCC tests to try and debug the failures.
- WHSAPI: Removed retry code since we have the mutex now. Mod: Changed some UTC stuff around as I suspect the unit tests are having timezone problems.
- WHSAPI: Use a mutex to sync database builds so we don't get one backing up at the same time as another thread restoring.
- WHSAPI: Mod: Automatically retry restoring the pristine database backups if it fails due to file access issues.
- WHSAPI: Added a few missing XML docs.
- WHSAPI: Mod: Reinstated database backup-restore method of creating new pristine databases; turns out SQLPACKAGE.EXE was the reason the tests were on the go-slow. Mod: Lazy database construction; only create a database if we use it in the test.
- Mod: ClubCMS: Member Signup Confirmation: do a mini rollover when a former casual golfer signs up as a club member (this is done after a successful payment, and after the creation of the member record)
- Mod: JObject GetValue calls should use StringComparison.InvariantCultureIgnoreCase
- Mod: Swapped order of [FromBody] and [UnderlyingType(typeof())] attributes so NSwag generates the types correctly
- Add: Create Member endpoint Add: happy patch Create Member tests Fix: EnsureUserHasAccess is OrganisationsController works now Mod: Resigning members is a single action instead of posted DateTime Mod: New pattern for specifying columns for UpdateAsync (using the POCOs)
- WHSAPI: Add: Another unit test to check idempotency of CreateScore code.
- WHSAPI: Add: Unit test to confirm that UpdateScore is idempotent.
- WHSAPI: Mod: PCC is now properly calculated for 9H combined scores. Mod: Reinstated the 9H handicapping status/value tests in both combined and scaling mode.  Of these, we skip the 9H Scaling tests due to the outstanding R&A question per https://github.com/dotgolf/world-handicap-system/issues/14. Fix: ShouldAllowAwayScoreDownload() was inserting a duplicate OrganisationMember row, attracting the wrath of our new unique constraint.
- Fix: Removed EzPoco.g.cs - it is a generated file.
- WHSAPI: Add unique index to enforce a single live OrganisationMember record per member at each org. Fix: Removed EzPoco.g.cs - it is a generated file.
- Add: Jenkinsfile for DotGolf Live in Trunk.
- Mod: Swapped order of [FromBody] and [UnderlyingType(typeof())] attributes so NSwag generates the types correctly
- Mod: ClubCMS: Member Signup Confirmation: when matching the member to an existing record, match both previous membership number and last name; rephrased the receipt email subject
- Mod: ClubCMS: Member Signup Confirmation v2: when matching the member to an existing record, match both previous membership number and last name
- Mod: ClubMember: ClubCMS: added new method which returns the MemberOrNonAffiliateId based on the previous membership number and last name
- Mod: Upgraded to RedisSessionStateProvider 3.0.2 and enabled asynchronous session state for DotGolf Live.
- Add: Update members endpoint to resign members. Add: Member Search test for ignoring resigned Members. Add: Organisations test for resigning members.
- Mod: Removed some unused accessToken variables in Tests
- Mod: Removed lock(Session) for fear that this is causing our Write_Locks on Sessions in Redis.
- Mod: Love Golf Play email templates: updated the logo to Love Golf Play and updated the copyright year to 2019
- Mod: Love Golf Play: test email: updated the email subject from "Testing: Amazing Golf Deals - Get on the Green" to "Testing: Special Golf Offers - Love Golf Play"
- Mod: Love Golf Play: email subject: rephrase from "LoveGolf Get on the Green Voucher" to "Love Golf Play Voucher"
- Fix: WHSAPI Unit Tests :(
- Mod: Live: Functions: Set order status to "PENDING" instead of "COMPLETE" when posting a sale to Kounta. Had to do this because Kounta is having race-condition problems when an order is sent to the API in "complete" status. Please refer to https://support.kounta.com/hc/en-us/requests/437764  for details. Add: Live: Functions: Added DebugLog to print the Kounta Order ID after posting a sale to Kounta.
- Mod: Remove ResignedDate from Member table as discussed
- WHSAPI Mod: Async Main() for importer.
- Fix: Live: Renewals: Email Invoice: SubsInvoiceEmailBody: removed Shared.FromHttpContext.Club references as it's throwing an error
- Mod: Renewals: Invoice Due Date: tidy up the previous commit
- Mod: Live: ProcessRenewals_Apply.cs: GenerateInstalments_Internal: correct the previous commit; handle "biannually" calc method the same way we handle the other system schedules (i.e. monthly, quarterly, etc.)
- Mod: Live: Tests: Rename DotGolfLive.Tests app.config to see if it's needed
- Mod: Renewals: Invoice Due Date: use the Due Date entered in the first step
- Mod: Live: Renewals: Shared.Subscriptions.cs: ComputePaymentScheduleInfoForInstalments: handle new "biannually" schedule
- Mod: Committing reordered fields in Settings/Kounta/Settings.aspx.designer.cs
- Mod: Live: ProcessRenewals_Apply.cs: GenerateInstalments_Internal: handle "biannually" calc method the same way as "fixed instalments"
- Mod: Set createnowindow = true on DB creation process info to see what happens
- Fix: KountaLocal actually sets the PAYMENTTYPECODE correctly on first load. Sorry, too late :(
- Fix: Remove POS and !VEND restriction from changing Kounta payment type mappings in Settings
- Mod: Quick hack to make this work on C#7.0.
- Mod: Quick hack to make this work on C#7.0.
- Fix: Kounta: CashOut Automation: Mod to fix ticket #19918 - CashOut automation is failing when trying to find the Cash payment method from Payment Method External table.
- Fix: Setting should write DateTime in ISO-8601.
- Mod: Finally silenced DB creation console output??
- Mod: More aggressive logging for Tabreports extquery load failures
- Fix: Internal Vend payment methods showing in Vend settings for mapping
- Fix: Deleted payment methods showing in Vend settings
- Mod: Restored IndexCreatedBy to its former glory, apparently if you touch this index Bad Stuff Happens.
- Add: Index reinstated.
- Fix: wa_TBReserveTimeSlot was updating way more TBTimeSlot rows than it had to.
- Add: Index for performance.
- Mod: Set RedirectStandardOutput = false since true was causing test failures
- Mod: THIS TIME made sqlpackage.exe quiet in the Jenkins console
- Fix: Accidental stray bracket in vend settings
- Fix: Disabled Vend payment types no longer show in Vend settings Click 'Sync Payment Types from Vend' to apply the change. Bug: Clicking 'Sync Payment Types from Vend' will reset the payment type map
- Mod: THIS TIME made sqlpackage.exe quiet in the console when deploying dacpacs
- Mod: made sqlpackage.exe quiet in the console when deploying dacpacs
- Fix: Disabled Vend payment types no longer show in Vend settings Click 'Sync Payment Types from Vend' to apply the change. Bug: Clicking 'Sync Payment Types from Vend' will reset the payment type map
- Mod: Sort Vend and Kounta payment types by name in Settings
- Mod: Updated LiveDraw.ts reference paths
- Mod: ClubCMS: bindings.list: added pakuranga2.cw.golf.co.nz and templeton2.cw.golf.co.nz
- Mod: Reverse Proxy: added pakuranga2.cw.golf.co.nz and templeton2.cw.golf.co.nz
- Fix: Removed accidental [Required] from InsertUpdate.Course Name Add: Empty Organisations test class Add: ModelState validation for update Organisation
- Mod: Uncommented Courses test Mod: figured out how we can do modelstate checks with JObject body (CoursesController/UpdateCourse) Add: Partial course Updates
- Mod: Bulk Email: PGA: add sender "PGA of New Zealand (no-reply@golf.co.nz)"
- Mod: Bulk Email: replaced ConfigurationManager.AppSettings["DotGolfSsoUrl"] with AppUrlResolver.Resolve(DotGolfApplication.SSO)
- Fix: Bulk Email: CreateNewMailingList: pass along the user's Club ID (this used to be set to null)
- Fix: WHSAPI: When entering scores the handicapping rules applying to the member's home club should always be used, even if the score is being entered in another jurisdiction.
- Fix: Passport.cs: mod based on Marcus's reco when we were looking at the ClubCMS admin login issue; we're reverting a little bit of Revision 32193; we're using api_GetActivePassportForCredentials again.
- Fix: <%#Eval(Request["CompetitionId"])%> in Show Player Draw url
- Fix: Passport: GetPassportCredentialIdForCredentials: the first query was returning multiple passport credentials; use top 1 to fix the error for now.
- Mod: Model is now validated when Posting an Organisation Update
- Mod: Renamed EzPoco.cs to EzPoco.g.cs
- Add: Tournaments: Player draw search. (visible to NZ Golf)
- Fix: Web.config.Production updated for Newtonsoft 9.0.1.
- Mod: .action_link bullet arrows are now centre aligned
- Mod: Live: Hide Player Draw search from Competition dashboard
- Re-applied this revert to go back to Newtonsoft.Json 9.0.1.  I'll fix the Web.config in DEV1 momentarily.
- Mod: Reports: Subs StatementReport now respects the default currency
- Fix: Live: Teebooking: Fee per cart dropdown uses the correct default currency
- Fix: Live: Comp setup and group booking fixed Green Fee respect the default axcurrency
- Add: Live: Functions Calendar: Show icon for functions that have had invoices sent to Xero
- Mod: Live: Player draw search in works in Live now.
- Fix: Adweb: Account Activity ExtQuery report definition now loads
- Mod: Live: TabMember sub items updated for multi currency
- Mod: Live: TabMember Accounts and Loyalty updated for multi currency
- Mod: API: Updated API for my currency format change Mod: Added summary docs to currency formatting code
- Mod: Live: Xero Status and Subs Payment widgets are now multi currency
- Mod: Live and Bulk Email: reverted previous change (we've instead added the "org" query string parameter in Org to make this approach the same as the approach currently used by Analytics)
- Mod: Org and Bulk Email: use the "org" query string parameter to determine if the user is coming from org or live (the same approach is already being used by Analytics)
- Mod: Bulk Email: use the "org" query string parameter to determine if the user is coming from org or live (the same approach is already being used by Analytics)
- Add: Formatting options in AXCurrency to make multi currency negative numbers easier to handle. [Breaking]: To format numbers in accounting-style with negatives in brackets, AXCurrency FormatAmount requires an explicit parameter. (I will default the FormatAmount parameter to Human once I've updated all accounting references to the correct format)
- ** DFH CODE REVIEWED TO HERE ** Fix: Live: add query string parameter src and use this in Bulk Email to determine if the user is a club user or coming from Live
- Fix: BulkEmail: use the src parameter to check whether the user is a club user or coming from Live
- Fix: Bulk Email: use "user-club" css class for the PGA
- Mod: BulkEmail URL now comes from SSM if there is no Web.config override.
- Mod: ClubCMS: bindings.list: removed cobrapuma.golf.co.nz
- Mod: Reverse Proxy: removed cobrapuma.golf.co.nz
- Fix: Restored tab order in invoices and moved Email this invoice to the correct tab
- Add: Org: Search for players in a tournament to view their draws (including links to their scores)
- Mod: Live: web.config: defined BulkEmailUrl in the app settings
- Fix: Manual Adjustments: Cancel button didn't return the user to the initial state properly.
- Fix: Credit Transfers: You can get two explanation boxes showing if you select a Xero account, then change the adjustment type to Transfer.
- Add: Ability to transfer account credit between members in a one-step process, without involving Xero.
- Mod/Fix: sql: wa_TwoUnderClub_MemberEmail: modified the email templates used, as requested by Vern (Ticket #19099). Also fixed the Club Id bug in the script: we were using Club ID 902 (Nomads) instead of Club ID 903 (Two Under Club) to determine if the golfer is a member of Two Under Club or not
- Add: Sad attempt at justifying/documenting the ugly hack I just committed.
- Fix: Dirty hack to make Lenovo touchscreens respond better. We'll turn this on only if we know a club is having problems; it's not regression tested against our new terminals so it's dangerous to deploy everywhere.
- Fix: ScheduledTasks: SyncFunctionCustomersTask: Fix #19681. Ensure that we don't create a duplicate mapping in PassportClubExternal table for a Kounta customer in DotGolf.
- Fix: Bulk Email: menu style: fixed the previous commit; fixed the menu style for club users
- Mod: Shared: Business Logic: Utils: GetMenuItems (menu items to be displayed on Bulk Email): for clubs, just display Home on the menu to get back to DotGolf Live
- Mod: Shared: Bulk Email: updated the data cache key to handle clubs
- Fix: Bulk Email: menu style (apply the menu fix for club users only)
- Fix: Bulk Email: left align the menu (it used to be centred when there's just a few items)
- Mod: Deleted knockout-2.1.0 from the shared js
- Mod: Public: update ko 2.1 to 2.3
- Mod: Org: Update knockout 2.1 to 2.3
- Mod: Adweb: changed knockout-2.1.0 to knockout-2.3.0
- Mod: Live: Removed unused isAffiliate line and dead comment from LoadComplementaryReasonLabelsForMemberAndTime
- Mod: Live: Adding knockout 3.5 to the csproj
- Mod: Live: ScorecardAdmin: removed databinding on mouseover code. Checking it works in KO 2.1 and KO 3.5
- Add: Direct Costs for Liability Earned expense account type.
- Mod: Style change; '<!--ko' to '<!-- ko' in CardPrintingViews.htm
- Mod: Reverse Proxy: apply https to golfwaikato.co.nz
- Fix: Quick search: Removed orphan <!-- /ko --> tags
- Fix: Live: Functions: Removed orphan <!-- /ko --> tag from Run sheet.html
- Mod: Improved logging around cashout automation to try and troubleshoot Riverside's reconciliation.
- Mod: Shared: Removed knockout-3.4.2
- Fix: ClubCMS: My Account: the PGA transaction fee wasn't displaying (back-end was all good; member's still paying the 4.95 fee)
- Mod: (To Test) Refactored FeeSelectorControlService.LoadComplementaryReasonLabelsForMemberAndTime() for performance.
- Mod: Temporarily commented out some code that we think might be causing a performance issue in Prod.
- Mod: Reference VS2019 in Data.sqlproj and DatabaseFixture Mod: Replace hardcoded dacpac file path with a directory search to find the solution root
- Mod: Added controlsDescendantBindings: true to Countryselect, courseselect, markerSelect, playerDetailsControl, feeSelectorControl, competitionSelectControl, feeSummaryControl, compositeMarkerSelectorControl since they call applyBindings on themselves and clash with the parent binding in KO 3.5.
- Fix: Reverted KO mapping update because of https://github.com/SteveSanderson/knockout.mapping/commit/5fdfceca5d87f116776003be4e71c5a099a57f3b "Added functionality so that explicit declared none observable members on a ViewModel will remain none observable after mapping" breaking a our mapping in Competition_NG.js and presumably more places
- Mod: Live: Upgrade from Knockout 3.4.2 to Knockout 3.5
- Fix: Live: Functions: Removed orphan <!-- /ko --> tag from Run sheet
- Fix: Live: Functions: Removed orphan <!-- /ko --> tag from Quote page
- Fix: Live: Functions: resolved KO binding errors thrown by KO 3.5 parser
- Fix: Live: Functions: Quick search - removed unnecessary joins to BKFunctionBookingVenue and FNVenue tables.
- Fix: Teebooking error around complementary reason not being set #19536
- Fix: POS: Removed extra ko closing tag
- Fix: Force Marker Id bug due to incomplete ko binding in PrePrint.aspx
- Cleanup: Removed redirect to /TabMaintenance.aspx when sql user is disabled - we don't do this anymore.
- Fix: #19490 When a user is deleted, immediately stop them from being able to access any pages in DotGolf Live.
- Mod: Org: Shared: Result.GetResults.cs: AdditionalColumns.IsGstAndIsDeductRwt: correct the previous commit: prioritise the PGA cmember record as these columns will be used by the PGA
- Mod: Live: Functions: Calendar.ascx - Change maximum number of events to show per date cell to 4 (only for Functions).
- Mod: Org: PGA: Prizes: when saving or updating the prize money splits, include saving of IsGst and IsDeductRwt so we know if we'll apply the tax for the particular record in the report
- Mod: Org: Shared: Result.GetResults.cs: define AdditionalColumns.IsGstAndIsDeductRwt, which includes the IsGst and IsDeductRwt columns to the result. This will be used by the PGA when saving the prize money splits.
- Mod: Improved the display of TabMember subs/account balances.  This removes the parentheses (to stop negative amounts being ambiguous) and adds colour coding to make it simple to see the current account balance without confusing it with the subs balance.
- Mod: ClubCMS: rMyAccountPaymentConfirmation: if the transaction is unsuccessful, display the response text (so that the member will have a bit of an idea what happened). If it's a "do not honour" response, display an instruction to contact their bank or use a different card.
- Mod: Extended Functions search window to 2 years past and future.
- Fix: Another @ClubItemId reference in VendMemberInsertedUpdated.cs.
- Fix: Changed the datatype for ClubItemIds to int[] rather than string[]; better to persist it that way in the database.
- Fix: Typescript bugs from not accessing observables in Functions and Giftcards
- Fix: Live: Functions: Quick search booking.
- Mod: Org: PGA: PgaTaxStatement: we now have a GST component in RSResultPrizeMoney because a member's GST situation may change and we can't just rely on their current GSTNum value as we generate the report. Also added IsDeductRwt while we're at it.
- Mod: Live: Functions: Quick search function booking - sorting by date descending in code (using LINQ).
- Fix: SQL in Vendcustomergroup scheduled task was wrong again
- Mod: Live: Functions: Quick search function booking - order results by date descending (BKFunctionBooking.StartDateTime).
- Fix: SQL in Vendcustomergroup scheduled task was wrong
- Mod: ClubCMS: PGA: Earning: we now have a GST component in RSResultPrizeMoney because a member's GST situation may change and we can't just rely on their current GSTNum value as we generate the Earning report. Also added IsDeductRwt while we're at it.
- Mod: Moved around Functions header items a little so that we don't shift the calendar control down as much. Mod: Quick search will now keep its popup div inside the client area if the search box is located at the right edge.
- Mod: Removed knockout.mapping-2.4.0.min.js (we already have knockout.mapping-latest.js). Do your worst Jenkins.
- Mod: Updated knockout.d.ts for ko version 3.4
- Mod: Updated knockout.mapping-latest.js
- Mod: sql: PGA-related
- Add: Live: Functions: Ability for users to search function bookings from the calendar.
- Mod: Live: Password hash task logging and more warnings about changing the salt etc
- Fix: ClubCMS: PGA: RegistrationConfirmation: we shouldn't use TxnData3 (it's used for the Amount). Also, we don't need to know the DotGolf Billing Token ID. We are not creating a new TBTransaction record when the user choses an existing billing card to register into a competition.
- Mod: Live: Removed another 'any' from POSViewModel-2018! Soon they will all be crushed 1s and 0s beneath my feet.
- Mod: Org: <font> tag cleanup, replaced them with <span>s for better HTML5 compliance Mod: Org: Deleted TabMaintenance.aspx
- Mod: Live: Altered TabReports DebugLog entry to not exceed the log character limit
- Add: Team name to Competition Results report #13250
- Fix: Performance: TOP(n) added to make SQL choose a better plan. If you're asking for pages of 20 scores, the max we'll ever return is 20 - may as well give SQL the hint.
- Fix: RegistrationOptionsEdit.aspx: Re-added <%@ Import Namespace="DotGolf" %>
- Mod: Prizes.aspx: Re-added <%@ Import Namespace="DotGolf" %>
- Mod: ImportAndLink: Re-added <%@ Import Namespace="DotGolf" %>
- Fix: Registration Options: Re-added <%@ Import Namespace="DotGolf" %>
- Mod: sql: insert SPAM3 into Products table
- Fix: Tournaments: When adding slots to a comp timesheet, Select All start tees no longer throws an error
- Fix: Infinite loop in WebUser.FromHttpContext when doing new WebUser().
- Mod: Vend Customer Merge wasn't actually updating the UIDs into the database - left something commented out accidentally.
- Mod: BulkEmail: Templates Index: handle null
- Mod: Bulk Email: added a Image (Med) element 600px x 200px
- Mod: API: TeebookingController: /club-name-match endpoint now includes CourseId in the response if the club has TBClubSettings.SeparateCoursesForTeeBooking=1 (turned on). In the app, if you search for "Wainui" you will get two results "Wainui" (main golf course) and "Wainui-Orchard" (Orchard course) - previously, there's only 1 search result under Clubs section.
- Fix: Bulk Email: remove empty <p>'s generated by Quill when updating the text / content
- Fix: Live: Missing ExtQuery reports in TabReports hopefully fixed. Added logging anyway
- Mod: Password hashing scheduled task throws an error if its cancelled
- Mod: Live: TabReports.aspx SetReportFavourite no longer inherently insecure (and matches ORG)
- Mod: Org: Update Club page no longer adds annoying log messages if the Xero contact can't load
- Mod: Live: Shared: Business Logic: BulkEmail: GetSentEmails: updated the query to use the CWEmailCompose ClubId when querying the emails; GetSenderViewModel: updated the query to use the CWEmailCompose CreatedByUserSecurityId value
- Mod: Live: Email: List.aspx: show the new "Bulk Email V3" button to clubs with the SPAM3 product. This will initially be used by the PGA, and eventually, by golf clubs as well.
- Mod: Live: master page: added AssetGroup.BulkEmailV3 permissions
- Fix: Support: put product under custom_fields
- Fix: Live: Disabled favourites for ExtQuery reports because they don't work
- Mod: Corrected the date of a comment
- Fix: Support:
- Fix: Live: Prevent undefined scorecards causing POS crash - #19356. Just a bandaid fix, we still need to find the root cause.
- Mod: DotGolf Live: Shared: Permissions: AssetGroups: added BulkEmailV3
- Mod: BulkEmail: Common: BulkEmailService Reference.cs 1. CreateEmail: added userSecurityId 2. GetEmailDraft: added OrganisationId
- Mod: BulkEmail: Common: BulkEmailService 1. CreateEmail: added userSecurityId 2. GetEmailDraft: added OrganisationId
- Mod: BulkEmail: handle display of menu for clubs; display DotGolf Live logo if the user is a club
- Mod: BulkEmail: Common: BuilderService: 1. CreateEmail: added userSecurityId parameter 2. GetEmailDraft: added OrganisationId
- Mod: BulkEmail: renamed AssociationProducts to OrganisationProducts
- Mod: BulkEmail: Common: EmailDraftModel: added OrganisationId property
- Mod: BulkEmail: MailingListController: GetMailingLists: use the user's ClubId (used to be hardcoded to null)
- Mod: BulkEmail: AccountController.cs: handle club users
- Mod: API: BulkEmail:
- Mod: Shared: Data: BulkEmail: EmailDraft: added OrganisationId property
- Fix: Scheduled tasks build failure after Vend Customer Group change
- Mod: Live: Vend Customer Group subscription item dropdown is now a multiselect listbox
- Fix: Kiosk: 3rd attempt at disabling pinch to zoom. Trying to be too lazy...
- Fix: Kiosk: 2nd attempt at disabling pinch to zoom
- Fix: Kiosk: pinch to zoom disabled (hopefully)
- Mod: Org: Update Club courses are always visible and look nicer
- Fix: Kounta print redirection didn't work in the History area of Kounta because the url doesn't end with /kounta.
- Add: Org: Can now rename Club and Course from the Clubs page
- Mod: api_UFPGetGreenFeesForDate - Add filter cfg.FeeType='GREENFEE' in the Where clause. Cart fees got returned from the API while testing in DEV.
- Fix: API: Unattended Green Fees: Fix github issue https://github.com/dotgolf/app-unattended-greenfees/issues/3 - RedirectToPaymentGatewayURL was NULL when you tap "Pay" button, tap "Back" navigation to go back to the previous screen then tap "Pay" again. The app expects a valid URI from the /greenfee-payments response and loads it into a web view. Mod: API: Unattended Green Fees: Set TxnData3 to <Amount to Pay> and <Payment Ref#> so this gets shown in the Payment Express payment page.
- Fix: ClubCMS: My Account  hide "Change to Monthly" and "Preview" if the category duration is 1 month (e.g. Flexiclub Monthly Category)
- Fix: ClubCMS: My Account (PGA): show "use different card"
- Fix: ClubCMS: GetValidClubCategories: added new parameter IsAllowOnlineSignupOnly so we could still use this method in the My Account control, where it doesn't matter whether the category allows online signup or not (we should be able to get the details of the category regardless of that setting)
- Mod: golf.co.nz: footer sponsor logos: updated the Jennian Homes link, as requested by Matt Q
- Fix: Org: Set ServiceLocator.Default to fix #19326
- Add: IndexCreatedBy on TBTimeSlotEntry now includes SlotDateTime and Deleted.  This speeds up the wa_TBGetMyBookingsForMember query significantly.
- Mod: Live: Tests: Downgrade NUnit to 2.6.1 to match everything else (for now)
- Mod: Slight performance improvement in wa_TBGetMyBookingsForMember by separating filters for MemberId and CreatedBy. Really there is a new index needed but I can't do that during business hours.
- Add: Warehouse: Indexes.
- Mod: Adweb: ClubProducts.aspx: CW Product: display website URL
- Fix: Live: TabUserProfile.aspx.cs fixed after WebUser.UserSecurity.ChangePassword refactor
- Fix: Org: revert accidental csproj commit
- Mod: ClubCms: Password hashing (almost) everywhere Mod: ClubCms: Removed some comments and unused methods from DBUtilities
- Mod: API: Password hash check when Authcontroller ChangePassword is called
- Fix: Builds: Re-fix registrations Mod: Org: Password hashing complete in org
- Fix: Live build (CreateRegistrationRequest error, missing csproj entry)
- Add: ScheduledTask to hash passwords overnight
- Mod: Shared: Password hashing in CasualGolfer, ClubMember, Passport, UserSecurity, WebUser
- Mod: Public: Added password hashing to Verify.aspx.cs
- Mod: Shared: Remove unused CWMemberSignup.cs file
- Mod: Public: Tournament registrations require new non-affiliates to create a password (fixed //send an email to the entrant saying thanks-and-here-is-your-password.)
- Mod: Shared: pass new @PasswordHash param into api_GetActivePassportForCredentials and remove unused UserUtilities methods
- Mod: SSO: pass @PasswordHash param into api_GetActivePassportForCredentials
- Mod: @PasswordHash param for api_GetActivePassportForCredentials
- Fix: Live: Bulk Email: Tee Booking recipient query: fixed the use of @ScoreCardReturned (it's never null; it's either true or false); and renamed it to @ScoreCardReturnedOnly.  If @ScoreCardReturnedOnly is false, the query returns all, regardless whether the scorecard was returned or not.
- Mod: Org: UpdateMemberOrNonAffiliate removed from Shared.cs (unused)
- Fix: Org: Removed all Database.UserSecurityId references
- Fix: Org: Fix Shared
- Fix: Org: Removed Database.UserSecurityId reference from SetReportFavourite
- Fix: Removed Shared.Ping()
- Fix: Database.UserSecurityId removal.
- [Breaking]: Removed Database.UserSecurityId - this property wasn't thread safe at all and could have been causing all kinds of pain. Mod: Also got rid of the empty Shared.Ping() method that has no content anyway.
- Mod: Live: Renamed "Deallocate" to "Unassign" (sorry, I just realised that I used the wrong term. The word "allocate" is used when allocating the credit note to an invoice.)
- Fix: Live: POS: Vend variants work again #19299
- Fix: Live: sql: Credit Note Reference Member Match function: match reference text to a member: - When the number in the reference is not complete, we were previously using the Cmember table to match the local member code. I've changed this to look at the ClubMember table. - When matching the name, allow matching by LastName FirstName
- Mod: Slope export back to \r to appease Autoscore.
- API: Unattended Green Fees:
- Fix: Capture a reference to the service locator and pass it through to the Async callback for PingV3, since context is not kept in old school async callbacks.
- Mod: ClubCMS: Add PasswordHash column to CWMembershipApplication
- Add: Damn assembly redirects!!
- Fix: #19293 ServiceLocator added to ConnectorAPI.
- Mod: drop api_GetPassportCredentialIdForCredentials (Moved it to Passport C#)
- Add: Shared: PassportHash field to PassportCredentialRec
- Mod: Live: Email Recipients: Tee Bookings Filter: added two fields: From Time and To Time; also modified the existing From Date validator (when All Bookings - Members and Visitors is selected) to limit it to one day (i.e. the same From Date and To Date should be selected)
- More reverting (TournamentDrawWidget.ascx.cs) Merged revision(s) 32368 from Trunk/DotGolf.Live.Association: Mod: Org: Moved Import Namespace tags from Org aspx files into a web.config <namespace> tag ........
- More reverting (Publish.aspx and Timesheet.aspx) Merged revision(s) 32368 from Trunk/DotGolf.Live.Association: Mod: Org: Moved Import Namespace tags from Org aspx files into a web.config <namespace> tag ........
- Mod: Live: Shared.Subscriptions.cs: added DeallocateCreditNote method which  just clears the credit note assignment (CreditNote.MemberId and CreditNote.NonAffiliateId)
- Mod: Live: CreditNote: add deallocate option, which basically just removes the MemberId or NonAffiliateId value from the CreditNote record; this option is hidden for credit notes linked to an invoice
- Mod: Live: Shared: added CreditNoteInvoice data object; added this to the CreditNote too (we use the CreditNoteInvoice table to determine if the credit note is linked to an invoice, and not the (obsolete?) CreditNote.InvoiceId column)
- Fix: Org: reverting accidental hyperlink in TournamentDrawWidget.ascx
- Mod: Org: Removed Microsoft.AspNet.SignalR.JS package
- Mod: Org: svn ignore Scripts folder full of js that's added by the signalr nuget packages
- Fix: Live: GroupBooking: Fix #19258. Updating an existing group booking throws an exception "System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'TimeSlotAllowBookingsPublic', table 'tempdb.dbo.#tt...."
- Mod: Don't disable the competition setup date input if the date is more than a year in the past.
- Fix: Cast errors with JWT 5.x
- Mod: BulkEmail: .Net 4.7.2 and JWT 5.0.1.
- Mod: Adweb: ClubProducts page: show more information for the CW product (template used, etc.)
- More reverting Merged revision(s) 32368 from Trunk/DotGolf.Live.Association: Mod: Org: Moved Import Namespace tags from Org aspx files into a web.config <namespace> tag ........
- Reverted all this because it's scary Merged revision(s) 32368 from Trunk: Mod: Org: Moved Import Namespace tags from Org aspx files into a web.config <namespace> tag ........ Merged revision(s) 32370 from Trunk: Mod: Live: update web.config include <namespace> tag for aspx pages reference DotGolf & DotGolf.Data ........ Merged revision(s) 32371 from Trunk: Mod: Adweb: update web.config to include <namespaces> tag for aspx pages reference DotGolf & DotGolf.Data ........
- Mod: Adweb: update web.config to include <namespaces> tag for aspx pages reference DotGolf & DotGolf.Data
- Mod: Live: update web.config include <namespace> tag for aspx pages reference DotGolf & DotGolf.Data
- Mod: Reports: Removed packages folder
- Mod: Org: Moved Import Namespace tags from Org aspx files into a web.config <namespace> tag
- Mod: API: Kounta: Redeem endpoint - Mods to stop processing duplicate requests. Check if the order has been fully paid by adding all the payment line items on the order - if the total payment lines matches or exceeds the order's total amount, we should discard the request and respond to Kounta that this is a duplicate request.
- Add: API: Kounta: Add: API: Kounta: Loyalty actions endpoint - Add debug log to dump the full order from Kounta so we know what the line items look like at that time.
- Revert svn no. 32357 - Will need to split mods related to just DebugLogs. So I can merge that mod to prod.
- Add: Adweb network diagnostics: Ping histogram so this page is a bit easier to get a handle on.
- Add: API: Kounta: Loyalty actions endpoint - Add debug log to dump the full order from Kounta so we know what the line items look like at that time. Mod: API: Kounta: Redeem endpoint - Mods to stop processing duplicate requests. Check if the order has been fully paid by adding all the payment line items on the order - if the total payment lines matches or exceeds the order's total amount, we should discard the request and respond to Kounta that this is a duplicate request.
- Fix: try to handle expired JWTs when changing club (DotGolf only).
- Mod: Org: Registrations Add Player controls now horizontally aligned
- Mod: SSO: Replace the URL with a safe one as soon as SSO loads up (so that the user can't embed an ephemeral JWT in their bookmark). Mod: SSO: If this url is found, redirect the user back to the original app so that a new JWT can be issued and passed through. Mod: SSO: If the user does manage to load up a previously expired JWT (by old bookmark or carrier pigeon) we'll do the same redirect back to the app.
- Fix: Org: Tournament edit player registration modal now responsive
- Fix: Another casting bug (JWT) - see exception 415229111.
- Mod: Live: Embiggened the subs invoice email address textbox
- Add: ServiceLocator.Default for DotGolf.API.
- Fix: IContainerProviderAccessor for Public.
- Fix: ServiceLocator setup for Public wasn't present so things that use ServiceLocator failed.
- Add: Live: member subs invoice custom body and recipient for Manawatu. Mod: Swapped positions of the 2 tiles in the member invoice page
- Mod: Newtonsoft redirect for Org.
- Fix: TransactionProcessor: PayByBillingTokenProcessor: updated the DotGolfDPSUserId to "DotGolfTournament"
- Mod: ClubCMS: Tournament: RegistrationCheckout: updated the TxnData3 value to "Billing Card Setup"
- Fix: JWT 5.x issues in Analytics.
- Mod: Upgraded FreshdeskTicketSync to 4.7.2.
- Fix: 4.7.2 for web.config for casual golf api (only affects dev)
- Fix: Casual Golf (Admin) was still stuck in 4.5 land.  Upgraded to 4.7.2.
- Fix: ClubCMS: Nomads: UNextEvent: fix Google Maps loading; use an API key and the shared UGoogleMap control
- Add: API: Unattended Green Fees: Add new DebugLogType for Unattended Green Fees.
- Fix: Web.config should have 4.7.2 for targetFramework.
- Mod: Dirty hack to change the autosubmit on the DebugLogViewer to a submit button instead, for performance.
- Mod: ClubCMS: URegistration (Nomads): revert previous change; still use DotGolfTournament DPS user for Nomads; use TxnData3 to display the amount as the original Amount field is hidden.
- Mod: golf.co.nz: Tournament Registration: In the DotGolfTournament custom hosted payment page, TxnData3 will now be used to display the Amount. This way, we can customise the value of this field. "Tokenize" transactions will show "Billing Card Setup" in this "TxnData3/Amount" field. "Auth" or "Purchase" transactions will show the Amount. The original Amount field is hidden.
- Fix: Live: fixed missing passport join and where clubid=@clubid in wa_TBCalculatePlayerGreenfee
- Fix: Live: fixed missing passport join and where clubid=@clubid in live_GetAvailableGreenFeesForMemberAndDate
- Mod: Updated VisitorAccessService web.config files.
- Mod: change PasswordHash iterations and fix salt encoding
- Mod: Live: Removed missing Scripts folder items from the csproj
- Fix: Live: POS: payment dialog scrolls now #19168
- Mod: PasswordHash column added to PassportCredential table
- Add: Adweb: Include slicer payment information on tee booking ticket view.
- Fix: API: AuthController: Fix invalid cast exception in the /renew-token endpoint. Used {object}.ToInt() extension method when expecting an int value from the decoded JWT token.
- API: Unit Tests: Renamed test case TestRenewTokenUsingValidCredentials to TestRenewToken - This test should fail because of an Invalid cast exception in the AuthController /renew-token endpoint.
- Fix: Adweb back to Newtonsoft v9 again.
- Mod: ClubCMS: DotGolfTournament custom hosted payment page: TxnData3 will now be used to display the Amount. This way, we can customise the display of Amount.  Tokenise transactions will show "Billing Card Setup" in this "Amount" field. The original Amount field will be hidden.
- Mod: ClubCMS: Use Payment Express DotGolfEvent user also for Nomads competition registrations. (We'll use DotGolfTournament for NZG and PGA tournaments.)
- Mod: ClubCMS: Use the Payment Express DotGolfEvent user for club competitions and functions. (We'll use DotGolfTournament for NZG and PGA tournaments.)
- Mod: Dev EditMember public link points to dev golf.co.nz
- Reverted revision(s) 32279 from Trunk/DotGolf.Adweb: Fix: Adweb: stray Newtonsoft.Json version 10.0.3 instead of 9.0.1 ........ until David can fix the web.config
- Fix: API: Unattended Green Fee Payments: Fix /list-greenfee-payments - Check if either UserId (i.e. MemberId or NonAffiliateId) or MobileDeviceUniqueId exists.
- Mod: sql: Org: create new table for the processing and logging of payments by billing token: PayByBillingToken
- Mod: sql: ClubCMS / Org: add new column: Registration.IsPayByBillingToken
- Mod: Transaction Processor: added PayByBillingTokenProcessor
- Mod: Transaction Processor: added PayByBillingTokenProcessor
- Mod: Org: Tournament: Finalise page: handle processing of payments by billing token
- Mod: ClubCMS: PGA Registration: populate new column Registration.IsPayByBillingToken
- Fix: ConnectorAPI: stray Newtonsoft.Json version 10.0.3 instead of 9.0.1
- Fix: Adweb: stray Newtonsoft.Json version 10.0.3 instead of 9.0.1
- Mod: Dev adweb 'Launch golf.co.nz' link points to dev golf.co.nz instead of prod golf.co.nz
- Mod: ClubCMS: RegistrationCheckout: added population of IsPayByBillingToken; added DebugLog inserts
- Add: API: Unit Tests: I am seeing frequent exceptions around api/auth/renew-token endpoint in Stage environment - committing this test case to verify if /renew-token is indeed having problems.
- Add: Slicer payment information added to ticket screen in Adweb.
- Mod: save Find Member Number dropdown + number range after creating new member
- Fix: Ticket numbers were zero-padded if the random generator got a number that was less than 9 digits.  Changed this to pad with a 7 so that integer conversion doesn't interfere with the number. 012345678 is NOT the same ticket as 12345678.
- Add: Ability to run the Member Sub Items report in at-renewal mode, where it lists items that will apply at renewal, not current items.
- Fix: Build fix from file move refactor
- Mod: Refactored SSO project-specific classes out of the Shared Fix: Build error from previous mod
- Fix: oops, merging those two files gone bad...
- Mod: Made the TabMember hook exception a bit more verbose so that we at least know which hook is erroring.
- Add: Vend Customer Groups support.  This allows us to set a particular Customer Group in response to a) a member tag or b) a specific Subs Club Item present in DotGolf.
- Mod: Refactored SSO project-specific methods out of the Shared SSO.cs
- Fix: API: Unit Tests: HandicappingNotificationTests TearDown exception occurs - Missing delete statement.
- Fix: Included /shard/ExtQueryEmail.ashx so that Jenkins can use aspnet_compiler.
- Fix: golf.co.nz: removed dead pages causing aspx compilation errors - Governance, Employment, MyProfileSummary
- Fix: Live build, deleted some unused as?x pages and fixed broken StartSheet_NG.aspx.
- Fix: Missing web.config setting for aspnet compiler.
- Fix: Adweb: Removed broken aspx not part of the solution anymore.
- Fix: Adweb: Removed broken aspx not part of the solution anymore.
- Fix: Removed /Backup folder from Adweb.
- Fix: API: JWT Token Validation: Forgot to add "MustVerifySignature" call for this one.
- Fix: ClubCMS: update a reference to TemplatedPage ClubId to TemplatedPage ParentClubId
- Fix: Remove unused aspx page from ClubCMS (USysCreatePage)
- Fix: Remove unused aspx page from ClubCMS (USysCreatePage)
- undo Jenkins test. (aspx compile-time compilation isn't happening right now)
- bug: testing jenkins
- Fix: API: JWT Token Validation: If we are using a SecretKey to decode the client's auth token, add a call to "MustVerifySignature()" method to validate the token. Seems like JWT 5.0.x does not verify the signature of the token by default when using a secret key when decoding.
- Mod: Web.config.Production change to allow CORS OPTIONS call.
- Add: 2 more urls to CORS for Smartpay log-transaction.
- Fix: Unused exception variable compiler warnings in MyGolfAJAXLibrary.asmx.cs
- Fix: GenerateRandomPassword CasualGolf.API build fix
- Mod: GenerateRandomPassword golf.co.nz build fix
- Mod: GenerateRandomPassword ClubCMS build fix
- Mod: GenerateRandomPassword build fix
- Mod: GenerateRandomPassword build fix
- Mod: GenerateRandomPassword now always 10 characters
- Fix: Unit tests still broken; upgraded to JWT 5.1.1 to try and remedy that.
- Fix: Unit tests - oops, missed a web.config.
- Fix: API unit tests were not running because of old Newtonsoft.JSON version.
- Fix: Tests for API
- Mod: Build broke because of v5.2.7 of System.Web.Http.
- Mod: Enabled CORS and added /api/v1/smartpay/log-transaction endpoint for Smartpay transaction diagnostics.
- FIX: NZGolf Address in levy invoice was wrong #19063
- Mod: Public: removed unused password parameter in Registration viewmodel
- Mod: Removed unused 'using CMember' and stray comment
- Fix: Remove orphaned Password header in Adweb member details
- Mod: Remove Adweb functionality to display plaintext user passwords to us.
- Fix: Live: Set correct payment type mappings for existing Vend POS clubs when first creating the new mappings Fix: Live: Ensure Vend SyncPaymentTypes always gets called if there's no mappings (by always calling VendSales GetPaymentTypes)
- Fix: Currency symbol copy&paste bug.
- Mod: Live: Love Golf: removed text about financial contribution as Love Golf is now free; I have previously made commits related to this but just missed this one.
- Fix: Live: Functions: Booking - Fix Save Changes error " The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_BKFunctionBookingVenue_ClubFeeDetail". Set BKFunctionBookingVenue.ClubFeeDetailId column should to NULL for Kounta venue rate option in the venue rates combo box.
- Mod: Split Settings class into multiple partial classes, for maintenance happiness.
- Mod: Moved Settings.cs into a folder of its own (preparing to split it into partials)
- Add: Allow complex classes in Setting<T> so we don't have to convert the JSON values every time.
- Add: Vend Payment Type to internal payment type mapping from settings. Mod: Swapped asp:placeholder for asp:table in Kounta settings for simplicity
- Mod: API: Unattended GreenFee Payments: Bring back mods related to Unattended Green Fee Payments from SVN rev. no. 32051.
- Mod: ClubCMS: Weather controls: we are temporarily disabling the weather controls as the Wunderground API had been discontinued.
- Sigh.  Broke the build.
- Add: Live: Functions: New setting "DisplayProductNotesOnRunSheet" - flag to show or hide product notes on the Booking Run Sheet.
- [MAJOR] Multicurrency formatting for DotGolf Live.  All currency symbols in Live are now read from the AXCurrency row marked with IsSystemDefault=1.
- Mod: Removed hacky IsValidPassword method from Passport.
- Add: ClubCMS: sql: create CWCartItem table
- Mod: Live: Functions: Mods required before Manawatu goes live with Functions.
- Mod: ClubCMS: PGA Registration: removed temp debug log entries
- Mod: ClubCMS: PGA RegistrationCheckout.ascx: updated some styles, text, and layout (use panel for the add event section)
- Mod: Live: Functions: Schema update - Increased column length.
- FIX: accidentally committed PasswordHash.HashPassword(password)
- Fix: Live: Visiting Vend Settings page requires Vend AND Settings asset groups (not either one)
- Fix: Kounta: ProcessLoyalty failed if a product has no tags.  Added null check to sort this out. Mod: Slightly improved performance around RefreshToken() by returning the access token from RefreshToken() rather than getting it from the database again.
- Mod: Passport: GetPassportCredentialIdForCredentials uses text command instead of api_GetPassportCredentialIdForCredentials stored proc. GetActivePassportForCredentials no longer uses api_GetActivePassportForCredentials as it is redundant. Working on dropping both stored procs soon.
- Fix: Don't allow clubs without the KOUNTA product to visit /Settings/Kounta/Settings.aspx.
- Fix: Shared: PassportCredential DeletedDate is now nullable
- Add: Shared: PassportCredential DataObjectSimpleTable class
- Fix: Live: Reports Tab: Crooked footer due to an extra <DIV> in the TabReports.aspx page.
- Mod: ScheduledTasks: replaced SQL with Club.WithProduct, so SyncFutureGreenFeesTask is easier to grok
- Mod: Org: PasswordHash changed to store Pbkdf2Iterations and salt in C# code instead of DB
- Mod: Removed DELETE CASCADEs.
- Mod: Shared: Remove unnecessary using Category = DotGolf.Data.Category;, added comment to public string PaymentTypeCode
- Mod: Style change - swapped 'using static' for explicit Model.Product.ProductSite.Tax typing
- Mod: ClubCMS: PGA Registration: add Debug Log
- Mod: Live: use PaymentTypeCode.ONLINEPAYMENT.ToString() instead of "ONLINEPAYMENT"
- Add: Live: Ability to rename Kounta payment types, by adding Kounta to internal DotGolf payment type mapping in Settings
- Mod: ClubCMS: PGA Registration: just updated some text (competition terms and conditions)
- Fix: Live: POS Kounta settings hidden if the club doesn't have POS, or they have Vend POS
- Oops, missed a reference.
- Fix: Kounta register may not be set, this caused a "Could not return NULL for value type Int64".
- Mod: Connector: Increase diagnostic ping timeout to try and catch more hosts.
- Mod: KountaClient fails gracefully when SaveRateLimitValues hits empty headers. Added logging to prove it (hopefully). Should fix exception 1071725 in Stage
- Add: wyUpdate project for connector-api.stage.golf.co.nz.
- Mod: Public: Go to Newtonsoft v9 because that's what we use everywhere else.
- Mod: Org: updated the Live logo / image
- Fix: Newtonsoft Json version for Public.
- Mod: Images: Fixed SLN location, package references.
- Fix: Unit Tests: BKFunctionBookingClubTag - Forgot to remove the unnecessary statement to create the PK_BKFunctionBookingClubTag. Mod: ClubTag: Set IsFunctionsTag to BIT NOT NULL DEFAULT(0) - we don't need this to be a tri-state flag.
- Fix: Live: Unit Test: The SQL statement to create DF_BKFunctionBookingClubTag is not necessary - there is already a DEFAULT bound to it in the CREATE TABLE statement.
- Add: Live: Functions: New table BKFunctionBookingClubTag
- Add: Live: Functions: ClubTag table schema update - Function tags
- Add: Live: Functions: Allow admin to indicate function event types.
- Mod: Live: Kiosk: start using PaymentTypeCode enum instead of stringly typed "AXACCOUNT" for payment type Code
- Add: Shared: PaymentMethodExternal DataObjectSimpleTable. Reordered in property in PassportClubExternal
- Add: Shared: AXAccountType property to get all Codes
- Mod: PaymentMethodExternal table PaymentTypeCode column is now nullable
- Add: Vend customer merge page to help with integrating a club where they already have a Vend instance in use with members already imported.  Documentation: https://dotgolf.freshdesk.com/solution/articles/6000222133-vend-merging-customers-between-vend-and-dotgolf-if-the-club-already-has-vend
- Add: PaymentMethodExternal table to map DotGolf payment types and Kounta/Vend/x payment methods
- Mod: ClubCMS: PGA Registration: just updated some text (terms and conditions)
- Mod: ClubCMS: PGA Registration: save the entry fee amount in the existing Registration.TotalAmount; updated a few styles; when matching the Country name to the Country dropdown options, use proper case (some country names saved in Cmember are all caps)
- Mod: ClubCMS: PGA Registration: Residency Status: renamed "Others" to "Other" (this is what's used in Org)
- Mod: ClubCMS: PGA Registration: simplified the country field; just use the dropdown, removed the label control
- Mod: ClubCMS: PGA Registration: reverted last commit on Country change, will check how this could be improved
- Mod: ClubCMS: PGA Registration: hide step 1 form after step form 2 is shown
- Mod: ClubCMS: PGA Registration: only select NZ as country by default for members
- Fix: ClubCMS: PGA RegistrationCheckout: fixed display of processing icon when user clicks on the Proceed button
- Mod: ClubCMS: PGA Registration: overseas guest: do not select NZ as country by default
- Mod: ClubCMS: PGA RegistrationCheckout: show processing icon after clicking Proceed
- Mod: ClubCMS: PGA Registration: hide step 1 form after step form 2 is shown
- Mod: Removed Inventory from DotGolf POS until a club asks for it
- Mod: ClubCMS: PGA Registration: add "required" css class name to date of birth
- Mod: ClubCMS: PGA Registration: show processing icon when Submit button is clicked
- Mod: ClubCMS: PGA RegistrationCheckout: UrlFail and UrlSuccess mod
- Mod: Live: POS: Kounta product inventory tracking in DotGolf POS
- Fix: #13712 Members could not upload profile images from golf.co.nz; image was broken (404) once uploaded.
- Fix: Live: POS: Scanning multiple barcodes correctly selects the scanned item (instead of sometimes selecting the previous item). Fixed for Harewood
- Mod: Live: SyncFutureGreenFeesTask comment update
- Mod: Removed several Thread.Sleep(FAKE_ROUNDTRIP_DELAY_MS);
- Add: Email address to Invoice report.
- Add: ClubCMS csproj: PGA Registration Confirmation control
- Mod: ClubCMS: PGA Checkout: show a processing icon when using the Add and Remove Event buttons
- Mod: ClubCMS: PGA RegistrationCheckout: corrected the query (and its gender parameter value) used to populate the competition dropdown
- Mod: ClubCMS: PGA Comp Registration: mods related to overseas guest registration, making sure they're not logged in as a nonaffiliate
- Mod: ClubCMS: UserUtilities: IsLoggedIn: we only consider the user as logged in if CWPassportId and CWUserType are both present. A user may have a session passport id, but not logged in (null CWUserType) e.g. PGA competition registration for overseas guests
- Fix: Live: Scheduled task for syncing future green fees no longer throws unhandled exceptions
- Mod: Live: Kiosk: PrintCards_V2 can now post Scorecard sales to Kounta (as well as Vend)
- Mod: ClubCMS: PGA Registration: just updated the bank account info or help text
- Mod: ClubCMS: rEditMemberDetails: redirect non-members to the site's default page instead of displaying an empty, unusable form.
- Fix: Live: ScoreEntry: Ticket #13681 - Fixed exception "Missing value for parameter: asAt" when calling /ScoreModelService/GetMember web service. The parameter used to be "playDate" but we've now changed it to "asAt" - this was changed in SVN No. 31979.
- Mod: ClubCMS: PGA RegistrationCheckout: whenever a user goes through Payment Express, the user is setting up a new card, hence we don't need the DotGolfBillingTokenId for this case
- Revert: Public: changed web.config AWSProfileName and Environment back to "development" and "dev"
- Mod: ClubCMS: PGA RegistrationCheckout: filter the add competition dropdown by Gender; renamed variables
- Add: Shared: class for PBKDF2 password hashing
- Mod: ClubCMS: PGA Tournament List: use span tag instead of a tag for Registered status
- Mod: ClubCMS: PGA Tournament List: button css class updates: use green for Registered status; use black for View Entries, View Draw
- Fix: Live: Green Fees: Only save currently active clubFeeDetails to Kounta when adding future green fees
- Mod: ClubCMS: PGA Competition Registration: allow to use existing billing card; handle processing of registration for that; update some text (displayed message, email content)
- Add: Live: Scheduled task for syncing green fee products with external POS system
- Fix: Live: POS: tax for Vend products correctly posted to Vend after POS changes
- Mod: ClubCMS: PGA multiple comp registration: allow nonaffiliates / overseas guest to register
- Mod: Live: POS: moved a HasProduct(Kounta/Vend) check from quick-search.posproduct.ts into QuickSearchService.aspx.cs for tidiness
- Fix: Live: POS: use default(decimal) instead of default (C#7.0 compatible to make Jenkins happy)
- Fix: Live: POS: Vend GetProducts and GetProductsByProductId fixed by using price_including_tax (instead of price which is always null)
- Mod: ClubCMS: RegistrationPayment: made DisplayCreditCardOption method private
- Mod: ClubCMS: PGA Tournament Registration: renamed cart guid cookie
- Fix: Live: POS: Fixed invalid cast in QuickSearchService SearchVendProducts while reading DataSet
- Mod: ClubCMS: PGA Comp Registration Confirmation: updated the success message; we don't need to display a list of the competition(s)
- Mod: ClubCMS: PGA multiple competition registration (work in progress): layout and style updates; handle success and failed transaction
- Mod: Live: Removed redundant Vend comment in KountaSales, resolved a TODO in jquery-1.10.d.ts
- Fix: Cast bug in XeroSync for org.  Also tidied up some strange looking code in this file.
- Fix: Improperly formatted DateTime saved into LastXeroSyncDate for associations; this caused future sync jobs to fail.
- Mod: wa_TBGenerateTicketNumberEx now generates 9 digit ticket numbers; we ran out and this caused an infinite loop in SQL.
- Fix: #13667 Condition where multiple app payments against a ticket can cause a duplicate key error in the capture payments area.
- Mod: Live: POS: Kounta member account product max sell price from 0 to 9999. Updated AXAccountTransaction.SetExternalSystemId in KountaSales to match Vend pattern
- Mod: Live: Kiosk: Removed redundant CardPrinting.TotalAmountDue() == 0 checks in CardPrintingViews.htm
- Mod: Live: Moved KountaBatchDataImport to the correct namespace (api)
- Fix: Live: POS: Group booking fees correctly show as paid if they've been paid when re-opening an paid scorecard
- Add: Live: AXAccount purchases now work through DotGolf POS with Kounta, it's not pretty though.
- Mod: ClubCMS: PGA: inserts for the new RegistrationConfirmation control
- Mod: ClubCMS: PGA: TournamentControl.cs: added GetCartDs method
- Mod: ClubCMS: PGA: Registration Checkout (work in progress)
- Mod: ClubCMS: PGA: Registration Checkout (work in progress)
- Mod: ClubCMS: PGA: initial commit of RegistrationConfirmation control
- Fix: API: TeebookingController: /search-slots endpoint - Temporary fix for Wainui. Whenever a user taps on the club search results (after performing a search), the timeslots from the Wainui-Orchard 9 gets displayed instead of the Wainui standard course. This mod forces the API to load the timeslots from the Wainui standard course if the request.ClubId==586 and request.CourseId is null.
- Fix: Live: POG: Booking info notes correctly hide/show when Course is filtered
- Mod: Shared: Delete unused netfx folder and files
- Fix: Live: Global.asax now sets ServiceLocator.Default in RELEASE mode
- Mod: Added POS asset group
- [MAJOR] Added KOUNTA + POS integration. New webhooks, new redis cache uses, new settings, new Kounta syncs Also, Complementary reason for green fees now shows on hover.
- Fix: Live: Subs Renewals: ComputePaymentScheduleInfoForInstalments: return the Schedule name even for those without an invoice history yet.  Previously this was an empty string, hence, those without an invoice history can't preview the instalments (the schedule name link is used to preview the instalments).
- Fix: Camel case problem in member update test case. Add" ShouldThrowOnUnexpectedPropertyNames to check for additional unexpected properties. Mod: WHSAPI: Test harness: Automatically create org-member links when creating members, without an explicit call to CreateOrganisationMember().
- Mod: WHSAPI: Index updated to speed up Score table access. DataImporter mods. Add: Test for 9 hole ESRs.  ShouldApplyESRToNineHoleScores - presently failing because we're waiting on R&A for answers. Add: Rate limiting. Mod: dotgolf added to rate limiting whitelist.
- Mod: WHSAPI: Refactored and renamed some internal classes to make the API more consistent. Mod: Got rid of generics returned in the API interface since this doesn't play well with Swashbuckle. Mod: Cleaned up error reporting a bit; trying to conform to the REST specs better by including error codes. Mod: Got rid of the generic TableMaintenanceControllerBase<> - Swashbuckle didn't deal with this well. Fix: UpdateMember endpoint didn't work correctly since property names were lowercase in the JObject. Fix: Error in ScoreController.Delete (SQL) Mod: Handle scores submitted for same moment PlayedAtUTC (depending on build constant) - we'll now adjust the playedat value for subsequent incoming scores.
- Fix: WHSAPI: Member permissions checking didn't ascend up the organisation tree.
- Mod: Live: Add category-to-product hash cache in KountaProductCache. Fix 'Shared' does not contain a definition for 'LockWaitAndTake'
- Fix: Shared: Include Kounta Category file in Shared csproj
- Mod: Live: Subs Renewals: when filtering members based on their Schedule Id (Cmember.SubsDirectDebitScheduleId), also include members without a bank account number (some instalment members are not on DD)
- Mod: Live: Apply new POS product checks instead of (Vend || Kounta). Removed unneeded Shared.cs LockWaitAndTake declaration
- Mod: Live: Subs Renewals: when filtering members based on their Schedule Id (Cmember.SubsDirectDebitScheduleId), also include members without a bank account number (some instalment members are not on DD)
- Mod: Live: Give clubs with an unDeleted VEND the POS product automatically
- Mod: Live: POS product SQL added to database. Gives clubs with VEND the POS product automatically
- Mod: ClubCMS: images update: use transparent background for these png images and update some logos as well to their latest design/branding
- Fix: API: Unattended Green Fees: Check for DeletedDate when retrieving green fee payments.
- Fix: JWT upgraded to 5.x for DotGolf.API.
- Fix: Pennants: fixed adding of players after initial save changes (previously, "save changes" doesn't work anymore on the succeeding attempts)
- Mod: Org: Removed DotGolf IP section from Create New Club button
- Fix: Org: Validate.aspx.cs JWT casting fixed...?
- Fix: SSO: Invalid cast bug after JWT package upgrade.
- Fix: SSO: Invalid cast bug after JWT package upgrade.
- Fix: Reports: csproj now refers to correct newtonsoft.json version
- Fix: Live: packages.config for Reports and ScheduledTasks; newtonsoft.json 9.0.1
- Fix: Binding redirects for DotGolf.API.
- Mod: Binding redirects causing problems - removing them to see if they are needed.
- Mod: Bump Lovegolf to Framework 4.7.2. Ignored a few directories that should not be in svn.
- Fix: Unit tests for Live fixed; didn't start up autofac container.
- Add: app.config.  Sigh.
- Mod: Org: SLN file moved.
- Fix: Org: Added packages.config again
- Fix: Org: Added packages.config again
- Fix: AjaxControlToolkit reference for Org.
- Fix: Org: Added AWS code analysers
- Fix: Org: Corrected Shared packages, svn ignore packages
- Fix: Org: Added packages.config
- Fix: API: CalculatePlayerGreenFees - removed PlayerNo.
- Fix: API: Unattended GreenFees: /CalculatePlayerGreenFees - incorrect player no returned. All player nos are set to 1.
- Retargeted LoveGolf to 4.7.2.  Removed packages.
- Ignored packages.
- Fix: Moved solution file, removed packages, upgraded JSON.net
- Removed packages/
- Mod: Moved to GData packages from nuget, cleaned up AjaxControlToolkit and CuteEditor binaries.
- Ignored packages.
- Mod: Cleanup Mailer.Service.
- Org: Installed nuget packages after the packages folder delete
- Ignored packages.
- Removed packages/, moved solution file for DotGolf.Mailer.
- Fix Jenkins Build - missing from Rev 32010.
- Removed packages/
- Add: API: Unattended Green Fee Payments: Initial commit - API code changes and SQL scripts.
- Mod: Moved ClubCMSTemplateEngine.sln up one directory and renamed to DotGolf.ClubCMS.sln.  This should get packages/ in the right place now.
- Fix: Cast bug caused by JWT package upgrade.
- Fix: Improved error messages in SSO.
- Fix: Shared: Functions.cs: Generated passwords no longer contain visually ambiguous characters like 0, O, 1, l etc.
- Removed CodeAnalysis references.
- Mod: Upgrade Newtonsoft.Json to v9.0.1.
- Removed packages/
- Try to fix DotGolf.API build errors.
- Removed packages/, removed and ignored user files.
- Mod: Upgrade Newtonsoft.Json to v9.0.1.
- Removed packages/
- Mod: Upgrade Newtonsoft.Json to v9.0.1.
- Removed packages/
- Mod: Upgrade Newtonsoft.Json to v9.0.1.
- Removed packages/
- Mod: Upgrade Newtonsoft.Json to v9.0.1.  Reinstalled packages.
- Mod: ClubCMS: sql: inserts into CWControl, CWControlProperty, CWLayoutSection
- Mod: ClubCMS: terraces3 template: added opening body placeholder. This will be used to insert scripts right after the opening body tag.
- Removed packages/
- Ignored packages/
- Add: ClubCMS: UPlainContent control: this control only contains a literal control (no div wrapper). This will initially be used to add some script after the opening body tag.
- Mod: ClubCMS: UserControlUtilities: added WriteSectionControlsToPlaceHolder
- Mod: Upgrade Newtonsoft.Json to v9.0.1. Deleted packages/
- Reinstalled packages for DotGolf.Live solution to get DotGolf.Shared to point to the correct packages location.
- [BREAKING] Right, it's time.  DotGolf.Shared packages/ folder is gone!  This will break Jenkins; I'll update each project to do a package restore shortly.
- Mod: Upgrade Newtonsoft.Json to v9.0.1.
- Mod: Upgraded to JWT 5.0.1 (from 1.x) because I need this for the new WHSAPI client. As part of this I had to upgrade SSO login code to use the new fluent JWT interface.
- Mod: Removed HttpClient package and added System.Net.Http instead because I need this for the NSwagStudio generated API client classes.
- Add: Created a new exception, ServiceLocatorNotSetException, instead of just throwing a new Exception.
- Mod: Autofac per-request lifetime scope works now in Webforms (DotGolf Live anyway). Cleaned up some property names and added documentation for ServiceLocator.
- Mod: ClubCMS: PGA: RegistrationCheckout control: style updates (work in progress)
- Mod: ClubCMS: PGA: RegistrationCheckout control: display, add, remove cart items (work in progress)
- Mod: Pennants: Team setup: exclude expired users (I've expired the old logins and want them excluded from the list of users)
- Mod: Add more information into team user security listings in the Pennant setup area.  This way we can tell which team(s) a user relates to.
- Mod: Org: removed packages/ folder from source control.
- Mod: Org: removed packages/ folder from source control.
- Mod: Org: You can now control the competition email sending flags from within Competition Setup.
- Add: ClubCMS: UHeadInsert control: this will allow us to insert js scripts (e.g. remarketing tags) into the club websites. This will initially be used on the Love Golf site.
- Fix: Org: Create Club: Fixes from DFH Email: •	When the form loads, set focus on the Club Name input. •	Generated passwords no longer contain visually ambiguous characters like 0, O, 1, l etc. •	Minimum password length of 6 characters. •	Latitude and Longitude on the same line, Latitude first. •	Latitude and Longitude must be between -180 and 180 •	Check if IsResubmit when saving to prevent a double post •	Handicapper email and club email no longer set; using the Club.cs Email setter instead
- Mod: Removed a bunch of unused packages from DotGolf.Shared.
- Mod: Autofac: Added Autofac.Integration.Web.
- Add: Kounta print redirection script.  Installing this will use the Connector on localhost to proxy print requests to intelligent receipt printers, as long as the Connector is available and pinging.
- Mod: Proxy ePOS printing requests if they hit localhost:3673.  Combined with a Tampermonkey script (see DotGolf API/Kounta/kounta-print-redirection.js) this will eliminate the need to run Chrome in insecure mode.
- Add: AdWeb: Ability to setup a club for Unattended Fee Payments.
- Mod: Order by countback on the public site (tournaments) by default.  This was for parnz; I'm hoping it won't bother NZG because we still don't rank by countback, just order.
- Mod: Org: Removed unused cbShowPassword_CheckChanged method from Create Club
- Add: Missing packages.config
- Mod: Autofac added to DotGolf.Org.  Also dumped /packages folder - we don't want this anymore.
- Mod: Autofac added to DotGolf.Public.  Also dumped /packages folder - we don't want this anymore.
- Fix: #13514 Delete results for a competition round if the round is being deleted.  We also fire a competition recalc if this happens to ensure that multiple round x competitions will still work (eg. you delete one of the R1 CompetitionRounds).
- Fix: #13044 Category Member Count report movement calculation was incorrect if you join and resign a member within the movement period.
- Fix: golf.co.nz can now deal with tournaments where they have skipped a round (but left the round in the comp setup for whatever reason). Previously the system would only show results up to the last round that had 1 or more scores in it, skipping any rounds played after the blank round.
- Fix: Web.config didn't have the correct CommonServiceLocator version number, resulting in assembly binding failures.
- Fix: Reports app.config came back again...
- Aaaaaaargh!! DLL hell!!
- Mod: Try to get rid of the assembly binding issue.
- Mod: Got rid of AutoFac.Web since a) property injection in webforms just feels like a hack, b) it needs modules in the web.config and c) it binds to v3 of Autofac, requiring nasty web.config assembly redirects.
- Fix: svn ignore dotgolf.quick-search.posproduct.js dotgolf.quick-search.posproduct.js.map
- Add: Autofac stuff to Web.config.
- Fix: Removed app.config from DotGolf.Reports.
- Fix: ClubWebsite: Fix #13515 New profile updates from the member's CMember record are not saved into CWMemberUpdateLog.
- Fix: Autofac: I caused some compile errors by a last minute refactor.
- [MAJOR] Added AutoFac and introduced IHandicapProvider for handicap retrieval. Also stripped out some old GolfLink code.
- Add: Connector: UnstableConnectionManager introduced to try and help Taumarunui's unstable internet connection.
- Fix: Org: Silently catch SSM errors when populating Xero Contacts dropdown. Not tested, but DFH approved it, so fingers crossed.
- Fix: Org: Set EnableEventValidation="true" in Update.aspx and Create.aspx
- Mod: ClubCMS: sql: CWControl and CWControlProperty inserts
- Mod: ClubCMS: PGA: Registration Checkout initial commit
- Fix: Typo in sql script.
- Add: Work in progress (but safe to deploy) - System wide currency setting.  This will work for NZ and UK, so I'm going with a very simple implementation for now. At a later point we can support per-club currencies by swapping out the AXCurrency.DefaultCurrency property for something else.
- Fix: Adweb: Removed missing image.
- Add: machineKey for Adweb.
- Mod: Tee booking Payments page did not allow clubs to capture payments for people who have booked via the app in Guest mode.
- Add: Public: created a new page called National Education Framework as requested by Carl
- API: Cleanup: Sorted out a bunch of compiler warnings.
- Fix: Shared: Fine, Database connection string back to public
- Fix: Kounta swipecard fix; bump version number and fix eslint warnings.
- Fix: Org: Create Club: Added GetAllRegions method, Database connectionstring now internal, GenerateRandomPassword now uses chars
- Fix: Kounta swipecard format for Riverside.
- Add: Org: Create New Club in Clubs tab (currently DotGolf only)
- Add: Org: Create New Club in Clubs tab (currently DotGolf only)
- Fix: WarehouseBuilder: agg_Score_Count didn't calculate if @ToDate was today (since dim_Date doesn't contain a row for today)
- Add: Warehouse Builder: Catch and handle aggregate build exceptions (log them).  Also added some rowcount outputs to the log.
- Mod: Org: Put menubar hyperlinks onto new lines for readability and set menubar font-size: 0 so there's no visual change
- Add: WarehouseServiceURL for Adweb so that ExtQuery reports against the warehouse datasource work.
- Add: META tag to stop Chrome from asking everyone whether they'd like to translate DotGolf Live from Maori to English. Chrome is detecting Live as Maori due to the presence of some Maori surnames in our member/place/club names.
- Mod: Removed a bunch of Aus/GolfLink stuff. I had to clean this up to avoid having to do unnecessary work around the WHS integration.
- Mod: Live: TabMemberNew: FindMembers: we want to search using the full computer no. Stripping off the club id means that live_FindMembers_LiveOnly_Surname_Number returns persons linked to the club having the same local member code, but not necessarily members (persons from PersonClubDetail).
- Add: MachineKey for ClubCMS otherwise load balancing is not possible.
- Mod: Shared: Kounta: WaitForRateLimitAsync defaults KOUNTA_API_RATELIMIT_REMAINING_KEY expiry to 1 min if it wasn't set. KountaHttpClientChannel throws correct KountaError if DeserializeObject<KountaError> fails
- Add: MachineKey for golf.co.nz otherwise load balancing is not possible.
- Mod: ClubCMS: My Account: still return the saved billing card even if expired so they'd know what is saved in their record. We're still, of course, excluding soft deleted billing cards.
- WHSAPI: Mod: Tidied up error handling; errors are now returned to the client in a consistent manner:
- WHSAPI: Add: versioning. Mod: DatabaseFixture will now retry deploying if DAC deployment fails (which is occasionally does for whatever reason)
- WHSAPI: Unit test added for getting away scores. Fix: Away score endpoint validation problem if [since] is missing.
- WHSAPI: Rate limiting added.  This is configured through the appsettings file for now and uses IDistributedCache against the SQL backend (because we don't have ElastiCache in oregon at the moment - cost)
- Fix: No longer proper case the club address on invoices since this is entered into Live and usually correctly cased.  Jenny@Pupuke was asking why "PO Box" is written as "Po Box".
- Fix: Bulk Email: RightSideBar Email Template: fixed the broken layout (when dragging elements into the email draft) by setting the elements' height
- WHSAPI: Renamed Penalty to Adjustment - more appropriate given the committee can adjust up or down.
- WHSAPI: Fix: We deal with incomplete scores entered on a pending handicap properly now (marking them as ineligible for handicapping).
- WHSAPI: Add: Unit test to check max hole score calculation for initial score entered against a pending handicap player. WHSAPI: Updated README.
- Fix: Typo - spelling mistake.
- Minor: Mods to e-mail subject only.
- Fix: Org: Fixed icons floating off menubar in debug by including open sans font in litJQueryScriptTagDebug
- Mod: ClubCMS: Flexiclub-specific signup form: exclude categories with IsAllowOnlineSignup configuration set to false
- Fix: Org: Fixed centering of the menubar
- Mod: Live: Receipt: FindReceiptsNotInXero: this method should only return receipts (for the given invoice) which are both in DotGolf, and Xero (AccXeroPaymentId has a value); there are a few cases where a receipt (online payment) is voided in DotGolf before it even gets synced to Xero (i.e. Flexiclub online payments)
- Fix: SQL statement error due to missing "@" prefix on query params.
- Kounta: UnassignedMemberAccountCreditTask - hard-coded to "kenneth@golf.co.nz" e-mail so we can monitor that the alerts are working. Will monitor for a week or so before we push the alerts to the clubs.
- Add: Mailer _deploy directory so we can add a deployment script for this.
- Mod: Removed _deploy; should have been an svn:extern.
- Add: DotGolf.Mailer _deploy directory.
- Fix: Live: fncMatchReferenceToMemberId: search in ClubMember, not Cmember to include non-playing (e.g. social) club members
- Fix: Live: Member: GetMoneyOwedByMember: removed extra condition, "and cn.MemberId = @MemberId", filtering the credit notes to members only (hence nonaffiliates were not considered, and the other condition, "cn.MemberId=@MemberId or cn.NonAffiliateId=@MemberId", is disregarded)
- Mod: Org: ImportAndLink: LinkCompetition: copy the sponsor image URL too from the source competition (PGA), so that the sponsor logo will appear on the PGA site
- WHSAPI: Fix: Constraint error in away score method.
- WHSAPI: Add: api/scores/{organisationUID}/away - retrieves all scores played away by members of the organisation.
- WHSAPI: Member was not returned in timestamp mode if a score changed their handicap index.
- WHSAPI: Add: Country table and Region.CountryId FK.
- WHSAPI: Got rid of extra data on OrganisationMember level; there is now only one set of person details, and that's on the Member level. The home club is in control of this data.
- WHSAPI: Add: Email field to Member and OrganisationMember.
- Fix: Adweb: Assembly reference mistake when loading embedded resource.
- WHSAPI: Removed TODO; all issues now logged in Github.  https://github.com/dotgolf/world-handicap-system/issues
- WHSAPI: Fix: Distinct PlayedAtUTC was causing errors when updating a score.
- WHSAPI: Penalties are now only applied to 18H scores or 9H scaled or combined scores.  Orphans or parents of combined children no longer get penalised.
- WHSAPI: Correctly apply ESR penalties against the past 20 scores, using nine hole combination/scaling as effective at the time the scores were posted.
- WHSAPI: Enforce PlayedAtUTC uniqueness per member.  This will stop a lot of edge case bugs down the line.
- WHSAPI: Add: Update/remove parent-child score links in response to updating or deleting a score.
- WHSAPI: ESRs are now saved in the IHandicappingDataProvider and they are updated once the PCC has been completed for the day. Fix: ESR penalties were only affecting 19 of the 20 scores (in GetLast20Scores) Test: New test added to check ESR pre and post PCC. TODO added in 9H combine area.
- WHSAPI: Mod: Update Member HandicapIndex, LastPlayedAt and LastEntered dates and return these in GET members. Add: Include HandicapIndex in member search results (Brief.Member). Mod: Enforce PlayedAtUTC to be a past timestamp (grace of 5 minutes into the future; but gets clamped to DateTime.UtcNow). Add: More tests to ensure GET member and search member endpoints return consistent results.
- Mod: Reverse Proxy: apply https to harewoodgolf.co.nz
- WHSAPI: Fix: ScaledAdjustedGross calculation removed for now. Add: Worked examples turned into unit tests for HD calculations.
- WHSAPI: More tests around combining 9 hole scores.  There is some more work needed here to combine scores that were entered out of sequence.
- WHSAPI: Add: TODO
- WHSAPI: Add: Unit tests for combining 9 hole scores (in chronological order and also reverse order). Fix: int used instead of long for some score IDs.
- WHSAPI: 9H stroke allowance calculations corrected (base 9) Fix: PCC tests pass now.  More tests needed around PCC based on 9 hole scores. Add: Some TODOs.
- WHSAPI: Fix: broken test around low handicappers and not-attempted scores. Fix: 9 hole score scaling was interfering with 18H scores. Add: Renew access token test. Fix: Missing AllHolesAttempted = true to a few PostScore by AdjustedGross calls.
- Fix: Shared: Kounta: Build fixed by removing dead PostProduct fields from use
- Fix: Shared: Kounta: Fix missing ProductPut class in Product.cs
- Mod: Shared: Kounta: Throttle Kounta API calls when X-Ratelimit-Remaining gets below 50, avoid HTTP 429 errors
- WHSAPI: Renamed another CCA reference.
- WHSAPI: Cl and Ch "anchor" calculations fixed; we consider the last 365 days' worth of scores to compute the min handicap index now. PCC calculation mods per v0.6 spec: - The cutoff, N, is now 36.0 handicap index, not course handicap. - Weighted mean slope calculation introduced. - Confidence limit calculations corrected - there was a sign error in the spec. - Default is now to only consider n = -1, not n = -1,-2.  I've added a build variable for this, in case they change it again. Removed Score.EligibleForPCC because it's better to store AllHolesAttempted and calculate EligibleForPCC from that. More tests are passing again now.
- WHSAPI: Removed TODO for 9H course handicap calculation; we guessed right.
- WHSAPI: Minimum number of players for PCC is 8.
- WHSAPI: Buffer introduced per section 3.1.1.
- WHSAPI: Ignore HoleScores[] on ScoreInsert so that petapoco doesn't try to serialise it.  It's only a helper property setter. Add: Proper security around posting scores; we now ensure the user can write to the member or course before saving the score. Mod: Disabled some broken 9H tests (pending clarifications from WHS spec) Mod: Cleaned up some DI stuff in ScoreCalculator. Mod: ScoreController now has a POST method for create and another for update, so that I can write documentation for each method.
- WHSAPI: Added a build flag to enable enforcement of maximum adjusted gross scores. I've left this disabled for now as I don't think it is going to work in practice.
- WHSAPI: Renamed another case of CCA to PCC.
- WHSAPI: Renamed CCA to PCC per v0.6 of the spec.
- Mod: Live: Bulk Email: ComposeV2: set article text editor's EnableAntiSpamEmailEncoder to false to allow mailto links in the email
- Mod: Live: Bulk Email: email header image URL: simplify the URL; do not use expiration (this doesn't seem to be working properly); images in the email body also don't expire
- WHSAPI: Code refactored in PostScore to make it more readable. WHSAPI: Code cleanups, comments corrected for Swagger docs.
- Fix: Kounta: Customer Cache - Run full sync only when triggered from KountaSync.ashx.
- Fix: Removed Russley config; don't need this as they have 7 digit card strings.
- [MAJOR] Upgraded DotGolf.CardPoller to .Net 4.7.2.
- Add: Russley swipe card format enabled - assuming they have the year.
- Fix: Slicerlib had currency conversion issues when paying clubs for account topups where those accounts were not in NZD, eg. Rounds accounts. We now use the TBTransaction.Amount value which is going to be more reliable.
- [MAJOR] Upgraded DotGolf.Mailer to .Net 4.7.2.
- Mod: Kounta: Loyalty Actions endpoint: Generate logs only when DotGolf.Settings.Kounta.EnableLogging is true. Also, removed calls to DebugLog when an exception occurs. We are already logging the exception details in ExceptionLog. Add: Kounta: New setting "EnableLogging" - A value indicating whether verbose Kounta interface data logging will be done to DebugLog for this club (off by default).
- Mod: Live: POS: Re-added old fields to QuickSearchService ProductRec so clients won't need to refresh their browser on publish.
- Mod: Code Review: Use parameters instead of hard-coded contact type list IDs in the SQL query.
- Fix: Live: Checkout: dotgolf.checkout SupportedPaymentTypes repopulated after hard refresh to fix page reloads causing errors during a checkout
- WHSAPI: Named all the primary keys; they are created un-named by default.
- WHSAPI: More speed tweaks.  Got rid of ISVCredentialScore since this info can easily/cheaply be stored on Score.
- WHSAPI: Went to smallmoney data type to save 8 bytes on Score.
- WHSAPI: Fix: Crashbug with missing parent scores. WHSAPI: Committed mod to stop caring about incoming adjusted gross values that are too high.  We'll figure out what to do with these later; for now we have to trust them.
- Mod: WHSAPI sadness.  Had to get rid of the ScoreHole normalised table because it was simply using too much space.
- Fix: WHSAPI Tests: Enabled MARS since the PostScore method is now multithreaded.
- Fix: WHSAPI: Better performance for penalty lookups. Mod: removed HoleNo from IScoreRec; we don't need it. Mod: Enabled MARS and await the selects in PostScore in parallel (saves milliseconds) Fix: Required fields in the API should be nullable so we can detect absent values (counter intuitively). Fix: Traverse up the tree to see all our parents (when posting scores as a club/district/association) Add: Various indexes as SQL performance issues were identified. Add: Organisation.CreateDateUTC. Fix: WHSAPI: LastUsedDateUTC typo. Mod: Removed transaction in PostScore as it was causing blocking. Add: Initial NZ score import utility (will likely be adapted for the CDH import).
- Fix: Live: Club: CourseIDs: only return the active ones (exclude "terminated" course e.g. Harewood Plains was terminated in 2018)
- Mod: ClubCMS: rNavBarv2: update the club logo's alt text to Club's Full Name instead of using just the Club Name
- Add: Name changes are now shown in Member History.
- Fix: Removed AXAccountPassportClub reference from wa_TBCalculatePlayerGreenfee
- Fix: DGadmin: Removed AXAccountPassportClub reference from dga_NightlyBatchAXTransactionsToSendToXero
- Fix: Live: Removed AXAccountPassportClub reference from live_GetAvailableGreenFeesForMemberAndDate
- Add: ClubCMS: rEventRegistration: Functions online registration
- Mod: Bulk Email: multiselect css update
- Mod: Reverse Proxy: added -,-,0,1,hyundai.cw.golf.co.nz
- Mod: ClubCMS: bindings: added hyundai.cw.golf.co.nz; removed www.holdenclubhouse.co.nz
- Mod: Adweb: Slicer: Removed usage of redundant AXAccountPassportClub view
- Mod: Tasks: Round Management: Removed usage of redundant AXAccountPassportClub view
- Mod: Live: Reports: Dropped redundant AXAccountPassportClub view and removed its usages
- Add: Live: Subs: Import page has a textarea that takes copy-pasted csv data and imports balances and start dates.
- Mod: ClubCMS: sql: CWControlProperty insert
- Mod: Reverse Proxy: removed -,-,0,1,peninsula.cw.golf.co.nz and -,W,0,1,peninsulagolf.co.nz
- Mod: ClubCMS: removed peninsula.cw.golf.co.nz, peninsulagolf.co.nz, and www.peninsulagolf.co.nz
- Mod: Bulk Email: Send: added GetCategories and GetMemberEmailRecipients
- Mod: Bulk Email: Common: added GetCategories and GetMemberEmailRecipients
- Add: Bulk Email: bootstrap multiselect js and css
- Mod: Kounta Thread.Sleep increased to 3s for member sync, to avoid rate limits. Add: KountaClient will now save rate limit and remaining figures into Redis so that we can throttle intelligently in the future.  Comments included as to how we think this could work.
- Fix: Live: live_GetAvailableGreenFeesForMemberAndDate filters out deleted ClubFeeGroupClubs
- Mod: API: Bulk Email: added GetCategories and GetMemberEmailRecipients
- Mod: WHSAPI: Get connection string from SSM. Add: /health endpoint for load balancing.
- Fix: Live: POS: updated addProductToSale to use new generic productResult returned from QuickSearchService
- Mod: Live: POS: Product quicksearch is now generic, added Kounta product search method to QuickSearchService
- Add: WHSAPI: MarkerHistoryUID guid and post deployment setup script.
- Add: Kounta: LoyaltyActions: Added DEBUG logs.
- Fix: Reports: No more build errors after Shared update to .NET 4.7.2
- Mod: Ignored stuff.
- [MAJOR] Bumped DotGolf.WarehouseBuilder to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.TransactionProcessor to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Support to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.SSO to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Pennants to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Mailer to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Images to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.ConnectorAPI to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.ClubCMS to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.CasualGolf.Web to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.CasualGolf.API to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.BulkEmail to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.API to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Analytics to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Analytics to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Adweb to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Admin to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Public.2012 to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Live.Association to .Net Framework 4.7.2.
- [MAJOR] Bumped DotGolf.Live and all projects within to .Net Framework 4.7.2.  This includes DotGolf.Shared, so Jenkins ain't going to be very happy for a little while...
- Mod: Reverse Proxy: apply https to maungakiekiegolf.co.nz
- Live: Fix Jenkins build error after Typo fixed in svn rev. 31754.
- Typo: RegisterAtendeeRequest class name was missing a "t" (should be two letter t's) instead of RegisterAttendeeRequest.
- Mod: ClubCMS: My Account: display billing method (cc, dd, manual)
- Mod: ClubCMS: My Account: display billing method (cc, dd, manual)
- Mod: TBTransactionProcessor: SubscriptionInstalment: updated the receipt email subject, description column in the receipt email, dps user id set ispurchase=1 in tbtransaction for these payments
- Fix: Live: Competitions: Only allow DotGolf to copy multi-club competitions
- Mod: Live: Love Golf: removed checking if Love Golf is active (Love Golf will be open to all clubs)
- Mod: Live: Categories: removed lgIsActive (this isn't used anyway; and we're not checking for this anymore as LOVE Golf will be open to all clubs)
- Mod: Live: Love Golf: removed the Love Golf Progress bar (requested by Mel)
- Mod: Live: Love Golf: SubNavBar: text colour update
- Mod: Live: Love Golf: removed the Love Golf Progress bar (requested by Mel)
- Fix: Live: Settings: Accounts: Removing then adding an Enabled Account Types record restores most recently deleted record instead of creating new one and killing the combobox that was linked to the old record id
- Mod: Live: Love Golf: removed the activation part because LOVE Golf will be open to all clubs (requested by Mel)
- Mod: Live: Love Golf: removed the Love Golf Progress bar; removed the activation part because LOVE Golf will be open to all clubs (requested by Mel)
- Oops, didn't mean to commit that yet.
- Add: CMember.WHSMemberUID
- Mod: Live: Love Golf: removed the Love Golf Progress bar (requested by Mel)
- Mod: Live: Love Golf: removed "Financial contribution" section (requested by Mel)
- Mod: Live: Love Golf: renamed "New Campaign" to "New Event/Programme" (requested by Mel)
- Mod: Live: Love Golf: renamed "New Campaign" to "New Event/Programme" (requested by Mel)
- Mod: Live: Love Golf: renamed "Club Information" to "Website Profile", and "Promotional Campaign" to "Events and Programmes" (requested by Mel)
- Mod: Live: Love Golf: removed Introductory Offer and Membership Offer from the Love Golf nav (requested by Mel)
- Mod: WHSAPI: Named another constraint.
- Fix: WHSAPI: Constraints named.
- Mod: Live: StatementReport: adjusted the club name to accommodate longer club names (it was overlapping with the address for "HAMILTON GOLF CLUB AT ST ANDREWS"); right-aligned it too along with the club address
- Mod: Live: TabInvoice / InvoiceReport: resized the club name placeholder at the top (to accommodate longer names like "HAMILTON GOLF CLUB AT ST ANDREWS", moved down the logo a bit to avoid overlap with the club name
- WHSAPI Fix: Folder typo.
- WHSAPI Add: UseAppHost=true for Windows publish profile.
- WHSAPI Add: Proper WindowsX64 publish profile so we can deploy to Windows too.
- WHSAPI Add: 9 hole score scaling/combining work.  Unfortunately I'm now blocked on the net par calculation when the player has a pending handicap. Various tests around 9H scoring now fail because of the blocker I've got in understanding the spec. Mod: Refactored, extracted insert/update methods in PostScore.
- Fix: Public: broken images fixed by pointing to static.golf.co.nz instead of images.golf.co.nz
- Fix: Live: Vend: Product Update Web hook - missing @vendProductId declaration causing SQL query to fail.
- Mod: ClubCMS: My Account: just renamed an ID
- Mod: ClubCMS: Member: GetInvoicesForMember: just updated the sorting of the returned data (latest on top)
- Mod: ClubCMS: My Account: fixed the amount saved in TBTransaction (or instalment payments)
- Mod: ClubCMS: rMyAccountPaymentConfirmation: updated email subject; updated styling
- Mod: ClubCMS: My Account: updated the merchant reference to include the club name
- Mod: ClubCMS: Member Signup V2: if the MerchantReference control property isn't set, use "[CLUB NAME] SIGNUP" as Payment Express Merchant Reference
- Mod: ClubCMS: My Account: update the instalment pop-up details (added totals); corrected data used to generate the instalments
- Fix: Shared: Subscriptions: GenerateInstalments_Internal: when inserting existing receipts and credit notes into the instalment table, the outstanding amount should be zero.
- Mod: Shared: Invoice: reverted last change (wasn't suppose to commit it); removed HasPayments
- Mod: Shared: Invoice: added HasPayments: returns true if the invoice outstanding amount is less than the invoice amount
- Mod: Re-worded the FAQ link text on the Support portal slightly.
- Fix: Live: No silly horizontal scrollbar. Code: Added 2 d.ts files. Removed duplicate jquery.timers.js reference.
- Add: Setting under Settings/Kiosk to allow/disallow members paying for their course/competition/green fees on account.  Some clubs like Mt Maunganui and Harewood don't allow members to pay for competition fees on account, so this can be used to disable that feature.  The default is ON (allow payments on account).
- Mod: ClubCMS: My Account: text update, removed unused code
- Mod: ClubCMS: My Account: improve the monthly instalment table styling and add a Paid Date column
- Mod: ClubCMS: My Account: allow to pay the monthly instalment due on or before the current month (work in progress)
- Mod: ClubCMS: My Account: allow the member to update the single payment schedule to monthly schedule; still a work in progress: allow the user to pay the instalment due as at current date(?)
- Fix: Instalment: Number: exclude soft-deleted instalment records from the query
- Mod: ClubCMS: GenerateInstalments_SaveToInvoice: reverted previous commit (wasn't supposed to commit it but I hit the wrong button)
- Mod: ProcessRenewals_Apply.cs: added "GenerateInstalments_SaveToInvoice" which accepts all the details (Document Date, First Instalment Date, Last Instalment Date,
- Fix: Harewood swipecard.
- Fix: Thread-safe way to update VendProducts (and avoiding accidentally inserting new ones) on webhook post.
- Fix: ClubCMS: Cobra Puma Join control: handle null handicap
- Fix: cobrapuma.golf.co.nz should not have WWW.
- Add: wyBuild file for connector-api.nz.dev1.internal.golf.co.nz.
- Mod: Network Diagnostics page added.
- Mod: sql: ClubCMS: insert into CWControl and CWControlProperty tables
- Add: ConnectorAPI: New endpoint for uploading network diagnostic data.
- Fix: Should have defaulted CreateDate.
- Add: New table to track club network scans.
- Mod: ClubCMS: Cobra Puma: Join Generic control changes
- Add: Delay while syncing Kounta members so that we don't hit the rate limits.
- Fix: ClubCMS: Member Signup control (Flexiclub): assign values to FirstInstalmentDate and MembershipEndDate (CWMembershipApplication)
- Add: GreenFeeData: DisplayName so we can show this in the Adweb email report.
- Mod: ClubCMS: Cobra Puma: added Report Generic control; also including payment express logos (for the My Account control)
- Mod: Adweb: Include the member name on the Slicer member account topup report that is emailed to the clubs.  Many clubs have asked for this; hopefully it doesn't mean that they'll start reconciling stuff in Xero manually...
- Fix: Scheduled Task: CheckUnassignedMemberAccountCreditTask  - SQL Query - Should use sum(kol.quantity) instead of count.
- Add: ScheduledTask: CheckUnassignedMemberAccountCreditTask - checks for any Member Account Credit orders that are not assigned to a customer.
- Add: ClubCMS: Third Party Join Generic control: work in progress
- Fix: Live: POS: Fix ticket #13097.
- DotGolf.Shared: I've added a new source file KountaCustomerCache.cs but forgot to commit the .csproj.
- Add: Live: Kounta: Store non-member customers in Redis. Mod: Live: Kounta: Added support for "customer/created" and "customer/deleted" web hooks in Kounta/CustomerUpdate.ashx handler.
- Add: ClubCMS: Third Party Join Generic control: initial commit
- WHSAPI: Do they want a semicolon in RuntimeIdentifiers?
- WHSAPI: LinuxX64.pubxml apparently needs UseAppHost.
- WHSAPI: MSBuild is being silly (https://devblogs.microsoft.com/visualstudio/incorrect-solution-build-ordering-when-using-msbuild-exe/) so we needed a reference to the Data project from Core, even though we don't use it in managed code.
- WHSAPI: More build pain.
- Mod: Live: Functions:
- WHSAPI: LinuxX64.pubxml
- WHSAPI: Fix: SelfContained publish needed for linux
- WHSAPI: Add Courses/Organisations endpoints; although not quite happy with the way this is working just yet.
- WHSAPI: Docker/Linux deployment.
- Fix: Live: Settings: Removed setters and uses of Settings.Vend.GSTUID, as per its Obsolete message
- Mod: Live: Checkout: Refactored dotgolf.checkout.x to not call SupportedPaymentTypeCodes 3 times
- WHSAPI: Cleanups, added IModel interface.
- Fix: WarehouseBuilder: Fixed(?) NUnit Nuget package reference by downgrading it to the same version as shared :(
- Fix: Live: POG: Group Booking - Fix ticket #13021. Timeslots (initially hidden from public) are getting displayed in the public site after being released from a group booking. Add: SQL: TBGroupTimeSlot - Added two columns to store the selected timeslot's initial settings - (1) TimeSlotAllowBookingsPublic and (2) TimeSlotAllowBookingsMemberTerminal.
- Fix: WarehouseBuilder: Fixed(?) AWSSDK.SimpleSystemsManagement Nuget package reference
- Fix: WarehouseBuilder: Fixed Dapper Nuget package reference
- Fix: WarehouseBuilder: run NUGET RESTORE in Jenkins instead of reading dlls from packages folder in svn. Removed packages folder.
- Fix: WarehouseBuilder: NUnit dll now comes from Nuget, not a dll in svn
- Fix: Shared: Repair ClubCMS after file move of Vend api objects from Data/Vend into BusinessLogic/Vend/API.
- Fix: Shared: Repair Public.2012 after file move of Vend api objects from Data/Vend into BusinessLogic/Vend/API.
- Mod: Shared: File move of Vend api objects from Data/Vend into BusinessLogic/Vend/API.
- Add: Live: POS: PosWebService - Added method to search Kounta products from Redis cache.
- Mod: Removed NUnit tests (long defunct) from Org and also removed Nunit.framework reference.
- Mod: Reverse Proxy: added -,-,0,1,cobrapuma.cw.golf.co.nz S,W,0,1,cobrapuma.golf.co.nz
- Mod: ClubCMS: bindings: added: cobrapuma.cw.golf.co.nz cobrapuma.golf.co.nz
- Mod: Reverse Proxy: removed -,W,0,1,holdenclubhouse.co.nz, and added the following: -,-,0,1,clearwater.cw.golf.co.nz -,-,0,1,waitikiri2.cw.golf.co.nz -,-,0,1,russley.cw.golf.co.nz -,-,0,1,russley2.cw.golf.co.nz -,-,0,1,waimairibeach2.cw.golf.co.nz -,-,0,1,remuera2.cw.golf.co.nz -,-,0,1,pakuranga.cw.golf.co.nz
- Mod: ClubCMS: bindings: removed "kenith" urls, and added the following: russley.cw.golf.co.nz russley2.cw.golf.co.nz waimairibeach2.cw.golf.co.nz remuera2.cw.golf.co.nz pakuranga.cw.golf.co.nz
- Mod: ClubCMS: bindings: removed holdenclubhouse.co.nz, added clearwater.cw.golf.co.nz, added waitikiri2.cw.golf.co.nz
- Mod: ClubCMS: Member Signup: updated the payment summary membership fee description; if the member is paying by instalment, there is no need to show the description
- Mod: ClubCMS: Member Signup: text update, and correct the required upfront amount (required upfront amount + first month of instalment)
- Fix: Nunit reference for MSBuild 15.
- Mod: Fixed NUnit reference problems; MSBuild 15 wouldn't build the solution.
- Fix: Levies invoicing from Org was still using the old method of Xero API access where we had the private cert lying around in the bin folder.  Changed to use SSM instead like we do in other places.
- Fix: Live.Tests: Jenkins build actually fixed by cleaning up after undoing the PackageReferences change to DotNet.Live.Tests
- Mod: ClubCMS: My Account: fix previous commit
- Fix: Live.Tests: Jenkins build fixed by removing PackageReferences from DotNet.Live.Tests
- Jenkins: Bump Dashboard.aspx.cs version - Not sure why AttendeeStats property is not included in the LoadDashboardResponse.
- Fix: Live: Functions: Dashboard - missing property AttendeeStats from DashboardBookingRec class.
- Add: Live: Functions: Dashboard 1) Add breakdown of the entries and unpaid registrations per source. 2) Add a back link when user views the Current Attendees Report.
- Mod: ClubCMS: Member Signup receipt: text updates
- Mod: ClubCMS: Member Signup: display number of months for cyclical categories
- Mod: ClubCMS: Member Signup receipt: added back club name
- Live: POS: Rename of VendWebService.asmx to PosWebService.asmx is now complete
- Fix: Live: POS: Revert accidental commit to Standard.Master.cs containing premature Kounta POS integration
- Mod: Live: POS: Renamed VendWebService.asmx to PosWebService.asmx (hopefully retaining file history...). Correctly added moment.d.ts
- Mod: Live: POS: Renamed VendWebService to PosWebService to prep for Kounta integration. Replaced old date.js usage with moment.js in POSViewModel-2018.
- Mod: ClubCMS: Member Signup: style improvements
- Mod: ClubCMS: Member Signup: text update
- Mod: ClubCMS: Member Signup: text and style improvements
- WHSAPI: 9 hole handicapping; no combined scores yet though.
- Mod: ClubCMS: Member Signup Confirmation: minor style improvements
- Mod: Live: Functions: Dashboard - minor UI mod.
- Mod: ClubCMS: Member Signup: minor style improvements
- Mod: ClubCMS: Member Signup: minor style improvements
- Mod: ClubCMS: rEventRegistration: Functions Online Registration - Styling and some minor UI fixes.
- Mod: Live.Tests: Added NUnit as a nuget package. Moved dapper and nunit to PackageReference tag in the csproj
- Fix: DropExisting should be off in 2648 IX_KountaOrder_id.sql
- Fix: Live: Reporting: Member Account Balances for 18 Hole Rounds have the correct unit (rnds). Added AXCurrencyFormatter to handle it.
- WHSAPI: HandicappingConfig introduced to track discretionary items per association/district.
- Add: IX_KountaOrderPayment_KountaOrderId_number for performance.
- Add: Index for performance.
- Fix: Performance: KountaOrder table should be filtered by ClubId too; we can't guarantee that Kounta's order_id values are unique worldwide.
- [Already in Prod] Mod: Included [AutoResignAtEndOfSubscription] in the cmemberbyclubid_nzgacategory index to speed up the subs summary chart query after a recent mod.
- Mod: ClubCMS: My Account: allow non-affiliates (e.g. social members) to update or cancel their membership too
- Mod: ClubCMS: My Account: allow non-affiliates (e.g. social members) to pays their subs online too
- Fix: #12930 In Support, if the main textbox contains "dangerous characters", it's encoded before sending it to the server.
- Mod: ClubCMS: My Account: allow non-affiliates (e.g. social members) to pays their subs online too
- Mod: ClubCMS: Member subs payment email receipt: text update
- Mod: Tournaments: Mobile scoring: Added full-stops to 2 user messages.
- Mod: Tournaments: MobileScoring: Leaderboard still visible after scoring is done. 'Continue' button visible above the fold on iPhone 5
- WHSAPI: When posting/updating backdated score (past PlayedAtUTC) we roll forward the handicap calculations and update the AdjustedGross, HandicapIndex and HDPreCCA values for scores from that point to present. Add: Organisation.Type column to store Club/District/Association.
- WHSAPI: Renamed Club table to Organisation so that we can use the OMember pattern in this database instead of the traditional one in NZ1. Mod: TimeZoneId moved to Course instead of Club since clubs can be virtual and extend across timezones.
- Add: Org: Clubs: Deleted club option for Club Details page. Hide deleted clubs from club combo-boxes.
- WHSAPI: Moved from PlayDate (date) to PlayedAtUTC (datetime in UTC).  This change was necessitated by the fact that we need to be able to order scores (on a particular date, for a player) chronologically when editing them.  If we can't determine which order they were played, we can't know which handicap index to use for each score.
- Mod: Live: Functions: Display functions navigation breadcrumb to DotGolf-users only.
- Fix: ClubCMS: Functions Online Registrations: Main registrant's contact no. was not saved during registration. Mod: ClubCMS: Functions Online Registrations: Set each registered attendee's status to Paid if online payment is successful.
- Mod: Live: Functions: Online Registrations
- Mod: ClubCMS: rMemberSignupConfirmationV2: updated the payment successful message for users who enter a previous membership number
- Add: Tournaments: MobileScoring: Added tabs to the Scoring pane, can now view leaderboard while you're scoring.
- WHSAPI Fix: When editing a score, don't include the score itself in the handicap calculation to determine its own Course Handicap.  This will still be a problem; we will likely need to ask clients the full playdate+time so that we can order them - in case someone decides to play 4 9H rounds and edit one of them... Add: Soft and Hard handicap caps introduced. Add: Penalties for exceptional scores are now applied to your handicap index.
- Mod: ClubCMS: Member Signup: text updates
- Mod: ClubCMS: Member Signup: note / text updates
- Mod: sql: CWControlProperty inserts
- Mod: ClubCMS: CWMembershipApplication: added MembershipEndDate
- Mod: ClubCMS: Member Signup: updated the receipt format, added the transaction fee, corrected the membership end date used to create the cmemberitems and which is also indicated in the welcome email
- Mod: sql: CWMembershipApplication: add MembershipEndDate
- Mod: ClubCMS: Member Signup: updated payment note, display the remaining number of months/days (for periodic categories)
- Mod: ClubCMS: DBUtilities: GetValidClubCategories: corrected the returned MembershipStartDate value
- Mod: sql: Live: modified the Required Upfront Amount data type from decimal to money
- Mod: ClubCMS: Member Signup: show full amount note for periodic categories
- WHSAPI Add: CourseConditionsAdjustmentCalculator.
- Mod: ClubCMS: Member Signup Confirmation: updated the note, corrected the category details pulled
- Mod: ClubCMS: Member Signup: updated the note in the membership and payment details section
- Fix: ClubCMS: DBUtilities: GetValidClubCategories: corrected the Membership Start Date for cyclical categories
- Add: Live: Settings: Functions - added link to the /Functions/Settings/Settings.aspx. This link is only visible to clubs that has FUN, KOUNTA and XERO products.
- Add: Live: added /Functions/Settings/Settings.ts file but did not commit the DotGolf.Live.csproj. Jenkins should be able to generate the .js file now.
- Mod: ClubCMS: Members Signup v2: hide "Full Membership Amount $X" if the member is paying the full amount. Display "Required Upfront Amount" instead of "Initial Membership Fee" when the user is asked to pay the required upfront amount
- Mod: ClubCMS: Member Signup v2: corrected the column source of the credit card transaction fee from "SubsCreditCardTransactionFee" to "MembershipApplicationCreditCardTransactionFee"
- Mod: Live: Functions: Bump Settings.ts version by adding a one line comment to the source file.
- Fix: Live: Subs DD File Hash Total: the hash total must be 11 digits, if the hash total is less than 11 digits, we need to retain the leading zeros.
- Mod: Tournaments: MobileScoring: Next button no longer shows for last hole, Finish button, scoring UX cleaner at mobile resolutions
- Mod: ClubCMS: Member Signup and My Account: Credit Card Transaction Fee: If isTransactionFeeInclusive is true, then transaction fee is zero. Otherwise, query from the NZGreenFeeData table
- Add: Live: Functions: Settings - missing typescript file. Ignored generated .js and .js.map files.
- Fix: Shared: Passport: GetFullName no longer errors for Resigned Members and Deleted NonAffiliates #12951
- Mod: AdWeb: EditClubProducts: Functions - We no longer insert an "FUNC" AXAccountType to the AXAccountTypeClub table. Instead, this will be configured in the Functions/Settings/Settings.aspx page.
- Add: Live: Functions: New setting "XeroAccountCode" for Functions.
- Add: Live: Functions: Store Functions Xero account code in Setting table. Add: Live: Functions: Settings page to allow user to (1) Disable Kounta and Xero integration. (2) Set which Kounta register to post functions sales. (3) Code functions sales to Xero account code (we used to configure this in Accounts and Loyalty). (4) DotGolf section to enable online registrations - for now its dotgolf-only until we officially release online registrations to clubs. Add: SQL: Script to move FUNC Xero account code from AXAccountTypeClub to Setting table.
- Mod: Org: PGA Trainee OOM: updated the way the Year dropdown is being populated
- Fix: Live: POG: Filtering course changes the current time indicator, 'Called' checkbox css includes course cell and group booking cells
- WHSAPI Mod: Moved to interfaces for most things around the Handicapping core. Added a few more tests for fringe cases around 13 holes played.
- FIX: Live: POG: (Course filter/Show Fully booked slots/Show Group slots) all work together
- Add: Live: POG: Can filter timeslots by their course (e.g. for Wainui)
- WHSAPI: Changed some data types, refactored some stuff.  Added adjusted gross calc for score POST. Nine hole scoring not handled properly yet. Should have a set of interfaces to pass into the Handicapping core.
- Mod: sql: add ItemStartDate to the SubAutoRenewalRetry table; this allows us to group the attempts (i.e. for which sub period or date it is)
- Mod: Transaction Processor: SubscriptionRenewal: added ItemStartDate to SubAutoRenewalRetry; this allows us to group the attempts (i.e. for which sub period or date it is)
- Mod: Transaction Processor: Auto renewal / billing: updated the email content (text, proper casing, style); insert a member note about the email sent
- Fix: Org: removed the "Is this a joint competition with PGA?" checkbox because this is unnecessary; it isn't even editable; a CompetitionAssociation record is inserted when the "Link Competition" procedure is done.
- Fix: Org: Tournament List: added the condition "ca.DeletedDate is null" to exclude soft deleted CompetitionAssociation records when joining with that table
- Mod: ClubCMS: Functions: rEventRegistration: Include main registrant's e-mail and handicapIndex during registration. Mod: ClubCMS: Functions: rEventRegistration: Member search results - display names in proper case. Added "Clear" link button to clear the member search results.
- Fix: ClubCMS: BindTournaments: exclude soft deleted CompetitionAssociation records (there were two c.DeletedDate is null conditions, so one of them was probably meant to be "ca.DeletedDate"). I need this corrected because I'm investigating a concern reported by the PGA.
- Mod: Live: Functions: Attendee Registration - Display attendee's hdcp indx. Changed "Paid" background color to green. Fix: Live: Functions: Attendee Registration - Contact and email info not taken when updating affiliated/non-affiliated visitors.
- WHSAPI: Ability to post and delete scores.
- Mod: ClubCMS: Functions: Calendar.asmx - Return function events in the calendar if Online registrations is enabled. Mod: ClubCMS: Functions: rEventRegistration: Change "Title" to "Gender" (i.e. Male, Female) instead of "Mr" or "Ms". Mod: ClubCMS: Functions: rEventCheckout: Call EnsureUserHasAccess() to verify that the current logged in user owns the registration. Add: ClubCMS: Helpers.cs - Added helper method GetPassport from the current user's session.
- SQL: TBTransaction: CK_TBTransaction - identifier exceeds the max limit of 128 characters if I add "XOR_EntryId" so I am retaining the identifier as CK_TBTransaction_MemberId_XOR_NonAffiliateId_XOR_OrderId_XOR_RegistrationId_XOR_ProcessedByUserSecurityId_XOR_TXHeaderUID.
- Fix: BKFunctionBookingAttendee: Emailed column was already added in SQL script no. 2628. Should not be in here in the first place.
- Mod: Live: Functions: Booking.aspx - Make navigation breadcrumbs DotGolf-only. This will eventually displayed when we are going to release online registrations.
- Mod: Live: Functions:
- Mod: ClubCMS: Member Signup: minor style update
- Mod: sql: api_UpdateCategory and api_AddCategory: added the new column, RequiredUpfrontAmount
- Mod: Live: Category Setup: added RequiredUpfrontAmount (this value will initially be used on the ClubCMS member signup form, but in the future, we would  also probably apply it to the DotGolf Live Subs invoicing)
- Fix: #11758 Social members should not count towards the membership totals on golf.co.nz/Club Details.
- Mod: ClubCMS: sql: CWMembershipApplication: add ProrataBaseSubAmount
- Mod: ClubCMS: rMemberSignupV2: style update
- Mod: ClubCMS: GetValidClubCategories: return CategoryFullAmount (sum of all the category items for the current period)
- Mod: ClubCMS: rMemberSignupV2: display full category amount; updated some text to indicate membership fee is prorated
- Mod: ClubCMS: rMyAccount: put back display of existing billing card (mistakenly removed in the last commit); updated some text; handle Payment Express logo and transaction fee display for billing card payment method; redirect the user to the login page if the user isn't a logged in member
- Mod: Reverse Proxy: apply https to standrews.co.nz
- WHSAPI: Fix: Left an old reference lying around.
- WHSAPI: Work around ability to get/update club members, specifically solving a lot of issues around serialising Enum values through WebAPI. The winning formula seems to be JObject for now (and had to write a custom IParameterFilter to keep the Swagger docs looking okay)
- Mod: ClubCMS: rMemberSignupV2: corrected the required upfront amount display; updated the test values
- Mod: ClubCMS: rMemberSignupConfirmationV2: consider the upfront payment required when trying to pay again; update the membership fee text / label
- Fix: Live: Category Settings: fixed typo / removed unnecessary question mark
- Mod: TransactionProcessor: added SubscriptionInstalment: this will be used for processing subs instalment payments for members who signed up and paid online on a monthly schedule, using their billing card
- Mod: ClubCMS: Functions Online Registration: Send an email notification after successful payment to the (1) main attendee and (2) club manager.
- Mod: ClubCMS: Member Signup: save prorata base sub amount, use this when creating the cmemberitem
- Mod: Live: Functions: RegisterAttendee - updated logic to check if an attendee is eligible to register.
- Mod: Live: Functions: Online registration.
- WHSAPI: Upgraded to Dapper 1.50.7. Refactored members/{guid} to use Poco CopyFrom() Changed database name template to make it easier to order chronologically in SSMS.
- WHSAPI: Timestamp mode for club member retrieval - gets all members changed since a point in time.
- WHSAPI: Test added to ensure ISVs don't get data for other clubs. Fix: error when no records are returned from SQL.
- WHSAPI: members/club/xxx endpoint to allow retrieving the full member details for all members at a club (as long as the club is linked to the ISV)
- Mod: Reverse Proxy: apply https to waitikirigolf.co.nz
- Fix: ClubCMS: rEventRegistration: Entry fee is incorrect for Non-affiliate guests - "$0.00" gets displayed instead of the actual fee.
- Mod: ClubCMS: Functions: Fix Jenkins build error - missing file BKEntry.cs.
- Fix: Jenkins build error. TopUpAccount.ascx should not been part of the previous commit svn no. 31493.
- Mod: ClubCMS: Functions Online Registrations
- WHSAPI: Refactoring around member search, implemented the beginnings of club member listing.
- Mod: ClubCMS: rMemberSignupV2: prorata membership amount for periodic categories; updated displayed payment information
- WHSAPI: Member search endpoint is now working with basic filtering. - IPagedResponse<T> implemented so paging is now an API feature, done in a centralised way. - Better error logging in unit tests for 500 Internal Server Errors. - All dates that are in UTC now have UTC in the name (to make us keep that in mind when dealing with this API project)
- WHSAPI: Members search endpoint (stub) Mod: Test database is now pristine at the start of each test.
- WHSAPI: Switched to AsyncPoco (from PetaPoco) - best to get this stuff async from the get-go.
- WHSAPI: Removed net461 reference.
- WHSAPI: RuntimeIdentifier tweaks.
- WHSAPI: RuntimeIdentifier tweaks.
- WHSAPI: RuntimeIdentifier tweaks.
- WHSAPI: Added RuntimeIdentifier per https://github.com/dotnet/sdk/issues/1321 to keep Jenkins/dev1 happy.
- WHSAPI: Added RuntimeIdentifier per https://github.com/dotnet/sdk/issues/1321 to keep Jenkins/dev1 happy.
- WHSAPI: Moved back to .Net Core 2.1, got rid of the DAC requirement by executing SQLPACKAGE.EXE out of process.
- WHSAPI: Add publish profile so Jenkins can use this.
- WHSAPI: Okay, now Web.config is getting in the way.
- Mod: sql: added new columns to Category (RequiredUpfrontAmount) and CWMembershipApplication (RequiredUpfrontAmount, FirstInstalmentDate)
- Mod: ClubCMS: rMemberSignupV2: if the category has a RequiredUpfrontAmount, then this is what a monthly member will pay upon signup. The balance will be divided by the number of months (starting the following month); there's a note on the signup form saying how much their succeeding monthly fee will be.  I've also done updates on the transaction fee, basing it on the existing models (e.g. PGA membership payment and Takapuna membership signup), wherein the standard 5% is computed by the slicer.
- Mod: ClubCMS: DBUtilities: updated GetValidClubCategories; added FirstInstalmentDate and RequiredUpfrontAmount
- WHSAPI Add: Web.config to kick ASP.NET Core into gear.
- Mod: ClubCMS: rMemberSignupConfirmationV2: use the Upfront Payment Amount when creating the invoice
- Mod: ClubCMS: CWMembershipApplication: added RequiredUpfrontAmount and FirstInstalmentDate
- WHSAPI Mod: Generate XML doc file into the right dir.
- WHSAPI Mod: Generate XML doc file into the right dir.
- WHSAPI Mod: Generate XML doc file into the right dir.
- WHSAPI Mod: Generate XML doc file into the right dir.
- ASP.NET Core is going to make me cry :(
- ASP.NET Core is going to make me cry :(
- Add: IIS needs Microsoft.Extensions.DependencyInjection.Abstractions
- Add: IIS needs Microsoft.Extensions.DependencyInjection.Abstractions
- Add: IIS needs Microsoft.Extensions.Configuration and Microsoft.Extensions.DependencyInjection.Abstractions.
- Add: IIS needs Microsoft.Extensions.Configuration
- Add: IIS needs Microsoft.Extensions.DependencyInjection.Abstractions
- WHSAPI: Try to get dev1 working with this.
- WHSAPI: Try to get Jenkins happy with this.
- WHSAPI: Try to get Jenkins happy with this.
- WHSAPI Add: Web.config and some Kestrel settings.
- WHSAPI: Try to get Jenkins happy with this.
- WHSAPI: Try to get Jenkins happy with this.
- WHSAPI: Whoops, missed one.
- WHSAPI: Mod: sqlproj now builds into bin/
- WHSAPI: Removed EzPoco.cs as build should generate that. Fix: Removed EnvDTE dependency from EzPoco as Jenkins wasn't happy with it (and we don't need it anyway)
- WHSAPI: Initial commit.
- Add: Initial WHSAPI project.
- Mod: Updated comment only.
- Fix: Live: Club Tags: POG - Fix #12805. This mod ensures that the tags container is emptied first regardless if a player has tags.
- Fix: Live: Club Tags: SCA/POG - Do not show the tags for resigned members. Fix: Live: Club Tags: Added the ClubId filter on the WHERE clause in Category.SetClubTags().
- Mod: Had to bump some package versions up to the latest as VS2017 on Marcus's PC wouldn't build ConnectorAPI out of the box.
- Mod: ClubCMS: rMyAccount: updated the Secure Online Payment Section; displayed a payment summary table; removed postback from the payment method radio button selection.
- Mod: ClubCMS: rMemberSignupV2: moved GetValidClubCategories to DBUtilities.cs
- Mod: ClubCMS: DBUtilities: added GetValidClubCategories - used by the rMemberSignupV2 and rMyAccount controls
- Mod: Love Golf Play: banner update
- Mod: ClubCMS: rMemberSignupV2: minor style update
- Fix: Should not allow manual adjustments to be coded to Xero bank accounts; only GL accounts are allowed for these.
- Mod: Allow selecting liabilities for the competition fees account.
- Mod: golf.co.nz: removed the Holden logo as requested by Matt Q
- Fix: ClubCMS: revert previous changes. Moved the insert into TBMember table to ClubMember.cs, where the member/cmember, passport/passport credential are also created for Flexiclub members.
- Mod: ClubCMS: Member Signup: after a successful signup and payment, insert a record into TBMember. (Normally, this happens when a member registers for an online account. But since we are registering (i.e. PassportCredential) the member after a successful signup and payment, then we need to insert their TBMember record at this point.)
- Mod: ClubCMS: Disable functions events from the club calendar events.
- [MAJOR] Results refactor to Results internals: Removed DataSet and DataTable usage, replaced with ScoreRec POCO. Mod: Split Result.cs into Result.cs and Result.GetResults.cs to move the GetResults() method into its own file.
- Mod: Moved to NUglify instead of YUICompressor because of errors encountered while compressing Typescript output.
- Fix: ClubCMS: rEventRegistration: fix the display of the comp registration total amount (this is a display issue only; the checkout page shows the correct amount)
- Mod: Upgraded to YUI Compressor v2.7 to see if it no longer has a problem with Registration.js.
- Mod: Concatenate error handling improved so we can see what's going on with Registration.js.
- Mod: Stop admin from saving pro commission percentage changes if there is a ProCommissionPercentage value set in Slicer. This is to avoid the situation where a club removes the commission and we don't update slicer (continue to pay the pro) Fix: Typo.
- Add: svn:ignore generated .js and .js.map files.
- Add: Adweb: Call Log shows username now and keeps the original username when an edit is saved.
- Mod: PushNotifications: Added debug logs. Seems to work on my PC but in prod it is not updating the MobileDevice.DeletedDate and LastExceptionLogId columns if the exception type is Amazon.SimpleNotificationService.Model.EndpointDisabledException.
- Mod: golf.co.nz: My Profile: region name is based on Member.RegionId, but if this is zero, base this on the home club region. Side note: Member.RegionId of golf club members (i.e. excluding virtual clubs like PGA and Flexiclub) gets updated by a daily job ps_updrank. Member.RegionId gets updated to the home club region ID.
- Fix: golf.co.nz: handle zero Member.RegionId
- Mod: IX_ScoreCard_ClubId_Printed_Virtual_Deleted_PrintExceptionId_ScoreCardId_DateCreated included a few columns to cover live_GetScoreCardPrintQueue.
- Add: Index for live_GetScoreCardPrintQueue performance.
- Mod: Performance: Marginal performance improvement around checking for blocked friends.
- Mod: IX_TXLine_ScoreCardId_DeletedDate added DeletedDate column into index to speed up unpaid scorecards query: { select count(distinct sc.Id) [UnpaidScorecardsAtClub] }
- Mod: Included CreateDate in TXLine_TimeSlotEntryId index to avoid key lookups in POG load query.
- Mod: Performance: Should always filter on RSResult.CompetitionId to make best use of indexes.
- Fix: Live: wa_deletemember: when resigning a member, we should only set the Date_Resigned value of the active record (and not overwrite the Date_Resigned value of the member's other Cmember records for the given club)
- Mod: Discovered errors when customers are sent to us containing ampersands in their names (and this would have been a problem for products too).  This was due to incorrect URLDecoding happening on the x-www-form-urlencoded data.
- Add: Adweb: Missing js files (thought the package manager would pull these in)
- Add: Adweb: Call Log to allow support to jot down notes for club calls.  Still a few things to-do here (see TODO.txt) but the data capture is now functional.
- Fix: Error importing trial balance for GL accounts that are not present on the trial balance report.  Skip these without logging an exception.
- Fix: ClubCMS: rEventRegistration: Only show "Your Guests" panel if EventType is a function. Mod: ClubCMS: rEventRegistration: Re-arrange the fields to => Title, FirstName, LastName, Email, ContactPhone.
- Add: WarehouseBuilder: Covering index to speed up the agg_Score_Count aggregate build.
- Mod: Subs: Got rid of a ClubMemberInvoice view reference which was causing 4,000,000 reads when run in this context.
- Mod: aw_MergeCasualAffiliateMember will now update the Score.MemberId value to the new MemberId when merging casual and affiliated golfers.  Already in Prod.
- Mod: Live: Functions: Registrations - minor styling mod to display the appropriate gender icon.
- Add: ClubCMS: Functions Event Online Registration
- Fix: ClubCMS: rMemberSignupConfirmationV2: corrected the total amount to make it equal to the membership fee (we exclude the transaction fee)
- Add: Assembly redirects for new Redis.Strongname assembly.
- Mod: ClubMember: GetResignedMemberOrNonAffiliateIdBasedOnComputerNo (used by the ClubCMS member signup forms): update the script to return the existing MemberId of casual golfers who were club members before
- Mod: ClubCMS: rMemberSignupV2: differentiate the renewal amount to be paid (e.g. some clubs, like Flexiclub, have one off items which must be excluded)
- Mod: ClubCMS: rMemberSignupV2: minor style updates (button and payment summary table)
- Mod: API: BulkEmail: SendEmailCompose: just added "http://" to the onlineHost and onlineContentHost urls
- Fix: BulkEmail: html decode the link (e.g. for ampersands to be just ampersands and not &amp;) before saving it in CWEmailComposeLink
- Mod: API: BulkEmail: CreateNewTemplateFromSent: include the existing AssociationId when creating a new BETemplate record using a sent item
- Mod: Bumped Adweb to .Net 4.6.1.
- Ignored packages folder.
- Mod: Removed /packages folder from Adweb; this should be taken care by Jenkins.
- Mod: Transaction Processor: SubscriptionRenewal: when auto-billing fails, notify the member so that he/she will take action. For response code 51, the message is shorter (we just inform the member about the response) and the action needed is implied. For the other response codes, we instruct the member to update the billing card (or ask their bank about the bank response text e.g. do not honour).
- Fix: Oops, committed Web.config change accidentally.
- Fix: ExtQuery: Crashbug when dealing with a null permission.
- Add: ExtQuery report designer is now functional enough to produce reports.
- Mod: golf.co.nz: CMember: RegionName: Members of virtual clubs like Flexiclub and PGA are geographically spread out.  We use Member.RegionId for them and not their club's region.
- Mod: ExtQuery: Better handling of parameter types.  This means that the window.history stuff is more reliable across all parameter types.
- Cleanup: Converted inline comments to XML comments so they show up in VS intellisense.
- Add: CategoryRoundManagement AssetGroup to allow us to quickly determine whether a club is using Round Management.
- Mod: ExtQuery: Navigation improved by using window.history to replace state when the report is rendered.  This way we can drill through to other pages/reports, hit the back button and we'll get back to the report without having to re-post the form.
- Fix: ExtQuery: When chaining formatters using MultipleFormatters the output was always rendered as text.  Now it'll render out HTML if the last formatter in the chain is an IHtmlFormatter.
- Add: ExtQuery: TextParameter to allow simple text values to be passed into a query.
- Fix: ExtQuery: If you try to add a total column to a report when the source column has a HyperlinkFormatter on it, an ORNS exception is thrown.
- Mod: Shared: Data: Club: added IsVirtual (which is an old or existing column in the Club table)
- Fix: Public: Account: Fix #12617 - Member top-ups via golf.co.nz not getting credited to their House account. Added null-conditional operator before accessing AXAccountTypeClub.AccountTopupPrices. Add: Public: Account: (1) If the User-Agent string is "PXL1" that means its a DPS Post request. (2) Log the exception before redirecting to "PaymentException.aspx" page.
- Fix: Live: Functions: Booking form is not loading due to missing JavaScript reference to the /Functions/Dashboard.js.
- Fix: Jenkins build error - forgot to include from previous commit rev. 31357.
- Add: Live: Functions: Event registrations - initial import.
- Fix: Ex-AXAccountPassportClub: method signature issue stopped Public build.
- Fix: Ex-AXAccountPassportClub: method signature issue stopped Public build.
- REINTEGRATED Ex-AXAccountPassportClub mod from branch.
- Fix: Live: Functions: Related to #12067 - A knockout binding error occurs when you click on the "New Customer" button from the function booking form.
- Mod: TransactionProcessor: SubscriptionRenewal: when getting the retry count, limit the query to the past 30 days only. (We should only count the retries from the past 30 days.)
- Mod: sql: PGA OOM: If it's the current year, return all members, regardless of the number of events. Otherwise, return members with 8 or more events only.
- Mod: Transaction Processor: SubscriptionRenewal: just updated the text in the email that is sent to the member when auto billing retry attempt has maxed out
- Mod: Transaction Processor: SubscriptionRenewal: just updated the text in the email that is sent to the member when auto billing retry attempt has maxed out
- Mod: Transaction Processor: SubscriptionRenewal: 1. Insert a note into PassportNote table (with false Alert flag) when a payment is declined. This allows admins to easily check why a transaction failed / check the payment attempt history. 2. I've also adjusted the retry schedule: a) added a fifth retry, and b) adjusted the number of days between the first and second retry
- Mod: Undo: Jenkins doesn't like this
- Mod: Jenkins doesn't like this??
- Mod: TypeScript tools updated to 3.1 - my computer did this as part of a VS.NET update.  Fingers crossed this doesn't break anything...
- Add: Maximum Score setting for Gross and Net competition types, including competition result calculation mods.
- Mod: Org: CompetitionTab_Basic: save the AssociationId when creating a new competition.  This is an unused existing column in the Competition table. (We check Competition.AssociationId in checking player eligibility in PGA competitions.)
- Mod: Task: CheckForMismatchesOnFinalisedTakingsTask: Minor styling issue. Mod: Task: SyncFunctionBookingFNCustomers: We no longer have to create a FUNC account for a functions customer to be able to send an invoice to Xero - As long as the Xero integration is enabled and the function clearing account is configured (under Accounts and Loyalty settings), user should be able to send a functions invoice.
- Fix: Live: Functions: Fixes Jenkins build failure.
- Fix: Live: Functions: Fix to allow user to add essential contact details like (address, city, postal code) for a new function customer (click New Customer) from the Booking form.
- Mod: ClubCMS: sql: CWControlProperty inserts
- Fix: ClubCMS: rMembershipForm: just removed an extra space
- Mod: ClubCMS: rMemberSignupV2: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Mod: ClubCMS: rMemberSignup: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Mod: ClubCMS: rRegistrationCasualGolf: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Mod: Live: Functions: Ticket #12067 More customer details in on the Functions invoice in Xero. Mod: Live: Functions: We used to check if the functions customer has a Functions AX Account with DotGolf when sending an invoice to Xero - we no longer do that now; As long as the Xero integration is enabled and the function clearing account is configured (under Accounts and Loyalty settings), user should be able to send a functions invoice.
- Mod: ClubCMS: rMembershipApplication: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Mod: ClubCMS: rMembershipForm: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Mod: ClubCMS: rContactForm: added new control properties for the Recaptcha Site Key and Secret Key.  We need these dynamic because we can't use the same keys for all sites (a key set could only used in up to 50 domains)
- Fix: AXAccount.LastTransaction value was retrieving the latest transaction by TranDate+CreateDate when it should have returned the latest inserted transaction record.
- Fix: Org: Draw/Publish.aspx: display the "Display draw on website(s)" checkbox--this was hidden for 5CC in the last commit (Rev ID 28061), which was supposedly for the SMS settings only
- Mod: ClubCMS: Flexiclub Welcome Email: removed the Toro Mower Challenge image at the footer
- Fix: Patch to make EmailViewer work even with incorrectly encoded links.
- Fix: Line endings.
- Mod: Connector: Updated to latest Sectigo codesigning certificate (valid for 2 years).  Note there is a HOWTO here: https://dotgolf.freshdesk.com/solution/articles/6000217336-howto-renew-connector-installer-code-signing-certificate
- Mod: PushNotifications: Added check if DeletedDate is null on the SQL Update query so it does not get overwritten if it's already set.
- Mod: Live: Just updated the ASB DD file guide URL to https://www.asb.co.nz/content/dam/asb/documents/banking-with-asb/2012/asb-fnb-file-formats-technical-guide-nov-2012.pdf
- Fix: API: TeebookingController: Fix #12505 - Unable to book as a guest user. Setting "FirstName" to NULL is no longer sufficient to prevent inserting a new non-affiliate when calling TeeBookingHelper.ApplyBookingChanges – the rule for inserting new non-affiliate has been updated in SVN 31249.
- Mod: Task: Before we turn on the web hook for Kounta Reconciliations in Live, set it to an internal e-mail address first (set to kenneth@golf.co.nz)
- Fix: Live: Member History with emails: handle null Email ID value
- Mod: Removed debug logs.
- Mod: Push Notifications: Added debug logs
- Fix: golf.co.nz: (related to the previous commit - rev 31297): put back change done on Revision ID 31199 for MyClubsSummary and My CompetitionsSummary.  It's just the MyScoresSummary that had to be fixed when scores weren't showing up on the My Golf Default page.
- Mod: Push Notifications: Mod to stop sending push notifications to disabled SNS endpoints. If a notification fails because the endpoint is no longer active, delete (soft) the MobileDevice registration associated with the push notification request.
- Fix: golf.co.nz: revert previous change as this affected viewing of member's page by the public (i.e. no scores, clubs, comps were displayed if the my golf page is being viewed by a public user). I've updated the Default page instead to hide the Scores, Comps and Clubs if the logged in user is an admin.
- Fix: Exception when scorecard is printed for a visitor (didn't cause any disruption luckily).
- Mod: sql: drop sp dg_BillingCardEmailNotification: won't need this sp anymore
- Fix: Corrected Adweb link for schema change (staging to stage)
- Mod: Changed the division count to the number of distinct players.  In theory they should be in the same division for each round.
- Fix: #12459 Casual golfers who have joined up as affiliated members (eg. to Flexiclub) are still showing as casuals in the Golf.co.nz search results.
- Mod: Live: Member History: updated commented code in the previous commit
- Mod: Live: Member History: "Include Emails Sent": include the signup confirmation emails (welcome email and receipt) and their IDs so that the Support Team could easily find out the Email ID and resend an email (through Adweb) if requested by the member.
- Mod: Live: Email ComposeV2 editor: added normal style
- Mod: Transaction Processor: SubscriptionRenewal: change first retry attempt to 4 days to give them time to update their card or pay off their debt.
- Fix: #12446 If you have a mixed gender comp and a 2 tee start the people starting off the back 9 got F9 cards printed in preprint.  This is because there was no 9 hole marker checking in the code that determined the marker in Auto mode for a mixed gender comp.
- Mod: sql: ClubCMS: rSlick Slider With Video control: logically delete the old property "YouTubeVideoCode"
- Mod: ClubCMS: rSlickSliderWithVideo: just renamed the new control property from YouTubeVideoHrefPopup to YouTubeVideoPopupHref; added YouTubeVideoSrc property (this replaces the YouTubeVideoCode property, which isn't used anymore)
- Mod: ClubCMS: rSlickSliderWithVideo: just renamed the new control property from YouTubeVideoHrefPopup to YouTubeVideoPopupHref
- Mod: ClubCMS: rSlickSliderWithVideo: YouTubeVideoCode was replaced with YouTubeVideoSrc
- Mod: sql: ClubCMS: rSlick Slider With Video control: add YouTubeVideoHrefPopup property
- Mod: ClubCMS: rSlickSliderWithVideo:
- Fix: ClubCMS: TeeBooking: Fix #11932 - User was able to select the player type option "Other" from the combo box for a slot that does not allow non-affiliates. Mod: ClubCMS: TeeBooking: Changed method name from RemoveMySelfFromOtherPlayerDetailOptions to RemovedCurrentUserFromPlayerTypeOptions.
- Add: Competition.MaxScoreMethod column.
- Fix: Transaction Processor: Subs autorenewals: oops, removing setting of "runResult.ErrorsReported = true" so that the logs won't be emailed to david@golf.co.nz just because there is a "dishonoured" or "insufficient funds" result.
- Fix: Live: Report: Fix #12414 - Unable to generate TeeBookingHistory report - encountered an exception when parsing the TBLog.UserName. Mod: Live: SQL: live_GetBookingHistory - minor mod to the NonAffiliate join (used to find out the details of the user who edited the booking).
- Fix: Live: when the club activates their Love Golf, update the flag in the Facility table as well.  This is used in the Love Golf site's find a golf facility control.
- Mod: #8805 Stop a course change from being approved twice by first checking the NZCRDataTemp.CompletedDate.
- Add: WarehouseBuilder: Index to speed up agg_Score_Count build (it filters by PlayDateId)
- Mod: Transaction Processor: Subs autorenewals: removed logging of failed transactions (e.g. do not honour, insufficient funds), retain exception logging only.  I get alerts on those failed transactions anyway, we don't want to cause confusion to actual exceptions (e.g. for tee booking, etc.)
- Mod: Export the current handicap index as well as the registered handicap index when you export registrations from an Org tournament.
- Fix: API: TeebookingController: Fix #11994. App user who is a member (Live) and a non-affiliate is unable to book on a timeslot that only allows affiliated members - even though the user is a full playing member.
- Fix: TeeBooking: Freshdesk Ticket #12043 - For clubs that has TBClubSettings.SeparateCoursesForTeeBooking turned on. Check which course to display the green fee special.
- Mod: #12315 If we find an existing PassportClubExternal record pointing to a different passport, delete it before inserting a new one.
- Fix: #12318 Do not allow administrators to delete the "import" user since this is used by our Xero import routines.  If they delete this user the automatic sync stops working.
- Mod: #11544 If a green fee was paid online we no longer allow the user to increase the green fee amount.  Allowing them to do this causes problems with online payment capturing.
- Mod: Live: Functions: Mod for #12068 - If a menu item has a $0.00 surcharge, exclude that item from the sales quote.
- Fix: NZCRData is already unique on MarkerId+StartDate-EndDate, so we don't have to join on CourseId.
- Fix: Live: POG: Updated rule for saving a new non-affiliate. If the user enters any contact details at all (like email or phone number) we should always save that, regardless of the name entered is "Visitor" or "Guest".
- Mod: Make all player names on the leaderboard black rather than having the links orange.
- Fix: #12275 If you print a card from the kiosk for a booking which was paid online, no sale was pushed through to Vend.
- Mod: Round Management: Updated TODO.
- Mod: Round Management: In SCA a flexi member without any credit should be considered out of category and charged a green fee.
- Fix: Live: Fix error failed to load booking history for a given timeslot - occurs when one of the bookings on that timeslot was created/updated by a Casual Golfer.
- Fix: Round Management: Incorrect sign on reprint scorecard charge transaction.
- Fix: Load balancing issue sorted in Competition Calendar control (which was using a local cache)
- Mod: API: TeebookingController: Code Maintainability - Extract the logic from the IsPayDuesAtNonTBPClub() method and use that line where applicable. It is easier to read through the code than wrapping it in a method.
- Mod: ClubUsers: Remove old unused SPs.
- Mod: Parameterised a query to help SQL generate nicer plans.
- Mod: ClubUsers: Removed INSERT that copies data from ClubUsers to UserSecurity.
- Mod: ClubUsers: Removed all references to the ClubUsers table from Adweb; we should no longer be using this table. Mod: Removed ExpressCDRequests - this is loooong gone.
- Fix: #12219 If carts get below 0, the system will allow further carts to be booked without restriction.
- Mod: Round Management TODO updated
- Add: Round Management: POG now has a balance warning top right when editing a FLEX member booking/card.
- Fix: API: TeebookingController: API /search-slots endpoint - Fix ticket #12242. Members of Non-TBP clubs are not able to book thru the app as they can't see any timeslots. Mod: API: TeebookingController: Non-TBP Club bookings - for bookings made at a Non-TBP club, we will set a $0.00 amount due per player so the app detects this as no outstanding dues and allows the user to save the booking and pay later at the club.
- Fix: Round Management: Only nuke the category object if the player is changing.
- Fix: Round Management: Avoid a race condition where the category is nuked off the player object after it is retrieved by the GetPlayerDetails API.
- Mod: Round Management: Show "please pay on arrival" when you're out of credits and booking online.
- Mod: Ignored TypeScript generated js and js.map files.
- Mod: Removed TypeScript generated js and js.map files.
- Fix: Member Account Credit and Cashout sent to Vend API with GST tax_id when they should have had the No Tax tax_id.
- Mod: sql: oom_GetStandings_Pga: exclude members who have less than 8 events; temp solution (they normally just want to do that at the end of the year; but otherwise, we display everyone)
- Fix: Live: Functions: Cleared the total amount and the entered reference from the previously sent invoice. Mod: Live: Functions: Minor styling changes on the table headers.
- Fix: Live: SCA: 1) Styling issue - tag overlaps the dropdown dialog when you’re editing. 2) Member's category tags were not displayed in SCA - added SQL query to retrieve the category tags.
- Fix: Live: Functions: Disable "Send Invoice" button to prevent the user from clicking again while the initial request is still in progress. Mod: Live: Functions: 1) Omit the Date field when creating a manual journal in Xero so this gets defaulted to the created date. 2) Removed line that makes a call to the Xero Contacts API.
- Fix: XeroSync: AXAccountTypeClub.AccXeroLastModified was never updated when it is null, leading to all bank transactions for the club getting imported over and over again.
- Fix: Xero Import ran twice for Gulf Harbour due to a deleted 'import' user causing a duplicated row.
- Mod: API: TeeBookingController: TIMESLOT_PUBLIC_BOOKINGS_NOT_ALLOWED - Slight mod to the error message.
- Mod: API: TeeBookingController: /load-slot-for-editing endpoint - Minor mods in displaying the players name on a booking created by an admin.
- Fix: API: TeebookingController: /load-slot-for-editing end point - Fix bug where an app user was able to cancel other players from a booking created by the admin on the same ticket. Removed this particular SQL CASE expression in line no. 1393 "OR (t.OwnerMemberId is null AND bte.TicketId = @TicketId)".
- Add: ClubCMS: bindings.list: northshore.cw.golf.co.nz
- Fix: ClubCMS: rename col-ad with col-hole; fixes ad-blocking of nearly the entire course tour control (reported by North Shore)
- Fix: API: TeeBookingController: Fix #12129 - A member (booked by an admin from a competition draw) was able to cancel a booking from a hidden timeslot using the app. Fix: API: TeeBookingController: Filter out members/non-affiliates whose privacy mode is set to 1 or 2. Mod: SQL: live_FindMembers_LiveOnly_Surname_Number.sql - include PrivacyMode column in the results so we can use this to filter out members whose privacy settings are turned on.
- Mod: golf.co.nz: oops, forgot to include this in the previous commit.
- Mod: golf.co.nz: use the FrontPageCMSSmallBanner control for the My Golf page sidebar advert image (which used to be hardcoded)
- Fix: Round Management: Category form AXAccountType combo wasn't quite working properly, causing exceptions when new categories were saved. Fix: Accounts/Loyalty settings: Should not be able to select accounts with null Exchange Rates for use with prizes or loyalty (at least for now).
- Mod: sql: api_AddCategory: added IsAllowOnlineSignup
- REINTEGRATED Remuera flexi membership (Round Management for Categories).  https://dotgolf.freshdesk.com/solution/articles/6000215993-introduction-to-round-management
- Fix: Mobile scoring wasn't poking the row into RSResultQueue, so the result never got generated in Release mode.
- Mod: Mobile scoring: This should not be in final mode since the scorers will walk with the groups.
- Mod: Love Golf Play: voucher logo update
- Mod: ScheduledTasks: SyncFunctionBookingFNCustomers: 1) Set schedule to run every 15 mins. 2) We now only sync customers that are not yet linked to a customer in Kounta (modified SQL query in the BKFunctionBooking.GetCustomersToSyncToPOS() method).
- Fix: Live: Functions: Fix #12066 - when sending a function invoice from DotGolf, when it appears in Xero it appears with the wrong date. The date in Xero is the previous date. When creating an invoice to Xero, we now omit the invoice date as this will be defaulted to the current date the invoice was created.
- Mod: Cache vend producs in Sync process (automatically expire them if the update webhook is called so we don't get stale data)
- Fix: When reversing competition fees from a vend sale, the profit centre is disregarded and the default competition fee product is used instead.
- Fix: API: TeebookingController: When user is both a member and a non-affiliate, we should only filter by MemberId and set NonAffiliateId parameter to NULL when making a query to the TBTransaction table to retrieve previous payments for a given TBTicketId.
- Fix: API: TeebookingController: Fix /apply-booking-changes end point where a CHECK constraint exception occurs during insert to TBTransaction table. Happens when a user is both a Member and NonAffiliate in the system. For this case, we should only set the MemberId column (to the current user's MemberId) and the NonAffiliateId column to NULL - MemberId always takes precedence over the NonAffiliateId.
- Scripted this job that I'm about to drop (commented out).
- Fix: If you reverse a competition fee, the default product is used.  This will likely cause problems with competitions using profit centres.
- Fix: ClubCMS: rEventCalendar, Calendar.asmx.cs: assign a start and end time to make the generic events (calendar table) valid and get displayed on the calendar as well
- Fix: SCA player info box should be top right, not clearfixed.  Not sure why we have never fixed this?
- Mod: LGPlay: banner update (Christmas)
- Fix: #12046 Sales do not always have scorecard IDs (eg. subscription payments) - this caused an ORNS error for Warkworth paying subs.
- Mod: ClubCMS: rMemberSignupConfirmation and rMemberSignupConfirmationV2: added SuccessMessage and SuccessMessageReturningMember public properties (NZG requested to update the message); renamed variable from isResignedMemberOfSameClub to isReturningMember
- Mod: ClubCMS: rMemberSignupV2: apply zero additional transaction fee for Flexiclub
- Add: Utility page that groups Vend sales between a date range into Sales Account Codes (and subtotals them).  Note that this is hidden and only useful for debugging purposes.  Because the page loads slowly this is best run in debug mode connected to Prod.
- Add: sql: dg_BillingCardEmailNotification: to be used in January 2019 to auto-email notify Flexiclub members due for renewal but with expiring credit card
- Mod: ClubCMS: Add billing card button: updated the button styling to make it stand out
- Fix: SyncFunctionCustomersTask: Wrap the call to SyncFunctionBookingFNCustomers with a try-catch so when an exception occurs synching function customers (for a given club), it does not affect the rest.
- Fix: NewtonSoft.Json package version mismatch. Updated DotGolf.ScheduledTasks project to reference NewtonSoft.Json v7.0.1 same as DotGolf.Shared project.
- Mod: Kounta: KountaSync - Commented the code that calls SyncFunctionBookingFNCustomers. The synching of function booking customers will now be executed as a scheduled task.
- Mod: Flash the "Add Customer" button in red if you add Member Account Credit but don't add a customer.
- Fix: Kiosk: Score Entry: Fix #12017 - Unable to enter score for team comp in the Kiosk. This mod should not have an impact on rev no. 28003 (for ticket #6690 - displaying team course handicap in the Kiosk).
- Fix: POS: In a sale with multiple scorecards the filtering wasn't correctly implemented, so a scorecard would get its green fees and cart fees reversed every time the sale was re-saved.  This caused sales in Vend with negative balance amounts, which in turn caused rounding errors in the Xero closure invoices.
- Add: Kounta: CheckForMismatchesOnFinalisedTakingsTask - New task to check for mismatches between the sales recorded and counted from the Finalised Takings in Kounta. An email notification is sent to the club if a mismatch is found.
- Mod: CheckForRoundingErrorsOnClosureInvoicesTask: Rounding error cutoff decreased to $2.00 so we'll get alerted when there are very small rounding errors too.
- Fix: golf.co.nz: only show the casual golfer membership number along with the name if the casual golfer is logged in, and viewing his own page.  Otherwise, don't display the casual golf membership no. (Viewing members remain the same as before - display the club name along with the name.)
- Fix: #11959: Live: handle "-1" cbMemberTag.SelectedIndex
- Mod: Live: Kounta Sync:
- Fix: Missing join caused hospitality levy credit to be posted to Functions accounts in addition to House accounts.
- Fix: Old secret in Jenkinsfile.
- Add: Lambda role for Prod.
- Mod: Transaction Processor: SubscriptionRenewal: just get for renewal guys today (not for yesterday anymore since we're using the retry table for that)
- Fix: ClubCMS: Content controls: fixed EditorWysiwygModeCss (CuteEditor can't parse the css files from remote sites, so we're using default styles within the site.
- Cleanup: Removed old unused Vend code.
- Mod: Competition fee and profit centre integration for DotGolf-Vend.  This mod consists of the following: - If a profit centre is selected in Competition Setup, the system will create a product for the profit centre in Vend and save its product_id for future use. - If profit centre account codes are updated in DotGolf, the competition products in Vend are automatically updated with the new sales account codes. - If the competition setup uses the default profit centre, we will use the default competition fee product in Vend.
- Fix: POS: Kiosk was not setting a CompetitionRoundId on the incoming Vend sale.  This meant that sale lines were created with "cr0" instead of a valid competition round id, which would have meant that the POS would not be able to identify it if someone requested to be removed from a competition.
- Mod: golf.co.nz: updated sponsor logo
- Add: Some sanity checks that write stuff to the DebugLog if we get a tax calculation incorrect.
- Fix: POS: If you remove a product from a POS sale the remove line had an incorrect tax value.
- Fix: POS: If a scorecard with a course fee was printed and paid for (by house account) from the kiosk, and you subsequently add another product to the card via the POS, when you completed the sale the scorecard had its course fee reversed and re-added.
- Fix: Performance issue in GetEntryAndScoreCounts() - now using RSResult.CompetitionId to take advantage of indexing.
- Fix: CheckForRoundingErrorsOnClosureInvoicesTask will only check clubs with both VEND and XERO products.
- Add: Scheduled tasks to look out for large rounding errors on Vend Closure invoices coming in from clubs.
- Fix: Missing packages.
- Fix: Another package path issue.
- Fix: Package path for Lambda in DotGolf.Shared.
- Mod: Removed TuesPechkin HTML-to-PDF package (which was causing havoc for us in Prod due to hanging after publishes) in favour of a Lambda function, htmlToPdf, which also uses WKHTMLTOPDF for the conversion.
- Fix: Typo in web.config.
- Add: Lambda: Some documentation on how to update the lambda code (since the process is not fully automated) Mod: Cleaned up the Jenkinsfile slightly.
- Add: New zip file.
- Add: New zip file.
- Mod: Lambda: Go back to original code since Zeplin doesn't support options - and now we know the problem was chmod +x.
- Mod: Lambda: send archive.zip instead of workspace
- Add: Lambda: Test ZIP file created on linux with permissions.
- Mod: Make executable
- Mod: Updated wkhtmltopdf
- Add: Lambda: New code.
- Mod: HtmlToPdf: Changed to another one - https://github.com/zeplin/zeplin-html-to-pdf
- Mod: Changed to wkhtmltopdf from https://github.com/zeplin/zeplin-html-to-pdf/blob/develop/wkhtmltopdf
- Mod: Lambda: Fix handler name (should be index.handler), and updated to latest wkhtmltopdf binary.
- Fix: Web.config reset to development environment.
- Mod: Correct narration for when an MJ is being sent for multiple account types (eg. Hastings with House Accounts + Gift Cards).
- Fix: Lambda: Jenkinsfile error.
- Mod: Lambda: Switched the way I'm identifying the tag because Jenkins doesn't let me do any operations before getting the Jenkinsfile.
- Add: Lambda: Credentials for sandbox deployment.
- Mod: HtmlToPdf: Work around the Lambda credentials thing.
- Mod: Live: Category setup page: added Allow Online Signup? option (only visible to clubs with SUBS + SUBSP + CW)
- Add: Live: allow-online-signup.htm help file
- Mod: Lambda deploy.
- Mod: Lambda deploy.
- Mod: Lambda deploy.
- Mod: Add lambda deploy line.
- Mod: sql: api_UpdateCategory: added new parameter: IsAllowOnlineSignup (default value: false)
- Add: HtmlToPDF lambda function (initial version)
- Add: Lambda folder.
- Mod: Live: Functions: Billing - disable "Save changes" button while posting an invoice to Xero.
- Mod: Live: Member Balances Report: add option to "Exclude Invoices on Instalment"
- Mod: Live: Functions: Billing
- Fix: Display error when in tournament score entry and entering scores for someone who started on a hole other than the first.
- Mod: ClubCMS: rMemberSignup: added IsCheckIfLiveMember property so we could turn off the checking if a member is a live member (Use case: closed clubs' members may still be live in the system e.g. Aviation and Featherston members)
- Mod: sql: CWControlProperty: insert new IsCheckIfLiveMember property for rMemberSignup control
- Mod: ClubSetting: PGA (907) and Flexiclub (700): update the EnableSyncReceiptToXero and EnableSyncInvoiceToXero setting for Flexiclub; EnableSyncReceiptToXero setting for the PGA
- Mod: XeroSync: use ClubSetting.EnableSyncReceiptToXero and ClubSetting.EnableSyncInvoiceToXero to determine whether to 1) export invoices to Xero 2) export receipts to Xero. The club IDs used to be hardcoded.
- Mod: ClubSetting: added two columns: EnableSyncReceiptToXero and EnableSyncInvoiceToXero
- Add: ClubSetting table: add new columns: EnableSyncReceiptToXero and EnableSyncInvoiceToXero
- Mod: Live: Functions: Functions Billing
- Add: Adweb: Bulk Delete Timesheets function.
- Fix: Reverted accidental commit to Web.config.
- Mod: DebugLog: Pretty print JSON, this was getting annoying. Add: "Copy to Clipboard" link to copy the original JSON.
- Mod: Scheduled Tasks: Initialise database connection earlier as we need it around for writing DebugLog entries.
- Fix: Performance optimised for the GetTeeSheetPlayerTags query: - Introduced TBBlockTimeSlot.ClubId filter instead of TBTimeSlotEntry.ClubId because of better index support for the former. - Changed from TBTimeSlotEntry.SlotDateTime to TBTimeSlot.SlotDate+TBTimeSlot.SlotTime because of included columns on indexes (and smaller data volume)
- Fix: golf.co.nz: Scores page: if the user isn't logged in, or there's no querystring parameters (memberid and code), then redirect to the Login page.
- Mod: TransactionProcessor: SubscriptionRenewal (Flexiclub): set SubAutoRenewalRetry.IsSuccess=1 after a successful retry attempt; handle creation of receipt only (invoice exists already)
- Mod: Flexiclub auto renewals: add two new columns to SubAutoRenewalRetry
- Mod: TransactionProcessor: SubscriptionRenewal: when the auto-billing fails, insert into the SubAutoRenewalRetry table; this automates retrying of auto-billing.
- Mod: Reduced SQL command timeout to 60s now that things seem stable around 120s.
- Add: Warning message to Subs Summary Chart SQL.  It seems anytime we touch this we have major performance headaches.
- Add: Index for subs summary chart performance.
- Add: Index for subs summary chart performance.
- Fix: ClubCMS: corrected typo: SubComissionPercentage to SubCommissionPercentage
- Fix: GreenFeeData: fix typo in the new column names
- Mod: Changes from SQL script #2510 were overwritten from this script. Merged the changes from this script to #2510. Fix: Filter out non-system calculated green fees.
- Fix: Removed text '[Casual Golfer]' - it was meant for debugging but missed to clean this out.
- Mod: ClubCMS: Member Signup: credit card transaction fee: fix calculation
- Mod: GreenFeeData: Club and Association: add three new columns for subs commission percentage and instalment A2A transaction fee (SubsComissionPercentage, MembershipApplicationA2ATransactionFeeInstalment, SubsAccount2AccountTransactionFeeInstalment)
- Add: Some comments into the code for a) enabling changes for past dates in the POS and b) sending a different sale date to Vend when posting a sale.
- Fix: The Vend RegisterSale total_price and total_tax calculations were incorrect, taking only into account the latest session in a sale.  The Vend sale total should always be the sum of all the line items on the sale. Fix: Quantity was not included when calculating the total price of products in a sale, leading to an incorrect totalPrice value.
- Cleanup: Get rid of unused RegisterSale() code.
- Cleanup: Get rid of unused RegisterSale() code.
- Mod: ClubCMS: rMemberSignup: 1) removed the weekly and fortnightly options 2) applied changes to the transaction fee
- Mod: When running as a console app, create the X509Certificate classes another way to avoid filling up C:\programdata\Microsoft\Crypto\RSA\MachineKeys with lots of little key files.  This caused chronic disk space issues on Ringmaster in Prod.
- Add: App settings for XeroSync so we can run it in Dev.
- Add: golf.co.nz: Privacy Policy page
- Mod: golf.co.nz: removed Junior Golf section
- Mod: golf.co.nz: updates on the menu requested by NZG 1. Rename and update link - "Getting Started" to "New to Golf" https://www.lovegolf.co.nz/why-play-golf 2. Add Futures, She Loves Golf, and Flexiclub 3. Remove "Junior Golf" 4. Rename "Women and Girls" to "Women's Golf"
- Mod: ClubCMS: sql: add a new column to CWMembershipApplication table
- Mod: ClubCMS: rMemberSignupV2: update logo and transaction fee on schedule change
- Fix: Noticed that we were passing an incorrect currency value into the Process Loyalty method.  However, this would only have affected us when we started to deal with other currencies, currently everything is 1.0x NZD, so no big deal.
- Fix: Live: added "AutoResignAtEndOfSubscription = 0" to exclude those who will be auto resigned at the end of the current subscription period.
- Fix: Live: added "AutoResignAtEndOfSubscription = 0" to exclude those who will be auto resigned at the end of the current subscription period.
- Fix: Live: show cbAutoResignAtEndOfSubscription on the day of end of subs; if it's not visible on the day (and the user hasn't been auto resigned by the system yet), it gets confusing. Pakuranga mistakenly individually renewed someone because they didn't see this control (which is ticked/true) on the day of resignation
- Fix: #11856: Live: previous commit
- Merged fix to AXAccountType.AXAccountTypeForClub() from my branch as it is an important one to get into Trunk.
- Fix: #11856: Live: broke ClubCMS and TBTransactionProcessor build because of my previous commit; reverting the unnecessary changes (didn't realise I could easily derive the XeroNewInvoiceStatus with the existing insert into Invoice script (ProcessRenewals_Apply.cs)
- Fix: #11856: Live: 1. When inserting a new record into the Invoice table, also include AccXeroInvoiceStatus (based on the club setting) 2. When updating an invoice, only update in Xero if the invoice is in Draft mode. (Approved invoices can't be edited.  It throws a message: "Xero Error Message: Invoice not of valid status for modification")
- Mod: Public/My Account: Allow an AXAccountUID to be passed on the URL to have the appropriate club and account tab selected when the page loads.  This will enable us to send out URLs in emails to take the recipients straight to their account.
- Mod: Implemented the My Account tabs using client side javascript.  The combo box that was there before is still there, but hidden, so the server side code is unaffected.
- Fix: Build error caused by my last commit.
- Mod: Reverted rev 30872 (the nice looking tabs at the top of the My Account page) because we've lost a) the ability to have multiple account types for the same member and b) the ability to open a new account on demand.
- Add: Code to update the TBTicketEntry.OriginalClubFeeDetailId value - can't hurt having this in there.
- Add: "I'm Feeling Lucky" button to golf.co.nz (for testing in Dev)
- Fix: Live: Member Tags: Fixed UI display issue - tag icon is shown for a player that does not have any tags.
- Fix: Live: Member Account Activity report - "opening balance" and "closing balance" are still top and bottom. We've already reversed the order of the member account listing to show recent activity on top. If the latest transaction is at the top, the "Closing Balance" should be at the top.
- Add: sql: SubAutoRenewalRetry: create this new table to be used by the transaction processor subscription renewal; this table will contain the Member ID and Retry Date
- Mod: TBTransacationProcessor: SubscriptionRenewal: update the query to include those defined in the new SubAutoRenewalRetry table
- Mod: golf.co.nz: SideBarImage: switch back to the GO Rentals advertisement
- Mod: API: TeeBooking: /search-location endpoint - Only consider green fees that are marked as system calculated (Limit.IsCalculated) in selecting the lowest possible green fee.
- Mod: ClubCMS: Member Signup V2 controls 1. Save PaymentMethodId (1:A2A or 2:CC) in CWMembershipApplication table 2. rMembershipSignupConfirmationV2 - update displayed information; fix payment retrying 3. Update styles 4. rMembershipSignupV2 - fix the LastInstalmentDate query
- Mod: ClubCMS: rMyAccount: style update
- Mod: ClubCMS: rMemberSignupV2: category payment message update
- Mod: ClubCMS: terraces2 template: added js function GetParameterValues
- Mod: ClubCMS: UCourseWithAds.ascx: comment out hiding of some elements
- Fix: Live: Functions: Discount on a sale for a bar tab was not applied in the invoice sent from the functions calendar. The invoice still reflects the full cost of the bar tab.
- Add: Live: KountaSync: Added new request parameter "sync-orderid" (the kounta order id). This mod allows us to import a specific order from Kounta.
- Mod: ClubCMS: sql: added insert to CWControlProperty
- Mod: ClubCMS: rMemberSignupConfirmationV2 and rMemberSignupV2: remove unused code; apply the isTransactionFeeInclusive setting
- Mod: sql: CWMembershipApplication add new columns: ScheduleId and LastInstalmentDate
- Mod: ClubCMS: rMyAccount: clean up code (code maid); added top margin to amount-due
- Mod: ClubCMS: Member Signup: added payment schedule; added saving of ScheduleId and LastInstalmentDate; updated the layout (order of sections); clean up code (code maid)
- Add: ClubCMS: Payment Express A2A logo
- Mod: ClubCMS: CWMembershipApplication: added ScheduleId and LastInstalmentDate
- Mod: ClubCMS: ClubMember: Member Signup: added saving of SubsDirectDebitScheduleId / Schedule Id
- Mod: Improved scanner auto-detection in Connector.  We'll prefer scanner drivers in this order: Alaris S2000, Kodak i2000, Kodak i1210. Add: DSData for Alaris S2000 scanner.
- Mod: Tightened up the timeout on the old green fee report.
- Fix: Scheduled Tasks: Didn't construct an instance of the task classes before attempting to cast them to the interface... Argh...
- Add: Deployment script for DotGolf.ScheduledTasks.
- Fix: Scheduled Tasks: Trying to run the interface itself... no good
- Add: Scheduled Tasks: Post-build script to copy binaries to DotGolf.Live/bin so that the build system will send them to S3 for deployment.
- Fix: DebugLogEntryType.RetentionMonths value was not correctly saved to the database. Add: DebugLogEntryType.RetentionMonths will now be updated if the value doesn't matched the compiled value. Add: DebugLogCleanupTask added to clean up debug log daily at 2:30am. Mod: Ignored some binaries in DotGolf.Reports.
- Fix: Multi Course Classic form broke if you point it at a single gender competition.  It was originally designed for both genders.
- Fix: Debug Log Viewer infinite scrolling - previously it would load another chunk whenever you scrolled; didn't matter if that was the other direction.  Now we'll only load another chunk if the user is heading that way (and they are near the end of the page). Add: Refresh link to allow reloading the log without having to toggle parameters.
- Mod: ClubCMS: rMemberSignupConfirmationV2: added a Transaction Fee line to the receipt (if any); also updated the interclubmessage to include a note on the transaction fee
- Fix: Debug Log Viewer: For log entries that are >0 bytes long, display 1kb.  For 0 byte entries, show 0kb.  Now we can see which entries contain data and are clickable.
- Mod: ClubCMS: rMemberSignupConfirmationV2: style update
- Mod: ClubCMS: rMemberSignupConfirmationV2: transaction fee (work in progress); updated the way the fee breakdown is displayed
- Mod: Live: Member Tags: TabMembers.aspx - changed text field to combo box. The combo box will be populated with all the active tags for a given club. Fix: Live: Member Tags: POG - styling issue with the tag icon and the text. It breaks when the browser width is reduced.
- Mod: golf.co.nz: added a new page "Rules" to be used for the 2019 Rules (requested by Dave)
- Mod: ClubCMS: Member Signup: added transaction fee (to be set per club); improved form layout
- Mod: ClubCMS: Holden Clubhouse Members Export: Added Region column
- Revert: Mod for this file is not supposed to be part of the svn rev 30926 (for Member Tags).
- Fix: Loyalty crash when member resigned and trying to calculate loyalty credit (none should be given if the member is resigned).
- Add: Live: Member Tags:
- Mod: ScheduledTasks: Extended to support Cron strings.  Ringmaster build now installs a task to call this EXE every minute.
- Fix: ScheduledTasks: Build output paths.
- Mod: Selectize selectOnTab enabled so that you can partially enter text and press TAB to select (same as Enter)
- Fix: Reference to nonexistent DLL.
- Fix: Another rogue DLL and reference.  Ignored all the DLLs I've previously nuked.
- Mod: Removed more duplicated binaries from /bin - the intention is to get rid of /bin altogether (but we can't just yet; there are a few important things kept here still)
- Fix: Another package reference.
- Fix: Another package reference.
- Mod: ClubCMS: rContactForm: include Country and Region in the email to be sent to the club
- Mod: Aaaaaahhh, remove /packages and let DOTNET RESTORE take care of that.
- Mod: Moved DotGolf.Live\DotGolf.Live.sln to the root folder.
- Mod: Ignored some package files. Mod: Web.config with ElasticTracker line included (commented, template)
- Add: Selectize: Plugin to allow clearing the select when the user starts typing, to make the combo more like a vanilla SELECT.
- Fix: #11780: ClubCMS: UserUtilities: IsValidPasswordForComputerNo: if the user doesn't have a Member ID nor a LiveOrResignedMemberId, return false. (NonAffiliates use a different method: IsValidPasswordForNonAffiliate)
- Mod: Decreased timeout for Tee booking green fee report to 31s.
- Mod: Moved ScheduledTasks to the DotGolf.Live root instead of inside the webdir.
- Add: Comments to explain the SubsAutoResignTask class. Mod: Scheduled Tasks: AssemblyInfo.cs ignored because it gets generated from a template.
- Mod: Removed extra DotGolf.ScheduledTasks folder. Fix: Build error with SUBWCREV -e Fix: Markdownsharp package path was incorrect in DotGolf.Shared.
- Add: Missing MarkdownSharp.2.0.5 package.
- Ignored some stuff.
- Add: DotGolf.ScheduledTasks application.  This is a lightweight task runner that we can use to fire scheduled tasks from Task Scheduler on Ringmaster.
- Fix: ClubCMS: web.config: added key ValidationSettings:UnobtrusiveValidationMode to fix the error "WebForms UnobtrusiveValidationMode requires a ScriptResourceMapping for 'jquery'. Please add a ScriptResourceMapping named jquery(case-sensitive)."
- Mod: ClubCMS: WelcomeMember.html (Flexiclub): just replaced the apostrophe
- Fix: Don't log the ERR_NO_LCP_PRODUCT exception since this is a normal part of Connector life.
- Fix: Don't log the ERR_NO_LCP_PRODUCT exception since this is a normal part of Connector life.
- Mod: ClubCMS: rMemberSignupConfirmationV2: create a generic welcome email template to be used by golf clubs (the email image header would be the same as the club bulk email image header); use the ClubLogoHelper to display the club's logo on the receipt.
- Mod: ClubCMS: rMyAccount: Next Billing Date: this should be the end date of the current subs period (we are supposedly billing/renewing members on the last day of their subs or before their current subs expires). Hide the Cancel membership option if EnableCancelMembership is false.
- Mod: Removed the browser family check from the SSO Validate page in Live.  Safari reports itself as Mozilla when first loading our secure site, and then later reports as Safari when loading the unencrypted one.  Probably part of the intelligent tracking prevention.  Interfered with SSO login and caused the redirect loop several clubs complained about in the past.
- Add: DotGolf.Mailer: PushNotifications - CreatePlatformEndpoint. Add mobile device details when logging the exception from AWS SNS.
- Mod: ClubCMS: rMemberSignupV2: PopulateWithTestValues: also set ddlRegion and cbTerms
- Mod: ClubCMS: rMemberSignupConfirmationV2: create the member items using GetCategoryItems
- Mod: ClubCMS: old Course controls: put back fuImageUpload
- Mod: ClubCMS: web.config.production: added targetFramework="4.6.1" to httpRuntime element; this also fixes the old course controls (using fuImageUpload)
- Add: Logging to see what is causing the SSO redirect loop in prod.
- Add: Timeout for GreenFee Timeline report.
- Fix: ClubCMS: rMyAccount: GetValidClubCategories: return the latest valid base sub item and amount of each category. Note: the new query uses the new Category.IsAllowOnlineSignup, so deploy the related sql too if we're merging and publishing.
- Mod: sql: Category table: add IsAllowOnlineSignup bit column; to be used on the Club Website Member Sign up form.
- Fix: Green fee report timeout clamped to 31s instead of 2 minutes (the default).
- Fix: Attempt to unload the TuesPechkin toolset after initialising the ThreadSafeConverter.  I'm hoping this will stop the CPU problems we're having after deploying new versions of Live/Edge.
- Mod: ClubCMS: old Course controls: apparently, the error is still occurring in production (no in dev); reverting the changes while I look into the issue
- Mod: Public: MyAccount:
- Fix: (Un-minified file) Use absolute path in referencing font-awesome font files.
- Fix: If a registration option is new and someone tries visiting their incomplete (unpaid) registration details on golf.co.nz, an exception is thrown.
- Fix: Wrong-path :( - typo.
- Fix: Use absolute path in referencing font-awesome font files.
- Fix: #11722: ClubCMS: old Course controls: uncomment fuImageUpload: it's now working per testing
- Fix: Jenkins build failure - due to new C# "is null" operator. Should use != null instead.
- Add: Live: Functions:
- Mod: Tightened up the SQL build to error out if any new SQL issues are detected.
- Mod: ClubCMS: rMemberSignupV2: next billing amount: exclude the once off items (e.g. Joining Fee for Flexiclub)
- Add: Kounta integration will now automatically import reconciliations so that we can extend our Member Account Reconciliation report to group by Kounta register closures the same as what we can do for Vend.
- Mod: ClubCMS: rMemberSignupConfirmationV2: update on display of fee breakdown
- Mod: ClubCMS: rMemberSignupConfirmationV2: update on display of fee breakdown
- Mod: ClubCMS: rMemberSignupV2: update on display of category items
- Mod: ClubCMS: rMemberSignupV2: updates on display of category description and category items
- Mod: ClubCMS: rMemberSignupConfirmationV2: minor updates on the payment status message
- Mod: Message: Message_InsertUpdate - added condition in the where clause to only send badge notifications to iOS devices.
- Add: Reintegrated Profit Centres from Branches/Trunk.2018-09-21.profit-centres.
- Mod: ClubCMS: rMemberSignupV2: work in progress: pull items from CategoryItem and display them
- Add: ClubCMS: sql: inserts into CWControl and CWControlProperty tables
- Add: ClubCMS: initial commit: generic membership sign up for clubs
- Mod: ClubCMS: just added comments
- Mod: ClubCMS: just added a comment
- Mod: ClubCMS: rMembershipApplication: just added to the comment
- Fix: Performance enhancements to the Paid by Item report - this will now run within the 30s gateway timeout.
- Add: ElasticTracker for Adweb so that we get some stuff in vortex for it - I suspect a few performance problems are Adweb related.
- Add: Included IsSubsEnabled in IX_Category_ClubId for subs chart performance.
- Mod: golf.co.nz: master page: add custom html content before the closing head tag, after the opening body tag, before the closing body tag.  This will initially be used for Google and Facebook remarketing pixel tags for GO Rentals.  The data is pulled from the PWPage table, and cached for 6o minutes.
- Add: Handicapping: tests for ineligible markers.
- Fix: Ineligible markers: wa_GetMemberHandicapIndex still considered these when pulling old handicaps. Fix: wa_RolloverUpdateMember considered these scores when working out whether to calculate a Junior handicap after 5 eligible scores.
- Fix: Typo error - missing the word "not".
- Fix: API: TeeBookingController: Prevents a user from making a payment for a booking made at a non-TBP club.
- Mod: BulkEmail: updated reference from api.nz1.internal.golf.co.nz to api.golf.co.nz
- Add: Bulk Email: sql: be_CustomRecipientsBulkEmailThirdParty: this script is used to insert mailing recipients from the given association's third party (e.g. Holden Clubhouse)
- Mod: ClubCMS: sql: added more inserts into CWControl and CWControlProperty tables
- Mod: Love Golf Play: replace Google Maps API Key with the NZG one
- Add: Live: Show non-handicapped scores properly (with an icon and no slope info) in member history (NZCRData.IsEligibleForHandicapping=0)
- Add: Public: Ability to show non-handicapped scores (NZCRData.IsEligibleForHandicapping=0)
- Mod: ClubCMS: rResignedMemberLanding: updated default button text
- Mod: ClubCMS: Flexiclub: allow logged in resigned members to restart their membership (they will have to go through the same sign up procedure, but the form will be pre-populated with their existing record)
- Mod: ClubCMS: rEditMemberDetails: if a resigned member access the My Profile or Edit Profile page, they will be redirected to the ResignedMemberLandingPage, where they can restart their membership
- Mod: ClubCMS: rEditMemberDetails: just made some text lowercase
- Add: Ability to create non-handicapped marker changes in Org.
- Add: Non-handicapped courses: Ability to create these markers from Org. Add: IsEligibleForHandicapping bit flag on NZCRData.
- Add: Index for cleanup job speed.
- Mod: Subs transactions: handle a null transaction fee - we don't always have transaction fees, sometimes there is only a percentage commission.
- Fix: Slicer: Handle Flexiclub when updating MembershipApplicationTransaction updates.
- Add: ClubCMS: Resigned Member Landing control: initial commit; this control is used on the landing page for resigned members who log in
- Mod: ClubCMS: rLoginX control (NZG): allow resigned Flexiclub members to log in and reactivate their membership
- Mod: ClubCMS: rMemberSignup: style update
- Fix: API: TeebookingController: Freshdesk ticket #11668 - User was able to book a tee time at Wanaka using the app even though the club does not have "Online payments" (TBP product) enabled. Added condition in the /search-slots endpoint to check if a club has a TBP product - Returns an empty "Slots" list if the condition evaluates to false.
- Add: Progress-to-par scoring enabled in mobile scoring page.  This is controlled by the setting for each round in Competition Setup. Fix: Display "*" only for non-played holes, not blank ones that haven't been entered yet.
- Mod: ClubCMS: NZG: Golf Facility and Event Search controls: replace the Google Maps API key with the NZG one
- Fix: Redirect() problem stopped Org from recycling properly.
- Fix: Checkout state didn't include the declinedMessage field, which meant that it didn't store the fact that an error occurred in AXAccounts.  This lead to a "stuck" state where the POS could not recover from an AXAccount transaction post crash.
- Mod: Expected Membership Renewals report extended so that you can now include members who have recently been renewed.
- Add: Knockout 3.4 debug version.  Not referenced from anywhere at present.
- Add: FancyControl code added to work with Knockout 3.4, just in case we need a page somewhere to work with Knockout 3.4 and fancy controls together.  Fancy controls need to go away though, standard controls are now skinnable enough to negate the need for a custom implementation.
- Mod: Removed Jenkins build status from admin bar (affects only dev) - it was cluttering the console.
- Mod: Knockout chart.js binding updated to allow a computed observable to be passed in for chart data (previously only an object (with possible computeds on it) could be passed, and changes of the computed would not be responded to).  This is something I found while trying to upgrade to Knockout 3.4.
- Add: Patch for upgrade to knockout v3.4.  Unfortunately there are some event issues that happen in the POG, preventing it from loading competition and green fees properly.  I couldn't crack that in the end so gave up on the upgrade.
- Mod: Org: Tournaments: Banner - replaced parnz_sponsor_banner.jpg.
- Fix: TBTransactionProcessor: updated the main query (gets Flexiclub members for renewal), use the billing token saved for Payment Express user ID "DotGolfSubs"
- Mod: Another console.log removal.
- Fix: Unit tests are passing again for DotGolf.API.  Some tracker cleanup issues remain, but they don't affect the unit tests.  Would be nice to get them fixed anyway.
- Mod: BulkEmail.Common: BulkEmailService updated (CustomRecipientsBulkEmailThirdParty)
- Mod: Live: ManageMailingList: added display of region and country
- Mod: Live: MailingList: added the ability to filter the mailing list recipients by region (RegionId is now available in the CWMailingListRecipient table)
- Add: Live: RegionPicker control (to be used initially in filtering mailing list recipients by region)
- Add: TBTransactionProcessor: Deploy scripts to let Jenkins deploy this on Ringmaster.
- Fix: Performance: Avoid parameter sniffing on results query.  This caused some bad plans for large best-of multiround competitions.
- Add: Index to speed up multiround best-of competition results.
- Mod: ClubCMS: rContactForm: remove css class has-error when the region field is not required anymore
- Mod: ClubCMS: rContactForm: removed confirm email address field (unnecessary); put Country and Region fields side by side; disable Region field (not hide) when the country selected is not NZ
- Mod: ClubCMS: rMailingList form: added Country and Region
- Add: ClubCMS: rmailinglist css file
- Mod: sql: insert records into CWControlProperty table
- Mod: ClubCMS: update GetOnTheGreenClubPage url (from getonthegreen to play)
- Mod: ClubCMS: replace getonthegreen url with play.lovegolf.co.nz
- Mod: ClubCMS: rename LOVE GOLF GET ON THE GREEN with LOVE GOLF PLAY
- Mod: sql: dga_SendDailyNewMemberWelcomeEmails: just renamed "LOVE Golf Get on the Green" with "LOVE GOLF PLAY"
- Add: Experimental code to use Selectize for combo boxes.  I've only added it to the admin bar (when we're logged in as DotGolf), the Journal area (which uses knockout) and the TabMember area (for adult/junior, which is a webforms page).
- Mod: TBTransactionProcessor: SubscriptionRenewal: process renewals for those for renewal today and yesterday
- Cleanup: Removed a whole bunch of console.log statements that clog up the debug console.
- Mod: TBTransactionProcessor: forgot to call SubscriptionRenewal (when unattended)
- Mod: ClubCMS: rContactForm: (missed to include in the previous commit): also added a confirm email field; committing updated css related to that
- Mod: ClubCMS: rContactForm: added Country and Region fields. Region is only required if New Zealand is selected as Country.
- Mod: sql: CWMailingListRecipient table: add new columns: CountryId and RegionId
- Mod: Bulk Email: BuilderService: added CustomRecipientsBulkEmailThirdParty (this will be initially used to send bulk email to Holden members; it could also be used by other Third Parties like Toro if we create a Toro user which has access to Bulk Email)
- Mod: Bulk Email: DraftsController: added CustomRecipientsBulkEmailThirdParty (this will be initially used to send bulk email to Holden members; it could also be used by other Third Parties like Toro if we create a Toro user which has access to Bulk Email)
- Add: API: Bulk Email: added CustomRecipientsBulkEmailThirdParty
- Mod: TBTransactionProcessor: SubscriptionRenewal (Flexiclub): handle null RenewalCategoryId
- Mod: TBTransactionProcessor: SubscriptionRenewal (Flexiclub): consider the renewal category of the member; if the renewal category is not null, use it upon renewing the member's subs and also set it as the member's category
- Mod: ClubTag: Ignore generated .js and .js.map files.
- Mod: TBTransactionProcessor: SubscriptionRenewal (Flexiclub): do not renew those who will be auto-resigned at the end of current subs (AutoResignAtEndOfSubscription=1)
- Add: API: Bulk Email: added CustomRecipientsBulkEmailThirdParty method which will be used to get third party recipients for a given association (third party id to be derived from the association id)
- Mod: Bulk Email: recipient dropdown: added a "Member Signups" option for Holden (also allowed Toro to see this option just in case they need it too in the future, but they don't have access to Bulk Email so they won't be able to use this anyway)
- Fix: Shared: Competitions: Freshdesk ticket #11395 - For mixed gender comps. If you print a card that has the marker selection set to "Automatic" - it always defaults to the Mens marker.
- Add: TBTransactionProcessor: added processing of auto-renewal of Flexiclub subs. This will first be used on 1st November 2018.
- Mod: Deploy: Set a specific time to recycle the app pool for each app - between 04:30 and 04:59 daily, calculated from a hash of the computer+app pool name (so that everything doesn't recycle at the same time).
- Mod: Cleanup: Some Aus/GolfLink code removed; DPS capability removed from old Start Sheet editor since nobody uses this, and it was never upgraded to pull credentials from SNS.
- Mod: ConnectorAPI: Improved scorecard print latency stat by excluding scorecards pre-printed for future dates. Mod: Removed Database.Log call for scorecard print notification handler - this is stable now.
- Mod: golf.co.nz: ClubDirectory page: updated club location address (Google Maps info window)
- Mod: golf.co.nz: ClubDetail page: added Google Maps info window
- Mod: golf.co.nz: updated the Google Maps API key (belongs to NZG)
- Mod: golf.co.nz: continue updating the Google Maps code; added info window; updated the Google Maps API key
- Mod: golf.co.nz: replace the ad image (and url) with Toro
- Fix: Adweb: Slicer send transaction reports crashed for Flexiclub because it's a club, not an association.
- Fix: Adweb: Cast error when running payment reconciliation report - due to null transaction fees for flexiclub renewals.
- Mod: Removed some dodgy uses of Database.SqlCommandTimeout, including some areas where it was increased and then never re-set to its default value.
- Mod: Connections: Changed DPS transactions to show as Errors in Event Log if anything fails.  Currently they are logged as Info which makes any problems hard to filter for.
- Mod: Database timeout reduced to 120s (from 240s) to try and combat excessive database locking.
- Add: Gift card enquiry page (recaptcha protected) for when you scan the QR code on your gift card.  Example: http://golf.co.nz/MyGolf/GiftCardEnquiry.aspx?x=SMB6kX6D5rAt089zEDuGYEIYQdVgFcMl
- Mod: TBTransactionProcessor: SubscriptionRenewal: correct the script which gets the Flexiclub members due for auto renewal; make the receipt email an HTML email
- Mod: Flexiclub renewals didn't work because the renewal query only joined to Association.  Duplicated this and modified to join to Club. Fix: Flexiclub membership application didn't calculate the commission correctly.
- Fix: API: Privacy mode bug - Refer to https://github.com/dotgolf/mygolf/issues/138 for more details.
- Add: TBTransactionProcessor: SubscriptionRenewal: initial commit; to be used for auto renewal of membership / subs for Flexiclub members
- Fix: golf.co.nz: update obsolete Google Maps code
- Add: KountaOrder.CreateDate so we can track how long the order took to get inserted into our system. Add: Results index for performance.
- Mod: Reverted to previous Redis reference.
- Add: Org: New custom css file missing not included from previous commit 30713.
- Add: Org: Custom CSS file and banner for ParNZ.
- Fix: Live: ProcessRenewals_Apply: correct the item start date used for periodic membership, using the new sub period's start date. (The end date was correct; it was already based on the new sub period's end date.)
- Fix: ORNS when scanning an inactive gift card PAN.
- Mod: Put IX_RSResult_CreateDate back for now.
- Mod: Performance: RSResultMultiRoundResult was becoming a monster, so I added a CompetitionId column so that we can partition the data by CompetitionId.  This means a lot less processing involved when joining to this table by RSResultId.
- Revert: Background results calculation since this turned out not to be the performance issue after all.
- Mod: Live: Member Tags: Hide Club Tags settings for now.
- Add: Live: ClubTags maintenance page (initial commit)
- Add: Drop some unused indexes.
- Mod: ClubCMS: rMyAccount: just updated some comments
- Mod: ClubCMS: rMyAccount: hide the action buttons when the member doesn't have an existing subscription item (probably a free membership)
- Mod: Push Notifications: Changed "friendPassportId" key to "friendId"
- Mod: Push Notifications: FCM notifications - Set the appropriate value for the title field. For FriendAdded notifications, change the type from "friend-added" to "friend" - app is expecting a value "friend" from the push notifications payload.
- Mod: Live: filter the invoices retrieved from Xero by Contact ID (Subscriptions)
- Mod: Performance improvement in xero sync; cache HasProduct() result instead of calling it repeatedly for every invoice.
- Add: TBLogArchive table for TBLog storage after 2 months. Mid: Removed IX_Scorecard_ScoreId_Deleted index - see if this might be the cause of the new locking.
- Fix: Remove the function call from the Unpaid Scorecard Count query - it was causing performance overhead.
- Mod: API: Push Notifications - use FirstOrDefault() so we don't get an exception when accessing an empty enumerable from HttpRequestMessage.Headers.UserAgent.
- Mod: Added caching for Passport.IsCurrentlyAMember and Passport.IsCurrentlyANonAffiliate - these methods get called a LOT.
- Fix: ClubCMS: rEventSearch: display event date even if only one date (start or end) is supplied
- Mod: Removed Aus code from fncLocalDateTimeAtClub.
- Mod: ClubCMS: rGalleryStyle2: add labels to the form
- Mod: Results: We do not need to get the printed handicap index from the Scorecard table; instead we can get this from RSCompetitionRoundSegmentEntry.HandicapIndex, which is much faster and doesn't cause blocks on the busy Scorecard table.
- Mod: ClubCMS: rGalleryStyle2: adjust gallery item height when in edit mode to give more space to the form
- Mod: ClubCMS: rGalleryStyle2: css update: break long URLs (gallery item subtitle)
- Mod: Shared: ClubItem: added IsOnceOff (existing column in the ClubItem table)
- Fix: ClubCMS: rGalleryStyle2: handle null image website url
- Fix: ClubCMS: rMyAccount: correct the next billing amount (exclude once off club items e.g. joining fee)
- Add: DeletedDate to that index.
- Add: Index for performance.
- Mod: Performance: Removed some Aus code that had a bug that caused the Country/Club tables to get locked up.
- Mod: ClubCMS: rMyAccount: display Next Billing Amount and Date only when Auto Resign is not enabled for the member (i.e. member is not cancelling the membership)
- Mod: ClubCMS: rMyAccount: when there is no billing card, rename the button text to "Add billing card"
- Mod: golf.co.nz: My Golf sidebar image update (GO Rentals)
- Mod: Live: Member Tags - disable calls to LoadPlayerTags in POG. Need to do this in an optimal way.
- Fix: Payment reconciliation report was incorrect for Flexiclub.
- Mod: Adjusted payment reconciliation report to account for Flexiclub payments.
- Mod: Performance: Added Deleted to IX_Scorecard_ScoreId_Deleted to speed up score listing queries for app.
- Mod: Live: Functions: Functions Xero invoice - added prefix "Catering:<service name>" for menu option items.
- Fix: Toro results calculation didn't correctly adjust the stableford total for combined scores.  Per the results spec we should be adding NZSCR-PAR to the stableford total; but unfortunately for combined scores the NZSCR-PAR value was only for the second 9 played.  I've adjusted this so NZSCR-PAR for both courses are added together and applied to the Stableford score played.
- Mod: golf.co.nz: update the Experience Golf logo
- Fix: Go to a READ UNCOMMITTED for the tee booking search - ghost reads don't matter /that/ much.
- Add: Reference to StackExchange.Redis package because ScoreService.aspx.cs uses it now.
- Fix: Index change script assumed it already exists.
- Add: Ability to calculate ALL competition results in the background via the RSResultQueueEx table.  Requests are JSON serialised, stored, and retrieved from the ProcessResults.ashx handler. You can enable and disable this behaviour using a new setting; the default is OFF (calculate inline).
- Mod: Push Notifications: Set title to "Tee Booking" for APNS and FCM - https://github.com/dotgolf/teebooking/issues/318.
- Mod: ClubCMS: event interest registration: added text guide in the Message textarea (for Futures interest registrations only); updated the message that appears after the form submission
- Mod: Defeat parameter sniffing on fncTBIsMemberOutOfCategory.
- Add: OPTION(FAST 4) to the tee booking lock and load call.  We should only have max 4 players to return, so this will help the optimiser when dealing with this large query.
- Add: Ability to name a gift card and have the name display in DotGolf Live and in the Vend payment gateway 1/2. Fix: Strip ; and ? when scanning a magstripe gift card into DotGolf Live gift card management.
- Add: Ability to name a gift card and have the name display in DotGolf Live and in the Vend payment gateway 1/2.
- Fix: Live: Functions: Tax rate is not set per line item when splitting each function booking line items on a Xero invoice.
- Fix: Live: fixed saving of "Allow Bulk Email" for non-affiliates by fixing the query that gets the passport id given the non-affiliate id. Previously the condition only matches with Passport.MemberId. I added "or Passport.NonAffiliateId"
- Mod: Tampermonkey: Don't trigger the customer search when a gift card is scanned into the gift card dialog or into the checkout.
- Mod: Live: Functions: Send invoice to Xero - added line unit cost and change "Amount" to "Line Total"
- Mod: dga_NightlyBatchAXTransactionToSendToXero updated to include gift card transactions for clubs.
- Mod: DotGolf Live: sql: dashboard xero import stats: live_GetSubscriptionPaymentStatistics: corrected the query of last imported payment to include receipt records with PaymentTypeId 707 (Imported - Xero)
- Mod: Live: Functions: Send invoice to Xero - allow user to split or consolidate all function booking line items (line items are group by default). Mod: Live: Functions: Unbilled customers page - Add link to navigate back to the Functions calendar.
- Mod: Connector: I'll give TWAIN 2 minutes to init, given this is at bootup the machine might be busy and not get it all done within 15s.
- Add: HandicapTxt: Logging so that we can see how often handicap txt requests happen. Mod: HandicapTxt: Performance improvement; this should be relatively minor unless I misread the SQL plan.
- Mod: golf.co.nz: updated obsolete Google Maps js code
- Mod: golf.co.nz: CourseInfo: removed commented out obsolete Google Maps code
- Mod: golf.co.nz: updated Google Maps code
- Mod: golf.co.nz: Google Maps API key
- Fix: golf.co.nz: added key to Google Maps API (it was displaying "for development purposes only" without it)
- Mod: ClubCMS: rMembership Form: make Privacy text customisable; add new control property: PrivacyText
- Mod: ClubCMS: rMembership Form: make Privacy text customisable
- Mod: ClubCMS: rMembershipForm: add new control property: CustomFieldLabel
- Mod: ClubCMS: rMembershipForm: make the Occupation field label customisable using the added control property, CustomFieldLabel
- Mod: ClubCMS: rMembershipApplication: CustomFieldLabel: use "Occupation" as default value
- Mod: ClubCMS: rMembershipApplication: make the Occupation field label customisable using the added control property, CustomFieldLabel
- Mod: golf.co.nz: added two new sponsor logos
- Mod: ClubCMS: rMyAccount: table layout updates
- Mod: ClubCMS: rMyAccount: hide billing card section if EnableBillingToken is false
- Mod: ClubCMS: rMyAccount and rMyAccountPaymentConfirmation: allow user to update the billing card
- Add: Prototype code (hidden from UI) to automatically set up the gift card topup product.
- Mod: ClubCMS: rMyAccount: layout and style updates
- Add: ClubCMS: payment express logo with bank logos
- Mod: Restricted the TBTicket create date range in wa_TBSendPaymentWarningsJob - a year ought to be enough, and this helps performance a lot.
- Mod: Added additional WHERE conditions to speed up lookups from CompetitionRound.
- Mod: Performance enhancement by refactoring the @HasComps table variable query.
- Add: Index IX_Category_ClubId for performance of fncTBIsMemberOutOfCategory.
- Reverted SVN Rev no 29840 - This mod creates performance problem as it takes longer to release the lock on the TBLog while doing a table scan.
- Mod: ClubCMS: rMyAccount: updated display and styling of Membership No. xxxxxxx
- Mod: ClubCMS: rMyAccountPaymentConfirmation: receipt email: add the transaction fee line only when there's a transaction fee
- Mod: wa_TBSearchSlots was joining on TBStartTee without a ClubId condition; added this to make the queries faster.
- Add: Index for performance of wa_TBSearchSlots.
- Mod: sql: added two new columns to the Club table: SubsCreditCardTransactionFee and SubsAccount2AccountTransactionFee. These will be used when we open up online subs payments to clubs, through their DG club website.
- Mod: ClubCMS: MyAccount: allow members to pay using existing Billing Token; also updated some styles
- Fix: Flexiclub did not show up in the payment reconciliation report due to a missing Setting line - and we don't know the rate yet, so we can't set this.  Changed to a LEFT JOIN to allow it to show without a rate.
- Fix: Live: POG: CSS - Removed recently applied css to tr.real_slot (from svn rev 30158). That css should not have been there.
- Fix: ORNS error in new gift card code.
- Fix: USE statement removed.
- Mod: Public: Go Rentals images update
- Mod: Cache OOM standings for 30 minutes to reduce strain on DB. Mod: Cache amateur player details page OOM result set too.
- Mod: ClubCMS: Signup form: rename membership number field label from "Old" to "Previous"
- Mod: Push Notifications: for Android (Google FCM) - wa_TBApplyBookingChanges_SendEmails.
- Mod: DotGolf Live: Reverting Revision 30552: older query is faster; it's also somehow still correct (just takes into account the invoice outstanding amount, not instalments)
- Mod: DotGolf Live: Rename "Love Golf Get on the Green" to "LOVE Golf Play"
- Mod: Rename "Love Golf Get on the Green" to "LOVE Golf Play"
- Mod: Live: Love Golf offer preview link: replace "detail" with "event"
- Mod: ClubCMS: Event control: remove "Available starting" and "Available until"
- Add: MAXDOP 1 to the wa_TBSendPaymentWarningsJob proc - this doesn't appear to handle parallelism very well.
- Add: IX_TBTicket_CreateDate for performance of wa_TBSendPaymentWarningsJob
- Mod: PushMessage: https://github.com/dotgolf/teebooking/issues/318 - Updated the message template for Google FCM (Android push notifications) to use
- Mod: ClubCMS: GetInvoicesForMember: fixed the query so that it doesn't only return invoices with base subs item
- Fix: ClubCMS: My Account: GetInvoicesForMember: fix the base subs item start and end dates returned; GetPaymentsByMember: sort in descending order
- Fix: DotGolf Live: fix the broken styling when the Email Configuration Status message is visible. Previously, if the status message is visible, the filter form improperly appears on the right hand side.
- Mod: golf.co.nz: added meta description to golf.co.nz because Google Search Results just show random words that don't make sense!
- Fix: DotGolf Live: @BaseSubClubItemId - Get the base subs item used by this member for this club. Some clubs have more than one base subs. The old query used to return a base subs item that the member don't use. This resolves Pakuranga's issue during renewals, wherein the Hospitality Levy item (which is a new item), is assigned an incorrect start and end dates.
- Add: API: TeebookingController: Autobooking - check if AutoBooking is enabled (AB club product) for a club.
- Fix: Push Notifications: Fix the GCM message template. (1) Changed "notification" to "data" (2) Added "title" and "body" (3) Removed "message" (4) Added "type" and "scoreId".
- Fix: #11067: DotGolf Live: Dashboard: SubsSummaryChart: use the same query used by the Aged Subscriptions Report. Previously, the query used was only using the Invoice table; it did not consider Instalments, Credit Notes, Receipts.
- Reverted 30543.
- Fix: DotGolf Live: InvoiceInterface: use cached Xero Accounts to get the Xero Account Code for each subs line item. Previously, the Xero API is called for each line item, hence, we were exceeding the Xero rate limit when doing batch subs renewals.
- Mod: DotGolf Live: XeroHelper: GetAccounts: reduce cache timespan from 3 days to 10 minutes
- Mod: API: Notification: Development Mode is only applicable for IOS devices.
- Mod: Push Notifications: Removed the "-dev" suffix the ARN endpoint for GCM SNS platform applications.
- Fix: API: MyGolfController: Fix for https://github.com/dotgolf/mygolf/issues/58. 1) Set the DOB time component to "0:00:00". 2) PutProfileAsync() - Exclude the time component from the DOB during DB update.
- Mod: ClubCMS: Flexiclub emails to member: update EmailAddressFrom to flexiclub@nzgolf.org.nz
- Mod: ClubCMS: Flexiclub email template: removed doctype
- Mod: ClubCMS: Flexiclub email template: update title; removed doctype
- Mod: Toro Mower: wa_CalculateToroMowerChallengeResult sp: update week numbers
- Mod: Toro Mower: wa_CalculateToroMowerChallengeResult sp: update week numbers
- Fix: API: MyGolfController: Fixes https://github.com/dotgolf/mygolf/issues/58 - DOB changes to the following day when saving profile. Convert DOB to UTC format before sending the response. Also in the NonAffiliate else-if block, called DOB.ToLocalTime() to save the DOB value to NZST.
- Mod: golf.co.nz: updated MyGolf side bar image to promote Go Rentals
- Fix: Performance: Another call to GetScorecards() changed to only get the scorecards that were affected.
- Mod: Toro: sql: job: wa_CalculateToroMowerChallengeResult: corrected play date year from 2017 to 2018
- Add: Vend: Better handling for Vend API rate limiting, particularly while syncing members to Vend.
- Mod: Prizes: If something goes wrong in the prize post/reverse process, run an undo process to get the account transactions back to their original state. Otherwise, if we half-post to the accounts it turns out to be a big mess to be cleaned up.
- Fix: Prizes: Incorrect join on CMember.ComputerNo caused duplicate members to be returned in prize processing, causing duplicate account transactions and a corresponding error. Corrected the join (using RSPlayer instead of RSEntry), tested OK in prod.
- Mod: Mobile Live Scoring: List holes in played order.
- Ignored some stuff.
- Fix: Mobile Live Scoring: Broken back link corrected.
- Mod: Mobile Live Scoring: Admin area added - show QR code and link to be distributed to mobile scoring personnel. Fix: Bug: Enter 14, then click on the hole again and enter another 1; you can enter 141 this way.  Should clear off when you go into it the second time. Add: Permalink that is shorter (for a less complex QR code)
- Fix: Mobile Live Scoring: Scroll to the very bottom when a score is selected to avoid Safari navbar. Fix: Increased font size. Fix: Removed default free beer message.
- Mod: Xero: Importing bank transactions - tidied up some codes. Removed commented lines of codes unless its required for important documentation purposes that we need to keep them in the code. Use a much more safer while-loop pattern for easier maintenance.
- Mod: golf.co.nz: remove GEAP
- Mod: golf.co.nz: hide GEAP
- Mod: golf.co.nz: remove GEAP
- Mod: golf.co.nz: Toro image update as requested by Jan
- Fix: #11284 moment.js date format wasn't correct when parsing string 28/02/2018.
- Fix: Performance: Reduce recently entered scores loaded from 25 to 10.  Also added WITH(READPAST) to reduce locking at the expense of missing some recently entered scores (if they are locked).
- Mod: Performance: Removed a couple more unnecessary left joins from score listing.
- Mod: Casual Golf: LG Play: remove price from map marker for now. I don't like seeing $0 for NZG offers, which aren't really $0.
- Mod: golf.co.nz: remove GEAP info, hide subscribe area. This page is now showing "For questions on GEAP, please contact us." (with link to the Contact Us page)
- Mod: golf.co.nz: we are taking down GEAP. For the meantime, anyone who accesses the short url golf.co.nz/GEAP will be redirected to the Contact Us page.
- Mod: Casual Golf Admin: update logo on admin site login page
- Mod: Casual Golf Admin: update logo on admin site login page
- Fix: API: TeebookingController: GetUserBookings() - We can't provide both MemberId and NonAffiliateId parameters to the wa_TBGetMyBookingsForMember sp. Member record takes precedence over the NonAffiliateId if a person is both member and non-affiliate. FreshDesk Ticket #11251 #11256
- Mod: Casual Golf API: rename "Get on the Green" to "LOVE Golf Play"
- Mod: Casual Golf API: rename "getonthegreen.lovegolf.co.nz" to "play.lovegolf.co.nz"
- Mod: Casual Golf: LG Play Admin: rename "getonthegreen.lovegolf.co.nz" to "play.lovegolf.co.nz"
- Fix: Removed unnecessary LEFT JOIN [Scorecard] from the scores listing query - improved performance quite a bit. Mod: Removed GSStats as this never happened and is making copying/pasting this query into SSMS more difficult than it should be.
- Mod: Casual Golf: LG Play Admin: rename "Get on the Green" to "LOVE Golf Play"
- Mod: Casual Golf: LG Play: rename "Get on the Green" to "LOVE Golf Play"
- Fix: Casual Golf: LG Play: removed "undefined" analytics bundle. (we use Google Tag Manager for LG Play)
- Mod: Casual Golf: LG Play: add Google Maps key
- Mod: Check that a club is in TBClubSettings before allowing the TBT product to be added.
- Add: Vend card swipe fix Tampermonkey script - this one strips the year off by default and works with ;x? and %x? formats.
- Fix: Mobile Live Scoring: Broke Live build accidentally.
- Fix: Mobile Live Scoring: Remove debug code.
- Fix: Mobile Live Scoring: URLEncode problem with encrypted string.
- Mod: Live: Functions: Unbilled Customers Page - Added date and time for each Kounta order to show when the order was processed. Also, updated the prompt message if there's an unbilled function for a given customer. Mod: Live: Functions: Booking - increase width of the Send Xero invoice dialog.
- Add: Initial implementation of mobile live scoring for Org.
- Ignored some stuff.
- Mod: Removed stupid WCF service client and went back to good old webservice reference.  WCF was being really picky about the content type of the response, and for some reason IIS has decided that our webservices are now text/html, not text/xml.  Whyyyyyyyyyyy micro$oft?!!!
- Mod: ClubCMS: Member Signup Confirmation: save billing token
- Fix: ClubCMS: Flexiclub Signup: set EnableAddBillCard to true (forgot this important part!!)
- Mod: Live: Functions: Unbilled Customers Page – Inform the user that a customer has unbilled functions with individual links to the event details page letting the user know that the POS sales can be merge into the functions invoice. Mod: Live: Functions: Display the booking's last changed date after its been invoiced. Mod: Live: Functions: Increase ui-dialog font size to 12.5px.
- Mod: Xero: Importing bank transactions from Xero - Use paging when calling the bank transactions endpoint from Xero. Each page gives us 100 detailed bank transactions which will now include the LineItem details; so we don't need to call the single endpoint for every transactions to obtain the full details. We will keep fetching for the next page and continue to process the results until there's no more results returned from the API. Freshdesk Ticket #11243.
- Mod: Xero: Only import bank transactions from Xero for HOUSE accounts, not functions or gift cards.  This is because of the Xero API limits that are getting in the way for Pakuranga.
- Fix: No longer try to show Eclectic competitions on the leaderboard.  Since these competition type does not use the standard Results query, the leaderboard throws an exception and keeps showing results from the previous competition that was visible.  Found this in the exception log:
- Fix: VendProducts: Ensure we never get duplicate VendUID values in the VendProduct table.
- Fix: Vend: Product update (webhook) caused duplicate product rows to be inserted; presumably a timing related problem.  Wrapped in transaction and added handling for duplicate rows.
- Mod: ClubCMS: Member Signup: css class name update; scope rmembersignup.css styles to controls specifically in the rMemberSignup control
- Mod: ClubCMS: Flexiclub Eligibility: add select top 1 to handle those with duplicate member records
- Mod: ClubCMS: Flexiclub SignupConfirmationPageName: add Email.SenderName to the emails send to the new member
- Mod: ClubCMS: ClubMember: renamed method from GetResignedMemberIdBasedOnComputerNo to GetResignedMemberOrNonAffiliateIdBasedOnComputerNo
- Mod: ClubCMS: Flexiclub Signup: modify checking of eligibility when Old Membership Number is provided
- Mod: ClubCMS: Flexiclub Member Signup Confirmation control: If entered Old Computer Number is linked to an Non-Affiliate, create a new member record and link up the existing scores
- Mod: ClubCMS: Flexiclub: Old Membership Number: allow to enter NonAffiliate Computer No
- Fix: Live: Functions: RecurringFunctionBookingsGenerator - Use clubId instead for WebUser.FromHttpContext.ClubId when instantiating the KountaProductCache object.
- Add: ClubCMS: sql: create LGDiscountCode table
- Mod: GOTG/LG Play Admin Site: remove restriction on date inputs
- Fix: Allow leaving the Transaction Fees Account setting as unset. This also caused an exception in Settings.cs because apparently we can't set a setting to NULL.
- Mod: Akarana: Enable the "paid until" date for course fees even though they have the SUBS product. Normally clubs with SUBS have the course fees line item and this is used to determine the start/end date, but with Akarana this date range is independent from their subs.  They don't want to synchronise it either because that would give the appearance of the subs amount being increased.
- Mod: Akarana: Enable the "paid until" date for course fees even though they have the SUBS product. Normally clubs with SUBS have the course fees line item and this is used to determine the start/end date, but with Akarana this date range is independent from their subs.  They don't want to synchronise it either because that would give the appearance of the subs amount being increased.
- Mod: ClubCMS: Flexiclub signup form: use the DotGolfSubs DPS User ID (not DPS Tournaments); made it easier for the user to try paying again if attempt to pay isn't successful the first time around.
- Mod: ClubCMS: Flexiclub signup form: use the DotGolfSubs DPS User ID (not DPS Tournaments)
- Mod: ClubCMS: Flexiclub welcome email content update: add Toro ad as requested by Mel
- Fix: Vend: Turns out that long mod wasn't necessary - I already had this working, but it was broken due to a Vend UI update.  Fixed that, now it's safe.
- Mod: Vend: Show a warning and prevent POS operators from adding the Member Account Credit product if there is no customer selected.
- Mod: Shared: Invoice: added FindInvoicesToExportToXero: oops, removed DEBUG only condition
- Mod: Shared: Invoice: added FindInvoicesToExportToXero: this will initially be used by Flexiclub; it will be used by the XeroSync / InvoiceInterface (for Flexiclub only)
- Mod: XeroSync: Export invoices (created through ClubCMS) to Xero. Run this for Flexiclub only for now. Also allow to export receipts for Flexiclub.
- Mod: Shared: Xero: InvoiceInterface: added ExportInvoicesToXero: this will initially be used by Flexiclub; it will be run during the XeroSync (for Flexiclub only)
- Mod: ClubCMS: rMemberSignup: added instant front-end validation of password and email matching
- Mod: ClubCMS: rMemberSignup: message / text update; added instant front-end validation of password and email matching
- Mod: ClubCMS: rMemberSignupConfirmation: message / text update
- Fix: Vend sync: error logging when exceptions happen in import process.
- Add: Akarana to swipecard format for Kounta.
- Mod: ClubCMS: Flexiclub welcome email updates
- Mod/Fix: ClubCMS: rMemberSignup: make the T's & C's open in a new window. Fix issue with selecting the Credit Card radio button.
- Mod: ClubCMS: rMemberSignup: update the amount on the Submit button when the Category is changed. Also, corrected the "Select" value on the Region dropdown (to make the form validation script work)
- Mod: ClubCMS: sql: add new column DiscountCode to the CWMembershipApplication table
- Mod: ClubCMS: sql: added inserts into CWControlProperty for the rMember Signup control
- Mod: ClubCMS: rMemberSignup: added new control properties: IsCheckEligibility and FlexiclubIneligibilityMessage
- Fix: Manual adjustments to member accounts did not work for clubs without the XERO product.
- Mod: Live: Functions: Unbilled customers page - allow user to select which order to be sent for invoice and added a text field for user to enter a reference/notes to an invoice.
- Mod: GOTG / Love Golf Play: updated the main site banner
- Fix: Live: Functions: Send functions unbilled customers - sales that were refunded should be excluded from the count.
- Mod: ClubCMS: Flexiclub signup: added validation of old membership number; added saving of Category Code, Postcode, and Region ID
- Mod: ClubCMS: rMemberSignupConfirmation: assign Discount Code (from LGDiscountCode) and include the code in the Welcome Email
- Add: Live: Functions: Log the OrderBrief payload that we are sending to Kounta. Fix: Live: Functions: Make sale date UTC.
- Mod: ClubCMS: sql: insert record into CWControlProperty for an existing control rGolf Facility Search
- Add: Logging to identify where Vend sales import is going wrong.  We have 2M json packets being retrieved from Vend at the moment for an unknown reason.
- Mod: Do not throw an exception on 404's anymore in ClubCMS.
- Fix: Hide ads in API for apps.
- Mod: ClubCMS: updated styles
- Mod: ClubCMS: updated styles; responsiveness
- Mod: ClubCMS: rGallery: added responsiveness styles
- Fix: Members Not Playing Report fixes - Performance improved (join Scorecard on Id, not ScoreCardId+ClubId) - Accuracy improved (should get the last played scorecard; this isn't always in scorecardid order because of future dated/preprinted cards) - In the case of many players on the same last-played date, order them by surname.
- Add: Link to DotGolf Connector installer added to the bottom of the Support portal.
- Mod: ClubCMS: Event: updated styles and mark-up of the register interest form
- Mod: ClubCMS: rGolfFacilitySearch: added "All Regions" option to the Region dropdown list
- Mod: ClubCMS: map.js: mapzoom level, and mapmarker style updates
- Fix: Vend auth in debug mode didn't work because the port number was missing from the URL. Fix: Sometimes we get nativeapp==null back in a VendPaymentType2; this stops a serializer error from occurring.
- Mod: ClubCMS: GetResignedMemberIdBasedOnComputerNo: it's possible that a user enters an incorrect computer number, hence, allow this to return a null member ID
- Mod: ClubCMS: rMemberSignupConfirmation: validate the previous membership number value
- Mod: ClubCMS: rEventSearch: added "All" option to the search filters
- Mod: ClubCMS: rMemberSignup: style updates; remove Privacy Policies link
- Fix: AppPerformanceTracker sometimes complains about the enumeration being modified while in use.
- Mod: Remove FUNC accounts from the loyalty actions list in Kounta.
- Mod: ClubCMS: rEvent: added a hidden program id
- Mod: ClubCMS: Love Golf refresh: style updates
- Mod: ClubCMS: Love Golf refresh: style updates
- Add: Functions: Stored proc for sending e-mail reminders to the clubs that there are unbilled customers - emails will be sent to the following club contacts: Generic email address and the Events and Operations Manager.
- Mod: ClubCMS: Signup Form: added note to Old Membership No. field
- Add: ClubCMS: sql: insert a new control property to the existing "rContent / HTML" control
- Mod: ClubCMS: rImage Slideshow: only go through the cropper js script if the page is in edit mode
- Mod: ClubCMS: rContent / HTML control: added a new control property, "IsHiddenOnEditMode". When the page is in edit mode and IsHiddenOnEditMode is true, the control is hidden. When the user exits edit mode, the control could be seen again.
- Mod: ClubCMS: rmailinglistsubscribe control: style updates
- Add: GOTG / Love Golf Play: updated css for footer and menu on scroll
- Add: GOTG / Love Golf Play: rename "Get on the Green" to "Love Golf Play"
- Add: GOTG / Love Golf Play: rename "Get on the Green" to "Love Golf Play"; updated logos
- Mod: GOTG / Love Golf Play: favicon
- Add: GOTG / Love Golf Play: added Love Golf Play logos
- Add: GOTG / Love Golf Play: added Love Golf Play logo
- Mod: Love Golf Play / GOTG: re-branding GOTG to Love Golf Play
- Mod: ReverseProxy: added back HTTPS for hawkesbaygolfclub.co.nz
- Fix: Live: Functions: Leave the name empty if a Xero contact already exists - we don't have to update the name when sending a Xero invoice to a customer.
- Mod: golf.co.nz: oops, accidentally committed a change to this control. although it's commented out, still reverting it anyway
- Mod: golf.co.nz: My Golf sidebar: added the SideBarImage control (initially used to promote the Toro Mower Challenge)
- Mod: golf.co.nz: moved the new SideBarImage control to the "controls" folder
- Mod: Live: Functions: Comment line where AXCurrency.ExchangeRate is accessed - we assume (for now) that rates are all in NZD.
- Add: golf.co.nz: SideBarImage control: will initially be used for a Toro advert and placed in My Golf (sidebar)
- Mod: golf.co.nz: removed the following sponsors as requested by Matt Q: AON, Hertz, STA, NZ Herald
- Add: Index for performance (actually already run on NZ1 on Aug 1st)
- Test commit for #11160
- Test commit for #11160
- Test commit for #11160
- Test commit for #11160
- Test commit for #11160
- Test commit for #11160
- Mod: Live: Functions: Added brief instructions on the unbilled customers page. Some minor styling changes.
- Fix: #11160 Two problems: If you create someone in DotGolf Live which results in the same PassportId and ClubId (eg. social member, resigned, then made live again, or just a resigned member who was resigned at the time the POS went live), the customer is detected as a duplicate in Kounta and it is not inserted properly.  We will now locate the customer in Kounta based on their encrypted proxy email address and link them up. Fix: If you resign a live member and there is already a resigned social member in Kounta by the same name and phone number, Kounta fails and the link is not inserted.  We'll now check them by proxy email address and link them up properly.
- Fix: AppPerformanceTracker was throwing an ORNS every time there are no log entries to write.
- Mod: Live: Functions: UnbilledCustomersPage - Don't show this page if the club does not have Xero and Kounta products and functions billing feature is disabled. Moved link to the left column.
- Fix: #11152: DotGolf Live: Subs Renewals: fix computation of the last instalment date if the member doesn't have any relevant payment history
- Mod: Live: Functions: Sort Kounta venue hire products alphabetically. Mod: Live: Functions: CopyBooking feature - Unable to save a copy of a booking if the source booking was already invoiced (sent to Xero). Should ensure that XeroInvoiceId is set to null when creating a copy. Mod: Live: Functions: Kounta setting - Functions Register. Sort Kounta register names alphabetically.
- Add: Live: Role: Script to insert new role AXAccountsManualJournals. Should fix ticket items #10885 and #11172
- Mod: Live: Functions: Made FunctionBooking.SearchXeroContacts public so I can use in other areas. Also, I've cached the Xero contacts (for 15 mins) to minimize calls to the Xero API. Mod: Live: Functions: Unbilled customers - changed the title to "Functions - Unbilled Customers". Added minor styling. Mod: Live: Functions: Kounta Settings - Added new DotGolf section to configure which Kounta register to use when posting a functions sale. Add: Live: Functions: New setting "DotGolf.Settings.Functions.KountaRegisterID". Mod: Live: Functions: Calendar page. Minor refactor - use FunctionsBillingManager.RetrieveUnbilledCustomers().
- Mod: ClubCMS: Toro: rename "Parkland Product website" to "www.parkland.co.nz" as requested by Jan/Jill
- Fix: ClubCMS: Event control: handle null facility details
- Mod: ClubCMS: sql: CWPage add IsBootstrapXl column
- Mod: ClubCMS: Terraces3: if CWPage.IsBootstrapXl is true, apply bootstrap-xlgrid.min.css to the page
- Mod: ClubCMS: terraces3: revert previous commit (removed reference to bootstrap-xlgrid.min.css)
- Mod: ClubCMS: terraces3: added reference to bootstrap-xlgrid.min.css for bigger screens
- Mod: ClubCMS: style updates
- Add: ClubCMS: terraces3: added bootstrap-xlgrid.min.css for bigger screens
- Mod: ClubCMS: style updates
- Mod: ClubCMS: style updates
- Mod: ClubCMS: Facility control: updated the banner image path to use the club folder path
- Mod: ClubCMS: sql: added more control property inserts
- Fix: Jenkins build error - forgot to do an SVN Add for new files.
- Add: Live: Functions: Added page to display a list of unbilled customers from the POS (paid using Functions Account payment method) and allows the user to invoice the customer right away without creating a function booking. Add: Live: Functions: Navigation - add new URL paths in the CalendarSubNavBar.ascx.cs and Standard.Master.cs. Add: Live: Functions: RecurringFunctionBookingGenerator - Added an optional HTTP GET parameter "clubId" to allow us to run the job for a selected club. Fix: Live: Functions: RecurringFunctionBookingsGenerator - The job fails when persisting a calculated booking.
- Fix: DW SQL schema script error.
- Mod: ClubCMS: responsive image slideshow control: added new property: HtmlOnImage (for text / image to be placed on top of the slideshow)
- Performance: Indexes for datawarehouse performance on the DotGolf Live dashboard.
- Mod: Subs Summary Chart widget modified to use an ajax call to load its data instead of inline in the dashboard load.  This will speed up the initial dashboard load, and in the event that the subs summary sql encounters issues, it will silently fail rather than holding up the whole dashboard.
- Mod: Performance: Cache IsSocialGolfEnabled for 24 hours - no need to pull this on every page load.
- Mod: Green Fee Report performance mod.
- Mod: Reverted revs 29949 and 29950 and replaced with a "Do Not Renew" option in the Renewal Overrides screen.  This means we'll no longer have trouble with items set to $0 and not getting renewed (such as what we do when initially importing a club's data).
- Fix: Unit tests were failing due to a lack of NZD currency in AXCurrency.
- Fix: ReverseProxy: Error in script caused non-www domains to still request a www from letsencrypt - this failed and cause the certificates not to get issued.
- Add: ClubCMS: Mailing List Subscribe control: to be initially used in the LOVE Golf site
- Fix: Hawkes Bay GC causing us trouble since their A record isn't pointing to the right place - removing HTTPS for now.
- Mod: ClubCMS: Toro: added new question: "How did you find out about TMC?"
- Mod: Set the SQL Command Timeout on the green fee report to 30s - no point having anything longer than that since the gateway timeout is 30s already.
- Fix: Public: MyAccount: The previous mod to ticket #10879 brought back the old line description (e.g. Kounta Order CF-15 charged to account) instead of displaying the actual sale item description.
- Mod: SSL for pennants.  Also changed it to load balance across both webservers because this is a stateless app.
- Fix: ClubCMS: MyAccount: The previous mod to ticket #10879 brought back the old line description (e.g. Kounta Order CF-15 charged to account) instead of displaying the actual sale item description.
- Add: ClubCMS: sql: CWControl CWControlProperty inserts
- Mod: In DotGolf mode I've added a link to the results report which takes us to an Adweb diagnostics page for the selected competition result record.
- Mod: Minor performance enhancement to the ClubDetails widget on the Live dashboard.
- Fix: Tee Booking History report slow - added a ClubId filter to the WHERE clause since we don't show country wide results, and this column is indexed for fast retrievals.
- Add: ClubCMS: sql: alter table CWGalleryImage to add Url column
- Mod: ClubCMS: added inserts into CWControl and CWControlProperty
- Add: ExtQuery: Functions: Unbilled customers report - list customers who were charged at the POS (Kounta) and paid using the "Functions Account" payment type.
- Mod: ClubCMS: style updates
- Mod: ClubCMS: updated css class name
- Mod: ClubCMS: Love Golf: rGalleryStyle2: open link in new tab
- Add: ClubCMS: Love Golf: rGallery Style 2: initially to be used for the partner logos
- Fix: Don't return the "No results for this report" message if only one of the data queries in the report returns empty.
- Mod: Improved gift card PAN generator to make the CSV files more Excel compatible.
- Mod: Live: Functions: Set the booking status to "confirmed" when creating a function booking for unbilled customers.
- Fix: Live: Functions: Check if there are KOUNTA line items from the xero invoice before posting a sale to Kounta. Add: Live: Functions: New ExtQuery report to generate a list of customers who paid using the "Functions Account" payment type at the POS. Clubs can then setup a function and send an invoice for these customers.
- Add: ClubCMS: gallery control
- Mod: Include ElasticTrackerModule in project.
- Fix: Build error.
- Add: Org Elastic logging.
- Mod: Small refactor to make Org tracking work.
- Refactor: AppPerformanceTracker moved to DotGolf.Shared where I can also use it for the other web apps.
- Mod: ClubCMS: Toro: updated the image in the email as requested by Mel. (Can't just update the image in S3 because old image is cached.)
- Add: Unique constraint to stop duplicate DrawCompetitionRound records linking multiple competition rounds to the same draw and causing doubled up draws in the Tournament Dashboard.
- Mod: ClubCMS: Golf Facility Search control: added filter to Facility query
- Mod: ClubCMS: added insert to CWControlProperty for the rGallery control
- Mod: API: Logging: Remove Loggly codes from API as we are now sending logs to Elastic. Also, the appSetting key LogglyEnabled is removed from the web.config files.
- Add: Indexes for performance.
- Mod: Try and mitigate the high CPU issue caused by the Tuespechkin PDF converter. - Lazy singleton pattern implemented (but this should not change the existing behaviour - it's just a better way to initialise it without duplicated code) - Start TuesPechkin in application startup using an AssemblyInfo.cs tag - should fire it up when the app starts instead of when the first report is exported.  This way we will see problems in Vortex straight away rather than delayed.
- Mod: Live: Functions: Added additional filter to include Current Asset type accounts from Xero.
- Mod: Live: Functions: Add additional filter in the SQL logic to check if the Passport.DeletedDate is null.
- Fix: Gift cards: Handle ;xxx? magstripe format for gift card inputs.
- Fix: Gift cards: Handle ;xxx? magstripe format for gift card inputs.
- Fix: Gift cards: Build errors around nullable AXCurrency.ExchangeRate.
- Fix: AXCurrency.ExchangeRate allows nulls now.
- Mod: Gift cards: Fixed a few annoying UI issues. Fix: If the account type can't be exchanged for NZD (eg. balls, buckets, golf rounds), we should not attempt to post journals to Xero. Fix: AXAccountType.ExchangeRate should allow nulls since not all currencies can be exchanged for NZD.
- Fix: Push Notifications: Fixed incorrect unread message count sent to the user. We should only count unread messages from the first time the user registered for push notifications.
- Add: Gift cards: Vend can now process gift card topups via a specially configured product (and scanning the card PAN into the Notes box on that product line).
- Mod: Gift cards: ActivationDate should allow nulls.
- Add: Gift cards: Ability to redeem gift cards from Vend using a custom Payment Type.
- Add: Gift cards: SSO now has a short URL target which we will encode onto gift card QR codes.  Format: https://sso.golf.co.nz/gc/9476613611855111
- Mod: Gift cards: Ignored js and js.map files, these are generated by the Typescript compiler.
- Mod: Gift cards: Implemented txn history, journals. - Journal page updated to handle gift cards. - Add: Gift card management area to allow gift card enquiries. - Member Account Activity report modified to enable gift card activity listing.
- Mod: ClubCMS: sql: CWControl and CWControlProperty inserts
- Mod: Gift cards: Ability to generate new gift card numbers from Adweb.  For now, we'll do this on behalf of IDS; I'll make this page available to IDS directly at some point in the future.
- Mod: Standard Web.config settings added to Adweb.
- Mod: Gift cards: Changed gift card ExternalSystemId format to stay consistent with the rest of the system.
- Mod: Gift cards: Added AXAccountTypeId so that I can track the type of gift card when the PAN is inserted.
- Mod: sql: ClubCMS: add IsLoveGolfActive column to Facility table
- Mod: Gift cards: Refactored some stuff, probably broke the Live build now - will fix shortly.  Kounta integration is untested but in theory working.
- Mod: ClubCMS: rEventSearch: disable the Program dropdown if the LgProgramId is specified in the control property setting
- Add: Gift cards: Process gift card activations/topups from Kounta.  To do this you select the appropriate product (one with dotgolf-account-type:GIFT), enter a variable amount, and enter the card PAN into the Notes box.
- Mod: ClubCMS: rEventSearch: added Program filter, show message when there are no events found
- Mod: ClubCMS: Love Golf controls: CSS updates
- Add: Gift cards: Lookup AXAccount by gift card PAN.
- Mod: Gift cards: Disabled topups and refunds since Kounta is currently a bit broken.  Waiting for them to fix their stuff, and in the mean time we'll just process gift card credits based on a special product line.
- Mod: ClubCMS: UI and CSS updates
- Mod: ClubCMS: updated the dimensions of the generic "golf club logo"
- Mod: ClubCMS: rEventSearch: added filtering by LgProgramId (SLG, Futures)
- Mod: ClubCMS: rEventSearch: added filtering by Region
- Mod: ClubCMS: rGolfFacilitySearch: updated a data attribute name
- Mod: ClubCMS: Love Golf controls: css updates
- Add: ClubCMS: rEventSearch control: initial commit
- Mod: ClubCMS: added inserts into CWControl and CWControlProperty tables
- Mod: Shared: Data: LGOffer: add LGProgram
- Add: Shared: Data: LGProgram
- Add: ClubCMS: Event control
- Fix: Cache key collision in Live (xero-accounts-xxx)
- Fix: Exception thrown when you try and access LiveOrResignedMember on a Passport for a non-playing (nonaffiliate) member.
- Mod: ClubCMS: updated css class name
- Mod: ClubCMS: Facility control: added display of events
- Mod: ClubCMS: just made this generic "golf club logo" more generic (golf flag icon only instead of having a "my golf club" text along with the golf ball icon)
- Add: ClubCMS: Futures and SLG logos - used as default image for events
- Mod: Live: Functions: Change wording "Manual POS Adjustment" to "Manual GST adjustment to Functions Clearing Account – please ignore.". Mod: Live: Functions: Add clubId and hasKountaProduct arguments to GetVenues() method. Removed some "TODO: xxx" comments that are no longer applicable. Mod: Live: Functions: FNCustomer.GetCustomerExternalSystemId() - Add condition in the SQL statement to check if DeletedDate is null.
- Fix: Attempting to post manual journals to a resigned member resulted in an error (Passport does not belong to a member of your club).
- Mod: Live: ClubTag: Member Tags - Initial commit. 1) Ability to add tags on the member's profile page (first tab). 2) Displaying the members' tag on the tee sheet.
- Mod: ClubCMS: Facility control: display details about the Facility
- Mod: ClubCMS: terraces 3 css - make sure that there's no horizontal scrollbars on the page
- Mod: ClubCMS: rslicksliderwithvideo - css update
- Add/Mod: ClubCMS: rFacility control initial commit; update links to the facility page
- Mod: API: Kounta: Loyalty Actions - Put back intro_text without the HTML tags.
- Mod: ClubCMS: rGolfFacilitySearch: added control title, updated styles, display default image if club logo is not found
- Add: ClubCMS: Golf Facility Search control: initial commit / work in progress
- Fix: Live: Functions: If a Functions catering product does not have menu items linked to it, return an empty list instead of NULL. Mod: Live: Functions: FinaliseFunctions() - Typo in error message.
- Fix: Live: Functions: Set the ViewModel.ClubId property for new bookings (from UI) using the WebUser.FromHttpContext.ClubId value. Fix: Live: Functions: Menu item name is blank when viewing a function booking's sales quote.
- Mod: Live: Functions: QA - check if the productFull object and the productFull.tags is not null before executing a LINQ query.
- Mod: ClubCMS: Toro: update email template from 2017 to the 2018 one
- Mod: Shared: TORO Mower Challenge Registration 2018 - email to be sent after registration - updated text
- Add: Shared: TORO Mower Challenge Registration 2018 - email to be sent after registration
- Fix: Live: Functions: Use the KOUNTA_FUNCTIONS_PRODUCT_TAG_PREFIX when filtering for venue hire products from Kounta. Fix: Live: Functions: When trying to determine if a product modifier has a functions-product-menuitemcategory: tag, a null exception is encountered. Check if the product's tags property is not null before accessing.
- Mod: Initial gift cards implementation for Kounta.  This currently works on any member account by passing the AccountUID value as the gift card reference (keyword), however this will change as we go further into the project.  Setup is currently active in the Kounta Dev add-on, not Stage or Prod yet - not ready for that.
- Fix: API: MyGolfController: GetProfileAysnc endpoint - another area where DOB is returned to the app. If DOB is null, we give it a 1900-01-01 value.
- Mod: Refactored member profile thumbnail URL code for Kounta to avoid creating a Member object on the way.
- Add: sql: CWControl and CWControlProperty inserts
- Mod: ClubCMS: rSlickSliderWithVideo: style update
- Fix: API compilation failed due to method signature change in TestObjectTracking.
- Fix: API: UserController: Returning a null DOB did not work out for the app and it causes a crash when a user tries to change his DOB from the app using "Edit Profile". Decided to just return a 1900-01-01 DOB.
- Add: Early timesheet release per category.  If you put a number of hours into the Category area (Timesheet Early Release Hours) we will make tee times available to members in affected categories earlier than normal members.
- Mod: ClubCMS: rSlickSliderWithVideo: added caption, button, updated styles, added new control properties
- Fix: API: UserController: GetUserDetails end point encountered an exception if a member's DOB is null.
- Add: ClubCMS: rSlickSliderWithVideo initial commit
- Fix: Live: Functions: Recurring bookings - Future events (non-persisted) when previewed on the functions calendar shows "Deleted".
- Mod: GOTG: SendBulkEmail: added "http://" to the "live.golf.co.nz" onlineContentHost value
- Mod: ReverseProxy: apply https to chisholmparkgolfclub.co.nz
- Mod: Live: Functions: GetKountaMiscellaneousKountaProduct() - Return an empty object instead of NULL.
- Fix: Live: Functions: Quantity field is always set to 1 for Extra line items. Fix: Live: Functions: Compute the total SurchargePerPerson and add it to the product's total. Fix: Live: Functions: For sending a Xero invoice for functions created before Kounta products integration and that function already have non-Kounta products (i.e. venue, catering, extra) added to it, only send those items to Xero.
- Fix: Kounta no longer allows us to send HTML in the loyalty actions API, so we had to remove the nice looking table we had with the account balances.  Now we embed these in the rewards array; the user will have to look a little bit harder...
- Mod: GOTG: update to standard banner
- Mod: sql: wa_CalculateToroMowerChallengeResult: Toro Division changes as requested by Phil, NZG. New Divisions: 12 or less, 12.1 – 24, and 24.1 plus Previously: 8 or less, 8.1 – 18, and 18.1 plus
- Mod: API: Logging: More exception logging.
- Mod: Connector: Throw an exception if there is an API call trying to access TWAIN and TWAIN has failed to initialise.
- Add: Connector: Monitor thread that will kill the twain thread if it doesn't successfully initialise.  We do this because /sometimes/ twain hangs itself up and uses 100% of a core, which slows down client PCs.  Whitford Park had this problem (fixed with ScannerTwainSource=None in the configuration file), and so does Warkworth (I'll test them with a new build).
- Mod: API: Logging: Add exception message in the DebugLog.
- Fix: Accidentally committed unrelated changes to API.
- Mod: Toro sp: updated the week number (week 40 is when the competition starts)
- Mod: API: Ads: Updated ad images for inline scores (after-2 and after-20).
- Add: AppPerformanceTrackerEnabled now defaults to true in prod.
- Mod: Changed userHostAddress code - need to honour X-Real-Ip from nginx. Mod: Only log application/json responses - no need to log images etc. Add: UserAgent logged directly, headers removed. Add: Exception Id and other minor fields. Mod: Group elastic indexes by start of week so we can nuke them weekly. Mod: Renamed CorrelationId to id so that elastic will use this as the unique key.
- Fix: #10214: DotGolf Live: searching resigned members: live_FindMembers_SearchText: null NonAffiliate.ComputerNo was causing the error, exclude them from the result
- Mod: Reverse Proxy: applied https to all existing responsive sites.list Akarana Bottle Lake Boulcott's Farm Heritage Chisholm Links Clarks Beach DotGolf Gulf Harbour Hanmer Springs Hororata Judgeford LoveGolf Mangawhai Marlborough Miramar Mt Maunganui Omanu Otago Paraparaumu Beach PGA Pupuke Tauranga Te Awamutu Toro Mower Challenge Waikanae Wainuiomata Waitemata Whangamata
- Mod: API: Logging: Send Web API logs to Elastic Search - Forgot to include the packages in the previous commit.
- Mod: API: Logging: Send Web API logs to Elastic Search.
- Fix: Live: Functions: Fixed a bug in previewing a xero invoice. When you add a custom product under catering and you leave the amount to blank. This should default to zero. Was directly accessing the value of a nullable object (i.e. decimal?).
- Fix: Live: Functions: Add menu item does not seem to work when you choose the first item from the menu options combo box. Mod: Live: Functions: Use DataCache.Query when retrieving option sets - to improve loading time.
- Fix: Edge case where Connector error would appear even though it is online.  Also removed the alert(), it's too much of a PITA for an auxiliary function that users won't care about.
- Fix: The space in "Prod Live.NZ" caused me problems.
- Add: Warning message in POS if the Connector is unavailable.  Some handy troubleshooting info also included.  This is much better than the checkout dialog hanging when loaded without the Connector service going.
- Fix: golf.co.nz: tournament player stats returning an exception because there are no eagles; check for null
- Mod: Removed packages; we do a NUGET RESTORE on Jenkins now.
- Mod: StatsDPerfMon modified to play nice with EC2.  Config files separated per host (prod/stage).
- Ignored some stuff.
- Fix: Live: Functions: Fix Jenkins build error.
- Mod: Live: Functions: Forgot to include DotGolf.Shared.csproj from the previous commit.
- Mod: Live: Functions: POCO classes for Kounta Site and Register.
- Mod: Live: Functions: Adding products to a functions event in DotGolf - If a club has a KOUNTA product enabled, we searched on products in Kounta that are tagged with the "functions-product:xxxx" tag. This applies to venue hire, catering and extra/equipment items. For buffet menus, we use product modifiers as menu items.
- Mod: Performance improvement in the POS; if a signalr event is received (create, update or reprint), we will no longer refresh the entire list of scorecards; instead we will only update the scorecards that we need to update (using the Id passed in the event).
- Add: This index speeds up the overnight cleanup job by allowing fast searches by email subject.  I'm hoping this will stop the alerts we're getting from Public.2012 at 5:10am.
- Mod: ReverseProxy: apply https to northshoregolfclub.co.nz nsgc.co.nz warkworthgolfclub.co.nz pukekohegolf.co.nz
- Mod: ClubCMS: Flexiclub: filter the category options (don't need to have the existing category, or the renewal category in the options)
- Mod: ClubCMS: Flexiclub Member Signup control: style updates, text updates; added validation to the Old Membership No. field
- Mod: Wait for XeroSync to complete before overwriting binaries.
- Add: Xero Sync publish script.
- Mod: ClubCMS: Flexiclub: when the user signing up enters an old membership number, use the existing Member record / Member ID, insert a new record into the Cmember table, insert new record into the PassportCredential table
- Mod: Got the bootstrap command working - now on to implementing the publish script
- Mod: Write temp file to see if this is working.
- Add: Parameters
- Mod: ClubCMS: responsive Content control: use the original ClubEditor.config file
- Fix: Escaping
- Fix: Escaping
- Fix: Escaping
- Fix: Escaping
- Fix: Command line escaping.
- Fix: Path
- Add: XeroSync deploy - initial commit.
- Fix: XeroDocumentSender: Send the TranDate to backdate the journal because we're only posting it the next day.
- Mod: XeroDocumentSender: We now group the manual journal posting into a single document with multiple lines coded to their own accounts, rather than one MJ for each type of coding.  This means that a XeroDocument on our side matches an MJ in Xero, which means the reports marry up.
- Mod: Transaction Processor: comment out the GEAP auto renewal (though this was never implemented)
- Fix: golf.co.nz: tournament dashboard: style fix: align History and Venue
- Mod: golf.co.nz: tournament dashboard page: swap the places of the stats and the news controls so the news could be seen easily (as requested by George)
- Mod: ClubCMS: Member Signup: use date picker for date of birth
- Mod: Suspected LINQ deferred execution is causing problems obtaining Thread.CurrentPrincipal.  https://blogs.msdn.microsoft.com/charlie/2007/12/10/linq-and-deferred-execution/
- Mod: ClubCMS: rMemberSignup: added form validation
- Mod: Golf.co.nz: updated the tile images on the "About NZG" page as requested by George
- Mod: Golf.co.nz: updated the tile images on the "About NZG" page as requested by George
- Mod/Fix: ClubCMS: Member Signup Confirmation: fix the end date; update the email text
- Mod: ClubCMS: Flexiclub: Member Signup Confirmation: updated the text in the email sent to the club; added link to /TabMember.aspx?MemberId="; when updating the TBTransaction record, set the MembershipApplicationId as well (this was just missed)
- Mod: ClubCMS: Flexiclub: rMy Account: added / updated alert messages
- Mod: ClubCMS: Flexiclub: rMy Account: allow member to change the renewal category
- Mod: ClubCMS: added the missing fire image
- Mod: Public: Global.asax: added golf.co.nz/GEAP redirection to /MyGolf/GEAP.aspx. Removed the setting just added to the web.config file.
- Mod: Check whether ClubItem.AccountCode column exists before attempting to use it.
- Mod: Removed original Xero manual journal code from AXAccountTransaction - this is now done in the overnight job via XeroDocument.
- Mod: Public: webconfig: added golf.co.nz/GEAP redirection to /MyGolf/GEAP.aspx
- Fix: A preload reference to AccountCode.
- Mod: ClubCMS: rMy Account: added reactivate membership functionality which just sets AutoResignAtEndOfSubscription to false
- Fix: EOL problems - should have only unix style EOL (LF)
- Fix: Chomp sites.list in case someone embeds a CRLF, not just LF.
- Mod: SQL bug, and made it a bit safer (don't update if AmountNZD already has a value)
- Mod: ClubCMS: rMy Account control: added the ability to cancel the membership (effective at the end of the current subscription); this feature could be turned off/on through the control property EnableCancelMembership
- Mod: Better way to include today's transactions (and not future ones).
- Mod: Ability to generate Xero batches including today's transactions (useful in dev)
- Mod: There was a 2 minute delay before we try sending a XeroDocument batch over to Xero - annoying in Dev but would not have affected Prod.
- Fix: TRY_CAST because this was causing cast exceptions in Hugh's account in devpublic (4761144)
- Mod: Small tweaks to the Xero Batch Detail report.
- Fix: AXAccountTransaction.AmountNZD boolean logic bug.
- Fix: sql: corrected the previous commit; add the new property to the my account control not the sign up control
- Mod: Xero journals for AXAccount transactions are now batched and sent once daily.  The dga_NightlyBatchAXTransactionstoSendToXero procedure creates the batches, and the existing XeroSync process sends the journals to Xero.
- Mod: sql: ClubCMS: added another new property to the rMy Account control
- Mod: ClubCMS: Just differentiate a bit the intro text of the email notification to be sent to the member or the club.
- Mod: ClubCMS: Contact Form: enable submit button if sending a message to a member
- Mod: API: MyGolf: Disable ads
- Fix: Xero lock key was a typo, which would have prevented more than a single sync per 5 minutes - not a problem in prod, but a nuisance in dev.
- Fix: tar was printing some annoying error messages to STDERR.
- Fix: bootstrap.pl bugs around backups.
- Mod: Refactored to try and make Jenkins work with this.
- Mod: Refactored to try and make Jenkins work with this.
- Merged revision(s) 29976 from Trunk: Mod: ReverseProxy build: Handle SSM command errors and display in promotion output. ........
- Mod: ReverseProxy build: Handle SSM command errors and display in promotion output.
- Mod: Backup /etc/nginx and /etc/letsencrypt before making any changes.
- Mod: ReverseProxy: Bootstrap script only worked properly for Prod, now updated to work for Stage too. Mod: For safety, we test the nginx configuration before reloading the server. Add: Jenkins script for sending the update command to reverse proxy tier.
- Mod: sql: insert new property (CWControlProperty) for the existing rContact Form control
- Mod: ClubCMS: responsive Contact Form: insert the email address into the club's or association's mailing list. The mailing list name could be configured (some websites have multiple / different enquiry forms), but the default mailing list name is "Online Enquiry".
- Fix: Performance enhancement in the calendar helper (used to load competition details when hovering over them in the calendar).
- Fix: Preload more fields for Competition.CompetitionRounds and also refactored to improve comp setup load speed.
- Add: Competition Setup: Timeout when loading Eclectic with 92 rounds - suspect this query to be the cause so refactored to simplify it.
- Fix: Improved load speed for competition dashboard by removing an unused join to TBTimeSlot.
- Mod: Cache LoadMarkersForCourse() results given this is being called a lot from the same competition (if multi round)
- Fix: Use $WCREV$ tags instead of Math.random - this avoids a LOT of small html file requests to the backend. Mod: Removed Thread.Sleep() from JSON.ashx in debug mode.
- Mod: API: MyGolf: Replaced NZ Women logo to Holden logo for login-banner-bottom-fixed
- Fix: Increased width of ClubSetting.AccXeroBankAccountNameForDirectDebitDeposits column to accommodate long account names (Matt got an issue saving the direct debit deposit account for Ohope Int.)
- Mod: Green Fee Report performance fixes - Join TXHeader to help filter by Club - turn LEFT JOINs into INNER for ClubFeeGroupClub and ClubFeeGroup tables in the first select (tested - this does not change the results) - got rid of UNION ALL and changed to separate selects to give the optimiser a better chance to find a plan before timing out - removed CONVERT() calls around indexed date/time columns and change the RHS instead - FORCE ORDER on second query (group bookings) because there are often very few of these, resulting in bad statistics and a corresponding bad plan.
- Fix: That last commit caused a bug where renewal overrides stopped working properly - copy and paste.  Saved by Nunit! Mod: Tests improved with specific checks for renewal amounts.
- Mod: #10916 This is a hack on top of a hack.  History: Clubs use a renewal override to set an item to $0 if they don't want that item to renew going forward (eg. locker fees if the member doesn't want a locker anymore).  Unfortunately in the year after the initial renewal, they start getting billed again, because we pick up the default amount from the CategoryItem (because there is no renewal override for the 3rd year for that member).
- Add: Index to speed up ClubId partitions on TXHeader - this is a nice cheat to allow us to list transactions for a particular club quickly.  Unfortunately TranDate seems to be null for all headers, which sucks, but we can fix that in the future.
- Mod: Use undocumented Kounta API endpoint to get completed orders since a UTC timestamp.  Email trail below.
- Fix: API: MyGolf: Include the ImageId in the S3 object key when uploading a profile photo.
- Mod: The links were broken in the eDM test that I did this morning, so made this mod to use the Live email tracking instead.
- Mod: The links were broken in the eDM test that I did this morning, so made this mod to use the Live email tracking instead.
- Mod: Performance: TBLog entries don't have to be written for past scorecards, this was causing performance issues around Eclectic competitions.
- Fix: Numpad: If you hit Enter to select an ask-quantity product in the POS, the dialog pops up to ask the quantity, but disappears straight away. Fix: Numpad: After doing the above test, if you search for a product again and it is the only search hit, then the numpad would appear straight away without waiting for the user to select the product first (immediate selection bug). Fix: Numpad: ESC stopped working after the first fix above.
- Fix: Only the first special prize was posted to AXAccounts (even if there were multiple winners).
- Mod: API: MyGolf: Added HomeClubMemberNo to the GetProfileResponse - The HomeClubMemberNo will only be populated if the profile being fetched is for the current signed in user, specifically in the GetProfileAsync() endpoint.
- Fix: Vend SalesUpdate.ashx exception when parsing a specific type of sale (with a Xero payment attached).  http://adweb.golf.co.nz/ViewExceptionDetail.aspx?Id=401941382
- Fix: https://github.com/dotgolf/pos2018/issues/57 Multiple account payments on same sale causes error.
- Mod: Add more order info to the KountaSync output; great for diagnostic purposes.
- Fix: Small bug that caused an error to appear if you go OK on the manual score entry screen on the kiosk.  Now shows a user friendly message instead.
- Fix: #10880 Test Note
- Fix: #10880 Test Note
- Fix: #10880 Duplicate passports caused by clubcms social member registrations - if a passport already exists for a member before they've registered.  This is common at clubs with AXAccounts where the member balances have been imported (and passports created during this process).
- Fix: Shared: SQL: wa_TBSearchByClubDay - Fix #10884. Taupo - Green fee special FIRE not showing in golf.co.nz
- Mod: Prizes to revenue accounts (annoying but it's the way it's done at Remuera)
- Mod: Allow posting prizes to current liability accounts too.
- Mod: Moved EmailCompose storage to S3 (static content bucket).  This is the final frontier to allow full load-balanced DotGolf Live+Edge, and to get rid of the S3 sync job for Live and Edge.
- Fix: ClubCMS: MyAccount: Fix #10879 - Loyalty earned display on club website. Display which POS the sale was made that earned loyalty points.
- Fix: ClubCMS: MyAccount: Fix #10879 - Loyalty earned display on club website. Should be display a more clear description for line items on loyalty earned similar to public site.
- Mod: AXAccounts: Minimum balance rule should not stop a transaction if that transaction is trying to increase the account balance (but the end balance is still below the minimum).  Eg. Someone is $100 overdrawn and wants to apply a $50 topup, we should let them even with hard limits enabled. Mod: Refactored AXAccountTransaction.Put() to integrate Xero journals, since this is used virtually everywhere .Put() is called.  Now we only have to pass it the Xero account Id or Code and it'll do the rest, including fail-safe transaction rollbacks if the Xero post fails. Add: Competition prizes will now post to Xero as well as to member accounts.  Note that we still have to do https://github.com/dotgolf/pos2018/issues/35 to allow for different Xero expense accounts for prizes (per competition), but for now I've added a single account setting in Settings/Xero. Add: Unit tests to test the adjustments to the minimum/maximum account balance rules.
- Fix: Noticed this bug where the settings table is not filtered by Name.  Should not affect anything because the value happens to be a guid, but still.
- Mod: Improve 429 response handling (rate limiting) by throttling the member import process to Vend.  This is often the cause of member sync issues when we first go live with a club.
- Mod: Remove payment type settings from kiosk since these aren't used anymore.
- Mod: We now take AXAccount topup commission from the customer, not the club.  Modified gs_CreatePayment.
- Mod: We now take AXAccount topup commission from the customer, not the club.  Modified SendTransactionReports, Reconciliation Report and Create Payments.
- Mod: The AXAccount topup transaction fee is now charged to the member, not the club.  TBTransaction.Amount contains the topup amount and TBTransaction.TransactionFee contains the 5% amount. Fix: #10721 FPRN from DPS will now work, so it doesn't matter if the user doesn't return to the PaymentConfirm page, we'll still process the transaction.
- Mod: Old settings in Web.config still sent traffic via TLS.
- Mod: Go to http for Modica - their TLS certificate currently has an untrusted intermediary, so we can't connect.
- Mod: Use TLS1.2 for SonicMobile.
- Fix: Hospitality levy credit was not applied to member accounts for instalment based invoices. - fixed an aliasing bug that caused a random instalment ($50) to be selected for the instalment, instead of the first one attached to the invoice we're considering. - added a deleteddate check for invoice (for safety - should not have affected anything in prod since payments cannot be applied to deleted invoices anyway).
- Mod: ClubCMS: made the receipt club logo dynamic (work in progress); rephrased a few terms used on the UI
- Mod: ClubCMS: Member: GetInvoicesForMember: corrected the query to return unique invoice records
- Mod: ClubCMS: My Account controls (used by PGA, and to be used by Flexiclub); improved the email (receipt) and used the new html email template.
- Mod: ClubCMS: My Account: updated display of membership details, and next billing; updated styles, make table responsive
- Fix: A few bugs that stopped category tag based loyalty from being credited at Remuera.
- Add: More logging around loyalty processing from Kounta.
- Fix: If a club is only using category tag based loyalty (and no default loyalty percentage), no loyalty was being processed against member accounts.
- Add: Logging to the Kounta sale.update webhook so we can see what is going on with loyalty not being applied at Remuera.
- Fix: When running Vend with multiple registers, only topups from one till worked (due to only one register uid).  Changed to use the RetailerUID instead.
- Mod: Live: Receipt Reverse sql script: commented out "select @NewOutstandingAmount [@NewOutstandingAmount]" because there's no need to return this value. It's causing a "Specified cast not valid" error to be thrown out.
- Mod: Bump tampermonkey script version.
- Fix: If cash rounding is enabled in Vend, the cash drawer kick did not work.
- Mod: API: Notifications: Commented line of code that calls ResetBadgeCount method. It was supposed to clear the app icon badge number every time the user de-registers the device (sign out) but it works only on the first try. Decided we handle this in the app instead of server-side. GitHub issues: https://github.com/dotgolf/teebooking/issues/284 and https://github.com/dotgolf/mygolf/issues/71
- Mod: API: Notifications: Code refactor. Move code logic for creating push notifications into a private method "SendPushNotification".
- Mod: API: Notifications: Reset the app badge count during de-registration of the app from push notifications. Mod: API: Messages: Query optimization. Use "select top 1" because we are only interested in getting the first row from the sql results.
- Add: Project file for vend-cash-drawer kick.
- Mod: API: MessagesController: Only retrieve messages from the time the user first signed-in thru the app.
- Mod: When querying loyalty actions from Kounta when there is no sale yet, the request crashes because of the empty JSON returned.
- Mod: Removed Kounta/ProductUpdate.ashx logic and moved to background job - now update requests are being pushed into a queue and done in the sync.  Otherwise we run into performance problems when Kounta hits us with a load of updates.
- Mod: Removed Kounta cache for now - trying to see if this is performance related.
- Fix: Loyalty: Allow for 1dp on loyalty percentage.
- Mod: Refactored to move more TBP related update code (UpdateTicketEntryPaidFlag_PreviouslyPaid) to the Shared library.
- Mod: Refactored to move more TBP related update code (UpdateTicketEntryPaidFlag_PreviouslyPaid) to the Shared library.
- Refactor: Removed duplicated TBP update code; there is a new method in the DotGolf.Shared library that does the same thing.
- Refactor: Removed duplicated TBP update code; there is a new method in the DotGolf.Shared library that does the same thing.
- Add: TBTicketEntry.OriginalClubFeeDetailId column and populate. Mod: Refactored the paid flag update into the Shared library so we can re-use it from other projects (ClubCMS, API).
- Fix: #10820 Also corrected the combined score Slope Rating/HD rounding error in the API for the MyGolf app.
- Fix: #10820 Combined scores for approx 25% of members were showing up incorrectly because of a rounding error.
- Fix: Stop Kounta loyalty actions call failing if you add a customer to the order without adding products first.
- Mod: Live: Subs instalments: allow editing of instalments on preview mode; add the ability to edit the instalments table or to show the table as text only.
- Mod: Live: Instalments preview: added OutstandingAmount (equal to Amount; or if this is used to preview instalments with payments/cn, then the outstanding amount for payments/cn to be inserted as an instalment record is 0)
- Mod: Live: Subs instalments: display values as read-only when generating the instalments
- Mod: sql: Instalment CK_Instalment_CannotDeletePaidInstalments: disable the constraint; not deleting it yet, just in case
- Mod: AdWeb: TeeBooking Search: Add new column to show which system/source the tee booking was initially created.
- Mod: Live: Subscriptions: allow to update Paid Date
- Add: DotGolf Live: Unit tests to test DotGolf Live specific stuff.
- Fix: Crash if used against NUnit test database.
- Fix: The NUNit test databases don't have an Association=1000, so this script failed to run.
- Fix: Bump tampermonkey script version.
- Mod: Live: Subs instalments: allow editing of Amount and OustandingAmount
- Mod: Live: Subs instalments: allow editing of Amount and OustandingAmount; allow deleting of Instalments
- Mod: Invoice: added list of instalments linked to the invoice
- Mod: Hack - allow ?AllowMultiPayment=true on url on ConfirmAmounts (golf.co.nz) for our internal testing.
- Mod: Remuera swipecard format support for Kounta.  Example: ;103617495?+?
- Mod: ClubCMS: bindings.list: removed harewood2.cw.golf.co.nz (don't need it)
- Mod: ReverseProxy: removed harewood2.cw.golf.co.nz (don't need it)
- Mod: ReverseProxy: sites.list: added S to Remuera; and added new lines: -,-,0,1,harewood2.cw.golf.co.nz -,-,0,1,hawkesbay.cw.golf.co.nz S,W,0,1,hawkesbaygolfclub.co.nz S,W,0,1,napiergolf.co.nz -,-,0,1,timaru.cw.golf.co.nz S,W,0,1,timarugolfclub.co.nz -,-,0,1,waihi.cw.golf.co.nz S,W,0,1,waihigolf.co.nz
- Mod: Org: just corrected page title
- Mod: ClubCMS: bindings.list: added the following: harewood2.cw.golf.co.nz
- Mod: Removed extra tags from green fee products in Vend; they only clutter up Vend reports. I've kept "Green Fee" and have also added "Cart Fee", "Group Fee" etc for the club fee groups in our system, so everything isn't tagged "Green Fee" anymore.
- Mod: Performance: Put Eclectic competition recalculate requests into a Redis queue and recalculate them when we process results (using ProcessResults.ashx) rather than in the same transaction as the api_AddScore call.
- Mod: BulkEmail: just corrected typo error on "associationId"
- Fix: #10802: Org: North Harbour Golf couldn't export the report to pdf because Master.Shared.ClubName is null (used in the redis key); use the Association Name instead for associations.
- Add: Allow user to open an account for a member. This will allow them to do a manual journal to add/remove money for a member who does not have an account yet.
- Mod: Kounta: Try to stop syncing if an app_offline.htm file appears.
- Mod: Start the app pool after copying in the files.
- Mod: Add a more sensible timeout for Robocopy (25s) because it will now take down the site - if a copy doesn't succeed we don't want it to retry infinitely (the default behaviour).
- Mod: Use an intermediary folder to stage the files, then quickly kill the site, copy over the new files, start the site again.
- Fix: Removed --recursive.
- Mod: Live: Invoice update: only update the invoice in Xero if the Invoice Amount and OutstandingAmount are still equal--which means that there's no payment against the invoice yet.
- Fix: Bug saving app_offline.htm
- Mod: use AWS CP instead of AWS SYNC - hopefully this will be better at not missing files. Mod: use app_offline.htm to see if we can be better at handling requests that come in while we're busy deploying.
- Mod: ClubCMS: My Account: updated display of current membership details (in progress); style update
- Mod: ClubCMS/Shared: added ClubMember.RenewalCategory
- Fix: A couple of small bugs in the loyalty matrix maintenance area. JS error when you click OK in the Add dialog without selecting anything, and the category/product tags didn't reload after you saved, which made it look like it didn't save properly when it actually did.
- Fix: pos2018/#43 Vend: Sales got messed up if you reselect a closed sale and click CLOSE in the DotGolf POS.
- Mod: Removed extended SQL timeout from Green Fee Timeline report.
- Fix: Hide DotGolf Only section in Journals.
- Mod: Manual Journal: When in dont-post-to-xero mode, hide the Xero Account combo; less scary for the person doing this.
- Mod: Manual Journals: Allow DotGolf to post MJs to accounts without posting to Xero.  Normally they go both places always.
- Mod: ClubCMS: My Account: updated text and styles
- Add: Product/Category Tag based loyalty rules - rule processing. This commit adds the automated crediting of loyalty based on the rules that are configured.  Loyalty precedence works like this (in priority order):
- Mod: sql: added inserts into the CWControlProperty table for the existing rNavBarv2 control
- Mod: sql: added insert into CWRole table
- Mod: ClubCMS: My Account: Payment History: display receipt # and invoice # Invoice History: return only active invoices
- Mod: ClubCMS: My Account: display invoices
- Mod: pos2018/#33 Product/Category tag based loyalty rules - UI (no rule processing yet).
- Mod: ClubCMS: Member Signup Confirmation: receipt email: still include a separate line for the joining fee
- Mod: ClubCMS: rLoginX: added log out code
- Mod: ClubCMS: Member Signup Confirmation: create one receipt record only
- Mod: ClubCMS: rNavBarv2: added new property NavBarRightLiItems
- Mod: ClubCMS: rNavBarv2: added new property CssClassNameLitMenuWrapper
- Add: Category tags schema and maintenance UI. You can now add tags to categories in DotGolf Live.  We'll shortly start to use these for loyalty discounts for product groups (Remuera).
- Mod: sql: api_GetActivePassportForCredentials: added @AllowResignedToLogin parameter (default value false); resigned Flexiclub members would be allowed to log-in but they would just be able to reactivate their subscription.
- Mod: sql: Setting: insert joining fee club settings for Flexiclub
- Add: sql: insert Flexiclub into Club table, insert matt user
- Add: sql: CWMembershipApplication add new columns (to be used by Flexiclub member sign up)
- Mod: ClubCMS: Member Signup: assign values to StatusCode, StatusDate when inserting a new CWMembershipApplication record
- Mod: ClubCMS: Member Signup Confirmation: update the CWMembershipApplication record after a successful payment
- Add: sql: CWControl and CWControlProperty inserts (controls to be used by Flexiclub)
- Mod: Updated method documentation for HookManager.
- Mod: Vend: Sync 7 digit membership ID to Vend. The full 7 digit ID is now sent to Vend in the Code field instead of MemberId (the latter is useless to pos operators). As part of this change I also removed the old sync code in favour of calling the HookManager to fire the standard member update code.  The Kounta sync also does it this way, and that works pretty well.
- Fix: Hookmanager: Can now fire specific hook by class name. If you pass a specific hook into HookManager to fire, it still fired all the hooks of that interface (IHook<TData>).  This meant that I couldn't fire only the Vend update - fixed so if you pass a specific class it'll only call that class.
- Mod: Cleaned up a transaction that was causing extra blocks in Score Entry.
- Mod: ClubCMS: choose club website page: display association name, if null, club name
- Mod: ClubCMS: removed extra quote
- Mod: ClubCMS: Member Signup: added comment
- Mod: ClubCMS: Flexiclub: login control: use AssignClubId, if null, ParentClubID as Club ID
- Mod: ClubCMS: Oops, wrong file committed; reverting changes done here
- Mod: ClubCMS: Flexiclub: login control: use AssignClubId, if null, ParentClubID as Club ID
- Add: ClubCMS: Flexiclub HTML email templates
- Mod: ClubCMS: Member Signup Confirmation: modified club name in email notifications
- Mod: ClubCMS: Member Signup Confirmation: modified email notifications; added receipt email and welcome email
- Fix: ClubCMS: CasualGolfRegistrationWelcomeEmail.html: removed the text "handicap" because casual golfers don't have a handicap
- Fix: API: TeebookingController: When you pay for a booking that was initially created in DotGolf Live, the TXLine.PaidDate column never gets updated and remains NULL. Added EnsureEntriesAreMarkedAsPaid() method to make sure that TBTicketEtnry.PaidDate and TXLine.PaidDate columns are set after a successful payment - but only if its NULL.
- Mod: Adweb: Club Website dropdown list: swap the order of display: display the Association name, if it's null, the Club Name
- Mod: API: MyGolfController: GetAdvertisements endpoint returns an incorrect URL for Get On The Green ad. Mod: API: MessagesController: We no longer had to do a join on the MobileDevice in order to filter which messages to retrieve based on the UserAgent.
- Fix: Live: Competition: Prizes - Added Competition.EnsureUserHasAccess() to prevent unauthorized access.
- Fix: ClubCMS: Member Signup Confirmation control: InsertAffiliate: include saving of City
- Fix: ClubCMS: Member Signup Confirmation control: InsertAffiliate: include saving of City
- Mod: AXAccount manual journals: We now deep link into Xero to let the user see the manual journal they just created.
- Add: AXAccounts: Ability for users with SuperAdmin or AXAccounts_ManualJournal permissions to do manual journals against member accounts.
- Mod: Adweb: Club Website dropdown list: display the Association ID and Site Name for the association sites
- Mod: API: TeeBooking: Push notifications - Set the LinkType column to "TeeBooking" for tee booking related messages (i.e. booking confirmations, cancellations, updates, invites). Mod: API: TeeBooking: Unit Tests - Make the unit tests build passing.
- Fix: Problem in a few of our Knockout forms that would permanently disable the save button if there is an error server side, which means the user can't attempt it again without refreshing. Mod: Removed .js and .js.map files as these are generated by the typescript compiler.
- Fix: If we configure auto-recode for Member Account Settlements Clearing (Vend) we now use the VEND product go-live date rather than a constant date in 2017.  Using a constant date would risk a Xero API limit being hit because we would initially pull every single invoice from Xero since that date. Fix: It appears that .NoPaging() wasn't working if you assign it to a variable, then operate on the variable with more chained methods later.  I just noticed this in debug mode and fixed it.
- Fix: #10763: Live: GetOverdueAmount: Total Amount Due: sum the Amount not the Outstanding Amount!
- Fix: #10763: Live: GetOverdueAmount: corrected the computation of the Total Amount Due as of @DateComparison; sum the amount of AmountDue queried from the Invoice and Instalment tables, so that the Total Amount Due inner query returns one row only per member.
- Fix: Hospitality Levy Automation: Incorrect SystemCode when scanning for levy refunds meant that, once you got the levy allocated, you never get it again (even if previously reversed).
- Mod: Redis rate limiter for Xero slowed down to allow only 59 requests per 60s.  Xero seems to be very harsh about this rule.
- Add: Back link on Member Account Activity report (when viewed from TabMember.aspx).
- Mod: Cleanly handle exceptions in the Standard.Master page load method - previously IIS would render a blank page with no clues as to what was going on.
- Fix: Hospitality levy automation: Reversals didn't happen correctly due to the format of the ExternalSystemId value when we're reversing a previous credit.  Also updated unit tests.
- Mod: API: TeeBooking: Save the guest's name (entered on the TB app guest checkout screen). https://github.com/dotgolf/teebooking/issues/42.
- Fix: TrySkipIisCustomErrors needed to be set for my custom error screen to show up at all.
- Mod: Handle missing SSM parameters a little better; integrated a central "whoops" rendering method in case of unhandled exceptions in the Standard.Master page.
- Fix: Don't even try going to EC2 instance store if we're DEV1.
- Add: Code to handle an application startup exception and re-throw it in BeginRequest.
- Mod: We don't need the /clubs folder in Live/Edge anymore - so I'm stopping the sync on this.
- Mod: Org: Reports: Report generation (and downloading as PDF/Excel) no longer use the server's local directory as temp storage for generated report files. Instead, we are loading the generated report into Redis. I've used DotGolf.Live solution as reference.
- Mod: Live: Functions: Product quick search control - load products when a cursor is on the text input. Allows user to see the list of products without entering any search terms.
- Mod: Live: Functions: 1. Menu items - allow user to indicate what type of menu item. (i.e. Blank/Empty, Starters, Entrees, Mains, Desserts). 2. Catering section (Booking page) - group all menu items by menu item type and allow user to indicate a time these items need to be served. 3. BKFunctionBooking.GenerateProformaInvoice - was not picking up the SurchargePerPerson for a menu item (i.e. $3.50 surcharge but it is showing as $0.00).
- Add: Warehouse index, because fact_Scorecard query performance matters now.
- Mod: Leaderboard will now cache its settings instead of going for the database on every page cycle.  Lots of clubs, lots of leaderboards, lots of settings caused heaps of unnecessary little Setting queries to the database.
- Add: Indexes for performance - turns out MemberBlockedFriend had nothing on it.  This table is now past 10,000 rows and causing some performance issues when you search for members on golf.co.nz.
- Mod: ClubCMS: Flexiclub/NZG login control: missed to include the CSS file in the previous commit
- Mod: ClubCMS: Flexiclub / NZG login control: initial commit
- Fix: Xero Import: We now save the transaction last modified date immediately after processing each transaction; this way if we crash for any reason, we'll just start again from that point onwards and we will be able to gracefully recover from API rate limit errors.
- Add: MAXDOP 1 to member score listing queries.
- Mod: OPTION(MAXDOP 1) added to Score Listing queries - they perform much better this way.
- Mod: Increment a statsd metric every time a web tier database transaction is started.
- Mod: Public: ads.txt: added line of code to authorise Google (code from Liam Funnell liam@vyne.co.nz)
- Slight mods to the push notification message for non-paying non-affiliates.
- Mod: API: NotificationsController: Added new parameter "AppName" when sending notifications to a specific device. If AppName is empty, retrieve the AppName from the UserAgent string.
- Fix: API: Teebooking: Fix for https://github.com/dotgolf/teebooking/issues/275
- Fix: Removed code that looked at the competition course handicap for scores in the member score listing.  This is very compute intensive and was originally put in there for Aus.  No longer required.
- Fix: Removed code that looked at the competition course handicap for scores in the member score listing.  This is very compute intensive and was originally put in there for Aus.  No longer required.
- Fix: #10713: Live: Bulk Email member selector - previously only joined with Member's Passport, so I added the left join to Passport (on NonAffiliateId) so we could retrieve the nonaffiliates matching the criteria, excluding the non-affiliates who've unsubscribed
- Fix: API: Notifications: Push notifications registration - allow multiple registrations for a given DeviceUniqueIdentifier as long as it is not the same app. This case is rare but it happened when Ruben was testing the apps in dev mode. Both MyGolf and TeeBooking apps were sharing the same DeviceUniqueIdentifier and end up, only one app was registered (the most recent app to register for push notifications).
- Mod: Bump version number to get Tampermonkey to update.
- Fix: Swipecard strip year for Pakuranga.
- Fix: Live: GroupBooking: 1. Fix for #10735 - exception is thrown when the hard-coded complimentary cart fee is selected when creating a group booking. Removed the hard-coded complimentary cart fee and use the fees returned from the GetPlayerCartFees. 2. Mod: GetApplicablePlayerCartFees: If courseId is not set, pick one from the club's course ids and use that value when invoking the live_GetAvailableCartFeesForMemberAndDate sp.
- Mod: Public: enable ads
- Add: Index for Vend Sync performance.
- Fix: Crashbug when processing account topups via periodic job - in webhook this works fine though. Fix: Error when applying account credit to a social member (in NonAffiliate table) or Functions customer who has been deleted.
- Mod: ClubCMS: rEditMemberDetails: remove initials, made the 9/18 H text display simpler (to make it fit the textbox)
- Fix: Vend: The WALKIN customer check was causing exceptions in the Vend import.
- Mod: ClubCMS: rNavBarv2: open Handicapping link in new window
- Mod: ClubCMS: FlexiClub: create the joining fee member item too (to be included to the invoice)
- Mod: Shared: Settings: added JoiningFee, EnableJoiningFee
- Mod: ClubCMS: FlexiClub: Member Signup: updated the AssignClubId property; added Joining Fee saving and displaying
- Mod: Activate caching for ConnectorAPI service; this should reduce load on some frequently accessed tables (like Settings.CountryCode etc). This was used before when /api/CardPrint.asmx was part of DotGolf Live, but never implemented when it was split off to the ConnectorAPI project, so I'm not expecting anything to crop up from this change.
- Fix: Don't try to get all the direct credit topup transactions since the dawn of time - this causes us to hit the 5,000 transactions limit.  Instead, we only get transactions starting at the time we created the AXAccountTypeClub record.
- Mod: Dammit, needed to be an absolute prefix.
- Mod: Moved to a global bucket; we can't have this segmented by server.
- Mod: XeroAPI: Added a graphite counter for number of Xero API calls per club.  There is something going on at Pakuranga which is exhausting the number of allowed daily API calls (5000).
- Reverted accidental commit.
- Mod: Public: Disabled ads via the Web.config (at least until NZGolf can sort out the problems with their ad provider).
- Mod: Public: Ability to temporarily turn off ads via the Web.config file and a url parameter.  Web.config setting is called DisableAds (true|false) and url parameter is EnableAds={true,false}.  You can turn off all ads in Web.config and then enable only in a single browser by passing that parameter on the url.
- Mod: Public: TeeBooking: Upgraded the Settings class to pickup DPS related keys from AWS SSM. Note: i have not upgraded for GEAP, DinersTournament, Tournaments and Shop settings.
- Fix: TeeBooking App: Push Notifications: Push the badge count to the appropriate app. https://github.com/dotgolf/teebooking/issues/274.
- Fix: TeeBooking: wa_TBApplyBookingChanges_SendEmails - For TB App guest bookings. Added condition in the where clause to check that a ticket is not owned by a member or non-affiliate (line no. 680 to 682).
- Test: Revert changes to green fee timeline report.
- Mod: ClubCMS: Image Gallery control: added new property CssClassName and enclosed the entire control in one div with that CSS class name
- Fix: Casual Golf Email Sending: because LiveAppBaseURL was removed from the config settings, we need to have a value for onlineContentHost (live.golf.co.nz), as onlineContentHost is used to construct the AppBaseURL value
- Fix: Silly Australian code (using the competition course handicap for member score history) was causing a performance issue, even though the Australian result is not even visible in the query output.  See ya later, maaaaate!
- Fix: ClubCMS: removed url encoding of static image public url
- Mod: As part of the Xero import, we now pull the Member Accounts Payable account balance from Xero (Trial Balance report) and store it in a history table. We can then use this table to do some sanity checks between our AXAccount.Balance column and Xero.
- Fix: Topup bonus rules chart needed the last ToAmount pushed too so that the X axis stretches to include it.
- Add: Ability to specify topup bonus amounts in percentages.
- Fix: API: MessagesController: Removed this filter "Private!=1" in the SQL where clause.
- Fix: API: MessagesController: Removed this filter "Private!=1" in the SQL where clause.
- Add: Index for performance, replaces the previous unique constraint on CMemberItem, including Amount and EndDate columns.
- Mod: Casual Golf Admin: added comments
- Mod: Casual Golf Admin: S3UploadCoverImage: revert 29613 (retain added try catch)
- Fix: API: UnitTests: DotGolf.API.Tests: Make unit tests build passing. 1) Added HttpClient extension method UseMyGolf and UseTeeBooking - sets the appropriate value for User-Agent string (i.e. MyGolf/v1.0, TeeBooking/v1.0). 2) NotificationsController: If the DeviceUniqueIdentifier for the PushNotificationToken (if it already exists), invalidate all records for this device before re-inserting them
- Mod: Casual Golf Admin: revert S3SaveImage changes
- Fix: Slicer: #10679 When the pro's commission is separately paid from Slicer, the Total Takings Less Commission figure quoted in the slicer report email was incorrect.
- Mod: Trying a few things to see if we can get the S3 uploading working from admin.casual.golf.co.nz.
- Mod: Casual Golf image upload
- Fix: Casual Golf Admin: S3SaveImage: corrected the localFilePath value; logged its value in the exception log
- Fix: Casual Golf Admin: S3SaveImage: corrected the keyName value
- Fix: Problem when linking up DotGolf with Kounta for the first time - due to the company id changing and subsequent code not picking up on this.
- Mod: Casual Golf: updated image upload (based on ComposeV2 - ceUploadImage_FileUploaded)
- Mod: Performance fix in the green fee timeline report - precalculate and keep club fees in memory before running the green fee monster query.  This took a 60s report down to about 5s for me while testing for 1 year (for Pupuke an Remuera).
- Mod: Casual Golf: updated image upload (based on ComposeV2)
- Add: APSoutheast2 to S3 client constructors.
- Mod: Mod: CasualGolf Common: added S3 region
- Mod: CasualGolf Common: updated exception logging
- Mod: CasualGolf Common: added exception logging
- Mod: Removed exception logging code that uses webservice.golf.co.nz - much quicker just to log the exception straight to the database.
- Add: Experimental Tampermonkey script to kick the cash drawer when a payment is processed in Vend.  Integrated payment types (like Smartpay or DotGolf Member Accounts) do not kick the drawer; only the other types like cash, credit card, manual EFTPOS etc.
- Mod: API: Teebooking: Added Guest booking email notification content - for GitHub issue https://github.com/dotgolf/teebooking/issues/270
- Fix: Adweb: Small folder path bug that rendered / as empty.
- Mod: Adweb ClubCMS File Manager now works with the S3 bucket.
- Mod: API: NotificationsController: Push notifications registrations - Previous fix only invalidates records when you sign in using a different user on the same device. https://github.com/dotgolf/teebooking/issues/272
- Mod: API: TeebookingController:
- Mod: ClubCMS: Member Signup Confirmation: updated text
- Mod: ClubCMS: Member Signup Confirmation: display message
- Mod: ClubCMS: Member Signup Confirmation: style update
- Mod: ClubCMS: Member Signup: select credit card option by default
- Mod: ClubCMS: Member Signup: display message about the membership type; payment confirmation text style update
- Mod: ClubCMS: select a category based on the query string parameter; added creation of invoice and receipt; corrected saving of Gender; select "Female" Gender by default (for testing purposes)
- Mod: ClubCMS: css update; club ID update; club item insert initial commit
- Mod: Turn off SQL Performance Tracing in dev by default.  It's more of a pain than anything else, not really that useful.
- Add: When you process a member topup via direct credit, reconciling it in Xero, we never processed the bonus rule logic.  This commit adds this logic for both reconcile and unreconcile actions (so if you delete a Xero transaction it will remove the topup bonus from the AXAccount too).
- Fix: Bulk Email: sending of test email: supply the onlineHost and onlineContentHost values
- Fix: BulkEmail: enter a value (live.golf.co.nz) for onlineContentHost
- Mod: Adjusted metrics slightly to catch more error conditions.
- Mod: ClubCMS: Member Signup: corrected amount
- Mod: Vortex statsd host changed to office.golf.co.nz.
- Fix: Suspected connection leaks in Visitor Access Service. Add: StatsD logging for Visitor Access Service.
- Fix: API: TeebookingController: /apply-booking-changes - fix for https://github.com/dotgolf/teebooking/issues/269. Guest booking creates two non-affiliate records.
- Fix: Accidentally committed Web.config change.
- Mod: Removed the /Shared extern.
- Mod: ClubCMS: moved CuteEditorHelpers
- Mod: ClubCMS: moved CuteEditorHelpers
- Mod: ClubCMS: moved CuteEditorHelpers; exclude the Shared folder from the ClubCMS project
- Mod: ClubCMS: copy dotgolf.knockout.pager.js to the ClubCMS js folder and update the paths using that js file
- Mod: ClubCMS: Member Signup: added email notifications
- Mod: ClubCMS: Member Signup Confirmation: use the correct CategoryId when inserting into the CMember table, insert the Member as an active member
- Mod: ClubCMS: use the existing CWMembershipApplication table; insert the Member record after payment
- Mod: Removed Google search form from 404 and 500 error pages.
- Mod: API: TeeBookingHelper: TeeBooking.cs - Removed debug log from previous commit rev no. 29536.
- Mod: ClubCMS: member sign-up controls work in progress
- Fix: API: TeebookingController: /apply-booking-changes end point - Testing this fix for GitHub issue https://github.com/dotgolf/teebooking/issues/265
- Mod: ClubCMS / Shared: updated the CWMemberSignup dataobject: removed Suburb
- Mod: ClubCMS / Shared: updated the CWMemberSignup dataobject
- Add: Shared: CWMemberSignup and PgaPdpCycle dataobjects. PgaPdpCycle isn't used but was written way back, just committing it as it could be used in the future...
- Mod: ClubCMS: Membership Signup form: membership type dropdown: work in progress
- Mod: ClubCMS: Membership Signup form: membership type dropdown: work in progress
- Mod: API: TeeBookingHelper: TeeBooking.cs - add DebugLog to see what the Payments XML looks like. GitHub issue https://github.com/dotgolf/teebooking/issues/265
- Mod: Deploy: Only overwrite the Web.config file if a) Web.config.Production exists and b) the content has changed from Web.config.
- Fix: Live: fixed checking of "a href" (yesterday we removed the "trouble viewing this email...click here to view online" link)
- Fix: Live: Vend: Account member credit - was not ignoring house account top-ups paid using a voucher. we should have checked VendRetailerPaymentTypePayload.name instead of VendPaymentTypePayload.name.
- Add: ClubCMS: Google Verification file
- Fix: API: TeebookingController: Call ProcessPaymentResults() to update the RawXML column as this would also set the BillingTokenId when a booking is paid using a stored card (pay existing card option)
- Mod: API: TeebookingController: Added more debug logs. SQL statement to update TBTransaction did not set RawXML column.
- Mod: golf.co.nz: updated the cute editor folder limit from 1 GB to 2 GB
- Mod: Live: Vend: Account member credit - apply similar mod to Vend on ignoring Loyalty points for member account top-ups paid using vouchers.
- Fix: So Vend can send us leading/trailing whitespaces in product tags - that meant that our loyalty account code tags didn't match and account credit was never put on member accounts.
- Mod: API: TeebookingController: Added Debug logs.
- Fix: API: TeebookingController:
- Add: New Slicer rules to pay club competitions paid online.
- Fix: Live: correct the unsubscribe text
- Mod: #10653: Live: email templates : take out the "...click here to view online" to address the Google deceptive site warning
- Mod: Live: BulkEmailTemplate.html (Compose): rephrase unsubscribe text
- Mod: ClubCMS: excluded Shared\EmailViewer folder from the ClubCMS project
- Mod: #10653: Live: BulkEmailTemplate.html (used by SPAM product): take out the "...click here to view online" to address the Google deceptive site warning
- Bump version number
- Mod: Kounta pin code entry teamviewer compatibility broke things for users.
- Add: Public: add the ads.txt file (as requested by Jan; instructed by jane@scrollmedia.co.nz)
- Mod: Live: Functions: Functions calendar - change text color for confirmed recurring bookings to black to make it more readable.
- Mod: Development mode push notification ARNs brought back.  We will also need to add SSM parameters for these SNS endpoints. Also ignored some stuff.
- Add: Unit tests to cover mobile device registration, push notification send and deregistration in dev mode and not.
- Mod: Live: Functions: Recurring bookings colour scheme - We just leave "Tentative" recurring bookings to maroon as we don't need to distinguish this from normal tentative bookings.
- Add: First iteration of the Process Expiry page; hidden from UI at the moment.
- Add: Unit tests for hospitality levy automation - at least the credit apply stage of the process; expiration tests will come later. Add: First iteration of the Process Expiry page; hidden from UI at the moment. Mod: Crazy subs refactor to enable me to launch the Process Renewals process from my unit tests.
- Add/Mod: ClubCMS: added Member Sign-up Confirmation; added the payment code to the Member Signup control
- Mod: Live: Functions: Recurring bookings - change the colour used for displaying recurring bookings to a lighter colour so it won't stand out.
- Fix: Live: Functions: Recurring Bookings - should take the status from the parent booking when persisting calculated bookings.
- Fix: Live: Functions: Recurring Bookings 1) RecurringFunctionBookingsGenerator - calculated bookings were not persisted successfully. 2) FunctionBooking.GetClubFees() throws a null reference exception after saving a calculated booking.
- Fix: Public: MyAccount: Fix for https://github.com/dotgolf/pos2018/issues/28 - Apparent duplication of transaction on AXAccount. Hide the line details as it may cause confusion when its appearing for every AXAccountTransaction.
- Fix: Broke the build because of my previous DatabaseTransaction.AfterTransactionCommitted refactor.
- Add: Hospitality Levy Automation.  This enables clubs to automatically transfer a portion of each member's subscription invoice amount to their Member House Account for use at point of sale.
- Add: Hook that fires every time a member's outstanding subs balance changes for any reason.  I'll shortly commit some more code that uses this hook for Hospitality Levy automation.
- Mod: Renamed an event name to be more intuitive.
- Fix: Public: MyAccount: Fix for https://github.com/dotgolf/pos2018/issues/28 - Apparent duplication of transaction on AXAccount.
- Add/Mod: ClubCMS: created a new cuteeditor config file which shows the format dropdown (heading 1, etc.) because setting the EditorWysiwygModeCss doesn't work (even if the url is correct, and the letter casing is correct)
- Fix: Subs overdue warning did not appear in Dev because the kiosk overdue days grace period was set to 365.  Changing the setting helped, but it also occurred to me that the POS should have a different setting so we can control it separately.  Modified, and default is now 60 days.
- Add: POS: Cheque payment method. Fix: POS: Problem where payment methods don't appear when they should.  $.inArray() signature problem.
- Fix: POS: Payment types appeared when they shouldn't, due to a bug when checking the supported payment type codes against Vend.
- Fix: Vend: For cash sales (no customer/walk-in) we should not try and process loyalty as this causes an exception due to a missing PassportId. I've fixed this by sorting out the problem which caused execution to continue even though there is no passportId, and have also added code to detect WALKIN customers before the error even gets logged in DebugLog.
- Add: Epson receipt printer auto-detect code, send the Epson drawer kick string rather than the Star one.
- Fix: A very common exception that occurs every time SCA is loaded.  Happens for any club without cart fees set up (because of Ad-Hoc Carts).  Since there is no point for this exception to be thrown, I just removed the throw.
- Mod: Kounta: Card swipe fix did not work when POS is in touch mode. Fix: PIN code entry works via TeamViewer now, so we can get into the POS and disable touch mode to do remote assistance.
- Fix: ClubCMS: Member Directory: hide the email and the address if the privacy setting is null
- Fix: Missing comments from a previous SQL commit.
- Fix: POS: When the POG is used to move a booking to another time, and this booking is linked to a paid POS sale, the sale goes grey and can be processed to Vend again.  This is because the POG nuked the ExternalSaleId on all of the TXLines. https://github.com/dotgolf/pos2018/issues/20
- Mod: Refactor to make code more readable.
- Mod: POS: If you're scrolled way down the page to get to an older printed card, the content area of the POS is now moved down so that you don't have to scroll way back up to get to it. https://github.com/dotgolf/pos2018/issues/25
- Mod: POS: Kick cash drawer on all payment types other than HOUSE.
- Fix: Kounta: Swipecard handling for Pupuke (strip the year)
- Mod: POS: Show cart fee selector when there are cart fees configured in the system, not just when there are carts available.  In the POS it is at the operator's discretion whether to issue carts, whether the system thinks there is one available or not.  https://github.com/dotgolf/pos2018/issues/19
- Fix: NonAffiliate.Address3 is not supported; trying to retrieve this value resulted in a column not found exception.
- Fix: Kounta: Social members should also be synced to Kounta.
- Fix: POS: Recovery mode was broken by the changes in one of my previous commits - duplicate call to computePaymentMethods() was the cause here. Fix: POS: If SaveCheckoutState() failed and the client could not grok the error message, it caused the checkout to hang. Fix: POS: Voucher payment type recovery didn't work and put the checkout in a hung state.
- Fix: API: Messages: /api/v1/messages returned 0 messages for Android.
- Fix: API: Notifications: Fix for Android notifications (registration) - Get the product name and version from the HttpContext's current HttpRequest object if the UserAgent header value contains ','.
- Mod: ClubCMS: Removed scheduled task that used to sync the legacy /clubs/ folder to S3.
- Mod: ClubCMS: StaticContent.Exists - convertToLowerCaseFilename false
- Mod: ClubCMS: responsive UNewsArticle: StaticContent.Exists - convertToLowerCaseFilename false
- Fix: Live: POG: Group Booking History control - Action By displays unknown user.
- Add: POS: More logging around Vend to try and catch the weird issue happening at Pupuke.
- Fix: ClubCMS: UCoursesHelper: do not convert the css filename to lowercase
- Fix: POS: Plus handicaps not displayed correctly.
- Ignored some stuff.
- Mod: Don't write Xero Import log entries into DebugLog if there were no invoices/credit notes imported in the batch.
- Fix: ClubCMS: fix image URL
- Fix: ClubCMS: member profile image url
- Fix: ClubCMS: use the image CreateDate to determine what path format to use (before AWS, we were just using the image Code for the filename / path of the profile photo)
- Mod: ClubCMS: Terraces: UDropDownMenuBar: simplify css call
- Mod: ClubCMS: Terraces2: Course: corrected image URL
- Mod: ClubCMS: Tournament Registration: simplify css call
- Mod: ClubCMS: Terraces2: load custom_terraces js, instead of includes_terraces js
- Mod: ClubCMS: Terraces2: Image Gallery: corrected image URL
- Mod: ClubCMS: Terraces2 UCourse: comment out fuImageUpload "The base class includes the field... but its type (System.Web.UI.HtmlControls.HtmlGenericControl) is not compatible with the type of control (System.Web.UI.HtmlControls.HtmlIframe)"
- Fix: Live: POG: Group booking history - typo @"Details" instead of "@Details".
- Mod: ClubCMS: Tournament Player List: simplify css call
- Mod: ClubCMS: USearchResults: corrected imgTeaser.ImageUrl
- Mod: ClubCMS: third party join: simplify css call
- Fix: Live: Functions: RunSheet.aspx - remove extra list item in displaying menu items.
- Mod: ClubCMS: CustomStyles: check first if css file exists before importing
- Mod: ClubCMS: Courses: comment out fuImageUpload "The base class includes the field... but its type (System.Web.UI.HtmlControls.HtmlGenericControl) is not compatible with the type of control (System.Web.UI.HtmlControls.HtmlIframe)"
- Reverted rev no. 29413
- Mod: Live: POG: Group booking fee not loading correctly for members #10336 - recommit files.
- Mod: ClubCMS: Coursev2: comment out fuImageUpload The base class includes the field... but its type (System.Web.UI.HtmlControls.HtmlGenericControl) is not compatible with the type of control (System.Web.UI.HtmlControls.HtmlIframe)
- Fix: ClubCMS: shared UImageContent: use StaticContent.BuildPublicUrl for the image URL
- Mod: ClubCMS: Calendar: escape apostrophe in the competition type name
- Fix: ClubCMS: use ConfigureForClubFolder to configure the paths for the Cute Editor
- Mod: API: Push Notifications:
- Mod: ClubCMS: DeleteHoleImage: added back updating of relative path of the Image deleted. The HoleImage can't be logically deleted because its other columns are being used (e.g. sponsor description).
- Mod: Live: Functions: RunSheet -
- Mod: ClubCMS: Terraces3: load custom_terraces js, instead of includes_terraces js
- Mod: Tee Booking: Push Notifications: Mod: Tee Booking: Push Notifications: When a booking is cancelled in POG by an administrator, the owner receives two booking cancellation push notifications. Before inserting into PushNotification table, we check first if the recipient of the message is the owner of the ticket (line no. 891).
- Fix: #10625: ClubCMS: escape Competition Type name apostrophe (causes the json to break and the calendar not to load)
- Mod: Public: update the The Open widget
- Mod: Public: added 2 new links under About the Game: Case Studies and Inclusion
- Mod: Public: corrected casing
- Mod: Public: renamed "info for clubs" to "club resources"
- Add: Public: added 2 new pages (under About the Game): Case Studies and Inclusion
- Mod: Public: rename "Women's Golf" to "Women and Girls"
- Mod: ReverseProxy: sites.list: made templeton gc https
- Fix: Tax was not correctly calculated on subscriptions payments.
- Fix: javascript error in checkout (only a problem in dev)
- Fix: POS: Because of ko.mapping there is a property on the POS object graph that contains values for every vend product.  This made the SaveCheckoutState() post huge (11M+) causing the server to throw a 500. The error is not handled properly in the POS so this is perceived as slowness.  This changes the checkoutstate js code to use ko.mapping.toJS rather than ko.toJS to stop the huge metadata tree from being sent.
- Mod: Live: TabRenewals: ProcessRenewals: added processDate (tbDate) parameter, along with the other dates which are already part of the parameters
- Mod: Live: TabRenewals: ProcessRenewals: added club ID in DebugLog logging
- Mod: Live: TabRenewals: ProcessRenewals: added DebugLog logging
- Mod: Live: TabRenewals: ProcessRenewals: added DebugLog logging
- Fix: Member: ProfilePhotoPathForMemberId: use the image CreateDate to determine what path format to use (before AWS, we were just using the image Code for the filename / path)
- Mod: Live: Renewals: GetSelectedSubPeriodId: check if tbDate.Text.ToDateTime has a value before getting the value
- Mod: Live: Renewals: GetSelectedSubPeriodId: handle empty or null tbDate; added logging
- Fix: Pennants: fix sorting: based on the Pennants Rules we sort the results by: 1) Contest Points desc 2) Match Points desc 3) Holes (Countback) desc
- Fix: API: MessagesController: Messages returned more than once in the Results list.
- Fix: Public: PaymentConfirm: specify the columns when logging into _log: insert into _log (CreateDate, Data)
- Mod: added exception logging
- Mod: API: Teebooking:
- Mod: API: Teebooking: Push notification rules.
- Fix: Apparently UStyles.ashx is also used for css outside the /clubs/ folder; redirecting these requests to static.golf.co.nz broke that. Mod: Introduced some caching to help performance. Fix: Hidden exception thrown was causing performance issues.
- REINTEGRATED ClubCMS S3 branch.
- Mod: Forgotten POS commit
- Mod: Vend: Programmatic way to install webhooks for a new Vend setup.  Freshdesk documentation will be updated momentarily.
- Mod: Vend: Automatically obtain the retailer_id (RetailerUID) value from Vend rather than having to do the View Source thing to set this up manually.
- Mod: Vend member sync will no longer timeout on submit, and it shows a nice progress bar, same as the Kounta equivalent. Cleanup: Got rid of the old Vend settings page - it only causes confusion when you're refactoring and searching for method names.
- Merged revision(s) 29308-29320 from Branches/Trunk.2018-05-22.pos-2018: Fix: Show the "this card is part of a sale" message only when necessary. Fix: Product tax calculations were still not quite there; added extra tax when the POS reloaded a sale. ........ Add: Manual EFTPOS payment type.  To use this, create a Credit Card payment type in Vend called "Manual EFTPOS". ........ Fix: If dotgolf-loyalty:NONE is set on a product, make that product exempt from loyalty.  Useful for Cashout products. ........ Fix: https://github.com/dotgolf/pos2018/issues/11 - Multiple cashout products of different values ........ Fix: https://github.com/dotgolf/pos2018/issues/7 - Casual Golfers cause an error. ........ Fix: https://github.com/dotgolf/pos2018/issues/15 POG should be locked down if a booking is already part of a sale. ........ Mod: Minor code refactor to make things easier to read. ........ Fix: https://github.com/dotgolf/pos2018/issues/18 - stop refunds from being sent to Smartpay (no certification and not working anyway) ........ Fix: https://github.com/dotgolf/pos2018/issues/10  FR: Hit Enter in the numeric keypad dialog should be the same as tapping OK (also implemented ESC while I was there). ........
- Mod: We no longer have to change the Master_Redis_Host option in the web.config file in dev when switching profiles.
- Mod: API: Teebooking: Send push notifications to Teebooking app only.
- Fix: Argh, Powershell syntax error.
- Fix: URL adjustment for stage bindings.
- Fix: Improved on payment method loading screen and also fixed a bug where duplicate payment methods are displayed in recovery mode.
- Mod: Added a "Just a moment" message while payment types are loading.
- Fix: Error checking to stop the user accidentally opening the checkout dialog twice.  This could happen if a slow internet link interferes with the POS.  https://github.com/dotgolf/pos2018/issues/8
- Fix: SCA layout issue on smaller monitors.  https://github.com/dotgolf/pos2018/issues/5
- Fix: Live: ScoreCardAdmin: Missing closing tag for a <div> element in line 126.
- Fix: "This card is part of a sale" always showing for SCA cards.
- Fix: Patch: Quick keys don't load - for some strange reason there is a multiple root scenario in the data coming from Vend for Warkworth.  Replaced Single() with First() until I can figure this out.
- Mod: Removed new C# features not yet supported by build server.
- [MAJOR] Reintegrated POS changes from branch.
- Mod: Live: Kounta: Ignore processing of Kounta account top-up bonuses when it is paid in part of full using voucher.
- Mod: Live: Teebooking Settings: Added help link next to "Max bookings allowed per member" setting in the Teebooking/Settings area.
- Fix: New Web.config file that actually works when in dev mode.
- Mod: ReverseProxy: sites: added S,W,0,1,5courseclassic.com
- Add: www. additional domain for certificates.
- Fix: API: TeebookingController: /api/load-slot-for-editing - Only return an existingTicketId linked to an active booking that the user owns or he/she is in.
- Fix: Stuffed up the SNS parameter names.
- Mod: Mailer service - pull enable/disable flags as well as push SNS topics from SSM instead of the exe.config file.
- Mod: GOTG API: comment out DebugLog lines (don't want to fill up the DebugLog table)
- Mod: GOTG: banner winter
- Fix: GOTG API: use Media/Tempo to store temporary pdf files. It used to be app_data/Tempo but that folder doesn't exist now in the new server, and we could use the existing Media/Tempo folder for this purpose so I'm not creating the app_data/Tempo folder.
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Mod: GOTG API: added debug info logging in GeneratePDFFile
- Merged revision(s) 29279 from Trunk: Mod: GOTG API: added debug info logging in GeneratePDFFile and GenerateVoucher ........
- Mod: GOTG API: added debug info logging in GeneratePDFFile and GenerateVoucher
- Fix: Missed out D:\Sites\
- Mod: Create Media/Tempo folders in CasualGolf API webroot.
- Mod: ClubCMS: rMemberSignup: initial commit for inserting a new affiliate / member record
- Mod: Shared: ClubMember: added InsertAffiliate and FindNextAvailableComputerNo
- Mod: Live: POG: Mod for freshdesk ticket #10336 - Group booking fee not loading correctly for members.
- Fix: Live: XeroBatchDataImport: reverted last change; only do the AX Xero stuff when AX if club has the AX product
- Fix: Live: Xero Invoices Import: get only invoices from a specific contact, the club's Xero Subscriptions contact
- Fix: Live: GetOverdueAmount: format overdue amount to have 2 decimal places
- Fix: Live: GetOverdueAmount: when getting the total amount paid, get all receipts and credit notes to date (don't use the @DateComparison value)
- Fix: Live: GetOverdueAmount: cast to decimal
- Fix: Live: GetOverdueAmount: cast to decimal
- Mod: Live: GetOverdueAmount: total due as of current date - total paid as of current date = overdue amount. This addresses the concern we got from Fitzroy wherein one invoice is overpaid and one is underpaid (with the member having an overall balance of 0), and the member is being considered as overdue.
- Mod: Try to make visitor access service work - looks like the webservice might be broken?
- Fix: Live: Bulk Email: modify link to use onlineContentHost value (Request.Url.Host) instead of AppBaseURL.
- Fix: Live: Bulk Email: modify link to use onlineContentHost value (Request.Url.Host) instead of AppBaseURL.
- Fix: API: TeebookingController: To address the GitHub issue #206 - Booking Matt+Visitor does not let Matt control booking from phone (#206)
- Fix: Live: Bulk Email Mailing List: correct a typo error and corrected the display of the recipient name
- Fix: API: TeebookingController: Fixed an issue where a member can edit a tee booking made by another player. Test case: 1. Continue as a Guest on the Teebooking app. 2. Book a tee booking for two players on the same timeslot. 3. Login as a member on the Teebooking app. 4. Select the same timeslot that was booked in step 1. Book 1 player. 5. Open the Booking details. 6. Noticed that you can swipe left (delete) other players you did not book.
- Fix: API: TeebookingController: Payment Express WSOAP - Added PaymentExpressSoap web service binding in Web.config.Production. Without it, the "Pay with existing card" will fail in TeebookingController.ApplyBookingChanges_ProcessPayment() when instantiating a PaymentExpressSoapClient.
- Fix: API: TeebookingController: /apply-booking-changes api - the corresponding TXLine for a player's paid booking is marked as deleted after "save" (wherein no additional charges/payments are required). In DotGolf Live/POG, that player will no longer be shown as paid - the "$" sign is gone.
- Mod/Add: ClubCMS: 5 Course Classic: remove old css file
- Mod/Add: ClubCMS: 5 Course Classic css, js and images
- Mod: ReverseProxy: added 5courseclassic.co.nz
- Add: ClubCMS: responsive Member Sign-up form: initial commit
- Fix: Live: PrePrintService: Bug fix for ticket #10496 - Pre-print cards were printing the incorrect tee time - Cambridge. We need to put the CompetitionRound.RoundDate on the date component of the allocated SlotTime (tee time) in order to get the correct UTC to NZST time conversion. Before, it was always set to 1900-01-01 and gets interpreted as (NZ Daylight Time). Example: for a 9:30 tee time we get this date/time value Mon Jan 01 1900 09:30:00 GMT+1130 (New Zealand Daylight Time). When using the CompetitionRound.RoundDate as the date component of the SlotTime, for example CompetitionRound.RoundDate is 2016-06-26, we now get Tue Jun 26 2018 19:00:00 GMT+1200 (New Zealand Standard Time).
- Mod: Moved DPSDevMode parameter into SSM - can't have this in Web.config.Production anymore since that is published to dev, stage and production.  I've already created the parameters with correct values in AWS for all 3 environments.
- Mod: API: Loggly: Enable logging to Loggly for stage.api.golf.co.nz only.
- Add: ClubCMS: just committing love golf images
- Add: ClubCMS: just committing Love Golf css and font files
- Mod: Got Analytics working on db-1 instead of dw1.  We'll see how this goes performance wise.
- Mod: ReverseProxy: added harewoodgolf.co.nz
- Mod: ClubCMS: added ghcc.co.nz, harewood.cw.golf.co.nz, harewoodgolf.co.nz, helensville2.cw.golf.co.nz, www.dunedinjuniorgolf.co.nz, www.ghcc.co.nz, www.harewoodgolf.co.nz, www.southheadgolf.co.nz
- Mod: ReverseProxy: added harewood.cw.golf.co.nz and helensville2.cw.golf.co.nz
- Mod: ReverseProxy: added napier.cw.golf.co.nz, whitfordpark2.cw.golf.co.nz, warkworth2.cw.golf.co.nz
- Mod: ClubCMS: added napier.cw.golf.co.nz, whitfordpark2.cw.golf.co.nz, warkworth2.cw.golf.co.nz
- Mod: ReverseProxy: added southheadgolf.co.nz and dunedinjuniorgolf.co.nz
- Mod: ClubCMS: added southheadgolf.co.nz and dunedinjuniorgolf.co.nz
- Mod: golf.co.nz: image updates as requested by George, NZG
- Add: golf.co.nz: image updates as requested by George, NZG
- Add: golf.co.nz: image updates as requested by George, NZG
- Mod: golf.co.nz: image updates as requested by George, NZG
- Mod: AWSPrep: Committing latest changes made to the scripts and JMeter test plans.
- Mod: Cleaned up ready for publish.
- Mod: Updated to latest machine names for metric monitor.
- Fix: Build config.
- Fix: Output directory.
- Add: Initial version of SqlToGraphite - a service that runs one or more stored procedure on set intervals and sends their output to a Graphite instance (port 2003).
- 
- Add: default web.config for DotGolf Live.
- Fix: Live: AdhocCart: Using JavaScript "let" is not supported for old browsers and we shouldn't use it for pure JavaScript source codes.
- Add: Error logging for S3 uploads behind bulk email. Mod: Removed Web.config bucket name and image urls.
- Add: southhead.cw.golf.co.nz binding.
- Fix: Increased session timeout to 40 minutes rather than 20 (the default).  The session ping is every 30 minutes, so having the session timeout shorter than that will result in session drops.  I believe this is the reason for the Object reference not set error on kiosks when they attempt to enter cards after sitting idle for a while.
- Add: packages.
- Fix: Typo.
- Fix: Remove Web.config.Production file from webroots in case someone figures out these can be requested over http.
- Mod: Updated S3 bucket names - we're in ap-southeast-2 now.
- Mod: Removed production Kounta keys from Web.config.Production; these live in SSM now. Fix: A couple of issues with the new staging hostname being live.stage.golf.co.nz and not live.staging.golf.co.nz.
- Mod: Removed production Kounta keys from Web.config.Production; these live in SSM now.
- Mod: Removed X-Frame-Options DENY - this stopped the Vend checkout from loading (because it uses an IFRAME)
- Fix: Hopefully sorted all the packaging issues.
- Add: packages for DotGolf.Admin
- Fix: packages.config issue.
- Add: Solution file.
- Fix: _deploy was in the wrong place.
- Add: _deploy folder for DotGolf.Admin
- Add: Initial version of Visitor Access Service (for AutoScore clubs)
- Add: DotGolf.Admin folder.
- Fix: Connection string hack to make NZGreenFeeData work - eventually we want to move the NZGreenFeeData tables into NZ1 instead.
- Mod: Live: POG: Fresh desk ticket #10337 - Add group booking details (TBTimeSlot.BookingInformation) in the Booking History (TBLog).
- Mod: HTTP/1.1 for all upstream connections by adding Connection "" and http_version 1.1.
- Mod: Increased sync interval to 2 hours - this process takes too long to complete.
- Add: StatsD config into CardPoller app.config.
- Add: api.cw.golf.co.nz to the bindings.list.
- Fix: Initialise Database connection string in XeroSync. Fix: Removed Redis and database connection strings from App.config.
- Mod: Removed SSM connection string parameter name from config file - hardcoded. Add: AWSSDK packages for SSM connectivity.
- More package messing around.
- Mod: Upgraded to latest packages; added packages.
- Add: Missing packages.
- Add: Missing packages.
- Mod: Get smtp host from SSM instead of app.config. Add: Production app.config for mailer service.
- Mod: Removed unused test which was triggering old code warnings.
- Fix: Updated code in a comment.
- Fix: Reference to Redis.GetDatabase() - should be GetDatabase(0).
- Add: Sync script for Public.2012.NZ/uploads folder.
- Add: Sync script for clubs/ and Email/storage folders for Live and Edge.  The two webservers sync to different S3 folders because Live is installed on -1 and Edge is installed on -2.  We'll merge these files together at some stage in the process when upgrading Live/Edge to S3 native.
- Mod: Updated Web.config.
- Mod: ConnectorAPI used the old way of connecting to Redis.  Upgraded to use Elasticache autodetection via DotGolf.Shared.
- Mod: CardPoller now uses SSM for connection string and Redis connectivity. Mod: Removed old AU and Staging services, we only need one now. Mod: DotGolf.Shared integrated for database, statsd and redis access.
- Mod: ImageHelper now redirects off to the StaticContent area instead of rendering out images itself.  I've also disabled a bunch of places where image uploads are happening - we'll have to double back and sort these out at a later point in time.  Noted in my migration document.
- Add: sync job for Org email/storage folder.
- Fix: Don't rewrite http sites to https://www. Fix: $ escaping bug.
- Fix: Couple of script bugs.
- Mod: sites.list now controls whether requests to the domain apex (eg. tgolf.co.nz) are rewritten to the www CNAME, eg. www.tgolf.co.nz.  I've enabled this for all our club websites, but not for domains like live.golf.co.nz.
- Mod: Xero private keys for Live and Org are now loaded from SSM; we can't store private keys on disk on the web server as we used to. Fix: If we ever had more than a single association using Xero in Org we'd have some Xero certificate problems as the PK is only loaded once and stored in a static.  This has been changed so it is loaded fresh every time we need it.
- Fix: Live Xero certificates are now loaded from the SSM parameter store rather than from local disk.
- Fix: www.tgolf.co.nz should also be SSL
- Add: Bindings for missing www. club websites.
- Fix: Static images were broken in aws prod.
- Mod: Report generation (and downloading as PDF) no longer depends on the /clubs/ folder which means I have a lot less stuff to sync down from S3 now.
- Mod: Disabled some code that uses IMAGE_SERVER_PATH until we can get around to fixing it - noted in migration document to get back to.
- Fix: Incorrect job name in this script
- Removed LocalisationModule.
- Add: _deploy for Pennants.
- Add: nz and au specific Web.config files so that we can accommodate Aus.
- Add: _deploy, redis session state store packages.
- Add: Production Web.config.
- Fix: Missing binding.
- Add: _deploy for warehouse API.
- Add: connector-api.golf.co.nz binding.
- Fix: Properties.
- Add: _deploy folder for ConnectorAPI.
- Add: Powershell script to add an S3 Sync scheduled task on the webapp tier.  This keeps the /clubs/ folder in sync with an S3 bucket.
- Add: Missing RedisSessionStateProvider packages.
- Add: _deploy folder for CasualGolf API.
- Fix: Found more cases where a connection string was being calculated manually.
- Mod: Updated production Web.config.
- Add: Reference to DotGolf.Shared necessary for RedisSessionStateProvider helper.
- Add: Missing packages.
- Add: _deploy for bulkemail
- Fix: API didn't load properly; we need the X-Proxy-For header to make that work.
- Add: _deploy folder for API.
- Fix: Properties.
- Add: _deploy for Analytics.
- Removed _deploy
- Fix: Stuff up
- Add: Analytics: _deploy folder and site bindings.
- 
- Add: RedisSessionStateProvider package.
- Fix: Create /clubs/xxx directory on demand; this doesn't exist on the new servers.
- Fix: Web.config.Production updated for new servers.
- Mod: Removed an old copy of Redis connection code in Live. Mod: Updated Web.config.Production to remove Master_Redis_Host (this is autodetected now).
- Fix: SSL not supported against Elasticache when using the .Net SDK (I suspect)
- Mod: JMeter: 1) Change the number of users to 75 20 20 for public, live, edge. 2) Wrap HTTP requests in a Random Order Controller. 3) Change constant think time to uniform random think time.
- Mod: Different way of doing backticks in batch files.
- Add: SSM deploy: get command output once sent.
- Add: Redis.StrongName.
- Add: RedisSessionStateProvider.
- Add: JMeter: Test plan for stage environment - combine public, live and edge into one test plan.
- Add: Keys for send-command.  This is a temporary hack until I can fix pipeline mode in Jenkins.
- Add: Missing packages.
- Add: Missing packages.
- Mod: Cleaned up Production Web.config file.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Mod: Cleaned up Production Web.config file.
- Add: Production Web.config file.
- Moved GreenfeeSlicer out of Trunk into Legacy.  This project has been integrated into Adweb a long time ago.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Add: DotGolf.Shared for bulk email (really only for the RedisSessionStateProvider helper class to get the Elasticache connection string)
- Mod: Removed Shared.RedisConnection - should use DotGolf.Shared now.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Add: Production Web.config file.
- Fix: App pool creation didn't quite work.
- Mod: Create a standalone application pool for each site.
- Fix: Oops, newlines mess up parameter values for us.
- Fix: Incorrect destination directory for manual config files.
- Mod: Use $environment to get the correct manual configuration directory to copy to nginx. Put static.golf.co.nz configuration files into the correct prod/stage directories.
- Add: Manual configuration files for static.stage.golf.co.nz and static.golf.co.nz.
- Fix: Invalid cast bug when importing transactions from AXAccountTransaction table; caused by ExternalSystemId not always containing integers.
- Add: ReverseProxy: initial version of the bootstrapper script that generates nginx configuration files for each site.
- 
- Fix: Org shop images need the imageid in the url; this was the easiest way to get them back in there. Fix: Grammar correction.
- Mod: Redis Session State Store - application name and database id added.
- Mod: Upgraded to Redis Session State Storage.
- Mod: TXT Message Service: Get connection string from SSM.
- Mod: Previously uncommitted script.
- Mod: Upgraded to SSM for connection string storage.
- Fix: Live: Functions: Events report - some calculated bookings are not shown if its parent booking is deleted.
- Mod: JMeter: Latest test plan settings after running tests on 8 Jun 18.
- Mod: Live: Functions: Run Sheet (BEO) - Preserve line breaks in displaying the catering notes.
- Fix: API: StaticContent: Remove newline from STATIC_GATEWAY_BASEURL.
- Mod: JMeter: 1) Set the following thread group settings to: # of threads (users): 20, ramp-up period: 30, loop count: 30, scheduler configuration -> duration: 180 seconds
- Add: JMeter: Test plans for prod servers (RackSpace)
- Mod: JMeter: 1) Set a consant think time of 4.5 seconds at the parent level. 2) Removed constant timer in between requests. 3. Set the following thread group settings to: # of threads (users): 20, ramp-up period: 30, loop count: 30, scheduler configuration -> duration: 180 seconds 4. golf_public_stage_test_plan.jmx: removed leading space in /MyGolf/Competitions.aspx
- change "prod" to "stage"
- change "prod" to "stage"
- change "prod" to "stage"
- Mod: Increased Redis SyncTimeout to 5s rather than 1s (default). Mod: BulkStatementGenerateProcess now sets the key expiry before sending the PDF data; this way if the hashset times out, the key will still automatically expire.
- Add: AWSSDK.Elasticache.
- Mod: Autodiscovery for Elasticache.
- Fix: Database connection string not initialised error in SSO.  This is because Database.ConnectionString is actually unset most of the time, since SSO works for AU and NZ.
- Mod: Back to the standard home banner for GOTG.
- Mod: Load test plan
- Mod: Performance fix (web tier) for SearchClubDay page; this causes high CPU on the webserver while the page is loading up and you're searching as a non-affiliate or by region.
- Mod: JMeter: Updated clubs csv data. Updated load test plan configurations.
- Fix: _shared property was incorrectly pathed.
- Add: _deploy. Mod: S3Resizer UrlDecode problem fixed; forgot to commit.
- Add: _deploy folder for ClubCMS.
- Fix: Bug in deploy script stopped some new bindings from being created.
- Mod: Bind to actual dev/stage/prod urls even on the web tier.
- Add: More url resolvers for other urls that shouldn't be lying around in web.configs.
- Added bindings for SSO.
- 
- Fix: Incorrect invocation for SSMParameterStore.GetValue caused a database lookup.
- Removed SSO url.
- Mod: Resolve SSO Url from SSM if there is no DotGolfSsoUrl entry in Web.config.
- Mod: Upgraded to SSM connection strings. Upgraded to AWS SDK 3.3. Removed old golf.co.nz/API.asmx references.
- Fix: Silly typo.
- rename file to clubs data
- Mod: JMeter: Updated clubs csv data
- Add: Production Web.config file.
- Mod: If Web.config.Production exists for any site, copy it to Web.config (overwriting that if it is already there).
- Add: Bindings for Live.
- 
- 
- 
- Add: JMeter: Initial: Load test plan for ClubCMS.
- Mod: JMeter: Load test plan configuration file for DotGolf Live - repeat most visited pages using loop controller.
- Fix: IsDotGolfIPAddress() references updated to make X-Real-Ip header work.
- Fix: Improper case for country code stops the correct connection string from loading.
- Fix: Topup bonuses not applied properly when a member tops up their account via golf.co.nz.
- Fix: Default hostname wasn't being filtered correctly.
- Fix: bindings.list needs a trailing newline I think.
- Add: _deploy folder. Mod: Root key remediation.
- 
- Mod: Using --exact-timestamps for now; this will likely mean more files are synced than necessary; but we have to be sure the files are ALL updated.
- Fix: Instance Environment tag lookup bug; defaulted to dev in staging.
- Moved bindings.list into _deploy, we don't need environment specific bindings; these will be taken care of on the reverse proxy. Fix: SourcePath parameter was missing on the before/after ps1 scripts.
- Fix: Removed some hardcoded job names from the deploy script.
- Add: New build send-command script for Public/Jenkins.
- Mod: Add .wyu and .wys mime type mappings for ConnectorAPI so that wyUpdate downloads will work by default.
- Mod: MetricMonitor root key remediation and missed commits from the past.
- Mod: Root key remediation in DotGolf.Mailer.
- Mod: Root key remediation in API.Widgets (this is an unused project but doing it anyway)
- Mod: BulkEmail: Root key remediation and upgraded to AWSSDK v3 so that the EC2 IAM role may be used.
- Mod: SyncFreshdeskTickets: Upgraded to SSM connection strings and integrated DotGolf.Shared for Database.cs. Also turns out there were some uncommitted mods in here (syncing updated_at, group_id, product_id and source fields); also committed now.
- Mod: LoveGolf: Upgraded to SSM connection strings.  Also, seems that LoveGolf wasn't even building properly due to a parameter change on InsertCasualGolfer() ??  Fixed...
- Mod: TBTransactionProcessor upgraded to SSM connection strings.  Also linked in DotGolf.Shared to make use of the central Database.cs class.
- Mod: SSO: Upgraded to SSM connection strings.  SSO is tricky because it connects to both the Aus and NZ databases.
- Fix: Build error - countrycode is autodetected now.
- Mod: CountryCode now defaults to nz and can be overridden in the Web.config file (for Org and Pennants)
- Mod: Database.cs now uses a better parameter name - /dotgolf/dev/nz/database/connection-string.  dev is the environment which is autodetected (but we support setting an Environment appSetting if it can't be autodetected); nz is the country name (default to nz, but we can override this on the arguments) Mod: Pennants: Upgraded to SSM connection strings.
- Mod: JMeter: Load test plan configuration file for DotGolf Public Website. Added csv files that contains values for the date and clubid parameters.
- Mod: Mailer: Got rid of Mailer.AU, we don't need that anymore. Mod: Upgraded to .Net 4.5 so that I can reference DotGolf.Shared and use Database.cs and Exceptions.cs from that. Mod: Upgraded to SSM connection strings.
- Mod: ConnectorAPI: Upgraded to SSM connection strings.
- Mod: Upgrade ClubCMS to SSM connection strings.
- Mod: CasualGolf API: Upgraded to SSM connection strings.
- Mod: Analytics: SSM for connection string storage.
- Mod: Adweb: Moved to SSM for connection string storage.
- Mod: Removed some unused pages.
- Mod: Org: Use SSM to get connection string; removed manual connection string assignments.
- Add: JMeter: Load test plan configuration file for DotGolf Public Website.
- Mod: Server migration: Include the error message in the output.
- 
- Add: bindings.list for DotGolf Live. Add: Extern reference to _shared deployment script.
- Add: deploy folder for Live
- Add: Server migration: Script to check status of DotGolf websites.
- Fix: Missing quotes in deploy script.
- Mod: Use the SourcePath passed from Jenkins to get the assets from the right area in S3.  This also allows us to use the same bucket.
- Mod: Moved deploy script into _shared, this one is generic enough.
- 
- 
- 
- 
- Renamed
- Mod: AWS: Post Config Script - added function InstallAWSCLI()
- Fix: Trailing comma.
- Add: site-deploy.ps1 script to deploy one site
- Mod: AWS: Post Config Script - added function SetWebSiteAppPool()
- Add: bindings.txt file to Public - this contains a list of hostnames we should be binding to for each environment - just added dev
- Mod: AWS: Post Config Script - added function NewWebAppPool()
- Fix: AWS: Post Config script - Instead of showing the file extensions, it was hidden instead. Should be Hidden = 0.
- Fix: AWS: Post Config script - Instead of showing the file extensions, it was hidden instead. Should be Hidden = 0.
- Mod: AWS: PostConfig - added functions SetDefaultAppPoolSettings and RenameComputer.
- Fix: AWS: Post Config scripts -
- Mod: Removed connection string from Web.config.
- Mod: Upgraded to Amazon SSM for connection string storage.
- Fix: Another imagehelper reference for member profile pictures gone.
- Fix: Got rid of an imagehelper reference in the Kounta API.
- Mod: Refactored to remove public/Admin.asmx usage.
- Mod: Refactored to remove public/Admin.asmx usage.
- Mod: Refactored to remove public/Admin.asmx usage.
- Fix: Audio gallery links were not pointing to the new static domain.
- Fix: Another image banner backwards compatibility issue.  This should be the last one - no more pw/ references left.
- Fix: Changed site takeover background image code to be backwards compatible.
- Fix: Double URL encoding of image url for front cms panel images (geap tile)
- Fix: More small things; enabled SSM; urldecode path before asking S3 for the object.
- Fix: S3 objects are now uploaded and requested in lowercase to avoid casing problems.
- Mod: Public: Search: Disabled "onblur" event handler on the global text search field (i.e. .SearchField) that sets the default text value to "SEARCH".
- Mod: Public: Search: Use html placeholder attribute to provide hints on the search text field instead.
- Mod: AWS: PostConfig script for DB server
- rename script file
- Mod: ClubCMS: responsive news articles control: [missed to add the same condition to the main article query in my previous commit]: use the existing start and end dates columns (nullable) to allow further filtering of the articles. e.g. Bottle Lake have short-lived news articles featured on their website home page, and we can use the End Date to automatically expire news articles.
- Mod: ClubCMS: responsive news articles control: use the existing start and end dates columns (nullable) to allow further filtering of the articles. e.g. Bottle Lake have short-lived news articles featured on their website home page, and we can use the End Date to automatically expire news articles.
- Fix: Check for DBDatabase appSetting caused a crash in Standard.Page_Load.
- Mod: Initialise StaticContent configuration on demand, not in a static constructor.
- Mod: Trying something to get public to work.
- Fix: Detect a fault condition in the error handler, and bail out.
- Revert.
- Add: Error logging if SSM fails.
- Mod: ClubCMS: updated email template content to remove the text "click here" (to avoid getting treated as spam)
- Fix: Public: Teebooking - Email notifications getting bounced by xtra mail server. Hoping we get through this time by making a slight change on the email content from "please click to the link below:" to "please go to.." Related to Freshdesk ticket #9945 #9974 #9982 #9985
- Mod: Store the bucket name for static content in SSM too.
- Fix: Ah stuff it, that's too hard - stick with nz-production-static.
- Mod: Changed content bucket name to "static-content".
- Major: Upgraded all areas using the ImageHandler to use the new StaticContent class, which in turn uses S3 and a dedicated image resizer to render out images. Mod: Store database connection string and static content URL in Amazon SSM parameter store. Mod: Removed all AWS access keys and secrets; we now use a) a credentials file in Dev and b) an EC2 role in staging/prod. Fix: Site takeover image - we now immediately expire the cache to make the image appear straight away; before you had to wait up to 5 minutes. Mod: Removed Admin.aspx; we don't need this anymore since images are now stored in a central location.
- Mod: sql: updated email content to remove the text "click here" (to avoid getting treated as spam)
- Mod: Live: updated email template content to remove the text "click here" (to avoid getting treated as spam)
- Mod: Live/Shared: updated email template content to remove the text "click here" (to avoid getting treated as spam)
- Mod: sql: rpt_TournamentStats sp: added new parameters: NumberOfResults and MinimumNumberOfRounds
- Mod: AWS: EC2 - add function to install CURL for Windows.
- Mod: sql: rpt_TournamentStats sp: added Rounds Played column and return 20 records per query
- Fix: Images: Incorrect relative redirect caused problems. Mod: Store zoomed images with reduced redundancy; we can regenerate them if they are lost.
- Add: S3 image resizer to image helper.  This will be used to resize S3 images on the fly.  Eventually we'll want to go to a lambda function for this and decommission images.golf.co.nz, but for now adapting the existing ImageHelper code was the easiest approach to make things work.
- Mod: Moved away from images.golf.co.nz in favour of static.golf.co.nz (which is cached by nginx, backed by S3)
- Fix: Corrected typo.
- Fix/Mod: sql: rpt_TournamentStats create procedure script: added Gender filter and corrected raw score query
- Fix: Local file dependency removed.  We don't use custom email templates on local disk for clubs (I had a look at Web4 and could not find a single case).  Templates all reside in S3 now.
- Mod: AWS Prep Work: Post configuration scripts for EC2 instances.
- Mod/Fix: ClubCMS: responsive event lead: select the set competition when in edit mode
- Mod/Fix: ClubCMS: responsive event lead: assign unique ids so this control could be properly used multiple times on a single page
- Fix: Another file dependency in the ABA file exporter.
- Fix: Cleaned up some commented out File methods; added more SERVER_LOCAL_FILE_DEPENDENCY warnings to identified problems in golf.co.nz code.
- Fix: Got rid of an unnecessary File.Write to local directory - tournament terms and conditions PDF.  Attachment data is already saved in the Attachment table.
- Fix: No longer using ATTACHMENTS_URL.
- Fix: Local file dependency - old TournamentCMS player profile pic uploader.
- Fix: Local file dependency problem - bulk statement generate process.
- Fix: Local file dependency: False warning.
- Fix: sql: rpt_TournamentStats: added xCount > 0 (only include in the report if xCount is positive, eliminates the divided by zero error I got when I queried the stats for 2018)
- Mod: ClubCMS: responsive image slideshow: initialise control ids
- Mod: ClubCMS: responsive Player List: display also players who were manually registered by the club through DotGolf Live. Query was based on the DotGolf Live Player Registration query (PlayerRegistrationService.GetRegisteredPlayers)
- Another missing class.
- Rapplied Hastings loyalty bonus rules mod to Trunk.
- REVERTED POS WORK (moving this to a branch) There is some Hastings loyalty BR stuff included here too (because of a messy revert - will reinstate this shortly once the branch is complete)
- Mod: Live: comp player registration list: rephrased "has paid online?" to "paid online?"
- Fix: Live: fixed manual registration of players; the other commit broke this (HasPaid is not defined)
- Mod: Live: added RegisteredPlayerRec.HasPaid (missed from the previous commit)
- Fix: ClubCMS: check first if the css file exists before trying to read it
- Fix: Narration on loyalty earned MJ.
- Fix: Typo.
- Mod/Fix: ClubCMS: responsive image slideshow: assign unique ids so this slideshow control could be properly used multiple times on a single page
- Add: Store ASP.NET state in Redis.  This is experimental and not included in the Web.config.  To enable it, do:
- Fix: ClubCMS: responsive slideshow: fix "Edit Scrolling Images" link to properly show the corresponding list of images (it used to slide down and up (the edit section of all image slideshows on the page) in one click)
- Fix: Handle Xero cert error inside the try..catch to avoid breaking clubs not even using the rule based integration.
- Add: More complex code to sort out stripping away the leading 2 digits of the membership number for some clubs (Hastings).  Their cards look like this: ;131801234? where 13 is the year.
- Add: sql: org report: rpt_TournamentStats stored proc
- Fix: API: TeebookingController: AppyBookingChanges - e-mail and phone number are not saved when making a booking from the Tee booking app as a guest (i.e. Continue as guest option).
- Fix: Public: Tournament Stats: get only RSResult records with the "Gross" Competition Type
- Fix: Public: Tournament Stats: get only RSResult records with the "Gross" Competition Type
- Fix: Multi Course Classic Setup: Markers were not filtered by men/women.
- Add: Hidden Multi Course Classic setup page for us to use when configuring 5CC and PaRnz tournaments.
- Add: Loyalty topup bonuses: Now posts to Xero to record the increased liability and expense via a manual journal.
- Add: Topup bonus calculations for Hastings.  Untested - committing to get stuff into my other code tree.
- Add: Account topup bonuses added into Settings/Accounts and Loyalty.  We can now add/edit/remove rules for any account type that is active at the club.
- Mod: Org: Reports: added a "Tournament" report section
- Mod: Accounts/Settings: Upgraded to typescript, cleaned up inline CSS references.
- Fix: #10123: ClubCMS: responsive Edit Member Details control: saving of details from the club website empties out the SubsDirectDebitBankAccountNumber. Missed to add the condition to pass a "SubsDirectDebitBankAccountNumber" value only if this is shown on the form (ShowAccountNumbers).
- Fix: Kounta: Hide the House Account payment button from the checkout payment areas via a TamperMonkey script.
- Mod: Live: Tournament Registration List: added a "Has Paid Online?" column so clubs could easily determine which players registered and paid online
- Mod: SCA no longer permits editing of a scorecard if that scorecard forms part of a completed Vend sale.
- Fix: POS: Card order on summary panel wasn't quite right yet. Add: TabMember: Account balance is now included on the tab text, like the subscriptions tab. Fix: POS: Selling house account credits to be allocated to more than a single customer works in the DotGolf POS now.  Previously it was all allocated to the customer set on the sale.
- Mod: POS: Keep the summary cards in the same order as the left card list, otherwise it gets very confusing for the user. Add: POS: Subs overdue warning added to summary area. Fix: POS: Card sort order on the left now matches SCA. Fix: DotGolf Checkout - stop the SPLIT button wrapping to the next line if the line gets too long.
- Fix: Live: Reports: Adhoc Carts - Green Fee Report - the number of Quantity Sold of an ad-hoc cart fees not displaying correctly under Green Fee Detail. added AdhoCartId column in #tmp_GreenFeeSummary.
- Mod: ClubCMS: event calendar: pass on the set registration page name
- Fix: API: TeebookingController: ApplyBookingChanges - 1) Bug fix: Update TBTransaction table after processing a payment transaction thru DPSPaymentsModel.PurchaseRefund (i.e. Takapuna). 2) Bug fix: TBTransaction.TransactionFee should be 0 if booking fee is charged to the club (TBClubSettings.TransactionFeeChargedToClub).
- Mod: POS: Renamed POSViewModel.ts to force a POS javascript update for end users.
- Mod: ClubCMS: Event Confirmation: Check if user is already registered (RSCompetitionEntry) before the insert (Registration.RegisterPlayer)
- Mod: sql: CWControlProperty inserts of existing properties
- Mod: ClubCMS: rEvent Registration: only do Registration.RegisterPlayer (complete the registration) if the registration doesn't require a payment. This is also called in the rEventConfirmation control after a successful payment. Updated checking whether the user has already registered (added back the original query)
- Bump revision.
- Bump revision.
- Mod: API: TeebookingController: ApplyBookingChanges - set the appropriate TxnType on the transaction xml request sent to PaymentExpress based on TBClubSettings.DPSPaymentModel.
- Fix: POS: Read-only when not today, completed implementation. Fix: Deselect selected scorecards when changing the date.
- Fix: POS: Past/future dates should be read-only; can't process sales on dates other than today. Fix: POS: Don't try and reset the date to today unless it's midnight.
- Mod: ClubCMS: rPlayerList control: exclude removed players (use RSCompetitionEntry to determine if a player has been removed); revert changes done to PlayerList control (used by the PGA)
- Fix: ClubCMS: Player List: add alias to ambiguous column
- Mod: ClubCMS: event registration: default btn-primary background colour update
- Mod: ClubCMS: Event Calendar: hide the time by default
- Mod: ClubCMS: PlayerList control: exclude removed players (use RSCompetitionEntry to determine if a player has been removed)
- Mod: POS: Numpad now does a $ prefix and you can change the header (in our case, to "Enter Amount") when starting.
- Fix: POS: Store imported Vend variant names separately to product names. Fix: POS will now show the variant name when loading a previously sold variant product.
- Mod: ClubCMS: Event Registration: updated the way a player is registered
- Mod: ClubCMS: Event Registration: updated checking whether a member has registered (without payment); also updated the message styling
- Fix: SignalR race condition in pre-print systems.  This was found in POS testing but may have been a problem in BCA an SCA too.
- Mod: ClubCMS: Competition Registration Register button: differentiate the Register button for the old non-responsive calendar, and the responsive calendar.
- Fix: POS: Carts were missing from the right hand summary. Fix: Due to products API v2 the price displayed in the POS had double tax added. Fix: Cart fees were never sent to Vend. Fix: When processing scorecards and you change a cart fee, the deleted cart fee is doubled in TXLine due to an inadvertent update/rewrite of a now-deleted TXLine record.
- Mod: ClubCMS: responsive event calendar: removed unused search filter form; removed unused code
- Fix: API: TeebookingController: /calculate-fees - set the booking fee to 0 if a booking fee is supposed to be charged to the club (based on the configured setting TBClubSettings.TransactionFeeChargedToClub=1)
- Fix: Live: AdhocCart: Disable save ad-hoc cart if there are no cart-fees configured for the club. Call PointOfGolfService.GetAllApplicableCartFees() directly instead of going through ScorecardWebService.
- Mod: sql: ClubCMS: CWControlProperty inserts and updates
- Mod: API: TeebookingController: Disable auto booking if the club does not have the AutoBooking product ("AB").
- Mod: Live: AdhocCart - (1) SQL script to create the AdhocCart table. (2) Add FK AdhocCartId on TXLine. (3) Added new parameter "RetrieveAllApplicableFees" in live_GetAvailableCartFeesForMemberAndDate stored proc. @RetrieveAllApplicableFees when set to 1 will return both member and visitor rates (mainly used in the Adhoc Cart module).
- Mod: ClubCMS: responsive Contact Form: added new properties: SubjectFieldCaption, DefaultMessage, DefaultSubject, SubjectReadOnly. These are all available in the old non-responsive contact form.
- Mod: POS: Removed (PAID) indicator in summary. Mod: POS: Added GRAND TOTAL line in summary.
- Fix: POS: Variant names are now showing up in more places. Fix: POS: One of the variant options were previously missing from the variant picker.
- Fix: POS: The tooltip popup for adjusting product quantities got broken along the way.
- Mod: POS: Upgraded to v2 of the Vend products API.  This should have been done earlier! Mod: Variant picker implementation is now more robust because we can use the guids from the products v2 endpoint. Mod: Product amount overrides built in - this needs a tag, dotgolf-prompt-price, added to relevant products in Vend.  Having that tag will make the DotGolf POS prompt the amount the customer should be charged for that product; handy for things like House Account Credit.
- Fix: POS: Cachebuster for the dotgolf.checkout CSS file.
- Add: DotGolf.Numpad - an on-screen numeric keypad for touch screens.  This is for the POS initially, but could be used anywhere else as it is a standalone dialog.
- Fix: API: TeebookingController: API /search-slots - if we click on "All" tab in the teebooking app, the "fully booked slots" are not shown. modified one of the conditions in line 1195 to allow fully booked slots to be returned.
- Mod: Live: AdhocCart - allows user to book an adhoc cart. These new source files were not included in the previous commit.
- Fix: POS: Removed debug product list output from variant picker dialog.
- Add: POS: We now support picking variant options from the POS.
- Mod: Live: AdhocCart - allows user to book an adhoc cart.
- Mod: Live: PointOfGolf: PointOfGolf.BookingEditor.js - select the lowest calculated fee (aside from Complimentary)
- Mod: Live: PointOfGolf: PointOfGolf.BookingEditor - Select the highest green fee available as the default cart fee. Use the actual complimentary green fee configured in the system and remove the manually added 'Complimentary' green fee (which does not get inserted into TXLine if selected).
- Add: POS: We now support quick key folders (1 level deep) as Vend does.  They don't support absolute positioning yet, but this shouldn't be very difficult to add later. Mod: Quick key information is no longer stored on the VendProduct record since a product may be linked to more than one quick key. Mod: Refactored to remove VendKey and VendPage classes, replaced with VendGroupTile* classes for folders and products.
- Mod: sql: ClubCMS: CWControlProperty set the DefaultSetting value
- Mod: POS: Quick key groups (those that are enabled in the POS - see Vend Settings) are now displayed in tabs across the top of the screen.  If you have a favourite group selected, those products are displayed directly on the SCORECARD tab so as to avoid another tap for the user. Mod: Increased the POS screen width by approx 70px to accommodate another product tile, bringing it up to 5 across to match the Vend layout.  This will make it possible for us to show our products in the same configuration as those set up in Vend.
- Mod: POS: Carts are now able to be selected and paid for via the POS.  Note that selling a cart to someone via the POS is different to allocating one in the tee sheet; I'm not sure how this would affect cart stock levels; we'll need to test. Mod: There was never a complimentary cart fee in the system until now; I've added setup code to the green fee maintenance area to create this complimentary item if it is missing.  We will need to remove the hardcoded complimentary fee options from the POG and SCA (ad-hoc carts) later. Mod: Styling improvements so you can easily see processed sales at a glance. Refactor: Removed VendCashPayment etc properties from POS viewmodel; we don't use these anymore as they are encapsulated by the checkout dialog. Fix: If you leave the POS open overnight it doesn't update to the new date automatically.
- Fix: POS: Minor issue where if you deselect/select a product from the POS screen you end up with some money to pay, when the net should be $0.00.
- Fix: POS: Course fees weren't charged when you add a course fee to a sale. Mod [major]: The POS code will now merge changes into Vend sales so we can add/remove any type of item onto/from a sale and the correct thing will happen in Vend.  We post negative quantities onto a sale (in new product lines) for returns/removes, and the opposite for added lines.  This makes loyalty and other webhook stuff work properly. Mod: Refactored CreateOrUpdateSale() to split comp fees, green fees, course fees and product charges into separate methods; easier to maintain this way. Mod: Refactored VendSales() to include a local clubid.
- Mod: POS: Better look while loading competition select data. Fix: Hide refund buttons in checkout if the process is complete (so the user can't click them while we're fading out the modal dialog) Fix: In refund mode if we do a partial refund (so there is a negative amount left), the dialog closed after the first partial refund.
- Mod: POS: Refactored to improve strong typing for scorecard object in POS. Fix: Searching by name no longer errors out. Add: It is now possible to search by scorecard number.  Hitting Enter selects the scorecard if found.
- Add: POS: Support for voucher payment type.
- Fix: Preprint wasn't assigning green fees properly due to calling the wrong method in the FeeSelectorControlService. Mod: POS: If there is no course fee assigned, don't show that in the summary.
- Mod: Preprint with Vend: Hide the "course fee" box; we always assign course fees (as long as they are due for the player) and leave them unpaid so that they show up red in the POS.  It is up to the user to collect the money for these cards. Mod: Properly compute green fees for non-members or out-of-category members; we no longer set everything to complimentary.
- Fix: Duplicate call th POSFinaliseCheckout() warning incorrectly logged upon every sale, duplicate or not.
- Fix: POS: If you remove the last competition from someone's scorecard, the competition is never removed when the sale is closed, because the newSelectionObjects array was NULL and not empty [].
- Fix: Ensure that you can't add further scorecards to an existing vend sale.  Although this is technically possible (adding more cards), it makes things difficult and there is no practical reason you'd want to do this (you're taking a further payment after all - may as well do a new sale).
- Add: POS now supports refunds when products, green fees or competitions are changed in a way that causes a lesser sale total to what was previously paid.  This works for both single and multi scorecard sales. Mod: Moved CHECKOUT button to the top of the summary so that the user doesn't have to aim at a moving target (it used to shift down as things were loading) Mod: Checkout dialog now auto-closes when the transaction is fully paid.  Change is now displayed in a toast notification bottom right on the screen. Mod: Checkout dialog now has a semi opaque backdrop that makes it modal, preventing the user from interacting with the sale screen below.
- Add: New unit test code to fail the tests with an obvious error if any badly named schema scripts are committed, so that we know about them and can fix them up.
- Fix: Another script name problem.
- Fix: Schema script naming problem - should have a space after the number, not an underscore.
- Fix: Minor performance gain in Subs Summary Chart query.
- Fix: #10040 Ported fix from r16503 to the Tray App print process.  This sometimes caused issues and the tray app printing had never been fixed to sort out funny characters in card names.  This caused the tray app to crash at Thames.
- Fix: Org: TabMembers Search: Fix for #7690 - live_FindMembers_SearchText procedure returned duplicate non-affiliate record where one non-affiliate record linked to two passport ids (one passport is inactive/deleted and the other is active). For this case it was non-affiliate id 1000335102 - returned when searching for members having a surname 'Taylor'.
- Ignored js file.
- Mod: POS: Converted POSViewModel to TypeScript.  Found a couple of bugs while doing this.
- Mod: POS: Moved CLOSE/CHECKOUT buttons to the top of the screen so they don't keep shifting around as the user is modifying the sale.
- Ignored some binaries.
- Add: Missing property.
- Reverted checkout into SCA.  We'll be building this into the POS instead.
- Add: VendSales code to modify competition entry fees in a sale.  Will likely re-use this soon.
- Mod: Minor refactor and typo corrected.
- Mod: Checkout now supports refund mode if you pass it a negative tender amount.
- Add: Checkout into SCA (this is just for posterity/record, I'll revert in a few minutes)
- Mod: Connector App.config default changed to connect to ConnectorAPI in dev.
- Mod: GOTG: contact details page NZG location update
- Mod: GOTG: banner image - mothers day
- Mod: Public: update the Role of NZG text as requested by Dean
- Mod: Public: TournamentCourseStats: removed the unnecessary join to the RSEntry table
- Fix: #10009 Didn't mean to commit all the other stuff in this file - that caused problems with the verification link email in public registrations.
- Mod: Live: GetOverdueAmount: join with Cmember instead of Member, replaced the last condition (select invoice statement) with a simpler one, so that only invoices with positive outstanding amount are selected
- Mod: Live: GetOverdueAmount: update alias and add comments
- Mod: Live: GetOverdueAmount: exclude instalments of zero-balance invoices
- Mod: #9798 Removed the legacy part of the ScoreHD query (the part that considers DGE results) and put a FromDate restriction on to be >= 2016-01-01 (since the last result was returned in Nov 2015).  This is to avoid the report grinding the system to a halt; the legacy results part of this query is very heavy.
- Mod: sql: added EventRegCreditCardTransactionFee and EventRegAccount2AccountTransactionFee to the Club and Association tables
- Mod: API: Disable letterboxing for profile images.
- Mod: Public: Tournament player stats: handle no results
- Mod: Public: Tournament player stats hide / show full list
- Mod: Public: Tournament player stats
- Mod: Public: Tournament DashBoard: added player stats summary widget and set Visible properties for CourseStats and PlayerStats
- Mod: Public: Added IsCourseStatsWidgetVisible and IsPlayerStatsWidgetVisible
- Mod: Public: Tournament Course Stats: show five rows
- Mod: Public: Tournament player stats
- Mod: Public: Tournament player stats
- Fix: Adweb: ClubProduct: Functions - Wrong table name. It should be AXAccountType instead of AXAccount.
- Mod: Live: Functions: Mod for #9559 - Events report. Include calculated bookings in the report.
- Mod: Slicer Payment Reconciliation Report now includes SMS fees for tournaments.
- Fix: #9856 Long_CenterTray didn't print the proper team course handicap value in one-scorecard-per-team mode because it doesn't have the SubPlayers subreport implemented.  Rather than doing that (which is the ultimate solution but would take lots of time), I have put a simple hack in place to put the team course handicap in the Course Hcap box.
- Mod: Public: TournamentCourseStats: clean-up
- Mod: Public: Tournament Player Stats initial commit
- Mod: ClubCMS: PGA draw and results widget: exclude competitions that are hidden from the public website (tc.HiddenFromPublicWebsite = 0)
- Fix: EmailViewer: Cleaned up some stuff; it actually builds properly now on a clean checkout.
- Add: Initial version of AWS Lambda email viewer.
- 
- Add: API endpoint to get email content, attachments and images.  This will soon be used for the new EmailViewer running in AWS Lambda.
- Mod: Org: Allow Geoff / PGA to enter scores in for the Charles Tour events but not allow them to submit the scores for handicapping
- Mod: Live: Functions: Mod for #9559 - Events report. Display link events report link on Reports tab page.
- Mod: Live: Functions: Mod for #9559 - Events report.
- Add: Kounta tampermonkey hack to allow access to the menu in touch mode using the mouse.
- Fix: Missing semicolon on function assignment caused JS error in org (on minified JS file).
- Mod: Bulk statements/invoice email generate processes - removed local file dependencies.
- Mod: Local file dependencies - removed dangerous methods - will see if this still builds.
- Mod: Reverted dim_CMember changes from last week, since they made the resultant data worse and we've rewritten it anyway for the new Elasticsearch stuff.
- Fix: Added dispose method to get rid of web app binding if NUnit doesn't run TearDown().  This is only a nice-to-have in dev mode.
- Add: API: Endpoint to send rollover notifications after new handicaps have been frozen for 2 weeks (send-rollover-messages-and-notifications). Add: Unit tests for said endpoint. Mod: Minor refactoring to enable some code sharing between friend activity and rollover notifications.
- Mod: Adweb: ClubProduct: Functions - Add "FUNC" AX account type mapping in AXAccountTypeClub when activating Functions product.
- Fix: Friend activity notifications: NULL problem with LastSent caused tests to fail.
- Fix: Cleanup after running friend activity notification tests.
- Refactor: Test setup code restructured to use TestObjectTracking properly.  Also added NZGACategory, Category, Region, Member and CMember in there to make it easy to create/destroy these for unit tests.  FriendActivityNotificationTests have been refactored to remove the massive SQL block - this is in preparation for adding handicap rollover notification tests.
- Mod: Org: CompetitionLink table: where we log linking of competitions e.g. Charles Tour comps
- Mod: Org: hide the Live Scoring section from the PGA so they don't enter scores in for competitions that are linked with NZG. E.g. Charles Tour competitions. NZG does the entering of the scores in the competition they have created.
- Mod: Upgraded to Google Tag Manager for Google Analytics - the old ga.js was a parser blocking script, slowing down Live page response times by around ~30ms.
- Fix: #9518 POS: If you process a paid sale, followed by a complimentary one (where no checkout takes place), the complimentary sale never hits Vend, and never gets closed/goes away from the DotGolf POS.
- Mod: Public: Tournament Course Stats Summary: added a few more columns
- Mod: Public: Tournament Course Stats: added filtering by round number
- Fix: Don't join to deleted passports when saving new comments.  This causes duplicated messages in the Message table.
- API: Fix: Don't return deleted Passport records in the friends search.
- API: Add: Test to check that LinkType and LinkValue are present on a score comment. API: Improved async/await usage to avoid deadlocks.
- API: Mod: Inline assertions for API test call results. Mod: Use the API to add test comments to scores rather than copied inline code.
- Mod: Build server unhappy with the new C# syntax.
- API: Introduce ParentMessageType and IsSystemType to help manage friend activity notification types and keep the app ui clean.
- Mod: Only send a Slack notification if we've just sent 5000+ messages.  Otherwise we keep getting alerts for small bulk emails sent by clubs.
- API: Add Basic auth to enable us to run the friend activity notifications off a CURL job.  Credentials are hardcoded:
- Fix: API: We were sending friend added notifications to the person who is adding the friend, not the friend.
- Refactor: We already have a Passport.AddFriend() method; use this instead of the duplicated code.
- Fix: Live: TabMember: ClubMember History - Fixed #9873. Member history tab fails to load.
- Add: Message LinkType and LinkValue properties when a friend is added.  This should allow the app to link through to the friend dashboard when tapped.
- Fix: Public: Tournament Course Stats Summary: handle no results
- Mod: Public: Tournament Course Stats Summary: added sorting
- Mod: Public: Tournament Course Stats Summary: removed a random letter on the page
- Mod: Public: Tournament Course Stats Summary
- Mod: Org: Pennants: ddlYear population: make it dynamic (from 2014 to current year). It used to be hardcoded i.e. from 2014 to 2017
- Mod: Public: Tournament Course Stats: add average score, eagles count, etc. per hole
- Add: Public: Tournament Course Stats: initial commit
- Fix: ClubCMS: PGA: Earning: fix the date filter; also added the date to the competition name
- dim_CMember: Since we've changed the order that history is being computed (backwards in time starting with CMember Current), these statements all had to change:
- dim_CMember: On occasion (in the dark days of DGE) we used to update CMember records manually, changing their ComputerNo values.  Unfortunately this left history in the system that no longer relates to real records at clubs (in CMember).  So this mod adds a clause to the WHERE statements to exclude any CMember records that we don't currently have sitting in the table.  We effectively pretend like they never existed.
- dim_CMember: ISNULL bug that stopped us returning some records with 1999-11-11 values in the NewDate_Resigned column.
- dim_CMember: No longer keep LocalMemberCode in the intermediary select; we don't need it and it causes distinct issues in the UNION.
- dim_CMember: Update the start date with Epoch date for anyone that was not a new member since Epoch.  We no longer have a line in the sand at the epoch, we now have this line in the sand at the present moment.  That means we have to extend the earliest change we've got all the way back to the epoch.  Absence of history records categorically means nothing happened in that time.
- dim_CMember: We've conceptually changed how we compute history now - instead of working forward in time (starting at the Epoch in 2009-10-06), we start at the present moment and work backwards in time.  This is because we've got a really good line in the sand (in CMember - the present data is reliable), and we've got a complete log of changes in CMemberHistory and MemberHistory.  So in theory, with these 3 tables, we can calculate a complete log going backwards.
- dim_CMember: Because you can have multiple resigned computerno's at the same club, having the ComputerNo value in the query stopped the distinct UNION from working.  This caused problems in the rollup part of the query.
- Fix: Org: PGA Tax Statement report: updated the tournament competition dropdown query to return competitions with rsresultprizemoney; also prepended the competition date to the Competition Name to make it easier for users to look for a competition
- Fix: Live: Functions: Recommit fix made in rev no. 38530. "View sales quote - fixed null exception."
- Revert pervious commit 28530 - accidentally pressed [Enter] key.
- Revert pervious commit 28530 - accidentally pressed [Enter] key.
- Fix: Live: Functions: View sales quote - fixed null exception.
- Mod: Live: Functions: Feature #9384 - Invoice sent from DotGolf to Xero should code Kounta orders to the functions clearing account.
- Fix: Live: Invoice: make the first and last instalment dates read-only if the invoice has saved instalment records already
- Fix: Live: Invoice: make the upfront (or initial) payment read-only if the invoice has saved instalment records already
- Fix: Live: Invoice: make the first and last instalment dates read-only if there's payment/s against the instalment/s already
- Mod: Live: Invoice: if the invoice has existing payment/s, the invoice date and due date are read-only
- Mod: Included HD in scorebypassportid column, for speed when calculating friends' activity.
- Fix: ClubCMS: PGA: member earning and tax summary: truncate the tournament name if it's too long so that the amounts won't be truncated in the pdf
- Fix: ClubCMS: PGA: member earning and tax summary: added DeletedDate is null condition to the query
- Fix: Progress To Par leaderboards were not shown correctly due to bug that crept in with previous performance optimisation.
- Fix: Warehouse: Because we're now rolling data back from the present time into history, we now need a complete line in the sand for the present moment.  This means we can no longer backdate CMember Date_Resigned values, we have to have another GETDATE() value for both live and resigned records.
- Fix: Problem where fields in dim_CMember were left as NULL because we were rolling them up from past to future, instead of the other way round.  If someone is a home member of club x (per CMember) and they have never changed, that means they were a home member of club x at the epoch also - this wasn't happening before this fix.
- Fix: Live: ComputePaymentScheduleInfoForInstalments: we don't need first / last instalment dates for single payments
- Fix: TLS 1.2 for GetOnTheGreen.
- Fix: Live: Subs Renewals: ComputePaymentScheduleInfoForInstalments: Adjust the last instalment date if it's past the new subs item end date
- Fix: Possible race condition on completing a DPS transaction - semaphore released before receipt data updated. Add: Logging around the transaction Complete webservice call, in case this is what is causing our trouble.  DLL deployed to Taumarunui manually.
- Mod: ClubCMS: CWControlProperty insert: existing MerchantReference property of the control (but just not defined in the table yet)
- Mod: ClubCMS: rEvent Confirmation control: added new property: SendToEmailAddress
- Mod: ClubCMS: Event Confirmation: added new property: SendToEmailAddress (if this is set, this is the email address used to notify the club of the registration)
- Mod: Live: CreateInvoiceForMember: Just in case the due date is null, assign 1) the document date to it, or 2) if the invoice is in instalments, assign the first instalment date to it
- Add: API: Description added to v1/messages/message-types endpoint.
- Add: MessageType.Description column.
- Mod: Change Message.MessageText to unicode so we support emojis.
- Fix: API tests were failing due to changes in push notifications. Add: Messages are now being added when comments are made on scores. Fix: Squawk engine error handling wasn't working properly due to an attempt to commit a rolled back transaction.
- Add: Columns to store links for messages.
- Mod: ClubCMS: use the DPS Tournament user instead of the DPS Subs user
- Mod: Removed leaderboard dataset from Viewstate, this caused huge postbacks and load problems for clients with slow uplinks.
- Add: Metrics for leaderboard load time so I can monitor this.
- Fix: #9821 Minor performance issue corrected which will hopefully improve page load times for the leaderboard.
- Add: A private message is now sent to anyone who is added as a friend.  This message will appear in the Inbox on the DotGolf and My Golf apps.
- Mod: Refactored so that Add/Delete friend functionality now lives in the Passport class.
- Mod: Only submit handicappable scores for handicapping - i.e. at least 13 scores returned, and for holes not played set to -2 so that gets processed properly.
- Mod: ConnectorAPI: Disabled and removed session support for this API endpoint; we don't need them and they slow things down in IIS by causing locking.
- Fix: Should only submit scores for members; non-affiliates cause errors here.
- Fix: Test code was left in the SubmitScoresForHandicappingProcess scores query, resulting in no scores being submitted.
- Add: New blurb on App About page.
- Fix: Live: Renewals: correct the computation of the last instalment date
- Mod: ClubCMS: event registration: apply the transaction fee
- Mod: ClubCMS: responsive Event Registration: added gender eligibility check
- Mod: Live: Renewals: Line 372: Clubs could generate invoices late so this means that we could use a past date as the invoice due date. Line 394: The upfront payment date is prepopulated with the invoice due date.
- Mod: Org: Modified InvoiceInterface.ExportLeviesInvoiceToXero() for feature request #9534. Update the format to "<year> NZ Golf Levies".
- Fix: Live: Competition Setup: Fixed ticket #9288 - unable to save comp after modifying divisions' hcp index. Perform validation on live comp divisions only.
- Mod: ClubCMS: responsive Event Registration Confirmation: updated total amount; removed transaction fee line
- Mod: ClubCMS: responsive Event Registration control: updated checking of eligibility; just handle non affiliates so they won't throw an exception. But this control will be used by home members and affiliates
- Mod: ClubCMS: CompetitionDetail: added Visitors and AllowNonAffiliates
- Mod: ClubCMS: responsive Event Registration: style fixes / updates
- Fix: ClubCMS: responsive Event Registration: MemberAlreadyRegistered query: added missing condition to filter the query by the Competition ID
- Mod: ClubCMS: responsive Event Registration: use the existing CssClassName property
- Mod: ClubCMS: responsive Event Registration: style updates
- Mod: ClubCMS: responsive player list control: minor update - made a variable private
- Mod: ClubCMS: responsive login control: added CssClassName property; show log-out button for any user
- Mod: ClubCMS: responsive Event Registration: layout / style updates; added display of member details
- Fix: Can't just hide sales - to close a $0 sale it still needs to be sent to Vend.  This is the same for scorecards paid online.
- Mod: ClubCMS: responsive Event Registration Confirmation: updated title style
- Mod: ClubCMS: responsive Event Registration: add the cost of the registration add-ons (e.g. dinner) to the total amount to be paid; updated some text and styles
- Mod: ClubCMS: Contact Details control: use / display the generic club contact (if null, the manager's email)
- Add: Ability to import players into Org Tournaments from a CSV file.
- Add: Unit testing: Better way of constructing a competition, by passing a hierarchical class structure to a setup method.  This should make writing results unit tests a bit easier in the future.  The test I'm working on here is incomplete, but it is passing at the moment.
- Fix: #9705: Live: Invoice: Cambridge's "Split Payment" schedule was not appearing because it's for the next subperiod (SubPeriodId 186) and not the current subperiod's. Instead of using the specific current SubPeriodId in the conditions, we're now using the current date with 30 days grace period to get the applicable schedules for the club
- Mod: Throw a single Exception if there is only one error in the batch; throw an AggregateException if more than one.  This should make our error logging more detailed.
- Fix: Org: ImportAndLink: Competition query condition: added "and c.DeletedDate is null"
- Fix: Org: typo error: "DeletedDate" should be "DeleteDate"
- Mod/Fix: Org: added "DeleteDate is null" in the condition when displaying the registrations
- Mod/Fix: Org: Add the date in the Competition dropdown text; add "DeleteDate is null" in the condition when importing the registrations (NZG happened to have a need to re-import players because they chose the incorrect competition the first time around)
- Fix: #9664: Live: Bulk Email Invoices / Statements: make sure we assign a null value to UserSecurityId if there's no UserSecurityId / when there is no HttpContext.Current.
- Mod: Live: we forgot to add UserSecurityId back to the sql insert statement (with Revision 28420)
- Mod: Live: use the Due Date value that was passed along
- Add: sql: this script inserts records into CWControl and CWControlProperty tables
- Add: #9685: Love Golf: She Loves Golf: adding a variation of the rLoveGolfProgramSearchResult control. NZG requested the results to be sorted by date, instead of grouping them by club.
- Fix: #9679 Error uploading batches because of S3 delete response (NoContent rather than OK).
- #9673: Fix: ClubCMS: The double up in the results was caused by multiple joins of the same Member ID in the CWMemberPrivacy table (there was a condition commented out before: "-- and mp.computerno = cm.computerno". I used the Club ID to join with the CWMemberPrivacy record for the active club.
- Mod: Live: Allow updating of Invoice Document Date and Due Date (previously, clubs would need to void the Invoice and create a new invoice to use the correct dates). Or they could still go to Xero to update the Document Date there (because during the Xero sync, the updated invoice Document Date from Xero is synced to DotGolf).
- Add: Default for existing vend webservice call to avoid breaking existing browsers before they refresh.
- Mod: Put the UserSecurityId logging back for subs. Fix: WebUser.FromHttpContext threw an exception when there is no HttpContext.Current.
- Fix: App name change broke the useragent string check.
- Mod: #9305: SubsRenewalData table: added new columns: LastItemEndDate and IsCyclical
- Mod: #9305: Subs Renewal:
- Fix: #9664: Live: Invoice and statement logging: WebUser.FromHttpContext is null - Replace WebUser.FromHttpContext.ClubId with ClubId - Removed WebUser.FromHttpContext.UserSecurityId, and inserting of this in PassportClubLog in this area (temp fix; UserSecurityId is nullable in PassportClubLog)
- Mod: #9518 Made the POSFinaliseCheckout call idempotent by keeping a client-generated UUID.  This should prevent duplicated sales in Vend caused by the browser posting the POSFinaliseCheckout call more than once.
- Fix: #9635 Removed temp file usage completely for ActiveReports; implemented an IOutputHtml handler to grab the data instead of persisting to disk (which caused thread issues).  It's all done in memory now, so no permissions problems and nothing to clean up afterwards.
- Mod: #9651: Live: Score Entry: if the club has the CP or the COMP product, hide Tournament Score checkbox, else show it.
- Mod: Club: GetClubContact: trim the Email returned
- Fix: #9625: ClubCMS: GetEventsCalendar: get the marker from CompetitionRoundSegment (it used to be taken from the CompetitionRound table); also, concatenate all applicable markers (e.g. "Blue, Red")
- Mod: ClubCMS: Event Calendar: just removed the hardcoded title (unnecessary)
- Fix: ClubCMS: Event Calendar: corrected the start time of the event; formatted the time properly; minor style update
- Mod: #8733: Live: use the "Accounts" (or Manager - Secretary  - Generic - Handicapper) club contact as the "Email Address From" for subs emails (invoice, statement, credit note, receipt). This used to be club.Email, which is equivalent to the Manager's (a club contact) Email.
- Fix: Live: Reports: Fixed ticket #9627 - Unable to preview report (in HTML format). Add jpg, tif and bmp in the RegEx search pattern so we can also process these images.
- Mod: Live: Club Contacts: First Name and Last Name fields don't have to be mandatory. Clubs can enter certain email address to a "position" (e.g. Handicapper) without assigning a specific name to it.
- Fix: #9613: just forgot to add "top 1" to the select Contact query
- Fix: #9613: Job script: get the email addresses from the Contact table (previously we were just getting them from the Club table e.g. Club.HCEmail, Club.Email, Club.ProshopEmail)
- Cleanup: Removed a whole lot of old Micropower stuff.
- Cleanup: Removed a whole lot of old Micropower stuff.
- Cleanup: Removed a whole lot of old Micropower stuff.
- Refactor: Renamed the POS Viewmodel js file and removed view specific code; this is in preparation of changing this file to TypeScript. Refactor: moved objSort() to Standard.js.
- Fix: #9113 If a card is already paid (via the kiosk), don't allow the user to close the sale again, even if something goes wrong and the card stays visible. Fix: POS: Keep track of paid products and don't allow user to double pay.
- Fix: API: HandicapTxt - Changed request parameter names to extract the required info when Modica calls our HandicapTxt endpoint.
- Mod: MyGolf#17 sort the friends search so that members of the same club(s) as me are returned first in the list.
- Mod: Changed message.
- Mod: Do not allow casual golfers to authenticate against the MyGolf app.  Tee booking is still okay though.
- Fix: Updated Org to also use the new shared EmailPreload class.
- Refactor: Moved EmailPreload.cs into DotGolf.Shared so we can use the same thing from Org.
- Fix: More local file dependencies removed, this time around the EmailPreload mechanism for bulk emails. Instead of storing the data in Session, we put it in Redis with a 30 minute automatic expiration.
- Fix: Fix: Report asset hack removed in favour of a better solution that inlines the image data.
- Fix: Report asset hack removed in favour of a better solution that inlines the image data. Add: More local dependency #warnings
- Fix: Removed quotes around badge indicator number; it should be an int.
- Fix: Trigger incompatibility with Message DataObjectSimpleTable<T> implementation.
- Fix: JavaScriptErrorLogger filtering for "Script error" made a bit wider; sometimes we don't filter all of these out.
- Mod: Local file dependency cleanup: Legacy uploader will now store uploaded batch files in an S3 bucket, so we no longer have to have a writeable folder on the web tier for this.
- Cleanup: Removed old iSeekGolf code (part of load balancing cleanup)
- Fix: Crashbug: When viewing credit notes with >1 allocation or payment, I got a SQL error.
- Add [MAJOR]: #9504 Prepayments and overpayments are now fully integrated with Xero.  https://dotgolf.freshdesk.com/solution/articles/6000193185-handling-overpayments-and-prepayments-in-xero-and-dotgolf
- Fix: While doing something else I noticed that the unallocated balance on the TabCreditNote form is incorrect; it didn't take off cash refunds (per the new CreditNotePayment table).  Modified to improve performance and to take cash refunds into account.
- Fix: #9389: Public: Member Benefits: prevent the page from scrolling up when the MORE link is clicked
- Fix: #9389: Public: Member Benefits: updated "hover" event to "mouseenter" so that the fade in animation will only happen once / when the pointer enters the MORE area.
- Fix: Changed to TLS1.2 for Transaction Processor.
- Mod: Upgrade to TLS1.2 for DPS PXPay on golf.co.nz.
- Mod: Upgrade to TLS1.2 for DPS PXPay on golf.co.nz.
- Fix: DotGolf.Shared Unit Tests: Fixed alter script for Passport.CK_SpecifyAtLeastMemberNonAffiliateOrUserSecurityId.
- Add: LOAD_BALANCING compiler warnings for areas where we'll need to modify to make the system load-balancer compatible.
- Fix: #8801 PGA was affected by the change, so they were unable to add players without handicaps into the draw.
- Fix: Live: KountaBatchDataImport: Sync Functions customers to Kounta - insert statement failed with the CHECK constraint "CK_SpecifyAtLeastMemberNonAffiliateOrUserSecurity" on Passport table. Added ALTER script for "CK_SpecifyAtLeastMemberNonAffiliateOrUserSecurity" to include FNCustomerId.
- Mod: Push Notifications: If we encounter a token that we've already registered with SNS, they report an error.  Now we'll go and delete the token and recreate it; hopefully this will make the system more robust.
- Fix: Missing aps property.
- Fix: Transposed two parameters.
- Add: Hook for friends added via the API.
- Fix: Add Friend push notifications didn't have any alert text either.
- Fix: #9572 Missing filter caused all messages sent to members to appear under all member accounts.
- Mod: Tweaked the score comment push notifications.
- Mod: Put a message in the score comment push notification.
- Add: Message_InsertUpdate trigger to send out badge updates when message unread counts change.
- Fix: #8547 Bug introduced by rev 28200 - we didn't consider GROUPFEE or CARTFEE fee types when retrieving existing payment lines.
- #8547 Reinstated so I can do some testing.
- #8547 Reverted rev 28241, I think this is what is causing the new duplicates.
- Mod: App: Friend Added hook implemented.  You'll now get a push notification whenever someone adds you as a friend.
- Fix: Accidentally included app.config in DotGolf.Reports.
- Fix: Shuffled around the new packages I needed in DotGolf.Reports.
- Mod: Removed another obstacle to load balancing - using the app cache to store important temporary report data.  We now use redis for this data instead, so it is shared across multiple webservers.
- Add: #8485 Track when statements and invoices are sent out to club members and display this information in the Member History tab.  New table: PassportClubLog.
- Fix: ORNS error in ListEligibleAccounts()
- Fix: ClubCMS: PGA OOM Detail: pass along selected year to filter the OOM details data properly by year. Currently, if the user selects "2017" on the OOM page, the overall OOM standings are correct but once you click on the oom details link to see the events of a specific person, the 2018 events are displayed instead of the 2017 events.
- Fix: #9547 Countback underflow when doing countback for hole list competitions.
- Mod: Slicer mod to green fee takings report to include account codes.  Forgot to commit this one.
- Fix: Removed USE statement.
- Mod/Fix: ClubCMS: rEventCalendar: fix previous and next events; list month view
- Mod: Live: Teebooking: Move booking notes - Updated warning message.
- Fix: APNS message format was incorrect for score comment push notifications.
- Fix: Live: Functions: Build failure. New visualiser page (VenueVisualiser) was not included in the previous commit.
- Mod: Live: Teebooking: Sprint 32 - Move tee booking notes. Display a warning message that says "booking notes exists".
- Fix: Live: Functions: Sprint 32 - Fixes and mod for functions testing (from david). 1) [Bug Fix] Calendar day view which is still showing "Who can play: and Type:" which is applicable to competitions only. 2) [Mod] Make products quantity box under Equipment/Extras section editable by default. 3) [Bug Fix] Add try-catch in SearchXeroContacts(). When this fails, other search results are not returned. 4) [Mod] Changed the label "Show Deleted Functions" to "Include Deleted Functions". 5) [Mod] Product quick search. Start searching for products even on a single letter. 6) [Bug Fix] Encountered exception during save booking that has a custom extra item with a cost of $0. 7) [Bug Fix] Catering product quantity box is not updated when the number of attendees is updated. Only applies to product with a "Per person" unit. 8) [Mod] For deleted functions, show "Deleted" in the popup instead of "Confirmed/Tentative". 9) [Mod] RunSheet.aspx - typo. Text should be "Equipment/Extras". 10) [Added] new visualiser for functions venue rates. 11) [Bug Fix] Duplicate menu items were added. Hide the menu item from the combo box when once added. 12) [Mod] SQL ALTER scripts for live_SaveGreenFeeForClub and live_GetFreenFeeSummaryForClub stored procedures and Limit table.
- Fix: Live: Leaderboard: Freshdesk ticket #7902 - Leaderboard ads not working.
- Mod/Fix: ClubCMS: rEventLead: fixed the index used in string.Format; moved PopulateDropdown call to edit mode code
- Fix: #9498 The code that calculates non-zero balances for the Bulk Email Statements page was outdated and didn't care about such things as credit notes allocated to specific invoices.  I've updated this to the latest version of the code sourced from the Member Balances Report.  In the future we should rewrite this piece of code to use the Member Balances Report as its datasource so we can dedupe the code.
- Fix: #9522 Due to a rounding problem with decimal results (like in LGU Net) the ordering on the results report turned out incorrect.
- Mod: DotGolf.Shared: Unit Tests: Fixed null reference error in AXAccountTest.
- Mod: DotGolf.API: Kounta Loyalty Actions: Prevent Kounta from adding sales to a Functions AXAccount if (1) Function has been sent to Xero (invoice created), (2) There is no ongoing functions linked to that AXAccount.
- Mod: Replaced dynamically rendered images (RenderText.ashx) with static ones - these don't change and there is no point using up webserver CPU rendering them out 300k+ times a day.
- Add: Last Modified
- Mod: Removed MustRevalidate.
- Mod: RenderText.ashx is called an awful lot of times (300k+ in a day), so I've added cache headers to it so that clients don't redownload these images all the time.
- Mod: Public: Standard.master - Removed Facebook Pixel code.
- Fix: Auth problem for Kounta webhook installer because we run it in another thread now - there is no HttpContext.Current.
- Mod: Don't send Slack messages when the user is only testing an EDM (i.e. sending to a test email address)
- Fix: Potential connection leak in golf.co.nz
- Fix: Live: Fix for #9496 - encountered server error when viewing a member's details from the bulk e-mail statements page - it got redirected to an invalid path /Subs/BulkOperations/TabMember.aspx instead of /TabMembers.aspx.
- Mod: Live: Teebooking - Sprint 32 - Move tee booking notes.
- Mod: Levies: Don't send the levy notification email off to the club if NZGolf makes changes after the levy cutoff date.
- Fix: Levy date cutoff check was off by 1 day - levies are locked from Mar 1st, not Feb 28th.
- Fix: ClubCMS: Tee booking: Green fee combo box is not displaying the right green fee rates for players 2 to 4. Example: if player 2 is playing 9 holes, the green combo box is showing the 18-hole green fee instead of the 9-hole green fee.
- Fix: ClubCMS: Tee booking: Fix compilation error. Fix a potential bug - we should retrieve the amount the CostTableControl.GreenFeeOptions instead getting from PlayerRec.GreenFees.
- Mod: Live: Sprint 32 - Tee booking changes for Takapuna (allowing user to select green fee options). Set default display mode to "AUTOMATIC".
- Fix: Script names.
- Mod: Removed some of the local file dependencies (and added new temporary ones - d'oh!).  This fixes the Org build.
- Mod: Live: Sprint 32 - Tee booking changes for Takapuna (allowing user to select green fee options). Show "Display Mode" combo box only if DotGolf.Settings.TeeBooking.AllowSelectGreenFees is set to true (under Setting SQL table).
- Mod: Removed some of the local file dependencies (and added new temporary ones - d'oh!).  This commit is around reports, and will likely break the Org build.  Will fix that on Monday.
- Mod: ClubCMS: Sprint 32 - Tee booking changes for Takapuna (allowing user to select green fee options). CostTableControl.ascx - Call wa_TBCalculatePlayerGreenFee once every time we build the cost table. CalculateChargeStandard.cs - Remove lines of code where it does the selection of green fee for an unknown player (e.g. not a member, no DOB) which were added after SVN rev no. 25789. Mod: ClubCMS: Sprint 32 - Updated SQL script #2413. We have not merged this in prod so I thought of just updating the same file. Mod: ClubCMS: New indexes added to LimitDayTime, LimitCourse and LimitCategory tables.
- Fix: #9436 ORNS error when a member books online and their card is printed (with an auto entry green-fee-included competition) via the POG, for a club using course fees.
- Add: Connector: Webservice URL is now displayed on the diagnostics page.
- Mod: Connector: Only sign binaries in Release mode, otherwise we have to sit around for ages when we try to debug.
- Mod: Don't allow the user to change a Round No for any round that already has scores against it.  Allowing this causes a big results mess. Also tweaked a few styling things to make the form look a bit better.
- Fix: Slack notification: should have rowcount in there.
- Add: Slack notification for when the GOTG bulk email insert has completed.
- Mod: Stripped most of the code out of CardPrint.asmx, only leaving the pieces used for when: * The old Playtech installer is used to do a new install (won't be a problem once I give them a new installer) * Any old Connector instances call us.  If they do, they will immediately get a ClientXmlOutdatedRequest which will then update their XML to call connector-api instead.
- Mod: Refactored to move TBTransaction business logic (around EFTPOS transactions) into its own class, in preparation for getting rid of CardPrint.asmx.
- Mod: Public: Standard.Master - Was supposed to move the Facebook pixel code from the top to the bottom of the page. This should be the right one.
- Mod: Public: Standard.Master - added Facebook Pixel code for Drive For Good - NZ Golf Open. Moved at the bottom of the page so if there are issues with the script, it won't affect the page rendering.
- Mod: DotGolf.API: Sprint 32 - SMS Flow Update (Modica). Added new Modica SOAP web service reference. Added HandicaptTxtHandler (IHttpHandler) to process handicap enquiry requests sent thru SMS.
- Mod: Public: Standard.Master - added Facebook Pixel code for Drive For Good - NZ Golf Open.
- Fix: ClubCMS: TeeBooking: Sprint 31 Takapuna tee booking changes - we should only retrieve all applicable green fees when DotGolf.Settings.TeeBooking.AllowSelectGreenFees is set to "True". If this is not set or is set to "False", retrieve green fees that are set to system calculated or automatic.
- Fix: #9313 3 places discovered where privacy mode wasn't implemented.
- Fix: ClubCMS: TeeBooking: Sprint 31 Takapuna tee booking changes - check if objPlayerNonAffiliatedId is of type DBNull so we don't get an invalid cast exception.
- Fix: #9309 Oops, we should have had @ClubId in the CreditNotePayment join here.  The way it was, any cash refund for any member would show at all clubs (using SUBS) that member is a member of.
- Mod: ClubCMS: TeeBooking: Sprint 31 Takapuna tee booking changes - added new parameter @RetrieveAllApplicableGreenFees in wa_TBCalculatePlayerGreenFee. Retrieve all applicable green fees (where ClubFee.DisplayMode='ALWAYS_SHOW' or ClubFee.DisplayMode='AUTOMATIC' or ClubFee Limit.IsCalculated = 1) if @RetrieveAllApplicableGreenFees is set to 1. Otherwise, retrieve green fees that are ClubFee.Limit.IsCalculated = 1 or ClubFee.DisplayMode = 'AUTOMATIC'. The @RetrieveAllApplicableGreenFees also disables the filter on Age limit so we can get both Junior and Adult green fees.
- Mod: ClubCMS: TeeBooking: Sprint 31 Takapuna tee booking changes - allowing user to select from a list of green fees (combo box). Removed "xxxx Me" from the player type drop-down list for players 2, 3, and 4.
- Fix: #5960 Missing Course.TerminationDate check.
- Add: #5512 Hole List competition countback implemented.  This will work for any hole list type, for example Twos, Net Eagles and Hidden Holes.
- Mod: Live: Green Fee settings - New setting "DisplayMode" for Green Fees.
- Fix: Likely race condition that sometimes made scorecards appear in the POS as unpaid, when in fact they have been paid on house account on the kiosk.  When the operator subsequently closes the sale again, a duplicate transaction is posted to the player's house account.
- Fix: #8943 If you freeze competition handicaps to a date that is beyond the end of the latest rollover period, then add players into that competition and re-save the competition setup, all players are disqualified because they don't have handicaps yet.
- Fix: #8801 Do not allow clubs to enter Pending handicap players into competitions via the start sheet -> draw method.
- Fix: #8790 Avoid duplicate TXLines when a paid online card is refunded (by setting to complimentary in the POG), and then printed from the kiosk.
- Add: Logging for scorecard scan image retrieval.  This should give us some broad stats on how many images fail to be retrieved.
- Mod: Remove ConnectorAPIEndpoint setting records.
- Mod: Changed default connector service URL to ConnectorAPI rather than live.golf.co.nz.
- Mod: Set the default endpoint for Connectors to ConnectorAPI rather than live.golf.co.nz.
- Mod: Set the default endpoint for Connectors to ConnectorAPI rather than live.golf.co.nz.
- Mod: Changed VortexModule so that api performance data is also logged.
- Mod: Save ProcessingTime value while calculating results from the queue.
- Add: #9382 Callout with an explainer text for Subs Import / Start Date.
- Add: #9384 Code function account activity to proper account in Xero.
- Mod: In preparation for load-balancing DotGolf Live/Edge (and because we're getting the proxy IP logged instead of the user's IP in ClubCMS), I've updated code to start honouring the X-Real-IP header if set.
- Add: Note to search member screen in adweb to explain that social members are not part of the results (for now at least).
- Add: #9379 Social members may now view and top-up their account (subs and AX) on golf.co.nz.
- Fix: Also include overheads in the list of accounts we can post loyalty earned and dotgolf txn fees to.
- Fix: If we're not logged in as any club (eg. searching from org or adweb) we shouldn't do the 4-digit search thing; that breaks searching by membership numbers.
- Mod: Group slicer Xero invoice so that all topups for the week go through as a single invoice.
- Removed unused package files.
- Fix: .Net 4.6.1 upgrade undone.
- Mod: Dammit, web4 doesn't have framework 4.6.1.
- Add: Setting to control the DotGolf Transaction Fees account code for when we post Slicer invoices into Xero for clubs.  At the moment these invoices are only posted for AXAccount topups made online.
- Add: Slicer: Push Xero invoice data into a Redis list so that the XeroSync process may create club invoices for incoming AXAccount Topup slice payments.
- Add: Shared part of the new code for sending Xero invoices from Slicer.
- Mod: Renamed a couple of things in light of the fact that the Xero account code will be used for more than just direct credit topups now.  (We'll soon be posting golf.co.nz topups into Xero as well).
- Add: New AXAccount topups section into green fee takings report - for use by Slicer.
- Add: Implemented Member Account Topup emails as part of the Slicer transaction emails to clubs.
- Mod: Live: Feature request #7901. Revert changes from previous commit - rev no. 28174. Home club changes are retrieved and stored in Email table using an SQL job that executes the dga_SendClubHomeChangedEmail stored procedure.
- Mod: #9256 Changed the course fees checkbox into a combo so that the user is forced to make a selection.
- Add: #9322 Check added to Process Renewals to ensure that there is a manager's email set.  If this email address is blank, outgoing subscription invoices bounce without notification.
- Fix: Live: Functions: fix UI logic on displaying the "deleted" message.
- Mod: Enable NGEN assembly optimisation to see if we can improve the initial service start time.
- Fix: #8547 Plugged a hole that caused duplicate TXLine records.
- Fix: Live: Functions: The "Save Changes" button is disabled when editing a function booking series after deleting its parent booking record.
- Fix: The results tests were failing because of overzealous caching.  I've added the SQL transaction id to the cache key to stop this failure.  It's quite unlikely for this to be a problem in Prod due to the time between scores being entered.
- Mod: Upgraded to Dapper.1.50.4.
- Mod: Upgraded Adweb to .Net 4.6.1.
- Fix: Live: Functions: Moved ValidatorEndDateTime at the root view model level; Perform booking date/time validation only after the initial loading of the view model has completed. Set default values for RecurrenceSetting.Pattern.DayIndex (First) and RecurrenceSetting.Pattern.DayOfTheMonth (0). Fix: Live: Functions: Do not display "Read-only ..." message when viewing a calculated booking (not yet persisted). Fix: Live: Recurring Functions Booking generator - it was not picking up some of the recurring functions due to incorrect conditions in the SQL query. Fix: Live: Functions: Weekly recurrence calculation - Creating a weekly recurring function every Monday from 1 Feb to 15 Feb, we got an extra date (31 Dec 17) which falls on a Monday on the same week as the 1 Feb 18. This should not be included.
- Mod: Upgraded Adweb member search to ClubMember.FindMembers() so that we'll get the same results (including casual golfers) as in DotGolf Live. Mod: Cleaned up some compile warnings.
- Add: Scorecard returned date added to detail page.
- Mod: Upgraded to Freshdesk API v2 in preparation of them deprecating v1 in June 2018.
- Mod: Switch to SUBWCREV
- Add: Version.cs.
- Mod: Move to SUBWCREV for versioning.
- Mod: Removed old Version* files, we use SUBWCREV now.
- Mod: Changing to SUBWCREV for versioning the DotGolf.Live assembly.
- Mod: DotGolf.Support: Sprint 31 - Add Freshdesk solutions link in support.golf.co.nz site.
- Mod: Live: Functions: Sprint 31 - Monthly recurring bookings. Allow user to create a monthly recurring booking. Mod: DotGolf.Shared: BKRecurrence unit tests - Added unit test class BKRecurrence. We can add more test cases as we go along but right now we have test cases for getting the calculated booking dates based on a recurrence setting.
- Fix: #9295 Performance improvement for the ScoreHD report - it's not great yet, but it is an improvement on the original.
- Mod: live_GenerateOrUpdateCompetitionRoundSegments: WITH RECOMPILE because parameter sniffing was killing us.  A plan that was good for a single marker, single round comp didn't work for a twilight comp which has a lot of rounds.
- Mod: Live: Feature request #7901. Home club change request flow notifications - Send an e-mail to the club regarding on the outcome of the home club change request if it's accepted or rejected.
- Fix: #9298 Performance issue sorted in Unbilled Members report - this report was still using the ClubMember/InvoiceClubMemberItem views and was performing poorly because of that.
- Fix: Live: Competition Setup - labels for Sat and Sun were not bound to the correct control ids. When you click on the text label, it does not tick the check box.
- Fix: Live: Functions: Booking - start/end dates fields are hidden when editing the parent booking record of a recurring function booking. Fix: Live: Functions: Booking - read-only message does not appear after clicking on "send invoice to xero" (i.e. On the same booking page, perform: create new booking, save, then click "send invoice to Xero".)
- Mod: #9256 Checkbox added to both preprint areas so allow CF-enabled clubs to assign course fees (unpaid) to pre-printed cards, so that the shop may mark those as paid as the players come in.
- Mod: Adweb: Edit club products: Sprint 31 - Add constraint on adweb when activating products. (1) COMP and CP cannot be = 1 at the same time (2) TBN and TBP cannot be = 1 at the same time
- Mod: Public and ClubCMS: Member Account Statement (vend+kounta order details): Refactored so that we get the sale data in one call instead of iterating through each statement line doing expensive database lookups.
- Mod: Member Account Statement (vend+kounta order details): Refactored so that we get the sale data in one call instead of iterating through each statement line doing expensive database lookups.
- Add: Takapuna: Capture DOB value on the guest registration form - we need this to allow proper green fee rates to be shown.
- Mod: Takapuna clubcms: Put the guest login on the left; make this more obvious that it is a choice.
- Fix: Live: Competition Setup - Commit back previous mod from rev 28123. We are getting timeouts when saving competitions that are setup to recur. Took out the for-loop iteration in the knockout competition viewmodel->saveCompetition() as this triggers multiple calls to Competition_NG.SaveChanges(). Instead, we send the whole payload (ModelCompetitionDto, SaveOptions and RepeatDates) in one call to Competition_NG.SaveChanges(), performing the for-loop (supposed to be at the cliend side) in the backend. Helps to avoid the issues #9219 and #9156. Mod: Live: Competition Setup - Only load the first instance after creating a recurring competition. Previously, we are loading the viewmodels for every competition in a recurring competition.
- Mod: Commit so that we can test connector updates in prod.
- Fix: Another one.
- Fix: More problems with quotes.
- Fix: More missing quotes.
- Fix: If there is a space in the build path (like on the prod build server, C:\Jenkins Prod\), the build errors out.
- Mod: Live: Competition Setup - reverted comp setup mod (rev no. 28213)
- Connector: Bump build version.
- Connector: Updated wyBuild wyp projects to pick smartpay and verifone dlls from the correct folder (service bin).
- Fix: Connector: Sign the eftpos DLLs in the bin directory, not the source.
- Mod: Connector build: Removed timestamping server ping delays - let's see if Comodo lets us get away with this.
- Mod: Connector: Sign Smartpay and Verifone DLLs for distribution.
- Mod: Connector: Improved build speed by only doing signing of all DLLs/EXEs when we know those binaries will be included in the installer or updates.
- Fix: Connector: Missing icons on our main EXEs.
- Fix: Connector: Use signed ActiveReports binaries from Reports project rather than the unsigned ones in the Program Files folder. Fix: Added Smartpay and Verifone DLLs as they are part of the core build.
- Add: Signing of Connector bootstrap installer as well as bundled engine and setup msi.
- Mod: Updated signtool location for central build server.
- Testing
- Fix: Use the clickonce signtool instead; Jenkins seems to have that one installed.
- Add: Certificate and scripting to sign all the Connector binaries (except the installer; that's coming soon)
- Fix: Live: Competition Setup - We are getting timeouts when saving competitions that are setup to recur. Took out the for-loop iteration in the knockout competition viewmodel->saveCompetition() as this triggers multiple calls to Competition_NG.SaveChanges(). Instead, we send the whole payload (ModelCompetitionDto, SaveOptions and RepeatDates) in one call to Competition_NG.SaveChanges(), performing the for-loop (supposed to be at the cliend side) in the backend. Helps to avoid the issues #9219 and #9156. Mod: Live: Competition Setup - Only load the first instance after creating a recurring competition. Previously, we are loading the viewmodels for every competition in a recurring competition but our UI is designed to handle one competition at a time so we don't need to load every single competition.
- Fix: live_FindMembers_SearchText would not return casual golfers if @CasualGolfers=null or @CasualGolfers=1.  This caused problems for me while trying to search those guys in Adweb.
- Fix: #9249 If you have multiple scorecards in the POS list and you deselect the active card, the POS goes into a weird state where clicking on products will cause an error. Fix: Also, if you deselect the only active scorecard, you end up with the product list still visible and causing errors when you subsequently tap a product.
- Fix: #9220 Reprinted non-affiliated green fee scorecards were counting towards the green fee total on the Green Fee Summary (and drill-through) reports.
- Fix: Live: Notification Settings - fix for #9236 - User is unable to create a new contact notification and gets an error saying "Nullable object must have a value."
- Fix: #9223 Check user security expiration on every page load, in case the user is using Remember Me and their user account is set for expiry.
- Fix: SQL error.
- Fix: #9240 Put correct payment particulars onto Chamberlain Park's bank statement
- Fix: Emails from the legacy uploader were still being sent to Club.HCEmail, not the new Handicapper contact.
- Performance: IX_ClubFeeGroup_FeeType
- Performance: The group booking count part of this query was slow because of the TBGroupTimeSlot-TBGroupBooking high cardinality joins (the ClubId filter only happens on the TBGroupBooking level).  Changed to use TBTimeSlot-TBBlockTimeSlot for ClubId filtering, and an IF EXISTS(...) to determine whether each slot is a group booking or not.
- Fix: Live: TabMember - fix for #9149 - Allow non-affiliates to be reinstated as we don't need to check if they are in an unfinancial category.
- Mod: Removed NOCOUNT - didn't work.
- Add: RSResultQueue.ProcessingTime column.
- Fix: Live: Functions: Booking.ts  - fix for the previous commit. Not sure why ">" went missing and didn't get the build error while debugging.
- Mod: Live: Functions: Booking - qtipValMessage for Customer field wasn't displaying right next to the text box - i will remove the qtip message for now. The form will still indicate that the field is required because it gets highlighted in red. Mod: Live: Functions: Booking - Added more validation in the form for start/end date and time. Somewhat related to #9191.
- Performance: Cache GetCourseHandicapAdjustmentForMultipleMarkersBasedScoresEntered results based on the RSResultIDs, so the data shouldn't get stale.
- Add: TimeoutSeconds parameter to ProcessResults.ashx so we can manually override the timeout.
- Mod: Put News/Media article titles in an og:title tag so that Facebook will put a nice looking title on any of our shared links.
- Mod: Send more detailed timing stats to Vortex.
- Performance: Skip calling into the competition partners code if not necessary.  We will now only do this if we can see a competition with NoOfPlayers>1 on the day.
- Fix: Cache the pageid for the tee booking template control for 5 minutes; don't need to query this on every page load.
- Performance: Created a new column, TXLine.ClubFeeGroup_FeeType which is populated when a ClubFeeDetailId is added/updated to the TXLine.  This is then used instead of the ClubFeeDetail-ClubFee-ClubFeeGroupClub-ClubFeeGroup join when retrieving a list of scorecards, cutting the processing time approx. in half. Mod: Don't do the VendProducts part of this query when the club doesn't have the VEND product.
- Mod: Removed GolfLinkStatus update - we don't use this anymore.
- Add: Index for performance.
- Mod: Also added the ScoreCardId check into the second part of this proc.
- Fix: Added a ScoreCardId check to ensure we don't count tee bookings + scorecards and double up the rounds count for a player (for MaxNoOfRounds). Performance: Removed extra unused joins to ClubFeeDetail and Limit. Performance: Removed duplicated MaxNoOfRounds check (which was buggy and caused big performance issues anyway).
- Fix: Live: Functions: Recurring bookings - Incorrect RecurrenceKey value when saving a calculated booking (from a function booking series). Mod: Live: Functions: Typo - changed class name "FunctionBookingRecurrenceStrategy" to "FunctionBookingRecurrenceKeyStrategy".
- Fix: Removed WITH RECOMPILE; added back clobbered line.
- Fix: Live: Functions: Freshdesk ticket #9191 - Recurring function bookings - Not all bookings are deleted after clicking "Delete"
- Mod: Added warning when you give the CP product to a club who is not in the ClubProvince table.
- Add: New fast version of the TabTournaments query.  This one runs in a second or so, versus the old one that was 10+.  However, it needs to be proven in the field before I make it the default.  So right now it's hidden behind a newquery=1 query string parameter, so I can invoke it when I want to test it against the old one.
- Add: Index for performance.
- Add: NonAffiliate.RegistrationSource Add: WITH RECOMPILE to live_GetAvailableGreenFeesForMemberAndDate due to parameter sniffing issues.
- Fix: Live: TabMember: Freshdesk ticket #9149 - Prevent exception from happening when instantiating a Member object by checking the MemberId is less than 1000000000.
- Fix: New parameters on CasualGolfer.InsertNewCasualGolfer added.
- Fix: New parameters on CasualGolfer.InsertNewCasualGolfer added.
- Add: Ability to guest-checkout on ClubCMS tee booking when the AllowTeeBookingGuestRegistration setting is turned ON.  Default is OFF.
- Fix: Missing alias on this column caused problems when I added NonAffiliate.RegistrationSource.
- Mod: GOTG back to the default banner.
- Fix: Well, that didn't work.  Trying this another way.
- Mod: Pass a transaction into conn.Execute() since we're in the middle of a transaction in this flow.
- Fix: Live: Competition Setup: Fix for ticket #9156 - Competition Setup page keeps creating new competition (Recurring competition) after subsequent clicks on Save Changes.
- Fix: Public: Tournament Registration: Ticket #4955 - Apply Handicap.Parse method on the handicap text input to get the appropriate value before storing in DB (e.g. +3.5 should be stored as -3.5). Fix: Public: Tournament Registration Summary: Ticket #4955 - Use Handicap class to get the right handicap index value to display on screen.
- Mod: #9135 Xero Batch Data Import improved to do a minimum number of calls to the Payments endpoint in order to get the payments for all the closure invoices.  We do this by passing in a WHERE condition, listing as many invoice numbers as we can (up to the URL length limit which appears to be approx 2048 characters).  This means that we can get hundreds of payment records out with less than 10 calls to the endpoint.
- Add: RedisRateLimiter for Xero rate limiting, so that rate limits are imposed in a shared way across different systems (edge/live). Add: Redis to DotGolf.Shared (finally!) - access this through Redis.Connection.  Note you have to call GetDatabase(0) since the new default database ID is -1, annoyingly.
- Fix: Don't throw exception in XeroSync.ashx if the client disconnects before the end of the process.
- Add: A warning that $0.20 will be charged per SMS message sent. Mod: Don't allow SMS messaging for associations where tournament money is sliced before the tournament is finished (because 5CC sent a whole heap of these and we have no way to slice them).
- Mod: #5577 (sort of).  Added code to use RSScore instead of ScoreLive for submitting scores for handicapping, starting with CompetitionRoundId 923325.  Once this code has been in place for a year or so we can cull out the old ScoreLive code and turn off submitting scores older than a certain date for handicapping, that way this is a seamless transition.
- Mod: Bump connector version.
- Mod: Bump connector version to latest.
- Fix: USE
- Fix: REGISTER NOW link was visible in the full list before a tournament is open for registrations.
- Mod: Live: Functions: Typo change - Rename ValidatorDateEndTime() to ValidatorEndDateTime(). Mod: Live: Functions: Added new property DeletedDate in BookingData POCO class. Return an updated ViewModel (BookingData) after Delete/Restore. Added wrapper function "displayMessage()" in Booking.ts to invoke speechBubble() since we are using this in many areas. Mod: Live: Functions: Sales Quote - apply css class 'field_header' on club name.
- Add: #6213 You can now filter by All/Amateurs/Professionals in the Member Search area of DotGolf Live.
- Fix: #8446 If there is a matching B9 marker for the other gender, use that for the opposite gender stroke when printing blank cards.  Marker defaults don't work well for this because they only specify one of the nines, usually the F9.
- Mod: Live: Function: Minor UI changes in the Functions Calendar page.
- Fix: #8445 Async deadlock fixed that was preventing SPF checks from completing.
- Mod: #8264 POG no longer allows updating the non-affiliate firstname/surname fields for non-affiliated bookings made online (those with a NonAffiliateId).
- Fix: Live: Functions: Recurrence - booking instances (i.e. persisted and non-persisted) were not displayed when one of the booking in the recurrence is deleted. Mod: Live: Functions: Moved Functions nav-bar (i.e. Copy Booking, Send Invoice to Xero, etc) to the top-right. Allow user to delete a booking and restore it back. Improve the handling of error messages (i.e. client side validation and server-side validation). Mod: Live: Functions: Calendar - removed "EditMode=new" param from the NewEventURL property. Added link to show/hide deleted function bookings. Mod: Live: Functions: Recurring Bookings - added RecurrenceKey column in BKBooking table. RecurrenceKey used to identify that a booking is part of a recurring booking and it has already been persisted in DB.
- Fix: #8171 When calculating segments, in the case of 9 hole markers, we should prefer the F9, not the segment that was created first.  If the B9 is to be selected we should use the @ForceBackNine parameter.
- Mod: #7833 Allow members of the club to make visitor bookings without paying (even with the RequireOnlyOnePaymentPerBooking setting ON like for Takapuna).
- Mod: #7833 Allow members of the club to make visitor bookings without paying (even with the RequireOnlyOnePaymentPerBooking setting ON like for Takapuna).
- Mod: #9106 Made TLS1.2 the default in ClubCMS to ensure DPS keeps working after April 2018.
- Fix: Connector: Funnel all event log activity through EventLogWriter so that it ends up in the memory log too.
- Mod: Connector: Always write log entries in MemoryLog even if not in debug mode.
- Add: Connector: Web interface to allow support access to logs (without using event log, which can be unreliable).
- Mod: Reverted background threading - suspect this is causing service shutdown failures.
- Fix: DotGolf.Shared: AXAccount Unit Tests: Intermittent failures are happening due to duplicate "ExternalSystemId" test data. Added random generated number to make it unique.
- Mod: Connector tray app: Add menu item to copy service exe.config path to clipboard to make things easier for Support.
- Mod: Connector: Better UX for Tray app exit.
- Mod: Kill the tray app when the service is stopped; cleans up UX.
- Mod: Connector: Background threaded a couple of things to see if this will help our OnStart() problems where the Connector doesn't fire up on system boot.
- Fix: 5CC: Small edge case where if a player has both a nonaffiliate and member record linked to their passport AND the member.gender and nonaffiliate.gender fields don't match, we use the gender from the nonaffiliate even if there is a live member record.  Now we'll use the member record (if it is not resigned) and failing that, the non-affiliate one.
- Mod: Connector installer: restart service only after 60 seconds on failure, to give wyUpdate a chance to do its thing.
- Add: Connector: Re-try updates in 10 minutes if checking for updates fails. Add: More logging around Connector updates.
- Mod: Added a new GreenFeePaid bit column to the scorecard stage and fact tables.  This allows us to tell whether a greenfee has been marked as paid or not.  Originally we were including any green fee, but some reports (such as the Rounds Played by Date report) only report on green fees that have been marked as Paid.  In order to implement that report properly I needed the new flag.
- Fix: Warehouse: Don't use the old TBTimeSlotEntry.HasPaid flag, we have TXLine now and should be using TXLine.PaidDate.  This mod won't affect pre-nextgen cards as they are retrieved using a separate query that joins off to GreenfeeClub etc.
- Fix: #6403 Cash refunds on credit notes were not being taken into account in the Member Balances Report.  This meant that some member balances were understated if they have had cash refunds.
- Mod: Removed the ability to edit a CMember Category from Adweb.  I didn't know but Support was using this to remove UNF (which the normal Live area should be used for), and also change categories to/from NONP (which stuffs with affiliated/nonaffiliated records).  Explained to Sylinia that they should not be doing this, and if they come across another UNF issue to please let me know.
- Add: #7499 When a group booking is created, we now automatically send out a confirmation email to the contact email address in the group booking.  Note that we only send these out for NEW group bookings, not updates yet (this would be complex to do).
- Fix: #7489 Prevent user from restoring a lapsed unfinancial member at their own club.  Both TabMember and Legacy upload (golf manager) areas have been fixed.
- Fix: DotGolf.Shared: AXAccount Unit Tests: The AXAccount test cases were failing due to missing AXAccountType and AXCurrency details - added lines of code to setup test data for AXAccountType and AXCurrency (i.e. HOUSE, FUNC) before executing the test cases.
- Add: #9039 Logging added to detect a specific situation with incorrect RSResultEntryScore records being inserted.
- Mod: DotGolf.Shared: Subs Process Renewals Unit Tests: Modified unit test cases to test for periodic and cyclical subscriptions.
- Add: DotGolf.Shared: AXAccounts Unit Tests: Initial commit for AXAccount-related unit tests - Created one unit test case for AXAccountTransaction.Put() method.
- Fix: #6809 Eclectic results now list people who have not returned at least 1 score per hole (eg. picked up) at the end of the report.
- Mod: Public: MyGolf Registration: Freshdesk #9085. Change the registration complete message for affiliated members to "An email with further instructions has been sent to <Registered Email Address>. Important:  If the email address is incorrect, please contact <Member's Home Club> to update your membership information." The e-mail address is masked showing only the first letter before the "@".
- Fix: #6690 For team competitions (like foursomes, ambrose etc) where there is a team course handicap, this handicap was not displayed in score entry properly, and because of this, I suspect the score was entered with the wrong handicap too.  This was a problem in scanning and self score entry, both areas are fixed with this commit.
- Mod: #6336 Renamed "Country" to "Secondary".
- Add: Metrics to monitor card printing processing time (after the polling loop has completed).
- Add: Adweb: Include A2A subs (CW and Org) payments in reconciliation report.
- Mod: ClubCMS: responsive event calendar: style updates (just missed in the previous commit/s)
- Mod: ClubCMS: responsive calendar: fixed "Reigster" styles / markup
- Fix: #9054 DotGolf checkout: If a checkout total matches the maximum charge on a payment type exactly, the payment type button is not visible.  Eg. if you have $3.00 on your house account and you attempt to buy a $3 coffee, you can't pay by house account - but you can pay $2.99 no problem.  This was a < vs <= bug.
- Fix: Live: TeeBooking: Freshdesk ticket #6189: Printing Tee Sheet - Group Bookings. Use LEFT JOIN on Course.
- Fix: Live: Functions: Fix an issue where booking an Event in advance (i.e. selecting a future date from the calendar), the *Create a new Event* takes you into the booking set up but the Start and End date fields are always set to the current date.
- Fix: #8598 Same problem as the one fixed in rev. 26288 (we were counting the last 4 holes, not the last 6 holes) for countback - this time in multiplayer competitions.
- Reverted last 2 experimental changes - they didn't help much for my dev PC, so doubt they would make a difference in the field.
- Add: Handling for TwainLoop unhandled exceptions, in case this is causing the service to crash.
- Mod: Experimental code to make Connector re-try startup if it fails.  I suspect network/internet connectivity might be causing us some problems when machines are rebooted.
- Mod: Live: Functions: Should only allow users with "CanAdministerClubUsers" role access to functions maintenance pages.
- Mod: Live: Functions: Script to add new role "Functions" in dbo.Role table.
- Mod: Live: Functions: Implemented permission to control which users can get into Functions area. Only users with "CanAdministerClubUsers" or "Functions" role are allowed. Mod: Live: Functions: Ensure that navigation tabs are highlighted appropriately for Functions-related pages. Currently, the "Settings" tab is not highlighted when accessing the Functions maintenance pages (i.e. venues, products, menus, custom fields)
- Fix: #9046: ClubCMS: corrected the club inbox message (DotGolf Live) url which is used in the email notification
- Mod: ClubCMS: qtip generated css - added styles
- Fix: #6146 #8904 Member Score History in DotGolf Live wasn't always joining via Passport, so any scores for casual golfers who have become affiliates were not showing up under their affiliated scoring history.
- Fix: If there is a CourseId set on the competition round, restrict the segments generated for that round to be only for that course.  This is for multi-club competitions only.
- Mod: Live: Functions: Product management -  We should call FNProduct.NameExists() once during SaveChanges. Fix: Live: Functions: Product management - ViewModel.ProductId was not set after successfully creating a new FNProduct. Fix: Live: Functions: Product management - response message not handled properly
- Fix: Live: Functions: Typescript compilation error. There was no compilation error when in Debug mode but only after Stop Debug then Build. Mod: Live: Functions: Apply filterDecimal() on SurchargePerPerson text input.
- Fix: Live: Functions: Incorrect unit title displayed after adding a catering product (via Product quick search). Example: An order of Buffet A is set "Per Person" but it shows "Each" instead. Mod: Live: Functions: Booking.ts - name change only. Change function name "addCatering()" to "addCateringProduct()". Mod: Live: Functions: Added new knockout custom binding filterDecimal() (Standard.js) - keeps two decimal points only. Mod: Live: Functions: Allow user to change the price on a selected product.
- Mod: Adweb: ClubProduct - Added "No Charge" venue rate when a FUN product is turned on for a club.
- Mod: Allow push notifications for both MyGolf and Teebooking apps.  They have different APNS endpoints.
- Mod: Live: Functions: Booking.aspx - Wrap checkboxes in a <label> tag to allow users to click on the text. Added missing section to display custom fields in the Extra/Equipments area. Some UI/Styling changes. Mod: Live: Functions: CateringMenu.aspx - added spacing between Add menu option button and the menu options table. Mod: Live: Functions: Product management - allow user to delete a product. Mod: Live: Functions: Venue management - we should not allow to set a venue as its own parent venue. Mod: Live: Functions: Sales Quotation - display appropriate product unit text instead of displaying the internal values (PER_PERSON, PER_SERVING, EACH)
- Mod: Live: Functions: Set default values for recurrence start and end time. Fix: Live: Functions: Missing parent booking id when loading up a functions booking.
- Mod: Live: TeeBooking: Freshdesk ticket #6189: Printing Tee Sheet - Group Bookings. The clubs have asked to display the group booking name in the Player 1 to 4 columns.
- Add: Best 5 of 6 Net competition type.
- Fix: Performance issue in DebugLog.WriteLine - called Write(char) behind the scenes resulting in thousands of DB calls.
- Fix: Functions Xero import code caused an ORNS error.
- Fix: #6083 Scorecard Admin was always using today's date to calculate member handicaps.  If you pre-print cards via SCA you may get incorrect handicaps if today is the handicap grey day (Wednesday) and the competition is for the next day onwards.
- Mod: #5577 Removed old competition results code.  It looks like the ability to calculate the number of players from the results hasn't been working since at least 2013, so I have removed this functionality from the Draw Timesheet editor.  It's very broken and would take time to fix.  This form can really benefit from a rebuild in Knockout so that it's more responsive.
- Fix: #9012: sql: Add TotalAmount column to Registration table (but this will have to be reviewed, I may have to drop this column next time. After doing this schema script update for the club competition registration control, I found out later on that there is a table called RegistrationBatch and I could use this for the same purpose.)
- Fix: Corrected inverted documentation on setting.
- Fix: #8304 If the best score for a member contains a pickup, the member is not included in the best score report at all, even if their second best score does not contain any pickups.
- Test
- Mod: Live: Functions: Kounta Integration (KountaBatchDataImport) - only push Functions customers to Kounta if Kounta integration is enabled (DotGolf.Settings.Functions.DisableKountaAndXeroIntegration is false). Mod: Live: Functions: Xero Integration (Booking.aspx) - enable "Send invoice to Xero" if Xero integration is enabled (DotGolf.Settings.Functions.DisableKountaAndXeroIntegration is false). Set the default Recurrence range start and end dates to current date.
- Mod: Live: Functions: Kounta and Xero Integration: added DisableKountaAndXeroIntegration flag - indicating whether Functions integration with Kounta and Xero is enabled for this club.
- Fix: #8986 For hole list competitions the prizes were not filtered properly if a player won more than a single hole prize (common with Twos).  This resulted in duplicate key values posted to AXAccounts, which caused exceptions posting subsequent transactions. Mod: Improved AXAccount transaction lines for prizes; they actually contain useful info now, like the prize type, hole name and competition name/date.
- Fix: We missed scripting this new column from Dev.
- Mod: Changed ?? expression with throw to be compatible with our older build server.
- Mod: Live: Functions: Allow user to remove a catering service - previously, there was no way a user can remove a catering service from the booking. Some styling/UI changes. Mod: Live: Functions: Lock booking from changes if an invoice has been created for a given function booking.
- --DFH REVIEWED TO HERE -- Mod: ClubCMS: responsive event calendar control: displayed the BOOK button beside the calendar date number; removed unused code
- Mod: ClubCMS: event calendar controls: differentiated the style of the event details pop-up (qtip) in the old and the new calendar controls; fixed qtip display in the new rEventCalendar control
- Add: sql: ClubCMS: insert new control: rEvent Calendar
- Mod: #8794: ClubCMS: Responsive Member Directory: now displaying the other contact numbers and email address, taking into consideration the member's privacy settings
- Mod: ClubCMS: UserUtilities: GetMembersByFirstLetter: return phone_work as well
- Mod: ClubCMS: responsive event calendar: applied bootstrap styles to the search filters; made the search filter work; work in progress
- Add: ClubCMS: added latest moment js library; added event calendar css
- Fix: #8874 Handle paid competition and course fees properly and avoid double charging golfers when the sale is reloaded in our POS.
- Fix: Improved error messages if there is a Vend configuration problem; rather than failing silently or with ORNS errors.
- Mod: ClubCMS: responsive event calendar: qtip now displaying, apply qtip css; work in progress
- Add: ClubCMS: fullcalendar and qtip css
- Mod: Live: FreshDesk ticket #6215 - Competitions Calendar: Display the competitions startTime and endTime.
- Mod: ClubCMS: FreshDesk ticket #6215 - Calendar: Modified Calendar.asmx, UCompetitionsCalendar control in _shared and terraces2 to display start/end time on the preview panel. Added startTime and endTime fields in ClubEvent (DotGolf.Shared.Data.Calendar) POCO class.
- Fix: #8950 Prevent knockout binding crash if printData has an undefined value.  This sometimes happens when a payment is declined, and causes the kiosk to crash, forcing the staff to reboot the machine.
- Fix: #8625 When printing cards for tee bookings, no start tee showed up on the card for golfers off tee 19-27 if there is a shotgun start tee allocation in force.  Only tees 1, 10 and 19 were working before, now all tees 1-27 will work.
- Fix: #8959 Adweb didn't show scores that are linked via only a PassportId (such as those merged from a previous NonAffiliate record to a now affiliated member).
- Fix: #8964 Slope handicap update emails were still sent to the old Club.Email/Club.HCEmail column values.  We now look up the Handicapper email from the contact table instead. Mod: Email format updated to use our new newsletter header/footer.  Looks much better!
- Mod: ClubCMS: calendar: removed div inside span class="fc-event-title" to fix the display of events in the new control; added styles to fix affected styles in the old control
- Mod: ClubCMS: responsive calendar: simplified display of dates on the list (new version of fullcalendar uses moment js)
- Mod: ClubCMS: responsive calendar: initial commit of changes
- Add: ClubCMS: responsive calendar control: initial commit (basically a copy of the UCompetitionsCalendarV2 control); adding also the latest versions of fullcalendar and qtip libraries
- Fix: #7667: Org: pdf uploader: issue with Cute Editor ("flash plugin" blocked) is fixed by updating the Cute Editor from 6.6 to 6.7 (6.7 is already used in Live and ClubCMS)
- Mod: Org: Registration Options: T&C pdf uploader: added OnUploadCompleted event (shows a message on top of the page); also defined the acceptable format through the control's property
- Fix: #7667: Org: pdf uploader: issue with Cute Editor ("flash plugin" blocked) is fixed by updating the Cute Editor from 6.6 to 6.7 (6.7 is already used in Live and ClubCMS)
- Fix: Public: My Account: Other Subscriptions: GEAP: Show the Auto Renewal Date and the link button (Activate / Cancel Auto Renewal) only to the latest subscription record (old records don't need that info and action)
- Mod: Transaction Processor: GEAP: enable auto-renewal of annual GEAP subscription
- Mod: #8810: ClubCMS: Personalised the inter club message subject and the email subject by adding the applicant's name to be make it more meaningful
- Mod: #6232: Live: Added a Membership Number column to the DD Preview table
- Mod: ClubCMS: insert new controls and control properties
- Fix: Functions: Booking - Club fee details are not loaded. Supposed to reference vm.venueClubFees instead of vm.clubFees. vm.ClubFees no longer since it was removed (from previous commit). Typescript did not complain during compilation because "vm" is of type "any". Mod: Functions: Booking.aspx - UI changes on how we display the custom fields in the Venue section. Fix: Functions: Functions Calendar (/Functions/Default.aspx) - Make the URL parameters consistent. Include "EditMode" URL parameter after clicking on a standalone functions booking (not part of any recurrence). Mod: Functions: Catering Menu - Replaced font-awesome icon "x" to "Delete" instead. Hide speech bubble after save. Mod: Functions: Product - Hide speech bubble after save.
- Mod: Functions: Booking - load ClubFees for venue rates instead of using hard-coded rates. Mod: Functions: Product and Catering menu pages - UI changes only. Display spinner to indicate that data is being retrieved from server (Ajax call).
- Fix: Functions: Settings - Typo. Change "Menu" to "Menus" to be consistent with the rest (e.g. Venues, Products, Custom Fields)
- Fix: AdWeb: Functions - Standard (Functions) club fees are not created properly after activation - ClubFeeGroupClubId value is NULL.
- Mod: Functions: Venue Inventory settings page: disable "Delete" when a venue is currently booked or is booked for upcoming functions. Added new bool property "InUse" in VenueRec POCO and FNVenueRec TS classes.
- Add: Live: Member Account Statement Report: Added new field "IsHeaderHidden" to have an option to hide/show table headers in a Report. Modified HTMLRenderer.cs to handle "IsHeaderHidden" option (thanks David!). Mod: DotGolf.Shared: Process Renewals Unit Test: Added basic test cases for Subs process renewals logic (e.g. KeepCurrentCategory, ChangeCategory, ChangeCategoryWithOverrideItems). Added ConsoleTable class from https://github.com/khalidabuhakmeh/ConsoleTables - to nicely print list items in table format. Add: DotGolf.Shared: TestObjectTracking.cs: Added UpdateRenewalCategory() to set member's renewal Category.
- Fix: #8787: Org / Live: revert revision 27160 (my bad--I didn't realise this was a shared code so I wasn't able to test in Org)
- Fix: Live: Invoice Due Date: The Invoice Document Date is always the Invoice Date the user enters. The Invoice Due Date however varies: a) Single Payment: the Invoice Due Date is whatever is entered through the form b) Instalments without Upfront Payment: the Invoice Due Date is the First Instalment Date c) Instalments with Upfront Payment: the Invoice Due Date is the Invoice Document Date. The Invoice Document Date is also used as the Upfront / Initial Payment Due Date. See GenerateInstalments_Internal method.
- Add: Adweb: ClubProduct - FUN: Added process activation logic for FUN product - creates the following template data (if it does not exists yet): Club fees, venue, catering menu and products (e.g. lunch buffet, lunch buffet menu options), and extra/equipment products (e.g. projector, tv) Add: AdWeb: ClubProductManager class: used as base class for club product activation/deactivation. The FunctionsClubProductManager inherits from the ClubProductManager class and overrides the ProcessActivation method to perform activation logic for FUN product. As of the moment, deactivation of a FUN club product does not remove/disable any data created during setup (activation).
- Fix: DROP EXISTING removed for this index.
- Add: URLs to all ads so that we can test that they work in the app.
- Mod: Store UserAgent for mobile device registrations so that we can target specific apps for push notifications.
- Fix: oops, accidentally committed extra text in this schema script.
- Add: Sample "dry run" unit test for Subscriptions (renewing a cyclical FPM member).
- Mod: KountaOrderPayment ref column wasn't wide enough to accommodate Smartpay receipt data.  Already applied to prod.
- Refactor: Moved BuildSubsRenewalData() into a class of its own in DotGolf.Shared/BusinessLogic/Subscriptions/ProcessRenewals.cs to prepare for unit testing.
- Refactor: I've separated some of the Subs classes into their own cs files to make Shared.Subscriptions.cs easier to deal with.
- Mod: KountaOrderPayment ref column width increased to accommodate Smartpay data.
- Fix: Missed a file.
- Add: Kounta sync: Ability to manually sync for any number of days in the past.  Useful for when a bug in the API code is discovered and data needs to be imported in retrospect.
- Add: Functions: Recurring Bookings: Added info box message in Booking.aspx form to inform user that they are working on a recurring function booking series.
- Add: Index for performance.
- Fix: #8732 Invoice report: Top address is also proper case now, like the footer address.
- Fix: Functions: Recurring Bookings: Fixed a bug in generating calculated bookings - some dates are off. Mod: Functions: Recurring Bookings: Changed name BKDailyRecurrenceGenerator to BKRecurrenceWeeklyGenerator. i didn't want to stuff the daily and weekly generation of calculated bookings in one class. we could in future based it from BKRecurrenceWeeklyGenerator and create a new class BKDailyRecurrenceGenerator that implements the IRecurrenceGenerator interface. Add: Functions: Recurring Bookings: Schema change - Added RangeStartDate and RangeEndDate so we can easily filter BKRecurrence records without the need to parse the RecurrenceFormulaJSON string. Add: Functions: Recurring Bookings: added daily job RecurringFunctionBookingsGenerator (IHttpHandler class) to persist recurring bookings not yet persisted (e.g. 2 days) ahead of the booking start date. By default the persists recurring bookings 2 days ahead of time based on the booking start date. We can override this by providing a startdt and enddt range (e.g. /RecurringFunctionBookingsGenerator.ashx?startdt=2017-12-14&enddt=2017-12-18). Mod: Functions: Create/Saving of function bookings: Some UI changes related to Recurrence. Added OwnerPassportId and ClubId in BookingData POCO class. Changed DateTime to string for StartTime and EndTime in RecurrenceSettingRec POCO class. Mod: Functions: Functions Calendar: Removed reference to /Shared/ts/jquery.alerts.d.ts - forgot to remove from previous commit. Add: Extensions.cs: Added DateTime extensions for comparing dates. Add: DotGolf.Shared.Data: BKBooking data table class.
- Fix: Failing test in IncrementalBuild.
- Fix: Failing test in IncrementalBuild.
- Fix: Error in sql due to commenting out proc.
- Fix: #8394 Timeslot not found on the tee sheet meant that no recurring bookings beyond that tee time were created.
- Mod: Rename sql scripts to get them in order.
- Mod: Rename sql scripts to get them in order.
- Mod: Rename sql scripts to get them in order.
- Mod: Rename sql scripts to get them in order.
- Mod: Rename sql scripts to get them in order.
- Mod: Rename sql scripts to get them in order.
- Fix: #8394 Recurring bookings should not error out if a single exception is reported - instead try to apply all the bookings and skip those reporting errors.
- Fix: #8742 If you add an already-printed card to a competition via the POG, they are entered into the comp, but their competition result is not generated.  This required club admins to re-save missing cards to get the results out.
- Mod: Green Fee Specials were returning deleted timeslots to select...
- Fix: Slick theme is reporting 404's due to a relative path issue.
- Fix: POS names were wrong.
- Add: Kounta payment options script for TamperMonkey/the mount.
- Add: Squawk: Hook implementation to handle sending push notifications out when score comments are added.
- Add: Hook for score comments added - will be used for push notifications. Fix: Profanity filter wasn't active for saving score comments.
- Add: Hook implementation for when a score comment is added.  This will be used to send push notifications out to your mobile if someone comments on your score.
- Fix: Warehouse: For scorecards, the green fee value is the sum of all live TXLine records for that card.  Previously we were not aggregating, so a $0 line (eg. for a refund) would cause a duplicate.
- Add: Adweb: Payment Reconciliation Report now includes AXAccount topups made online on golf.co.nz. Mod: Removed the aw_PaymentReconciliationReport procedure and replaced it with C# inline code; too hard to version this proc and it's only used from Adweb.
- Mod: ClubCMS: Player List control: the control is now showing the list of players of the selected competition; admins could set which competition it should get the players from
- Add: Maintain Customers link added to Functions calendar (top right) - no better place to put it right now. Fix: Functions: Tabs are now highlighted correctly when you're in the Functions area.
- Add: Bookings: Ability to update customer details on the Booking form using a popup.  When doing this, changes will be saved when Save Changes is clicked at the bottom of the form. Add: jqueryui typescript definitions so that dialog() works for me.
- Mod: ClubCMS: Member Account Statement - include Vend sale details. Removed ASP panel and JavaScript function to toggle show/hide line item details. Replaced ListView with Repeater control since we are only producing a list of individual items inside the Description column.
- Fix: ClubCMS: Event Lead control: just fixed one div closing tag
- Add: ClubCMS: club competition player list - initial commit
- Mod: Public: Member Account Statement (House Account) - Include Vend sale details. AXAccount.cs - line #89 is a duplicate looping statement. We should be adding the statement to call GetAccountActivityDetails() in line#126.
- Add: WarehouseBuilder Load statements to get staging data in for Kounta/Vend.  This doesn't work yet as there is something not quite right in the export - suspect date ranges or something.
- Fix: Functions: Recurring Bookings - Use RecurrenceId from the ViewModel.RecurrenceSetting.RecurrenceId (BKRecurrence.BookingId) to check for an existing BKRecurrence record and update using that key. Only for inserting new BKRecurrence record we will be using ViewMode.BookingId
- Fix: API: Incorrect profile image thumbnail filename returned (dot was after the extension, not before).
- Mod: ClubCMS: Event Registration: style updates
- Fix: Turns out we can't use HttpContext.Current in WebAPI async methods.  Found another way to upload multipart form data from StackOverflow.
- Mod: ClubCMS: Event Registration and Confirmation: fixed validation if player tries to register for the second time; also fixed the "Try Paying Again" link
- Fix: Functions: Recurring Bookings - Persisted records did not have a recurrence id when redirecting to Booking.aspx. Missing ParentBookingId when saving an individual booking that is part of a recurrent booking.
- Add: API: Endpoint to return public holiday dates for Auckland so we can drive the PBX from this.
- Mod: Functions: Recurring Bookings: We can now book weekly functions (still doing some more tests). We will need to improve the handling of already persisted bookings - currently the logic to generate calculated bookings is not able to detect once an already persisted booking's (from a booking series) start/end dates changed. TODO: add some kind of RecurrenceKey (as proposed by David) to identify that this booking has been created.
- Add: Stat for UpdateMemberOrNonAffiliate() - this seems to be causing some locks and I'd like to know about durations here.
- Add: API: Endpoint to allow updating a user's password.
- Add: API: Message Types and the ability to list and add/remove them for a user.
- Mod: Make Connector scanner auto-detection work with newer 12.12 and 14.8 Kodak drivers.  Really we should be adding a Regex in here, but this is a quick fix.
- Mod: Functions: Recurring Bookings: Message typo
- Add: Functions: Recurring Bookings: Forgot to include the Data classes from the previous commit. Add: Functions: Schema changes - Create BKRecurrence table script. Added ParentBookingId in BKBooking table.
- Add: Functions: Recurring Bookings: Calendar now shows persisted and calculated bookings. Loading/Saving - Still a work in progress. I would like to commit these mods for backup.
- Fix: Warehouse dim_CMember build: There is a case where a person was reported as live at a particular club as at the CMemberHistory epoch, when they really weren't.
- Mod: tags_sane breaking for some weird reason - added logging and commented out the usage in Loyalty Actions for now.
- Mod: GOTG: updated banner to Christmas banner
- Mod: ClubCMS: Event Registration: updated titles and styles
- Add: Nice error message in ExtQuery when a warehouse data source is offline.
- Mod: ClubCMS: event registration styles
- Fix: ClubCMS: event registration confirmation total amount
- Mod: Shared: Registration: added TotalAmount
- Mod: ClubCMS: event registration styles
- Mod: ClubCMS: event registration
- Add/Mod: ClubCMS: event registration controls
- Add: Kounta: payment=true for Kounta to test something.
- Mod: Removed unused BuildSubsRenewalData() overrides.  Let's see if Jenkins complains.
- Mod: Performance: Removed the UpdatePanel from the Inbox widget; it was timing out and causing performance issues, and we can do this better anyway.
- Fix: API: DOB localtime handling problem.
- Fix: API: Return staging image URLs for member profile pictures when running via the staging API.  Previously we were returning production URLs which only returned 404 not found for the images.
- Fix: SQL bug.
- Fix: Handle empty profile image extensions, but have advised Ruben that he should be sending us .jpg as the extension.
- Fix: Live: Subs Process Renewals: Replaced the fix made in revision 27661. Added condition to exclude base subs line items not linked to the new category (as configured in the Member's profile under Renewal tab).
- Fix: ClubCMS: corrected a typo error: "No upcoming event's"
- Add: Status code logging for connector API.
- Mod: Did not commit this section of gs_ReportGreenfeeTakings to add online membership applications.
- Mod: Functions: Required validation added for customer name (instead of CustomerId which isn't always set).
- Add: Functions: Ability to create new customers inline by clicking the New Customer button in the search popup. Add: Ability to save Contact Phone and Email values while creating a new customer.
- Mod: Normalised line endings.
- Mod: ClubCMS: Event Lead control: updated query string parameter "CompetitionRoundId" to "CompetitionId"
- Mod: ClubCMS: Event Lead control: added control settings
- Mod: ClubCMS: Event Registration css updates
- Mod: ClubCMS: CompetitionUtilities: added GetOpenCompetitions method
- Mod: Dropped redundant schema script.
- Add: Warehouse: Import scripts and configuration to get Kounta and Vend sales data into the warehouse staging tables.  No fact/aggregate build yet, we'll do this when we have staging data to play with.
- Mod: Live: Renewals: Revert revision 27786
- Fix: Live: Renewals: Issue: members changing category on renewal didn't have a base subs item. e.g. Club 315 Andrew Caffrey changing from I29 to I30 Fix: removed the condition which excludes base subs items; also removed the condition which excludes items for the previous category (we still need those for displaying items from the previous category--for the ClubMemberItemSummary control which pops-up when the amounts are clicked on)
- Fix: Functions: Venue Inventory: Unable to create new venue with the same name as previously existing venue (already deleted) - always prompt that the venue name already exists. Fix: Functions: Venue Inventory: Assign/set the returned venue id after SaveChanges(). Fix: Functions: Custom Fields: Unable to create new custom field with the same name as previously existing custom field (already deleted) - always prompt that the custom field name already exists. Mod: Functions: Run Sheet: Minor UI changes.
- Mod: Send scorecard print delay data directly to Vortex so we don't have to get this from Trackerlog.
- Mod: Send scorecard print delay data directly to Vortex so we don't have to get this from Trackerlog.
- Mod: #8637: golf.co.nz: removed links to unused pages: NZ Golf Update and Kiwi Pro Watch
- Mod: API: Changed to multipart form-data POST to upload profile image.  This is much more efficient than encoding image data in JSON.
- Mod: ClubCMS: Event Registration control: rephrased text; applied styles
- Fix: StatsDPerfMon will now handle it when a performance counter doesn't yet exist - eg. on first boot when IIS hasn't fully kicked into gear yet.
- Add: ClubCMS: just checking in Cambridge's files (127 folder) so we could use it for testing
- Mod: Disable StatsD logging from development machines/servers.  They clutter Vortex and use up unnecessary disk space.
- Mod: Live: Tournament Registration Options: added "Allow Online Payment" checkbox
- Mod: sql: this adds a new column "AllowOnlinePayment" to the Competition table; this setting will be mainly used by the clubs
- Add: ClubCMS: sql: insert new control and control properties
- Mod: Public: Teebooking - changed ValidateRequestParameters to RedirectIncompleteRequest - allow flexibility to pass a relative page url to redirect the request. Moved comments to Page_Load().
- Mod: ClubCMS: Event Lead control: work in progress; show a generic banner if there's no image uploaded
- Mod: ClubCMS: renamed rCompetitionRegistration to rEventRegistration (this control hasn't been used anywhere yet); also added a generic lead image (free from Unsplash)
- Mod: ClubCMS: Event Lead control: work in progress
- Fix: Functions: Run Sheet (BEO) - Custom fields were not rendered for Catering and Extra sections. Fix: BOOL Custom Field - actual value was incorrectly displayed.
- Fix: ClubCMS: Join Toro control: handle hyphens (and spaces) entered in the membership number field. NZG forwarded a concern from a member who's not able to register and it turned out he was adding a hyphen to his membership number: 395-0394
- Add: Vortex: Logging for www.golf.co.nz
- Mod: Functions: Venue Inventory: Added "delete" feature in the Venue inventory page. Fix: ChangeDate is not set every time an update is executed. Mod: Use ConcatenateControl to bundle all JS scripts.
- Add: Functions: Custom Fields: Added maintenance page to allow user to maintain Functions Custom fields. settings.xml - added Custom Fields link under Functions Settings group.
- Fix: Excluded startsheet monitor as it was inflating our page load times.
- Mod: VortexModule: Send page timing data as StatsD Timers instead of Gauges.
- Add: VortexModule for sending page load statistics directly to Vortex instead of TrackerLog->Vortex. Add: Ability to pass an absolute bucket name to StatsD so that we don't have it prefixed with the machine and database names. Mod: Renamed Tracker.cs to PerformanceTrackerModule.cs (no classes were harmed in the renaming of this file).
- Add: Kounta API Client: Ability to update an order's status.  Not used anywhere at the moment.
- Fix: Oops, broke the build.
- Some stuff I haven't committed before; unused at present.
- Add: ClubCMS: Event Lead control: work in progress
- Fix: So apparently Kounta can't handle searching for tags with "&" in them; changed to "-".
- Mod: Public: Teebooking/SearchSlots.aspx - page_load() throws an exception whenever it receives a request that is missing one of the following request parameters: ClubId, Date, back. From the ExceptionLog we found out that these requests originated from search engine crawlers like Bing and Google, sending out requests with incomplete parameters. To properly handle incomplete request parameters and instead of throwing an exception, we will redirect the request to /Teebooking/Search.aspx page. Initially, we thought of redirecting to /Teebooking/SearchClubDay.aspx but this page loads faster when ClubId and RegionId parameters are supplied - if either one is missing from the original requested page (/Teebooking/SearchSlots.aspx), it may add on to the web server load.
- Fix: Another Kounta error (customer already exists with this email address).
- Mod: ClubCMS: UWeatherSimple control: added a HideOnPageNames control property so it could be hidden on certain pages (as it is usually a _Global control); added IsHiddenForThisPage method to CMSUserControl so it could be used by any control
- Mod: #8612 Send another membership number tag to Kounta in the format &0691.  Because & is on the Kounta on-screen keyboard, POS users can now search a member with 2 fewer keystrokes. Fix: Kounta member sync did not catch duplicate member exceptions properly so the process would terminate early in case of problems.
- Add: Template code for POSData datasource for Member Accounts Reconciliation report.
- Mod: Missed committing the csproj.
- Add: ExtQuery: Ability to run reports on a scheduled basis and email results off to a specified email address.
- Add: Functions: Venue Inventory - Settings page for maintaining functions venues (loading/saving - done). Setting.xml - added Venues under Functions Settings group.
- Fix: #8594 I'm really not proud of this "fix".  I had to gather the list of paid-online TXLines here using the same logic as in ConfirmPayment.aspx line 233 onwards.  It's a blatant copy and hack.  But moving that code in ConfirmPayment above ApplyBookingChanges will require so much regression testing, it's going to be ridiculous.  So, for now, this is the best answer I've got.
- Mod: Exception page on golf.co.nz was uuuuuugly when we're trying to look at a stack trace - sprinkled some BR tags to make it look better.
- Fix: Live: Renewals: handle empty upfront payment value
- Fix: Live: Renewals: handle empty upfront payment value
- Mod: Live: Renewals: show the upfront payment date field on keyup event instead of blur
- Mod: Live: Renewals: adjust the last instalment date if it's past the new subs item end date
- Mod: Live: Renewals: rephrased text "Add Upfront Payment" to "Show Upfront Payment Options"
- Fix: Adweb: Contact Search: used the club as the main table in the query again (mistakenly used the contact table); return a result even if the club doesn't have any contacts
- Fix: Adweb: Contact Search: 485 wasn't returning a result because the club doesn't have a manager contact defined. Order of priority for the one contact person returned for the club: manager, generic, handicapper
- Fix: Slicer: Should not import DPSCompleteAttempted transactions that are dated anytime today - should only import yesterdays' and back.  While this didn't cause incorrect payments to be made, it caused next slice transactions to be missed because further transactions could still be processed earlier than the LastImportedDate (determined from the max DPSCompleteAttempted value).
- Fix: Slicer: FK reference error when reversing a payment batch.
- Mod: Functions: Run Sheet (BEO) - Display product notes.
- Mod: Functions: Run Sheet (BEO) - minor UI changes.
- Mod: Functions: Run Sheet (BEO) - changed PDF layout to landscape. Make BEO (runsheet) as compact as possible (Rachael's comment during the demo)
- Fix: Live: Renewals: handle null dates (upfront payment, first instalment, last instalment); test case: single payment members / invoices
- Fix: Public: My Account - POS - show account history - Split ExternalSystemId column value and take the first item from the dbo.Split() result as the JOIN key between AXAccountTransaction and KountaOrder.
- Mod: Increased ClubCardPrinterDriver.PrinterName column width.
- Add: Log exceptions for ConnectorAPI.
- Add: Log exceptions for ConnectorAPI.
- Add: Exception logging to Connector API.
- Fix: Accidentally committed a work-in-progress mod of mine.
- Add: App About page.
- Fix: Bug in HoleScore.AdjustedGross which would return 0 if the actual gross was 0 (pickup).
- Fix: Public: My Account - POS - show account history. Fixed GetKountaActivity SQL to filter by ax.SystemCode = 'KOUNTA' or ax.SystemCode = 'KOUNTA_GW'.
- Add: Kounta: Code to let us push line items onto orders, with some prototype code in there to push the current member account balance into a description line.  Commented out until I'm told what to do with this.
- Fix: Public: Renamed PWProfileQuestion to ProfileQuestion (this was missed before when the table names were modified!)
- Fix: Public: My Account - POS - show account history. Added SystemCode = 'KOUNTA' in GetKountaActivity SQL.
- Mod: Functions: Move "Functions" tab under "Events" tab. Moved prize templates next to the right of Competitions tab. Removed "Functions" tab from the main menu (Standard.master). Used "/Events/CalendarSubNavBar.ascx" control for displaying sub menus in Default, Booking, Quote and RunSheet pages. Add: Functions: Create Settings area for Functions - Added "Functions Settings" group in settings.xml. Mod: Functions: Product management - moved the "New Product" button beside product drop down list. Mod: Functions: Menu management - moved the "New Menu" button beside menu drop down list.
- Fix: Connector: Don't launch the kiosk on cn-api.golf.co.nz or connector-api.golf.co.nz; switch to live.golf.co.nz instead (which should automatically redirect to edge if necessary)
- Mod: Functions: Updated reference path to shared typescript and JavaScript libraries.
- Mod: Live: Renewals: Instalment Preview: clean-up code
- Fix: Live: Renewals: (missed in the previous commit) remove commas from the amount
- Mod: Functions: Commit DotGolf.Live.csproj file to include recent changes to the folder structure for Functions. Exclude .js and .js.map files under Functions/Settings folder.
- Mod: Functions: Settings - moved functions-related settings pages to this folder.
- Add: Functions: Settings - create this folder to store functions-related setting pages.
- Fix: Live: Renewals: parse the date using the format dd/mm/yyyy
- Mod: ClubCMS: Settings: updated the Payment Express A2A live username (DotGolfSubsA2A) and key
- Mod: Adweb: ContactSearch: update the query to use the contacts table (contact type: manager); removed the Fax column
- Fix: Leaderboard: Changed keyboard shortcut for screen refresh to Shift+Space.  This is to prevent stuck keys on the leaderboard causing a storm of page refreshes.
- Mod: ClubCMS: My Account: POS - show account history. We are showing Kounta items as of the moment. Will be checking with David on including VEND sale items.
- Mod: Public: My Account: POS - show account history. We are showing Kounta items as of the moment. Will be checking with David on including VEND sale items.
- Mod: Reverted rev 27673 because I've just committed a better way of refreshing the leaderboard.  The new way will refresh even leaderboards running legacy code, so it covers all bases.
- Add: Leaderboard: Better way of reloading the page on svn revision update - this works with btnRefresh and causes a page reload when a version change is detected.
- Mod: Live: Renewals: updated instalment preview styling; made the clickable values on the renewals table blue
- Mod: Live: Renewals: added instalments preview (when you click on the payment schedule)
- Add: Live: Renewals: Instalment Preview control
- Mod: Live: TabRenewals - Added 4 columns: Upfront Payment Amount, Upfront Payment Date, First Instalment Date, Last Instalment Date - The fields on those 4 columns are hidden for single payment members - All the dates are pre-populated, and could be edited by the user - The Upfront Payment columns are hidden by default, unless the user ticks the "Add Upfront Payment" checkbox - The Upfront Payment Amount accepts numeric values (and period) only
- Fix: Functions: Send invoice to Xero - use UnitAmount instead of LineAmount as LineAmount is used for the Line Totals. Fixed logic on saving Extras/Equipments to an existing booking.
- Mod: Functions: Booking - disable Send invoice to Xero link if the status is not yet confirmed. Quotes/RunSheet - changed View booking details button to an anchor tag so it follows the same styling as Competitions.
- Mod: Live: TabRenewals: rephrase "Direct Debit Schedule" to "Payment Schedule"
- Mod: Live: TabRenewals: rephrase "Get members on direct debit only?" to "Get members on instalments only?"
- Add: Functions: Sales Quote - forgot to tick Quote.ts (Tortoise SVN UI) to be committed.
- Add: Functions: Sales Quote - added feature to generate a sales quote and allows exporting to a PDF document. Security check - added a line to invoke BKFunctionBooking.EnsureHasAccess() on Booking.aspx.cs::pv_load() to ensure that the user accessing the booking data belongs to the club the booking was created.
- Fix: Live: Subs Process Renewals - Previous fix will only renew current subs items and will not include other line items (non-subs).
- Add: CW Membership Applications are included in the Payment Reconciliation Report. Add: CW Membership Applications are now included in the slicer transaction reports (emailed to clubs).
- Fix: Live: Subs Process Renewals - Revert back previous changes. Better to put an additional "where" condition on the SQL query to exclude subs line items from the previous category.
- Add: Functions: Booking Run Sheet Report - view and export to PDF completed. Extended the PDFRenderer class to exposed a static method "GeneratePDF()" to be able to create a PDF from an HTML content without the need of wrapping the dataset to a Report object.
- Fix: Live: Subs Process Renewals - We should not be adding up a base subs item's amount from the previous category to the new amount (renewal).
- Add: Functions: We can now charge things to the customer's function account from Kounta.  These items are included with the data sent to Xero when you send the invoice.
- Mod: Allow putting AXAccountTransactions for FNCustomers linked to a club.
- Mod: Functions: Support loyalty actions for Function Booking customers from Kounta.
- Mod: Functions: Use pushState to replace the current URL when the bookingId becomes available, instead of a reload.  This means that our speech bubble for the success message still shows up properly. Fix: load() with no callback caused an error.
- Add: Functions: Ability to send invoice to Xero, keep track of it, and allow the user to click on a link to view said invoice.
- Add: Functions: The system will now automatically sync function booking customers into Kounta when their booking date approaches (24 hours before start, 48 hours after end of booking).  This is done in the KoutaSync.ashx job which runs every 15 minutes.
- Fix: #7995 Start tee was not selected properly when printing Long_LargeAd or Long_LargeAd_CenterTray cards.
- Fix: Callback function type wasn't quite working.
- Mod: Live: Invoice: rephrased "Upfront" label to "Initial"
- Mod: Live: Invoice creation: use the Invoice Document Date as the date of the upfront payment. Upfront payments can't be before the Invoice anyway. This came up because Pakuranga's using the upfront payment as the initial payment (which doesn't happen until a certain future date, but before the regular instalments). We're also renaming the labels from "Upfront" to "Initial"
- Fix: Functions: TS definition problem - oops.
- Add: Functions: UI code to send invoice to Xero; this doesn't call anything just yet, just shows a confirmation dialog.
- Fix: Functions: Booking - View Run Sheet: Fix invalid URL. RunSheet - Added loading/spinner for better user experience - copied from Booking.aspx. thanks David =)
- Add: Functions: Quote UI design - pending data population. RunSheet - user can now view the Booking Run Sheet Report (pending export to PDF). Added moment.js - JS library to display date formats nicely. Booking.ts - Appended the "export" keyword for all booking data-related TypeScript classes. Ignored Runsheet.js, Runsheet.js.map files.
- Add: Functions: Basic implementation of functions proforma invoice calculations.  Included a JSON previewer so we can see what the invoice looks like without having to push it to Xero.
- Fix: Org: Email/List.aspx: query performance improvement (from David)
- Fix: Functions: FNCustomer records will now properly be linked up with Xero if you search and add a customer from Xero.
- Mod: Functions: spinner for while booking page is loading and binding, so that we don't flash an unbound form while we're loading up.
- Add: Functions: Integrated new customer quick search into Booking screen.
- Add: Functions: Quicksearch control that searches Members, Xero and FNCustomer.  It could also search Vend (but not yet implemented), and we could make it search Kounta if we sync their customers into our system, but those are not yet complete.
- Fix: sql: removing these scripts as they are breaking the unit tests
- Mod: sql: added MembershipApplicationCreditCardTransactionFee and MembershipApplicationA2ATransactionFee to Club and Association tables
- Fix: sql: moving these scripts as they are breaking the unit tests
- Mod: Functions: Calendar is now colour coded to show tentative/confirmed bookings.
- Fix: Parameter change broke XeroSync.exe build.
- Fix: Kounta: Handle RefreshToken 400 errors by parsing the JSON and throwing a KountaApiException, same way the other API calls are handled. Mod: Changed AsyncHelper to DebuggerNonUserCode so that the debugger doesn't keep breaking there.
- Mod: /api/XeroSync.ashx now takes an optional ClubId= parameter so we can sync for a single club at a time, for testing purposes.
- Fix: Live: DD Export: correct the population of the default Payment Date. Previously, "undefined" was being displayed on the day label on load only.
- Mod: Live: Bulk Email: ComposeV2: set MaintainScrollPositionOnPostback to true to prevent the page to scroll to the top on postback. It's useful on certain actions e.g. Save Updated Article, Cancel Edit, Add Article
- Mod: Live: PDP: format the Activity Date value in the past activities table
- Mod: Adweb: Club Dashboard: added a collapsible club management contacts table
- Mod: Allow filtering by payment reference (eg. House Account#20171120) to re-code payments for Kounta takings invoices.  We can enable this mode by entering REF#House Account into the Auto-Recode Takings Invoice Payments From: box in Kounta settings.  This was done because Kounta insists on coding house account payments to the bank account, with no option to change this (like Vend has), so we have nothing to go by except for the Payment Reference.
- Mod: Functions: Create Booking - Copy product detail notes to notes field of the selected catering product.
- Add: Functions: Copy Booking - allow user to copy an existing booking's details.
- Mod: Adweb: Club Dashboard: Email and Handicapper Email: get the value from the Contacts table through the Club object
- Fix: Stop a single order in a bulk Kounta order import process from crashing the whole batch.
- Add: Functions: Create Booking -  Added feature to save/load custom fields in the Booking page - it can be configured to display on either "Booking", "Venue", "Catering" or "Extra" sections. Reload and append the BookingId in the URL parameter after successful creation - only happens if it’s the first time the booking was created. Product quick search result - do not show the internal value for Unit column. Display a more appropriate text instead.
- Fix: ClubCMS: Membership Application checkout page: only record a transaction fee to TBTransaction table if the transaction fee is being paid for by the customer.
- Fix: sql: corrected the column name from MembershipApplicationTransactionFee to MembershipApplicationCreditCardTransactionFee
- Add: Endpoint and IP address logging so we can tell this is working.
- Add: Endpoint and IP address logging so we can tell this is working.
- Add: Endpoint and IP address logging so we can tell this is working.
- Fix: Crashbug updating client configuration because of the scanning flag check.
- Fix: Crashbug updating client configuration because of the scanning flag check.
- Mod: Connector API endpoint configuration update so that we can change connectors over to the new thing.
- Mod: Connector API endpoint configuration update so that we can change connectors over to the new thing.
- Fix: ConnectorAPI wyBuild issues, included WypRevisionUpdater.exe.
- Mod: Fixed solution file name.
- Add: extern to pull in Connector source code.
- Add: wyUpdate project for connector-api.golf.co.nz.
- Fix: Another async deadlock.
- Add: Functions: Alter CK_FNCustomField_Section - added "VENUE".
- Add: Initial version of "Connector Island".
- Add: Inner folder so that I can do an SVN copy.
- Add: Inner folder so that I can do an SVN copy.
- Add: ConnectorAPI project.
- Fix: Live: Member Subs Items Report: Changed the Output format of the textbox "tbItemDescription" to General (no specific format) instead of Currency.
- Fix: #8275: CW_UpdateMember alter sp: ComputerNo was not properly being set in the log table, hence, updates on the club website are not included in the profile update daily email notification to the club
- Mod: sql: set the Credit Card and A2A Transaction Fee value for Takapuna Club
- Mod: sql: added new columns to NZGreenFeeData..Club and NZGreenFeeData..Association which is used to store the membership application transaction fee (A2A and Credit Card). The new columns in the Club table will be used initially by Takapuna for their handicap membership application.
- Mod: ClubCMS: renamed column from MembershipApplicationTransactionFee to MembershipApplicationCreditCardTransactionFee
- Mod: sql: inserts new control properties (e.g. IsTransactionFeeInclusive) to the Membership Application Payment controls
- Mod: Added Kounta version of the Xero recode account code thing we also did for Vend. Fix: Can't get to Kounta settings screen due to ORNS error.
- Fix: Functions: Product management page - failed to set ProductDetailId to 0 from the knockout viewmodel when creating a new product. Booking - bug fix on updating catering products - it was not updated successfully. Display a proper unit title instead of the enum value (e.g. PER_PERSON should be Per Person)
- Fix: Reverted mod from rev 27565 which stops us importing cashout refund orders from Kounta; the problem with the API seems to have been a one-time thing?
- Fix: Functions: Products not removed properly from a catering service.
- Fix: Removed B2B ad references - googletag doesn't exist anymore (removed for performance) - now these tags are causing JS errors. Mod: Since our upgrade to .Net 4.5 we have been getting a LOT of invalid viewstate exceptions due to clients with old viewstate posting to the new serverside code.  This swallows those exceptions and redirects the clients to /. Not that this will necessarily help them (they still need to reload if it's eg. an UpdatePanel post), but it will stop them from cluttering our logs; better than handling it as an error.
- Mod: Functions: Create Booking bug fixes and improvements - Allow user to remove a menu item from the selected catering product. Rename ProductRec to FunctionBookingProductViewModel.
- Mod: Functions: Booking - Bug fixes. UI improvements. It is not fully completed but I would like to commit these codes for backup.
- Mod: Live: Added "Renewal Category" link under the "Process" section. This allows users to bulk update the Renewal Category of members. Only those without an assigned Renewal Category Id are included in the query.
- Mod: ClubCMS: Membership Application: allow Account2Account payments (internet banking)
- Mod: ClubCMS: Membership Application: allow Account2Account payments (internet banking)
- Fix: #8464: Live: Invoice creation: use the ClubMember object to get the schedule ID and the direct debit value of the member or non-affiliate. Previously, the page was throwing an error because non-affiliates are not handled properly.
- Mod: ClubCMS: Membership Application Payment controls: added a new property "IsTransactionFeeInclusive" so that we could set whether the club is absorbing the transaction fee or not.
- Fix: Kounta order update locking done by order ID now, so we should be more concurrent with multiple webhook posts happening at the same time. Fix: Because Kounta won't let us retrieve full details for a cashout refund, I skip importing those for now. Mod: Pass the original_order_id into Kounta now that they've fixed their bug.  This should prevent us from refunding the same order twice (in case of a bug).
- Mod: Functions: Menu maintenance page - improvements in the UI that allows user to create/update menu options.
- Fix: Another couple of async deadlocks.
- Add: Script to reload the leaderboard automatically if a new version of the serverside code is detected.  This is now the same as the kiosk and main Live apps.
- Mod: Performance: If a leaderboard is open but hidden (i.e. minimised or in a tab that is not active), don't postback to the server to get updated results.
- Mod: Functions: Product maintenance page - exclude chosen jquery plugin. Calendar - added filter to remove deleted bookings.
- Fix: More async deadlocks in Kounta hook code.
- Mod: Functions: Booking - Fix some bugs on Save booking - unable to perform another update (clicking Save Changes) without refreshing the page. Back service class FunctionsManager end was expecting CreateDate, ChangeDate, DeletedDate fields to be sent over because the POCO class BookingData.BKFunctionBookingVenueRec has these fields initially (after copy/paste from data classes). I have removed these fields.
- Mod: Functions: Improvements in Product maintenance page. Allows create/update of products, filter list of products by type.
- Fix: More async deadlocks in Kounta hook code.
- Fix: More async deadlocks in OrderUpdate.ashx. Mod: Cache product data for 2 minutes to speed up sync.
- Mod: Performance improvements in the KountaSync api call, so that it no longer re-syncs orders we've already seen (with the same updated_at value).
- Fix: Kounta bulk order import should also process loyalty/topup transactions as well as cash refunds, just in case they are missed by the webhook calls. Fix: Another async deadlock. Fix: Customer names are html encoded, we need to decode these before storing.
- Fix: Kounta import async deadlocks because of .Net upgrade. Fix: Vend import duplicate transaction errors when you resync all sales.
- Mod: Public: Tee booking performance enhancement - set the correct RegionId value for a selected club. Previously it was fixed to "-1".
- Mod: Slice done, removing temporary hack to get past transactions.
- Mod: Functions: Updates to Product and Menu maintenance pages - allows user to toggle to different product or menu to see the details and perform an update. Remove date fields in VenueRec class from Booking.ts.
- Fix: Temporarily disable SPF checks - they are not working in .net 4.5+
- Fix: Parallel causing app pool recycles due to unhandled thread exception
- Add: Membership Application transaction slicing for Takapuna.
- Mod: Functions: Minor UI tweaks.
- Mod: Functions: Check for null Menu before rendering menu items - applies to custom catering product as this does not have any corresponding menu.
- Add: Functions Booking: Loading and Saving of ViewModel completed. Added copy booking feature (will test again tomorrow). Re-factor some POCO classes that reside in DotGolf.Shared/Data, moving it to DotGolf.FunctionManager namespace (DotGolf.Live project). Fix some compilation errors that only occurs in Staging and production Jenkins build server - due to new expression-bodied methods a feature introduced in C# 6.0. Our staging and production build server doesn't support this yet.
- Add: Slicer support for Membership applications paid online (Takapuna is live with this).  $9.95 transaction fee, no percentage up to $199.00.
- Fix: #8418 Allow user to cancel out of the checkout if we have no transactions or only declined transactions.  Only hide the CANCEL button if something is in progress or there is any accepted amount.
- Performance: Include ClubFeeDetailId in this index to speed up LockAndLoadTimeslotForEditing
- Mod: JSON.ashx will now summarise multiple exceptions in an AggregateException in the Message field.  This means we won't get "One or more errors have occurred" - instead we'll get a newline-separated list of the inner exception messages.
- Mod: Performance: Split apart a large query in LockAndLoadTimeSlotForEditing() and run the cart and competition queries in separate threads so that they can happen concurrently.  This should decrease the size of this query to a more manageable level (so the query optimiser has a fighting chance). The new code is also using Dapper so we should get a little performance boost there over the old DataSets.
- Mod: Performance: SQL behind POG -> edit booking improved to improve PersonClubDetail join speed.
- Mod: Added WITH RECOMPILE to live_GenerateOrUpdateCompetitionRoundSegments - parameter sniffing causes performance problems with this proc.
- Add: Functions Booking: Code re-factor - part 3.
- Add: Functions Booking: Code re-factor. BKFunctionBookingVenue left out in previous commit.
- Add: Functions Booking: Code re-factor.
- Add: in our Xero import, we'll also re-code Kounta payment transactions to HOUSE (if configured per the documentation).  Vend has the same problem and we already do it for that. Fix: We were processing more invoices than we should have because of a logic error; this has been corrected.  Shouldn't have affected any data as nothing posts to the ACCTCLR account other than Vend.
- Mod: Live: DD Export: set the minimum date (current date) and the maximum date (+20 days) that the user could select on the date picker control.
- Fix: #8399 PerformDatabaseIntegrityCheck() was no longer being called since we introduced SSO.  This stopped the standard categories from being inserted for newly created clubs, in turn causing errors when Geyserland tried creating members.
- Add: sql: ClubCMS: new controls and control properties
- Add: Functions Booking: Save and Load booking details. Still working on updating/deleting items from the booking. Started to do some code clean up and re factoring.
- Add: #7499 skeleton code for sending notifications when group bookings are created/updated.  This code is disabled at the moment, we need to complete and test it.
- Add: sql: insert records into the new tables: CategoryHierarchy and PgaPdpCycle
- Add: sql: PGA PDP: create new table CategoryHierarchy
- Add: sql: these create new PGA PDP tables
- Add: Functions Booking: Added new column "Cost" in BKFunctionBookingVenue table. This column shall contain either the amount from ClubFeeDetail or the amount entered by the user (from Create Booking UI)
- Add: new column: InstalmentDirectDebitBatch.PaymentDate
- Mod: Live: Settings: added link to manage PDP Activities (only visiable to the PGA)
- Mod: Calendar popup implementation completed.  Had to refactor a bit of code to get this done - have discussed with Kenneth.  Good luck :)
- Mod: Live: DD: use InstalmentDirectDebitBatch.PaymentDate as the Due Date in the bank files (this used to be just the current date)
- Mod: Live: DD: CreatePaymentForInvoice: use the receipt's DocumentDate as Instalment.PaidDate (not the current date)
- Mod: Live: DD: added saving of InstalmentDirectDebitBatch.PaymentDate as we need this for the bank file; updated Westpac file generator to use InstalmentDirectDebitBatch.PaymentDate as the DueDate
- Mod: Live: DD: Export: updated markup of the new Payment Date field
- Mod: As part of making sense of this ticket: #8378 we discovered that the baseline value was being calculated incorrectly and all markers in the comp were getting strokes added.  At least 1 of the markers should have a 0 adjustment.
- Mod: ClubCMS: PGA PDP: added membership details; updated styles
- Mod: ClubCMS: PGA PDP: sort the records in ascending order; added the verb "maintained / qualified / regraded"; added percentage sign to Grade
- Mod: Live: PGA PDP: sort the records in ascending order; added the verb "maintained / qualified / regraded"; added percentage sign to Grade
- Fix: Function Bookings: Didn't update the CHK_FeeType constraint to allow VENUEFEE types.
- Add: Function Bookings: Venue fees are stored in the ClubFee structure, which means we had to add Limit.VenueId and a VENUEFEE club fee type.
- Mod: Live: PGA PDP: only show the PDP stuff to DotGolf IP address or if the current date is 15th November onwards
- Fix: Live: PGA PDP: handle no Grade input
- Fix: Live: Direct Debit Export: renamed dateTo to paymentDate
- Mod: Live: Direct Debit Preview: added a total at the footer of the preview table
- Mod: Live: Direct Debit Preview: added date input on the UI (this used to be just a query string parameter); made the preview dynamic (updates as the selected date updates); work in progress
- Mod: Functions: Ability to load booking details and catering services from DB. Still working on loading of venue hire and extras.
- Add: Performance improvements; massively better performance from live_GetScoreCardPrintQueue.
- Fix: Bug in regex caused blank javascript "Script error." messages to keep spamming our exception logs.
- Mod: Live: PGA PDP: show PDP tab (for PGA only) starting on the 15th November (when I get back)
- Mod: Live: PGA PDP: set the review date to the last day of the year for PGA club, otherwise, use the current date
- Mod: Functions: Updating data transfer objects to the correct shape in the Functions booking page. Use one quick-search JS logic instead of two for product quick search.
- Mod: Live: PopulateCategory: just updated the cache key
- Mod: ClubCMS: PGA: Earning control: exclude empty row from the pdf export
- Mod: ClubCMS: updated jspdf to latest version
- Del: ClubCMS: individual PDP controls (I've combined them into one--see previous commit)
- Add: ClubCMS: PDP control: this has both the classification history and the activity list
- Mod: ClubCMS: PGA PDP: Category History: added pdf export button; updated mark-up; added club and member details
- Mod: ClubCMS: PGA PDP Activities: markup updates
- Fix: Didn't include @parameter, argh.
- Mod: #8263 For paid bookings we copy casual golfer contact details to PersonClubDetail so that the club can see them in the POG. If the contact details already exist, they are updated with the latest details from the NonAffiliate profile.
- Mod: #8263 For paid bookings we copy casual golfer contact details to PersonClubDetail so that the club can see them in the POG. If the contact details already exist, they are updated with the latest details from the NonAffiliate profile.
- Revert: Removed local copy of material-icons and opensans - the woff2 files don't work by default and it offers little performance gain.
- Add: ClubCMS: PGA PDP Category History control initial commit
- Mod: ClubCMS: PGA PDP: minor style updates
- Mod: Live: PGA PDP: minor style update; minor sql query update to add alias
- Fix: Function source appeared in scorecard unpaid count bubble due to Knockout 3.4+ in use on Functions/*
- Performance: Improved Dotgolf Live page load speeds by doing the following optimisations:
- Mod: Live: PGA PDP: renamed PgaPdpCategoryId to PgaPdpActivityCategoryId; updated category history query
- Mod: ClubCMS: PGA PDP: renamed PgaPdpCategoryId to PgaPdpActivityCategoryId
- Mod: Live: PGA PDP: renamed PgaPdpCategoryId to PgaPdpActivityCategoryId
- Mod: Live: PGA PDP: added saving of total cycle points; retain Trainee category (as the NewRenewalCategoryId) for Trainee members
- Mod: Live: PGA PDP: moved Review Date to the confirm box; added the updating of Cmember.RenewalCategoryId
- Mod: Live: PGA PDP: removed cbIncludeProcessed; added Review Date
- Mod: Live: PGA PDP: added logic that determines the renewal category ID based on the points and the current category; added saving of the new renewal category and grade (work in progress)
- Mod: We can now mark contracts as "completed" which will hide them from the Club Contract Expiry report.  In S3 we rename the file to append "_dg_completed" which we then use as the flag.
- Fix: Don't show account payment options on kiosk unless you also have the VEND product.  At the moment this stuff has some dependencies on Vend so we can't offer AX options on their own without some more work.
- Mod: Increase HttpClient response buffer size to accommodate larger orders received from Kounta.
- Mod: Functions: Updates on data table classes for product and menu items - working now. Further testing is required.
- Mod: Functions: Loading/saving of product and menu items - working now. Further testing is required.
- Mod: Functions: Loading/saving of product and menu items. Work still in progress - there are still things to tidy up.
- Mod: ClubCMS: Love Golf: update the she loves golf search image; also updated its path so that we could easily update it in the future
- Mod: ClubCMS: added the gender to the marker css class name so that we could easily select them in css or js code
- Mod: ClubCMS: added the marker name as a css class name for the women's markers as well so that we could easily select them in css or js code
- Fix: #8335: ClubCMS: when CWMemberPrivacy.HideEmailAddress is null, set to true (hide the email address). This makes it consistent with the Edit Profile control, where we tick the "Hide email" by default if there is no CWMemberPrivacy setting yet for the new member.
- Add: ExtQuery: Subreport functionality added.  Documented here: https://dotgolf.freshdesk.com/solution/articles/6000153778-extquery-reporting-engine-formatters
- Mod: Vend sale import code didn't import the product_id.  A rather crucial field if you want to query product info later on based on sales...
- Mod: Live: Members: Membership Tab: require the Bank Account Number if "Direct Debit" is ticked.
- Mod: Live: Renewals: use Cmember.IsDirectDebit during renewals (previously, this was based on the previous invoice details only)
- Mod: sql: ClubMember: alter view to add IsDirectDebit
- Mod: Live: Invoice creation: tick the Direct Debit checkbox based on cm.IsDirecDebit value
- Mod: Live: Subs Renewals: a member could be on instalment without being on DD. So we've adjusted the code to not default the Invoice.IsDirectDebit to true. Instead, depend this on the recent history, or default to false if there's no history.
- Add: Function Bookings: Calendar control from Competitions/Events tab extended to allow us to use it for Function Bookings too.  This isn't complete yet (eg. the popup with extended info doesn't appear yet), but it's functional.
- Mod: Live: Payment Schedule dropdown options: removed "-- Select --"
- Mod: Live: Members: Membership Tab: added IsDirectDebit checkbox
- Mod: sql: adds a new column "IsDirectDebit" to NonAffiliate table
- Mod: sql: adds a new column "IsDirectDebit" to Cmember table
- Mod: #8325 When a member is resigned in DotGolf Live, remove their Category_XX and IsMember tags from Kounta.
- Removed new rollover optimised proc; this isn't working.
- Fix: When refunding payments for cancelled bookings, we should only be considering amounts paid online.  Previously other fees (eg. carts) added to the booking would interfere and increase the purchase amount, stopping people from getting their refund.  This was a problem for partially cancelled bookings at Takapuna.
- Fix: If a transaction is already marked with a CapturedDate, don't overwrite that when ApplyBookingChanges fails (fail-safe) - because this stuffs up Takapuna and their PurchaseRefund model.  We also don't want to automatically refund these guys as it appears that their dollar signs stick in the POG, so for now I'm just excluding these records from being updated.
- Fix: If a transaction is already marked with a CapturedDate, don't overwrite that when ApplyBookingChanges fails (fail-safe) - because this stuffs up Takapuna and their PurchaseRefund model.  We also don't want to automatically refund these guys as it appears that their dollar signs stick in the POG, so for now I'm just excluding these records from being updated.
- Fix: #8332 Subs: Exclude a subs line item that is already been billed/invoiced. Should not be carried forward to the new category's subs line items.
- Mod: Live: renamed label "Default Direct Debit Schedule" to "Default Payment Schedule" because we use this default Schedule Id when creating a new invoice (whether or not it's DD)
- Mod: ClubCMS: added the marker name as a class name so that we could easily select them in css or js code
- Fix: #8329 If you reprint a card while in the checkout process in the POS, you can end up failing to complete the checkout because the card you were working with has been reprinted, and we can't reprint a card twice.  Modified so that we'll always reprint the latest copy of a scorecard instead of working with our outdated ID. Mod: Improved error dialog if the POS checkout fails, also ensure the UI gets reset so that the user can try again (hide ajax spinner etc).
- Mod: sql: oom_GetStandings_Pga: alter this sp to use the Start and End Dates to filter the data. This has been run against prod (the only diff is the comment added).
- Mod: sql: RegistrationAnswer table: alter column AnswerText from varchar(50) to varchar(150) to accommodate answers to text type of questions
- Mod: Functions: Initial commit - Data table classes.
- Fix: #8299: Live: ImportCreditNoteUpdates: make sure we don't apply the same credit note twice to installments during the sync
- Mod: Functions: Initial commit - Data table classes.
- Mod: Functions: Commit font-awesome files (these were not included in the previous commit 27402.
- Mod: Functions: UI updates. Commit font-awesome css files.
- Add: Test code for a more modular method of calculating the AVHD.  I'm hoping this will give SQL Server a fighting chance to get a query plan before timeout.
- Fix: ClubCMS: Membership Application Payment: send the email notification only if the payment is successful
- Mod: Live: Event Registration Options: Added "text" type of question
- Mod: ClubCMS: Competition Registration text answer: save only if not blank
- Fix: Removed Carts (and anything not paid online) from the Tee Booking Green Fee Detail report by excluding them on TXLine level. Fix: Indenting/tabbing fixed in wa_TBReportGreenFeeDetail.
- Fix: FK reference should have pointed to BKFunctionBooking table, not BKBooking.
- Mod: ClubCMS: Comp Registration: handle displaying of text field type of registration question
- Add: Initial schema for function bookings.
- Fix: Live: She Loves Golf: revert one of the changes done in Revision 27324
- Fix: #8317: Live: Check null reference for memberPaymentSchedule variable.
- Fix: Live: saving of SubsDirectDebitScheduleId for non affiliates
- Fix: #8312: Live: handle null category ID when creating a new non-affiliate
- Fix: #8311: Live: use nullable int for SubsDirectDebitScheduleId (fix against the previous commit: 27277)
- Fix: Live: TabMember: allow users to not select a default DD schedule ID (hence, this is equivalent to a null SubsDirectDebitScheduleId)
- Mod: Live: PGA PDP: removed PDP Activities from the Settings page (for PGA club) for today's publish, as we won't be going live with it yet
- Mod: Functions: Base UI for Product and Menu management.
- Mod: Live: PGA PDP: batch update renewal category: display member search results (work in progress)
- Mod: Live: PGA PDP: renamed PgaPdpCategory to PgaPdpActivityCategory
- Mod: Live: PGA PDP: renamed PgaPdpCategory to PgaPdpActivityCategory; added display of member category (PDP classification) history to the PDP tab control
- Add: Live: SubsBulkUpdateRenewalCategory: initial commit
- Mod: Live: PGA PDP: comment out code for now for today's publish, as we won't be going live with it yet
- Mod: Live: PGA PDP: comment out code for now for today's publish, as we won't be going live with it yet
- Mod: Club Member Tags: Basic UI and backend service to add/remove/load club member tags. Mod: Function Bookings: Basic Create Booking UI and fix some styling issues. Added quick search control for menu items and extra items.
- Mod: Unbilled Items: Sprint Item#496: At the top of Process Renewals - have a warning if there are any unbilled members for the search criteria.  If there are, we should show a link taking them off to a report where they can review each member.
- Fix: Renamed script 9000 to put it in sequence.
- Fix: #8281 Recurring bookings are sometimes created without Ticket Numbers attached to each of the players.  This has the end result of a player not being able to delete themselves out of one of these bookings.
- Fix: #8274 If you re-order rounds in competition setup so that the highest round number is no longer the last one in the list, new rounds added may cause duplicate round numbers.  Changed this so that we now look at all the rounds and calculate the max+1 round number for the new round.
- Merged revision(s) 27360 from Trunk: Fix: Ensure that staging and production caches stay separate in Redis by prepending the key with the database name. ........
- Fix: Ensure that staging and production caches stay separate in Redis by prepending the key with the database name.
- Fix: Kounta product webhook - because these hooks are called in an indeterminate order we have to get fresh product details every time, to make sure we only save the latest info.  I think this is the cause of some weird data at the Mount to do with member-discount-eligible tags going missing.
- Fix: API: Small fixes around casual golfers logging into MyGolf app.
- Mod: Live: PGA PDP: just updated the sorting of categories
- Fix: Live: PGA PDP: correct the current cycle query
- Fix: ClubCMS: PGA PDP: correct the current cycle query
- Mod: Live: PGA PDP control: just added a "Notes" header text for the notes column
- Mod: Live: "PGA PDP" tab label renamed to "PDP"
- Mod: #8260 Store the ephemeral PDF document in a Redis key instead of on local disk.  This is really what we want to be doing for all our local disk access as we'll be in a load balancing environment one day.
- Mod: #8265 The non-affiliate search in the POG did not filter by firstname.
- Mod: Kounta cashout automation: Don't send the original_order_id to Kounta as that causes a timeout in their API.  I'm waiting for them to let us know this is fixed before re-enabling this.  In the mean-time we store processed order IDs in Redis so that we don't accidentally double process one if the webhook call is retried.
- Mod: Live: Course Status tab: only show the Course Status tab for clubs with an active rCourseControl on their club website. This tab is hidden by default.
- Add: #7995 Long_LargeAd_CenterTray for Titirangi - from the ticket details it looks like they're using a printer which feeds the cards through center aligned, so we need a _Center scorecard format for this.
- Fix: Live: Corrected the path to RptBulkInvoice (files were moved in Revision 27116, and possibly the path just wasn't updated accordingly)
- Mod: ClubCMS: Competition Registration control: added 3 new properties: 1) subtitle for the login control (where instructions could be defined) 2) New User / Registration page 3) Forgot Password page
- Mod: ClubCMS: ULogin: minor style updates
- Mod: ClubCMS: Competition Registration control: added login control title property
- Fix: ClubCMS: URegistrationPromoBig control: corrected the path to the arrowNext image
- Mod: ClubCMS: PGA PDP Activities: allow to switch between current cycle's activities / all activities
- Add: ClubCMS: PGA files
- Fix: ClubCMS: OOM: fix filtering by year (same method as the year filter in the tournament list control)
- Mod: ClubCMS: OOM: handle query with no result
- Add: ClubCMS: PGA files
- Add: ClubCMS: PGA files
- Fix: PGA: corrected the sql parameter name "PgaPdpActivityId"
- Fix: PGA: corrected the sql parameter name "PgaPdpCategoryId"
- Add: ClubCMS: PGA PDP Activities control: initial commit
- Mod: ClubCMS: PGA: just updated referencing of css file
- Add: sql: add new column TBTransaction.MembershipApplicationId and update TBTransaction constraint
- Various refactorings around Functions - removed Services.cs (put each class in their corresponding Page files), fixed ko validation and added example,
- Add: Function Bookings skeleton to prepare for further dev work.
- Fix: Live: Love Golf PromotionalCampaign: set a value to the facility ID hidden field (this was hindering saving of the file for new offers); removed an unused variable
- Fix: Live: PromotionalCampaign: updated the path to the love golf offer (the previous path was for the old Love Golf site)
- Mod: Live: Course Status: missed in the previous commit
- Mod: Live: Course Status: only show the course status widget on the Dashboard if the control exists on an active website. Previously, the widget was being shown on clubs with the CW control but on an inactive website (because it's still being built). Display Yes/No instead of True/False. Also updated a few styles.
- Add: Kounta: Automated cashout processing (done by refunding order lines tagged with the cashout automation tag as CASH).  Unfortunately currently this causes API timeouts in Kounta, so until we sort that out we should NOT tag any product with the kounta-cashout-automation tag.
- Fix: Small error handling conditions fixed in POS interfaces; added Async helper code to run async methods synchronously.
- Mod: ClubCMS: Membership Application Payment Confirmation: update payment unsuccessful message style
- Mod: ClubCMS: Membership Application Payment: include the amount paid to the interclub message body, with a reference number (transaction id)
- Mod: ClubCMS: Membership Application checkout page: before proceeding to Payment Express, check again if the application has been paid for already.
- Fix: ClubCMS: Membership Application Payment control: redirect to membership application form page if the membership application (based on the id) is already paid
- Mod: ClubCMS: Membership Application Payment Confirmation: updated alert styles; make the message / result more obvious; use one css file for membership application controls
- Fix: ClubCMS: Membesrhip Application: updated Date of Birth field style so that the day number won't be partially hidden. Fixed hiding/showing of the membership number field.
- Mod: Live: PGA PDP: GetActivities update
- Mod: Live: PGA PDP: manage (edit, update) activities
- Fix: #7891 If you hack a competition (this is possible through the UI) so that a score played (and previously generated a result) is now played on a different date to the CompetitionRound.RoundDate, duplicate results happen in best-of competitions.  Because this is an extremely hard bug to find, I have put backstop fixes into the GetScoresRelevantToResult() method so that we will NEVER generate results for scores where the PlayDate does not match the RoundDate.
- Mod: Live: PGA PDP: removed unused code
- Add: Live: Settings: PGA PDP Activities: initial commit
- Mod: Live: Settings: settingarea node: add club attribute so we can use this to show a particular settingarea to particular club(s) only
- Mod: Live: PGA PDP: added display of past activities
- Add: ClubCMS: Takapuna website files
- Fix: ClubCMS: Membership Application Payment: updated the default Payment Express merchant reference
- Mod: ClubCMS: Judgeford js
- Mod: ClubCMS: Judgeford css
- Mod: ClubCMS: Judgeford js
- Mod: ClubCMS: Membership Application Payment (Checkout) and Confirmation pages: updated the way the transaction fee is displayed (to make it like the tee booking booking fee)
- Add: Shared: PGA PDP dataobjects
- Mod: Live: Member Tabs: added PGA PDP tab for PGA Club
- Fix: #8209: ClubCMS: rMemberRegistration: update the styles so that the captcha won't be partially hidden
- Add: Live: PGA PDP control
- Fix: WarehouseBuilder: A bug in the dim_CMember script caused DateId holes in the data if multiple consecutive rows were eliminated due to the same value updates.
- Fix: Crashbug when no payment types present.
- Mod: ClubCMS: Membership Application Payment and Payment Confirmation: redirect to the membership form page if the page is accessed directly (without valid parameters)
- Mod: API: Hole Scores: Return ActualGross and AdjustedGross values as null if they are 0 or less.
- Mod: ClubCMS: Membership Application: Email Address textbox: used TextMode="Email" to validate the email address
- Mod: ClubCMS: Membership Application Form: added an asterisk beside the label of the required fields
- Mod: ClubCMS: Membership Application Form: used client side script to show / hide the Membership Number field
- Mod: API: ActualGross value wasn't correctly returned from list-counted-period-scores.
- Mod: API: Added ActualGross column to wa_GetScoresWithinCountedPeriod output; need this to detect adjusted gross scores in list-counted-period-scores.
- Mod: ClubCMS: CWMembershipApplication: trim Gender value
- Mod: ClubCMS: Membership Application: updated message/text; added link back to the form
- Mod: ClubCMS: Membership Application Payment Confirmation: updated message/text; added sending of email notification to the applicant
- Mod: ClubCMS: AddNewMembershipApplication: populate the StatusDate field as well when we insert into CWMembershipApplication
- Mod: ClubCMS: Membership Application Payment Page: updated styles; updated the TBTransaction insert script to include IsPurchase and TransactionFee
- Mod: ClubCMS: Membership Application Payment Confirmation: updated the messages to display; completed the update of the TBTransaction record (DPS fields)
- Mod: Subs: Default new invoice schedule to default from member record's DD payment schedule(Sprint Item# 492)
- Mod: Task#1002 - Display DD Export batch id.
- Mod: Subs: 1) Display updated amount totals when a subs line item is added/removed or the amount has been updated. 2) Allow manually added subs line item to be brought forward to the new category if its not linked to the previous category.
- Mod: ClubCMS: Membership Application Payment: added the transaction fee to the amount due
- Mod: ClubCMS: Membership Application: just added comments
- Mod: ClubCMS: Terraces3: added MaintainScrollPositionOnPostBack page property
- Mod: ClubCMS: rMembershipForm: updated the success message to add a link button to "Submit another application"
- Mod: sql: CWMembershipApplication: added columns
- Fix: #7738 Removed previous hack done for Warkworth while they were using 2 payment types for their terminals.
- Mod: ClubCMS: TournamentRegistration: added bootstrap btn classes to links to make them more obvious
- Mod: Public: sql: oom_GetStandings: derive the EventId from the Gender. This fixes the OOM widget (which used to return an empty result).
- Fix: Public: OrderOfMeritStandings: handle null EventId (when the user goes straight into the player breakdown, Event ID session value could be null)
- Fix: Use QueryAsync for this async method.
- Mod: Moved BulkEmail from using WCF as a webservice client back to old school Web References.  WCF doesn't seem to want to be SSL offloaded, causing all sorts of grief with namespaces.  I've researched this and tried a few things to correct it, but to no avail.  We should move to REST services anyway, so I've just patched this for now.
- Fix: BulkEmail: fix the previous commit; removed tags from exception message
- Add: Bulk Email: updated DotGolf logo
- Mod: BulkEmail: modify the result of HasProduct to return the details of the exception, instead of just a boolean. HasProduct is the first call to the API, and if it returns an error, we need to know the details of the error.
- Mod: Changed API namespaces - suspect this is causing issues with BulkEmail?
- Fix: #8168 String or binary data would be truncated error due to a player name longer than 100 characters.
- Mod: ExtQuery: Column Aggregates are now formatted using their column formatter instead of just displayed raw from the datasource.  Practically this means reports with group footers, using currency values, will now have properly formatted totals.
- Add: ExtQuery: Checkbox parameter added.  This is sent to backend queries as a boolean (bit) parameter.
- Fix: Live: Renewals query - broke it with the last commit for this file. The SubsDirectDebitBankAccountNumber is only required if we're querying DD only members.
- Fix: Removed PRINT statement.
- Add: try..catch to make this thing safer.  If the ExternalSystemId update fails it's not ideal to crash out the whole sale, leaving it an inconsistent state.
- Mod: Link AXAccountTransaction lines up with their external system ID even when we're using the DotGolf Checkout.  This is only applicable for Vend right now since our POS is not integrated with Kounta (yet).  This should work in both the POS and the Subscriptions Enter Payments areas.
- Add: API: list-counted-period-scores/{passportId} endpoint added.
- Mod: ClubCMS: AddNewMembershipApplication: pass along the membership type name and a zero amount (coming from the old membership form controls).
- Mod: ClubCMS: new Membership Application Form: comment out pre-population of form with test data
- Fix: Found an error in the unit test which was exposed by the new logic in live_GenerateOrUpdateCompetitionRoundSegments to validate course-marker pairs.
- Fix: ClubCMS: show the cart checkbox (the last change affected the way it was being "un-hidden" -- the js selector was looking for a "tr" element, but this "tr" element is now a "div")
- Fix: #8143 live_GenerateOrUpdateCompetitionRoundSegments: If you copy an old competition, sometimes an incorrect CourseId could get set on the CompetitionRound table (one that doesn't match the specified marker).  This fix will stop incorrect (mismatching course-marker) segments from being created. I've also introduced a hard fail when live_GenerateOrUpdateCompetitionRoundSegments tries to insert a marker that doesn't belong to the corresponding course - that should flush out any remaining bugs.
- Fix: NullReferenceException caused by null invoice URLs.
- Mod: Removed the automatic ScorecardScanImage redirect as all the different Live endpoints should now serve up the same results, given we're using Redis as a backplane.
- Fix: A condition where, if the scan image ping happened at the wrong moment when a new image request came in, the response thread would go into a spinlock and eat 100% webserver CPU.
- Add: #7663 Vend+Xero: Function (part of XeroSync) which will look at incoming Vend Register Closure invoices.  This will consider payments attached to the invoice, and any payment that is coded to the "From" account code (as per the settings), it will recode to the "To" account (by deleting and recreating the invoice).
- Mod: Missing file from LogMeIn-TeamViewer update in Connector.
- Fix: Live: Renewals query: added a condition that a ClubMember has to have a SubsDirectDebitBankAccountNumber if we're querying DD members
- Mod: Vend: Forgot to commit this .js addition.
- Add: API: new profile/{passportId} endpoint to get details for other members.
- Fix: Typo - trailing </b> that shouldn't be there.
- Mod: Changed out "Run LogMeIn" button on kiosk in favour of a "Run TeamViewer" button.
- Add: Tampermonkey script to stop Vend doing cash sales for house account credit (without adding a customer).
- Fix: #8142 Problem caused by moving things into /Subs/BulkOperations; these were missing absolute paths.
- Fix: Live: TabRenewals.aspx: js: updated js "for loop" syntax
- Fix: Subs direct debit instalment date calculation didn't take into account periodic subs with durations shorter than 12 months.
- Fix: #8127 Another occurrence of #4278 (another fix done in rev 22273).  Changed from Passport.NonAffiliate to Passport.NonAffiliateIncludingDeleted.
- Fix: API: Kounta: Oops, missed committing part of this refactor.
- Mod: Kounta loyalty actions: Use a Redis cache of products by tag to find which products are top-ups and which are eligible for discounts.  This cache is rebuilt on demand when it doesn't exist, and kept up to date by listening to the products webhook (in Live).
- Add: Kounta product webhook listener to keep product tag cache in Redis up to date.
- Add: MEMBER_DISCOUNT_ELIGIBLE_TAG constant into KountaLocal.
- Mod: API: list-friends: Send LastScore as null if there is no last score.
- Mod: Org: PGA tax ststement report: if the position is 999, don't display a rank. We use this value for withdrawn players.
- Mod: Org: Prizes: show message after save
- Fix: Org: PGA tax statement report: exclude deleted RSResultPrizeMoney records from the query
- Fix: Org: PGA prize money split: allow saving of prize money for withdrawn players with manually entered amount
- Fix: Org: PGA prize money: replace parseInt with parseFloat to consider decimal places
- Mod: Kounta: If you have discounts enabled (you're The Mount), we don't let you pay on account when you've only just added the customer.  This limitation is because of discounts that have not been applied yet at this point.  You have to save the customer first, then tap on their name again in order to see the discounted amounts.
- Fix: KountaSync.ashx: Increase script timeout as we're getting killed by ASP.NET; GetOrders will try to resume on a context that doesn't exist anymore, and that will kill the app pool.
- Mod: Added try..catch in KountaSync.ashx since that seems to be the thing taking out the Live app pool.  Logged these exceptions for investigation.
- Fix: Found the exception below in the logs - suspected reason for app pool recycle.
- Mod: Changed GetOrdersUpdatedSince to use a synchronous implementation of HttpClient.Get() so that we don't have an async-sync wrap.  If an exception happens in the GET our app pool was getting killed - at least this is the theory.
- Mod: Disable Kounta member discounts code - it's causing a race condition in Kounta resulting in 19% discounts on some products in some timing scenarios.
- Fix: Kounta: The products endpoint is paged and we forgot about that.  Adjusted to page to get all the results.
- Mod: Try and update order price_variation before we do the lines; to try and get around race condition.
- Mod: Allow updates to the ExternalSystemId column on the AXAccountTransaction table - when we checkout we store a temporary ID here and update it once the sale is complete.
- Fix: #8102: Live: the custom End Date was actually being saved. It's just the client-side script that was overwriting the custom value.
- Mod: sql: Toro result query: updated the week number to start with 1
- Mod: sql: oom_GetAvailableScores - this fixes the issue reported by Phil wherein the OOM Add Scores page throws an error because we used to not allow scores to be added to multiple OOM Tournaments.
- Mod: ClubCMS: rMembershipForm: included the message in the control's main div, used bootstrap css class
- Add: Vend: When we detect a register closure we now link sales between the open/close dates up to that closure.  This will allow us to make the Member Account Reconciliation report much more concise and easier to relate to items in Xero.
- Fix: #8118: Live: Competition Registration Answer Stats page: exclude the answers of removed players
- Mod: ClubCMS: rMembershipForm: hide/show the membership number text field using client-side script instead of server side (with postback). Added an asterisk beside the label of a required field.
- Fix: Kounta tampermonkey: Question marks were still eluding our filter.
- Mod: ClubCMS: added postback trigger for cbMemberOfOtherClub; reverted revision 27089
- Add: Tampermonkey script to fix the compatibility issue between Kounta and our membership swipe cards.  At least until Kounta comes up with a fix for handling things with semicolons in them.
- Mod: Public: updated the DotGolf links to point to http://dotgolf.co.nz
- Mod: Kounta: Apply hack to set a discount on orders that come in via the Loyalty Actions endpoint.  Kounta does not automatically apply promotions to orders sent to us, so we ended up paying the full amount instead of the discounted one - overpaying the order and putting things out of balance.  To get around this, we disable Automatic Promotions by sending 0.99999999 for the order price_variance, and then calculate and apply our own discounts (taking into account the member-discount-eligible tags that we've set up) to the individual order lines.  We then adjust the order total and render out the correct payable amounts.
- Mod: ClubCMS: rMembershipForm: just enclosed the entire control in a div, with class name (existing CssClassName property, which was just not used)
- Mod: ClubCMS: Membership Application: update the transaction record after payment
- Add: API: Add new API endpoint to allow adding a friend for the current authenticated player.
- Fix: Kounta order line quantity is a decimal, not an int.
- Fix: Missing WHERE clause in Invoice Email select caused the wrong email address to be returned for outgoing invoice emails.
- Mod: Bulk Email Invoices: Added hidden query string parameter (DirectDebit=true) for filtering only on direct debit invoices, as this is the case for Mt Maunganui. Mod: If no invoices match the from/to date range, show a message to that effect instead of an empty grid.
- Mod: GOTG: Updated the banner to "bye winter"
- Add: GOTG: "Bye winter" home banner
- Add: Kounta: Order refunds were not implemented in our webhook code.  This is now built so if you refund an order to a house account from Kounta it will go back onto the member's account in DotGolf.
- Fix: Vend ticket https://support.vendhq.com/hc/requests/317453  We were miscalculating the total sale amount if there was an online payments component to the sale.  The totalPrice did not include the online component, which means the total amount for the sale in Vend did not match the sum of the lines.  This caused Vend to go berzerk and put a massive total into Rounding Errors in the Xero closure invoice.
- Fix: Timeout on VendSync.ashx increased to 2 days.
- Fix: Vend: If a product doesn't exist at time of import, skip importing the sale line.
- Mod: sql: Role insert record: CourseStatus
- Mod: Live: Added a Course Status Role / Asset Group so that a user could be assigned access to this only in DotGolf Live (without having access to the entire settings area).
- Mod: Be less chatty in the debug log when deadling with unresolvable customer_id values from Vend (common for older transactions). Mod: Handle deadlocks more gracefully by re-trying the import for the affected sale.
- Fix: VendSaleProduct table contains deleted line_item rows as I didn't realise Vend sales could change once they had been created.  Modified so deleted line_item rows are marked with a deleted_at record.
- Fix: Xero: Invoice interface was passing the OUTPUT2 tax type even for expenses on invoice line items (eg. debentures at Mt Maunganui).  Modified so that we pass no tax info through for negative amounts.  We could technically do this for all items, but this is dangerous to implement without further testing.
- Add: Subs: Bulk Email Invoices functionality added.  This lets a club find a list of invoices that were created between two dates (optionally excluding those that were already emailed out), and allows the user to email the invoices out as a batch.  If members do not have email addresses present the new page also allows the invoices that could not be emailed to be printed as a single PDF.
- Mod: Cleanup: Moved SubsBulk* pages into /Subs/BulkOperations folder.  Tidier than leaving them in the root.
- Ignored some stuff.
- Ignored some stuff.
- Fix: Live: Shared Subs code: ComputePaymentScheduleInfoForDirectDebits - subtract one month on the computation of the invoice last instalment date
- Fix: Live: Renewals: corrected element selector; toggling between hiding and showing the schedule dropdown control; corrected the last div tag on the page
- Mod: Live: Subs Renewals - renamed "Invoice Date" to "Invoice Document Date" - renamed "Invoice Due Date" to "Invoice Due Date or 1st Instalment Due Date" - added a "Get members on Direct Debit only?" checkbox and a Schedule dropdown to allow clubs to search for DD members only. Hide the dropdown on load. If it's not checked, it gets all members, including the DD members. - in the search results table, added a "Direct Debit Schedule" column. - ComputePaymentScheduleInfoForDirectDebits - subtract one month on the computation of the invoice last instalment date.
- Mod: Live: Expected Renewals Report: BuildSubsRenewalData: null value for the Schedule ID
- Mod: Shared: LoadMemberDetails: return SubsDirectDebitScheduleId
- Fix: #6834 Eclectic totals were calculated as NULL for 9 hole eclectic competitions.
- Fix: #6834 Public site was not displaying Eclectic competition total values. Mod: Proper cased member display names in results.
- Mod: sql: added SubsDirectDebitScheduleId to CMember table, NonAffiliate table, SubsRenewalData table, and ClubMember view
- Add: Warehouse: [Committed on behalf of David] New configuration files to allow Staging to build.
- Fix: Warehouse: [Committed on behalf of David] fact_Score was building ClubSID and RegionSID based on the CapturedByClubId from stage_Score.  This is incorrect and should have been the club the score was played at.
- Mod: Live: Members: Membership Tab: added saving of SubsDirectDebitScheduleId (this is a new column in CMember and NonAffiliate tables)
- Mod: Live: Shared: - Added a PopulateSchedule method for the Schedule dropdown lists - Updated BuildSubsRenewalData to allow saving of the new column: SubsRenewalData.SubsDirectDebitScheduleId
- Add: Logic to calculate direct debit instalment schedule dates for a member.  This is part of the Process Renewals area for which Grace is building some UI.  Once that is completed I will test the logic.  I've started on a unit test (included) but because the core logic is all inside DotGolf Live I can't get to it to test :(
- Add: Experimental Kounta check-in method - not used at present.
- Fix: TabRenewals can also change the category of a member.  When this happens we should be updating the category tag in Kounta, so now we invoke the hooks to get this done.
- Mod: Kounta: refactored hook so we construct a ClubMember instance in one place; that way the data is only ever passed in one format.
- Fix: We didn't get rid of old Category_ tags from Kounta when a member's category is changed in our system.
- Mod: We now send IsMember and Category_xxx tags along with members going to Kounta.
- Mod: Improved Kounta member sync process; now we have a progress bar and we can cleanly interrupt the sync process if we want to (Stop button).
- Mod: ClubCMS: rMembershipForm: added saving of the Membership Type as well to CWMembershipApplication table
- Mod: ClubCMS: - Membership Application (with payment) controls: allow payment on the online membership application form (to be initially used by Takapuna for their handicap membership) - AddNewMembershipApplication: added saving of Membership Type and Amount
- Add: Shared: Data: CWMembershipApplication
- Fix: #8057 Same problem for course fees.
- Fix: #8057 Avoid reversing the payments from Vend when closing a sale that was previously paid for.
- Fix: #8057 Stop the POS from charging a player twice for the same scorecard (if the SCA is used to reprint a card it shows up in the POS again - allowing the operator to checkout again for the full total).  Now the total is adjusted to exclude the already paid amount.
- Add: ClubCMS: Membership Application with payment: initial commit
- Add: ClubCMS: added the missing css file for the rCategoryNameLabel control
- Fix: The list with Xero contacts was limited to the first 100 due to API paging.  Turned off paging.
- Mod: Kounta: Handle customers that are deleted from Kounta a bit better - we don't delete the member from our system, but we do delete the linkage from PassportClubExternal.  That way, when the user updates the member in our system, they are pushed to Kounta as a new record, not an update to the existing deleted one. Add: ClientID to Kounta settings area for safety checks. Mod: Improved error display in TabMember when something goes wrong with Kounta. Mod: Send an encrypted unique email address to Kounta instead of a blank.  This will let us do an email proxy in the future if we want to, and also keeps Kounta happy because every customer will have an email address. Mod: We're smarter about phone numbers now, sending mobile, then home, then work in order of precedence. Fix: Don't clobber tags added from Kounta - no doubt clubs will want to use customer tags for their own purposes too. Fix: Kounta #251605 consistency problem with how tags are returned to us - we parse both formats now.
- Add: API: Return profile image thumbnail from list-friends. Mod: API: Optimised profile image thumbnail code for performance; we no longer need a Member object to get this.
- Fix: API: Unexpected null value in list-friends caused a crash.
- Mod: ClubCMS: Global.asax: just added an "or" condition when the page is not found
- Mod: API: Optimised Loyalty Actions endpoint for Kounta.  This is down to approx 350ms in dev, but with the Kounta delays added we're looking at ~1.8s end to end.
- Mod: ClubCMS: If the url contains "/welcome/index.mhtml", redirect to the root "/". "/welcome/index.mhtml" is used by MiClub. Old users may be auto-redirected to that URL when they go to the root URL of the club website e.g. "www.miramargolfclub.co.nz/welcome/index.mhtml" redirects to "www.miramargolfclub.co.nz" unless the user clears the browser cache.
- Fix: #8048 If you reinstate a lapsed non-affiliate/social member and change their computerno to something else, the new number does not stick and it reuses their old number.  This commit implements the ability to change the number and also introduces a safety check to ensure you can't assign a number which is already in use by another membership.
- Mod: API: Return HoleScore.AdjustedGross value in addition to ActualGross.  As part of this I've moved the AdjustedPar calculation from the Results ScoreLogicPar class into the Marker class; this is a more sensible and re-usable place for this to live.
- Add: Client ID into Kounta Settings area so we can see which one is being used in Staging.
- Mod: API: Return 400 error in case of an exception; hopefully Kounta handles this a bit better than spinning forever.
- Mod: API: Try to trigger a Kounta error bar.
- Mod: API: Return error status code to see if this triggers a Kounta error bar.
- Fix: Kounta loyalty actions: Return error array if there is a problem loading up customer details.
- Mod: #8017 Default IsGST and IsOnceOff from Item table when adding new club items in subs settings. Add: DefaultAmount and DefaultCode columns added to Item table, and these are also populated into ClubItems when they are added. Mod: Moved commonly used items (those with DefaultCode values) to the top of the Add Item box, and ordered them alphabetically.
- Mod: ClubCMS: Course v2 control: added the marker name to the div and table class so we can reference them specifically through CSS. Some clubs prefer to hide some markers from the Course page on their club website.
- Add: API: IsCurrent flag added to ScoreRec and list-counted-period-scores endpoint to make the chart rendering a bit easier.
- Add: ClubCMS: sql: new control and control properties for Toro and the responsive Contact Form. This has been run against prod's NZ1.
- Mod: sql: insert "POS" role into the Role table. This would allow us to hide the "POS" menu item from certain users e.g. nzgsupport
- Fix: #8003: live_GetUnallocatedCreditNoteCount sp: added left join to CreditNotePayment table so we could consider and subtract the refunded credit note amount. This has been run against prod's NZ1.
- Test commit hook to Jenkins.
- Test commit hook to Jenkins.
- Mod: Updated URLs to new Jenkins instance.
- Fix: #8003: Live: Unallocated Credit Notes Report / List: Join up the query with the CreditNotePayment table so we could consider and subtract the refunded credit note amount
- Fix: ClubCMS: Due to an overzealous LIKE statement, dotgolf.co.nz rendered out tgolf.co.nz because of the overlap in names.
- Mod: Changed out LogMeIn support links for TeamViewer ones.
- Mod: Live: Club competition entries report: added mobile number under the name
- Add: #7995 New scorecard format for Titirangi.  I used the existing A5_LargeAd report format because Sylinia showed that to them and they were happy with the way it looked.
- Mod: Live: Renewal page: show the SPF Check / Email Status widget (if the club needs to configure their SPF record)
- Mod: Live: SPF check message: updated border color
- Mod: Live: updated SPF check message (this widget appears on the renewals page)
- Mod: Live: Event: Player Registration list: removed unnecessary script which was mistakenly added in the previous commit
- Mod/Fix: ClubCMS: Competition Registration form: indicated the price associated with the registration question; hide the questions if the user has registered already
- Fix: Takapuna's refunded bookings are no longer paid across to the club, so I reverted the SQL change from rev 26561 which leaves deleted bookings on the Tee Booking Green Fee Detail report.
- Mod: Org: Email List page: Drafts table: Show only top n results
- Fix: Live: Bulk Email recipients: Competition Entrants query: exclude entrants which have been removed / deleted from the competition
- Fix: #7986 Changed Scorecard Scan Image retrieval mechanism away from semaphores (which depend on running in the same app pool) to Redis lists and pub-sub.  This gets rid of the spin locking and will work the same across Live, Edge and CNApi regardless of where the client is connected to.
- Mod: Live: Event: Player Registration list: added a "Details" link which allows the admin to view the details of the registered player.
- Mod: Live: Check for the Course Status control in the club website if the club has a CW product
- Mod: Slicer: Forgot to commit this mod previously - this imports AXAccount transactions into Slicer for payment.
- Mod: Removed some compile info messages.
- Add: Adweb: Ability to delete non-affiliates (casual golfers) from the records.
- Add: API: Parent Score is now also returned when you call score/{scoreId} for the child score in a combined score pair.
- Mod: Live: SPF check message: updated text and styles
- Mod: API: Unified ScoreRec class to a single implementation per Ruben's request.  This breaks a few of the API methods as the format has changed, but I'm working with Ruben to release this at an agreed time to minimise disruption.
- Fix: #7912: keep the banner positioned at the center (for wide screens)
- Mod: ClubCMS: Online Membership Form: added css class to the membership type dropdown (just missed it before); renamed the labels--Address Line 1 and Address Line 2
- Mod: Allow Takapuna to print complimentary-only green fee cards from the SCA to help them get around players who enter incorrect details into paid bookings on golf.co.nz.
- Mod: #7766: Live: User Permissions page: added "POS" checkbox, which will appear only for clubs with the VEND or KOUNTA product. If the user has the "POS" Role or is a super admin, "POS" will appear on their menu.
- Mod: Public: remove Hertz swf animation
- Fix: ClubCMS: responsive contact form: fixed layout (making it more flexible to style)
- Mod: Live: Permissions: - Added "POS" role (ID 50) so that we could hide / show the POS link in the menu for each user - Only super users (CanAdministerClubUsers) or users specifically with POS role would be able to see POS on their menu
- Mod: ClubCMS: image slideshow control minor mod: added CSS class to the div containing the toggle link
- Mod: ClubCMS: responsive image slideshow: improve UX of edit area; hide the edit area by default
- Mod: ClubCMS: responsive image slideshow minor updates: updated text and button style
- Fix: ClubCMS: Contact Form: fixed the layout, allow to set a custom control title
- Fix: ClubCMS: Toro Email Template: fixed the styling of the ordered list
- Mod: ClubCMS: Join Toro control: updated message styling
- Mod: ClubCMS: Join Toro control: updated error message / text
- Mod: ClubCMS: Toro Table Ranking: updated css class
- Mod: #7897: Live: Bulk Email: Put the Manager email address at the top of the "From" list
- Fix: ClubCMS: contact form submission
- Mod: ClubCMS: Contact Form: updated the default message to display after submitting the form
- Mod: ClubCMS: Join Toro control: added form validation and show message after a successful registration
- Add: Code to log the request duration for Kounta loyalty actions endpoint - we're seeing some slow responses here and unsure whether it's us or Kounta.
- Mod: Public: add Hertz flash animation (ball smashing the screen). The animation is shown once only unless the user clears the browser cookies.
- Fix: Public: Removed the html formatting done on the Casual Golf Central Member Code, because this isn't rendered properly on some email clients (shows as html code)
- Fix: ClubCMS: Tee Booking Login: Register link: corrected the next parameter
- Mod: ClubCMS: Toro email template updates
- Mod/Fix: ClubCMS: fix the issue where the Category Name disappears on postback; also updated the way the css is referenced
- Mod: ClubCMS: Competition List: updated date format
- Mod: ClubCMS: Join Toro control: minor updates
- Add: ClubCMS: Toro: Rank Table control (leaderboard)
- Add: NZGALevy table HomeClubId column; this is to help calculate peoples' home club if they have never changed from the epoch.
- Fix: #7878 Voided transactions from Vend (eg. when you create a sale against a customer and then DISCARD the sale) were applied to our accounts as normal sales incorrectly. Fix: Same problem with Loyalty applied to account; if we discard a sale in vend we should not apply the loyalty (in fact we should reverse it if we can find the original transaction).
- Mod/Add: ClubCMS: added Join Toro control; added an email template (txt) for the 2017 Toro entrant email notification; commented out code not used in the Join control
- Fix: Vend: If a resigned member was updated in DotGolf Live, the sync to Vend failed because the passport could not be located.  Also the surname was updated removing the "(resigned)" tag.
- Fix: Kounta API error handling around payment type names.
- Mod: Updated redemption URLs.
- Mod: Moved from ASP.NET Webforms to Generic Handlers for Kounta loyalty/redemption actions - this way the HTTP exception outputs don't interfere with the JSON.
- Fix: Avoid the ThreadAbortException that is thrown when Response.End() is called.
- Add: API: search-for-friends endpoint.
- Add: Friend search code adapted and simplified from the My Friends page in golf.co.nz.  I wanted to refactor the Friends page to also use this, but it turned out too messy so I just left it for now.
- Add: AXAccount topup imports for Slicer.
- Mod: Improved member accounts display - added message for when member has no accounts on record; rather than displaying a blank, collapsed screen.
- Fix: Crashbug when Member Account Activity report was loaded up with no member preselected, or a member selected who does not have any accounts.
- Mod: In the POG if you use the shortcut button to cancel a booking, warnings are not shown to the user and there is no opportunity to override warnings.  Fixed so now the user gets a confirm box so they can override warnings.
- Mod: Show a warning when cancelling a past paid booking (in PurchaseRefund mode only).
- Add: Slicer: We can now slice AXAccount top-up transactions to clubs.
- Fix: ClubCMS: just corrected a typo error
- Mod: #7852: Live: SPF Check message: updated message and style (underline)
- Fix: Slicer rollback didn't roll back Vend Transactions.
- Fix: Logic bug in MyAccount caused house/loyalty accounts to disappear for multi club members.
- Fix: Score permalink encoding wasn't base64 decoded first; caused an error when decrypting the ID.
- Add/Mod: #7852: Live: - Added a widget which displays if the club needs to configure their email. The widget is displayed on on the subs renewal page. - The warning is also displayed in the Bulk Email area beside the "From" field - I used the SPF check method created by David
- Add: API: Exception handling and logging for Kounta loyalty actions/redemption endpoints.  This will allow me to find out what is happening when Kounta hangs when looking up the actions from our API.
- Add: DW: dim_CMember included HomeClubId in index,.
- Fix: Oops, conflicting script number.
- Add: DW: Index for performance of fact_Scorecard queries.
- Add: API: PermalinkURL added to score endpoint.
- Fix: Live: GetEmailSenders: exclude empty email address
- Add: Public2012: Parsing of score permalinks.
- Mod: sql: Instalment table index
- Fix: ClubCMS: corrected the spelling of a css file (there was an extra "o")
- Add: API: Ability to add, update and delete comments on scores, as long as the user has appropriate permissions.
- Mod: ClubCMS: responsive Course Status: added CssClassName property; removed the title, add/remove css classes
- Add: API: Score comment permission flags.
- Add: API: Score comments are now included in the GET score/xxx endpoint.
- Mod: Resurrected the POS full screen mode done by Marco and added it to the tee booking (POG) screen burger menu.  The state is stored by a cookie so it will stick - perfect for Takapuna's start sheet display TV.
- Cleanup: Updated all Adweb packages to latest, got rid of a whole heap of compiler warnings.
- Fix: Path issue with new ARSoft package.
- Add: Missing packages.
- Mod: MyAccount: Refactored the UI a bit so it's easier for users to understand - less cluttered and less information at a time.  You can now select the account type (including the subs account) from a single combo, and if you're only a member at 1 subs/ax club, you don't get a club select combo, only a club name label.
- Add: #7827: GOTG: just forgot to add the NZG logo to the project. This logo is used on the receipt.
- Fix: Public: AXAccounts: Allow users to open account types on demand and top-up online if the account type allows it. Fix: Public: Changed more references from LTY product to AX. Fix: Public: MyAccount page no longer crashes out when user navigates straight to it without first logging in.
- Add: SPFChecker class to allow us to check whether a club's domain is properly set up for us to send email on their behalf.
- Mod: Slicer: Green Fee Takings Report (aka the Slicer Email) updated to exclude amounts refunded to credit cards. Ignored some files.
- Fix: Slicer: Refund transaction fees for PurchaseRefund clubs were not calculated correctly due to an error in how the TransactionFee column was interpreted.
- Fix: Slicer: Reversing a payment batch did not work.
- Add: Script to insert LGU Net competition type.
- Fix: LGU Net calculation should only subtract an 18th (or 9th) of the course rating per hole.
- Add: LGU Net score logic which uses the Net result minus the course rating for LGU results.
- Mod: API: Changed to 500x60 ad format for these ads.
- Add: API: Example ads for My Scores screen.
- Mod: #7827: GOTG: email a receipt along with the vouchers
- Add: #7827: GOTG: Added the html template for the receipt pdf (which is emailed along with the voucher pdf after purchase)
- Fix: Comparison error caused Club Products header link to take us to the dev adweb instead of the live one.
- Mod: GOTG: updated the banner for fathers day
- Mod: ClubCMS: rPageNameLabel: added the missing CssClassName property (this was defined in CWControlProperty for this control)
- Mod: Live: Create a "Subscriptions" Role, use this to make the subscriptions area granular (this is just the start of it; in the future, we will modify the permissions for the subscriptions-related settings, and the Membership options in the Member Details area).
- Fix: Look for "account" or "member" in the contact name when importing house account topups via Xero - otherwise we end up calling the Xero BankTransaction endpoint too frequently resulting in API rate limits (we only have 5,000 calls per 24 hours).
- Mod: sql: insert "Subscriptions" role also
- Add: Instalment table non clustered index
- Fix: Org: Finalise: BindPaymentsAndChargesTable: handle null values
- Add: TBTransaction Refund support for PurchaseRefund clubs.
- Mod: Introduced $0.50 fee for completely refunded TBTransactions for clubs using PurchaseRefund payment model.
- Fix: Transaction Processor did not process refunds when in unattended mode.
- Add: Slicer: TBTransactionRefund importing and merging to ClubTBTransactionRefund table. This is a partial commit towards being able to create the payment in gs_CreatePayment, but need real transaction data first.
- Add: sql: Contact role insert: this has been run against NZ1 and NZ2Stage
- Mod: ClubCMS: renamed the Username field label to "Membership Number" and moved down the login error message as well
- Add: Adweb: TXLine information is now shown on the scorecard view.  I built this some time ago but never tested and committed it.
- Add: SchemaVersion extended property.
- Fix: Live: Overdue Amount - return only with total amount greater than $10 - exclude members with negative invoice outstanding amount (e.g. Gulf Harbour)
- Add: UI for Subs overdue grace period setting (which controls when the kiosk will stop people printing cards)
- Fix: Instead of hard-querying the Setting table we should be using the class library, especially around default values and descriptions.  This means we don't have to script settings and any new clubs getting this product will automatically have the default values set.
- Fix: Instead of hard-querying the Setting table we should be using the class library, especially around default values and descriptions.  This means we don't have to script settings and any new clubs getting this product will automatically have the default values set.
- Fix: Get files from bin/, not bin/Release.
- Fix: Get files from bin/, not bin/Release.
- Fix: Get SVN revision from environment.
- Mod: SVNVERSION path removed - seems subversion is in the PATH for Jenkins anyway.
- Mod: Live: show Course Status control widget for clubs with the rCourseStatus control
- Mod: Live: Settings page: removed "Course Status" from the Settings page. Reverting Revision 26847.
- Mod: Live: Membership Overdue Amount: update the styling / add a light red background to emphasise it
- Add: Metadata updater script. Mod: build script updated to point to DEV.
- Add: sql: Setting record inserts - subs overdue warning grace period Add: sql: ClubStatus table - used to define the course status (e.g. Course is open, carts allowed, etc.)
- Mod: Live: Settings page: added a link to the Course Status setting page
- Mod: Live: SubNavBar: added Course Status to the tabs
- Mod: Live: Course Status: added description / text
- Fix: Live: Kiosk: updated the overdue membership message to "Please see a staff member to print your scorecard."
- Fix: Live: Kiosk: Go through the overdue membership amount check only if the club has the SUBS product
- Fix: Live: Kiosk: Moved the overdue subs check code out of the category check code (placed it there incorrectly)
- Removed delta.sql from subversion as it results from the build.
- Add: Scripted NZGreenFeeData from Prod.
- Add: NZGreenFeeData sql project.
- Add: Database folder for sql projects.
- Add: sql: ClubCMS: new control insert
- Add: ClubCMS: data-driven Course Status control
- Add: API: IsAdjustedGrossScore flag to list-scores endpoint.
- Fix: Live: Course Status widget: handle null course status
- Mod/Add: Live: added a Course Status widget on the home page, and a page to manage it. This is for clubs to easily update their course status (i.e. Course is open, golf cart allowed, etc.). The entered information will be displayed on their club website. On "On Par" sites this info will be in the footer area.
- Add: More logging of response data from Smartpay.
- Fix: Missed throw.
- Mod: Added exception logging around RegisterSale().
- Mod: Warehouse Builder: Update home clubs for the past unless we know the member has changed clubs.  This gets around the fact that we only have MemberHistory going back to the MemberHistory epoch.  Some members have been a member for 15+ years and have never changed home clubs, so we never set an IsHomeClub flag for them.  Example: select * from dim_CMember where membernid=245221
- Mod: ClubCMS: just added a comment / description of the control
- Mod: Downgraded to .NET 4.5 because I don't want to take DB4 to 4.6 right now.
- Fix: WarehouseBuilder: Do not copy json configuration files to output dir - Jenkins then publishes them which gets pretty confusing in Prod.
- Fix: Missed stage_NZGALevy from import json file - discovered in prod when updating publisher script.
- Mod: Warehouse: Export Member.ClubNo to enable us to tell the home club if it has never changed (since 2010).
- Mod: ClubCMS: rCompetitionList: added day name to the competitions round date
- Mod: ClubCMS: just added bootstrap css classes (alert, btn)
- Fix: ClubCMS: rCompetitionList: fix the condition which checks if the user is a NonAffiliate (this was previously returning an error when an admin is logged in)
- Fix: API: Blank advertising images being sent to clients.
- Mod: Changed all image URLs returned from Advertising endpoint to be absolute. Mod: Render PNG and GIF advertisements as their correct mime types, so that PNGs support transparency.
- Fix: #7773 Online payments were not being pushed through to Vend because of a logic bug.  In fact, I think if there were multiple offline payments on a sale, then any online payments would have been duplicated too.
- Mod: #7766: Live: create a new "Contact" role to allow making the permissions in the club contacts area granular. Only super admins or those with the Contact Role can access the contacts area. ThE NZG universal login "nzgsupport" will have this Role.
- Add: MyGolf API: ImagesController that deals with resizing/zooming advertisements.  At the moment it only loads ads from a local folder (/assets).  This is hopefully going to change into a more elegant, webfarm compatible image storage solution. Mod: Placeholder advertisements added for MyGolf Login and Dashboard views.
- Add: Smartpay: Enhanced debuglog logging added to Smartpay interface so that I can troubleshoot some of these timing issues for Warkworth.
- Fix: SQL bug that kept adding rows to the table variable when that shouldn't have happened.  This caused duplicate refunded amounts when bookings were cancelled and multiple transactions were in play.
- Fix: #7160: Org: check only the Payment Status of those who've registered online. Previously, it was considering also the manually registered ones (i.e. having null PaymentStatus), hence stopping submission of the form.
- Fix: Dammit, did not commit this green fee report fix earlier - for DPS PurchaseRefund clubs we show "uncaptured" bookings as part of the main report because they are immediately captured.
- Mod: #7766: Live: do not allow end users to create a "matt" or "nzgsupport" account. Message prompt: "User ID matt is a reserved ID.  Please choose another user ID and try again."
- Mod: Live: Club Settings page: just added a link to the Contacts page; placed it beside the CLUB DETAILS sub header
- Mod: #7766: Live: don't display the NZG universal login "nzgsupport" on this page
- Mod: Live: Added "Contacts" to the SubNavBar control
- Mod: Don't show the cancellation fee warnings when the transaction fees are charged to the club.
- Mod: Don't show the cancellation fee warnings when the transaction fees are charged to the club.
- Mod: ClubCMS: responsive Login: revert Register text to former value "New user? Register now."
- Fix: User books themselves and a friend, pays online.  Then they go in and cancel themselves out (using the CANCEL MY BOOKING button - doesn't happen when you set the player to "empty").  The ChargeMemberId/ChargeNonAffiliateId/ChargePendingRegistrationId values are not set appropriately, which caused a) the entire card transaction to be refunded (for PurchaseRefund clubs) and b) stopped the club from being able to authorise the payment (for AuthComplete clubs).
- Fix: User books themselves and a friend, pays online.  Then they go in and cancel themselves out (using the CANCEL MY BOOKING button - doesn't happen when you set the player to "empty").  The ChargeMemberId/ChargeNonAffiliateId/ChargePendingRegistrationId values are not set appropriately, which caused a) the entire card transaction to be refunded (for PurchaseRefund clubs) and b) stopped the club from being able to authorise the payment (for AuthComplete clubs).
- Mod: ClubCMS: rMemberRegistration: updated the panel CSS class from primary to default to make it more generic / grey
- Mod: ClubCMS: rename text from "PO Box" to "Mailing Address" making it more generic (e.g. Marlborough doesn't have a PO Box but have a mailing address)
- Fix: When requiring one payment per booking, the payer selection must always be turned on - otherwise the UI ends up in a state where the user can't pay for any bookings.
- Fix: #7758 Somehow it's still possible to mark sales as VOIDED in Vend.  Hugh might be doing this from the sales ledger I think? Fix: The system was vulnerable to duplicate transaction postings here - changed so that this works using AXTransaction.Reverse() now.
- Fix: In some cases the POG doesn't pass the TicketNo/TicketId value into ApplyBookingChanges, which causes automatic refunds not to work.
- Fix: Argh, did all the work to get the ticketId but then don't pass it into LoadBookingForEditing()!!
- Fix: wa_TBRefundCancelledPurchasesForTicket - simple typo stopped date comparison for today from working.  Also a break statement killed the while loop causing any further transactions not to be refunded.
- Mod: #7757: Org: Allow users to enter the Handicap Index for non-affiliate players (but only when the player is not in the draw yet)
- Mod: Org: Page Title
- Fix: Also sort out the TicketId problem in ClubCMS, same as Public.
- Fix: Should be CREATE, not ALTER.
- Fix: TB Refunds: Do not allow refunds to take place for past bookings (i.e. SlotDate is yesterday or earlier)
- Mod: #7753: Live: - Display "Please see the proshop before printing a scorecard." if the member has an overdue membership amount. - Also updated the GetOverdueAmount method to consider the grace period in the Setting table (DotGolf.Settings.Kiosk.Subscriptions.Overdue.GracePeriod). If there's no setting, the default is 90 days.
- Mod: Changed to subselect for @TicketId select.
- Fix: Corrected typo.
- Fix: Bug that causes no TicketId to be passed to wa_TBApplyBookingChanges when you use the "Cancel My/Entire Booking" links in ConfirmSlots.  This was because the Shared.LoadBookingForEditing call was not being passed a TicketId, only a TimeSlotId.
- Mod: Live: Player Details: show overdue membership amount with two decimal places
- Mod: Removed transaction as this is run from inside the wa_TBApplyBookingChanges transaction.
- Mod: Bye-bye DotGolf.Teebooking, it's been great.
- Mod: TBTransactionProcessor: Moved SLN file up a level per standards. Ignored user files.
- Mod: Transaction processor moved to own trunk folder.
- Mod: Transaction processor moved to own trunk folder.
- Mod: Transaction processor moved to own trunk folder.
- Mod: Transaction processor moved to own trunk folder.
- Mod: Transaction processor moved to own trunk folder.
- Add: Folder for Teebooking Transaction Processor.
- Mod: TB Refunds: Show transaction refunds in Adweb.
- Add: TB Refunds: New RefundProcessor class added to transaction processor.  This looks at the TBTransactionRefund table and posts all requested refunds to DPS once a day.
- Mod: Upgraded TransactionProcessor from .Net 2.0 to .Net 4.6.1. Removed Prod connection strings from App.config.
- Fix: TB Refunds: DPXCompleted typo.
- Ignored some stuff.
- Mod: TB Refunds: wa_TBApplyBookingChanges calls refund procedure to add TBTransactionRefund rows if needed.
- Add: TB Refunds: wa_TBRefundCancelledPurchasesForTicket procedure to add refund requests into the TBTransactionRefund table.  The TransactionProcessor will process these refunds against DPS.
- Mod: Live: Player Details: rephrase "Account Overdue" to "Membership Overdue"
- Add: TB Refunds: TBTransactionRefund table added; TBP code includes this when calculating previous payments received from a user.
- Fix: Cachebuster tags.
- Fix: After the last batch of Vend updates the payment gateway dialog is pretty ugly.  Updated our styles to work better with the new Vend styles. Mod: Better feedback while we're loading - otherwise user thinks we've crashed. Add: Enable ESC and ENTER keys to click Cancel/OK or Pay respectively.
- Mod: Use the Vend domain prefix to get the club ID, so we don't have to be dependent on keeping RegisterUIDs around for every register at every club.
- Mod: Use the Vend domain prefix to get the club ID, so we don't have to be dependent on keeping RegisterUIDs around for every register at every club.
- Fix: Transaction fee was not being initialised correctly in the PGA site due to a regression in rev 26381.
- Fix: Forgot to commit these files which relate to the mygolf/profile screen resolution property.
- Fix: Renamed some Id fields to be more consistent with PK naming.
- Mod: Increased the customer thumbnail size for Kounta integration.
- Mod: API Tester improved so we can have multiple presets pointing to different API endpoints - much easier for testing.
- Fix: Crash when loading member profile; caused by the HandicapIndexText field addition. Mod: Scale the profile image to the proper DPI for the device.  Default is 96dpi.
- Fix: #7730: Public: Verify member registration: the link didn't work without the "www"
- Fix: #7730: Public: Verify member registration: forgot to remove the end "</a>" tag (sorry)
- Fix: Org: UI: push down the main content using margin-top (part of the Title or even the New button is hidden under the menu--probably because of the recent css fix done for the menu)
- Fix: #7730: Public: Verify member registration: remove the hyperlink from the email--just add the long URL as is (like before) as it caused link problem (probably on some email clients only)
- Mod: #5727: Live: Bulk Email: - Commented out getting the email address from the Club table (Email, HCEmail, ProShopEmail, AccountEmail). These are not needed anymore as we're using the Contact tables for the club contacts. - Updated the GetEmailSenders method to add a new condition "ContactType.IsStaff = 1" to make sure we only pull the staff email addresses
- Mod: #7738 Hack implemented to keep Warkworth's bar and shop eftpos terminals apart for now.
- Fix: Error when posting sales to vend if Vend doesn't have an Online Payment payment type.
- Mod: API: Added HandicapIndexText properties where appropriate. Mod: API: Renamed USGA_NZCR to CourseRating, NZGA_Handicap to HandicapIndex and NZGA_Projected to ProjectedHandicapIndex.
- Add: API security to hide Swagger docs to those without authorisation.  At the moment we can whitelist IP addresses and issue special passwords; both configured via web.config.
- Mod: API: Upgraded to Swashbuckle 5.6 for better SwaggerUI.
- Mod: Added permalinks for Register Now and Forgot Password in www.golf.co.nz for the MyGolf app.  Documentation updated to include the URLs.
- Add: Org: logo
- Fix: Oops, clobbered a change in a previous script.
- Mod: Bulk Email: CreateBulkEmail: exclude Juniors in the member ("Database") bulk email sending
- Fix: Namespace conflict - Jenkins wasn't happy with this local variable name...
- Add: sql: ClubCMS: new control properties
- Mod: #6137: ClubCMS: Show the Register button even if the user is not logged in. This allows users / visitors to know that registration is open for the competition, and promotes the competition, too.
- Mod: Cleaned up old cash refunds prototype code - this ended up being built into the CreditNote.cs class so we don't need this separate implementation anymore.
- Add: Xero/AX: If a credit note is paid to the HOUSE account (or any other AXAccountType) and the membership number is put in the Reference field we automatically apply that payment to the corresponding AXAccount (opening one if one doesn't already exist).
- Mod: #7707: Public: removed "The First Tee" section
- Mod: ClubCMS: responsive Member Registration: swapped the two links, updated some text
- Mod: Integrated Checkout into the Subscriptions payments area. Fix: Loyalty percentage earned should be on the retail amount, not the line amount ex tax. Mod: Sync deleted flags to our system for products deleted in Vend. Add: console.warn if a product could not be located - usually indicating bad data in our dev database.
- Fix: POS: Handle change properly by posting a negative cash payment to Vend in this situation. Fix: Checkout: Do not offer account payment options if the tender amount would exceed the maximum charge allowed against the account.
- Fix: POS: 2 players – split – cash – refund, split button stuck on div2
- Fix: When paid members or visitors print from the kiosk, their cards were incorrectly marked as paid due to the sale being sent to Vend and received back via the webhook.
- Fix: MemberId = 0 error when printing and paying for non-affiliate cards through SCA/POS.
- Mod: ClubCMS: rCompetition List css: added max height to the lightbox pop-up
- Add: ClubCMS: Judgeford files: could be used for testing purposes
- Add: Explicit schemes for Swagger so that it works over https://
- Mod: Automatically opening accounts is now controlled by the OpenOnDemand flag on AXAccountType - so for special accounts we can control who gets them.
- Fix: Do not offer on-account payment methods for non-members.
- Fix: CLOSE button did not work for $0.00 sales.
- Mod: POS: Added a cancel button in the payment dialog (as long as no payment lines are present)
- Fix: Do not offer on-account payment types to visitors. Fix: Removed redundant check for competitions - we can now process sales for other conditions than just comps (eg. course fees, green fees) Add: Implemented book-and-print mode. Fix: Should not mark a sale as paid for visitors paying cash.
- Fix: POS: Kiosk would not let members pay on account unless they already have an account.  Also refactored to use ScorecardWebService account code when retrieving accounts/balances. Fix: Kiosk: Possible bug where payment information from previous cards printed could bleed into a future player's session.  Cleared these out to be safe. Fix: Crashbug when trying to retrieve accounts for a non-affiliated player. Fix: Vend RegisterSale was hardcoded to AXACCOUNT payment type from kiosk. Fix: axaccounts payment method crash when loading up for a non-affiliate. Fix: On-account payments were being pushed to Vend as $0.00.
- Mod: ClubCMS: Member Registration improve UI / styles
- Mod: POS: New checkout flow integrated into POS, including powerfail/close recovery (incl EFTPOS transaction recovery).
- Mod: #7687: Public: auto-login the member on the club website after verification / setting the password
- Mod: #7687: Public: Encryption: added GetEncryptedCredentialsUsingPassport
- Mod: #7687: ClubCMS: auto-login the member / casual golfer if coming from a tee booking new user registration process
- Mod: Adweb: FileManager: added functionality to create a new subfolder under the selected folder
- Mod: ClubCMS: updated styles
- Mod: #7687: ClubCMS: improve this control so it could be used in golf clubs as well (initially, it was used on the PGA site) - Improve styles (bootstrap) - Show links for the visitor or casual golfer, and users wanting to become a club member. - After casual golf registration on the public site, the user is redirected back to the club website
- Fix: #7687: ClubCMS: update the source from"bookdotgolf" to "clubwebsite" to allow proper redirection after the verify / setting of password in golf.co.nz
- Fix: Removed Cast - this should be a string.
- Mod: #7687: Public: AttemptSocialRegistration: added new query string parameters (source and nexturl) to the verify link, which I basically copied from the verify link sent to members. This allows redirecting back to the club website after registration / setting of password.
- Mod: ClubCMS: responsive Login control: rephrase "New user? Register now!" link to "Already a member? Create your online login here."
- Cleanup: Removed unused EF code.
- Mod: #7686 Added hole-by-hole pin position support for scanning scorecards (requested by Boulcott). As part of this I had to rewrite the backend to the HoleDetail.aspx screen as that was still using EF.
- Mod: Connector: Upgraded to WiX Toolset v3.11 to fix Visual Studio 2017 build errors.
- Mod: MyGolf API: Added LatestScores property to mygolf/profile so that we can show the last 3 scores.
- Mod: Public: update the old references to Club.Email; get the club's generic email address from the Contact table (Contact Type ID 224)
- Mod: In Vend Settings, sync all payment types from Vend.  Add an EFTPOS code to known Smartpay payment types.
- Mod: POS: Removed Scorecards List (with remove/redo and delete options) - because this screen would allow a sale to be voided and not refunded, therefore causing financial inconsistencies.
- Add: [MAJOR] New DotGolf Checkout control.
- Mod: Handle the case of a Smartpay API exception with no response body (eg. a timeout)
- Mod: Moved RedisConnection to Shared.cs and refactored to get all connections from this new static property.
- Mod: Improved error messages returned from Smartpay when pairing terminals.
- Mod: ClubCMS: PGA registration: rephrase the subs overdue message to make it a little less harsh
- Fix: Calculation bug in the Course Variance report - forgot to take off the Course Rating.
- Mod: Org: PGA Trainee OOM: Scores query: include members from the Provisional category
- Mod: Increased timeout for VendSync.ashx - for initial syncs that take ages.
- Mod: Changed the default to be the dev API.
- Mod: Moved Smartpay API URL to Web.config file so we can set the dev boxes to "https://api-dev.smart-connect.cloud/POS" instead of the production URL.
- Fix: ClubCMS: convert Club.Latitude to string
- Mod: sql: create a generic club contact - use the manager's email by default for this new contact - use this generic contact for the three purposes: club website general email, enquiries recipient and online membership submission recipient
- Fix: Live: Club Contacts: handle empty generic club contact
- Fix: The reason Matt was getting those token expiry messages was that his Live session was still active but his JWT has expired.  This means he has to login again.  Instead of throwing the exception we now send him off to SSO to reauthenticate.
- Add: sql: ContactType and ContactContactType inserts; ContactType alter schema
- Mod: Live: updated DotGolf Live logo and applied the new stylesheet
- Add: DotGolf Live logo
- Fix: Missing cachebuster tag for this javascript file.
- Fix: Missing cachebuster tag for this javascript file.
- Fix: Missing cachebuster tag for this javascript file.
- Mod: #5727: Live: Club Contacts: display the generic club contact on the Contacts page
- Mod: #5727: Live: Club Contacts: Notifications Area: allow to select from existing contacts (club management / officers)
- Fix: Improved logging - when outside of an HttpContext we don't have a clubid - now we get that from the invoice instead.
- Fix: Null reference exception when trying to log stuff from HttpContext.Current==null context.
- Fix: #7657 AXAccount ledger code settings should not be visible to clubs without the AX and XERO products set.
- Mod: ExtQuery: Changed HyperlinkFormatter to inherit FormatString from StandardFormatter - now we can format the display text.
- Fix: #7656 Book-and-print mode on the kiosk was no longer working after the AXAccounts merge - due to a problem in the view code.
- Mod: #5727: ClubCMS: updated references to Club.Email, and use the Contact tables. - Membership Application Form submissions could now be emailed to multiple contacts
- Mod: Live: Club Contacts: remove the system contacts from this page (this was just missed in the previous commit)
- Add: Live: Club Contacts: - Added a "Notifications" link on the Settings pageMessage - This is where clubs could manage system contacts (uses the same tables as the club contacts, but without a Contact Person record)
- Fix: #7652 Looks like Cambridge has their block names without quotes, eg Open to ALL instead of "Open to ALL".  This query didn't work without the quotes - now it does.
- Fix: Payment Reconciliation Report was not taking into account the $2 fees that are covered by Takapuna GC instead of being charged to users of golf.co.nz.
- Fix: Save the resigned date in ISO date format.  Didn't notice this was an nvarchar(255) in the table.
- Add: Subs Import area to replace the spreadsheet we give to clubs to fill their balances and start dates.
- Fix: #7648: Live: Load sub items from category: updated the date condition (copying it from the Category.CategoryItems query) which uses the grace period.
- Fix: Debug Log Viewer didn't show initial search results on first load (without url filters). Mod: Flipped so that new entries appear at the top, not the bottom.
- Add: Sale date/time to vend sale import log.
- Fix: DebugLog troubleshooting - suspect the BuildManager.GetGlobalAsaxType()?.BaseType?.Assembly?.GetName().Name call is failing somehow - wrapped it in Try..catch.
- Fix: #7636 Problem when viewing nonaffiliate member details because of missing VendCustomerId column alias.
- Add: Index for performance - accidentally discovered this one while looking at a scorecards query.
- Fix: Performance issue in GetScoreCards() due to addition of LEFT JOIN for Passport (which has an OR in the join causing a clustered index scan on Passport)
- Mod: Club.cs: added missing existing Club columns
- Mod: ClubCMS: updated references to the Club Email as well as other Club details, using the already available Club object
- Fix: Make email a required field - without an email address Freshdesk automatically marks the ticket as spam.
- Mod: Show a console error message - book and print mode doesn't seem to be implemented with Vend yet.
- Fix: sql: order of scripts: populate the accounts and proshop after creating those content types (2271)
- Fix: This constraint wasn't quite right - removed RecordId and added ClubId.
- Mod: sql: PGA Trainee OOM: oom_GetAvailableScores_PgaTrainee: handle competition id 0 (this has been run in prod)
- Add: sql: populate ContactType table
- Add: sql: add new column "PriorityOrder" to ContactType table
- Add: sql: Contact, ContactContactType, ContactPerson tables: content population, getting the data from the Club table
- Add: Cachebuster tags to the POS for scripts and CSS.
- Mod: Changed SmartConnect back to Prod API url.
- Fix: Live: ClubContacts: ClubContacts query: corrected the query to include "c.DeletedDate is null"
- Mod: Removed loyalty settings from Vend Settings page - this is all controlled via AXAccounts now.
- Mod: Live: Club Details control: move up the percentage of completion (contacts)
- Mod: Live: css for validation error (e.g. highlight the required field in red)
- Mod: Live: Contact page: updated the form validation (to make it client-side, include checking if one checkbox is ticked, and add checking if email is valid); added Delete Contact functionality
- Add: Live: client side form validation
- Mod: Live: Contact: added required field validators
- Mod: Live: Contact: tick the contact type by default (based on the Contact Type ID query string param) when creating a new contact
- Fix: Live: Contacts: handle display of null manager contact
- Mod: Live: Member.cs: added GetOverdueAmount method which returns the account (subs) overdue amount for the member
- Mod: Live: highlight "Settings" in the menu when on the Contacts or Contact page; highlight "Love Golf" when on the Get on the Green page
- Fix: Duplicated scorecards in SCA due to boolean precedence error in Passport table join.
- Mod: #5727: Added "Contacts" link to the Settings page
- Mod: Live: When creating a booking or printing a scorecard, in the member details area, display the account (subs) overdue amount in red, if it's greater than zero. Just so that the proshop is aware of the account status of the member.
- Mod: POS: Hide products until a card is selected (this speeds up the load process). Mod: POS: Removed the GetSettings webservice call and inlined it into the page; we have too many webservice calls going off at the same time, and Chrome is throttling them as they are all going to the same domain.
- Fix: POS: The member resigned hooks were not working due to the passport code requiring a live member.  So no passport was found, which means no (resigned) update was happening in either POS.
- Mod: #5727: - ContactType.cs: added ContactTypeList enum - Added ContactContactType.cs and moved the related methods to this from Contact.cs - Club.cs: update the returned club manager email and name, added methods for retrieving a contact based on the given Contact Type - ClubDetails control: now displays the club manager details from the contact tables, with percentage of completion and links to the Contacts page
- Fix: POS: Should not be able to decrement a product quantity below 0. Fix: POS: Styling improved on - and + buttons for quantity selector.
- Add: "Club Products" link into admin toolbar.
- Mod: Removed the guts of the multi-player payment dialog as this is broken anyway - replaced with a message stating that we'll be improving this in the next 2 weeks.
- Mod: POS: Removed "PARK" functionality; no-one uses this and it only causes trouble when you do. Fix: POS: Cards with a course fee due would disappear from the POS as if they were paid. Mod: POS: Added an ajax spinner to indicate when scorecards are first loading up.
- Mod: SSO: Improved error logging some more.
- Add: sql: PGA Trainee OOM new sp: oom_GetAvailableScores_PgaTrainee
- Mod: Switched Vend logging to DebugLog and added a setting so we can turn it on/off from the Live UI.
- Add: DebugLog url parameters for filters so that we can link to it from Live.
- Fix: For Takapuna (technically any club using PurchaseRefund as the DPS payment model) we keep showing deleted tee bookings on the green fee report.
- Add: POS: Payments on account via DotGolf POS are posted to AXAccounts now.
- Mod: Takapuna should be able to see the green fee detail report even though they don't have AuthComplete.
- Mod: Refactored to pass memberOrNonAffiliateId around instead of VendCustomerId - makes us more POS agnostic.  Should really be passing PassportId around but this is a bigger thing to get done...
- Mod: Live: Club Contacts: emphasise the "Create" link using red colour
- Mod: Removed more VendCustomerId references. Add: POS can now put sales on account even if the customer/member does not have an account yet (it opens one when the sale is closed) Mod: Removed Vend/Kounta icons in the Members tab.  They only looked cool and don't serve any purpose. Fix: Hide the "COMPS" header when there are no competitions to enter into.
- Add: UQ_PassportClubExternal constraint to ensure we don't get duplicate records linking a passport to a pos.
- Fix: Found this error in dev when a member tries to register when they already have a TBMember record.  Checks for existence of a TBMember record before trying to insert another.
- Mod: My Account control in ClubCMS Vend functionality replaced with AXAccounts.  It does not allow top-ups online (same as Vend functionality - doesn't look like this was ever built)
- Fix: Public build sorted now that Vend loyalty has been deprecated.
- Fix: Broke API build due to Vend refactor for POS.  Now using PassportClubExternal class to resolve Vend customer_id values.
- Mod: SSO: Improved error handling and logging. Add: Specific error messages rather than "There was an error on this page". Mod: Refactored code to remove inverted boolean if statements and improve readability of code.
- Mod: Upgraded Warkworth to use the new AXAccounts system for their accounts instead of the limited Vend Loyalty implementation.
- Add: Admin bar to the top of the kiosk so we can switch clubs without having to go back to the homepage.
- Fix: Approx 100 compiler warnings fixed in DotGolf.Live/Shared/Reports.  These should not change any behaviour as they were mostly unused/unassigned variables.
- Fix: Loyalty: Post to our system first so we can be sure it was successful, then go to Xero.
- Add: Better error message if loyalty post to Xero fails.
- Mod: Changed DebugLog to a static class; no reason to force clients to create this every time they need to log something.
- Add: We can now expire loyalty at the end of a member's subscription year or when they resign (or a combination of these options).
- Fix: Loyalty expiration computation bug on the second to last line of the statement.
- Fix: #7557 For multi course clubs the draw was trying to publish each player to both tee sheets if the tee times matched up.  This caused trouble for Riverside.  Adjusted code to check for a CourseId on TBStartTee before joining the tee time.  This should still work for North Shore as their TBStartTee.CourseId field is always null.
- Fix: #7572 Incorrect segments were generated for a both genders one-scorecard-for-team competition if that competition was copied from an old DGE competition AND had CourseId/MarkerId values set on the CompetitionRound record.  Code adjusted to get the correct CourseId from NZCRData in this case - we don't trust the CompetitionRound.CourseId value.
- Removed new C# syntax; not all projects are up to the latest C# version just yet.
- Add: Compile warnings for any areas where data is stored in files in the webroot - we need to get rid of these over time as this technique will preclude us from a) easily moving clubs between Live and Edge, b) load balancing.
- Add: Debug Log Viewer to Adweb.
- Add: Public: SideBarExternalLeaderboard widget for The Open (we could use this widget from now on to display external leaderboards, though the code is just hardcoded for now...)
- Add: Index for performance.
- Add: DebugLog - a better way of storing logs and exceptions.  This replaces the /XeroLogs folder in DotGolf Live, and will hopefully also replace the _log and ExceptionLog tables too.  It combines the best features of those two and keeps a relatively simple API that we can call into.
- Mod: Public: corrected the page title
- Fix: Duplicate products removed from quick key list.  Unsure why this is happening in the first place however - needs investigation.
- Fix: Don't post transaction if we have zero loyalty.
- Fix: Javascript error in POS when using Quick Keys.
- Fix: Cachebust image.
- Fix: Hook execution failures for hooks with no implementations.
- Mod: Removed "Eclipse" branding references for now - until we've solidified what this brand will do.
- Fix: Vend webhook crash caused by data type inconsistency.
- Fix: Threading issues with Kounta OAuth when launched in parallel.
- Fix: ORNS error in loyalty actions check.
- Fix: Async bug introduced with last commit.
- Fix: Looks like we had the wrong data type for this field in the Vend API.
- Mod: Kounta: Do not allow account top-ups to be charged to account.
- Mod: Renamed MemberInsertedUpdated and MemberResigned hooks for Vend/Kounta to include the POS name in the class name - this will make for better logging and easier debugging.
- Fix: Address3 does not exist on NonAffiliate, so can't use this here.  This caused the Kounta customer export to fail when creating new members in our system.
- Fix: Should not re-throw this exception this way because we lose the stack trace, making for useless details in the exception log.
- Fix: Open accounts on demand when Vend payment gateway is invoked.
- Mod: Xero code changed to look at the line description rather than the transaction reference (the description seems to be where Xero puts the entered text).
- Mod: #5727: Live: Club Settings page: Removed ProShopPhone, Email, HandicapperEmail, AccountsEmail, ProShopEmail
- Mod: Live: Club Contact: restrict viewing / updating of contact
- Fix: live_GenerateOrUpdateCompetitionRoundSegments performance improvement by making multi-club competitions conditional on a row existing in CompetitionClub.  For the 99.999999% of competitions that are single club this gives us a massive performance gain.
- Fix: Live: Club Contacts: updated the ClubContacts query to return the correct current contacts and vacant positions / contact types
- Add: Covering index to speed up result delete queries.
- Fix: Point Smartpay stuff at dev, not prod.
- Fix: Org: Update the menu style so that it won't break when the page is zoomed in (previously, it was causing the menu to be right-aligned, and hiding a few items in the menu)
- Fix: #7532 Another instance of checkAge corrected.
- Fix: #7532 PreprintV2 was enforcing player ages when it shouldn't (the competition select control is only capable of checking the age of a single player - not groups)
- Add: Ability to unlink a Smartpay terminal from a connector (on our end - this doesn't touch Smartpay at all)
- Mod: #5727: Hiding the "Contacts" link on the Settings page for now, while we still do the following: 1) copy over the existing contacts from the Club table 2) update the other areas using these contact details
- Fix: Setting default was incorrect - quick fix.
- Mod: Live: Contacts: display "Create" link if there's no contact yet for the given contact type
- Mod: Live: added style used for Contacts
- Mod: #5727: Added "Contacts" link to the Settings page
- Add: Loyalty expiration based on rules such as +1day, +2weeks, +10months or +1year.  Put these values into the AXAccountType.ExpiryRule column to enable loyalty expiration.  Manual Journals are automatically posted for Xero enabled clubs, coding the expiring points to the Expired Loyalty Revenue account and reducing the Loyalty Liability account.
- Mod: Live: Show an additional "TGolf Admin" link just for Takapuna.
- Mod: sql: Just removed "use NZ1"
- Fix: #7533: Paid/Outstanding By Item Report: use the Invoice.MemberId and Invoice.NonAffiliateId instead of the CreditNote.MemberId and CreditNote.NonAffiliateId
- Mod: ClubCMS: Club Competition Registration: allow affiliated visitors to register into other clubs' events
- Mod: ClubCMS: Club Competition Registration: allow affiliated visitors to register into other clubs' events
- Add: Connector Status Map
- Add: sql: ContactType.IsStaff
- Add: sql: CWLayout insert
- Add: sql: CWControl and CWControl Property inserts
- Mod: ClubCMS: just an additional security checking if the logged in user is a member or admin before showing the member directory control. (the first and second security layers are in the menu and page permissions)
- Fix: Typo error: "vistors" to "visitors"
- Fix: Typo error: "vistors" to "visitors"
- Mod: ClubCMS: Club Event Registration ("Promo" image) controls: added a RegistrationPageName property
- Mod: ClubCMS: Member Directory: make sure this is visible to home members or admins only
- Mod: ClubCMS: Allow affiliated visitors to register into other clubs' competitions
- Mod: ClubCMS: Club Competition List: added a Register link button, which allows members / affiliated visitors to register into a competition
- Add: ClubCMS: added a new terraces3 plain template, and a competition registration control to allow affiliated visitors to register to club events
- Mod: #7525 Added new calculation to this report as requested by NZGolf.
- Add: Course Variance Report: New columns added to store values from new calculation requested by Phil@NZG.
- Mod: Show error if no register is set when syncing products.
- Add: Smartpay terminal pairing to ConnectorDetail screen.
- Mod: Some logging introduced in the Vend code so we can see why loyalty/account credit did not apply.
- Add: Smartpay integration to POS.  This doesn't use the local Connector service as Smartpay Connect is a cloud based EFTPOS service.  Unfortunately this means the Kiosk will not benefit from this integration, but since Smartpay does not have any unattended terminals this won't be a problem straight off the bat. Mod: Smartpay accepts all amounts in cents, so I've changed the Amount fields to ints to avoid any confusion with a decimal point.
- Add: Smartpay pairing setting into shared class.
- Mod: ClubCMS: show the user-related links (My Account, My Profile, Handicapping) if the logged in user is a member, therefore hiding them from affiliated visitors.
- Add: Prototype Smartpay SmartConnect client library.
- Fix: Typo...
- Fix: Don't consider future DPSCompleteAttempted dates - we can future date these so that we don't pay money to a recipient until after a tee time.  This was causing a problem where no tee booking transactions were being imported due to a single future DPSCompleteAttempted value.
- Mod: Live: Club Contacts page: show all available contact types
- Mod: Live: Contact page: added a back link
- Mod: #5727: Contacts List page: segregate the contacts (staff and non-staff)
- Mod: #5727: renamed ContactNew page to Contact; allowed editing of contact
- Mod: #5727: updated Contact, ContactPerson, ContactType data objects
- Add: #5727: Live: Club contacts: added new pages for viewing and adding contacts
- Add: #5727: added Contact, ContactPerson, ContactType data objects
- Mod: Round incoming money to 2dp always - this avoids $0.00005 stuffing up our consistency check.
- Fix: Crashbug if there are no quick key groups in Vend at all.
- Mod: Org: PGA Trainee OOM: hide the "Is player a member?" question, and select yes by default.
- Mod: Org: PGA Trainee OOM: just adjusted the width of the form controls
- Fix: #7500: Live POG: updated some styling (removing extra spaces) so that the buttons at the bottom will be visible on smaller screens (e.g. 1366 x 768)
- Fix: #7500: Live: POG Group Booking: moved up the Save Changes and Cancel buttons (as they are not visible on a small laptop screens e.g. 1366 x 768)
- Fix: Bad schema script; apparently this column was already committed as part of some other script.  Check for existence before adding.
- Mod: ClubCMS: just renamed "Edit Profile" to "My Profile" to make it consistent with the rest
- Add: Course Fee integration into POS. Mod: POS rejig to make things fit on the screen better.
- Fix: #7268: GOTG: handle $0 original price when computing the discount percentage (NZG offers can have $0 value)
- Mod: GOTG: updated the banner to a winter-themed one
- Mod: Org: PGA Trainee OOM: Hide "Remove Scores" link on load
- Mod: Kounta API: updated so this will work in Dev, Staging and Live without code changes.
- Mod: Kounta client id, secret and signature token are now read from the Web.config (defaulting to the dev values if unset)
- Mod: #7268: GOTG: sort the offers by the discount percentage, not the discount amount
- Mod: Akarana: Show the course fee in the green fee box when there is no green fee already visible.  (Not that we should have course fees + green fees at the same time - but you never know what the future holds).  Akarana requested this; see email trail below.
- Fix: Don't crash the kiosk if the Vend customer call fails.  This code will be replaced by our own account/loyalty code anyway.
- Mod: sql: pga_Trainee_GetStandings: updated the stroke average computation
- Mod: ClubCMS: PGA Trainee OOM Detail: show the stroke average, target, card count on the detail page as well
- Add: AXAccounts: Account top-up via direct credit (and reconciliation in Xero) is now possible.  XeroSync handles this, and it requires that you a) put the membership number in the Reference field and b) code it to the correct account as per the account type settings and ledger codes.
- Add: Sale ref number to account loyalty lines.
- Mod: With AXAccounts the member ACCOUNTS menu should be visible even if a club has only AX and no SUBS.
- Fix: AXAccounts: Cannot earn loyalty on account top-ups. Mod: Improved account statement by adding Kounta sale reference number.
- Fix: hasVend() reference (which was replaced with hasAXAccounts()) Fix: Kounta auth crashbug when club has never authed before. Fix: Duplicate transaction detected when house and loyalty accounts are the same type. Fix: HookManager now only retrieves data for a hook once, if required. Fix: Expires setting was not nullable.
- Fix: hasVend() reference (which was replaced with hasAXAccounts())
- Fix: Missed a script.
- Mod: Increased timeout for the member upload process - we do this ourselves so we don't need anything fancy.
- Fix: Missed schema script.
- Fix: HookManager: Handle assembly load failures - not all assemblies in the domain can be loaded.
- Mod: In Staging, install the webhooks pointing to the staging URL.
- Add: AXAccounts: When looking at a manual journal posted to Xero by the loyalty system, I've added a link so that, when clicked, the user will be taken to the sale in whatever POS it came from.  From there the sale can be voided/returned. Mod: The webhook handlers are now thread-safe (using Redis locks to keep them running synchronously).  Vend does multiple webhook posts if the first one takes too long, and that caused duplicate loyalty postings to Xero etc. Add: Settings area to allow user to configure which accounts in Xero the loyalty journals should be posted to. Add: Code to push manual journals into Xero for loyalty earned on product sales.  This will debit the loyalty expense and credit the loyalty liability for the NZD value of each loyalty earned transaction. Mod: Settings support Guid values now.
- Mod: ClubCMS: When there are no payments to show (for the past year), hide the payments table and show a message.
- Mod: ClubCMS: When there are no payments to show (for the past year), hide the payments table and show a message.
- Mod: ClubCMS: Hide the Online Payment panel if neither the Account2Account nor the Credit Card is enabled OR if there is no member session. When there are no payments to show (for the past year), hide the payments table and show a message.
- Mod: ClubCMS: Hide the Online Payment panel if neither the Account2Account nor the Credit Card is enabled.
- Add: Kounta/Vend: Settings area to maintain default product loyalty percentage and account type. Mod: Loyalty is now earned on products according to the new setting.  Also you can override this on a per-product basis by specifying a tag.
- Mod: Live: Subs Renewals: just updated a label to make it easily understandable. From: "Get all renewal items on or before:" To: "Get all members with subscriptions due on or before:"
- Mod: #7267: Update the Invoice Date during the Xero sync as well
- Fix: Another schema script bug.
- Fix: schema script error - oops.
- Fix: Build errors caused by ClubMember refactor.
- Add: Missing packages caused build failure.
- Add: Ability to view statements, see your balance and top up AXAccounts from golf.co.nz. Fix: Corrected build errors caused by ClubMember mods. Mod: Changed to ($1.23) display for negative figures instead of $-1.23. Mod: Deprecated Vend top-ups.
- Mod: Live Permissions: TabRptScoreListingByDay: users with Reports and Scores permissions are allowed to access this report.
- Mod: Live Permissions: Added "NewsEvents" to RequiredRoles. The user will need either Tournaments or NewsEvents permissions to do admin functions.
- Fix: Live Permissions: show the Scorecards checkbox if the club has the "CP" product.
- Mod: Live Permissions: Added "NewsEvents" to RequiredRoles. The user will need either Tournaments or NewsEvents permissions to do admin functions.
- Mod: Removed deleted order handling as I don't think this will be a problem in practice.
- Mod: Allow opening a DotGolf AXAccount on demand (when you try to pay for something via Kounta)
- Add: Both Vend Sales and Kounta orders that sell account credit will now have that credit applied to member accounts automatically. Add: Member Accounts tab is now alive and shows real data, including links to a new Member Account Activity ExtQuery report. ExtQuery: Fix: SystemParameters were only bound at postback, so any LookupParameters that depended on other system parameters would get null values. ExtQuery: Fix: LookupParameters and MemberQuickSearchParameters could not be assigned automatically from the URL. Mod: Duplicate AXAccountTransaction postings will now be prohibited (same SystemCode and ExternalSystemId).
- Add: Member Account Statement report datasource.
- Mod: Live Permissions: removed the option: "Allow Synchronise in DotGolf Express/Enterprise"
- Mod: Live Permissions: added two checkboxes: Scorecards and Events / Competitions
- Mod: Live Permissions: Super Admins and those specifically with NewsEvents Role have Events on their menu. Previously, all with DotGolf Live access will have Events on their menu.
- Mod: Kounta: No longer going to be using integrated search as it causes a problem for me when returning new (previously not in Kounta) customers to Kounta.  I can't link up their passports properly so they will then be an unlinked member sitting in Kounta.  Next sync will cause a duplicate.  Better to turn off integrated customers for our add-on.
- Mod: Kounta: No longer going to be using integrated search as it causes a problem for me when returning new (previously not in Kounta) customers to Kounta.  I can't link up their passports properly so they will then be an unlinked member sitting in Kounta.  Next sync will cause a duplicate.  Better to turn off integrated customers for our add-on.
- Mod: Live: Added AssetGroup.Scorecards: this would allow us to control whether or not to show Scorecards for the user
- Mod: sql: added more inserts into the Role table
- Mod: UserSecurityRole: added RoleList.Scorecards (Role ID 46) and RoleList.NewsEvents (Role ID 47)
- Add: AXAccounts: Settings area to allow linking account types to clubs.  Clubs will only be using 1-2 account types each, and we'll have many different types set up with possibly different currencies.
- Mod: Live: Green Fee Permissions requirements: 1) Club must have a Green Fee Product 2) User must have the Super Admin role or specifically have the "Green Fee" role.
- Mod: UserSecurityRole: added RoleList.GreenFee (Role ID 45)
- Fix: Build error caused by AXAccounts refactor.
- Mod: Live Permissions: a user must have 1) Reports and 2) Green Fee permissions to access the Green Fee reports. Previously, aside from those two, the user also has to have a AssetGroup.Members permission.
- Mod: Live Permissions: a user must have 1) Reports and 2) Green Fee permission levels to access the TabRptGreenFee (Green Fee by Month/Year) report. Previously, aside from those two, the user also has to have a AssetGroup.Members permission.
- Mod: Live: TabReports: use a different CSS for disabled links (display as black text)
- Mod: sql: inserts a "LoveGolf" role into the Role table
- Cleanup: Removed empty file after refactoring.
- Mod: Removed prize posting to Vend and replaced with AXAccounts functionality.
- Mod: Live: Menu Permissions: Super Admins and those specifically with Bulk Email Role have Bulk Email on their menu Mod: Live: Menu Permissions: Super Admins and those specifically with Love Golf Role have Love Golf on their menu
- Mod: Live: User Permission Settings: re-added checkboxes: Bulk Email and Love Golf
- Mod: UserSecurityRole: re-added RoleList.LoveGolf (Role ID 44)
- Mod: AXAccounts: Refactored so we can call the PutTransaction() method from DotGolf.Shared. Fix: Corrected compile errors because of CMember shared changes.
- Add: Vend: VendSaleProduct import added to the Vend Sync code - now we have full sales data in our database.  We'll need to sync from epoch to get all the data in. Mod: Kounta settings: improved webhook configuration section. Add: Kounta order data sync (including orders, lines and payments). Add: Kounta webhook for incomind orders
- Add: Kounta: API support for getting Web hooks.
- Mod: TBTimeSlotEntry.HasPaid flag would get out of date when you have a booking with a scorecard already printed, but unpaid (i.e. printed through kiosk), and you CHANGE the green fee on that via the POG.  TXLine.PaidDate is set, but TBTimeSlotEntry.HasPaid is not set (unless you use Save and Print in the POG, not Save Changes).  This caused issues where the green fee chart (month/day) report would not match the Green Fee Summary report.
- Add: Kounta: Commented out template code that we can use when Kounta fixes the parameter display in their pos.
- Add: Control Account tab visibility based on new AX product.
- Mod: Removed dangerous Vend webhook code - we don't want to update our data in response to a change coming in from Vend.
- Add: Kounta: Sync Members added to populate Kounta database with golf members. Add: AX product code for AXAccounts. Add: Member inserted/updated/resigned hooks and HookManager to call Vend and Kounta when these occur. Add: Kounta icon to Member screen if a member is linked with Kounta for the club. Mod: Kounta paged results and exception handling improved.
- Add: AX product.
- Add: AXAccount: Schema and more code added into DotGolf.Shared. Add: KOUNTA product. Mod: Refactored MyGolfController so we can use the profile image code from elsewhere. Add: Accounts endpoint in API as well as authentication code to go along with it. Add: Basic Vend payments gateway; this is functional now.
- Mod: Vend: Refactored some of the vend data model classes to share VendSalesPayload so we have a single type to pass to VendAccounts.ProcessAccountCredits().  This method has been left as a stub in this commit - will implement it soon.
- Add: sql: this script inserts into CWControl and CWControlProperty (2 PGA Trainee OOM controls)
- Mod: Reverting Revision 26291 because we'll just merge & publish Live permission changes when I get back / before 1st July
- Mod: Reverting Revision 26290 because we'll just merge & publish Live permission changes when I get back / before 1st July
- Mod: Revert changes done on Revision 26292. We will just merge and publish this before 1st July.
- Mod: Recommit "create stored procedure" SQL scripts (so that they'll go after the Trainee OOM schema "create table" scripts)
- Mod: Kounta: Store the company_id so we can lookup the club when Kounta calls us.
- Fix: #7437: Correct the displayed Preview Amount. This small change was missed in Revision 26157.
- Add: Kounta: API client which includes OAuth2 and the initial authorisation grant flow.  This is hidden unless the club has the KOUNTA product.
- Add: Kounta: Kounta settings.
- Mod: sql: insert 5 records into PgaTraineeEventType
- Add: sql: new tables for PGA Trainee OOM
- Mod: Org: Add NZG OOM Tournament: allow the user to create the same OOM Tournament (start date, end date, course, event ID), but raise a warning (confirm popup) first.
- Add: sql: new stored procedures used by PGA Trainee OOM
- Add: sql: inserts PgaTraineeOom into the Role table
- Mod: Org: PGA Trainee OOM: minor changes in txtDate_TextChanged
- Mod: Org: PGA Trainee OOM: moved the position of ddlTraineeEventType; updated some text
- Mod: Org: Trainee OOM: added search filters for viewing scores; updated a few text
- Fix: ClubCMS: updated "No events found." text style
- Add: AXAccounts: Shared code for DAL.  Note schema has not been committed so these classes won't function in prod yet.
- Add: Ability to list all settings of a particular name - this enables us to browse settings looking for a particular value.
- Fix: Removed inline SQL parameter.
- Mod: ClubCMS: Membership Form: updated message style
- Mod: ClubCMS: Membership Form: updated message style
- Mod: ClubCMS: Membership Form: updated Google reCaptcha site key and secret key
- Fix: #7438: ClubCMS: replaced the captcha with Google reCaptcha. The custom one was breaking during postback. I may as well update it to Google reCaptcha (which is used on other forms already.)
- Mod: #7438: ClubCMS: replaced the captcha with Google reCaptcha. The custom one was breaking during postback. I may as well update it to Google reCaptcha (which is used on other forms already.)
- Mod: ClubCMS: Trainee OOM controls: updated the stored procedure used (we're not getting the results from PgaTraineeResult and PgaTraineeResultExternal)
- Mod: Org: PGA Trainee OOM: updated page title
- Fix: Org: PGA Trainee OOM: Remove scores from the new tables: PgaTraineeResult and PgaTraineeResultExternal
- Fix: Org: Trainee OOM: save scores to these new tables: PgaTraineeResult and PgaTraineeResultExternal
- Mod: Performance: Moved away from DataSet to Dapper for favourite reports in DotGolf Live.
- Mod: Deleted random xml file in bin folder; keeps coming up as changed in my Subversion Commit dialog.
- Add: Do Not Charge Course Fee option to Competition Setup.  Important: Since we haven't completed the logic to honour this setting (in the fee selector code) I have hidden this for now.  The Vend/Kounta integration project is taking priority over the outstanding items for Course Fees.
- Mod: Live: Menu Permissions: Super Admins and those specifically with Bulk Email Role have Bulk Email on their menu Mod: Live: Menu Permissions: Super Admins and those specifically with Love Golf Role have Love Golf on their menu
- Mod: UserSecurityRole: added RoleList.LoveGolf (Role ID 44)
- Mod: Live: User Permission Settings: added checkboxes: Bulk Email and Love Golf
- Mod: #7200 Hardcoded opposite gender markers for Tairua so that they get the correct opposite gender stroke printed on their scorecards.  Their markers have funny names so our default rules don't work very well for them.
- Fix: #7407 Our 9 hole countback calculation was using the last 4/3/1 holes rather than the last 6/3/1.
- Mod: #7429: Public: just slightly moved down (8px) the "Greenfee Details" popup so it won't partially hide the green box's text.
- Fix: Org: PopulateTournamentCombo: corrected the query used by OOM Add Score to populate the tournament dropdown field
- Mod: Org: Added Trainee OOM to the menu (for PGA)
- Mod: Added AssetGroup.PgaTraineeOom
- Mod: Org: Add Score: updated style, moved up the Date field, fixed search by Course and Marker
- Mod: ClubCMS: TraineeOom control: renamed column, cleaned-up code
- Mod: ClubCMS: TraineeOomDetail control: clean up code, updated css reference
- Mod: ClubCMS: TraineeOomDetail control: added a back link
- Fix: Org: PGA Trainee OOM: corrected the link to the dashboard page
- Mod: Org: PGA Trainee OOM: AddExternalScore: added Par field, removed unnecessary fields
- Mod: Added DotGolfApplication.PGA
- Mod: Org: PGA Trainee OOM Tournament List: updated link to PGA site's Rankings page
- Mod: Org: PGA Trainee OOM Tournament Dashboard: updated results data and cleaned up code
- Mod: Org: PGA Trainee OOM: removed the unnecessary Edit Player List link
- Mod: Org: PGA Trainee OOM: updated the date format
- Add: ClubCMS: PGA Trainee OOM control: updated the columns of the ranking table
- Add: ClubCMS: PGA Trainee OOM detail control: added columns
- Add: ClubCMS: PGA Trainee OOM controls
- Mod: Org: PGA: Trainee OOM: move the view rankings link here
- Mod: Org: PGA: Trainee OOM: updated results section
- Mod: Org: PGA: Trainee OOM: tournament dashboard results and links to results
- Mod: Org: PGA: Trainee OOM: corrected the back link
- Add: Org: PGA: Trainee OOM: results report page
- Mod: Org: PGA: Trainee OOM: style update; added style for the Add Score "or" form divider
- Mod: Org: PGA: Trainee OOM: adding of external scores (total)
- Mod: Shared: Member: just updated the casing of the ClubId parameter
- Mod: Shared: Member: created an overload for GetMemberSearchResults so that we could limit the member query to a specific club ID
- Mod: Org: PGA: Trainee OOM: view and remove scores
- Mod: Org: PGA: Trainee OOM: updated the message which shows when there are no scores found
- Fix: Floating point arithmetic problem when working out the total price for a sale (and applying payments including the error).
- Mod: Org: PGA: Trainee OOM: corrected the URL to adding a trainee OOM tournament; updated tournament list query
- Add: Org: PGA: Trainee OOM: add / edit trainee OOM tournaments
- Fix: #7399 Error in the code which caused green fee changes on reprinted cards not to be saved to the database correctly.
- Fix: ClubCMS: corrected a typo error only
- Mod: Org: PGA: Trainee OOM: add scores from a tournament / competition
- Mod: Org: PGA: Trainee OOM: updated trainee OOM pages
- Mod: Org: PGA: Trainee OOM Tournaments List page
- Add: Org: PGA: Trainee OOM Tournament Dashboard page: work in progress
- Fix: Error when editing a report definition which uses a SQL Set datasource combined with one or more Table datasources. Mod: Removed iframe previewer as this was only causing trouble. Mod: Updated to latest jsoneditor.
- Add: Course Fees: New AssetGroup to control access to my new course fees reports.
- Fix: ConnectionMultiplexer should be a singleton (https://gavinb.net/2015/07/11/dont-get-burned-by-redis-connectionmultiplexer-a-sample-wrapper/). This fixes all the other places where the ConnectionMultiplexer is used directly.
- Fix: ConnectionMultiplexer should be a singleton (https://gavinb.net/2015/07/11/dont-get-burned-by-redis-connectionmultiplexer-a-sample-wrapper/)
- Mod: Course Fees: Rename scripts to get them in the right order.
- Mod: Course Fees: Rename scripts to get them in the right order.
- Mod: Course Fees: Rename scripts to get them in the right order.
- Add: Org: PGA: OOM Trainee pages: work in progress (these aren't accessible yet through the menu)
- Fix: ClubCMS: rNav Bar v2: fix media query styles
- Fix: ClubCMS: rNav Bar v2: apply media query style to landscape mode as well
- Fix: ClubCMS: PaymentError.aspx: replaced the version number with a simple text for now as it's throwing an error (e.g. when a payment is cancelled, and this page has to be displayed)
- Mod: Course Fees: If a scorecard has an unpaid course fee, the scorecard will have a black indicator printed on it saying "$2 Course Fee".
- Fix: ClubCMS: responsive Recent News Articles control: fix bootstrap styling
- Fix: ClubCMS: responsive Recent News Articles control: fix bootstrap styling
- Mod: ClubCMS: rNavBarv2: added the link to Handicapping / My Golf
- Mod: ClubCMS: SearchClubDay.aspx: added bootstrap style to My Bookings button
- Fix: ClubCMS: rMemberDirectory.ascx: fix overlapping photo and text
- Mod: ClubCMS: Terraces3: updated bootstrap style - column distribution
- Mod: ClubCMS: SearchSlots.aspx: apply bootstrap styles to Message of the Day area
- Mod: ClubCMS: rMembershipForm: changed the bootstrap style to panel-default to make it generic
- Mod: ClubCMS: rResultHoleByHole: updated bootstrap styles
- Add: ClubCMS: rResultHoleByHole control: added css file
- Mod: ClubCMS: rCompetitionResult1: removed modal popup code
- Mod: ClubCMS: responsive competition list control: apply bootstrap classes; fix the pagination styles
- Mod: ClubCMS: responsive member details: changed the bootstrap style to panel-default to make it generic
- Mod: ClubCMS: sql: insert new control rResult Hole By Hole
- Mod: ClubCMS: rCompetitionResult1: show hole by hole results using the new rResultHoleByHole control (used to be a pop-up)
- Add: ClubCMS: responsive Hole by Hole control: this replaces the hole by hole score popup displayed on the rCompetitionResult1 control
- Mod: ClubCMS: responsive Competition List: apply bootstrap styles
- Add: ClubCMS: responsive competition list css file
- Mod: ClubCMS: Terraces 3: added a back to top arrow link
- Fix: #7282: If the first hole alias contains an alpha character, Results fails to output Twos results where a player has scored a two on that hole.
- Mod: ClubCMS: responsive Nav Bar v2 (On Par): added ShowMyBookings link
- Mod: ClubCMS: sql: added ShowMyBookings property to rNav Bar v2 control
- Mod: ClubCMS: sql: added properties to rCompetition Result 2 control
- Mod: ClubCMS: sql: removed rnavbarv2 script; corrected property names of the rImage Gallery control
- Mod: ClubCMS: Tee Booking Login: simplified Membership Number textbox label
- Mod: ClubCMS: Tee Booking login page heading styles
- Fix: ClubCMS: Terrace3 Tee Booking Master: corrected the centerFullWidthPanel section rendering
- Mod: ClubCMS: responsive nav bar v2: applied the existing "menu-item-highlighted" class to the active menu item
- Mod: ClubCMS: responsive login control: set a default text for the log in button, in case it's not set
- Fix: ClubCMS: responsive nav bar: corrected the path to the login page
- Mod: ClubCMS: added bootstrap styles for non responsive templates
- Mod: sql: inserts into CWControl and CWControlProperty for the responsive controls: rNav Bar v2, rImage Gallery, rNews Article
- Mod: HoleDetail.VideoUrl and CWPromotion.ReadMoreURL: alter column length to allow longer values
- Mod: ClubCMS: responsive Member Directory: updated the thumbnail image dimensions to 80 x 80 (previously it was 60 x 75)
- Mod: ClubCMS: responsive login control: removed address and phone (users can view this on their profile page); added bootstrap style classes
- Fix: ClubCMS: responsive nav bar v2: corrected setting of LogInText and LogoutText properties
- Mod: ClubCMS: responsive image gallery control: style updates; make captions work; removed unnecessary code; control properties update
- Add: ClubCMS: responsive photo gallery control
- Mod: Course Fees: We now check for a subs unlimited course fees item on the member record and take that into account when calculating the green fee.  Note that this is untested as of yet - will test this when I properly test the subs-cf stuff. Fix: Course Fees: Formatting bug with CourseFeesPaidUntil field.
- Mod: Course Fees: We now have a date field on the CMember record which will exempt a member from paying course fees up until a specified date.  I've also improved the messages that the system outputs when a player is exempt (eg. Category JUN is exempt, or Pre-paid until 2018-01-01).
- Fix: Removed test code from this script.
- Mod: Course Fees: Bit flag added to member UI, stored proc extended to take this setting into account. Fix: Performance problem in live_GetAvailableCourseFeesForMemberAndDate - commented out the MaxNoOfRounds setting as we won't be using that with course fees (yet anyway).
- Mod: If there is an error on the Category form it is not obvious that your changes were not saved.  I've added a message bar at the top of the screen to improve this situation.
- Mod: Course Fees: Refactored, renamed variable in this SP.
- Add: Course Fees: Category setting to stop course fees from being charged to members in a category.  Also added the bit flag on CMember but there is no UI for that just yet.
- Mod: ClubCMS: reduced the size of the check mark and trash png images
- Mod: ClubCMS: updated the friend image indicator on the search slots page
- Mod: ClubCMS: Added bootstrap CSS classes: btn, form, form-group, callout
- Mod: ClubCMS: Added bootstrap CSS classes: btn and table; Updated the google calendar image link
- Mod: ClubCMS: Added bootstrap CSS classes like form, btn, alert, table, panel; Updated the mark-up to use div instead of a table
- Mod: ClubCMS: Added bootstrap CSS classes like btn, panel; updated the mark-up a bit
- Mod: ClubCMS: Added bootstrap CSS class: alert
- Mod: ClubCMS: Added bootstrap CSS classes like btn; improved the html mark-up a bit
- Mod: ClubCMS: Added bootstrap CSS classes like btn btn-default
- Fix: ClubCMS: ProgressBar: corrected the CSS class name applied to the Payment step
- Mod: ClubCMS: SearchClubDay: enclosed the table in a bootstrap panel css class, making the horizontal scroll bar display / work properly
- Mod: ClubCMS: Added bootstrap CSS classes like btn, alert Mod: ClubCMS: Updated the Google calendar image path (created a custom one, to replace that one that's directly linked to Google)
- Mod: ClubCMS: Added bootstrap CSS classes like btn, alert, table, panel, form-control
- Mod: ClubCMS: check mark and trash images: updated to Google Material icons
- Mod: ClubCMS: Added reference to TeebookingNonResponsive.css and updated a couple of styles on the tee booking area (as a result of applying bootstrap styling to tee booking pages)
- Mod: ClubCMS: TeebookingTerraces3.Master: add reference to theme.css (which has the custom CSS for the terraces3 bootstrap template)
- Add: ClubCMS: google calendar image (it used to be directly linked to an online image http://www.google.com/calendar/images/ext/gc_button6.gif) Add: ClubCMS: TeebookingNonResponsive.css: this is applies bootstrap styling to tee booking pages that are not using the responsive template
- Fix: Live: Direct Debit Preview: updated "i.Amount" to "i.OutstandingAmount" on the DD data preview. The actual export data is fine though, so it's just the preview that has the issue.
- Fix: chartjs.org removed the version of chart.min.js that we were using in our app, so that broke our prize template javascript.  Micropower will be seeing the same problem right now, muhaha.
- Mod: ClubCMS: terraces3 style updates
- Fix: re-adding back css files
- Fix: SVN error
- Fix: ClubCMS: Search Slots page: added a missing closing div tag
- Mod: ClubCMS: SearchClubDay: styling updates on the filter area (buttons or tabs)
- Mod: ClubCMS: SearchClubDay: updated the styles of the green fee pop-up table
- Mod: ClubCMS: SearchClubDay: - Green Fee pop-up styling updates (used bootstrap table styles), and moved its position a bit to the right - Added bootstrap classes to the table as well so that it'll be scrollable on the mobile
- Mod: ClubCMS: Terrraces3 Tee Booking master page: fix display on mobile
- Fix: Got rid of unnecessary console.log().
- Fix: In testing the course fee stuff I found this existing bug - when using the POG to print a card for a non-affiliate player, and then changing the green fee results in this error in the console.  I don't think it caused any problems, but the error was still getting logged.
- Fix: More 404 issues.
- Mod: Course Fees: Made SCA editor smaller so we can fit more on a screen. Fix: Course Fees: POG pop-up bubble was appearing as paid when the course fee was unpaid.
- Mod: ClubCMS: Course with ads control: adjust the max length for the video URL
- Mod: ClubCMS: Terraces3 tee booking master page: added center left and center right panels; added referencing to bootstrap js
- Fix: Image path error in fee-selector control.
- Fix: JQWidgets image path error was causing 404's in the console log output.
- Mod: ClubCMS: responsive nav bar v2: styles update
- Mod: ClubCMS: responsive nav bar v2: update the positioning of the HtmlSnippetRight literal (this is displayed beside the login link)
- Mod: ClubCMS: responsive nav bar v2: style fixes
- Mod: ClubCMS: responsive nav bar v2: show the dropdown menu on hover
- Mod: updated to the new DotGolf logo
- Mod: ClubCMS: tee booking styling updates related to website responsiveness
- Mod: ClubCMS: Terraces3 Tee Booking master page: added reference to fontawesome
- Fix: Avoid Swagger k__BackingField problem (https://stackoverflow.com/a/31063520)
- Mod: ClubCMS: added new responsive controls inserts
- Fix: Course Fees: Cards were not being marked as paid when user saves a kiosk printed card from the SCA (Mark as Paid checkbox was not visible). Fix: Course Fees: Non-affiliates and other visitors were being charged course fees incorrectly.
- Mod: Course Fees: Kiosk will now display course fees charged to the user, including the total amount due.
- Mod: ClubCMS: responsive competition result controls: initial bootstrap style updates
- Mod: ClubCMS: responsive competition result controls: initial bootstrap style updates
- Add: ClubCMS: responsive competition controls: work in progress
- Add: ClubCMS: responsive competition controls: work in progress
- Mod: Course Fees: POG: Only show Course Fee selector when in print mode.
- Mod: Course Fees: POG now supports course fees.
- Mod: ClubCMS: responsive competition list control: add comment and clean up the UI using CodeMaid.
- Add: ClubCMS: responsive competition list control - work in progress
- Mod: Updated Connector printer consumable monitoring to support HP PageWide E55650.  It just needed a certificate check update (since these printers ship with a self signed certificate).  I've also fixed the Estimated Pages Remaining stat which sometimes doesn't get sent back properly due to a greater than sign that is not parsed.
- Add: Course Fees: Kiosk will now add course fees to scorecards printed (if club has the CF product) - although it doesn't yet display a notification. SCA will now show unpaid course fee scorecards at the top, same behaviour as unpaid greenfees/comp fees.
- Cleanup: Unused PrintCards() signature in kiosk code.
- Mod: Jennian Homes: wa_ThirdPartyNotifyWinner_Member: corrected Jan's email; removed unnecessary order by clause; made sure the name is reset to an empty string
- Mod: Jennian Homes: wa_ThirdPartyNotifyWinner_Member: personalise with the Member's name so the email would look more legitimate, make sure the first letter is capitalised
- Add: Jennian Homes: wa_ThirdPartyNotifyWinner_Member: this sends the email notification to the generated winners for the day given the Third Party ID
- Add: sql: inserts into CWControl and CWControlProperty (for the responsive controls)
- Add: ClubCMS: responsive nav bar css
- Mod: ClubCMS: responsive nav bar: merged in the loginbar control
- Add: Indexes to try and improve the Tournament List load time.
- Mod: Only show "scores not entered for handicapping" notice when competition is valid for handicapping.
- Add: Course Fees: Integrated into Scorecard Admin.  Only visible/active if you have the CF product switched on for the club.
- Add: Course Fees: FeeSelectorControlService updated to return course fees.
- Add: Course Fees: FeeSelectorControl now supports Course Fees.
- Mod: ClubCMS: responsive Member Directory control: bootstrap-related changes
- Fix: #7161: Live: Bulk email: Simple article layout: added a little more (4px) padding below the image
- Fix: #7161: Live: Bulk email article layout: added an 8px padding below the article title. Previously, it was indeed positioned too close to the image.
- Mod: #7158 For teams competitions the number of entries on the competition dashboard is actually the number of teams.  Clarify this by changing the header to "Teams" for these competitions.
- Mod: Excluded a couple of test tournaments that will never be captured - no point sending warnings about these comps.
- Mod: Improved error message instead of showing an exception - turns out Nomads or 5CC may get this message if they haven't accepted/rejected everyone yet.
- Add: Connector: Documented new Housekeeping config option.
- Mod: Connector: Housekeeping sometimes ends up with old tiff files with no companion .xml files; this means they never get deleted.  Added code to clean up old tiff files. Add: Connector: For troubleshooting/debugging we can run housekeeping on startup now with a configuration file option.
- Mod: Connector: Allow turning off Twain thread completely by setting the ScannerTwainSource to "None" in the exe.config.  Useful for when CPU usage goes unchecked because of Twain bugs on some computers.
- Mod: #7160 Introduced validation to stop the Finalise form from being submitted unless every registration is marked as CHARGE/REFUND.
- Mod: ClubCMS: responsive Member Directory control: work in progress
- Mod: ClubCMS: replaced the obsolete link book.golf.co.nz with golf.co.nz
- Mod: ClubCMS: GetMembersByFirstLetter: handle null HideEmailAddress value
- Add: API: mark-as-unread endpoint.
- Fix: #7168: Pennants: Scenario: 1. remove score/s or row/s 2. click "Add Score" 3. enter a result e.g. lost to, and it doesn't save (because self.Hole() is null
- Add: API: messages/unread-count endpoint for Ruben.
- Add: ClubCMS: responsive Member Directory control: work in progress
- Mod: ClubCMS: member directory: just updated the silhouette image used (use the same one used on the PGA site)
- Fix: ClubCMS: responsive Content control: - fixed the operator used in checking if the ParentClubId is a Club ID or an Association ID - added IsPasteText property
- Mod: ClubCMS: News Article control: add IsPasteText (Cute Editor paste behaviour) property
- Mod: ClubCMS: responsive controls style updates
- Mod: ClubCMS: responsive Content control: updated max doc / image upload to 2MB (like the shared content control)
- Mod: ClubCMS: responsive controls style updates
- Mod: ClubCMS: responsive nav bar v2 control
- Mod: ClubCMS: responsive Login Bar: added Edit Profile link
- Mod: ClubCMS: responsive Login Bar: - added new property: EditProfilePage - hide Edit Profile or My Account links if they're not defined
- Fix: #7109: Live: Handle null CategoryItem (when adding a new item to the member)
- Fix: Withdrawing someone from a tournament when they are already in one or more draws, and then reinstating them, renders the system in a state where they can no longer be added back to the draw they were previously in.  This is due to RSCompetitionRoundSegmentEntry rows remaining, and we don't check for these rows before attempting to insert replacements.  See email from Dave 24/02/2017 re the South Island Strokeplay for women.
- Mod: Clarified LockId in the comments.
- Add: Proc to send tournament capture payments warnings.  This is currently hardcoded to david@golf.co.nz so that I can see what it's doing before making it live.
- Mod: The Mailer service will now send emails of the same priority out in a random order.  This will alleviate some contention between clubs sending out bulk emails - now clubs will see a reduced rate of sending instead of the UI "hanging" while it waits for the competing club's emails to be sent.
- Mod: GOTG emails are now lower priority than other bulk emails (given we send so many of them).
- Add: Slicer Reconciliation Report: Links added so you can quickly get to each competition's payment details in Org.
- Fix: Subquery returned more than a single result error when booking players in with visitors.
- Fix: Inline fix to wa_RecalculateCompetitionEclecticNG_Fast when it wouldn't work in PRod.
- Mod: #7118: Live: Invoice First Instalment Date - use the more recent base subs start date as users are likely creating the invoice for the more recent subs
- Mod: #7109: Live: When adding a new item to a member, use the default amount that is set up in the CategoryItem or Item.
- Mod: Renamed "handicapping" to "mygolf" in API.
- Add: ExtQuery: Ability to embed data in HeaderText/FooterText by using eg. ${member.Name} tags.
- Mod: Added an index to speed up queries involving Passport.MemberId/NonAffiliateId and DeletedDate (a common way of doing things)
- Add: ExtQuery New MemberQuickSearch parameter which displays a member search control on reports.  We can add some more parameters to this later; at the moment it fits my purposes.
- Mod: Member Quick Search improvements. * Removed EF dependency; written an efficient SQL query to replace ListLiveClubMembers() EF code. * Added PassportId to the selected member data, so we can start using that instead of MemberId. * Made the onSelecting and onSelected calls run in the context of the MQS control, not undefined (so "this" means something in the event handlers now)
- Mod: Changed GCM JSON format per Ruben.
- Mod: API: Changed GCM message JSON structure as per Ruben.
- Mod: Changed 24 hour window for consumable reporting to 18 hours to account for client clock drift.
- Fix: Missed committing an index.
- Fix: Vend sync: Message displayed when it should not have been.
- Mod: Vend: Performance issue improved by parameterising my queries properly.
- Fix: When converting int64 and uint64 values and the string value is too large, the conversion incorrectly returned null because it was doing int.Parse internally, not long.Parse.
- Add: Vend: Import all Vend sales automatically and store them in the VendSale and VendPayment tables in our database.  This will enable us to do some reporting around member loyalty; an area where Vend itself is lacking.
- Fix: Mailer: If a single device registration fails to happen with SNS, the whole queue gets clobbered and never gets done.  Changed the loop so that individual requests may fail without affecting the queue.
- Mod: ClubCMS: mobile competitions calendar: updated the number of competitions to show on a page
- Fix: #6982 Vend: When resigning a member from TabMember.aspx the member is never updated in Vend. Mod: Vend: When resigning a member we now update the lastname in Vend to be "... (resigned)".
- Add: Script to recalculate all eclectic results - data cleanup for script 2187 just committed.
- Fix: #7060 Scores entered into an Eclectic competition by checking the box in the score entry screen (i.e. without printing a scorecard) were not considered for Eclectic results.  There was a join to the Scorecard table and a scorecard row obviously does not exist in this case.
- Fix: #7063 The first day of the week is Monday; missing SET DATEFIRST caused opposite gender stroke to use a marker default for another day.
- Fix: The MemberMaxBookings setting was not working on golf.co.nz; people still got an error message when they attempt to book in twice on the same day.
- Fix: Mailer: Pass the correct ARN for the Android platform.  We only have 1 - the production one.  I don't think we need a debugging one that is separate like APNS.
- Mod: ClubCMS: Terraces3: updated referencing of font awesome; added js function GetParameterValues
- Mod: ClubCMS: responsive Login Bar: added an icon
- Mod: ClubCMS: login control: simplified loading of CSS file
- Add: ClubCMS: responsive login bar control for responsive club websites
- Fix: #7041: - Updated one more cni.CreateDate to cni.DocumentDate (missed this yesterday)
- Merged revision(s) 25999 from Branches/Trunk.2017-04-13.subs-passportid-refactor: Fix: Member Sub Items report wasn't working correctly for the As At Date - any items created past the AsAtDate should not be included, and any items deleted after the date should be included. ........
- Fix: ClubCMS: My Account: load the details only when a member is in session. Previously, it's coming up with an error for the administrator, since that user obviously doesn't have a member record, etc.
- Mod: Show the handicap suffix (N) in the SCA for printed scorecards.
- Fix: #7041: Live: Paid / Outstanding By Item Report: Use Invoice.DocumentDate instead of Invoice.CreateDate in the filter
- Fix: #7041: Live: Paid / Outstanding By Item Report: Use Receipt.DocumentDate, CreditNote.DocumentDate, CreditNoteInvoice.DocumentDate instead of CreateDate to filter the data.
- Fix: Public: updated the Find a PGA Coach links to http://www.pga.org.nz/find-a-pga-pro
- Add: Start of live preview for ExtQuery.
- Mod: ExtQuery supports AutoRun reports now. Mod: ExtQuery will parse the query string for parameters with AllowFromURL set to true.
- Fix: #7036: Visitors / guests (e.g. non-Nomads members) should be charged the Visitor Fee, not the Member Fee.
- Add: Ported rev 25986 from Public project to add auto-entry competitions to the ConfirmSlots page.
- Mod: TB info message popup informing people about auto-entry competitions at that time (and entry fees if any).
- Add: new ClubCMS control and its property Add: wa_ThirdPartyNotifyWinner_B_NZG - new stored proc which we'll use to send the Jennian Twos email notification to NZG (containing the member email address)
- Add: ClubCMS: added responsive green fees and nav bar v2 (consolidated navbar and menu)
- Fix: Oops, missed some debug code.
- Fix: Performance issue when updating members; these triggers were taking too long even though they weren't updating any rows.  Added a check to ensure that there are not-null resigned dates in the inserted tables before doing any real work.
- Fix: #7001 Use Golf Australia's credentials to lookup players handicaps in Player Registration (asked Matt about this over IM 1/05/2017)
- Merged revision(s) 25963-25964 from Branches/Trunk.2017-04-13.subs-passportid-refactor: Fix: Printer consumable monitoring was not working correctly due to webservice proxy with incorrect service URL. ........ Fix: #6208 Proper case for MacAulay. ........
- Fix: Crashbug - SQL error in ConfirmPayments.
- Fix: Crashbug - SQL error in ConfirmPayments.
- Fix: Crashbug - SQL error in ConfirmPayments.
- Mod: Alter column length Advertising.TargetUrl
- Mod: GOTG Admin: Merchant / Club Details: allow just ".nz" in the website URL (Mel couldn't save "www.waitomogolfclub.nz" before)
- Fix: PublishedToPublicWebsite is a datetime, argh.
- Mod: Oops, shouldn't have committed Web.config.
- Mod: Results query modified so that the cut is calculated as soon as draw for the cut round is published.  Normally we don't show the cut until the date the round is played, but Dave asked that we show it as soon as he creates and publishes the draw for the cut round.
- Fix: If you untick the Freeze Handicaps box on Comp Setup, the date does not go away and the backend is not updated.
- Mod: GOTG: home page banner update back to the generic one
- Fix: #6936 TBTicketEntry.PaidDate was not set when paying for bookings via the API.
- Mod: Public: update GEAP pdfs (policy wording and claim form), and contact information on the GEAP page
- Fix: #6961 @CompetitionRoundSegmentId was not defined at the time that it is used, and this lead to handicap overrides not being applied when the draw is saved.  Players' original handicaps were used instead, necessitating the user to re-save all registrations/overrides after saving the draw.
- Mod: Hide the Capture Payments area if we are in Purchase/Refund mode.
- Mod: Future date CapturedDate and DPScompleteAttempted on TBTransaction record so that the Slicer does not pay the money to the club before the tee time has elapsed.
- Mod: Future date CapturedDate and DPScompleteAttempted on TBTransaction record so that the Slicer does not pay the money to the club before the tee time has elapsed.
- Add: Purchase/Refund DPS payment model to ClubCMS.
- Add: Purchase/Refund DPS payment model to public website.  This is controlled by a setting - TBClubSettings.DPSPaymentsModel.
- Mod: Another default competition type thing missed.
- Mod: Default competition type for World Masters Games is to be Gross Stableford when displaying leaderboards on golf.co.nz.
- Add: TBClubSettings.RequireOnlyOnePaymentPerBooking setting added.  If this is turned ON (default is off), players will only have to pay for a single player on each booking before the booking is confirmed.  This was implemented for Takapuna GC.
- Add: TBClubSettings.RequireOnlyOnePaymentPerBooking setting added.  If this is turned ON (default is off), players will only have to pay for a single player on each booking before the booking is confirmed.  This was implemented for Takapuna GC.
- Add: Ability to let the club pay the $2 booking fee instead of the end user.
- Add: Ability to let the club pay the $2 booking fee instead of the end user.
- Mod: #6838 Okay, so that Math.Round() did not work - trying a different way.
- Mod: #6838 Okay, so that Math.Round() did not work - trying a different way.
- Mod: #6838 Corrected countback formula for Net competitions.  Because of the decimals involved and the fact that we count the 18H result for countback, the 18H decimal result was breaking ties when it should not have.
- Fix: #6880: Support Site: updated DotGolf logo
- Add: Ability to email ExtQuery reports anywhere via a cron job.  To invoke, curl up the following URL from a scheduled task:
- Fix: ClubCMS: rSubMenu: handle null CssClassName
- Mod: ClubCMS: On Par: Course List with Ads: removed unused CSS
- Mod: REVERTED MyGolf API client stuff for golf.co.nz - it's just too dangerous to publish this right now.
- Mod: Went back to .Net 4.5 for Public2012 given we only have 4.5 installed on Web4.  Not upgrading that to 4.6.1 right now!!
- Mod: ClubCMS: On Par Course controls: btn bootstrap css class update
- Mod: ClubCMS: Promotions control: responsiveness updates
- Fix: ClubCMS: jQuery conflict fix "$(...).on is not a function"
- Mod: sql: insert into CWControl and CWControlProperty tables for "Draw and Result Widget" and its properties
- Mod: ClubCMS: terraces3 template style update
- Add: #6359: ClubCMS: PGA: Draws and Results widget for the home page
- Mod: Refactor: Split Subs-related code from Shared.cs off into Shared.Subscriptions.cs (hopefully retaining Subversion history on the new file because it's a copy).  Eventually I'd like this stuff to live in DotGolf.Shared, but... baby steps.
- Fix: #6803: Green Fee visualiser was incorrectly tagging the selected green fee option as "weekdays" when you tick Mon-Fri and any combination of weekend days.  In this situation it should be picking "Selected Days", not "weekend".
- Mod: Removed unnecessary cursor code from api_SetGMChangeList.  I believe this is one of the reasons for SQL lockups in prod; found this in Profiler after a big block.
- Fix: Missing ajax loader image causes lots of exceptions to be logged.  Excluded from styles.
- Mod: Public: added a Women's Golf page; linked it from the Play Golf menu (under Senior Golf)
- Mod: GOTG: CGOrderDetail: add DateCreated column with default value
- Mod: ClubCMS: insert new controls and control properties
- Add: MyGolf API: Profile image delete/upload tested and debugged.
- Add: MyGolf API: Profile Image upload/delete endpoints.
- Add: ClubCMS: responsive Membership Form
- Mod: ClubCMS: Edit Member Details: update loading of css and js
- Add: MyGolf API: Ability to update your profile via the API.
- Mod: MyGolf API: Updated My Profile page to use API to retrieve player info.
- Add: MyGolf API: More fields to profile endpoint to support the Edit Profile page.
- Add: MyGolf API: Updated to use DELETE friends enpoint.
- Mod: ClubCMS: terraces3: added Center Left and Center Right panels
- Fix: ClubCMS: rSubMenu: fixed application of CssClassName
- Add: ClubCMS: responsive Page Name Label
- Add: MyGolf API: DeleteFriend endpoint.
- Fix: MyGolf API: Combined scores for friends not returned properly.
- Mod: MyGolf API: www.golf.co.nz Friends now uses the API.
- Add: MyGolf API: Code field.
- Add: MemberOrNonAffiliateId to MyGolf Api - Friends. Mod: Proper cased friend names.
- Mod: Org: Prizes (PGA): Include the withdrawn players, because apparently, they could still get a prize money. But Geoff PGA has to manually input a value for them since withdrawn players don't get a position in the results.
- Add: MyGolf API: Friends endpoint.
- Mod: Show played course in Home Club box for World Masters Games.
- Fix: #6482 For both gender competitions, division estimated players were not shown.
- Just some MetricMonitor updates.
- Fix: ClubCMS: (Holden Hidden Hole) Competition Winners: forgot to use the ThirdPartyId to filter the winners based on this ID
- Mod: ClubCMS: styling and responsiveness updates; make the Edit Member Details control usable by clubs (it was originally created for PGA)
- Fix: Adweb contracts uploaded as Word documents could not be viewed in the browser.
- Fix: Pass PassportId to ListScores.
- Mod: Added PassportId to List Scores method.
- Add: MyGolf API: Score details endpoint added.  Unfortunately the structure of the code in golf.co.nz was not suitable to adapt to the new API (lots of Data.Score usage), so I've left it as is.
- Mod: MyGolf API: Public is now calling the API for the My Golf dashboard and ScoresSummary views. Mod: Public is now on .Net 4.6.1.
- Mod: MyGolf API: ListScores method working now.
- Mod: ClubCMS: TeebookingTerraces3.Master (responsive): updated panels
- Mod: ClubCMS: shared UImageSlideshow: removed "hide" class from file uploader
- Fix: MyGolf API: Renamed to ListScoresAsync.
- Mod: MyGolf API: Updated interface (again)
- Mod: ClubCMS: responsive slideshow: updated loading of css and js
- Mod: MyGolf API: Updated interface.
- Add: MyGolf API: List Scores method; Advertising method.
- Add: MyGolf API: More methods.
- Add: MyGolf API: More fields for My Golf Default page.
- Mod: MyGolf API: Renamed methods to adhere to async pattern. Fix: Cast error.
- Mod: MyGolf API: Async deadlocks fixed when calling from Web Methods.
- Mod: GOTG: home banner update - easter theme
- Mod: MyGolf API: ListScoresWithinCountedPeriod added more fields.
- Mod: MyGolf API: ListScoresWithinCountedPeriod added UsedInUSGACalc.
- Add: MyGolf API: ListScoresWithinCountedPeriod.
- Mod: ClubCMS: added IncludeCss and IncludeScript, which makes sure that a certain css or js is included once only
- Mod: ClubCMS: On Par Course controls: updated js/css loading; updated styles
- Mod: ClubCMS: responsive image slideshow control: css / js registration; updated styles and js function name
- Add: API: Basic handicapping information to handicapping endpoint.
- Mod: Upgraded to .Net 4.5.
- Mod: Upgraded to .Net 4.5.
- Mod: Upgraded to .Net 4.5.
- Mod: Updated DotGolf.Reports to .Net 4.5.
- Mod: Updated to .Net 4.5 to work with new DotGolf.Shared framework version.
- Mod: Upgraded DotGolf.Shared to .Net 4.5 to enable async/await.  About time we do this... Add: Passport authenticated API client - stub, not used yet.  Added the API into the AppUrlResolver too - this needs to go in Web.config files everywhere.
- Add: Basic API stubs for handicapping.  Doesn't do anything yet - I'm just testing the architecture.
- Mod: ClubCMS: Course List With Ads control (On Par): responsiveness updates; cleaned up the code; segregated the Men and Women's markers (Bryan used to do a workaround for segregating those two)
- Add: Assertion for Autobooking tests - not previously committed.
- Mod: ClubCMS: Promotions control: responsiveness updates
- Add: #6766 The Draw Report shows a sponsors banner.  This banner will now also be shown on the Results Report (in Org), if uploaded.
- Mod: ClubCMS: responsive slick slideshow: show slideshow only after initialisation (eliminates the flickering); also simplified CSS referencing
- Add: ClubCMS: responsive Contact Details control
- Mod: ClubCMS: responsive image slideshow control: added new propery HideOnPageNames (basically copied from the content control); this would be useful for websites having a different image slideshow for the home page and the inner pages
- Mod: ClubCMS: responsive login control: added a default value for the login button text
- Mod: ClubCMS: renamed labels and control IDs to make them generic (as we're using this control not just for sponsor images)
- Mod: Public: updated the Annual Report image, as requested by Mel
- Fix: Build error reported only by VS2017??
- Fix: #6316: Live: updated the New Category link
- Mod: #6353 The Aged Subs Summary report can now optionally include amounts due in the future as well.  This is optional and is turned OFF by default - if the user checks the checkbox on the main report page, the Current header will change to Current+Future and any future amounts will then be included in the report (as well as all the drill through reports).
- Mod: #6691 Improved CSV export for Member Balances report - no longer export the ActiveReport formatted Excel sheet - now we output a flat CSV file that is actually usable for someone wanting to do Excel magic on it.
- Fix: #6311: Org: Show import and link competition when the registration is closed.
- Mod: Don't bother updating CWEmailRecipient.Opened because it is already done by the Email_UpdateCWEmailRecipient trigger on Email.
- Add: ClubCMS: - Added a TB master page for Terraces3 "TeebookingTerraces3.Master" - Added jcarousel plugins (I've always wanted to change the animation to fade instead of slide) - Added the font awesome css so I don't have to reference the cdn
- Mod: #6311: Org: Import and Link: renamed the link from "Import & Link to PGA" to "Import Players & Link Comp"
- Mod: #6311: Org: ImportAndLink: added messages to indicate that the import or linking has been done; updated a comment; hide the import button if there's no one to import
- Fix: #6530 On the Card Printing home screen (keypad) the Notes were displaying with HTML markup visible.
- Mod: #6311: ImportRegistrations: added additional conditions to make sure we're not importing Withdrawn/Deleted/Disqualified entries (unnecessary)
- Fix: #6311: BindRegistrations: preview Non Affiliates as well
- Fix: #6162 If you've locked a slot in a previous session, this slot should still appear as available when you're logged in as yourself.  This was a problem on the Wotif page of ClubCMS and Public.
- Fix: #6051 When you have 2 SCA screens open on different dates (or even SCA+Preprint on different dates), SCA will report script errors as cards are printed in the other window.  This is because the scorecard ID it is sent via SignalR does not exist on the selected date.
- Fix: Org: ImportandLink (Charles Tour): Corrected the BindCompetition query
- Fix: #6696 Twos made on the back 9 in a 9 hole competition showed up on the Results Report as "0" because there was a mismatch between NZCRData and RSResult.
- Add: #6565 4BBB 4 player teams added.
- Fix: #6159 DRAFT credit notes should not be imported from Xero.
- Mod: #6047 Added an explanatory message for people trying to register for TXT notifications when they are not a member of a TB club.
- Fix: #6684 In the situation where a person was a casual golfer before and have now got a membership, if they get booked in via another members' Friends list, the non-affiliate membership would stick and they would get (due to another bug) an affiliated greenfee - instead of playing for free because they are a member.
- Fix: #6686 If a category fails to be saved/created the @FailedReason was not shown to the user, instead a false "good" message was reported.
- Mod: I suspect this is causing an error in prod??  Bit confused at the moment.  [Edit 2:19pm: This wasn't the cause - it was because of a trace listener being added when I ran Recalc Results with trace=true.  This caused a bit of a mess and I had to recycle Live to sort it out]
- Fix: #6442: ClubCMS: Competition Results: only include rounds where IsMultiRoundCounter is true
- Add: Trace output so I can troubleshoot competition 530902 for remuera.
- Mod: Jennian Homes - Twos winners - Alter ThirdPartyCompWinner to add a ClubId column - Insert JH / Jennian Homes in the ThirdParty table - Stored procedures handles generating the winners and sending out the email. These were based on the Holden scripts. I'll need to create a job before April 10th which will use the two SPs
- Fix: #6591: Live: LoveGolf: corrected the "New Category" URL
- Fix: #6442: ClubCMS: uResults control: when getting the results, get the CompetitionRoundId / last round id as of the current date. Previously, it was using the id of the last round set up in the competition (which may not have happened yet).
- Fix: ClubCMS: PGA registration control: handle empty or null bank account number
- Fix: #6500 Competition Setup: Removing a competition type from the setup does not remove the underlying row from the database.  This results in duplicates when you untick, then tick, a particular competition type.
- Fix: #6482 Division player count estimation was broken due to new comp setup code.
- Mod: #6493: GOTG: Voucher Report: Added display of Order ID, Purchase Date, sort in descending order
- Mod: #6493: GOTG: Voucher Report: Added display of Order ID, Purchase Date
- Mod: Optimised index - Added IsVisitorToClub and included MemberId/CountryId.
- Fix: #6480 Error after deleting and re-adding a division on a competition.
- Add: Ability to freeze the competition handicaps for a competition to a particular point in time.
- Fix: When rolling back a casual golf payment batch via Slicer, if there are any order detail lines with null voucher codes, those transactions are set to unpaid, even though the orderdetail still has a slicer payment ID.  The next time payments are generated a DATA_INCONSISTENCY error is reported.
- Mod: #6463: Added an "Invoice Date" field (previously the date search filter was being used--tbDate), grouped the fields (into three sections) and updated the labels to make them more self-explanatory.
- Fix: Non-affiliate names did not appear on scorecards after the Firstname Lastname change.
- Mod: Got rid of old TabScores.aspx page and everything that still depends on it.  Everyone us using NGSE now so we should not need TabScores for anything anymore.  I've updated all the old links that take people to this old page too, everything now refers to /Score/Entry.aspx, the replacement.
- Fix: #6426 When creating a new competition with eligible categories an error would appear due to the CompetitionId being set to null.
- Fix: #6418 Competition setup error when saving a competition with composite markers - because CompetitionRound.CourseId and .MarkerId do not allow nulls; need to put 0 in there for these cases.
- Fix: Regression from #6357 and rev 25716: If a member is being renewed and they get new clubmemberitems added to their record, those items were created with NULL StartDate and EndDate values.  This in turn caused them not to be invoiced with these new amounts. Mod: In this scenario any new items should be IsRenewalDefault=1.  A value of 0 just causes more pain down the tracks.
- Fix: Missing package from Packages folder.
- Add: Implementation of quicksearch that searches Vend products by barcode or product name.
- Fix: For MyGolf account loyalty topups we need to set DPSCompleted, DPSCompleteAttempted, CapturedDate and CapturedAmount, otherwise Slicer won't pay out the money to the club.
- Fix: #6370: The hyperlink tool may be working but a few others are not: bold, underline, italics, size, font, alignment - Renamed toolbar classname from ql-format-group to ql-formats - Revert the old options for the size (actual font size to be used in the inline style) - Used Quill.register to implement inline styles https://quilljs.com/guides/how-to-customize-quill/ - Updated the bold, italic, and underline tools (from span to button)
- Add: Import, merge and create payments for Vend loyalty top-up transactions processed via our public website.  This does not include the payment reconciliation report mods; I'll do those next week once I have data in there to test with.
- Mod: Public site will now post tickets to Freshdesk instead of emailing them to dotgolf@golf.co.nz.
- Fix: #6370: Bulk Email: Since quill.js was recently updated to v1.2, there was code which didn't work anymore on the new version.
- Fix: Slightly adjusted the knockout bindings to get barcode scanning/searching more reliable in the POS.  The binding used to do an afterkeydown update, which meant that the return character could be processed (via event:keypress) before KO had a chance to update the viewmodel.
- Fix: ClubCMS: GetOverdueAmount: join only with non-deleted Invoices when querying overdue instalments
- Mod: ClubCMS: mobile.css added cache buster
- Fix: ClubCMS: GetOverdueAmount: While having a look at a different enquiry, just found that the GetOverdueAmount method should exclude the invoice record's outstanding amount if it has an instalment schedule set up.
- Mod: NZ Golf Bank Account Number
- Fix: Argh, had it in the wrong spot.
- Fix: Forgot NOCOUNT ON in the update trigger.
- Add: #6314 Scorecards are now printed with member names "Firstname Surname" rather than "Surname, Firstname".  This involved tidying up the Member FirstName/LastName columns and also adding a DisplayNameFS on the RSEntry table (for convenience mostly).
- Add: Vortex send for scores.added every time a score is inserted.  This is better than the TrackerLog based method as it is done in real-time.
- Fix: Competition.Eclectic property rename broke Public build.
- Fix: Nunit reference hintpath.
- Mod: Calculate Eclectic results immediately once an Eclectic type is added to an existing competition.  This avoids the need to wait overnight for results to be produced.
- Mod: Added tag into TrackerLog so we can see which barcode searches are being done.
- Fix: #6357 Calculate the start and end dates for cyclical renewals to be based on the member's previous subscription dates, not the @ProcessDate.  Not doing this would give the member an extra number of days upon first renewal.
- Mod: Skip blank lines in the incoming CSV.
- Mod: Public: OrderOfMeritStandings: cbEvent_SelectedIndexChanged: no need to refresh the Year dropdown list during this event
- Fix: Invalid cert path was passed into the Xero levy invoice export code - there is no HttpContext.Current here.
- Add: #6245 Ability to override the default Course Handicap Factor for a competition type.  This means you can now modify the Canadian Foursomes type to multiply by 0.4, 0.5 or 0.6 as the club desires.
- Mod: DotGolf Mailer performance enhancement - for email attachments we now cache an attachment in memory for up to 5 minutes (sliding expiration) - this will reduce the amount of IO we're hitting the database with in the case of sending out a bulk email with attachments.
- Add: Template app_offline file for use while publishing.
- Fix: Kiosk: Cards printed and paid for with loyalty should be sent with status == CLOSED, not SAVED.
- Mod: #4105: Live: Category setup: added back the validation for checking if Full Playing is ticked and Non Playing is selected in the Default NZG category dropdown. (We used to check the IsNonPlayingCategory checkbox, which has been removed in the previous commit.)
- Mod: #4105: Live: Removed "Non-playing category" checkbox. This was created for Aus before, and not it's not needed anymore (causes confusion only).
- Mod: ClubCMS: #6327: TemplatedPage: Updated UseSearchEngineOptimisation cache key and set an expiration (i.e. midnight).
- Fix: The boolean conditions for showing the Print Card(s) button as well as Cashier / Loyalty was not working properly - Print Cards should be hidden if Cashier/Loyalty are shown.
- Mod: ClubCMS: mobile template: added the rev id in the css reference (cache buster)
- Fix: ClubCMS: Mobile: Results page: updated the UResults.js path
- Fix: ClubCMS: Course.MarkerNameToColor: corrected a typo error from "c" to "c2" to return the correct colour for marker names with two words e.g. Muriwai's "Gannet Red" should return "Red". Previously an empty string is returned.
- Mod: ClubCMS: UImageSlideshow.ascx: just updated the form labels
- Fix: Vend: Green fee product count not quite right yet.
- Mod: Vend: Improved error detail when a post to Vend fails. Mod: Throw an exception if the Complimentary product cannot be found. Fix: Green fee product count was incorrect in the UI.
- Fix: We didn't sync Complimentary green fees to Vend.
- Mod: ClubCMS: TournamentList: put back the link to the competition name
- Fix: Comp Setup: An error was produced when you tick any hole list competition type (Twos, Net Eagles etc); due to a database transaction reference not being passed to an Execute method. Fix: Comp Setup: The Recurring checkbox was never shown, making it impossible to create repeating competitions. Mod: Comp Setup: Added a progress bar so that it's obvious that something is happening, not just a greyed-out Save button.
- Fix: #6338: ClubCMS: contact details control for mobile site: used the google maps control to load the map (which now uses the GoogleMapsAPIKey)
- Add: Kiosk notes now support Markdown, so you can format the text, embed newlines and even insert images.
- Fix: #6114 Invalid cast error caused by new limited category MaxNoOfRounds code.
- Mod: ClubCMS: Promotions control: style updates
- Mod: ClubCMS: Promotions control: moved application of CssClassName to parent tag / div (Panel). Updated read more button styling.
- Fix: The code that updates the CMember.VendCustomerId value was not filtering by ClubId, so all club records were affected.
- Fix: The code that updates the CMember.VendCustomerId value was not filtering by ClubId, so all club records were affected.
- [MAJOR] Mod: Competition Setup code refactored to get rid of the Entity Framework dependency. Fix: #6332 This commit also takes care of this threading problem where a static variable would cause competition IDs to cross pollinate when different users load the competition setup form up at the same time.
- Mod: Removed EF test code from Test.aspx in preparation for Competition Setup refactor.
- Fix: ClubCMS: jQuery conflict with jcarousel
- Mod: ClubCMS: TournamentList: just removed the link from the competition name (unnecessary)
- Fix: Annoying problem where, if the floating Save / Cancel button bar is visible in competition setup, then errors will be shown as "Saved successfully" even though it was really not.  Scrolling down would reveal the error message in this case.
- Mod: sql: added new control properties for the existing control, TournamentList
- Fix: ClubCMS: Tournament List: added three new control properties (page where the competition links off to depending on its status): Draw Page, Players Page, Leaderboard Page
- Add: #6311: Org: Show "Import & Link to PGA" link to NZG competition with "closed" status
- Mod: Org: Revert the last change done to this stylesheet--Revision ID 25659
- Mod: Public: added NZ Wine Society logo in the scrolling partner logos
- Mod: Live: Direct Debit Preview: added sorting to the preview data i.e. by Surname then by First Name
- Mod: Org: CSS: stick footer at the bottom of the page
- Add: #6311: Org: NZG: under the Players section, show and "Import & Link" link for NZG competitions
- Add: #6311: Org: NZG and PGA: import registrations and link competitions (e.g. Charles Tour)
- Fix: #6306 Another place where CourseId was not set on the link to SearchSlots. Mod: Added caching into the My Golf homepage for My Bookings.  Not sure why this was never there but ought to help performance.  The My Bookings page already does this using the same cache key.
- Mod: Set the thread priority to highest while running this test as the timing is sensitive to CPU load.
- Fix: Changing the cache key is not an option because the shared library and other projects use the same key.  Better to wait 5 minutes for it to expire and code to include a CourseId column if the table is still old.
- Mod: ClubCMS: Promotions control: added the standard promotions styling applied to all sites (Bryan used to add these styles to each site's upromotions.css)
- Fix: #6306 For multi course clubs the CourseId parameter wasn't passed to SearchSlots when you click on the date in My Bookings.
- Mod: ClubCMS: Promotions control: added CssClassName property
- Mod: ClubCMS: Promotions control: added CssClassName property so we could easily customise the styling for this control
- Mod: ClubCMS: #6308: Promotions control: added properties: DisplayMoreButton, MoreText, PromotionsPageName
- Mod: ClubCMS: #6308: Promotions control: added properties: DisplayMoreButton, MoreText, PromotionsPageName
- Mod: ClubCMS: #6308: UPromotions control: added new properties: IsLimitedRandom, NumberOfPromotions
- Mod: ClubCMS: #6308: UPromotions control: added new properties: IsLimitedRandom, NumberOfPromotions. Cleaned up code using CodeMaid. Added ClubWebsite.GetRandomPromotions.
- Fix: #6305: Updated the google maps js based on https://developers.google.com/maps/documentation/javascript/adding-a-google-map Also found that the previous code wasn't using the API key defined through the control property.
- Mod: Live: If club has CW, SUBS, and SUBSP products enabled, add a note about the ability to pay online.
- Mod: ClubCMS: Add referencing to NZGreenFeeData..Club for golf club membership payments; added div classes for easier reference to divs
- Fix: #6301 Clarified public holiday checkboxes - they should be ONLY public holidays and EXCEPT public holidays as the fields map to a tri-state bit.
- Mod: ClubCMS: rMy Account control: updated styles
- Mod: GOTG: Added "Order No" to voucher pdf.
- Mod: ClubCMS: Forgot Password control: update text; handle invalid username exception
- Fix: Passport: GetUserCredentials: use ClubId and LocalMemberCode instead of CentralMemberCode to match the entered username in the Forgot Password area. Mod: Passport: SendForgotPasswordEmail: updated the validation done on the entered username
- Mod: ClubCMS: Forgot Password: updated styling
- Mod: ClubCMS: Forgot Password: added validation of member ID length; updated the message styling (green for success, red for failed request)
- Mod: If an 18 hole member plays 9 holes, that round is counted as 0.5 rounds; similarly if a 9 holer plays 18, that round is counted as 2.0.  This count is for the purposes of enforcing the category Max No. of Rounds restriction.  Previously 18 hole members playing 9 holes would be penalised because a 9 hole round would notch off a full round from their membership category, forcing them to start paying green fees earlier than they should have to.
- Test that USE statements stop a commit.
- Test that USE statements stop a commit.
- Test that USE statements stop a commit.
- Test that USE statements stop a commit.
- Add: New schema script scripted off NZ1 and hacked to include schema up to 2148.
- Mod: Make TabReports.aspx load up more gracefully; in dev with a debugger attached it throws exceptions all the time, and in prod it would be logging these exceptions.  Now we don't throw an exception on load unless we have to.
- Mod: Moved from Embedded deployment of Tuespechkin to a static deployment.  This means that the WKHTMLTOPDF utility has to be installed on the webserver, but I have no other choice as the embedded one doesn't work.
- Mod: Org: csv overseas prize file export: added a country field
- Mod: Org: PGA Tax Statement: non-NZ based are also subject to W/Tax. Basically reverted to the original code (Rev 25099), except that $0 prize is excluded and the non-NZ winners are included
- Fix: #6291 Because of the fact that we now support nulls on ScoreEclectic hole scores, the ordering can be messed up in the results (null sorts above numbers).  It also caused an exception when viewing Eclectic results (cast error in public).
- Mod: GOTG Voucher Report: display only "expired" when the voucher is not redeemed
- Mod: GOTG: Added Vouchers Report: where merchants (or NZG/DG) can view a list of redeemed and unredeemed vouchers (the voucher code itself is not displayed)
- Add: GOTG: Vouchers Report query
- Add: Missing pieces into Slicer Reconciliation Report - GEAP and PGA subs into both sections.  Also fixed up a few places in the proc that was not picking up on transaction fees from ASB.
- Add: Org: PGA watermark logo
- Mod: Org: updated prizes overseas winners export query to include all non-NZ winners
- Mod: Org: PGA: Updated the prize statement report query to include non-NZ winners Fix: When the selected year is changed: 1) refresh Competition dropdown list 2) clear the results
- Fix: Inadvertently broke club tournament registrations.
- Add: SUBSP product and Adweb bank account number check.
- Fix: Rookie error, damnit.
- Fix: SetPaymentsCompleted() didn't set the SlicerPaidDate value onto CGTransaction if there are any CGOrderDetail records with NULL VoucherCodes.  This caused an error when Slicer was retrieving transactions to be paid out.
- Fix: #6286 Competition setup did not load the correct markers for each round date (in the case of a multi marker multi round competition).  If a marker didn't exist at the time of the competition starting (usually R1) that would cause the marker to be invisible for selection for all rounds of the competition.  I've modified this so that the marker select control in multi-round mode now uses the RoundDate and not the competition date.
- Mod: Support CWEmailRecipient.MailMergeJSON object for doing custom tag replacement in outbound bulk emails.
- Mod: Added OnlineA2A PaymentType
- Mod: ClubCMS: My Account Payment Confirmation control: handle result of A2A transaction - use PaymentType.OnlineA2A (ID 715) for A2A payments
- Add: sql: Payment Type "Online - A2A"
- Add: Field to CWEmailRecipient to hold an optional dictionary of fields that may be used to replace values in the email compose template before emails are sent out.  This is for the NZGolf survey being sent soon.
- Fix: Quill toolbar definition updates; the old toolbar format has changed so would no longer work.
- Fix: Quill toolbar definition updates; the old toolbar format has changed so would no longer work.
- Fix: Remove link-tooltip module as you don't have to import it anymore in Quill 1.0+
- Mod: Updated to Quill 1.2.0 to try and fix range error when adding hyperlinks to bulk emails.
- Fix: Don't know how we missed this before, but the Manage Players link sometimes went back to the old Registrations.aspx page which does not exist anymore.
- Fix: Email Template management screen was overwriting changes with the default every time you save. Mod: Add help text that explains that the templates are NOT used for www.golf.co.nz (there are a few hardcoded templates in there that are different per association so I couldn't make them use this too)
- Fix: Removed Debug.WriteLine.
- Fix: Changed from a single value to a list of guids to prevent more than 2 payments to the same invoice messing things up.
- Fix: #6283: Just added the missing "u.SlopeRating" from the query. The script was previously broken because SlopeRating is used in the "order by" clause.
- Mod: Allow associations to control the templates of the emails that are sent out when tournament registrations are created or statuses are updated.  You can also completely turn off the notifications (which we'll need for the NZG charity event this year).
- Fix: #6282: Live: Subs: DD Export: assign a unique Xero Payment ID to each DotGolf receipt record. Previously for example, two receipts were being assigned the same Xero Payment ID, and this was causing extra receipt records created during the scheduled Xero import (as the other Xero Payment ID is not found in DotGolf)
- Add: SyncFreshdeskTickets tool.  This loads all updated tickets from Freshdesk via the API and saves them to a table called ExtTicket; schema follows.  It's presently deployed to WEB4 as a scheduled task running every minute.
- Add: Directory for the Freshdesk sync tool.
- Mod: ClubCMS: Online Membership Form control: added new optional field, "Introduced By"
- Mod: ClubCMS: Online Membership Form control: added new optional field, "Introduced By"
- Mod: CWMembershipApplication: add new column: IntroducedBy
- Mod: Public: Removed Choice Hotels from the scrolling images
- Mod: ClubCMS: PGA member earnings control: Added totals at table footer and modified the Year dropdown / date filtering to make it a financial period
- Fix: Results report was showing overlapping text in HTML preview mode.  This was because of the new Edge styles that use 20px line heights.
- Fix: #6277 If there was a pickup somewhere in the round, the gross value turns out to be null and our total properties didn't support that.
- Mod: DebuggerNonUserCode added to report class to stop it annoying me with a breakpoint on exception.
- Add: Tournament registration payments are now included in the Slicer automated reports.  The emails include full details on every registration, refund, manual registration and SMS charge.
- Mod: Live: Allow the user to preview the payments to be included in the Direct Debit export. Clicking on the "Preview" button will open a pop-up (fancybox) showing the data to be exported.
- Fix: Product type is now set to Greenfees when sending to vend (on green fee update).
- Fix: Changed "Commission" to "Merchant Fee".
- Fix: #6268 When a receipt is voided in Xero and it has a payment type ID other than 707 (imported from Xero) that receipt would never be voided in DotGolf.  Because we create payments for the PGA (via ClubCMS) with paymentId 700 (paid online) this caused duplicate receipts for invoices if receipts where manually voided in Xero.
- Add: Allow saving a Sales Account Code for vend products created in response to green fee changes in DotGolf.  This will make Vend code sales invoice lines for these products to the correct Xero account. Mod: The product supply price is now sent to Vend as $0.00 as per Hugh's request.
- Mod: Public: updated the Google ads html and script: Vyne and NZG are now managing/filtering the ads to be displayed on golf.co.nz - handle "/home.aspx" as well in the script condition
- Mod: Public: updated the Google ads html and script: Vyne and NZG are now managing/filtering the ads to be displayed on golf.co.nz
- Add: Debug code to see if there is a discrepancy between invoice payment ids and the local paymentid variable, which could explain this bubble issue: http://adweb.golf.co.nz/teebooking/ViewTicket.aspx?TicketId=6983411
- Fix: ClubCMS: Tax statement / earning control: Updated the formula for W/H Tax, Nett, GST, Total Paid; fixed the year filtering
- Fix: #6252 Handle pick-ups correctly in Eclectic competitions.  To do this I had to allow NULLs on the ScoreEclectic table Hole columns.  0 or 9999 are not appropriate values to indicate a pickup (invalid score) as they still produce a value when summed together to form a total.
- Mod: ClubCMS: PGA tournament registration control: updated the message that appears when an overdue member tries to register into a competition so that they would know to go to the Member Login page first to login (and then check their balance through My Account). Made this a control property called "OverdueMessage".
- Fix: The Most Improved Golfer report was running slowly on occasion (when the system is under load), so I've done some performance enhancements on the report query.  This uses a TOP clause instead of MIN/MAX aggregates to calculate the earliest and latest play dates; query plans put it at about 20% of the cost of the original query.
- Add: Slicer transaction report for Subscriptions (PGA only right now).  This renders out like the following:
- Fix: Proper capitalisation for Macklin.
- Fix: Optimised Bulk Email Sent Items / Drafts queries - they were taking a very long time to run on Prod.
- Mod: Improved DPS service port autodetection by re-trying if it fails.  This will keep trying until the PX SCR Controller service (or the old PXWS service) comes up, even if the DotGolf Connector service is started first.
- Fix: Credit note allocation amounts were not being saved correctly because I was referencing AppliedAmount instead of Amount.
- Mod: Disabled automatic posting of negative DotGolf commission lines into Xero for PGA. Fix: If the above was enabled, the unique receipt string wasn't on the commission lines, so they could not be found easily.
- Mod: ClubCMS: Player List control: rephrased "rankings per page" to "items per page" and made it a control property
- Fix: ClubCMS: Tournament Player List control: fix the page css class name assignment
- Mod: Add a unique string into the receipt reference so that it's easier for the PGA to reconcile.
- Mod: ClubCMS: Tournament Player List control: display profile photos from the fileserver: img/members/ This is where the profile photos are stored now. (When a PGA member uploads from the PGA site > Member Profile page; when a member uploads from the public site.)
- Fix: XeroLogs log file should be .json, found another place where it was still .xml.
- Fix: Typo caused SQL error.
- Fix: ModifiedSince was not passed to Xero, resulting in ALL invoices being re-imported.  Sadness :(
- Fix: sql: oom_GetStandings_Pga: comment out "and rpm.Prize > 0" to count all the events the member played at, whether or not there's a prize money received
- Fix: ClubCMS: PGA OOM control: updated the sp, oom_GetStandings_Pga, to include / count all events where the member played (whether or not they got a prize money). In this overall OOM control, I added a filter to show only the rows / members with positive total points.
- Fix: Could not do a direct debit export for the PGA because of an uninitialised object when posting tracking categories to Xero. Fix: Could not rollback an exported batch due to a transaction deadlock (code running in transaction but tx reference not passed to inner database calls)
- Mod: Public: Replaced Adhub with Google Ads. Removed temporary ad from AboutDotGolf.aspx
- Mod: Public: added EZGO in the scrolling partner images
- Mod: Public: added EZGO in the scrolling partner images
- Fix: If a receipt was issued online (so it has no UserSecurityId) the receipt could not be viewed from DotGolf Live.
- Fix: #6238 Smartpay identified a crashbug in the POS when recovering from a power failure or unknown EFTPOS result.
- Mod: Public: added Google Ads script temporarily just on the DotGolf page. (On February 1st, it'll be moved to the master page.)
- Mod: Removed another reference to the old note tables (ClubMemberNote view and search page). Fix: NonAffiliate notes were not being returned in the search.
- Mod: Moved member notes from CMemberNote and NonAffiliateNote tables into the PassportNote table, updated the source to use this new table instead of the old ones, and added a script to transfer the data over, renaming the old tables for deletion.
- Mod: ClubCMS: PGA edit member details control: separated saving of GST Num and IRD Num. - UpdateMemberDetails is used by other controls and assigns the old values if the gst and ird are null. - It is useful to have a separate update query because when a PGA member who's a member of a club as well updates his club profile (which doesn't have a gst field nor the ird field), the old gst and ird values will be retained. And if he updates his PGA profile, we could assign a value or null value.
- Ignored some stuff.
- Mod: Refactored warehouse tests to have a generic TestRec<T> wrapper so that I can pass in any data type.
- Fix: Better way of addressing the duplicate IsCurrent=1 dim_CMember records.
- Mod: sql: CWControlProperty inserts: Tournament Registration controls
- Mod: ClubCMS: PGA: add back the option to turn on blocking of the tournament registration of a member with overdue subs / membership. This will be initially turned on on the PGA site.
- Didn't work - dammit.
- Add: NuGet.config to attempt to make DotGolf.Shared keep its packages inside its own folder, not in the solution root.
- Mod: Renamed file - oops.
- Fix: Stop duplicate history rows from crashing the import. Mod: Upgraded to Newtonsoft.Json 7 Mod: Refactored unit tests and added code to nuke the test warehouse data in debug mode prior to running.
- Fix: dim_CMember row sometimes introduced with IsCurrent=1 even though it is not (in the case where StartDateId=EndDateId)
- Add: Cool little extension method to SqlConnection so that we can now insert rows into a table in a Dapper-esque way.
- Fix: Org: Prizes: bank file export: display the exception message
- Mod: Public: Removed "Adhub" from the scrolling footer logos
- Fix: ClubCMS: PGA: Leaderboard control: cast StartTee to nullable int (int?)
- Fix: Analytics: A rounding error in the estimated cards printed (which is calculated by multiplying by 1.333) was truncated instead of rounded, which caused incorrect grand totals on the by-region reports (and those did not match the top level report).
- Mod: sql: insert new control properties for: - terraces2 Course Control: FullWidth and FullHeight - Tournament Registration Payment: TermsAndConditionsPage
- Mod: Public: added NZGCharityEvent page which will display the nationwide NZG Charity competition result
- Fix: Removed an annoying ISG log message.
- Add: Ability to search for casual golfers by membership number from inside Org.
- Add: Ability to resign a casual golfer from inside Org.
- Ignored some stuff.
- Fix: #6227 IsProfessional column was not present in dataset because of missing AdditionalColumns parameter.
- Mod: Reinstated the Rounds Played By Date report as we haven't quite got the Analytics version of this ready for production yet.  Clubs are asking for this.
- Add: Xero settings page improved to add a connectivity checker.  This displays OK if Xero is talking, or a diagnostic/error message if not.
- Mod: Refactor automatic allocation of credit towards invoices and added the same logic to manual invoice creation. Fix: Error handling is better in the case of validation errors when creating invoices.
- Fix: Compile error after merging credit note allocations and upgrading to Xero-Net. Add: Nice dialog to ask the user to re-authenticate Xero if connection to the API fails.
- Mod: Partial commit of allocating outstanding credit notes to newly generated subs invoices.
- Ignored some stuff.
- [MAJOR] Mod: Upgraded to Xero-Net v2.2.0 from XeroAPI 1.x.  SQL scripts.
- [MAJOR] Mod: Upgraded to Xero-Net v2.2.0 from XeroAPI 1.x. Add: NoPaging() extension method to allow us to retrieve ALL items from an endpoint.  The new Xero API SDK forces paging, and I didn't want that. Add: Private app support to XeroInterface.Common.
- Mod: ClubCMS: style updates
- Mod: ClubCMS: PGA: added the Payment Express logo on the payment page; added a Terms and Conditions checkbox and a link to a Terms and Conditions Page (this is for PGA payments, since we store their Billing ID)
- Mod: ClubCMS: PGA: registration control css
- Mod: ClubCMS: PGA: when the member is already logged in, don't require to enter the credentials on the registration form anymore. (It makes sense not to ask this again.)
- Mod: ClubCMS: added a payment express logo image file
- Mod: ClubCMS: updated display of "Registered" status
- [MAJOR] Mod: Upgraded to Xero-Net v2.2.0 from XeroAPI 1.x.  This changes everywhere that touches the Xero API, including error/oauth exception handling changes. ** THIS WILL BREAK ORG (and maybe ClubCMS) - I'll fix that soon. ** Mod: Added a dedicated XERO product for clubs so that I can tell when a club is Xero enabled, but does not have a valid token.  In this past this state was ambiguous. Mod: Allow disconnecting from Xero the same way as you connect (using the Disconnect option on the Subs Settings page).  This only invalidates the access token, it does not actually unset the XERO product; so the integration will cease to function until Xero is connected again. Fix: Clicking Save Changes in Subscriptions Settings takes you back to general settings, not /Settings/SubsInvoices.aspx. Mod: Dropped all the legacy Xero fields in the ClubSetting table, replaced by AccXeroTokenJSON and AccXeroRequestTokenJSON.
- Mod: GOTG: updated the banner image
- Fix: #6225 For Nomads we don't have a scorecard, any results or any resultentryscore records.  RSCompetitionRoundSegmentEntry rows are already present due to the players being added into the draw, and there are no scorecards yet.  This was broken for them in rev 24443; ticket #5904.
- Mod: ClubCMS: CWControlProperty inserts: insert new properties for the existing registration payment control
- Mod: ClubCMS: Registration Payment control: Add new property "IsEnableAddBillCard" which we can tick for PGA to allow Payment Express to create a billing ID for the person paying (given the tournament DPS user id) - We would normally just store Payment Express billing id for PGA tournament registrations (not for 5CC, etc.)
- Mod: ClubCMS: On Par Course List control: hide "brought to you by" section at the bottom if there's no image
- Mod: ClubCMS: tournament registration: put back use of payment express billing token so PGA members won't have to enter their credit card details every time (just the CVC)
- Fix: Nomads (902) were not seeing any competitions when they try to use score entry to enter their scores.  Turns out this is a problem caused by rev 25063 as Nomads does not play on their own course.  I've changed this query so that competitions with Competition.ClubId set to the current club are returned if the club is a T2 club (going by the products).
- Mod: Moved TabCategories.aspx and TabCategoryDelete.aspx into their own folder (Categories) and shortened their names.  This is in preparation of refactoring the UI to enable age-based subscription amounts; it should make things a bit easier if I can separate the controls for maintaining the sub amounts into a different page.
- Fix: Updated the DPS_PXWS_USER_ID (Test account) from "DotGolf_Dev" to "DotGolfDev"
- Add: processing of GEAP subscription auto-renewal. But this would be made active in December 2017.
- Ignored some stuff.
- Fix: Validation issue in Analytics did not allow a previous year to be selected for the custom date range.
- Fix: #6203 Country field was never saved when creating a booking.  Also none of the details were updated when the booking was subsequently edited and saved.
- Mod: #6177 Rearranged links on the Draw edit screen and clarified help text.
- Fix: Dammit, typo!
- Fix: DPS listens on port 65, not 67, dammit!
- Mod: Wait 2 minutes before restarting the kiosk keepalive.
- Add: Ability to enable a mode on the tray app to keep the kiosk running if it crashes or is terminated for any reason.
- Fix: #6207 Error while trying to select a playoff winner for a tournament with multiple competition types (Gross and Net in this case).
- Mod: Test change to verify connector updates.
- Mod: Inconsequential change to test the updater.
- Fix: Version number display incorrect.
- Mod: Fixed incorrect version number in new installer.
- Mod: Built a new installer.
- Mod: Added some error checking and logging into the updater as it seems it is not working on all computers (specifically those missing the .Net 3.5 framework). Mod: Changed to the .NET 4.0 version of wyUpdate.exe.
- Fix: DPS crashbug in autodetection. Mod: Added version number display to tray app.
- Mod: Public: GEAP: set values for IsAutoRenewal and SubscriptionRenewalDate when the GEAP subscription is successful
- Mod: sql: GEAP: update the IsAutoRenewal and SubscriptionRenewalDate of existing successful transactions. Moving forward, these two new columns will be auto populated for new successful registrations.
- Mod: sql: add two new columns (IsAutoRenewal and SubscriptionRenewalDate) to the existing PassportThirdParty table
- Mod: Public: GEAP: add a functionality to cancel the auto renewal (data for auto renewal is in the PassportThirdParty table)
- Fix: Performance issue in Entries and Result report pages.  Since we normally view entries and results in the context of an already selected competition, I've added a fast method of getting the competition name and putting it in the combo (which is disabled in this mode anyway).  This gets rid of the slow competition list query.
- Fix: No CaptureDate and CaptureAmount on RawSubsTransaction.
- Mod: ClubCMS: sql: added control properties for the login bar and the new course v2 control
- Mod: ClubCMS: Course v2 control: added new property, MarkerNameSortLast
- Fix: #6197 Cart fees were not showing properly to secondary members.
- Mod: ClubCMS: Login Bar: add "New User?" link (code based on Login control)
- Mod: ClubCMS: Coursev2 control: update div-navigation z-index when popup is shown / hidden. The Christchurch layout setup needed this.
- Fix: The Subs Summary Chart on the homepage was not filtering out deleted invoices.
- Mod: ClubCMS: terraces2/UCourse.ascx:  allow closing of popup window simply by clicking outside the popup
- Mod: ClubCMS: PGA: MyAccount: display receipt.DocumentDate instead of the CreateDate
- Mod: ClubCMS: GetPaymentsByMember: return the DocumentDate as well in the query
- Add: sql: CWControl CWControlProperty inserts: Course v2 control, and new ZoomLevel property for the Contact control
- Mod: ClubCMS: Course v2 control: updates on the marker table, styling, buttons
- Add: ClubCMS: Course v2 control - to be used initially by Christchurch
- Add: ExtQuery now supports exporting reports to PDF.
- Mod: ClubCMS: Terraces2 Contact control: added "ZoomLevel" property (Methven wanted to zoom out the map a bit so that Christchurch would be seen on the map. Apparently, the ZoomLevel property is already existing in the UGoogleMap control, so I just had to pass along a value to it.)
- Fix: ExtQuery: Problem where aggregate rows will have an incorrect number of columns if there are any columns with IsHidden=true on a data source. Fix: Numeric aggregates were not right-aligned as normal data rows are.
- Add: ExtQuery: NullText is now supported on the base formatter, so you can substitute nulls with text on any column.
- Mod: Don't crash the whole service if DPS says something bad.
- Fix: Incorrect Smartpay DLL path caused wyUpdate updates to fail building.
- Fix: Smartpay DLL could not be found by wyUpdate.
- Fix: sql: oom_GetStandings_Pga: comment out the condition member.Clubno = 907 as this omits all PGA members who are golf club members.
- Mod: Got new SCR DPS terminal integration working.  This uses a very similar XML interface to the old PX service that we used to use with the Ingenico ones, but has some subtle differences that I had to code for.  Also the service runs on port 2008, not 67, so I have built in some autodetection so that we don't have to change any configuration settings.
- Ignored some stuff.
- Fix: ExtQuery: Don't render HTML links when exporting CSV files.
- Fix: Another couple column errors.
- Fix: Must declare the variable @RawXML - error in Adweb slicer doing the import.
- Mod: #6131: Allow members to book elsewhere after cancelling themselves out of an initial booking where other players were also booked.  In this situation those players will own their bookings so that the member is no longer stopped from re-booking themselves.  Technically they can now re-book an unlimited number of times; I don't really have a good way of stopping this from happening - perhaps we can introduce some sort of counter if this happens?
- Fix: ClubCMS: Edit Member Details shared control: added Region dropdown field because I just found that for PGA members who are members of a golf club, the region id value is erased when saving the member details from the home club site.
- Fix: ClubCMS: Edit Member Details shared control: added Region dropdown field because I just found that for PGA members who are members of a golf club, the region id value is erased when saving the member details from the home club site.
- Fix: ClubCMS: Edit Member Details shared control: added Region dropdown field because I just found that for PGA members who are members of a golf club, the region id value is erased when saving the member details from the home club site.
- Add: Couple of Elvis operators to see if the .NET 4.6.1 upgrade worked.
- Mod: ClubCMS: terraces2 and terraces3 template: added pageid-[ID] as div class enclosing the content so we could easily apply CSS to a particular page without relying on the page name
- Mod: ClubCMS: PGA: OOM control: updated the Year query (for the Year dropdown)
- Mod: ClubCMS: MyAccount: updated the Payment Express account to "DotGolfSubs" (this will initially be used to accept subs payments on the PGA site)
- Add: GEAP into Slicer.
- Fix: Org: PGA: remove from dtList players not part of the rankings (No. is null)
- Mod: sql: CWControlProperty: inserts a new property for the Course List with Ads control. This will allow us to indicate which course to display by default. e.g. Maungakiekie A (for Maungakiekie club site)
- Mod: sql: CW_UpdateMember: altered the sp so that the CMember record being updated is only for the club (of the club site) where the member is updating it from. E.g. PGA member edits his PGA cmember details
- Mod: Live: PGA: Reverted Revision 25161 where I changed the code to insert the articles separately into CWNewsArticle for PGA. PGA could just manually create their website news articles if this doesn't work for them. We're reverting because PGA sometimes creates one long article and use subitems as article sub sections (which all relates to one article)
- Fix: #6160 Default markers for women don't work in Scorecard Admin.  This was because the gender was assigned after the markerId, and the courseMarkerSelect control then defaulted the marker to the first one in the list because the womens marker was not valid for men.  To fix this I moved the Gender assignment to the onSelecting event of the memberQuickSearch control, not the onSelected where it used to be.
- Mod: This may look a little odd, because of the parameter @affiliate. I believe the actual meaning of this (based on the UI) is "Affiliated Visitors". It was causing problems with counting people twice when someone was a secondary member at another club. e.g. 4888738 - ATTILA BORZSONY played at Whangarei on 19/12/2016 in the http://live.golf.co.nz/tabrptroundsplayedbydate.aspx report.
- Fix: ClubCMS: Course control (terraces2): just handle when there's no markers returned before binding (saw an error on the Maungakiekie site only)
- Mod: ClubCMS: Course List control (On Par): add a DefaultSelectedCourse property so that we could define through AdWeb which course to select by default.
- Mod: Vend+POS: If a sale gets interrupted while an EFTPOS transaction is in progress, the sale will automatically be recovered when the user navigates back to the POS.  If the result from the EFTPOS terminal is unknown the POS will prompt the user for the status of the transaction.
- Fix: Teebooking carts. Hide message for carts booking time limit when club does not have carts. Fix: Teebooking carts. Cart fee summary box background style colour fix.
- Fix: Teebooking carts. Hide message for carts booking time limit when club does not have carts.
- Add: #6133 ClubCMS now has implemented new Cart setting where carts cannot be booked after the time of the setting is passed.
- Fix: #5950 Vend webhook payload was being Url decoded, but this broke UTC dates in the json as it was decoding "+" to " ". The payload does not look like it is Url encoded coming from Vend, so the decoding is now removed.
- Add: Teebooking - cart booking is now included in tee bookings. The code was ported over from Public solution.
- Fix: #6109: POG was not correctly filtering out Internet Only green fees (they should only be shown if a person has already paid online at that rate OR the user has previously clicked SHOW ALL). Fix: Discovered while fixing the above that the POG does not show internet specials to the admin for non-affiliates who book and pay online.  Fixed.
- Fix: Analytics: Drill-through RoundsByDate report was not working due to new date fields.
- Fix: Validation issue stopped the normal report modes from working.
- Mod: Removed Rounds Played By Date report (green fee section) and replaced with new ExtQuery based report which uses the data warehouse as the data source. Mod: Removed same report from favourites so it can't be invoked that way. Add: New ExtQuery report JSON inserted.
- Mod: ExtQuery: URL parameter added so that we can view past versions of a report.
- Add: ReportDefinition now supports editing large blocks of SQL via the Designer view.  This means we're no longer forced to use stored procedures when editing larger reports; the sql just gets embedded in the report now.
- Mod: ExtQuery: Added styles for generic picker. Mod: Allow format strings in the HyperlinkFormatter template tags, eg. ${Date:d/MM/yyyy}.
- Fix: WarehouseBuilder: Deleted scorecards were being imported into the warehouse in a specific case.
- Fix: Rounds by Date Report: Number of green fee cards was not being calculated properly due to a distinct that was missing.
- Mod: If the MemberID is null, we need to consider them as a non affiliate scorecard.
- Fix: More connection leaks in TeeBookingRepository.
- Fix: More connection leaks in TransactionRepository.
- Fix: Found another connection leak in TransactionRepository.GetLines().
- Mod: Explicitly destroy connections after Linq to SQL has had its way with them.  Just disposing L2S does not seem to do the trick, we have to manually close them.
- Fix: Explicitly dispose the connection in the ProcessLogin() method as we seem to be getting connection leaks here.
- Add: Adweb: GOTG orders are now shown in the reconciliation report.
- Fix: Receipt data was not always logged in TBTransaction table.
- Fix: Changed ALTER to CREATE since this proc is not present in our test database yet.
- Mod: Smartpay integration: Full screen feedback modal popup to stop the user doing anything while the transaction is happening. Mod: Increased the transaction timeout to 30 minutes.
- Mod: Public: Added link to GEAP in the MyGolf submenu and the MyAccount page
- Add: PGA subscription payments integrated into Slicer.  This is completely untested due to a lack of real completed transactions.  We'll have to test this tomorrow when Alan does the slice.
- Fix: #6137 When accessing the event calendar whilst NOT logged on, the event register button was available. Upon clicking the button an error is generated for "no passport id". The Register button now only shows for members logged in.
- Fix: Analytics: Date validation was not working correctly. Fix: The @Section was causing weird stuff to happen because the script tags were outside the block.  Moved to inside the block and updated all pages.
- Add: #6133 Implemented new Cart setting where carts cannot be booked after the time of the setting is passed.
- Add: #6133 New setting for Carts added, to restrict booking of carts to before the specified last time allowed.
- Mod: Added the ability to select any custom date range for the Rounds By Date report. Fix: Moved scripts from the layout into the script bundle. Add: Bootstrap datepicker configured correctly to stop conflicting with jQuery-ui one. Mod: Upgraded to latest version of MVC5. Fix: Model serialisation was not using the Global.asax configured JsonSerialiserSettings.
- Mod: Store TBTransaction.SubsOrganisationId when creating subscription payments for PGA.
- Add: SubsOrganisationId column to TBTransaction to track subscription payments.
- Add: Another column to the diag_TBPProblemChildren procedure output to indicate whether a person has possibly joined the club they booked at after paying for the booking as a non-member.
- Fix: Live: Cute Editor toolbar: added back the font size selector
- Fix: #6142 (same bug fixed in golf.co.nz) Prev/Next links caused the CourseId to go missing, causing duplicate tee time displays.
- Fix: #6142 Prev/Next links caused the CourseId to go missing, causing duplicate tee time displays.
- Mod: Allow member subscription payments via DotGolf Edge with EFTPOS and Vend integration.
- Fix: Live: Cute Editor toolbar: added back the colour selector
- Add: Added City column to PassportThirdParty table
- Fix: just corrected the typo error in the filename - renamed 2213 to 2123
- Mod: Added City column to PassportThirdParty table
- Mod: Public: GEAP form: added City field
- Fix: Missing cachebuster tag for CSS.
- Fix: Missing cachebuster tag for CSS.
- Mod: Public: GEAP email copy: updated the email formatting
- Mod: Public: GEAP email copy: updated the email formatting
- Mod: #6142 Separate courses for tee booking for Taupo, basically ported the mod done to Public.2012 in revision 20450 to ClubCMS.
- Fix: Should have been an ALTER as the proc already exists.
- Fix: Events tab was not highlighted when looking at competition results reports.
- Mod: Public: GEAP: updated the About GEAP copy and the GEAP email copy, updated / added pdfs
- Mod: Copy paste bug I suspect with the previous line.
- Mod: Copied the way I did this last time rather than recalculating every single competition.
- Add: Script to recalculate all eclectic competitions so that we have Net scores populated.
- Mod: #6136 Changed the whole nett calculation to use the best net score reported for each hole on every day of the competition.  This is different to calculating the best gross score and then subtracting the course handicap as at the last round.  Also modified the report to show the whole nett figure when combining markers, because we can do this properly now.  The half net is still hidden as I don't see any reason for having it when the course handicaps as at the round date are used to calculate the best net hole score.
- Fix: Data type was too narrow; caused arithmetic overflow trying to edit scores.
- Mod: Optimised for performance and merged back in the change that I reverted before.
- Reverted revision 25067 due to performance issues encountered in Prod.
- Fix: Public: GEAP Terms: replaced text only: "membership" to "subscription"
- Mod: Public: GEAP: added a header image; removed unnecessary comments; made the page available to the public (registration form is hidden if not logged in)
- Mod: Public: updated NZG Annual Report image
- Mod: Public: added GEAP header image
- Fix: Missing namespace fix to PlayerTypes causing errors in prod.
- Mod: Org: for the PGA prize export file class, use BankFileGeneratorClassName instead of AccSubsDirectDebitExportFileGeneratorClassName
- Mod: alter sp live_GetSubscriptionPaymentStatistics to use PaymentTypeId = 707 instead of PaymentType = 'IMPORTED' so we can properly query the Xero imported receipts / payments
- Mod: added ClubSetting.BankFileGeneratorClassName column and update PGA's ClubSetting record to have "ANZFileGenerator" as its file generator class
- Mod: added BankFileGeneratorClassName column
- Fix: Show the Club dropdown for members with subs
- Mod: Public: MyAccount: hide link to GEAP for now Fix: Show the Club dropdown for members with subs
- Mod: Public: hide the GEAP menu link for now
- Fix: #6140 Had to upgrade to .Net 4.6.1 to get the new TLS stuff as Freshdesk turned off TLS1.0 - we could no longer post tickets via the API.
- Mod: Public: updated the Annual Report image
- Mod: Public: updated the Annual Report image
- Mod: Public: GEAP: updated email content and subject
- Mod: golf.co.nz: GEAP confirmation page: renamed "authorised" to "paid"
- Mod: golf.co.nz: GEAP: updated styles
- Mod: golf.co.nz: GEAP: hide terms checkbox when paid already
- Mod: golf.co.nz: GEAP: enclosed the checkbox Terms in <label> so it could be easily ticked
- Mod: golf.co.nz: added a link to view the pdf, updated the pdf to contain only GEAP information
- Add: golf.co.nz: GEAP Terms and Conditions page, and pdf Mod: added a required terms and conditions checkbox to the GEAP form
- Added Smartpay DLL to other Connector updater WYP projects.
- Add: Smartpay DLL into Connector updater.
- Mod: #6141 Don't lock down registration options in Org once registrations have started coming in for a tournament.
- Mod: golf.co.nz: GEAP payment confirmation: if transaction is successful, insert a record in the BillingToken table for the given user and the DPS Account (GEAP)
- Mod: sql: oom_GetStandings_Pga: exclude RSResultPrizeMoney records with 0 (zero) as value
- Fix: ClubCMS: OOM controls: removed Gender from the OOM standings query; corrected the Year query (to use the CompetitionAssociation table)
- Mod: sql: oom_GetStandings_Pga alter sp: removed @Gender (because PGA tournaments are both genders). Corrected the join with MemberSponsor table.
- Fix: Org: OOM tournament details display: correct the gender displayed if Gender is Both / All (it used to display women)
- Mod: Assigned an EffectiveDateTo to the Women Event Category inserts (so they are only used for the old OOMTournament records)
- Mod: golf.co.nz: GEAP: added client-side form validation
- Fix: golf.co.nz: handle / allow casual golfers to subscribe to GEAP Mod: updated the Payment Express account to be used for GEAP (DotGolfGEAP)
- Fix: ClubCMS: PGA: MyAccount: corrected the Membership Category display
- Mod: Add tracking options for PGA fees export. Mod: Display bank account codes in Subs settings for diagnostics.
- Mod: sql: added checking if association id 1000 exists
- Mod: sql: OOMEventCategory OOMPoints: insert new OOMEventCategory records for women (because some existing women OOMTournament records used the Men's event categories)
- Mod: sql: inserts into the existing OOMEvent table; update the records' Gender (which is a newly created column)
- Ignored some stuff.
- Ignored some stuff.
- PGA online subs payments: Mod: Hide the payment section if there is no amount due. Mod: Disable and autoselect the payment type if there is only a single option. Mod: Hide the "Includes $x.xx transaction fee" text if there is no transaction fee for the selected payment type. Add: Ability to have different transaction fees for Account2Account and Credit Card payment types.
- Fix: Removed hardcoded PGA AssociationId; looking it up from the Club.AssociationId column instead.
- Add: Live: Bulk Email: allow formatted text to be pasted in. Add EmailEditor.config (to add more basic Cute Editor tools). Added cuteeditor.css which has the basic predefined styles (e.g. heading1) for the editor.
- Mod: Upgraded to XeroAPI 1.1.0.33 because DotGolf.Shared was upgraded.
- PGA online subs payment and reconciliation: Add: Receipt export to XeroSync, only for the PGA (club 907). Mod: Upgraded Xero API to 1.1.0.33 because there was a problem creating new bank transactions in the old API. Add: Settings to allow us to set the account code and DotGolf contact ID from the settings area.
- PGA online subs payment and reconciliation: Add: Automatically create invoice payments in our system when the user pays with their credit card.  The idea is that the XeroSync code will automatically export these payments on the next run (every 5 minutes).  This way I didn't have to integrate Xero into ClubCMS, although I've left part of the plumbing work in there (moved stuff to the shared library - never a bad thing). Mod: Refactored DPS code to encode all payment data into an object and save it in TBTransaction.RawXML for later reference. Mod: Refactored the amount due code to pull a list of outstanding invoices and sum the outstanding amounts.  This way we won't count unassigned credit notes, so the person may overpay, but this is better than having to try and match a random incoming payment amount to some invoices. Add: A few settings so that we can track the bank account, account code and DotGolf Contact ID for exporting merchant fee lines to Xero. Fix: Corrected a problem where the email address was not being loaded up correctly on the ConfirmPayment.aspx page.
- Mod: golf.co.nz: added GEAP link under the My Golf menu dropdown
- Mod: golf.co.nz: My Account page: added third party (GEAP / AON) subscription information
- Mod: golf.co.nz: GEAP: made thirdPartyIdGeap dynamic; previously it was a hardcoded ID (though this is not in prod yet)
- Mod: GOTG: updated the homepage banner (Christmas banner)
- Mod: Drop and recreate the TBTransaction check constraint to allow insert with PassportThirdPartySubscriptionId and amount only
- Mod: golf.co.nz: oom_GetStandings: now using OomEventId parameter to filter the results (Men's OOM, Women's OOM and Seniors' OOM)
- Add: Inserts into ThirdParty and ThirdParty_MetaDAta tables
- Add: PassportThirdParty table Add: PassportThirdPartySubscription table Mod: TBTransaction table to add PassportThirdPartySubscriptionId column
- Fix: golf.co.nz: GEAP: fix for the previous commit--forgot to assign a value to @PassportThirdPartySubscriptionId after the insert to the @PassportThirdPartySubscription table
- Mod: golf.co.nz: GEAP (Aon Insurance) styles
- Add: golf.co.nz: GEAP (Aon Insurance) page and payment confirmation page
- Add: ThirdParty, PassportThirdParty, PassportThirdPartySubscription data classes
- Mod: Moved $MACRO registration into Shared project; we need these macros in ClubCMS now.
- Mod: Refactored to move CreatePayment method into the Invoice class so we can call into it from ClubCMS (PGA).  Shimmed it so that we don't have to change existing code.
- Fix: #6085 Regression caused by rev 21796 (log message below).  The system stopped adding override renewal items onto renewed memberships if those items were not in the category they are renewing to (only a problem when they are changing categories).
- Fix: #6117 When you only tick "Allow Non-Affiliates" in competition setup, you should be able to pre-print cards for non-affiliates.  Unfortunately the Allow Affiliated Visitors option being unticked stopped this from happening due to a logic bug.
- Fix: #6128 You could not find a member when searching by their 7 digit secondary club number.  This was a problem in the member quick search so affected the Members tab and also the Score Entry area.
- Mod: WarehouseBuilder: Allow deferring fact table builds until stage is done - useful for full builds; saves a LOT of time.
- Mod: ExtQuery: Just a few small improvements to how reports look when they are printed out from Chrome.
- Mod: #6136 Added an option into Edge to allow the Eclectic summary and full detail reports to be printed with all markers combined into single results.  Enabling the Combine Markers option will stop the Nett and Course Handicap columns from appearing, as the results are made up using holes and stroke info from different markers - there is just no way to correctly calculate a handicap index or nett scores for these.
- Fix: Live: timeout because of attachment xml (so it was moved out of the cursor)
- Add: Course control for displaying course information now has extra tabs for showing 9H course information.
- Mod: ExtQueryUsage table now tracks report execution time.  This will come in handy if we need to find out which reports are taking too long to run.
- Mod: #6135 Re-try the /GetMember API call up to 3 times if it fails - this call is pretty crucial to the SIC as the Save link is only displayed after this returns.  If the call fails for any reason, the user is able to enter all the hole-by-hole scores, but then cannot click Save!
- Fix: Oops, missed a file.
- Add: Warehouse sanity tests; run these by calling http://live.golf.co.nz/api/WarehouseTests.ashx.  I'll add them into the warehouse build script at some point so that the results get emailed back to me after every build.
- Mod: ExtQuery is now integrated into Adweb, and I've added the TBP Orphans report as an example.  Use AdwebReportSection in the Report object to make a report visible in Adweb. Add: ExtQuery HyperlinkFormatter to render out links. Add: ExtQuery now supports hiding a column with the Formatter.IsHidden property.
- Mod: #5694 Change "Someone" to "An administrator" in the booking email notifications.
- Fix: #6109 Internet only special – should not be automatically calculated for admin view (but they can still manually assign it).
- Fix: Included the club contracts expiry report in the csproj file so it will actually run.
- Mod: Casual Golf Email - when you select districts/regions, automatically select the offers as per the Members/Casual Golfer checkbox.  In other words, if Members is checked we don't want to select Membership offers to be sent.
- Fix: #5769 Fixed logout link in GOTG admin in SSO mode.  This was a regression caused by the SSO datasource upgrade (see rev 23793).
- Fix: <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> added to get around new Unobtrusive Validation in .Net 4.6 - need this set in the Web.config file to remain compatible with our tee booking player detail control validation code.
- Fix: WarehouseBuilder: Found the real reason that the captured/playdate bug was introducing duplicates in fact_Score - the configuration file was incorrectly adjusting the from and to dates based on the CapturedDate, not the PlayDate.  Reverted my previous change to the fact_Score import script and fixed the configuration file.
- Part 3/3 - helper functions added to move more code out of Shared.cs in Public and ClubCMS.
- Part 2/3 - helper functions added to move more code out of Shared.cs in Public and ClubCMS.
- Part 1/3 - helper functions added to move more code out of Shared.cs in Public and ClubCMS.
- Fix: Scorecard Admin was not triggering Signalr to update unpaid scorecard count when a card is printed, which updates the number icon overlaying the Scorecards menu item. Added event call.
- Fix: Missed DotGolf.Shared out.
- Add: ExtQuery: New parameter validation code that can enforce rules on report parameters.  Currently we only support date comparisons between 2 date parameters, but the structure is extendable so adding new types (for single or dual parameter validators) won't be an issue.
- Mod: Slicer is now enabled for Matt.
- Fix: Live: PGA Bulk Email publish to Club Website: when PGA publishes the bulk email to the club website, insert the individual articles not the entire email (with the email template)
- Fix: #8731 WarehouseBuilder: Also do the same thing for stage_Score (filter by PlayDate OR CaptureDate) to ensure we get everything when we do month-by-month rebuilds.
- Fix: The last mod I did to use CaptureDate to load fact_Score had the unintended side effect of messing up the agg_Score_Count build.  At least, if my theory is correct...
- Mod: just updated the comment in the change done
- Fix: Live: PGA: allow to save null GST number and IRD number
- Fix: POS register sale was not triggering Signalr to update unpaid scorecard count, which updates the number icon overlaying the Scorecards menu item. Added event call.
- Mod: WarehouseBuilder now uses BULK INSERT into a temp table, and then a MERGE statement to get data from there into stage tables.  In dev, instead of doing 100 rows per second, my last test did 8,700 rows per second for stage_Score inserts, a dramatic improvement.  I'm hoping this will cut hours off a full warehouse rebuild.
- Mod: sql: add Competition.SponsorImageUrl (to be initially used by the ClubCMS Tournament List control
- Mod: Org: - Added the missing ImageHelper.ashx - In the Competition Registration Options area, added a sponsor image uploader - Added Competition.SponsorImageUrl - This SponsorImageUrl will be initially used in the ClubCMS PGA Tournament List control
- Mod: ClubCMS: Tournament List control (used by PGA): display the Sponsor Image along with the name (Competition.SponsorImageUrl)
- Fix: #6121: ClubCMS: When the Bank Account Number, IRD Number, GST Number passed on are null (this is when the old edit member detail control is used), make sure the current db values don't get overwritten with null.
- Fix: #6121: ClubCMS: saving of member details (using the old edit member detail control) didn't work because there's no Bank Account Number, IRD Number, GST Number in the dictionary keys. Updated the code to handle these three and make sure the current db values don't get overwritten with null when updating the member details using the old control.
- Fix: Creating scorecards was having some timing issues with signalr events. The green fee transactions were being processed after the signalr event was fired, which meant some views (e.g. POS scorecards list) were being updated with the newly created card not having any green fee attached. To fix the event triggering is flagged to not fire in the CreateCard method and is manually fired after the green fee is processed for the scorecard.
- Ignored MarkdownSharp.1.13.0.0 package folder.
- Mod: sql: set PGA's club record IsVirtual value to true
- Mod: ps_updrank alter sp: do not update the Member.RegionId of members with PGA as home club. Member.RegionId is used in the PGA Find a Pro functionality.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Trying again to make nunit work.
- Mod: Updated nunit configuration to enable loading the Web.config with the proper assembly binding redirects in it.
- Add: Web.config file into nunit config.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: GOTG: updated the home banner
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Mod: Upgraded to Newtonsoft.Json 7.0.1 because of assembly conflicts in DotGolf.Public vs DotGolf.Shared.
- Add: ExtQuery: Info icons in column headers are now supported.  When clicked, they display custom Markdown content to the user in a lightbox. Mod: We also support overriding the header text for any column.
- Mod: Commit 3/3: A pretty big refactor to try and get Teebooking/Shared.cs in Public and ClubCMS more similar in structure.  This is part of the bigger project of making them the same file (or a group of files because there are some site specific things in each).
- Mod: Commit 2/3: A pretty big refactor to try and get Teebooking/Shared.cs in Public and ClubCMS more similar in structure.  This is part of the bigger project of making them the same file (or a group of files because there are some site specific things in each).
- Mod: Commit 1/3: A pretty big refactor to try and get Teebooking/Shared.cs in Public and ClubCMS more similar in structure.  This is part of the bigger project of making them the same file (or a group of files because there are some site specific things in each).
- Fix: ClubCMS: OnPar offers: put the "mode" query string parameter at the end to avoid error when clicking "Done Editing" from the admin panel
- Fix: ClubCMS: OnPar promotions control: if the priority field is empty, assign zero.
- Mod: ClubCMS: OnPar promotions / offers control: randomize promotions with 0 as priority
- Fix: ClubCMS: OnPar UCourseListWithAds: enable the admin to upload the main image for each hole for clubs with multiple courses (e.g. Taupo)
- Fix: Vend settings test invoice. Fixed bug where competitions collection is null and wasn't checked in a condition.
- Fix: When you enter card numbers into the SIC without saving the score first, and those card numbers are for different courses, every second card number entered will cause the course and marker to be deselected and the course/marker select box to pop up.
- Mod: ClubCMS: Revert changes related to Billing Token (PGA tournament registration) and also checking if member is Overdue
- Fix: ClubCMS: revert Payment Express URL to ...pxaccess/pxpay.aspx
- Add: Timers into key SIC methods so that we can see where potential slowness is happening (Windross Farm)
- Add: MarkdownSharp package to DotGolf.Shared.
- Add: Missing files.
- Fix: ClubCMS: PGA tournament registration: handle null bank account number (when loading the member's details)
- Add: ExtQuery: Report header/footer and DataSource table header/footer text values.  These properties support Markdown for simple content formatting.
- Fix: Live: IRD and GST Numbers: remove hyphens before saving (as we're using the int data type for these fields)
- Add: WarehouseBuilder: Added new command line parameters to allow modifying the storage folder path (for full rebuilds)
- Fix: Warehouse builder: Filter fact_Score by CaptureDate, not by PlayDate - we have to do it the same way the stage table is loaded.
- Fix: #6111 Eclectic scores for 9 hole results were incorrectly saved, i.e. F9 saved to B9. An old NG proc was being called, so updated to use new fast NG proc which does save scores correctly.
- Add: Ability to merge casual members with affiliated or casual records using scripts from Matt.  I've wrapped these scripts into stored procedures, aw_MergeCasualAffiliateMember and aw_MergeCasualAndCasualMember for easy maintainability; also the PRINT statements are echoed out to the UI when they run so that warnings can be reported easily.
- Mod: Org: PGA Tax Statement Report: added 2 rows in the footer for GST players total and Non GST players total
- Mod: Smartpay: Log and return the receipt print data.  It's never a bad idea to have this information on record.
- Add: Smartpay integration to Connector.  To enable this, set the following values in the Web.config file:
- Mod: Vend setting Sync Products now available for club to use. Mod: Vend POS removed max height scrollbar on Others product tile list.
- Fix: If you make a booking for Wednesday in 2 weeks' time, it sends "Wednesday next week" in the booking email notification.
- Mod: Vend POS setting added for default Quick key Group Add: Vend setting DG only Test Invoice function to test the new accounts_transaction_id field for passing zero invoice no.
- Add: ExtQuery now supports the TextAlignment property on all formatters. Mod: Numeric values will now be right-aligned by default, except if the column is called ClubId.
- Add: Just committing production import json file.
- Mod: ClubCMS: Content control: allow users to paste formatted text (previously, it was just plain text)
- Mod: Warehouse: added more build depth into the unit tests.
- Mod: Warehouse builder: Get rid of duplicate inserts of the exact same data.  This eliminates the case where a CMember record is present for the current date, and causes a duplicate row to be inserted into the dimension table even though nothing has really changed.
- Fix: ClubCMS: Removed the unnecessary element "PaymentId" (this is not in the Payment Express PxPay2 documentation). Anyway, the value of this (RegistrationId) is already assigned to TxnData1.
- Fix: ClubCMS: Only set values to CapturedDate, CapturedAmount, DPSCompleted and DPSCompleteAttempted for "Purchase" type of transactions
- Add: Missing packages since we don't do a Nuget RESTORE in the build process (we'll hopefully get there one day and not have to stick packages in SVN)
- Add: ExtQuery: HandicapFormatter added that uses the standard Handicap class to output properly formatted handicap strings.
- Fix: #5516 Upload Videos required the Youtube API integration to be updated as the API used was deprecated and the new API v3 implemented. This included the adding of videos, the listing of videos on the edit videos page, and the listing of videos on the select existing video page.
- Add: ExtQuery: GenderFormatter improved to allow cell and row shading as well as gender icons to be added to the cell.
- Fix: Public Shop: updated the Payment Express URL from pxpay/pxaccess to pxaccess/pxpay (new URL for PxPay2)
- Fix: ClubCMS: Payment Express URL: updated to the pxaccess/pxpay.aspx (old: pxpay/pxaccess)
- Fix: ClubCMS: handle null R.Competition.TournamentCompetition - Wasn't able to test Nomads registration when I made changes to this page
- Add: ExtQuery report definition editor in Adweb will now show parse warnings to the user if the report definition contains any invalid or mistyped properties.
- Fix: Copy and paste bug from BookingState merge caused home members to be treated as visitors - and if you don't have TBP then you would not be able to book at all (Royal Auckland).
- Mod: Public: Replaced the Gender dropdown with OOM Event dropdown. The OOM Event table will have the following records for NZG: Men, Women, Seniors
- Fix: #6097 POS scorecards refresh from signalr event was reloading the array afresh, which stuffed up ko objects if a scorecard was active for the admin. Mapping Update options added to exclude Active scorecard from being updated, as competition and Others selections were still being lost.
- Mod: #6099 Course TerminationDate is now used to exclude courses from being displayed with a passed Termination Date (Closed course)
- Mod: #6099 Course TerminationDate is now used to exclude courses from being displayed with a passed Termination Date (Closed course)
- Fix: Unit tests were failing due to new trigger that inserts push notifications into [Message] - causing an FK error in the TearDown section of the unit tests.
- Mod: The SIC will now show nationwide competitions too, based on whether a segment was configured for the competition at your club.
- Mod: We need this additional join, because otherwise there are too many options to select in the kiosk (becomes paginated selecting the competitions)
- Fix: This should be a create statement; caused unit tests to fail.
- Mod: Changed live_GenerateOrUpdateCompetitionRoundSegments to allow it to generate segments for a Competition Round that span multiple clubs and courses.  This currently only works for default markers at each course (and the competition has to be set up for default markers).  The list of clubs the competition is played at should be put into the CompetitionClub table (only the ClubId and CompetitionId columns are important).
- Mod: Changes to allow competitions to be run at multiple clubs - so we are referencing the ClubId from the course linked to the segments, rather than the ClubId linked to the Competition.
- Fix: ClubCMS: Edit member profile control: handle null and invalid bank account numbers
- Mod: Org: - Event Category filter the items based on the user's Association ID - Before creating a new OOM tournament, check if exists already based on the start/end dates, course, and OOM Event ID - OOM default page: modified the Add Tournament link to include the event ID. Use this to filter the categories to show (which shows up after selecting the dates)
- Fix: Another reference - when creating scorecards, insert the ClubId that was passed to the Create method rather than the one from the Competition table.  While this isn't causing us any direct problems right now, it will when we start printing scorecards for competitions that are run by other clubs.
- Fix: When creating scorecards, insert the ClubId that was passed to the Create method rather than the one from the Competition table.  While this isn't causing us any direct problems right now, it will when we start printing scorecards for competitions that are run by other clubs.
- Fix: #6097 POS scorecards refresh from signalr event was reloading the array afresh, which stuffed up ko objects if a scorecard was active for the admin. KO mapping has a key now specified which means mapping the array again will only update those objects with the same key, as opposed to recreating the object.
- Fix: ClubCMS: make sure that the "uploads" path is still defined even after postback (when changing the Section dropdown value) Fix: specify the wysiwyg css for the summary / teaser EditorPanel Fix: have a default value for the summary / teaser and body content editor (to address the spacebar issue)
- Fix / Mod: ClubCMS: cute editor set default value for the teaser / summary and the news article body content. Simplify the body cute editor tools.
- Mod: ClubCMS: responsive News Article control: corrected the styles loaded (copied code from UContent control)
- Add: ExtQuery: New WarehouseDataSource implementation added, so we can now pull data from the warehouse.
- Mod: ExtQuery: DatePicker default values now understand simple functions, eg. startofweek(-1day).  Functions can be nested so startofweek(startofyear(now)) works too.
- Mod: ExtQuery: Refactored to move each permission class into its own class file.
- Fix: ExtQuery: UserPermission: When leaving the UserId blank, only filter on the remaining values (eg. ClubId). Fix: Filtering was not done correctly when UserId==matt.
- Mod: Org: OOMTournament: added "Both" in the Gender options (this will be used by PGA OOM Tournaments)
- Add: added Gender check constraint to the OOMTournament table (allow values: M, W, A)
- Mod: Org: OOM Tournament Add / Edit forms: added "Both" in the Gender options (for PGA)
- Mod: sql: OOMEvent and OOMTournament tables
- Fix: Org: when creating the OOMTournament records, use the new OOMevent.Gender column. Note that we create one OOMTournament record for each OOMEventCategory selected in the competition setup page.
- Mod: Org: PGA Tax Statement Report: added a Totals row (which is included in the exported pdf as well)
- Mod: Org: css: added a few pixels to the menu width (subtitlebar_and_tabs_inner) so that everything will fit in one row.
- Fix: Org: when creating the OOMTournament records, check first if Competition.Gender is "A" (both men and women), and if yes, create two separate OOM records
- Add: SSO favicon (DotGolf icon)
- Mod: Most Improved Golfer - report query modified to use new parameter types.
- Fix: #4623: ClubCMS: make sure that the "uploads" path is still defined even after postback (when changing the Section dropdown value)
- Mod: public: added a new partner (The Clubhouse) to the scrolling carousel
- Part 2 of rename
- Part 1 of renaming script
- Mod: Public: Removed partners from the footer carousel Michael Hill Nice One Cheeky 9 TA Golf The First Tee
- Fix: Nunit DLL path.
- Mod: CW_UpdateMember: save the SubsDirectDebitBankAccountNumber, IrdNum and GstNum as well
- Mod: sql: alter Cmember table to add field used by PGA: GstNum, IrdNum, IsDeductRWT
- Mod: ClubCMS: PGA tournament registration: trim first and last names
- Add/Mod: Live: Member: membership tab: added help / info on GST and IRD numbers (shown to PGA club only)
- Fix: #4856 Bulk email compose mod needed to handle FileSize loading in dataset for Edit emails.
- Mod: Updated wording on message
- Mod: ClubCMS: updated the subs overdue message to specify the club name
- Fix: #5840 Card printing for a 9H could only show opposite gender strokes based on the default marker set. This was fixed but just needed a tweak so if the new fix did not match a marker, then simply the default marker was used (as was previously the behaviour).
- Fix: #6084 Print scorecard A5 was not hiding Start tee label when setting "Hide round number, tee time and start tee on cards" was ticked.
- Mod: Competition leaderboard showing top n results, apply topn after cached result set is fetched.
- Mod: Competition leaderboard showing top n results, apply topn after cached result set is fetched.
- Mod: DotGolf logo update
- Mod: DotGolf logo update
- Fix: Sorry mistakenly committed changes to these two files
- Mod: DotGolf logo update
- Add: clubs > 907 files for testing purposes
- Fix: ClubCMS: I assigned IRD num to the GST Num variable! Correcting that...
- Fix: ClubCMS: form validation script: trim the value of the field before checking if empty (to catch spaces entered)
- Fix: ClubCMS: corrected a hardcoded club ID (it was used for testing) and replaced it with ParentClubID
- Mod: sql: oom_GetTournaments: altered the sp to add OomEventId filtering
- Add: ClubCMS: sql: insert a new control property to the pga competition registration control
- Mod: ClubCMS: sql: CW_UpdateMember altered the sp to save the SubsDirectDebitBankAccountNumber, IrdNum and GstNum as well
- Mod: ClubCMS: "On Par" Promotions / offers control: added functionality to edit the promotion - Added confirmation before deleting a promotion - Removed commented out CSS styles
- Mod: Org: OOM default page listing OOM Tournaments: added OOM Event dropdown that filters the list
- Mod: Problem with subquery returning more than 1 value. E.g. When logging into golf.co.nz with 3006185 (I added the passport credential for 3006185 to get them going until publish)
- Mod: This mod allows for when we merge a casual golfer and a member, and they still try and login with their old password, against their new club membership number. NEEDS TO BE CHECKED! Use case was @username = 5560023 @password = 'scarfie00'
- Mod: ClubCMS: PGA competition registration: added the bank account number to ensure all players have a bank account number (it'll be used for the prize money - csv bank export)
- Fix: Admin manage backgrounds - if the filename of a background image uploaded has spaces, an issue occurred. Spaces now removed.
- Mod: ClubCMS: News Article control: updated SummaryEditor.MaxTextLength from 250 to 2000. Note: in the existing table schema, this SummaryHTML field has varchar(max) data type
- Mod: ClubCMS: competition registration controls: - Added property IsOpenToOverdueMembers which allows us to switch on / off checking if the member has an overdue amount in his subscription first before allowing to register to a competition - Added GetOverdueAmount to Member.cs which returns the total amount due for a member (this queries the Invoice and Instalment tables)
- Mod: Added a report for the Two Under Club to access to see their monthly results.
- Mod/Fix: Org: PGA prize export query: when joining with CMember and NonAffiliate tables, get top 1 result only (otherwise, there could be duplicates in the prize export when a player has both cmember and nonaffiliate records)
- Mod: ClubCMS: Edit Member Profile: added 3 new fields: bank account number, GST number, IRD number
- Mod: Org: Prizes export: added particulars and code fields; removed processing date field. - hide the save button and note if there's no results yet
- Mod: Live: PGA: Member Profile page: show IRD Num and GST Num fields for PGA
- Mod: Live: show / use the Sponsor panel for PGA Club only
- Mod: ClubCMS: PGA tournament registration payment using token billing
- Fix: #5840 Card printing for a 9H could only show opposite gender strokes based on the default marker set. This had the issue where if the default 9H was F9, and the scorecard marker was for F9, it would show the opp. gender strokes for the wrong 9H (F9). So the proc join for the default marker now does an addition join to get the marker that corresponds to the default marker, that is the opposing 9H marker, and then the correct one can be joined (e.g. if scorecard is B9, then B9 opp. gender strokes are retrieved). The marker is joined using the marker name, so it will only work if the markers names are uniform {colour} {F9|B9}. The first part of the name (up to the space) is used to join the default 9H marker to the opposing 9H marker (e.g. Red F9 --> Red B9), then the last 2 chars are used to determine if they match the scorecard marker (F9/B9). Clear as mud.
- Mod: #6066 Bulk email compose sender address dropdown list is now appended with any club contact email addresses (Contact table)
- Mod: #6071 Green fee visualiser added Slot Key column to available slots table
- Fix: Org: updated the Other Party Reference value from "PGA New Zealand" to "PGA NZ" because of number of character limitation
- Fix: Or not...
- Mod: Finally cracked the Warehouse tests.
- Fix: Warehouse unit test path.
- Fix: Warehouse Tests project had bin\Release and bin\Debug in the output path.
- Fix: Warehouse unit test path.
- Add: Nunit project file.
- Add: Warehouse NUnit test suite - able to build a copy of the warehouse data and populate it from the test database.  This is just the framework, now I have to build some proper tests.
- Mod: Get on the Green: Allow NZG and DotGolf users to enter $0 for the Price fields.
- Mod: Warehouse: Removed schema scripts and replaced with a new baseline.  The scripts were never properly unit tested in the past, and now that I am testing them they are causing all sorts of problems for me.  It's easier to nuke them all and get a new baseline script than it is to individually fix each script.
- Fix: DW schema script bug.
- Fix: Schema scripts made compatible with test DW warehouse databases.
- Fix: Org: PGA Tax Statement / prize export: updated country filtering
- Fix: Org: PGA Tax Statement report: include PGA players registered as non-affiliates
- Fix: Org: ANZ: corrected the format of the CSV file. I mixed up formats 1 and 2 (http://www.anz.com/Documents/AU/corporate/clientfileformats.pdf). We are using format 2: NZ Domestic Payments CSV Detail Import (with Control Record)
- Add: #5675 Competition leaderboard setting for showing top n results. Competition setup added new property for the setting. Leaderboard only displays top n results if the setting is present.
- Fix: Prize report had incorrect prize type number when prizes included overall and per round prizes in multi round competition. Round No has been added to Rank partitions in sql script.
- Mod: ClubCMS: tournament registration - Added Payment Express token billing so PGA users don't have to enter their credit card every time they register for a competition. - PGA: tournament registration: authenticate the user before proceeding to the payment page. So we could do the token billing (ask the user to use an existing credit card or a new card) - style updates
- Mod: Automatically publish all push messages as messages so that they appear in your inbox in the app.
- Mod: Reports - Aged Subs summary report now has the Total links for all columns to the Subs By Category report, but no category parameter passed so all categories are shown grouped.
- Mod: Org: competition prize export: export to csv (used to be aba)
- Add: New version of the Most Improved Golfer report.  I've also upgraded the JSON to use the new controls.
- Mod: Reports - Aged Subs summary report now has the Grand Total link to the Subs By Category multi period report, but no category parameter passed so all categories are shown grouped.
- Add: ExtQuery: NineHoleParameter for a user friendly way of picking between 9H/18H/Both.
- Fix: Another one!!!
- Mod: Another case of the cuteeditor yips.
- Fix: Get around silly CuteEditor issue where it won't take space bar keypresses when the initial content is blank.
- Add: ExtQuery: ChooserParameter generic tile-type chooser.  This is the basis for the new GenderParameter too, so we can now include a gender selector in any report with very little JSON:
- Add: Prototype code for the start of a report designer.  This is incomplete but functional; I just wanted to commit it so that it doesn't get lost.
- Add: ExtQuery: Ability to mark reports as deleted and have them hidden from applications and adweb.
- Add: ExtQuery CreateDate, ChangeDate and DeletedDate columns.
- Fix: API: Properly case DotGolf.
- Fix: Org: PGA ABA export: corrected how we parse the SubsDirectDebitAccountNumber for the ABA file
- Fix: Org: PGA ABA Export: when querying the Cmember record of the player, use the ClubId in the condition (to link to the correct PGA CMember record)
- Fix: https://github.com/nitemind/teebooking/issues/182 Could not see any autobooking available dates at Riverside due to a SQL bug with @CourseId.
- Fix: https://github.com/nitemind/teebooking/issues/181.
- Try mitigating Nunit error.
- Add: EF section to app.config file to see if that will make the tests work.
- Fix: ClubCMS: PGA: Tournament List: fix the tournament list year filtering--get the "year" value from the query string first, but if it's null, get the year value from the session. If both are null, use the current year.
- Mod: Made DotGolf.Data.Passport Serializable to make Nunit happy...
- Fix: Failing test caused by new tests for booking notifications.
- Add: API: Unit tests to check autobooking and booking notifications are being sent correctly.
- Fix: https://github.com/nitemind/teebooking/issues/153.  Also added unit tests to check these notifications; those will be committed shortly.
- Add: Kiosk allow visitor printing settings help context
- Mod: #4856 Bulk email compose now has total attachments max size of 5MB validation.
- Fix: We should not check a member's email address for sending push notifications; they may actually have a mobile device registered but no email on record.
- Fix: RowNotFoundException when dealing with clubs with no TBClubSetting rows.
- Mod: Org: allow PGA and other associations to pull the member email, and contact numbers during manual registration
- Fix: FK errors because of new TBTicket OwnerMemberId/OwnerNonAffiliateId values being inserted.
- Mod: API authentication change so that the original issuer (the third party code of the requestor) is embedded in any reissued tokens (eg GetTokenForPassportCredentials) - this way we can tell what type of client we're talking to even when they have reauthenticated as another entity (such as a member).
- Mod: API: Refactored code so it's a bit easier on the eyes.
- Mod: #6038 Members joined report, added headers for email, home phone, work phone, and mobile on a second header line.
- Fix: Autobookings were created without a linked ticket, which caused all sorts of issues down the track, for example the inability to cancel an entire booking once it was made.
- Fix: Duplicate cancellation messages caused by new notification code.  https://github.com/nitemind/teebooking/issues/177
- Fix: Org: return the handicap of the member in the SearchPreviousTournamentMembers query
- Fix: Org: PGA: update GetData method for the ABA export to query the CMember and NonAffiliate tables instead of the ClubMember view
- Fix: sql: ClubMember alter view: revert
- Mod: ExtQuery: Support new DefaultValue field to allow specifying simple date math to populate datepickers with default values.
- Fix: sql: ClubMember alter view
- Fix: ExtQuery: Check Parameters[] and Formatters[] for null before attempting to use them.  This means you can now omit the Formatters or Parameters arrays from the JSON completely if they are not needed.
- Fix: sql: removed the unnecessary "GO" at the bottom of the script
- Add: #5675 Schema update to add the LeaderboardShowTopResults column
- Add: sql: alter the ClubMember view to return IsDeductRwt and GstNum also
- Fix: Org: PGA: corrected the amount in the ABA file export to consider RWT and GST. SQL code copied from PgaTaxStatement.
- REINTEGRATED BookingState mod from branch.
- Fix: ClubCMS: Tournament PlayerList control: updated the text that appears when the player doesn't have a handicap--from "N/A (Professional)" to "N/A"
- Mod: Live: ClubItems: updated Xero Tracking dropdown to handle postbacks / adding of new line items
- Mod: ClubCMS: PGA OOM control: updated style and icon
- Mod: sql: updated oom_GetStandings_Pga: corrected the order by clause
- Mod: Bulk Email: Org: GetMailingLists: include the mailing lists of the child associations e.g. Love Golf is a child association of NZG, hence the Love Golf mailing lists will appear for NZG org users
- Mod: sql: just added checking if table and/or column exists before running the script
- Mod: sql: updated oom_GetStandings_Pga; added this condition: "and ms.DeletedDate is null"
- Mod: Live: allow ticking / saving of member sponsors (e.g. Titleist). This will be used initially on the PGA site.
- Fix: When running unit tests and the schema scripts fail to execute, Test* databases are not cleaned up on Dev4.  This mod will drop the database if the schema script execution fails.
- Fix: Missed a column on the Competition class in the EF designer file.  This caused competition setup to crash.
- Mod: Get on the Green: page title updated to "Get on the Green - Smoking Hot Deals"
- Mod: GOTG Admin: corrected the page title for the Email page (from "Voucher Redemption" to "Email")
- Fix: Performance enhancement to the Member Balances report.  Moved from MemberID OR NonAffiliateID to a simple addition and querying these separately.
- Fix: Hide parameters box in ExtQuery reporting when there are no visible parameters.
- Fix: #6035 Logout from bulk email did not have any effect because of a missing datasource parameter to the logout controller in SSO.
- Fix: API: Bug in list-messages discovered due to failing tests.
- Mod: API: Return CourseId as part of user-details endpoint so that we can do bookings on a specific course at Riverside.  https://github.com/nitemind/teebooking/issues/157
- Add: API: HaveMoreMessages property to indicate whether more messages are available beyond the filtered range.
- Mod: Change to create from alter for unit tests.
- Mod: New report for most improved. There is a formula for this from Karen.
- Mod: ClubCMS: added Account2Account DPS setting (still to be updated when we get the prod A2A account)
- Mod: ClubCMS: MyAccount: make Account2Account work (still to be tested with a live bank account)
- Mod: golf.co.nz: updated the Holden popup images (having the new Holden logo)
- Fix: ExtQuery: SystemParameters can have a value even when they are hidden.
- Mod: GOTG: updated home banner image (She Loves Golf)
- Add: LeaderboardShowTopResults column to Competition table in the EF model, for Doug.
- Mod: sql: correct the table name PWProfileQuestion, add checking if table exists. Note that this has been run in prod.
- Mod: #6038 Members joined report, added fields for email, home phone, work phone, and mobile on a second details line.
- Fix: ExtQuery: If one report fails to load up from JSON, don't crash out all the other reports too - just swallow and move on to the next one.
- Fix: Duplicate region information returned due to multiple GPS coordinates being present in CGRegion vs Region tables.
- Fix: API: https://github.com/nitemind/teebooking/issues/159  Properly determine passport IDs for friends using the FriendPassportId column.
- Mod: golf.co.nz: added Par NZ in the scrolling partners at the footer area.
- Fix: API: App should show the same slots as the public tee booking site (i.e. it's also "Internet").
- Mod: Live: Club Items page: - Updated the Xero columns (header) styling - Auto update the club items' Xero data as soon as the ClubItems page is loaded. If the Xero tracking is still valid (based on the data we got from Xero), we update the Club Item's XeroTrackingCategory and XeroTrackingCategory names, just in case they've been renamed in Xero. Otherwise, if the option is invalid (i.e. archived or deleted in Xero), we clear the XeroTracking values of the Club Item.
- Fix: API: Don't return friends with a null PassportId.
- Fix: Locks were never removed after a booking was applied, because ApplyBookingChangesStage was cleared before the lock erase which uses the TimeSlotId values from the latter table.
- Fix: The TimeSlotId was being shown on the ConfirmPayment.aspx results page instead of the TicketNo.
- Mod: ExtQuery now supports system parameters so that we can automatically pass the user's ClubId etc. into the report query.
- Add: sql: adds new Xero-related columns to ClubItem table
- Mod: DotGolf Live: PGA is using Xero's Tracking Categories for their invoices. Follow-up commit - forgot to handle the case where the club is not Xero enabled.
- Mod: DotGolf Live: PGA is using Xero's Tracking Categories for their invoices. - Added XeroTrackingCategoryOptionId, XeroTrackingCategory, XeroTrackingOption to the ClubItem (it's not enough just to have the ID) - Pass this value onto Xero during invoice creation
- Mod: Added the start tee id into the sort order. Reason is Taupo (multi course) had ordering like: 9:00 Cent. 9:00 Tauh. 9:08 Tauh. 9:08 Cent. 9:16 Tauh. 9:16 Cent.
- Fix: #6022 Redirect loop caused when user logs into http://live.golf.co.nz/ for a club using Edge.  They are automatically redirected to Edge, but a redirect loop happens when they subsequently click Logout because the cookie is never set on the live.golf.co.nz domain.
- Mod: #6030 Email address validator regex modified to allow non .com/.co.nz etc domain suffixes. E.g. now accepts .online
- Add: sql: oom_GetStandings_Pga alter sp to return IsTitleist
- Add: sql: create tables Sponsor and MemberSponsor
- Mod: sql: oom_GetStandings_Pga alter sp
- Add: sql: oom_GetStandings_Pga: return IsTitleist value as well so we could indicate the sponsor image in the OOM control
- Add: sql: CW_UpdateMember alter sp to include saving of Member.RegionId (an existing column) This has been run in production / NZ1.
- Add: sql: alter column ProfileQuestionAnswer.Answer to accommodate more characters
- Mod: ClubCMS: PGA OOM control: added the sponsor / Titleist logo
- Add: ClubCMS: Titleist logo
- Mod: sql: Inserts to ProfileQuestionGrouping and ProfileQuestion: uncomment the script, added a checking / condition, corrected the table name from PWProfileQuestion to ProfileQuestion
- Mod: sql: ProfileQuestionGrouping: just rearranged the column sequence
- Mod: sql: inserts to CWControl and CWControlProperty
- Mod: Live: Invoice: when the instalment table is just a preview, add a note saying, "The table below is currently just a preview. Click "Save Changes" to apply the instalment schedule to this invoice." to remind the user to save the instalment schedule.
- Fix: ClubCMS: replaced .live("click", function (){}); with .click(function(){}); Error appearing in the console was: ".live() is not a function"
- Fix: Vend quick keys broke due to int64 numbers for version returned from Vend for button layouts, and the class had int32 so the json serialiser failed to convert. Updated class to use long.
- Fix: ClubCMS: Love Golf: corrected the web reference path
- Mod: ClubCMS: Edit Member Details controls: updated to accommodate the CgRegionId added to the new Edit Member Details control (under _responsive)
- Mod: ClubCMS: Member Search (Find a Pro): updated styles
- Add: ClubCMS: female and male silhouette images
- Mod: ClubCMS: Member Search (Find a Pro): updated styles
- Mod: ClubCMS: Member Search (Find a Pro): updated styles and removed "Resident Pro at" info
- Mod: ClubCMS: Member Search (Find a Pro): updated styles
- Mod: ClubCMS: Edit Member Details (PGA): added club dropdown
- Mod: ClubCMS: Member Search control (Find a PGA): added "OR", fixed query
- Mod: ClubCMS: PGA: allow member to update his/her Region (using the old column Member.RegionId)
- Mod: ClubCMS: PGA: Member Search control (Find a Pro): updated layout, formatting and added Position and Resident Club.
- Fix: Live: Subscription: When saving instalment records, ensure that the upfront payment amount is treated as money, with decimal places when @PreviewMode = 0. It was previously being rounded up because the data type is not properly initialised (with the null UpfrontPaymentAmount when @PreviewMode = 0).
- Add: ClubCMS: responsive Mailing List control: to be initially used by Love Golf. The shared mailing list won't work with Love Golf (because it's an association, not a club)
- Mod: ClubCMS: She Loves Golf: updated the She Loves Golf image for the search control. I'll make this dynamic / updatable through AdWeb next time.
- Mod: #4669 Leaderboard shows results for multi round competitions, even if no results for the current date are available yet. I.e. it will show the results from the previous rounds.
- Fix: ClubCMS: PGA Member Search control (Find a Pro): corrected the region id condition in the query
- Mod: ClubCMS: responsive Image Slideshow: use the width and height properties for the cropper tool. Also added a new property "LinkTarget" so we can specify where the links should open
- Mod: #5646 Leaderboard, now shows End of Competition adverts when there are no results and cycles through the adverts after the Coming Soon screen is displayed.
- Mod: Live: Love Golf: She Loves Golf: allow NZG to update the offer details and files
- Fix: Live: Love Golf: She Loves Golf: renamed the settings key to "ClubCMS_FileService_URL"
- Add: Squawk engine to send push notifications.  I've used this to send the new autobooking CRUD notifications.  They are a little more user friendly than our existing ones, for example:
- Mod: sql: PGA: alter oom_GetStandings_PGA stored procedure to include profile photo path
- Mod: ClubCMS: OOM control: added profile photo to the OOM table, like in the old PGA site.
- Fix: https://github.com/nitemind/teebooking/issues/144 Due to a bug in wa_TBApplyBookingChanges_SendEmails, some members were not being notified of new bookings when the @MemberId passed to wa_TBApplyBookingChanges was null.
- Fix: Don't send "booked" notifications to myself if I created my own booking.  https://github.com/nitemind/teebooking/issues/147
- Mod: Do not send "cancelled" notifications to myself if I was the one that took the action.  If someone else cancels me, okay, but not if I did it.  This is only for push, you'll still get the emails as before.
- Fix: API: Course filtering to calculate the MinGreenFee in search-slots was not working for Riverside.  https://github.com/nitemind/teebooking/issues/156
- Mod: API: Allow CourseId to be passed to list-future-dates and list-future-and-suggested-dates so that Riverside can be accommodated.
- Mod: ClubCMS: responsive submenu control. To be used initially in the PGA site.
- Mod: ClubCMS: News Article: when getting the latest or sticky article, consider the News Section Code (club or members)
- Fix: ClubCMS: TournamentList: just forgot to rebind the data when the user selects another year from the dropdown
- Fix: Incorrect StartDateId being saved onto dim_CMember and this causes duplicate overlapping date ranges for certain members and clubs.  Example is on Matt's record, ClubNID 182.
- Fix: ClubCMS: Member Search control: corrected the query (region)
- Mod: #6012 New membership number - creating a new member now has a club setting for what minimum number to search from for available numbers. Defaults to 1.
- Fix: https://github.com/nitemind/teebooking/issues/153 We will now send you a notification (email and push) if someone cancelled themselves off a booking (ticket) that you own.
- Fix: Admin manage backgrounds, removed "Carousel" from label for image
- Mod: Missing image on about dotgolf page.
- Mod: https://github.com/nitemind/teebooking/issues/169 Added MapCenterLatitude and MapCenterLongitude to get-regions endpoint so that we can center the map when the user toggles to it with a region selected.
- Fix: #6008 Extended PassportEmailVerify.NextUrl column to VARCHAR(MAX) to allow for longer URLs.
- Mod: ClubCMS: PGA control: add CssClassName property
- Mod: ClubCMS: PGA OOM control: minor updates: default member page name and query string parameter rename
- Mod: ClubCMS: LoveGolf: searchbar styling
- Add: AssetGroup permission checking to Org.
- Add: AssetGroup permission checking to ExtQuery reporting.
- Add: Tournament draw add players, now Professional players have an icon to indicate them.
- Mod: ClubCMS: Member Search: removed unnecessary CSS class name
- Mod: ClubCMS: News Recent Articles: removed unused code
- Mod: ClubCMS: Edit Member Details control: added instructions, updated styling, hide Save Details button if Additional Details / fields are not shown
- Mod: ClubCMS: MemberDetail control (Find a Pro): hide the Category Name if deceased, unfinancial or undefined.
- Fix: When filtering by 9 hole slots we should calculate the minimum green fee considering only 9 hole specials.  https://github.com/nitemind/teebooking/issues/170
- Mod: ClubCMS: Member Detail control: added Website link and Qualifications on the left panel (removed them from the right panel display) - Styling updates - Edit Member Details control: added a guide for the Website field
- Fix: https://github.com/nitemind/teebooking/issues/163 Should not allow bookings in slots that are closed because a club does not allow bookings on the same day.
- Fix: Dev ARN.
- Mod: https://github.com/nitemind/teebooking/issues/168 Trim whitespace from member names when sending to the client.
- Mod: ClubCMS: added a CssClassName property to the controls
- Mod: ClubCMS: rNews Recent Articles: hide the slick carousel if DisplayLeadImage property is false.
- Add: New messages API endpoints that will be used for the Notifications area in the app.
- Mod: Get on the Green: set cache expiration (Navigation) to 30 minutes
- Mod: ClubCMS: ImageHelper: save jpg image as png if width is less than 320 and and height is less than 240. I just copied the condition from public's ImageHelper)--I wanted the profile photo (e.g. Find a Pro - member profile page) to be in png format so it won't have that black line at the bottom when it's resized.
- Mod: golf.co.nz: updated where member (and amateur) profile photos are uploaded -- we're now using the ImageServer folder (img/members) for these.
- Fix: #5940 When moving bookings around in the POG while scorecards have already been printed and entered into competitions AND the tee sheet contains multiple courses (like at North Shore), the scorecard competition entries are never updated to the new scorecard marker, leading to incorrect results.
- Mod: ClubCMS: PGA-related: updated the path where the member profile photo is uploaded (just put everything in a members folder (no sub folders) like how it's done in the public site's media > players and media > mygolf folders).
- Mod: ClubCMS: Edit Member Details control: just removed unnecessary code/extra lines
- Add: Scripts related to PGA Find a Pro / Member Additional Details - Create new table ProfileQuestionGrouping - Insert records into to PWProfileQuestion - Rename PWProfileQuestion to ProfileQuestion and PWProfileQuestionAnswer to ProfileQuestionAnswer
- Mod: ClubCMS: News controls style updates
- Mod: ClubCMS: News controls style updates
- Mod: #5997 Target Url now has a regex to validate Url string. Extra date validation also added.
- Fix: https://github.com/nitemind/teebooking/issues/156 Filtering was not done on wa_TBSearchSlots level, so the minimum green fee was displayed the same for Lochiel and Narrows.
- Add: #5997 Admin manage backgrounds, where an admin can view future backgrounds, can delete backgrounds, and add new ones.
- Mod: golf.co.nz: updated tables names: PWProfileQuestion to ProfileQuestion; PWProfileQuestionAnswer to ProfileQuestionAnswer because we are now using these tables in ClubCMS as well (so it's not just for the "public website")
- Mod: ClubCMS: updated summary comment
- Mod: ClubCMS: api: Admin: added UploadProfilePhoto web method; and removed unused methods (which were moved to FileService)
- Mod: ClubCMS: Edit Member Details control: this is the responsive version of the Edit Member Details control; with Additional Details and profile photo uploader (with cropper)
- Mod: ClubCMS: MemberDetail control: updated the control to display the additional details. This is the control we use for the "Find a Pro" page, to display the details of the Pro.
- Mod: Added GetAdditionalDetails method, which gets the additional details of the specified member. This will initially be used by the PGA for their additional fields e.g. position, qualifications, favourite quote
- Fix: API: Changed to custom exception types for autobooking delete exceptions.
- Mod: The Slicer import now runs inside a transaction so you can no longer get a partial batch of TBP transactions imported when one of them crashes out.
- Mod: Added CourseId to search-location response.
- Oops, missed a file.
- Mod: Added ExtQuery reports into DotGolf Live.
- Add: API: SeparateCoursesForTeeBooking support added to the API.  This involved returning a CourseId in the search-club-day results and accepting a CourseId in the search-slots endpoint to do the appropriate filtering.
- Mod: API: Return DOB values with 00:00:00 UTC time components.  See email "Time zones in our APIs" sent Mon 17/10/2016 1:43 PM for full documentation on this change.
- Fix: https://github.com/nitemind/teebooking/issues/131 Autobookings are now created with the "owner" set to the person that owns the autobooking.  This means that notifications are no longer sent as "Someone" and you can also now cancel your booking once it is made by the job.
- Fix: #5998 When you delete a draw that was originally created from a timesheet, the timeslots remain linked to the old deleted draw, and therefore you cannot create a new draw including those timeslots.  Modified so that we check whether the DrawTime records are deleted before disabling them on the UI.
- Add/Mod: ClubCMS: PGA Member Details control: based on the UEditMemberDetails control (just with additional fields)
- Mod: golf.co.nz: removed NSR logo as requested by Nick
- Fix: Org: PGA: If the player is a NonAffiliate, use NonAffiliata.AssociationId to determine if the player is a professional (Association.IsProfessional)
- Fix: #5992 Preprint cards for a competition that had the marker changed for the round, was printing cards for the original marker, not the current marker. It was found upon printing the card is when the player entry is created, and it was in proc CalculateCompetitionRoundSegmentForPlayer that the CRSegment.FlagForDeletion was not being considered when finding the competition round segment to enter the player into.
- Mod: ClubCMS: PGA: Member Search control: update style; allow clicking of row to get to the Member Detail Member Detail control: updated style; added Title
- Fix: ClubCMS: terraces2: Competitions Calendar control: using the latest version of jqeury.qtip; removed reference to jquery 1.6.2 (as this was conflicting with the template's jquery 1.10)
- Add: ClubCMS: rEditProfile control (bare), qtip css
- Fix: API: Date comparison bug.
- Fix: Check non-filtered search results when determining whether to offer the user the Create Autobooking option.
- Fix: Don't allow user to create autobookings on dates they already have autobookings for.  https://github.com/nitemind/teebooking/issues/148
- Fix: #5974 Saving a tee booking with a long last name caused a string truncated sql error. ApplyBookingChangesStage table LastName and FirstName columns now updated to match length of cmember and nonaffiliate firstname and lastname lengths.
- Add: #5860 Kiosk new setting for "Allow visitors to print cards". When setting is on any player can print a scorecard, when off only home members and paid players (online) can print cards. Other players can enter cards but they would have to be printed from Score card Admin. SCA and POG Mark as Paid functions for a card entered by a visitor not printed, will print the card. POS when completing a sale for a card will also print a non printed visitor card.
- Mod: ClubCMS: PGA member search result: used icons, updated styles
- Add: ExtQuery reports integrated into TabReports.aspx, so any ExtQuery reports that match permissions will now be shown. Add: "Others" and "Casual Golf" report sections.  These sections are hidden if they have no reports visible. Fix: Permissions bug in Any mode caused reports to always be shown. Add: Aggregates in HTML mode.
- Fix: ClubCMS: TournamentRegistration control (used by 5CC and SCGC): added ComputerNo when inserting into the NonAffiliate table
- Fix: ClubCMS: fixed arrowNext.png path
- Fix: ClubCMS: Love Golf Club control: updated .text() to .val() to correctly get the updated Message textbox value entered by the user
- Mod: ClubCMS: Casual Golf Registration: use placeholder text for the guide on the textboxes (not value)
- Fix: ClubCMS: Casual Golf registration welcome email: updated the bullet image path (uploaded it to S3, as this is being used by the header image as well)
- Mod: Rename courses/CourseName to Name at Ruben's request.
- Fix: Don't show any date as autobooking-available when user already has an autobooking on the date.
- Add: API: IsCourseSelectionAllowedForAutoBookings property added to GetUserAutoBooking and ListUserAutoBookings.  https://github.com/nitemind/teebooking/issues/116#issuecomment-253031442
- Mod: Live: updated the web service to point to ClubCMS (new home of the Love Golf site; the old one will be decommissioned) - the web service is used to upload files in the ClubCMS's clubs folder
- Mod: ClubCMS: css for the PGA memberdetail control
- Fix: Bulk email report name fixed as it was incorrectly "Competition results report"
- Mod: ClubCMS: MemberDetail control (PGA pro profile page) - work in progress. To be continued when we have the extra details of PGA pros.
- Mod: ClubCMS: MemberSearch control (Find a Pro): corrected the markup
- Add: ExtQuery: Adweb report definitions page - added link to Freshdesk solution article that documents the JSON format.
- Mod: ExtQuery reports: Renamed UserID to UserId to keep it consistent.
- Mod: ClubCMS: Find a PGA pro related controls MemberSearch - allows searching by Region or by Name MemberDetail - displays member details with link to email the pro (work in progress) rContactForm - responsive contact form; initially will be used to email the pro
- Mod: ClubCMS: responsive Contact Form: to be initially used for PGA's Find a Pro - email pro
- Fix: Added hint into the file to tell Excel we're using semicolons.
- Ignored some stuff.
- Fix: Report tests updated to reflect SQLDataSource to SQLSetDataSource rename.
- Fix: #5961 We had a bit of a mess on our hands - the mod in rev 24556 did not work because the TXLines (for new bookings) were only inserted AFTER the new join that needs them.
- Mod: Permissions checking when showing reports in TabReports.aspx. Mod: Support multiple recordsets coming back from a single SQL query.  To do this, define the query as a SQLSetDataSource (with IsHidden=true) and then define one or more SQLTableDataSource sources with a TableIndex.  The Set needs a Name and the DataSource property on each SQLTableDataSource needs to refer to that.
- Fix: Don't allow the report definition to save if there are JSON errors.  Alert the user so they can fix things before saving. Mod: You can now hit Ctrl+S to save the report definition.
- Mod: ClubCMS: updated CSS referencing
- Fix: Teebooking carts. The popup upon ticking the cart tickbox now displays below the tickbox (so the user can still access the tickbox to untick) and is offset so the popup is within the current player container.
- Add: ClubCMS: FileService webservice and MemberSearch control
- Add: Report definitions editor to allow us to modify the JSON behind the new reporting system.  It's not friendly at the moment but lets us change the data.
- Add: New reporting engine based on a JSON report definition and a hierarchy of derived classes.  This lets us very quickly build new reports and publish them to the production system.  Currently only Org is supported, but since the code is shared we can use it in Live as well with only minimal code needed.
- Mod: ClubCMS: copied over the LoveGolf web methods
- Fix: #5866 My Golf competition results for Eclectic competitions. KO error when Rounds.length = 0 in bindings.
- Fix: Earlier fix from this script got nuked by a later commit.
- Mod: sql: insert new CWControl and CWControlProperty records
- Mod/Fix: ClubCMS: terraces2 controls: update referencing of CSS file of each control; this resolves the exception logged e.g. "System.IO.FileNotFoundException: Could not find file 'C:\inetpub\Live\NewZealand\DotGolf.ClubCMS\clubs\587\usubmenubar.css'."
- Mod: ClubCMS: Popup control: removed unnecessary properties
- Mod: Bump version to force publish.
- Fix: #5977 Distinct() wasn't working on a custom class because it is doing reference comparisons.  This caused duplicate cards to be printed out if multiple competitions were selected in PrePrintV2.  Fixed by implementing an IEqualityComparer<FieldRec>.
- Mod: ClubCMS: Popup control: just removed logging in console
- Add: ClubCMS: Popup control - to be initially used for Love Golf - this control pops up a clickable image (navigating to the specified url)
- Fix: Removed console.warn that was spamming the logs.
- Mod: Refactored contracts query code, fixed a bug that misreported the expiry date by 3 months. Add: Contract Expiry report to list all clubs with their contract expiry dates.
- Mod: ClubCMS: Content control: updated maximum file upload to 2000 kb
- Mod: ClubCMS: Tournament Registration: redirect user to a specified page when registration is closed.
- Fix: #5976 NZGolf tournaments were taking ages to update their leaderboards.  Depending on which leaderboard was viewed first (dashboard or full) in the particular case, the other leaderboard would lag behind.  I discovered that this was due to caching and a static variable being used to track the last result creation date.  I've changed this so that the last result createdate is now part of the cache key, so the cache will always expire the moment a new result is calculated.
- Fix: ClubCMS: Tournament Player List control: put back commented code in the query related to filtering of TWPlayer by Association ID
- Mod: ClubCMS: Love Golf Search Result control: updated cropped club banner image filename, and control styles
- Mod: ClubCMS: Love Golf club control: trim the GOTG URL
- <<< DFH TESTED TO HERE >>>   Fix: #5921 If a green fee was assigned to a booking or a scorecard and that green fee is subsequently deleted, we should keep showing it on the SCA if the user opens that card back up to edit it.  The DeletedDate on ClubFeeDetail was erroneously checked, so I have removed those clauses.
- Fix: API: Add IsCourseSelectionAllowedForAutoBookings property to GET courses/{clubId} endpoint to support autobookings at special clubs like North Shore.
- Fix: API: User visible error messages changed to a custom exception type, AutoBookingValidationException.  https://github.com/nitemind/teebooking/issues/130
- Fix: API: Handle cases where a green fee player is deleted from an existing booking, and the new transaction fee is higher than the previously paid amount (possible if the removed player was causing the first player to get a reduced green fee).  https://github.com/nitemind/teebooking/issues/95
- Fix: #5967 Eclectic score update needed to be moved from the api_AddScore proc to code after the competition entry records are updated.
- Mod: ClubCMS: LoveGolf controls: add CssClassName property; clean-up CSS; update path to program (She Loves Golf) images and files to point to the ClubCMS clubs folder
- Add: ClubCMS: Google Tag Manager control
- Mod: Ignore Type2 clubs when updating a members nine hole status flag. They should not have an effect on the member 9/18 classification type.
- Add: Further to rev#24607, I actually need to know whether the club is a Type2 club or not. So I needed to add this column as well. Maybe we should delete the previous "IsVirtual" column and only add it when necessary? (because how do you clarify The Navy who share Waitemata's golf club/course)... just gets a bit weird.
- Mod: Adding this IsVirtual field to help us know whether a club is a "proper" golf club with a physical golf course or not. One reason I need this is because members being secondary members of these clubs are stuffing with the 9/18 membership type at the true and only real golf club.
- Fix: #5933 Preprint existing cards needed the hide round no and tee times flag - fixed so play date is always shown as was accidentally being hidden.
- Undo.
- Fix: Exclude casual golfers from autobooking search results.
- Fix: Exclude casual golfers from autobooking search results.
- Fix: wa_TBApplyBookingChanges_SendEmails: Booking update and cancellation emails were never sent because na.ID and member.Id were swapped, so the passport join never worked.
- Add: Adweb: Ability to set the EFTPOS Enabled (PaymentsEnabled) flag from the Adweb UI so that I don't have to run a script for it every time.
- Mod: sql: corrected a property name from DisplayReadMoreText to DisplayReadMoreTextLink
- Mod: For debugging - in staging we immediately send emails/push notifications after saving any booking.
- Fix: Bug found that affected the ICS (calendar invite) files being attached to outgoing booking notification emails.  They would not be attached if there was no push notification sent (which would be everyone in prod right now)
- Fix: API: autobookings save method was not converting times to local before saving.
- Mod: ClubCMS: LoveGolf Casual Golf registration: updated button style
- Mod: sql: added "NewsSectionCode" property to the existing "rNews Recent Articles" control
- Add: sql: new column CWNewsArticle.IsSticky
- Mod: This was causing incorrect adjustments on scoring details on holes on the public website. The main reason was because it was treating this person as a non-affiliate (because they are linked to a NonAffiliateID) which was actually incorrect (because the person was also linked to a live MemberId) Example was MemberId=648268, score playdate 3-10-2016
- Mod: API: Use the standard Olson timezone name for NZ (Pacific/Auckland) instead of the Windows one (New Zealand Standard Time).  This is a public API, we should be using standard names.
- Mod: API: Change time format to AM / PM, not a.m./p.m.
- Fix: Org: PGA prize split: computation corrections (ties, $200 to those who made the cut)
- Fix: Org: PGA prize split: assign default prize of $200 for those who made the cut (when position is shared / tie); update how we handle / remove disqualified and withdrawn players; Work in progress: splitting of money for ties with amateurs
- Mod: API: Refactored test project to clean up some duplicated code.
- Fix: #5933 Preprint existing cards needed the hide round no and tee times flag saved to the scorecard row. Also play times now hide.
- Fix: API: TZ mod introduced a bug causing autobooking dates to disappear.
- Fix: API: Overzealous NZST-UTC conversion removed.
- Mod: API: Unified all DateTime strings in the API - we now use ISO-8601 date strings for everything going in and out, so there is no ambiguity in the timezones at all.  I've documented the breaking changes in https://github.com/nitemind/teebooking/issues/120 (also included below).
- Fix: Org: PGA Tax Statement report: don't include first $500 in the RWT computation (i.e. prize money - 500 * .2)
- Fix: #5933 Preprint option to hide Round No, Start tee and tee times on printed cards, has been made to work. Fix: #5886 Vend members, when a customer is deleted in Vend, viewing the member in live caused an error. Now the member can be viewed and the loyalty credits label displays a "Vend account not found" message. Further work will be done to better the sync of member and customer.
- Mod/Add: sql: ClubCMS new controls and properties; create new table CWNewsArticleImage
- Mod: GOTG: Revert to the original home banner image
- Mod: GOTG: Revert to the original home banner image
- Mod: ClubCMS: news article: renamed web method UploadArticleImage; added new method: DeleteArticleImage
- Mod: ClubCMS: news article control: just updated the property names (to apply proper casing)
- Fix: Org: PGA statement: apply RWT for > $500 statement; add GST to Nett if they have GST number only;
- Mod: ClubCMS: news article control updates - image upload, display the featured / sticky article
- Mod: Org: updated how we're determining if the competition is a Charles Tour competition. Use the tournament name instead of OOMEvent name.
- Fix: Carts confirm slots, cart tickbox popup was cutoff. Z-index required. Mod: Carts confirm page, carts label needed padding. Fix: Confirm slots, cart fee legend showed duplicate fee if fee is the same for 9 and 18 hole.
- Fix: Org: handle disqualified players (previously it was throwing a cast not valid on the "No" column for disqualified players)
- Fix: Oops, dev proc was old.
- Fix: #5961 In some cases when you swap out a paying player with a non-paying one (like an out of category member to a friend who plays for free), the club would be unable to refund (or capture) the charged amount.  This mod will automatically refund the charged amount when the player is swapped out for someone else.
- Fix: Added DeletedDate/Deleted checks because timeslots were being logged as "competition added / removed" even though the bookings have been deleted long ago.
- Fix: MasterPageOptions mod caused the kiosk to crash on load.
- Mod: ClubCMS: PGA and Love Golf: news controls updates
- Fix: #5888 Green Fee Vend update. When a green fee was edited where new fees were generated, the old fee was not updated in Vend. The fix now updates the old fee Vend product. Also the current code was to delete the Vend product related to the fee, now we will deactivate the fee. That way sale history is not messed up with a deleted product.
- Add: Support for a new EFTPOS "terminal" in the Connector - ChoicePay.
- Mod: Bulk email teebooking control, when "All bookings - members and visitors" is selected, the From date defaults to today.
- Fix: ClubCMS: terraces2 course control: updated .live("click", to .click jQuery .live was deprecated after Jquery 1.7.
- Fix: org: added the missing condition "DeletedDate is null" when checking if the record exists in RSResultPrizeMoney before inserting / updating a record there. Also reset the message on top of the button after saving the prize money.
- Fix: golf.co.nz: Holden popup: If the logged in user is viewing someone else's profile, don't show the pop-up! (sorry, my bad!)
- Mod: golf.co.nx: full leaderboard: display club name only if not "PGA"
- Fix: golf.co.nz: tournament leaderboard page: position the PGA icon to the right of the player name (as it used to be, I stuffed up the img style when I did the previous revision)
- Fix: #5853 MyGolf Scores page for Casual golfers was not maintaining the column configuration from initial load to update panel postbacks. Javascript was used to hide member only columns, so the javascript needed calling upon the update panel loading.
- Fix: Save Notes button styles removed to stop it from clipping.
- Mod: Casual Golf #5513 Allow anonymous users to download a PDF with their vouchers directly after purchasing.  This is the UI stuff that makes up the change, this is commit 2 of 2.
- Mod: Casual Golf #5513 Allow anonymous users to download a PDF with their vouchers directly after purchasing.  I've had to add a method to the API to enable me to get the order details, this is commit 1 of 2.
- Mod: Bulk email compose, recipient teebooking option. All members and visitors option now hides min rounds and return cards only options. And the query to get recipients was tweaked for performance, as timeouts were occurring.
- Mod: ClubCMS: PGA tournament list - link the "IN PROGRESS" status to the details page
- Fix: ClubCMS: PGA tournament list: removed the link from the "IN PROGRESS" competition status. It was previously linked to the Registration page (though it's not allowing the user to register anyway). Also added the "Hidden from public, shown to DotGolf" for the IN PROGRESS status, if it is a competition hidden from the public.
- Mod: Teebooking carts. The tip popup when Cart tickbox is ticked was not displayed long enough. Increased time.
- Add: sql: Love Golf ClubCMS controls and their properties
- Mod: API: Exclude the autobooking being edited while we're checking for friend eligibility from `autobooking-friends` and `search-friends-and-members-autobooking`.
- Fix: API: Added @BookingId so that we can exclude the edited autobooking when checking if a player is already on a booking.
- Fix: API: Added @BookingId so that we can exclude the edited autobooking when checking if a player is already on a booking.
- Fix: API: wa_TBAutoGetPlayerFriends was missing the PassportId field.
- Reverted rev 24508.  That wasn't a workable way to fix the problem - need to reverse these transactions at another time.
- Add: Teebooking Carts. Missing js file
- Fix: https://github.com/nitemind/teebooking/issues/124#event-806109381 Order Autobooking listing by start datetime.
- Mod: API: search-slots now returns another field, CanCreateAutoBooking, which can be used to offer the user the option of creating an autobooking for the selected date, if no tee times are available for booking yet. Mod: API: list-future-dates was not returning the AutobookingAvailable status at all; only ClosedOrFullyBooked.
- Reverted rev 24508.  That wasn't a workable way to fix the problem - need to reverse these transactions at another time.
- Mod: ClubCMS: Love Golf search: fixed enquiry submission
- Fix: Broke the master page with regards to dynamically adding WebUserControls, in rev 24513, ticket #5884.
- Mod: ClubCMS: Love Golf search control: style responsiveness updates
- Fix: #5657 Online payment log entry now only inserts NonAffiliate Id in the username IF the MemberId is null or 0. Otherwise there were cases when the username was produced as M98765N1234567, which was breaking the TeeBooking history report.
- Mod: ClubCMS: Love Golf program search bar: as requested, removed price range filtering
- Mod: ClubCMS: Love Golf search control: as requested, hide price range if searching for She Loves Golf programs; also updated and cleaned up styles
- Fix: #5943 When you print a visitor card, weird stuff happens with the KO binding and the green fee / competition display.
- Fix: Competition Setup form lock/unlock icons for locking the time for multiple rounds were both showing when locked; only one of them should show at a time.  This is because of the new Edge styles, and I've now gone for a simpler approach of 2 different images rather than a sprite.
- Fix: #5884 The course selector control was depending on MasterPageOptions but because of the position that the script was loaded relative to MasterPageOptions, it was not seeing the variable, leading to an error and causing some course/marker select controls not to load their content on the competition setup form.
- Mod: ClubCMS: LoveGolf: program search style and script updates; to allow the main search control and the search bar to appear on the same page.
- Fix: #5682 Prize template edit was not saving the fixed prize value for a line. The computed ko property needed a write function.
- Add: Teebooking book carts for players. Stored proc updates for bookings with carts
- Fix: #5790 Initialise the Xero certificates at the time of the first GetSession() call, not when the application is initialised, because we don't know in which HttpContext.Current we are being called, and we may not be able to use Server.MapPath.
- (DFH Note that I've reverted this one in rev 24522) Mod: #5922 MAJOR (okay not really, but the impact could be if we don't test this one properly)  We now show bookings that had their green fee set to $0 (Affiliate) to the user in the Capture Payments area.  This was done to give the user the explicit option of refunding transactions where the player has joined their club after making a paid tee booking.
- Mod: ClubCMS: uMenu style
- Mod: ClubCMS: Love Golf Search: added new property so we could handle the dropdown menu selection: "Clubs and membership" and "She Loves Golf"
- Mod: ClubCMS: PGA / subs payment: display a different message if transaction is not successful
- Mod: ClubCMS: uMenu: updated referencing of CSS file
- Add: Teebooking book carts for players. On the confirm slots page, each player in the booking has a tick box to book a cart, a cart is booked for every 2 players ticked. No payment is taken for carts. A cart fee is selected in POG at the club.
- Fix: #5682 Advanced prize template editing, Division No selected now gets saved and does not revert to Overall.
- Mod: #5939: CW bulk email: added "Like us on Facebook" image linked to the club's Facebook page (Club.FacebookUrl)
- Mod: #5939: CW bulk email: added "Like us on Facebook" image linked to the club's Facebook page (Club.FacebookUrl)
- Fix: #5657 Online payment log entry now only inserts NonAffiliate Id in the username IF the MemberId is null. Found another case where MemberId = 0 which could cause the issue. Now MemberId = 0 is treated as null.
- Add: New report, Member Age Report.  This lists all members for a club along with their DOB and age as immediately before their next birthday.
- Fix: #5657 Online payment log entry now only inserts NonAffiliate Id in the username IF the MemberId is null. Otherwise there were cases when the username was produced as M98765N1234567, which was breaking the TeeBooking history report.
- Mod: When BKEntry.PassportId is null, use the DisplayName passed in from the client.  Technically we shouldn't allow null passportIDs here, but we do for future proofing.
- Fix: API: DateTime.ToLocalTime() did not do the trick, had to use a custom format string.
- Mod: API: DateTimes now sent with a TZ offset.
- Mod: golf.co.nz: updated the Holden logo
- Fix: #5938 NonAffiliate getting non-affiliate green fees when their affiliated friends are booked in.
- Fix: #5938 NonAffiliate getting non-affiliate green fees when their affiliated friends are booked in.
- Fix: #5920 Some "click here to verify" emails were being sent with HTML embedded, but the mailer was instructed to send them as text/plain.  This caused some email clients (Trustpower and OWA) to show raw HTML to the users.  I have no way to test this other than merging and sending a new email, then checking with the users on whether they can click the link now.
- Add: Adweb: Ability to view orphans and DFH transactions directly from the Adweb UI.  Only enabled for Matt and David at this time.
- Fix: Commented out where clauses for testing - restored.
- Fix: The wa_TBApplyBookingChanges_Validate proc was using the MemberMaxBookingsPerDay setting instead of the MaxFutureBookings setting to check the max future bookings limit.  Looks like a possible copy & paste bug.
- Add: TBP orphans link
- Mod: API: Autobooking date/time formats include an offset now.
- Fix: smalldatetime adding/casting bug caused an overflow in prod.
- Mod: sql: added another control and properties
- Partial Mod: #5933 Pass the value of the "Hide tee times and start tees" checkbox through to the backend.  I haven't yet done the required mods to the backend; this has to be completed for this ticket to be resolved.
- Mod: Link the PGA registration event to the NZG registration event via this field.
- Mod: ClubCMS: Login bar: updated referencing of its CSS file
- Mod: ClubCMS: added rMyAccountPaymentConfirmation control, which processes Payment Express result
- Mod: ClubCMS: Membership Payment: work in progress. Only working with credit card payment.
- Mod: ClubCMS: update Payment Express URL
- Add: Bulk email Compose page now has T+C warning when sending to > 25% visitors, as implemented in ComposeV2 Mod: Bulk email Compose recipient selector list was reordered and item names updated
- Mod: Automatically remove autobookings for resigned members.  https://github.com/nitemind/teebooking/issues/115
- Fix: Bulk email competition selector, enable competition dropdown when competition list > 0.
- Mod: ClubCMS: Green Fee NG control: just renamed "Other" to "Flat Rate". This control groups green fees into: 18-hole, 9-hole, Flat Rate
- Mod: ClubCMS: Login Bar: always show the Forgot Password link; updated CSS reference as well.
- Fix: golf.co.nz: use the "IsProfessional" flag to determine if the player is a pro (for the PGA icon beside the pro's name). (Note: all PGA NZ members are already in the member database as of August 2016). Otherwise, use the Association ID defined for the non-affiliate (as done before).
- Mod: ClubCMS: LoveGolf: mobile style fixes; copy over web service for the enquiry / registration form from the Love Golf solution
- Mod: Power or link failure protection and recovery for Verifone certification.  This is a relatively simple way to do things - we just alert the user and let them manually handle the problem.  Power failures are pretty harsh - chances are that the scorecard was not printed and manual intervention is required.  So we give the user the EFTPOS transaction status and we ask them to manually close the sale in Vend.
- Add: sql: insert new Love Golf ClubCMS controls and their properties
- Add: ClubCMS: LoveGolf: helper class
- Mod: ClubCMS: webconfig: added GetOnTheGreenClubPage key
- Add: ClubCMS: LoveGolf: search-related controls, their css, js, images
- Add: ClubCMS: LoveGolf: search-related controls, their css, js, images
- Mod: Abandon sessions to avoid the infinite redirect bug.
- Fix: When checking edge/stable URLs don't include the /validate.aspx check where SSO redirects to - as that causes a redirect loop between edge and live.
- Fix: #5879 Problem where NaN and Infinity prize values appear if no-one wins a hole prize.
- Fix: Timeslot locks were not released properly after booking creation because the ApplyBookingChangesStage table was emptied before the lock deletion statement (and that meant the TimeSlotId values were no longer available)
- Mod: Org: Registration details: hide the "Player Type" field for "affiliates"
- Fix: #5904 When entering scores for second round played on the same day, for a non-CP club, the results for the first round would not be included in the total.
- Mod: ClubCMS: OnPar: simplified referencing of the control's CSS file
- Fix: #5913: ClubCMS: OnPar: hide "brought to you by" if there's no sponsor image. Also updated the "image not available" images.
- Mod: ClubCMS: Hole images query - exclude images with "deleted" as RelativePath
- Fix: #5913: ClubCMS: OnPar Hole control: when deleting the top right sponsor image, just update the Image.RelativePath. Previously, we were logically deleting both the Hole and HoleImage records, hence, the sponsor title, description, and URL were all deleted when an image is deleted.
- Fix: #5913: ClubCMS: OnPar Hole control: when deleting an image, just update the Image.RelativePath. Previously, we were logically deleting both the Hole and HoleImage records, hence, the sponsor title, description, and URL were all deleted when an image is deleted.
- Fix: Oops, bug introduced while doing performance improvements.
- Add: sql: inserts to CWControl and CWControlProperty (Casual Golfer ClubCMS Registration control)
- Mod: ClubCMS: Love Golf: renamed a property
- Add: ClubCMS: LoveGolf: casual golfer registration control
- Mod: No deleteddate check.
- Mod: We had a particular problem with a non affiliate 1000254588 who does not have a ComputerNo. They have a username of "Gary635652096593162184", so I am guessing that this person registered before we assigned 800 numbers to everyone.
- Add: API: search-friends-and-members-autobooking endpoint to allow searching for friends and members while making an autobooking.
- Add: API: New autobooking-friends endpoint to retrieve a list of friends who are allowed to go into an autobooking at a specified club and date.
- Mod: Update the DotGolf page on www.golf.co.nz to showcase our product features in more detail. Used same images and content from the brochure.
- Mod: PGA want to be able to see their Members Id's (907) in the registration list (rather than the home club id). They also want to see the PGA category rather than the club category. I have done an isnull around this to display the home club category if not a member of the PGA. I checked live, and I cannot see anywhere this is referenced, but it should still work because of the isnull around it.
- Fix: Another wa_TBApplyBookingChanges performance issue sorted out.  Cancellations are now fast again!
- Mod: wa_TBApplyBookingChanges - shaved 6s off a cancellation in Staging.
- Mod: wa_TBApplyBookingChanges cardinality estimator problems sorted with some hints and a few query changes.
- Mod: wa_TBApplyBookingChanges - applied query hint to speed up unlinking of scorecards.
- Mod: https://github.com/nitemind/teebooking/issues/113 Autobookings: Timesheet must exist for autobooking to be created.
- Mod: Changed the lookahead to 1 minute.
- Add: API: Test suite for autobookings.
- Add: API: Create autobookings call will now return the created booking object.
- Mod: Removed diagnostic messages from SSO auth code.
- Mod: Completed wa_TBProcessAutoBookings.  Email and push notifications added, speed improvements made, error detection added.
- Mod: https://github.com/nitemind/teebooking/issues/118 Recalculate timeslot release times whenever the user changes anything that would affect these times.
- Add: Procedure to calculate release times and store them on the TBTimeSlot table. Fix: Validate proc issue corrected when you book a person into multiple timeslots
- Add: Bulk email - Recipients selector - Teebooking. Date to validation removed. All bookings - members and visitors option added, and when selected date from validation requires >= today. - Recipients selector - Competition entrants for future competitions - When > 25% of recipients selected are visitors, a warning with T+C tickbox is displayed and required to be ticked before the email is saved.
- Add: TBOpenDay.CreateDate column to track when open days are inserted, so that we can use this value as the calculated release time on TBTimeSlot.
- Add: New CalculatedReleaseDateTime columns for TBTimeSlot where we will store precalculated release date/time values for each timeslot.
- Add: API: Endpoints and database schema added to support autobookings. Mod: user-bookings-and-suggestions also returns autobookings now. Add: POST /api/v1/user/accept-auto-booking-terms to allow app to inform API that terms have been accepted. Mod: user-details returns a HasAcceptedAutoBookingTerms flag. Add: Schema scripts for generic booking system.  Documentation is at \\eddy\development\Generic Booking Schema\Generic Bookings Schema Documentation.docx
- Undo.
- Add: API: Column to keep track of whether a member has accepted the auto booking terms in the app.
- Mod: Try and show the Id of the club logged in (rather than the homeclub Id) for members who are members of more than 1 club. This was mainly done for PGA when in Org you search for the name, the persons homeclubid was appearing in the search rather than the 907 Id.
- Mod: Checking Casual Golfers instead of Social Golfers. Also, checking the PassportCredential for both now.
- Fix: 1 million lashings for me. (lucky we beat the publish - good for testing!)
- Fix: Stop URL hacking to get to non-affiliate details for social members.
- Mod: Because we are dealing with Non Affiliates in this section of the query, we see no reason why to return the old MemberId value (if they were previously a member). We found this problem when searching for a member in Org (in the member search clicking the search button) and it returned people who were casual golfers who used to be a member of a club.
- Mod: Love Golf: updated the home page banner to the old She Loves Golf teaser ("Coming in November")
- Mod: Added ability for Support to update the DisablePublicPopupAds option on a member record.
- Mod: If the Member.DisablePublicPopupAds flag is set to 1, do not show popup ads.
- Add: New column to allow me to turn off holden ads for a member.
- Add: New Xero Entrust certificate added.
- Mod [MAJOR]: Refactored wa_TBApplyBookingChanges to handle booking create/update/cancel operations on more than 1 timeslot at a time, even across multiple clubs. Mod: A couple of performance enhancements, specifically filtering Scorecard by ClubId when unlinking timeslotentries. Mod: Don't delete the rows from ApplyBookingChangesStage if we didn't create them in wa_TBApplyBookingChanges; it should be up to the code that created these rows to delete them again.
- Mod [MAJOR]: TeeBookingHelper now inserts data into the stage table directly instead of generating XML.  I'm expecting to see some pretty significant performance benefits from this change, especially when the system is under load.
- Mod: Minor mod to show "Casual Golfer" rather than Non-Affiliate in the return from the search screen. Picked up from the previous commit for Org. ---- Mod: Give NZG the ability to look up casual golfers in the member search area. Allow NZG to update some details for casual golfers. Allow NZG to edit scores for casual golfers. ----
- Mod: Give NZG the ability to look up casual golfers in the member search area. Allow NZG to update some details for casual golfers. Allow NZG to edit scores for casual golfers.
- Mod: Allow callers to put data in the ApplyBookingChangesStage table and passing a @StageUID instead of using the @Xml parameter.  This is backwards compatible. Mod: Don't call into Booking code if there are no Book operations in the incoming data.  Same for Update and Cancel.  This should save some time. Mod: Don't call into the Add to Friends cursor if there are no AddToFriends='true' requests in the data.
- Fix: Moved some of the non-optional checks back from _Validate into the main wa_TBApplyBookingChanges proc.
- Mod: Save some CPU cycles by returning out of the TBTransaction_InsUpd trigger if there are no updates or rows to process.  This avoids spinning up the XML DOM for no reason every time we're just doing a status or completeddate update, not touching the XML column.
- Fix: #5893 When a score in a comp is DQ you cannot assign a prize template to that competition (cast to null error).
- Fix: #5892 Stableford results were being ranked in reverse order (even though prizes were still displaying correctly).  This was because it was ranking by the total score, not the position in the results.
- Fix: DevelopmentARN, not DevelopmentMode...
- Add: API: New field added to allow registering devices in development mode, using the dev certificates instead of the distribution ones.
- Mod: Mailer: Read AWS configuration from .config file instead of hardcoding. Mod: Mailer: Allow registering push notifications for devices using an alternative ARN.
- Mod: wa_TBApplyBookingChanges refactored to extract the validation code.  This code is only called when @OverrideWarnings=0.
- Mod: Refactored wa_TBApplyBookingChanges to use a staging table (ApplyBookingChangesStage) instead of the #tt temp table.  This is keyed by a UID so that we can pass the UID into sub stored procedures to do more processing.
- Fix: #5883 the Passport.NonAffiliateIncludingDeleted property was not working as intended because it relied on the NonAffiliateId property which already filtered out deleted NonAffiliate records.
- Mod: API: Refactored and made a centralised logging controller which enables all API controllers log their messages in Loggly. Add: Endpoint to allow Ruben to send test push notifications.  This will probably need to be removed when we go to prod (although you need to know the internal device ID to abuse this, so exposure is limited)
- Fix: API: ChargeMemberId and ChargeNonAffiliateId fields were not being set correctly which meant that payments were not able to be captured, even though they appeared as paid on the start sheet.
- Fix: API: TBTransaction.CompleteDate was not getting updated with successful token billed transactions, which meant that they could not be captured.
- Mod: API: Send push notifications when bookings are created/updated/cancelled.
- Fix: API: Throw an exception if the device ID could not be found in the mobile device table.
- Fix: API: https://github.com/nitemind/teebooking/issues/94  Remove NotAllowedToBook=true bookings from search-slots response.
- Mod: Disable the credit note allocations UI if a club has Xero.  If clubs allocate credit note balances manually, and then later does the same in Xero (to a different invoice) we get duplicate allocations in our database.
- Mod: If a club has the SUBS product, they will now get the new Edge styles.
- Mod: Send json messages to SNS.
- Mod: Removed extra app.config files.
- Add: Missing files.
- Add: Push notifications into DotGolf.Mailer service.
- Add: New field to keep track of the last time we updated AWS SNS with deleted mobile devices.
- Add: Table and new column for push notifications.
- Mod: API: Don't let adults book into junior slots and vice versa.  https://github.com/nitemind/teebooking/issues/98
- Mod: Removed SQL command timeout extension for wa_MergeMember - it does more bad than good. Mod: Made SQL parameters type safe to avoid implicit casts. Mod: Improved success message and added stopwatch to report the time it took.
- Mod: Added WITH RECOMPILE to defeat parameter sniffing (this proc does not run often) Mod: Moved wa_RolloverUpdateMember to after the final commit to help the ridiculous locking going on.
- Mod: Don't do a rollover update member for every score being merged; instead defer this until the end and only do it for the earliest score on the destination member's record.  This will have the effect of NOT updating the handicap index on each Score record, but it will be a lot faster, and the projected values will still be updated as normal.
- Mod: Send JSON up to loggly as JSON, not as a string.  This should make copy & paste jobs easier for me.
- Mod: Send JSON up to loggly as JSON, not as a string.  This should make copy & paste jobs easier for me.
- Fix: API: Null reference exception sorted out - passport can be null in the case of a guest.
- Mod: API: Standardised exception handling; we now always return JSON that contains info on the error that occurred, even in the authorisation handler.
- Fix: Show a warning to the user when they attempt to edit a draw that is more than a week in the past.
- Mod: Linked the LoveGolf banner as requested by Mel.
- Fix: RSResults: The background multi-round recalculate job was adding deleted scores back into the results erroneously.  This was due to a missing DeletedDate check in a WHERE clause of the Result.RecalculateResults() method.
- Fix: API: Don't show 9 hole slots to 18 hole members in Available mode.
- Argh, missed a file.
- Fix: API: https://github.com/nitemind/teebooking/issues/93 Proper case friend names.
- Mod: API: Hide ladies tee times from men when viewing "Available" slots.  Keep showing them when viewing "All".
- Fix: API: Club fees that were limited to specific timeslots were showing up all over the timesheet, not just on the slots they were linked to.
- Mod: If there are only 9H places available to book, don't show the 18H green fee.
- Mod: https://github.com/nitemind/teebooking/issues/100 and https://github.com/nitemind/teebooking/issues/101 - modified so that we're using the wa_TBSearchByClubDay data instead of the roll-our-own code that gets the first and tee time for a club and day.  This should also speed up the search as we don't have to run 20 queries to calculate the tee times for each club.
- Fix: Related to #5857: Another gender==null saving bug fixed.
- Fix: Related to #5857: When adding a template to a competition when the template contains a mixture of Each and Overall division prizes, the page crashes with an Object reference not set error.
- Reverted my change - I think this bug actually happened earlier on in the calculation, Pos should always be 1 == best.
- Mod: Small change to test connector updating.
- Fix: Bug in rev 24284 - while the results reports now have competition types and ranks, Stableford results were ranked upside down.
- Fix: #5857 Problem parsing the gender properly.
- Fix: API test suite was failing due to new CGRegions stuff.
- Fix: API: Regions test wasn't working due to out of order delete and FK.
- Add: API: Added endpoints to support push notification device registration and deregistration.  Currently we only support push to devices where a person has logged in as a member, but the schema has been designed so that we can target guests later on.
- Fix: Connector was missing Verifone.Vault.DotNetAPI.dll from the updates.  This would cause EFTPOS transactions against Verifone terminals to fail.
- Mod: GOTG: Added Father's Day 2016 banner.
- Add: LoveGolf: Banner image for Father's Day 2016.
- Fix: Vend: Voided sales were being resurrected in a Remove & Redo scenario, instead of being left alone and a new sale created for each "redo".  This had the effect of duplicating all payments when the sale is subsequently closed.
- Fix: Vend: When doing a remove & redo or delete for a scorecard for which the booking was paid for online, the paid flag was being reset to false in error.
- Mod: API: renew-token now also accepts the tokenExpiryMinutes parameter.  https://github.com/nitemind/teebooking/issues/92#issuecomment-242463529
- Mod: The POS was not handling TBP transactions paid online - if you set the green fee to complimentary the online booking would be refunded, and if you kept the green fee set Vend would have a duplicate green fee.  This has now been changed to send a new "Online Payment" payment line through to Vend for these green fees, and to make the cash/other payment lines only reflect the cash portion of each sale.  Green fee money taken online cannot be used towards product purchases.
- Mod: API: Allow the client to ask for shorter lived JWT tokens.  This is for debugging purposes right now, and the new field is optional, defaulting to 20 minutes as it was before.
- Fix: #5857 When using Gender in the advanced section of the prize templates, adding it to the comp causes an exception.
- Mod: If a CGUser record does not exist for the recipient of an order detail (eg. an affiliated member who does not have a login to GOTG), the order details effectively disappear because of the inner join, so the admin cannot redeem the voucher or complete the user profile.  Changed this to a LEFT JOIN so they can see Change Recipient and Complete User Profile.
- Fix: API: Don't return Junior green fees to the app to show on the search club day screen.
- Fix: Prize report was missing the competition type and the rank was not the desired number.
- Fix: Properly calculate the MemberCanEdit flag based on whether the user can edit the current entry or not.  Previously we just checked whether it was part of the existing TicketId we've previously found - and the ticket may not belong to the user after all.
- Mod: API: Automatically filter the slots returned for visitors to a club to about 20% of available times.  The client no longer has to pass the OnlyReturnPortionOfAvailableSlots flag - if it is set to NULL we will automatically set it on our end.
- Mod: API: If a slot allows members only and you're a non-affiliate or visitor, don't return the slot in search-slots at all.
- Add: API: Return AffiliatedMembersOnly from search-slots so that the app can disable the Add Guest option when only affiliates are allowed.
- Mod: API: Return separate FirstName/LastName fields from load-slots-for-booking.  https://github.com/nitemind/teebooking/issues/87
- Add: new video tile as per email instructions.
- Fix: #5845 The max bookings per member setting only worked in ClubCMS, not golf.co.nz.
- Fix: Non-affiliate names inadvertently got updated due to some legacy code in wa_TBApplyBookingChanges.
- Fix: Bump css cachebuster tag.
- Fix: Improved ruler colour.
- Fix: Adweb: Increased menu font sizes.
- Fix: Innocuous javascript error in SCA - just enough to annoy me while debugging.
- Fix: #5849 first issue - If you enter a score hole-by-hole by member ID and enter the member into a competition, the next time you edit that score, the competition list does not have the competition showing, even though the competition was successfully entered previously.
- Mod: API: Throw MaxFreeBookingsLimitExceededException instead of a generic System.Exception so that the client code can tell.
- Mod: EFTPOS integration added to POS.
- Mod: Connector: Moved the Vault API calls into the tray app (communication between the service and the app is done using named pipes).  The Vault stuff wants to run on the user desktop so we can't call it from the service account. Mod: Refactored so that the VaultSessionManager is a singleton class in its own right. Add: Ability to cancel a transaction that is in progress (although I think this may not work due to the way pipes are used synchronously)
- Add: Verifone Vault terminal integration.  This may not be 100% complete yet - just committing it so that I can test that the Vault Reprint Receipt dialog will appear when the Connector is running in Service mode.
- Fix: API: https://github.com/nitemind/teebooking/issues/76 Could not search for other players when logged in as a casual golfer.
- Mod: Scanning: When debug is turned on, always save the debug jpg file even if the initial card read step fails. Mod: Scanning: When the configuration file is in Debug mode, save debug scanning jpgs.  This previously only worked when you passed ?enableDebugMode to the localhost:3673 call. Mod: Scanning: When the alignment markers are damaged, no debug jpg info was produced.
- Mod: ClubCMS: MyAccount control, updated transaction fee from 10 to 9.95
- Fix: ClubCMS: This fixes the exception logged when umenudropdown.css is not found. (The previous code in this control doesn't check if the file exists in the clubs > Club ID folder. Note that the ustyles handler code already loads the css file from the clubs > Club ID folder and checks if it exists.)
- Mod: API: Automatically lock a timeslot when the load-slot-for-editing endpoint is called.  Default lock duration is 5 minutes, but this can be changed with the LockLengthSeconds field on the request.
- Fix: API: Compilation problem in Jenkins.
- Mod: API: Fix @CGRegion based searching in SearchByClubDay. Mod: API: If an endpoint throws an exception, log this in Loggly and our exception log.
- Fix: API: DISTINCT problem when looking up a ticket ID.
- Add: ClubCMS: this script adds a new "My Account" control to CWControl, and its properties to CWControlProperty
- Mod: ClubCMS / Shared: Added a GetPaymentsByMember method which returns a dataset of member payments (from the Receipt table)
- Add: ClubCMS: MyAccount control, related image and CSS - this will initially be used by PGA for the membership payments.
- Mod: API: Enforce the max number of free bookings per day rule.  This causes the apply-booking-changes endpoint to throw an exception when a violation occurs.
- Fix: API: Duplicate regions returned from wa_TBGetClubRegions.
- Fix: API: search-location result ordering was indeterminate; should be ordered by distance to club.
- Fix: API: Tests updated to work with new CGRegions.
- Mod: API: Cleared up the confusion around a null/not-null TicketId field (https://github.com/nitemind/teebooking/issues/63) Mod: API: Combined the Entries and ExistingEntries arrays into a single one (client app separates these players by using the MemberCanEdit field).
- Mod: API: Changed to using CGRegions instead of the traditional ones from the Region table.  This involved a change to SearchByClubDay to accept another @CGRegionId parameter, it's backwards compatible so shouldn't stuff with the existing code.
- Fix: API: https://github.com/nitemind/teebooking/issues/52 - My Bookings not showing for casual golfer.
- Fix: API: https://github.com/nitemind/teebooking/issues/62, sort order was a bit strange due to performance optimisations server side.  Hopefully this doesn't cause us any issues...
- Fix: API: MemberCanEdit field now returned as part of load-slot-for-editing.
- Fix: API: MemberCanEdit field now returned as part of load-slot-for-editing. Fix: API: https://github.com/nitemind/teebooking/issues/51 - removed "from" and replaced with "18 holes/9 holes"
- Fix: API: load-slot-for-editing wasn't doing an Entries / ExistingEntries split, so the client could not tell which entries were part of the current ticket.
- Add: Script to recalculate all eclectic competitions for next gen clubs.  Note that we have decided to leave DGE and earlier eclectics the way they are (they'll appear blank in the results) because they were buggered before anyway (due to changing handicap indexes of the players over time).
- Mod: #5438 Did the data plumbing to get the marker to the Public ui, but unfortunately the UI itself is broken (even in prod right now), so I cannot proceed.  I don't currently have time to fix this problem as well as all the other eclectic stuff, so I'm leaving it as-is.  This isn't a regression at least, and I've got the data plumbed in as far as I could go - it'll get to the client, but the client isn't doing anything with it yet.
- Mod: #5438 (commit 2/2) Added sections into the Eclectic results pages for the marker names.  Modified the eclectic SQL to return grouped by markers.
- Mod: #5438 (commit 1/2) Changed Eclectic competitions so that results played from different markers are now separated out in the report. Mod: To calculate the half/whole net result, the Eclectic reports now calculate each player's handicap as on the last round of the competition (or today if not played yet).  This means that you can now print the eclectic results at any time after the completion of the tournament. Fix: Eclectic report look tidied up a bit.  Added competition name to the header.
- Fix: D'oh, okay, so we need this one - ClubCMS uses it.
- Mod: Removed an unused Eclectic results query - I suspect this is the only reference to it in the code, so I'm dumping it and committing to test if any other project needs it.
- Mod: golf.co.nz: renamed "The First Tee of New Zealand" to "SNAG New Zealand" as requested by Jan / NZG
- Mod: Upgraded Connector setup build to WiX 3.10 (https://wix.codeplex.com/releases/view/624906), released Jul 5, 2016.
- Mod: golf.co.nz: Renamed "Golf Development Manager Contact Details" to "Golf Development Manager and District Contact Details" and updated the contacts, as requested by Liz / NZ Golf
- Fix: Mutex security bug was affecting Adweb when another app has created a mutex by the same name.  Often happens with DataCache so I've fixed the security in this method.
- Mod: Org: Prizes export: updated the query to use the CMember or NonAffiliate Country field instead of the Overseas flag in the PGACategoryMapping table
- Add: Alter ClubMember view to add SubsDirectDebitBankAccountNumber
- Fix: #5751 Duct tape patch to make the DotGolf sections reappear when the matt user has no valid passport credentials attached.  We'll get back to the whole permissions thing a bit later; this is just to make it work for the time being.
- Mod: API/Prod: Reverted showing Advanced green fees via search-slots and search-club-day because the underlying procedures are also used by the public site, and we don't want advanced fees showing there without proper filtering.
- Mod: API: Removed MemberCanSeeName from search-slots response (for performance reasons).  Added a new load-slot-for-editing endpoint that can be used to get the same information.
- Mod: Remove the MemberCanSeeName field from wa_TBSearchSlots for performance reasons.  We're going to be using the new load-slot-for-editing endpoint instead.
- Add: This script adds a new column: UserSecurity.MerchantId
- Mod: GOTG: Allow non-club merchants to log into GOTG admin site
- Fix: wa_TBSearchByClubDay fixed to avoid IsCalculated=0 limited greenfees.
- Fix: API: Copy and paste bug.
- Fix: Added back in the extra conditions for MemberCanSeeName - I originally excluded them because they were going to slow wa_TBSearchSlots down too much; but I've had to add them, they were needed.
- Fix: API: App paid bookings actually show up as paid now ... sometimes.
- Mod: API: Changed check constraint to allow new system code A for API.
- Mod: I've gone a little more reserved on this as we're going to be affecting PROD systems too.  Included all the advanced club fee groups.
- Fix: API: Dammit, silly quotes around the block name messing with my day again!
- Fix: API: When looking at friends while booking on the day of play, friends cannot be selected because of an error "Deadline passed".  Turns out wa_TBGetMemberFriendsEligibility was never updated to handle bookings on the day.
- Mod: API: #error comment about issue https://github.com/nitemind/teebooking/issues/20
- Mod: API: https://github.com/nitemind/teebooking/issues/35 If the admin has changed the slot alias away from the default for the block, the alias is shown on the app instead of the friendly alias.
- Fix: API: https://github.com/nitemind/teebooking/issues/36 - API was not returning the new NineHoleSlot value (calculated from Allow9Hole and Allow18Hole).
- Mod: API: For search-location, only show 9H rates if there is no 18H rate available on a day+club.
- Fix: API: Don't filter by specific club fee group types as we just show all calculated types to the user.
- Fix: Same problem with 9H/18H.
- Fix: API: MinGreenFee value was not calculated properly for guests.
- Mod: https://github.com/nitemind/teebooking/issues/54 When calculating the "from" green fee, don't consider fees that not applicable to app guests.
- Mod: API: Return a flag from wa_TBSearchByClubDay to allow us to check if specific green fees should be shown to app guests.
- Mod: API: Add IsAffiliate to search-slots response.
- Mod: API: Return MemberCanSeeName flag from wa_TBSearchSlots.
- Mod: API: Return MemberCanSeeName flag from wa_TBSearchSlots.
- Add: API: Handicap info is now returned from user-bookings endpoint. Fix: API: Ticket ownership was not set when creating paid bookings.  This is part of the $ sign not appearing issue (https://github.com/nitemind/teebooking/issues/27) - but has not solved the issue yet. Mod: API: Refactor to move BookingRec class into its own file.
- Mod: API: Add handicap info to the output of wa_TBGetMyBookingsForMember - for use from the API.
- Mod: Live: Direct Debit Export Page: in the "DotGolf Only" column, add the Rollback link as well, just for the recent files
- Mod: Live: Direct Debit Export Page: added "DotGolf Only" column to have the download link available for DotGolf users only, just for the recent files
- Mod: Live: Direct Debit Export Page: added "DotGolf Only" column to have the download link always available for DotGolf users only.
- Fix: Live: POG: Keep slots filter on top (previously, it was hiding under the grey footer)
- Fix: API: Charge nodes were not correctly set when paid bookings were made through the API.
- Mod: Love Golf: updated the home banner (Hastings photo) and link as requested by Mel
- Fix: When billing a stored card the payment amount was also excluding the booking fee.
- Fix: API: The transaction amount was excluding the booking fee when the credit card was charged; Amount should be inclusive.  This caused problems when editing the bookings.
- Fix: Can't use @MinTimeSlotId this way because of the following scenario:
- Fix: API: Specials were not appearing when searching with the search-location endpoint.
- Fix: IsJunior null bug.
- Mod: Pass FilterByNineHole parameter into wa_TBSearchSlots
- Fix: Another few filtering and green fee calculation issues found and fixed.
- Mod: Org: Competition setup: updated the script that inserts into the Competition table to correct the value of Competition.CreatedByClubID for PGA competitions
- Fix: Filtering had a bug in it.
- Mod: API: Allow wa_TBSearchSlots to filter by 9H or 18H slots, and filter the calculated min green fee while we're at it - this is so that app can display the relevant minimum greenfee.
- Fix: API: AllowBookings field was mistakenly populated using the AllowBookingsForToday value from the database.  This field only affects bookings on the current date, not future dates.
- Mod: ClubCMS: Tournament List control: display purse / prize pool, add CSS
- Mod: ClubCMS: Leaderboard control: simplify referencing of CSS
- Mod: API: Don't return any autobooking allowed dates.
- Fix: API: https://github.com/nitemind/teebooking/issues/40 - should exclude players being cancelled when calculating fees.
- Mod: ClubCMS: tournament venue control - wrapped in parent div
- Mod: ClubCMS: tournament controls: minor code clean-up
- Mod: API: Disabled booking suggestions and autobookings for performance reasons.  Empty arrays are returned to the client. Fix: Some compiler warnings fixed; added awaits to a SQL call. Fix: Removed unused variables.
- Mod: Org: PGA prizes: updated labels and style; pre-populate the Lodgement Reference text field
- Fix: API: request body is now being logged properly. Fix: API: suggested bookings was slowing the user-bookings-and-suggestions endpoint down significantly - added some code to restrict the amount of data being processed - this really needs to be rewritten in SQL.
- Mod: Org: PGA: removed prize file export link (as export has been integrated in the Prizes page)
- Mod: Org: updated PGA Overseas Prizes report
- Mod: Org: PGA prize ABA export (for NZ-based winners), CSV (for overseas)
- Mod: #5721: Photo Gallery control: show latest photos uploaded first
- Fix: #5821 Related problem - if you have more than 1 deleted passportcredential the system would throw an exception instead of giving you the "Sorry, these credentials are not valid" message.
- Fix: #5751 When new users were created in DotGolf Live User Admin, no Passport or PassportCredential rows were inserted, resulting in the user being unable to login to the system.
- Fix: When a live user tries to login to Org (presumably by accident), that username is deleted from PassportCredentials for all other clubs.
- Fix: When a live user tries to login to Org (presumably by accident), that username is deleted from PassportCredentials for all other clubs.
- Fix: API: Logging caused empty response calls to error out due to null response body.
- Add: Some basic caching for speed improvements.
- Fix: Adweb styles didn't completely work on dev1.
- Fix: Adweb styles didn't completely work on dev1.
- Fix: Adweb styles didn't completely work on dev1.
- Fix: Adweb styles didn't completely work on dev1.
- Fix: Adweb styles didn't completely work on dev1.
- Fix: Adweb styles didn't completely work on dev1.
- Mod: Updated DotGolf logo and did some style refresh while I was at it.
- Mod: POS product quantity adjustment popup now allows for the text box with the quantity to take keyboard input. Previously only the +- buttons affected the quantity.
- Add: API: Log client IP.
- Fix: API: Stopwatch wasn't working properly.
- Mod: API: Introduced logging to Loggly account https://dotgolfapi.loggly.com/ (see KeePass for credentials).  This must be enabled by adding LogglyEnabled=true in the app settings in Web.config.
- Fix: Booking fee returned from calculate-fees when there should not be. Fix: Null reference exception when no ExistingEntries array is passed into the API.
- Add: New admin bar at the top of DotGolf Live - only visible for DotGolf IP addresses.  Allows you to change the current club, and also shows the current Jenkins build status.  We can add more stuff to this later as it's all client driven - I've added an example in there to link to Adweb when you're in TabMember.aspx looking at a member record.
- Mod: Allow clients to request changing to a new club - this is useful for the matt user which is linked to every club in the system.  You have to have the same username/password at the destination club for this call to work.
- Mod: LoveGolf: updated home banner image to GOTG Olympics as requested by Mel
- Fix: API: Guest bookings were causing exceptions "Cannot insert the value NULL into column 'CreatedBy', table 'NZ2Stage.dbo.TBTimeSlotEntry'; column does not allow nulls. INSERT fails. at line 599" because there was nothing to put into the CreatedBy field.
- Fix: API: Refactored to remove unnecessary call to calculate previous payments. Fix: API: The booking fee was caused another credit card payment to be required - calculation fixed.
- Fix: OOM wasn't checking OOMPlayer.DeletedDate, so duplicate scores (due to OOMResult records linked to deleted players) were causing PK unique violations on the UI.
- Fix: API: Suggestions didn't work for someone who played the same club 99% of the time.
- Mod: ClubCMS: simply referencing of CSS.
- Mod: ClubCMS: added fancybox css / js / images
- Mod: ClubCMS: offer / promotion: added ui for the Priority field
- Mod: ClubCMS: Hole Detail: Added hole video URL. Video is shown on a pop-up (copied video pop-up approach from the Gulf Harbour splash page)
- Add: This script adds a new column: HoleDetail.VideoUrl
- Fix: API: Null reference when confirming a guest booking.
- Fix: API: Don't RSA verify the InhibitStoredCardPayment field - not required in _Confirm anyway.
- Fix: Warehouse builder: Missed another place where the category code+name length was too long to fit in the warehouse DB field.
- Mod: Org: updated PGA ABA details
- Fix: POS kiosk printed cards with competition fees were registering a vend sale with no payment info (an open sale), but when updating the sale from POS, the payment was not being added. Now the payment is added to the existing sale.
- Add: VEND POS logging for sale webhook and register sale, to help diagnose vend integration issues.
- Fix: ClubCMS: TournamentRegistration: country and status
- Fix: ClubCMS: PGA registration: saving of country value
- Mod: ClubCMS: tournament registration (PGA control): get the passport ID based on CMember.ComputerNo not Member.ComputerNo
- Mod: ClubCMS: tournament registration: get the CMember record based on the entered Computer Number
- Fix: Warehouse: Long category names caused a truncation error.
- Fix: ClubCMS: tournament registration: get member id from cmember table (given the computer no entered)
- Fix: ClubCMS: TournamentRegistration: country selection
- Mod: POS after a barcode search, the search text now clears so it is ready for the next search.
- Mod: ClubCMS: Registration Payment Confirmation: differentiate the email for PGA competitions
- Add: ClubCMS: This script adds a new property to the existing RegistrationPaymentConfirmation control
- Mod: ClubCMS: Tournament Registration: disable the country field if member
- Fix: ClubCMS: Tournament Registration (e.g. 5CC): - If Australia is selected, rename the overseas member num field to "Golf Link No." - Fixed country selection when switching from guest form to member (entered credentials)
- Mod: ClubCMS: Tournament Registration: show overseas field when proceeding as a non-member; hide it if member enters credentials
- Mod: ClubCMS: Tournament Registration: show overseas field when proceeding as a non-member; hide it if member enters credentials
- Fix: ClubCMS: PGA: show overseas fields when proceeding as a guest
- Mod: Get on the Green: update banner (Mel removed the Olympic rings from the image)
- Mod: ClubCMS: removed "by NZ Golf" from email copy, to make the message generic (as this control could be used by PGA / clubs)
- Add: ClubCMS: new control, control properties; PGA report role, alter Registration table (to add PGA Membership Category)
- Mod: ClubCMS: we can now specify where to find the CSS file using the folder query string parameter
- Add: ClubCMS: PGA Member Registration control
- Fix: #5795 Prize template was failing to load if there was a DNF in the results. DNF now excluded from winners.
- Fix: API: More problems applying bookings for guests.
- Mod: Allow TBTransaction to have payments in it not linked to a MemberId or NonAffiliateId, as long as the IsInitiatedViaDotGolfAPI flag is true.  This will be used to track payments accepted for guests via the API.
- Add: Live: favicon
- Add: Live: favicon
- Add: Live: favicon
- Mod: Get on the Green: replaced Google Analytics with Google Tag Manager as requested by NZG
- Mod: Get on the Green: replaced Google Analytics with Google Tag Manager as requested by NZG
- Mod: golf.co.nz: replaced Google Analytics with Google Tag Manager as requested by NZG
- Fix: API: calculate-fees was not working in third party JWT mode (i.e. without a passport).  Also some of the passport fields were being referenced without checking for nulls.
- Mod: Get on the Green: replaced Google Analytics with Google Tag Manager as requested by NZG
- Mod: API: For guest bookings we only return slots where both genders are allowed to play.  This is because we don't ask the gender on the UI so don't have any way of enforcing this limit.
- Fix: dim_CMember kept growing because nothing was getting rid of the previous "current" records, due to a FULL JOIN issue.
- Mod: Get on the Green: updated the banner and the find offers background in time for the next GOTG run and olympics
- Mod: LoveGolf: replaced Google Analytics script with Google Tag Manager; cleaned up html formatting.
- Mod: API: Included 9H/18H in the FriendlySlotAlias if a timeslot is for 9 or 18H affiliates only.
- Fix: API: Filtering by 9H slots was not working.
- Mod: When asked with @CalculateMinGreenFee=1, wa_TBSearchSlots will now calculate and return the minimum green fee for each timeslot in the results.
- Mod: Ask wa_TBSearchSlots to calculate the MinGreenFee value.
- Fix: API: ORNS when calling search-slots as a guest (i.e. not authenticated as a member)
- Fix: #5793: GetMoneyOwedByMember: I missed to add "sum" when getting the sum of partially allocated credit notes. Hence, causing the error reported in this ticket.
- Mod: Adweb: club website menu items query: included deleted menu items in the query, suffixed with "(Deleted)". The Menus page in Adweb has an existing functionality to "undelete" the menu.
- Mod: Org: PGA prize - money formatting (added comma)
- Mod: ClubCMS: tournament registration control - corrected the enclosed controls by pnlHandicap
- Fix: Another hardcoded AWS credential.
- Mod: ClubCMS: PGA member earning / tournament tax statement - updated styles
- Mod: Org (PGA): updated report styles - right align the money headers
- Mod: Org: PGA report: consider members who shouldn't have RWT (CMember.IsDeductRwt)
- Mod: ClubCMS: PGA earning control: consider members who shouldn't have RWT (CMember.IsDeductRwt)
- Fix: API: The booking fee was incorrectly added to the amount to be paid, even if the user has already previously paid enough money to cover the new charges.
- Mod: Made the TicketId required for apply-booking-changes-confirm.
- Mod: Org: rearranged PGA tax report columns
- Mod: Org (PGA): updated table and link styles
- Mod: Org: added new [PGA] reports, role
- Add: Org: PGA Reports
- Fix: Found another hardcoded reference to the old AWS access keys.
- Fix: ClubCMS: Tournament Registration controls: don't allow users to register if there is no "Registration Open Date" yet
- Mod: ClubCMS: updated tournament cache key and expiration
- Fix: Refreshed the root AWS key - it got compromised because of the code push to Micropower.
- Fix: Refreshed the root AWS key - it got compromised because of the code push to Micropower.
- Mod: ClubCMS: PGA OOM individual control: style and formatting updates
- Mod: ClubCMS: PGA OOM control: style and formatting updates
- Mod: ClubCMS: tournament controls style updates
- Mod: ClubCMS: tournament controls style updates
- Mod: ClubCMS: score details: updated the background colour
- Mod: ClubCMS: score details: added bootstrap "table" class to properly format the table
- Mod: ClubCMS: Leaderboard control: add new property, "ShowPrize"; renamed control's CSS file
- Mod: ClubCMS: added dob in the details being saved into the Registration table (data is available, it just wasn't being saved)
- Mod: Org: PGA: display the new overseas membership category field (Registration.OverseasMemberCategory) on the registration details form
- Mod: ClubCMS: PGA Registration: renamed MembershipCategory to OverseasMemberCategory (for consistency with the existing field OverseasMemberNo)
- Mod: Org: PGA: display the new overseas membership category field (Registration.OverseasMemberCategory) on the registration details form
- Mod: ClubCMS: renamed text: "tournament" to "event"; "tournament entry fee" to "entry fee"
- Mod: ClubCMS: PGA registration: hide the overseas fields if a NZ PGA member is registering
- Add: Return previous payments from the calculate-fees endpoint.
- Mod: ClubCMS: updated tournament cache key and expiration
- Mod: ClubCMS: rNavBar: made the container CSS class dynamic, so we can set it to container or container-fluid
- Fix: Org: OOM tournament add score - handle Score smallint and int
- Fix: Competition Prizes - Special prizes did not save/load multiple winners Mod: #5619 Competition Prizes Special prizes winner selection added a "Select" item, allowing for no winner to be selected. Previously a winner had to be selected.
- Mod: ClubCMS: tournament course / venue control: removed hardcoded styles
- Mod: ClubCMS: added bootstrap css classes to the tournament course / venue tables
- Mod: ClubCMS: PGA styles
- Mod: ClubCMS: Registration Payment and Registration Payment Confirmation: added new property to allow hiding of handicap info (PGA doesn't need this)
- Mod: ClubCMS: added new properties to the responsive navbar to make it more flexible (i.e. easier to add custom html content)
- Mod: ClubCMS: updated the responsive menu control's css and fixed display of submenu
- Mod: ClubCMS: PGA registration control: removed handicap field, handle overseas guests
- Mod: ClubCMS: PGA earning control: added year filter, member details / report header, updated jspdf script to latest version
- Add: ClubCMS: added new css files for PGA controls
- Mod: ClubCMS: PGA tournament list control: updated naming, style, use selected year to filter the data
- Mod: golf.co.nz: updated DPS URL to ...pxpay.aspx
- Mod: ClubCMS: updated tournament cache key and expiration
- Fix: Build error caused by PassportHasTokenBillingCardSaved signature change.
- Fix: API: RSA signature verification error due to TicketNo being set in apply-booking-changes. Add: API: Return part of the billing token credit card number so that it can be displayed to the user.
- Mod: #5574 Disabled sorting the players as it seems that they want the players to appear in the order that they were first entered.
- Mod: ClubCMS: PGA registration controls
- Add: ClubCMS: rCategoryNameLabel control
- Mod: API: Upgraded to new pxaccess as per Grace's email.
- Fix: #5525 The countback algorithm loses accuracy when you have golfers scoring very high gross scores (13+).  This ticket is about a lady scoring 13, putting her in a tie for pos 16.  Because this is a 9 hole competition I increased the MAX_SCORE so that we can deal with gross scores of up to 15; that would fix this case.
- Mod: ClubCMS: create PGA its own Registration control
- Mod: PreprintV2: Improved so you can now print cards without having to select a competition.
- Fix: live_CreateCard takes the additionalCompetitionLines parameter but it did nothing with the value.  I now need this to work since the new preprint can print non-competition cards also.
- Mod: Org: Display Category of tournament player on the tournament registration list / player list / authorise payment list
- Reintegrated PreprintV2 from branch.
- Fix: Javascript errors appearing in SCA - found while implementing PreprintV2.
- Mod: ClubCMS: responsive menu - added dropdown - for PGA and other sites
- Mod: API: Support the ability for the user to pick "pay with another card".
- Mod: ClubCMS: responsive menu - added dropdown - for PGA and other sites
- Mod: ClubCMS: responsive menu - added dropdown - for PGA and other sites
- Mod: ClubCMS: PGA - tournament list - just added a note to indicate the hidden tournament
- Fix: #5423 When dealing with 9 hole scores the other 9 was not properly zeroed, instead set to 9999 - this stuffed up the results for 9 hole competitions.
- Fix: #135441 Group booking updates had error when set to fixed fee as it was referencing the txline only if fee was attached. Left joins required. Also fixed another cart issue found when switching between Complimentary and fee.
- Fix: Vend: When printing a non-affiliated card the customer vend loyalty balance is null, which stopped the Print Card button from appearing.
- Mod: API: Return null for the booking fee if there is no green fee for the booking.
- Mod: API: Return null for the booking fee if there is no green fee for the booking.
- Fix: #5776 Corrected invalid cast error - didn't account for the fact that TicketIds could be null at this level.  Player got an error when they tried to book into a slot where there are already 3 other players booked.
- Fix: POS green fee names in scorecard detail needed an ellipsis when longer than 4 lines vertical. This is a nice css solution but is only compatible with Chrome - which is a prerequisite so it ok.
- Mod: POS vend. Scorecard detail now defaults to restricted green fee list displayed, and a Show All button loads all green fees.
- Mod: POS Vend - reduced size of fee boxes so 4 fit in a row when scrollbars are visible - enabled text wrap for green fees only, added title for mouse over text - all green fees are now shown in scorecard detail for selection
- Mod: LoveGolf - home banner
- Mod: Fix: Love Golf - search - set 25km as default and correct its value (it used to be 50)
- Mod: API: Attempt using a service reference instead of a web reference - maybe SGEN is happy with that?
- Try to remove DPS webservice reference to see if that fixes my SGEN problem.
- Add: API: Missing files.
- Add: API: Ability to process payments via DPS for green fee bookings.
- Fix: POS vend. - increased show 0 fee scorecard threshold from 5 to 10 minutes as requested by Matt. - The condition for displaying old scorecards with 0 fees was broken due to a mapping mismatch between the Competition.Fee object from server, and the CompetitionSelectControl Competition.fee. So the initial scorecard load was showing 0 fee scorecards when shouldn't have (as Fee was 0, but fee was undefined), and then when they were selected, they met the condition as Compselect control set the "fee" property to 0, and the scorecard was no longer displayed. Dirty hack to get fee or Fee() patched the issue. DB and DFH agreed on hack :) - Get active scorecards on initial load was returning null competition fee for the competition entries for the scorecard that didn't have a fee (no tx line). Fixed by isnull so 0 is in initial value, not null.
- Add: Automatically capture HP Officejet X555 consumable status information and send it up to our central database for reporting (and possibly automatic consumable ordering in the future).
- Fix: #134992 Competition results for eclectic results had an error as dataset did not contain handicaptext column
- Add: This script: - Inserts a new PWControl "Popup", and adds this to the existing MyGolf Default page - Inserts settings ("PopupImageUrl" and "PopupNavigateUrl") for this new control
- Mod: #5533: MyGolf Holden Popup - move the control under Admin/CMSControls. Allow the PopupImageUrl and PopupNavigateUrl properties to be set through PWPageControlSetting
- Fix: POS Vend when a sale is voided in Vend, Vend webhooks are notifying Live and the scorecard for the sale is deleted. The issue is when Live initiates voiding a sale we do not want the scorecard deleted, but the Vend webhooks send a notification back to live. To fix this now when vend sends the void notification, we check if the scorecard is paid, and if so, the scorecard is deleted. But if not paid we know live initiated the void, so do not delete the scorecard.
- Mod: With the introduction of best 5 of 10 etc. for 9 hole members, the position of the orange line needed to be changed in the score listing page.
- Mod: Cleaned up rev 23875 by using the common data library instead of inline SQL.
- Mod: #5533: MyGolf Holden Popup - expire cookie after 30 days, only show popup if member hasn't signed up yet to Holden
- Mod: With the introduction of best 5 of 10 etc. for 9 hole members, the graph needed to be updated in the MyGolf dashboard.
- Mod: With the introduction of best 5 of 10 etc. for 9 hole members, the position of the green line needed to be changed in the score listing page.
- Fix: API: calculate-fees needs the ExistingEntries collection passed in so we can calculate members guest green fees.
- Mod: Vend: When you re-do a sale from our POS the cash/payment lines are duplicated in Vend.  I've found out that you can post negative payment lines into Vend to reverse these lines, so we now reverse all payments in Vend before we post new ones.  This gets the sale balance back to $0.00 and makes the reports marry up.
- Mod: MyGolf Holden image link popup
- Fix: Vend: When you print a green fee card, close the sale in the POS, and then reprint the card in SCA, the card goes back to unpaid status, which stuff up the POS when you head back there.
- Fix: Vend: When scorecards are in competitions (but have no money owing), the POS would keep showing them even after 5 minutes.
- Fix: When calculating fees for a guest (no passportId) the calculate-fees endpoint crashes due to a null PassportId.Value call. Mod: Booking Fee is now loaded from the database (Settings table) instead of being hardcoded.
- Fix: Vend: Hide scorecards with have no payment due, 5 minutes after printed.
- Fix: Vend: Crashbug when loading POS.  Although invisible to the user, this contributed to the quick keys not loading up properly. Fix: Vend: With many quick keys, the quantity select bubble wasn't scrolling along with the container due to an absolute positioning set on the button. Fix: Vend: When syncing products while you have an inactive quick key group (i.e. not shown on the pos), products in that group would be ignored in some cases and not shown on the POS.
- Fix: Vend: Removed "DotGolf Register" hardcoded register name.  I've also changed the Settings page so we can select a register with a combo box instead of having to hack the settings in the database.
- Fix: Kiosk: Remove 5 second delay when there is a kiosk card printed that has a non-zero amount due.  This slowed down the pace quite severely causing the next person in the queue to wait for the "Printing Card" prompt to go away before they could do anything.  Found at Warkworth while observing golfers using the kiosk to get cards out.
- Fix: POG Group booking edit. - Cart fee dropdown list had cases where it would load the list multiple times. DDL items now cleared before loading. - Saved green fee for pay per player was not being selected, so always first item was selected upon load. Load was getting GREENFEE and not GROUPFEE. - Changing cart fee from a fee to complimentary was not saving. TXL line for the cart fee needed to be deleted. The txl updates needed to distinguish between GROUPFEE and CARTFEE as well.
- Mod: PGA (ClubCMS) - member earning / tax statement report
- Mod: PGA-related - only apply the default $200 prize money (for those who made the cut) in a Charles Tour event.
- Fix: SSO GOTG - added ds in the querystring
- Mod: Vend: Speed up products download by doing paged calls in parallel.
- Add: #5746 Competition Select control now disposes of itself when its KO binding is disposed.  This means no more dying competition selectors corrupting data that they were bound to earlier - in this case it was an auto-entry competition being selected for a completely wrong player as that was the player that was loaded at the time (not when the control loaded up).
- Mod: Missing fields on the NZ1 production database. Do not need to run again, I have run manually.
- Fix: #5739 POS 9 hole scorecards were showing 18 hole fees, and 9 hole competitions were disabled. Found a 9 hole flag needing setting for the competition and green fee select controls.
- Mod: Refactored to move the token billing card check method into the Shared library so I can use it from the API.
- API: Add: Ability to filter by player type that can book into a slot (search-slots endpoint).
- API: Add: search-slots: Ability to return only a portion of the available slots; ability to filter by number of available players, 9H/18H or specials only.
- API: Mod: Return TimeSlotEntryId from SearchSlots.
- Mod: Return TimeSlotEntryId from wa_TBSearchSlots for API.
- Fix: wa_TBGetMemberFriendsEligibility did not return any friends if you're searching a tee time TODAY; only future dates.
- API fixes for areas we talked about during today's app meeting. - Remove multiple times being returned for the same day e.g. 3 Friday times at 7:42, 7:48, 7:54 - Order by date - Tee Sheet on the 9th, 8:06 shows Members Only – when it is a Womens Only slot - Do not return closed tee times
- Fix: Put correct Vend API key/secrets in.
- Mod: Changed build date to $WCDATE$.
- Fix: Bulk Email ds parameter not passed to SSO.
- Fix: #134436 POG group booking, setting cart fee to Complimentary was throwing error, as json was being set as the cart fee, just all the values were empty. Now when complimentary is selected, the cart fee is set to be empty string and no json structured fields. Server side then interprets this correctly and doesn't see it as a fee.
- Mod: Got rid of $$SVN_REVISION$$ and moved to $WCREV$ so that we can preprocess files instead of using the LocalisationFilter.
- Mod: Got rid of $$SVN_REVISION$$ and moved to $WCREV$ so that we can preprocess files instead of using the LocalisationFilter.
- Mod: Got rid of $$SVN_REVISION$$ and moved to $WCREV$ so that we can preprocess files instead of using the LocalisationFilter.
- Fix: #5690 POS Voiding a scorecard had payment details included in the payload, which was appended to the sale payments, which resulted in a duplicated payment record and a balance not 0. So removed the payment section being sent with the Void to vend, and now the balance is 0 and no duplicate payment line.
- Mod: Applied handicapping 9 hole change from Matt.  This query retrieves scores for social members as well, so I could not easily merge it into the Member.GetScoreListing() method.  Opted to just apply the mod to this code.
- Mod: Removed unused MyNewsFeed.ascx control to get rid of copied/pasted code.
- Fix: Missed a few localisation strings.
- Ignored some stuff.
- Mod: #5631 Updated the DotGolf logo for Casual Golf Admin.
- Fix: Grrr, undo of the mistake commit with 23809
- Fix: #5690 POS Voiding a scorecard had been changed to "Return" in rev 21375, but we do not know why and the Return state of the sale was not working, causing an error in vend, and the POS still had the scorecard as processed. So changed it back to Void the sale and works as we would expect it.
- Fix: #5689 POS process sale for a non affiliate was not flagged as non affiliate and therefore getting error for the green fee.
- Mod: PGA related - PrizesExportLog create table script
- Add: This script inserts Get on the Green role into Role table
- Mod: Added Gotg UserSecurityRole
- Mod: Org: Show "Get on the Green" menu item if the user has permission to the GOTG Role (UserSecurityRole)
- Mod: Added AssetGroup.Gotg (Get on the Green)
- Fix: Some messed up namespaces in the API project.
- API: Add: calculate-fees endpoint.
- Mod: Oops - missed the case statement on the handicapping change for best 10/20 as was introduced at 1 July.
- Mod: Fix for the handicapping changes for 9 hole members best 5 of 10. This was introduced at 1 July. Handicaps were not recalculated, only when they enter their next score, so we needed to check the RolloverDateId to know whether to look at the last 5 or 10 scores for how their handicap was calculated in the past Committing and holding my breath as I did not test on local.
- Add: Automated tests for the new 9 hole handicapping top 5 of 10 changes.
- Mod: SSO: Multi-identity support for SSO.  This basically means there are now separate cookies for AU vs NZ and Live vs Org.  It means we don't have cross contamination anymore when bouncing between org and live, and because the SSO site will be shared between NZ and other countries we also won't have those users messing with each other.
- Mod: SSO: Added c and ds to logout url to prepare for multiple identities in SSO.
- Mod: SSO: Added c and ds to logout url to prepare for multiple identities in SSO.
- Mod: SSO: Added c and ds to logout url to prepare for multiple identities in SSO.
- Mod: SSO: Added ds parameter to support datascope stuff being added to SSO.
- Fix: Updated a comment.
- Mod: Ready for go live tomorrow.
- Mod: Added DataSource support so we can use the same SSO application instance to login to any database/country.  This is a stepping stone towards getting rid of sso-au.golf.co.nz which is currently used by both Micropower and Pennant.  The idea is to move Pennant over to sso.golf.co.nz too.
- Mod: SSO: Added ds parameter to support datascope stuff being added to SSO.
- Mod: SSO: Added ds parameter to support datascope stuff being added to SSO.
- Fix: #134178 API Search club day was not filtering by club if Clubid was passed with a value.
- [Relatively major] Mod: Removed LocalisationFilter since we don't need it anymore - and we should be doing localisation in a compiled way anyway rather than hacking up the HTML as it goes out.
- Mod: Refactored LocalisationFilter to make the Translate method available to stuff.
- Mod: Different Themes have different designs (e.g. full width, menu left-content right) - therefore we have had to change the widths for these article layouts. To avoid scaling a smaller image to 50% and distorting the image, we have fixed it at 180, and we have made the 100% width image a max width of 600 (which is the max width of an email Theme)
- Mod: There was a problem when sorting first by contests points, then by total won (when it should be total points sorting after contest points)
- Mod: There was a problem when sorting first by contests points, then by total won (when it should be total points sorting after contest points)
- Fix: #5704: I recently added @AssociationId to oom_GetStandings. And oom_GetStandings is being called in AmateurPlayers.aspx.cs (Play Profiles) and the parameters didn't have parameter names. I just moved the AssociationId parameter--I should always add new SP parameters at the end...
- Fix: #133887 Split 6 competition result compute ordinal failed on 2nd result set (best 2 scores).
- FixFix: #124215 Timesheet syncing with TTM had issues with multiple courses. This fix is for the courseid for the end of day buffer interval, and matching the interval end time to next interval start time.
- Mod: Not to be run until July 1
- Fix: Moved some classes into DotGolf.TeebookingLegacy namespace to avoid conflicts with the new classes in DotGolf.Shared.
- Mod: Changed DotGolf.Shared.Teebooking to DotGolf.Teebooking.
- Mod: Changed from DotGolf.Shared.Teebooking to DotGolf.Teebooking to avoid namespace conflicts.  Public will break because of this; will commit a fix shortly.
- Fix: Shared class was conflicting with new DotGolf.Shared.Teebooking namespace.
- MAJOR Reintegrated BookingXML mod.
- Add: PGA CW files - for dev / testing purposes
- Mod: PGA (org): show only PGA event categories if PGA competition
- Vend: Mod: Tidied up some code.
- Vend: #5687 Removed closed sales from the cards list so that the user can't send them through to Vend again.
- Vend: Fix: #5688 Parked sale is no longer sent with payment info attached. Mod: #5687 Also added some code to stop sending payment information with re-sent sales.  This clears out all payment info which isn't quite what we want yet - intend hiding scorecards from the POS once they have been sent to Vend (not parked).
- Add: PGA OOM standings query
- Mod: PGA-related script - added PGA Earning ClubCMS control
- Add: PGA (ClubCMS) - earnings control (tax statement)
- Mod: Removed query type radiolist and replaced with subject line - we're getting too many "support.golf.co.nz - Broken" subject lines in Freshdesk.
- Add: PGA (org): prizes export to ABA file
- Mod: Change for NZG handicapping - 9 hole members get the best 5 of 10 - T Scores only considered for the last 6 months now (not 1 year) NOTE: wa_ProcessCombinedScores also has reference to the best 10 of 20, but that is when looking for an orphan 9 hole score to combine with the new one. I have not bothered to change this because 9 hole members should have 99% of their scores combined anyway, or at least have 1 combined score in their last 10. So hopefully this will not be an issue.
- Mod: RSResultPrizeMoney create table script - added PositionIncremental
- Mod: golf.co.nz: added Nomads logo to the scrolling logos at the footer
- Mod: Small refactor to split Tee booking classes into separate files so that I can re-use the green fee calculation logic for the API project.
- Fix: #133165 Print blank cards was not printing matchplay index details.
- Fix: #132130 API member updates to Golflink were not having DateOfBirth passed through. This caused issues where first name could not be updated as DOB did not match.
- API: Mod: Changed club-address-distance response structure. Fix: Proper cased names coming back from search calls. Mod: Don't allow searches on blank strings. Fix: Crashbug when too many results in the search.
- Fix: Statement - added cn.NonAffiliateId in the condition cn.MemberId = @MemberId or cn.NonAffiliateId = @MemberId
- Fix: GetMoneyOwedByMember - added cn.NonAffiliateId in the condition cn.MemberId = @MemberId or cn.NonAffiliateId = @MemberId
- Fix: Fix for Revision 23638 - which didn't sum the CNI amounts before comparing to CN Amount. Hence causing duplicate CN lines in the Member Statement for Credit Notes that are allocated multiple times for the same member. e.g. CN 30001694
- Fix: Fix for Revision 23680 - which didn't sum the CNI amounts before comparing to CN Amount. Hence causing amounts to be considered twice e.g. CN 30001694
- Fix: Fix for Revision 23638 - which didn't sum the CNI amounts before comparing to CN Amount. Hence causing duplicate CN lines in the Member Statement for Credit Notes that are allocated multiple times for the same member. e.g. CN 30001694
- Mod: PGA (org): save raw position as well
- Mod: PGA (ClubCMS): OOM controls updates
- Mod: ClubCMS: just added a checking if class "menu-on-scroll" is present before going to the on scroll script
- Mod: Bulk Email: added missing semi-colon
- Fix: #133043 POG had error if a member had a Golflink "Suspended" handicap, as the text was being parsed as a handicap.
- Fix: GetMoneyOwedByMember: added ClubId in the condition when querying Receipt and CreditNoteInvoice
- Fix: The next day opens at date was being interpreted as NZST instead of the club timezone.
- API: Add: club-address-distance endpoint for mobile app.
- Mod: Added some logic to find out when the member joined their current live club.
- API: Fix: list-valid-booking-dates was using kiosk date ranges rather than website.
- Mod: ScoreHD report timeout reset to defaults as it was 6 minutes and that was causing locks system wide (in the case that it gets a bad plan).
- Mod: Results: When the countback value is calculated and is out of range of a long, clip it to long.MinValue and long.MaxValue to avoid exceptions.  This may cause loss of accuracy of the countback algorithm, but the probability of this causing an issue on the leaderboard is next to nothing, and it's much better saving this and troubleshooting a potential countback issue than it is to throw an exception and stopping the user from entering the score completely.
- Mod: PGA (org): applied master page to the prizes file export page
- API: Mod: Added PlayersAvailable field (which counts every available entry on the timesheet) for Aus.
- Mod: PGA (org): added "Back to Tournament Dashboard" link; and display "changes saved successfully" message after save
- Mod: Return the number of booking entries from wa_TBSearchByClubDay - this is for Aus, they want the number of actual free entries rather than the number of slots with times available.
- Mod: Return the NextDayOpensAtUTC value from the list-valid-booking-dates for Aus.
- Mod: PGA (org) - added styles
- Mod: PGA - add PrizesFileExport page (still empty)
- Mod: golf.co.nz - removed Lightbox Sport from the scrolling partners at the bottom
- Fix: #5656: GetMoneyOwedByMember - updated member balance (displayed on the Account tab itself) query to have the same logic as the other queries (e.g. statement): (total invoice - receipts - credit note invoices - unallocated credit note but assigned to member - balance of credit note partially allocated)
- Fix: #5656: Member Statement - include the balance of Credit Notes that are partially allocated: total credit note amount minus the partial allocated amount
- Fix: Bad schema script.
- Add: FriendlySlotAlias property for the mobile app to display instead of SlotAlias.
- Mod: Removed DGE previous gen code.
- Mod: search-slots endpoint is now able to filter by slots where friends are booked.
- Fix: #5647: Assign an "auto" width and height to div.module on "drop" event. A Chrome update (v51) caused the div.module to have an explicit height and width after dropping.
- API: Fix: Quick fix to remove C#6.0 "using static" as build server doesn't have current compiler.  Will have to fix this up next week.
- API: Add: list-future-and-suggested-dates endpoint.
- Mod: Oops - saved with the wrong name.
- Mod: Update gif file on the home page of golf.co.nz
- Mod: Email viewer - override module class width (to "auto")
- Mod: Email viewer - override module class height (to "auto")
- API: Added missing XML documentation.
- API: Add: list-future-dates endpoint to list all dates and status information for each day.
- Fix: #5645: Fix the balances for the non-affiliates; updated the invoice and receipt query conditions to consider NonAffiliateId too.
- Fix: API AddOrUpdateWaitlisting was missing passing the courseid parameter to WaitListHelper.CheckEligibility
- Mod: PGA-related: added js to add comma in the totol prize money; only allow numbers and "." in the prize text field
- Mod: RSResultPrizeMoney table - added 3 more columns: Position, TotalScore, NumberOfRounds
- Mod: PGA-related - rename table header column; handle adjustment of position percentage dt when there are amateurs in the rankings
- Fix: Resize bulk email images on the fly (SPAM2) by resizing and saving a resized copy to S3.  This is then loaded up by the email instead of the full res images.
- Mod: PGA-related - disable prize field for those who missed the cut
- Mod: PGA-related - save Total Score and Number of Rounds also to RSResultPrizeMoney table
- Mod: #5579: Removed BMW logo from the scrolling partners at the bottom
- Mod: PGA (org) - save position to RSResultsPrizeMoney; formatting and naming updates
- Mod: PGA-related - hide "Is joint competition with PGA?" if the user's association is not NZG
- Fix: Okay, so my last fix didn't work either because the font was still Times New Roman.  This fix seems to sort that out.
- Fix: Stuffed up the SPAM2 CuteEditor with the extra call to SetupCuteEditor() - didn't realise that was also loading up template text.
- Mod: PGA-related - Prizes section - updated the links
- Mod: PGA-related change - added OOM Event Category Name in the OOM Tournament List
- Fix: #124215 Group booking sync with TTM was creating a reservation on the wrong course in TTM for multi course clubs
- Mod: PGA (org) - assign $200 to those included in the cut but outside the top rankings (based on OOMPoints).
- Fix: #5618 CuteEditor setup was lost on postback when selecting a different template.  This led to errors about permissions on the upload folder, and also image and PDF buttons were left on the toolbar where they shouldn't have been.
- Fix: #5639 Don't send a payment to Vend if you park a sale.  Sending a payment stops Vend from continuing the sale easily.
- Mod: PGA (org) - updated display of prize money
- Mod: PGA (org) - handle ties, additional column IsProfessional
- Fix: Found other occurrences of the @TicketId implicit conversion and resulting limited index use problem.
- Fix: Added a date constraint onto the TBApplyLog table WHERE clause to speed up this query, as it is being run every minute by a job.
- Fix: #5386 Players who were deleted from Eclectic competitions were still appearing in the results (because we were not checking RSCompetitionRoundSegmentEntry.DeletedDate).
- Fix: #5386 Players who were deleted from Eclectic competitions were still appearing in the results (because we were not checking RSCompetitionRoundSegmentEntry.DeletedDate).
- Mod: PGA (ClubCMS) - display prize on leaderboard control
- Mod: PGA (ClubCMS) - OOM Detail - added link to the competition results page (leaderboard)
- Mod: PGA (ClubCMS) - display prize on leaderboard control
- Mod: PGA - total prize display
- Mod: PGA - prize saving
- Add: CWControl - inserts of PGA-related controls
- Add: PGA-related scripts - Create new table RSResultPrizeMoney - Alter table: Competition to add PrizePool and EventCategoryId - Alter table: OOMPoints to add Percentage
- Mod/Add: PGA - added Prizes widget on the Tournament overview page (make this available for PGA only for now); added Prizes page (work in progress)
- Fix: There was an unintended time component in the ToDate, which meant that nothing matched when joining to dim_Date, which in turn meant that the agg_Score_Count and agg_ScoreCard_Date aggregates were not ever recalculated.
- Mod: PGA (ClubCMS) - updated the date condition when querying PGA tournaments
- Add: #5559: Ability for user to force specific markers from the Preprint area for competitions with more than 1 marker.  This is especially useful for F9/B9 competitions.
- Fix: When you have privacy mode 2 turned on, you can't see your name on your own competition results.  I have modified this so that you can see your own name, but no-one else can see your name.
- Fix: #5621: If you have advanced prizes set to "For Each Division" but your competition has no divisions, no prizes would be generated. Fix: In the new prize code if you select "Stableford" that literally means individual stableford, so it was impossible to generate 4BBB Stableford prizes in Advanced mode.  This now has some logic to help in this situation and automatically switch to the 4BBB Stableford results for prizes.
- Mod: PGA - updated "TournamentAssociation" to "CompetitionAssociation"
- Mod: PGA - changes based on specs
- Mod: GOTG - removed hard coded appended "golf club"
- Mod: PGA - changes based on specs
- Mod: PGA - changes based on specs - Added PrizePool and EventCategoryId to Competition
- Mod: GOTG favicon
- Mod: GOTG - handle $0 offers
- Mod: Members Renewed Report – we should change the first column to be “Processed On”, not “Renewed On” – confusing. Came out of meeting with Hugh (Warkworth) and Vend.
- Mod: GOTG - use whole tile width if there's no price.
- Mod: Handle $0 deals (for promotional / informational deals)
- Mod: Product Create / Edit - handle other product categories
- Fix: Index - return empty string for MerchantBankAccount when user is DotGolf
- Fix: AddNavigationItem - NavigationGroup parameter
- Mod: GOTG Admin Site - allow entering of Bank Account Number when creating / editing the Merchant Details
- Fix: Changed Response.Redirect() calls to avoid ending the response (as this usually causes a ThreadAbortedException which clutters the exception log.  The try..catch lines were also removed as the exception was being thrown on a different thread anyway, so they were ineffective.
- Fix: Fixed a typo error: "save save" to "save"
- Mod: wa_TBSearchByClubDay performance tweaks: * Added #holiday temp table to precalculate holidays for all clubs. * Changed holiday left join to subselect as it is only used once.
- Mod: wa_TBSearchByClubDay performance tweaks: * Added columns to the #Clubs temp table to avoid joins in the high cardinality queries. * Do CREATE instead of SELECT..INTO for temp tables to avoid locking. * Convert LEFT JOIN to subselect for first tee time. * Poor man's partitioning for TBTimeSlot using @MinTimeSlotId
- Add: Included DeletedDate in IX_ClubFeeGroupClub_ClubId index for key lookup performance.
- API: Add new search-friends-and-members endpoint which, given a text string, will search members and friends of the current user.  Eligibility information is computed for friends but not members (too much data - will have performance implications - may have to revisit this).
- Add: NZGA_Handicap returned from wa_TBGetMemberFriendsEligibility so that we can return it via the API for friend searching.
- Fix: Optimised a query that is used for ClubCMS bulk emailing - got rid of the aggregate and using subselects instead to count attachments and recipients.
- Fix: Performance issue with an implicit conversion causing an index scan on a busy table.  This mod changes it to an index seek.
- Fix: Performance issue with an implicit conversion causing an index scan on a busy table.  This mod changes it to an index seek.
- Fix: Performance issue with an implicit conversion causing an index scan on a busy table.  This mod changes it to an index seek.
- Fix: Because of the ISNULL() checks this query was scanning TBTicket instead of seeking.  Removed the ISNULLs as they would have had no effect on the logic anyway since Column = @Variable is false when one or both are null.
- Fix: Performance issue with an implicit conversion causing an index scan on a busy table.  This mod changes it to an index seek.
- Fix: Performance issue with an implicit conversion causing an index scan on a busy table.  This mod changes it to an index seek.
- Fix: Minor handle leak in golf.co.nz.
- Fix: Oopsie, stuffed up the list by returning the club name instead of competition names...
- Fix: Performance issue in the ClubDetail and ClubNewsAndResults pages for golf.co.nz.
- Add: Indexes for performance.
- Add: Index for performance.
- Fix: #5586 Bug introduced while checking for VEND product - didn't pass @ClubId into the query.
- Fix: #128351 ClubCMS Waitlist elligibility check needed to account for CourseId. Further update to fix another check and the Kiosk check.
- Fix: #5576: Forgot Password Reset URL - changed & to ?
- Mod: OnPar - allow html tags to be saved in the promotion description field
- Mod: Removed this index change as I've gotten around it another way.
- Fix: Analytics menu bar didn't link back to Org properly for NZGolf.
- Mod: ClubCMS calendar control competition list query is now much faster.  I don't filter out withdrawn or disqualified competitions anymore; this is a tradeoff for the much better performance.  Hopefully people don't get too upset about WD or DQ comps being listed.
- Add: RSResult index - included IsWithdrawn + IsDisqualified for performance.
- Fix: #128351 ClubCMS Waitlist elligibility check needed to account for CourseId.
- Fix: #5557 ORNS error when loading up some prize templates.  Allowed nulls on 2 fields sorted this out.
- Pennants: Fix: #5553 When changing the match score to a new value, the correct value gets saved to the database but the UI resets to -- Select --.
- Mod: PGA (ClubCMS) - draw / tee times
- Mod: PGA (ClubCMS) - display Competition Name
- Mod: PGA (ClubCMS) - modified control to accommodate PGA tournaments
- API: Add: logout endpoint to invalidate the user's JWT permanently.  I've also added a new table as part of this (see rev 23482).
- Add: SSOTokenBlacklist table for API JWT invalidating by calling /logout.
- Mod: PGA (ClubCMS) controls - tournament list and details
- Mod: PGA (Club CMS) - modify the PlayerList control to accommodate PGA tournaments
- Mod: PGA - added MemberDetail control
- Testing subversion hook.
- Fix: #5572 AWAITING_PUBLISH Updated Phil's email address as requested.
- API: Fix: renew-token endpoint wasn't working as the token verification code was expecting a valid token (not expired).  I got around this by encoding and signing a copy of the payload and then comparing the signatures; if they are the same then we are looking at a valid token, just expired.
- Mod: PGA (ClubCMS) - number of holes
- Mod: PGA (ClubCMS) - remove /refresh message prompt
- Mod: PGA (ClubCMS) Tournament List - include hybrid competitions (e.g. Jennian)
- Subs: #5552 Add: Credit note payments (cash refunds) are now imported from Xero and kept up to date in our system.  Any cash refunds are also shown on member statements, and included in the member balance calculation.
- Mod: golf.co.nz - OOM - filter the Tournament dropdown to include NZG tournaments only
- Mod: PGA - update the OOMTournament End Date with the last round's date.
- Mod: PGA - OOM Member Detail - added photo
- Mod: PGA ClubCMS controls - added PGA Member Detail control - this displays the selected Member's details - updated OOM control - to add the link to the member details
- Warehouse: Fix: When ending a previous record (for a slowly changing dimension), the EndDateId was updated to the same date as the new record's StartDateId, which means that duplicate joins happen when the dimension is subsequently queried (on the edge date).
- Mod: PGA related changes - Disable the form if it's automatically created so that it could only be edited via the Tournament tab. - An OOMTournament record is automatically created if the OOM was checked in Tournament > Competition Setup > CompetitionTab_Basic.ascx - We know that this is an auto-created OOMTournament record if it is linked to a competition (Competition ID is not null)
- Mod: oom_GetStandings - added Association ID to accommodate PGA OOM tournaments. Default AssociationId value is 1000 (NZG).
- Mod: oom_GetTournaments modify default AssociationId value (to NZG Association ID)
- Mod: PGA OOM - added the AssociationId parameter in the oom_GetTournaments stored procedure
- Mod: PGA - OOM related modifications - in the Competition setup, allow user to tick all the applicable OOM scoring (e.g. PGA OOM, NZG OOM) - some auto-formatting done on the code as well
- Fix: #5556: If you clicked onto the next player in the POG while it is still loading fee info for the active player, the green fee is set to whatever the first non-affiliate rate is, even for members.
- Mod: PGA website (ClubCMS) - added OOM-related controls and images; altered oom_GetStandings stored procedure to add an AssociationId parameter
- Mod: Exception logging improved to log the full exception chain by recursing into .InnerException.  Also modified ClubCMS Global.asax to remove the GetBaseException() call as that hides the true source of the exceptions for SQL timeouts.  Hopefully this will help us troubleshoot MSC#129152.
- Fix: Pass the transaction to VoidReceiptsInXero
- Fix: Rollback - removed unnecessary conn
- Mod: Show rollback link up to 30 hours after the export was done. (It used to be 24 hours.)
- Fix: Rollback DD export - fixed the code last committed, which wraps the rollback in one transaction
- Fix: Rollback DD export - fixed the code last committed, which wraps the rollback in one transaction
- Fix: Rollback DD export - fixed the code last committed, which wraps the rollback in one transaction
- Fix: #5511: Member Balances Report query - updated the query for table #c, where we are getting the unallocated credit note amount for the member. Previously, I didn't consider that the credit note could be split among different members.
- Add: Logging code to try and pinpoint a golflink visitor search timeout that is happening in ClubCMS.
- Vend: Fix: Found more places where a single club was being assumed.  Modified to use the selected club from /MyAccount.aspx instead. Mod: Added the loyalty price (dollar value) to the "select loyalty product" area on TopupLoyalty.aspx.
- Vend: Fix: #5537 My Account page did not support the case where you are a member of multiple clubs with SUBS enabled.  I've added a combo box that allows you to select which club's statement to view, and a note to warn the member about clubs that are not using the DotGolf Subs system.
- Fix: Alter oom_GetTournamentYears to add sorting of the result (year values in org > oom/default.aspx > Year dropdown). Just found this little issue while doing some PGA stuff.
- Vend: Fix: #5537: SETUP LOYALTY section was incorrectly hidden when LTY product was enabled.
- Vend: Fix: #5537 Hide "Micropower Financials" area in Settings when LTY product is enabled.
- API: Add: /renew-token endpoint added so that expired JWTs can be safely renewed without passing the user's credentials over the internet again.
- Fix: #124215 Timesheet syncing with TTM had issues with multiple courses. This fixes the issue where the 2nd course was not getting the 12am-first slot time and last slot time-12am Tee Off Intervals created in TTM (they are required otherwise TTM breaks).
- Fix: Updated casting of Score from "int" to "Int16". Just a bug we found while testing PGA OOM in dev.
- API: Add: endpoint to return bookings, suggested bookings and suggested autobookings to the mobile app.  You can get bookings, suggested bookings or auto bookings on their own also (there is an endpoint that returns all 3, or you could call the individual endpoints to get them on their own).  Full Swagger docs are available for these new methods.
- Fix: #5534 The Marker Select control had a problem where the default marker for ladies would not be selected after a gender change from men to women.
- Fix: Org: Competition Score Entry - handle null Country Code so that the player's name will still be displayed.
- Fix: golf.co.nz: During member registration, after typing in the Member Number and Surname, and there is no passport record found, display the message: "We couldn't find your record. Please contact your club."
- Vend: #5529 Mod: Allow the user to click on the little quantity bubble even though the product is not in their sale - clicking on this is the same as clicking on the tile and then setting the quantity to 1.
- Fix: #5529 If you reprint a card, the TXLines are created AFTER the SignalR reprint message is sent - which means that any UI listening to that will most likely render out a non-greenfee scorecard.  This is a race condition and may affect our production systems at present.  We found this while testing Vend but it may affect more than just the POS.
- Vend: #5529 Fix: Removed Bulk Card Admin subnav item as it does nothing anyway.
- Vend: #5529 Mod: Hide "Mark as Paid" button from bubble menu in POG, if the club has VEND.
- Mod: Member Balance Report - optimise query (done mostly by David)
- Mod: wa_ThirdPartyGenerateWinner alter sp - removed unnecessary condition (ninehole)
- Vend: Add: The POS now deals with competitions that exclude green fees - the green fee selector is hidden and the player is not charged a green fee (only a competition fee) when a competition with "Exclude Greenfee" is selected.
- Vend: Add: Ability to remove a product from the Summary control by clicking a Remove link next to each product.
- Vend: Fix: Race condition when you quickly select 2 or more scorecards; the Summary area on the right got loaded with multiple copies of the first player. Vend: Mod: Improved Summary display so it immediately gets the newly selected scorecard, but shows "LOADING" until the Vend loyalty balance etc. has been loaded up. Vend: Fix: When editing a scorecard (reprinting it) in the SCA it also got marked as paid even though you have VEND.
- Fix [MAJOR]: While working on Vend/POS I discovered a race condition in the Competition Select control due to the very simple caching mechanism used.  This code was not thread safe, so whenever you have multiple competition selects on the page (like the Booking Editor or the POS) you would run into seemingly random problems where a previous request would overwrite your current data.
- Vend: Fix: When deselecting a scorecard a javascript error appears.
- Vend: Mod: Send line notes to Vend to add scorecard number, green fee and competition fee notes onto the sale.
- Vend: Quick Keys are now working with both the old and the new API.  We don't know if Vend API 2.0 is production ready yet; hopefully this doesn't cause us an issue down the track.
- Add: Create new non-clustered index for CreditNoteInvoice table - on the InvoiceId and DeletedDate columns
- Vend: Fix: Removed "full screen" mode - it's a bit silly anyway, and I'm sure we can do it a better way when we detect that we're running on an iPad. Vend: Fix: Error when processing sale for more than a single card. Vend: Fix: More hacking to make the card sort order make sense. Vend: Mod: Give the user some feedback while we're doing a "remove and redo" or "delete card" - in the Scorecards area.
- Vend: Fix: CompetitionSelect control was not always bound to activeScorecard, so it didn't reload when you switch cards.
- Mod: Generate - join with ClubMemberInvoice instead of the Invoice table
- Vend: Mod: Refactored and removed the printed scorecards filtering as the rules were not working properly anyway - less confusing without the filter. Vend: Fix: Don't allow non-handicapped non-affiliates into competitions.
- Fix: Oops, left a console.error in there.
- Mod: Add a big fat script warning box that is attached to Javascript errors happening in dev.  Too often we don't notice javascript errors while testing because we forget to open F12 tools.  JS error break Knockout pages in subtle, strange ways, so we need to be more wary of JS errors.
- Vend: Fix: Non-affiliates without an entered handicap index should not be able to enter into competitions.
- Vend: Fix: Occasional "groups" reference error in javascript - usually when working with a club with no Vend quick keys. Vend: Fix: When you select a card you can't see the card number (CSS)
- Vend: Fix: Searching for cards did not work. Vend: Fix: Clearing the search box (using the built-in clear button) did not have any effect on the search.
- Vend: Fix: if you search on a blank barcode the POS would either error, or add "juice" onto the receipt (the first product returned from Vend) Vend: Mod: Refactored scorecard list so it operates from a computed with no filtering.
- Fix: #5511: Use CreditNote.DocumentDate in the condition instead of CreditNoteInvoice.DocumentDate
- Vend: Fix: Improved POS styling a little bit to rid us of the male/female/paid/unpaid confusion. Vend: Fix: Got rid of the null display text when printing a visitor card. Vend: Fix: If a scorecard is selected, keep it on the screen until the user is done with it.
- Mod: Holden - alter sp script - add set nocount on
- Add: Holden - wa_ThirdPartyNotifyWinner alter sp - send only basic details to non-golf.co.nz recipients
- Add: Holden - wa_ThirdPartyNotifyWinner alter sp - send only basic details to non-golf.co.nz recipients
- Mod: Holden - filter result (DeletedDate is null)
- Mod: Holden - Comp Winner control - add "Year" label / text
- Mod: Holden - CompWinner control - update UI, changed sorting of results
- Vend: Mod: show the number of cards currently in the list.
- Vend: Fix: scorecard list did not refresh properly on SignalR updates because of the incorrect way the sort() function was being used.  Refactored to use a computed and an extra array.
- Add: Show score count and a date range for non-affiliates to make it easier when in the process of merging a casual golfer and affiliated member record.
- Mod: Display Holden Hidden Hole winners by year
- Mod: Holden Hidden Hole script - update condition and order by clause to correct the generated winner - wa_ThirdPartyGenerateWinner
- Add: Holden Hidden Hole - stored procedures
- Add: Holden - ThirdPartyCompWinner add PlayDate column
- Mod: OnPar - go through the quill and other edit script only if in edit mode
- Fix: Analytics Removed year from display date for Club Rounds By Date report - this is already shown in the header so gets a bit confusing.
- Fix: Vend quick keys display had button overlapping text.
- Mod: OnPar - allow html tags to be saved in the Sponsor Description field
- Fix: Kiosk with Vend but without loyalty would not show a Print Card button for Nonaffiliates.
- Vend: Some small fixes; hide Loyalty section if club does not have LTY product.
- Vend: Fix: Don't show the TOP UP CLUB CREDITS button if the club does not have the LTY product.  Previously this only checked for VEND.
- Vend: Changed Synch to Sync
- Vend: Fix: Format string bug for the callback URL.
- Vend: Fix: Format string bug for the callback URL.
- Merged revision(s) 23298-23300 from Branches/Trunk.2016-04-27.preprint-v2: Fix: #5436 Fixed Scorecard Admin display bug.  When printing a new green fee card the green fee information does not appear until the user hovers the card. Unrelated to this the browser console sometimes complained about a nineHoleSelected property not existing - this has been fixed too. ........ Vend: Fix: Automatically redirect off to Vend to do app authentication if the club has not got a domain prefix set. ........
- Mod: golf.co.nz - partner logo updates
- Mod: PGA - allow only PGA members to register to PGA competitions
- Mod: Password no longer a valid field on passport.
- Mod: Added a duct tape script to create the CWPromotion table if it does not exist.  For some reason this table is not present in our NUnit test databases, which causes the tests to fail.
- Mod: #5490 Added 134052993 swipecard format for Te Awamutu.
- Mod: PGA - tournament registration control - moved up the required field indicator (*) for the DOB field
- Mod: PGA - tournament registration control - moved up the required field indicator (*) for the DOB field
- Mod: PGA - updated existing tournament registration (used by ASCGC) control to accommodate PGA tournament registrations
- Add: PGA - add tournament list control - lists down all the tournaments linked to the association
- Fix: #130113 Related (common issue identified when fixing for PairsSixHoleCalcResult) Pair special 6s competition results were not in the correct order. ScoreOrdinal needed a overloaded method to compute.
- Fix: #5488 and others - the POG corrupted and cross pollinated green fee changes between players on the same booking.  The following two scenarios are now fixed:
- Mod: Check to see if the member has a modified handicap when editing an old score (or adding an old score). We need to check the MemberFreeze table rather than looking at the projected column (which is always calculated with the true handicap).
- Fix: #130113 Pair special 6s competition results were not in the correct order. ScoreOrdinal needed a overloaded method to compute.
- Fix: Small performance issue corrected in wa_TBLoadBookingForEditing - it was scanning the clustered index instead of using the IX_Passport_MemberID and IX_Passport_NonAffiliateID indexes.  Doing 2 separate joins should make it use the indexes instead.
- Fix: #5450: In the SIC, if you select a marker, then change the play date to a date that falls outside the marker start/end dates, the marker would not be reloaded and the SIC will reflect the old marker values (alias, stroke, par and distances).  This is because the course-marker-select control was a bit overzealous when it came to considering markers as still matching (it was going by the MarkerId+Gender+NineHole instead of the NZCRDataId for an exact match).  I've now removed this condition so the marker will be reloaded if the NZCRDataId changes.
- Mod: #5370 I have gone to great lengths to try and reproduce this problem but have failed doing that.  My only remaining theory is that Xero reported an error while voiding the invoice, and we never check the ValidationErrors list that is returned from the API, instead only catching exceptions.  I've added some code that throws an exception explicitly when this situation occurs.  This exception will get logged and also our UnVoid code will trigger and do what it was designed to do.
- Mod: Trackerlog module now allows running code to append useful debug info to the URL as logged in the TrackerLog table.  I've added one of these for MemberQuickSearch as that seems to be where my last performance related issue pointed to.
- Mod: OnPar - remove top right sponsor name and description (not needed)
- Mod: OnPar - CWPromotion alter table
- Add: OnPar - update HoleImage.SponsorDescription to varchar(max)
- Mod: OnPar - update sorting of promotions. Use the new column CWPromotion.Priority
- Mod: OnPar - hide edit form on page load. Show this only when a hole is selected.
- Add: SQL scripts - add Priority column to CWPromotion table
- Mod: OnPar - add guide to the read more URL
- Mod: OnPar - updated description fields max length - from 400 to 2000
- Mod: OnPar - removed Top Right Sponsor title and description; add guide to the sponsor URLs
- Mod: OnPar - add Sponsor image dimensions guide
- Mod: OnPar - image dimensions update
- Mod: OnPar - image dimensions update
- API: Mod to let day-waitlistings accept a date parameter again, and filter the results by said parameter.  Previously it was accepting a date parameter but not filtering the results correctly.
- API: Fix: Removed date parameter from GetDayWaitlistings as it is unused.
- Mod: Performance increase including clubs that only LIVE TB clubs.
- Mod: Holden Hidden Hole - corrected a typo error
- Add: Holden - add new Third Party Export control Add: Script that inserts this new control to CWControl
- Mod: wa_ClubNameMatch - add ClubID in the result
- Fix: There was still a connection leak in Adweb; I was disposing the command and not the connection itself.
- Fix: #5458 Passport.Username/Password field were still being inserted from the Pennant system, even though these fields have been dropped recently.  I've removed these from the insert statement as the same statement is also inserting the PassportCredential rows as designed.
- Fix: Support: Since we deleted Jaime's FreshDesk account we also lost the API key and support.golf.co.nz access to create tickets.  Fixed this by generating and adding a new key for Sylinia.
- Fix: Identified and fixed connection leak in GetAutoCompleteList in the case of an exception while executing the query.
- Add: Ability to track connection leaks.  This needs to be enabled on a per-application basis by adding an appsetting into the Web.config file; ConnectionLeakWatcherEnabled = true.
- Fix: Possible connection leak in PerformanceTracker/Tracker.cs - if conn.Open throws an exception it may not get disposed properly.
- API Add: RegionId added to the request for the search-location endpoint.
- API Mod: Changed the search-location endpoint to encapsulate ClubId and Name in a class when sending the results to the client.  Normally we wouldn't do this as it's only 2 fields, but it seemed pointless arguing with Ruben about this.
- Mod: ClubNameMatchResponse - add missing ClubId
- Fix: Problem where a NULL TicketId would be returned from user-bookings when there was no player booked in position 1.
- Mod: API: Tester now supports AltMemberId/CentralClubCode JWT authentication.
- Add: App - scripts that create new SPs: wa_TBClubs and wa_ClubNameMatch
- Mod: API - add API for getting all the tee booking clubs and their coordinates. Also corrected the coordinates' data type in ClubNameMatchResponse
- Mod: API - add API for getting all the tee booking clubs and their coordinates. Also corrected the coordinates' data type in ClubNameMatchResponse
- Add: SQL script that inserts a new property for the mobile NewsRecentArticle control
- Mod: This is the 4th version of the BMW EDM that was sent out this week.
- Mod: Add brief description to new API
- Fix: Date format fix (e.g. instead of 16:02p.m, it should be 4:02p.m.)
- Add: ClubNameMatch API - search clubs by name (could be partial name)
- Mod: GetUserDetails - added IsHomeClub and IsCategoryNineHole for each club (where the user is a member of)
- Mod: GetUserDetails - added IsHomeClub and IsCategoryNineHole for each club (where the user is a member of)
- Add: Index for performance.
- Fix: API: Added XML docs for the SearchLocation endpoint.
- Add: API: search-location endpoint which allows you to search for clubs near you by specifying a location.  Clubs that are closer to the user are returned first in the list.  If location is not specified we just return the whole list.
- Add: API Tester: Added ability to generate a member JWT by entering their credentials.
- Fix: API: Return 401 on invalid credentials passed to credentials-token.
- Fix: API: Added unique responses to the authentication flow so that clients can tell different error modes apart.
- Fix: API: Updated day-waitlistings description.
- Fix: API: Updated day-waitlistings description.
- Mod: API: Added AltMemberId into the response for day-waitlistings.
- Add: API: Ability to get all waitlists for a club and a date.  This was a chargeable request from Micropower.
- Fix: #5383: Move Player pop-up window/dialog - adjusted the styles (button margin-left and the left and right panels' width) to fit them all in the pop-up dialog.
- Fix: #5184: Moved the "Cancel Booking" section to the right so that it could be seen even in smaller resolutions.
- Fix: Bulk card admin filters would show no cards
- Fix: #5398 Special prizes were saved correctly in processing, but not loading up properly when you reload the page.
- Fix: #5377 Due to the Knockout upgrade we had another race condition where players would not be assigned green fees when booked in via the POG.  It seems that the way the fee selector control was bound was being part of the problem, so I introduced a new Reset observable that forces the fee selector (and all other controls) to be removed from the DOM whenever the selected player changes.  This clears out all the bound properties so there is no cross contamination between the players anymore.
- Fix: #129713 Saving existing prize template reports was creating a new report each save, causing duplicates.
- Fix: Oops, POST wasn't functioning as intended.
- Fix: Reinstate automatic redirect between live and edge (for subs clubs using Xero - only Live has the proper Xero certs and redirects installed)
- Add: New images for the NZ Womens Open site
- Mod: golf.co.nz sponsor - updated Jetts logo
- Mod: On Par - update text (sponsor size guideline) - from "255px" to "225px"
- Mod: On Par - update sponsor width from 255 to 225px
- Fix: API: Changed credentials-token call from GET to POST to avoid cleartext username/password on the line.
- Fix: Null reference exception when trying to load up template editor for Harewood, probably due to the start tee configuration.  This patches the symptom; shouldn't affect anyone else.
- Add: Option to tell competition select to enable all competitions regardless of the rules.  This is to be used for PrePrintV2.
- Fix: Small error caused the hole information page to stop working.  Suspect this is part of the new Knockout update.
- Fix: Adweb bug stopped us from being able to update a nonaffiliate with a NULL DOB.
- Add: Holden - new control scripts
- Mod: Include exception details in HTTP error responses from API.
- Mod: #125790 Start sheet report was wrapping words in the names, but only a single line is displayed. This meant with longer name the first name could be hidden. Removed word wrap.
- Fix: Prize values did not show on the report - due to the fix I've done to show custom prize descriptions.
- Fix: Member Balance Report - to get the correct Credit Note amount, query CreditNoteInvoice table and join with Invoice table; use Invoice.MemberId and cni.Amount (not anymore cn.MemberId and cn.Amount)
- Fix: Member Balance Report - to get the correct Credit Note amount, join with CreditNoteInvoice table and Invoice table; use Invoice.MemberId and cni.Amount (not anymore cn.MemberId and cn.Amount)
- Fix: #5359: Clicking on a link for which you have no permissions results in an endless redirect.  The Login page has been modified to show the normal no-permissions message again.
- Fix: Redirect wasn't including nexturl properly, so if you had a bookmarked link you didn't get taken to it automatically if your session had expired.
- Fix: Courses tab should not be shown for clubs.
- Add: Compared prizes tables between dev and prod; added missing columns.
- Fix: Typo in Score/Entry url.
- Mod: Rename new column IsSponsor2 to IsSponsorTopRight (to make it descriptive like the other existing IsSponsor flags)
- Mod: HoleImage table - rename new column IsSponsor2 to IsSponsorTopRight (to make it descriptive like the other existing IsSponsor flags)
- Add: Add new column: HoleImage.IsSponsor2
- Mod: OnPar - Hole Detail control - create another image uploader for the top right sponsor image (so that the hole could have two different sponsor images)
- Fix: AssociationId was not being passed correctly.
- Fix: #128005, #127158. POG cancelling a player and replacing them with another player, was causing a waitlisted player to get pulled from the waitlist. But then not booked. The result is the waitlisted player is off the waitlist.
- Fix: Knobble Chrome autocomplete properly this time.
- Fix: Disable Chrome autocomplete as Phil has saved his password on a bunch of club computers!!
- Fix: NZGolf club id 900 was stuffing with my club/association detection.
- Fix: Link to Analytics needed a parameter to tell it that it's Org calling.
- Fix: Some strangeness when trying to get into Analytics from Org - it was asking for a club ID and if you use 900 (or saved login) you got really strange empty reports out. Fix: Logout link did not work.
- Fix: Missing script for RSPrizeTemplateSection table.
- Fix: #5347: Button subtext style (to move it 3px down from the main button text.
- Fix: Prizes styling - text alignment issues (applied an existing css class to the affected labels)
- Fix: Print Card (Non-Affiliate) - Contact Details link positioning. It was overlapping with the dropdown because of the margin-right style.
- Fix: Correct the number of messages shown. e.g. Previously, it says "last 4 messages" but it was only showing 3.
- Fix: POG: Race condition due to Knockout 2.3 upgrade; this caused the second onwards player booked in via the POG to not have their green fee properly assigned.
- Fix: live_ReadClubMessageBox - just moved the "order by" clause in the select statement to fix sorting (desc).
- Fix: Bubble menu still had issues; this was because of my previous fix.
- Mod: #98386 DotGolf help links and application name changed for Aus.
- Fix: SSO: Micropower logo wasn't appearing as it should.
- Mod: Update Prizes styling
- Mod: Holden site files - css, favicon, js
- Mod: Holden Hidden Hole - new control to display winners
- Mod: Holden Hidden Hole - new control to display winners
- Mod: Holden Hidden Hole - new control to display winners
- Mod: ClubCMS - rename responsive content control's css class - to make it more descriptive
- Fix: #128351 Waitlist elligibility check needed to account for CourseId.
- Add: user-booking/{ticketId} endpoint to retrieve a single booking.
- Mod: Drop a bunch of old Sync procedures.
- Mod: LoveGolf home banner - update the link
- Mod: Updated Love Golf Home Banner
- Add: Release notes.
- Fix: Show "Welcome to PowerPlus Golf" instead of "Welcome to Live" when logging in for Aus/Live.
- Ignored some stuff.
- Mod: Added Micropower logo if a) Aus and b) Live.
- Add: Index to fact_Score to speed up club report from Live dashboard.
- Prizes: Fix: Custom prize descriptions were not bound to the UI and therefore were not saving on request. Prize Pool Allocation (custom/fixed/percentage) was not saving Custom when asked by the user. Fix: Prize report was not showing custom prize descriptions when these were configured.
- Fix: Prizes: When you have a Special Prizes section and then change the competition type for any of the Competition Placings sections, you end up with an error because Special Prizes do not have a competition type ID.
- Fix: Updated the hole image dimensions to 370 x 370 (it was previously 640 x 520)
- Fix: Upgrade to Knockout 2.3 messed with Scorecard Admin.
- Add: Script to give ALX product to all NZ clubs.
- Fix: Autocomplete on the SSO login control had a few strange things happen when you type quickly
- Mod: Couple of minor mods to the 2 Under Club email.
- Mod: Show the Analytics widget only to clubs with the ALX product.
- Fix: Applied CSS style fixes to Prizes htm pages. Styling issues were caused by the Live UI refresh CSS.
- Fix: Applied CSS style fixes to Prizes htm pages. Styling issues were caused by the Live UI refresh CSS.
- Fix: #4649: When we're working with a Passport type green fee where the "Booked on Kiosk or not booked" option is UNticked, we should not offer that green fee to the user even though it is system calculated.
- Fix: #5189: When a multiround Eclectic competition has expired markers on it (like what happened at Christchurch), we were unable to open up the competition setup.
- Add: SSO now lets you search by club name again, same as the old DotGolf Live/Edge login form.
- Mod: Fix: #5309: Updated the statement query. - Updated the comments, and use join instead of left join when we get credit notes linked to an invoice
- Fix: Logo height reduced to stop menu items floating to the right.
- Fix: #5309: Updated the statement query. Two separate queries (union) for: - Credit Notes allocated to invoices of the member. Use Invoice.MemberId and CreditNoteInvoice.Amount (not CreditNote.MemberId and CreditNote.Amount). - Credit Notes that are NOT assigned to an invoice yet. Uses CreditNote.MemberId
- Mod: When an online membership form is submitted, add it into the club's Inbox (inter club message). Mod: The email notification sent to the club is now just a link to the message.
- Mod: When an online membership form is submitted, add it into the club's Inbox (inter club message). Mod: The email notification sent to the club is now just a link to the message.
- Fix: Oops, missed the Dapper reference.  Try to compile code before committing...
- Mod: Removed the stored credentials feature from the Connector tray app and replaced it with a mechanism to authenticate the kiosk using the connector UID.  This will introduce trouble at clubs like Riverside where the kiosk username is used to restrict it by course, but we can (and will need to) fix that by adding a KioskUsername option into the .exe.config file.
- Mod: Allow kiosk browsers to authenticate using the connector UID on the query string.  It could be argued that doing this over non-SSL is a problem, but all our auth is over plaintext anyway so it's no less secure than our other stuff.
- Mod: #98387 Kiosk Dotgolf references removed for PPG (Aus)
- REINTEGRATED PRIZES from /Branches/Trunk.2016-01-28.prizes.
- Mod: Updated to new logo. Fix: Auth problem when SSO logged in as a club.
- Analytics: Add: Fixed Live url resolving. Mod: Updated to new logo.
- Mod: #128500 TB setting for Member max bookings per day (bookings created by member) fixed so logic is applied for Kiosk.
- Revert: TB setting for Member max bookings per day. Reverted change in this proc as the initial spec was misunderstood and the max per day is not to affect the members booking timeslots per day. So this is back to always 1 max per day. Logic for max bookings is to be in ClubCMS and Kiosk.
- Fix: Missed a file.
- Fix: Missed a file.
- Fix: Live dashboard link to Analytics works now. Fix: Improved widget with warehouse offline capabilities.
- SSO: Fix: Updated the DotGolf logo. Fix: If the user previously logged in via SSO to Org, and then tries to login to Live, we should change the user type as they are not authenticated as a club.
- Fix: Pure white the logo; grey does not look good on blue.
- Add: New DotGolf logo.
- Fix: Build error in Org caused by WebUser class code changes for SSO.
- Mod: [MAJOR]: SSO-enabled DotGolf Live/Edge/PPG.
- Analytics: Mod: Moved away from session for authentication storage - encrypted cookies are where it's at.  Disabled session for good measure - it sucks anyway and MVC does not need it. Add: New authentication using the built-in ASP.NET auth classes; this makes role-based auth much easier since we're sharing Analytics between clubs and associations. Mod: Improved ClubRoundsByDate report.
- Fix: PPG-45 Webadmin Club Sites-->Settings new field dropdown list to select the ClubLink domain. List was not populated from managed domain list.
- SSO: Fix: Database connection string would not always be initialised - so moved to Global.asax. Fix: Login flow was sometimes getting the club ID wrong for multi club users like matt.  I've refactored the code to make it a bit more resilient as the previous flow was open to a few logic problems.
- Fix: SSO: If ClubId field is shown, focus this instead of username.
- Fix: PPG-45 Webadmin Club Sites-->Settings new field dropdown list to select the ClubLink domain for ClubLink integration (TeePlusAPI). List was not populated from managed domain list.
- API: Add: HasCart returned from user-bookings endpoint.
- Add: HasCart returned from wa_TBGetMyBookingsForMember so that I can send this down the API.
- API: Add: GET courses/{clubId} endpoint so client can retrieve courses for a club.
- Fix: Corrected build error in API due to shared library change (around menu options to accommodate clubs and associations)
- Analytics: Add: Club Rounds By Date report.  This is the first basic version, needs a few more mods - see TODO in ReportsController_ClubRoundsByDate.cs Mod: Change to ClubId SSO so we can ask a club to login.
- Mod: Re-enable Analytics widget.  We can turn this off with a Web.config setting.
- Warehouse Builder: - Improved logging to file and email. - If data is detected in the filestream that is outside the date range, extend the range so that all the aggregates are properly recalculated. - Added Year and Month columns to dim_Date. - Added FORCE ORDER to a few queries for performance.
- Fix: Removed specific NUnit version from csproj file as not everyone has that version of NUnit installed.
- Fix: FORCE ORDER on these queries as they are getting terrible plans on DW1.
- Add: Release notes.
- Mod: Allow to generate Member Balances Report for resigned members only.
- Mod: Minor text changes on the form.
- Mod: Check the user has selected a category filter.
- Mod: Minor text changes on the form.
- Mod: Minor text changes on the form.
- Fix: ReverseReceipt - when reversing receipts and at the point: "while @Surplus > 0...", updating the instalment record means we are updating the OutstandingAmount with a positive amount, hence, set the PaidDate to null.
- Fix: Changed the condition when getting new members as email recipients. Instead of checking the date started in the cmember table, just look at the date created in the ClubMember view for us to be able to query non affiliates as well.
- Mod: Direct Debit Export Rollback - enclose in a transaction. There was a case in Warkworth when the DD was rolled back but a Xero auth issue occurred and so the receipts in Xero weren't voided.
- Fix: Updated the query when adding new members in the email recipients. Added the condition cmember.ClubID = @ClubId.
- Fix: The recur section fields in the competition setup doesn't align well.
- Fix: Comment out the Analytics dashboard widget for now - this can't go live yet.
- Mod: ExportReceiptToXero - enclose the process in LockWaitAndTake
- Mod: Third iteration for the BMW performance report email.
- Add: TB setting for Member max bookings per day applied to further ClubCMS booking max checks
- Fix: The member number or surname text was not aligned properly.
- Add: ExportReceiptToXero - This could be used in case the receipts created by the DD (all in one batch) were not exported to Xero successfully.
- Mod: Holden - Join control - set bulk email to true (as this is a required checkbox "I agree to sign up to Holden Clubhouse and receive periodic information from Holden.")
- Mod: Added the SponsorImageUrl for the OnPar controls.
- Mod: Made a few changes based on OnPar's requests. 1. Made the images bigger 2. The sponsor images are now clickable. 3. Wider container.
- Fix: #124171 Creating a competition, if you select Recurring and select a day/dates, then untick Recurring, and save. The recurring competitions were still saved. Flag check added to Save function
- Mod: Sponsor updates.
- Mod: Holden - style update
- Fix: ClubCMS - Holden sign up / login form
- Fix: The layout for TabMembers is incorrect for non edge. I have also included material icons in the css.
- Mod: Performance: Eliminated some of the subviews being called by the ClubMemberInvoice view.
- Mod: Changed live_GetSubscriptionPaymentStatistics to avoid the ClubMemberInvoice view (for performance reasons).
- Fix: PPG-10 Waitlist added CourseId. Script error for single course clubs as courseid was null.
- Mod: API: TestMode added to the ApplyBookingChanges endpoint.
- Fix: The contact details link in the tee booking is not showing.
- Mod: Added new members, inactive members and resigned members date range in the bulk email's recipient dropdown. Fix: Added a, object checking when getting the quick keys for vend.
- Fix: The pages' layout is incorrect when resizing to a smaller window this is because of the @media css changes.
- Fix: Minor ui fix in the group booking number of players slider.
- Fix: "Just thought I would point out is it mildly irritating that on the new layout the cart booking slider is now hidden behind the tee times in your group bookings." - Matthew Judd (Queenstown GC)
- Mod: CheckPermissions - if PageName is null or empty, log the issue (with corresponding Club ID) and redirect user to the custom 404 page.
- Fix: #127021 Leaderboard was not showing Handcap Idx column header for stableford competitions, but the rows did have the column, which made the header columns mismatch.
- Fix: Some more fixes for the tee booking popup screen.
- Mod: ClubCMS - Holden - when a Holden-registered member is logged in, give access to member-only pages in the site.
- Mod: ClubCMS - Holden - on log out, redirect to site default / home page
- Fix: Freshdesk 5184 - changed a few padding and margin to that the buttons in the bottom of the popup will appear.
- Mod: PPG-10 Waitlist added CourseId to waitlist functions and models.
- Mod: PPG-10 Waitlist added Course selection to waitlist entries.
- Fix: Changed the TabStatement UI field.
- Fix: The hole details next and previous button is throwing an error because of incorrect path (friendly url chagnes).
- Mod: PPG-10 Waitlist added CourseId to entries. POG and Kiosk have Course selection for adding waitlist entries, and course id is now considered when determining the next member in the waitlist.
- Mod: Added a message when there are no offers in the promotions control.
- Fix: Missed one.
- Fix: Group booking UI fixes.
- Fix: dim_Date should be built up to yesterday, not including today. Fix: agg_Score_Count had an error causing IsCPClub field to have an incorrect value for some clubs. Mod: Historical commit to fact_Score build - forgot what this was for, but it has been live for a month now...
- Fix: Analytics Widget: Rounding error introduced by summing rounded integers instead of the total.
- Fix: This fixes the width for scorecard admin and tee booking when user is using split screen.
- Fix: The header was showing the old menu bar.
- Fix: Analytics: Percentage calculation was incorrect.
- Fix: Percentage calculation.
- Fix: #127375 Creating a new timesheet was duplicating recurring booking for members with multiple recurring booking but different start dates. The FromDate was not in the where clause for getting recurring booking for the timesheet bookings.
- Fix: Vend has upgraded the quick keys. This just fixes the error when getting the register details.
- Mod: Create "scripts" folder in clubs/[id]/ when creating a new site
- Fix: #5146: Handle special characters in the PageName / & @ ?
- Add: Script that creates function: fncReplaceSpecialCharacters - Replace ampersands with "and" - Replace special characters with hyphens - Diacritics are removed
- Fix: Mobile Redirect control - removed unused "Prev" query string. This fixed the problem with page names with ampersands.
- Fix: Percentage ratio calculation did not match analytics report.
- Fix: Added the subheader class in the panel headers.
- Fix: Minor ui fix for the help videos page.
- Add: subheader class to Analytics widget header for new stylesheet.
- REINTEGRATED EDGE REBRAND
- Fix: The "P" modifier on a handicap index crashed the draw card printing utility. Mod: Changed the error message slightly when a user can't login for whatever reason.
- Add: Widget to DotGolf Live for DotGolf Analytics.  There is no link off to Analytics yet as I haven't built the club detail report yet, this will come in due time.
- Mod: Changed Analytics reports to use the new agg_Score_Count aggregate.
- Add: agg_Score_Count aggregate table and calculations.
- Fix: Move js (used by terraces_mobile) to the main js folder - Update the css URL in the AddToHomeScreen and Slideshow mobile controls - Update terraces mobile jquery
- Fix: terraces_mobile - check first if "?" is present in the query string
- Fix: AddToFriends value was not passed to wa_TBApplyBookingChanges properly.  There may be other values with the same problem but I don't want to commit them right now - this mod is only for the API.
- Fix: There was a problem in Apply Booking Changes which caused it to stop returning failure rows to the client - which meant that bookings that reported a warning to the admin (like out of category/override etc) could not be created.  I have manually applied this fix to NZ1 and NZ2Stage.
- Add: CompetitionHistory table to track inserts and updates to the Competition table.  There is no UI for this at the moment, but I thought I'd get this in here so that we can start tracking history before the UI is built.
- Fix: #5130 Improved performance of Adweb non-affiliate search by having 2 code paths for email searches vs. username searches.
- Fix: Made a "no records" message a little easier on the eyes.
- Add: CWControl CWControlProperty inserts
- Mod: Holden Join control - ensure that the name is also saved in MemberThirdParty table - style update
- Fix: ClubCMS - TournamentRegistration - corrected the urlTerms path; removed "layouts/"
- Fix: ClubCMS - TournamentRegistration - updated form validation script to exclude hidden input field - when creating the non affiliate record, use the standard Username - update the insert script into Passport table, as there's no Username and Password field in that table anymore
- Fix: In some cases wa_TBApplyBookingChanges would return duplicated rows in the result, caused by a typo in the final select.
- Fix: Friendly URLs: Added a route exclude for an api folder that I was not aware of.
- Fix: Release notes.
- Add: Release notes.
- API: Fix: Incorrect passport ID was being passed into ApplyBookingChanges.  Symptom was that the user is booked multiple times instead of the requested members on each entry.
- Add: Holden - images
- Fix: Error when using Registration control due to a typo and forms not getting URL parameters passed to their processing page. Fix: Pages with ampersands in their names did not load properly due to a missing URLEncode().
- Mod: ClubCMS / Holden - added flyout menu to My Account
- Mod: ClubCMS / Holden - added flyout menu to My Account
- Mod: Holden - added LoginRedirectPage property
- Fix: Crashbug when you login as a member on some sites - the redirect wasn't working properly as it needed to "friendly" the url first before calling Response.Redirect.
- Mod: Decided against adding this index.  It improves IO performance but causes more CPU, so it's a tradeoff - and right now we are shorter on CPU and IO - so current balance is better than adding this index.
- Fix: Greenfee chart report was crashing due to sparse Dev data.  Added WHERE conditions to check for null cells.
- Mod: Holden - updated text, link, removed unnecessary popup
- Add: Index to speed up wa_TBGetMyBookingsForMember
- Mod: GetClubWebsiteAddress - handle association sites
- Mod: ClubCMS - terraces 3 - updated panels, remove navbar (topmost nav strip) and make it a control
- Mod: ClubCMS - responsive join control - added CssClassName property; updated error display
- Mod: ClubCMS - responsive menu control - added CssClassName property; add "highlighted" class to the menu item
- Mod: ClubCMS - responsive login bar control - added properties: ShowName, TextBeforeName, LoginRedirectPage; added sign in panel
- Mod: ClubCMS - responsive Content control - added clubfoldername variable
- Add: ClubCMS - responsive rNavBar control; join control css
- Add: Holden - site files
- Fix: #5078 The Outstanding Cards count on the Competition Dashboard incorrectly included cards that were deleted/reprinted.  Added a WHERE statement excluding these cards.  Org uses this too so had to be careful about this.
- Fix: #5086 If you don't have the kiosk home screen visible (the one with Print Card / Enter Score / Tee Booking), the Go Back button is visible on the "are you a member" screen.  When a user then taps this button the kiosk reverts to a blank screen and the only way (for clubs) to revive it is to reboot the computer.
- Mod: Reinstate the green fee chart report (Greenfee by Month/Year) as the performance issue with it seems to have been fixed.
- Mod: Removed Course filter from green fee chart report as they were causing massive performance issues.  We may be able to reinstate the report now that this has been fixed.
- Mod: Removed unused code.
- Fix: #5085: Only display "There are no active markers..." if Markers is null
- Fix: #4997 Increased Script Timeout to 10 minutes to try and get the merge scores thing working.
- Add: IX_Invoice_OutstandingAmount to speed up the live_GetUnallocatedCreditNoteCount proc.
- Mod: Friendly URLs: Changed the redirect from Template.aspx to the friendly url to a permanent redirect (301).
- Mod: Friendly URLs for ClubCMS.
- Mod: Oops, accidentally committed a mod that I should not have.
- Mod: Oops, accidentally committed a mod that I should not have.
- Mod: In preparation of friendly URLs, I have changed all ../ references (relative paths) to absolute ones.  Absolute paths are required when working with friendly URLs and ASP.NET routing.  This commit should not affect functionality in the production system.
- Mod: App - SearchClubDayPage - highlight cells with time slots (PlacesAvailable > 0)
- Fix: #4961 Tee booking search was really slow and tearing up Prod whenever anyone submits this form.  Since the query is quite a wide search I could not optimise it.  Instead I added a default filter to return bookings 2 years and younger.  Users can still clear out the box if they want older bookings.  Adding this filter lets SQL breathe.
- Mod: App - added DateList property - list of dates with slots
- Mod: App - get user details after log in
- Fix: #5021: Case where if a booking history log entry has both a MemberId and a NonAffiliateId on it (which can happen in theory), the UserName would be formatted MxxxxNxxxx and this wasn't handled by the joins cleanly, causing a crash.
- Add: Missing GO statement.
- Add: PPG-45 Webadmin - new General Settings page with a field for managing a list of ClubLink domains. - Club Sites-->Settings new field dropdown list to select the ClubLink domain for ClubLink integration (TeePlusAPI)
- Mod: App - calendar, api updates
- Fix: Performance improvement by about 6x for the Payments Received Report by using the new Invoice.MemberId/NonAffiliateId and Receipt.ClubId columns.
- Add: Schema for storing ClubLink domain list and the ClubLink domain set for TeePlus API, for the club websites integration.
- Mod: As requested by Mel, replace the NZME partner with NZ Herald
- Mod: Cleaned up some comments. Also added to set the passportcredentialid for the one we are inserting, because else it was inserted then deleted again by the code a couple of lines below. Here is the ticket #5040
- Mod: Make sure we do not check the passportcredential of the passportportcredential we are joining. Here is the ticket #5040
- API: Mod: Made ApplyBookingChangesRequest.Operation a required field (it doesn't show up in Swagger but at least the model validation should take care of it)
- Fix: Spelling mistake
- Mod: Removed it all together (rather than comment)
- Mod: Remove the old green fee schema from this query as we no longer have any clubs using this.
- Fix: Bunch of performance related improvements around retrieving Eclectic results.  2 new indexes and a stored procedure fix.
- Fix: Erratic behaviour when saving an edited module, this is because of ajax async. I just added a sleep prior to saving.
- Mod: App - minor changes
- Mod: App - calendar, api updates
- Mod: App - minor style updates
- Mod: App - login logout link, changes in the menu Add: AboutPage
- Mod: App - minor changes in the user details styling
- Mod: The DotGolf and NZGolf access for the GOTG admin is hard coded. I just replaced the password of DG for this commit.
- Mod: App - create additional cells up to date selected
- Mod: App - SearchClubDayPage - use picker control for the Club selection
- Add: TB setting for Member max bookings per day. Previously only 1 booking per day per member was allowed. Now the setting can be changed to No Limit which allows the member to book any number of bookings per day.
- Mod: Changed Competition type name of Split Sixes to "Group Best Ball (Split Six)", refer to revision #22759 for original commit. - Update project file with renamed help file
- Fix: The NZGA Slope Period Update email is not filtering out deleted clubs.
- Mod: App - add Club ID parameter in search slots page
- Analytics: Fix: Charts did not render when tables were sorted by the user.
- Analytics: Add: Allow sorting reports by clicking on table headers. Fix: Sort Rounds by Date report by region name by default. Fix: ChangePercent() function will now return negative/positive infinity which is better than 100% or -100%.
- Fix: #4997: Increased timeout on Merge Scores page, and also (in a separate commit) wrapped the api_MergeMember proc in BEGIN/COMMIT TRANs to keep it from leaving members in an inconsistent state.
- Fix: api_MergeMember was crashing half way and leaving members in an inconsistent state (with no handicap but heaps of scores).  Wrapped in BEGIN TRAN..COMMIT TRAN to make it atomic.
- Mod: App - calendar
- Analytics: Add: Rounds By Date for Region report, a drill-through report from Rounds by Date.
- API: Fix: Noticed that we had TimeFrom in one Waitlists endpoint but FromTime in another.  Standardised to FromTime as per the SearchClubDay calls.
- Fix: #4994 When you specify time of day limits on a green fee, the day of the week is not checked so the greenfee will appear for all days of the week if there is even 1 day with no time restrictions.
- Analytics: Added History.js to track state when you post the filter forms back on Analytics reports - this way we can navigate and keep state about the currently loaded data without forcing the user to repost or having to re-select their filters. Mod: Refactored some things to clean the RoundsByDate report and enable it to be used as a template for future reports. Mod: Redirect the user from dashboard to reports to avoid the dummy charts on that page.
- Mod: Added back the sponsor details at the end of the page of hole details.
- Fix: All slots searched through the API were incorrectly reported as being fully booked.
- Fix: #4989 The kiosk was not checking for eligible competition categories (restricting competition entries to being players of specific categories) before auto-entering people.  SCA was working fine, just not kiosk.
- Fix: Only load controls that are from the same layout ID or which is shared across all templates (control layout ID is null).
- Fix: Short (<= 5 character) McSurnames would not be proper cased correctly due to a Regex bug - eg. McKay.  McKaye worked just fine though.
- Fix: Removed SUBS release note for Aus.
- Fix: Left a rogue Passport.Username reference in one of our procs.
- Mod: Added some text for further clarification (Testing: Might want to check this clarification is the correct interpretation!!!)
- Mod: This statement was preventing clubs doing their levies on the final day of the month.
- Mod: Just updating the comment as this went live today.
- Mod: Add /layouts/_shared/UScript.ashx?scriptFile=includes_terraces.js (this loads the given js, IF it exists in clubs/[id]/scripts/ This is copied from terraces tamplate.aspx
- Mod: Add /layouts/_shared/UScript.ashx?scriptFile=includes_terraces.js (this loads the given js, IF it exists in clubs/[id]/scripts/ This is copied from terraces tamplate.aspx
- Fix: Connector: Ensures the listener gets enableDebugMode from the query string.
- Mod: Add an enableDebugMode parameter to the TwainAcquire call so we can enable debug mode on a per-scan basis if we want.
- Add: Release notes.
- Mod: Changed Competition type name of Split Sixes to "Group Best Ball (Split Six)", refer to revision #22759 for original commit.
- Mod: Don't log exceptions complaining about a missing club id for localhost: "ClubCMS.ClubIDNotFoundException: The Club ID of 'localhost' was not found."
- Mod: Added a try..catch to specifically identify Micropower service exceptions.
- Add: Holden styles (for dev site purposes)
- Mod: Performance: In the score entry control I have turned off the code that generates a mini-results report out to the client, unless they ask for it.  Only the kiosk uses this data, so I've explicitly turned it off for normal DotGolf Live score entry.  Getting results can be costly so I'm thinking this will get us a performance improvement.
- Add: This script inserts new controls Third Party Join : login / sign up form, to be initially used at the Holden site. Login Bar : login bar displaying the name and logout link, to be initially used at the Holden site.
- Add: This script adds a new column: ThirdParty.ClubWebsiteId. This allows us to link the website (in ClubCMS) to a Third Party (e.g. Holden)
- Add: Comment to explain where the 1.333 figure comes from for estimating scorecards printed based on scores entered for non-CP clubs.
- Warehouse: Fix: Include GROUP fees.
- Warehouse: Fix: Include virtual scorecards in the stage table - it is still possible to return these.
- Warehouse: Fix: Include non-printed scorecards in the stage table - in DGE it was possible to create cards in pre-print but not print them.
- Warehouse: Fix: Don't exclude unpaid scorecards, just make their green fee amount $0.  This is the same as the last commit, but for old DGE cards.
- Warehouse: Fix: Don't exclude unpaid scorecards, just make their green fee amount $0.
- Warehouse: Fix: Don't bother checking the GF product when we're pulling scorecard greenfee info as a club probably won't have greenfeeclub and greenfeetype if they don't have GF. Fix: Complimentary is a perfectly valid greenfee, we should not exclude these.
- Warehouse: Fix: Handle deleted tee bookings. Fix: If we have a courseId from the scorecard, use that instead of the course allocations calculation.
- Add: New competition type Split Sixes stableford for 3-4 players. Results calculated as:     For the first 6 holes only the best individual score for each hole counts.     For the next 6 holes the best 2 individual scores are added together to make a team score.     For the final 6 holes the best 3 individual scores are added together to make a team score.
- Mod: Holden - add rules: State 1: Member of NZG - YES Registered with NZG - YES Member of Holden - NO Detect they have not registered, and show the sign-up form.
- Mod: Holden - Join control messages
- Add: Holden - new empty control
- Mod: Holden - style, layout, validation updates
- Mod: Holden - removed unused js; update adding of css; moved down the login error message
- Mod: Holden - Login and Join controls
- Add: Holden - Login Bar control
- Mod: App - styles
- Fix: Warehouse builder didn't correctly LEFT JOIN on dim_Member for nonaffiliated scorecards.
- Mod: #4947 Removed the restriction to only show handicap index for Net competitions.  We now show handicap index for ALL competition types.
- Mod: #4610 Eclectic competitions used to be calculated overnight for edited and deleted scores.  Only inserted scores were immediately reflected in the results.  Now we do all 3 cases immediately, so you can do whatever you like to scores and the Eclectic results will be immediately updated.
- Fix: #4874 Outstanding scorecard counts were not working for Eclectic competitions because the count was dependent on RSResult rows (Eclectic competitions do not generate RSResult rows).
- Mod: Holden - join control - move terms and conditions, and validation message; add control properties (allow plain text for the terms checkbox)
- Mod: Include help\context\subs\upfront-payment.jpg in the project
- Mod: Holden - Join control - add link to Terms and Conditions
- Mod: ClubCMS - update location of the httphandler and webservice used by the tournament control (to centralise them in the existing api folder)
- Mod: ClubCMS - update location of the httphandler and webservice used by the tournament control (to centralise them in the existing api folder)
- Fix: POS is throwing an error because props.courseId is not a function.
- Mod: Holden - Update comment and variable names - Update the sign up form questions based on the requirements
- Add: Holden join control - baseed on the BMW.GolfClub ujoinnow control
- Fix: Revert Revision ID 22677
- Fix: #4919: Handle null Master.WebUser.PassportCredentialId (which is a nullable property)
- Mod: ClubCMS - remove unnecessary commented style / comments
- Fix: #4920 ClubCMS ImageHelper.ashx was not setting a content type when rendering an image straight from disk (untouched).  This meant that images were rendered out as text/html, which meant that if you use them in an anchor tag on the site, they load up as garbage instead of getting displayed as an image.
- Fix: Renamed the js files to make it not load beacuse it's throwing an error and the lightbox in the gallery is not working.
- Mod: Added IF statement section to help with people who might resign from one club, and transfer to another club. Resigning deletes the passport credential, therefore when joining the new club they need to re-register. This new section looks at any old or previous passport passwords for this user, and automatically creates a new credential for them if a matching password is found. We disscussed possibly sending an email upon creating the member, but unfortunately we would need to heavily restructure where members are created and channel everything through api_AddMember. (at the moment, some new members are created in DotGolf Live code, and restoring members are also within the Live code - not api_AddMember)
- Mod: Disable SignalR websockets as it causes thousands of ASP.NET error messages in our webserver logs - and Rackspace keeps getting sucked in by these, wasting our time.  Hopefully this will make these errors disappear from the logs.
- Fix: Cleaned up some potential SQL connection leaks in response to MSC126039.  I'm not sure if this is going to sort it out, but we're definitely looking at the connection pool being depleted, hence a connection leak is a good place to start hunting.
- Fix: #4915 Force Xero auth to happen when the Export page is loaded up - this will hopefully reduce the chance of an Auth exception when we hit the Export button.
- Add: #4817 Implemented Westpac direct debit export format.
- Fix: Add missing DateTo property
- Mod: App - Use XLabs.Forms Calendar control in SearchClubDay page. - Set date in SearchSlotsPage
- Fix: #4854 Somehow the client code is able to come up with duplicate competition round IDs and this would cause the service to add a card into a competition round twice.  This causes a big mess, and I haven't been able to find the source of the problem despite a number of hours debugging - so this is a duct tape fix to stop duplicate competition round IDs making it onto scorecards. Mod: Removed debugging/logging code from rev 22607.
- Fix: Removed another rogue reference to Passport.Password.
- Fix: Passport.Username reference in Adweb removed.
- Mod: App - calendar updates
- Mod: App - correct the tee time displayed
- Mod: Performance improvement by filtering frozen handicaps by @MemberId when adding a score.  Added some indexes and a PK also.
- 
- Mod: Performance improvement by filtering frozen handicaps by @MemberId when adding a score.  Added some indexes and a PK also.
- Mod: App - calendar for SearchClubDayPage (work in progress)
- Mod: App - add comment - test credentials
- ModMod: App - Updated toolbar (used for testing)
- Mod: App - Updated toolbar (used for testing)
- Mod: App - UserDetails
- Mod: App - display user's clubs dynamically
- Fix: Removed Passport.Username insert.
- Mod: Drop Passport.Username and Passport.Password as these have been superseded by the PassportCredential table.
- Mod: Moved FormRewriter.cs to classes folder
- Add: This adds a new column CWClubWebsite.EnableFriendlyUrl, which allows enabling of the friendly URL on the website level
- Fix: If you look at a really early competition (several years ago), the popup box shows an error when hovering it in the calendar.
- Mod: FormRewriteControlAdapter - this fixes the issue with rewritten URLs and form postback
- Mod: ClubCMS friendly URLs - two conditions must be satisfied to enable friendly URLs in a website: 1. ENABLE_FRIENDLY_URL in web.config 2. CWClubWebsite.EnableFriendlyUrl
- Add: ClubCMS friendly url - rewriterules config
- Fix: Review: In the below revision it looks like any new draft saved will be invisible for up to 10 minutes if the drafts are cached.
- Mod: APP: User details: Get and display user's club/s
- Mod: Added the menu in the session so that it will not call the api always.
- Mod: Some optimization in the loading of email drafts.
- Mod: #4854: Added logging code to write an entry to the _Log table so that I can continue debugging when another one of these Pakuranga Twilight duplicate competition entries occur.
- Fix: Full screen slideshow image alt is using 'Hasting'. Corrected it to render the correct club.
- Add: SQL - inserts properties for the existing News Recent Articles control
- Mod: ClubCMS responsive recent news article control - display article ChangeDate if DisplayChangeDate property is true, and if it's not equivalent to the article CreateDate
- Mod: ClubCMS responsive news article - display article ChangeDate if this not equivalent to the CreateDate
- Fix: Added back the not in condition but added the checking for null passportid.
- Add: Release notes.
- Mod: API - Get user details - also return Clubs of the user
- Mod: APP: Styles
- Mod: Profile Page - display basic user details on the profile page
- Add: API - User Controller - Get User Details
- Fix: DataTable performs badly when you .ImportRow() and then .Select().  Moved the ImportRow() call into a different loop which runs off a static list of rows previously determined.
- Mod: Added page title
- Mod: Added setting DotGolfPublicAdminUrl in Web.config
- Add: API IsMemberOfClub response to SearchClubDay.
- Fix: SearchSlots time format was being sent as yyyy-MMddHH:mm, missing the space between the date and time.
- Mod: Tournament CMS: Updated DotGolf_TournamentCMS_DotGolfPublicAdmin_Admin value to point to dev
- Fix: Tournament CMS: When creating a news article and "show on www.golf.co.nz" is ticked, create a copy of the image in the public site's images > media folder.
- Mod: Added a new web method called "UploadImageOnly". This is used by Tournament CMS to upload article images to the public site's images folder, when "show on www.golf.co.nz" is ticked in the news editor.
- App Add: SearchSlotsPage Mod: Renamed BookingStep1 to SearchClubDayPage
- Mod: Delayed for this publish. I have put a reminder in my calendar.
- Fix: Oops, forgot to remove an obsolete variable that is only compiled in RELEASE mode.
- Fix: Performance issue in DataCache which caused multiple queries to be run concurrently to fetch the same data.  Now subsequent requesters will be blocked while the primary thread is retrieving the data from the source.
- Fix: #4794 Performance optimisation to live_GetUnallocatedCreditNoteCount by using the new MemberId and NonAffiliateId columns on the Invoice table.
- Mod: Add in the external widgets for leaderboard and full leaderboards for NZWO scoring
- Mod: MyBookings layout / formatting update
- Test: #4269 Test to see if Freshdesk integration is working
- Test commit to new subversion repo.
- Ignored some stuff
- Mod: Removed error case for test batch process (for testing).
- Mod: The date has been set to align with our normal publish, so we are good to run on Monday.
- Mod: Updated the "Add recipients" options to have a dynamic checking for product "TOUR".
- Mod: Updated the "Add recipients" options to have a dynamic checking for product "TOUR".
- Fix: #125023 POG competition select control was not filtering competitions by course id, so was auto entering players into competitions set to different courses. Fixed by passing through the course id to filter competitions on.
- Mod: #90249 Updated scorecard custom11 label from "Matchplay Stroke" to "Matchplay Index".
- Mod: Changes in get user bookings
- Mod: Added pull to refresh on member home page
- Mod: Member Home Page - this page now shows user bookings (not styles yet, and there's a delay) Add: Profile Page - not showing anything yet
- Fix: No email recipients are being created in the bulk email because there's an issue with the query. The "not in" has a limit.
- Fix: Removed duplicate function getAvailableCarts Fix: #124882 Group booking cart max total was incorrect when editing a group booking with carts set. It was adding the no of carts in the booking onto the max carts available. But the stored proc live_TBCheckCartsForSlot already excludes the carts of the current timeslots group booking (the time comparison in proc uses < and >, not =>), so adding them in the js was causing a greater max than it should have been.
- Mod: Two under club email with new content. I also saw that we were never sending to new members, so I made a mod to check if they are an existing member of the 2UC or not.
- Fix: Login redirect to Member Home Page
- Mod: Add Home to the menu
- Mod: Updated Make a Booking click action Add: BookingStep1Page
- Mod: Minor changes on the booking page and the Member Home page
- Fix: See Line 233. The code at the end of the Page_Load method is not needed when we are cancelling a booking, so we're skipping that when cancelling a booking.
- Fix: stage_Score extract script had a boundary error - didn't include the data from the date of @ToDate.
- Mod: Improved Receipt_ClubId index by including a number of columns; this sped up the subs payment statistics chart quite a bit.
- Fix: Handle records with no change better in dimension builds.
- Fix: Warehouse Builder: Should have used Score.CaptureDate for extract filtering, not PlayDate.
- Mod: Performance improvement in the subs payment statistics procedure.  I've added Receipt.ClubId and some indexing to try and make everything faster, but to leverage this we have to add a WHERE ClubId=xxx to all affected queries.
- Mod: New footer for the NZ Womens Open tournament site.
- Mod: #4703: Add "Cancel my booking only" like in golf.co.nz
- Mod: #4703: Add "Cancel my booking only" like in golf.co.nz
- Mod: #4703: Add "Cancel my booking only" like in golf.co.nz
- Add: Text message banner image
- Mod: Style update to make the four player controls fit in the body
- Add: Missing UXTest.xaml for Gorilla Player.
- APP: Mod: Save properties when authenticated. Mod: Pass user location to API. Fix: HorizontalDateSelector was changing size when form changes. Add: Search results on homepage styled a bit better. Add: Integrated prices, locations and 18H/9H from search results. Mod: Login page improved.
- Fix: HTML bug in release notes.
- Fix: HTML bug in release notes.
- Add: Release notes.
- Fix: Corrected a comment in the code.
- Mod: Add unique lock values into the redis calls as that might be the reason things are not being released properly??
- Fix: Discovered that Redis LockTake() won't wait until a lock is acquired - instead if a lock is already taken it will just return false.  Grace and I have written a new function in Shared.LockWaitAndTake() which waits for a lock and throws an exception if not acquired.  This really belongs in DotGolf.Shared but the StackExchange.Redis package requires BCL which is like cancer.  Will do that another day when we feel more up to the task...
- Add: New competitions-for-dates endpoint to allow Micropower to get competitions for a date range.
- Add/Mod: Added menu, with sample menu items and icons
- Fix: #4726: Use redis LockTake to prevent Direct Debit Export process to conflict with the Xero sync. The issue caused duplicates in the Receipt records (because the Direct Debit export was running and the scheduled import / Xero sync happened).
- Fix: Missing fix from DotGolf.Public project stopped members editing/cancelling bookings on book.golf.co.nz.
- Fix: Missing fix from DotGolf.Public project stopped members editing/cancelling bookings on book.golf.co.nz.
- Fix: #4704: When updating Instalment.PaidDate, use the existing PaidDate value if it has one already, otherwise, use the current date.
- Fix: When NZGolf enters an international score we have to substitute their 900 club ID so that the score can properly save.
- Add: Missing country selector (which should enable the overseas courses in the SIC for Org)
- Add: Missing ko.validation (which should enable the overseas courses in the SIC for Org)
- Add: Missing script which should enable the overseas courses in the SIC for Org.
- Fix: #4726: Link with CMember record for the particular Club only. (There were duplicates before in the Direct Debit Memeber List Report before because the Club ID condition was not present in the CMember join)
- APP: Add: Custom renderer to switch font to Font-Awesome on Android when rendering labels set to that font.
- APP: Fix: Passport token storage was not working due to incorrect serialisation when storing it. Add: Font-Awesome to iOS; could not make this work in Android yet (rumour has it you need custom renderers) Add: Can now call SearchClubDay with a date, when authenticated.  Only club names are displayed right now. Mod: Small UI tweaks for Android. Fix: JWT wasn't working in Android due to missing dependency.
- Fix: wa_TBSearchByClubDay fixed to make @FromDate and @ToDate inclusive - so adjusted this to make Public work correctly again.
- Fix: wa_TBSearchByClubDay fixed to make @FromDate and @ToDate inclusive - so adjusted this to make Public work correctly again.
- Fix: wa_TBSearchByClubDay fixed to make @FromDate and @ToDate inclusive - so adjusted this to make Public work correctly again.
- Fix: #4704: When updating Instalment.PaidDate, use the existing PaidDate value if it has one already, otherwise, use the current date.
- Fix: wa_TBSearchByClubDay had an off-by-one error where the last day of the search range would be excluded from the results.  Because the API retrieves search results for a single day (@FromDate == @ToDate), this left us with no results at all.
- APP: 2 way databinding working on the date selector control.
- APP: Implemented a horizontal scrolling date selector control. Added DotGolf Blue (#236BB0) onto the nav bar.
- Fix: Re-applied a previous fix and merged. Waitlist failed to add when number of slots < 4. revs 20579, 20578
- Add: #4708 "PairsSixHoleCalc" competition type added into results system.  I have called it the "Pairs Special 6's" competition type for lack of a better name.  I have asked Dianne to let me know if there is a more accepted name for this competition type in the Golfosphere.  From googling around it's often confused with Split Sixes, but the latter competition type is around splitting 6 points per hole up across the players, not about splitting the competition up into 3 sets of 6 holes with different calculations.
- Fix: LoveGolf: Just corrected an improperly formed tag "br/>" in the message emailed to clubs for enquiries
- Fix: #4704: When the Instalment records are updated during the Direct Debit export, set Instalment.PaidDate to null if there's an outstanding amount for the instalment.
- Fix: MSC#124160 Fixing the previous issue brought back the All Markers bug, so had to check whether a marker was already assigned before overwriting it with a default.
- Fix: #4664: When printing multiple scorecards on the same TXHeaderUID (like what happens for EFTPOS transactions) while NOT using tee booking, the second scorecard set to PAID would instead recreate the greenfee TXLine on the first scorecard, leaving one of the cards unpaid.  See ticket for repro.
- Mod: OrderCard should always be set to TRUE for all member uploads to GolfLink.  Adrian's comment on MSC#122806:
- Fix: The competition select control was incorrectly saying "All Markers" for any mixed gender competition, even though the rounds are separately displayed on the UI.  I have changed the SQL to show the marker name for each gender.  This was discovered when I was debugging MSC#124160, but because it's a dangerous fix I committed it separately to the primary fix (which is the javascript error).
- Fix: Javascript error in booking editor when dealing with a mixed auto-entry competition.  This was a copy and paste bug when the code was ported from the SCA, and caused MSC#124160.
- Fix: #4695: Add ClubId query string parameter. This is used to check if the user is a home member. (And if a home member, allow the user to continue with the booking even when TBP is disabled for the club.)
- Mod: Changed the GetTokenForAltMemberId call to take a CentralClubCode rather than a ClubId.
- Fix: #4659 When a player attempts to cancel their own booking and the original ticket does not have an entry linking it to the TBTimeSlotEntry record (this can happen in rare cases, like dragging/dropping in Live I think), they can click CANCEL but it does not actually cancel the booking, in spite of displaying "booking cancelled" to the user.
- Fix: There was an issue when selecting the Email Type, New Zealand Newsletter is being set as default.
- Mod: #4603 - Added a "BOOK" button in the competition calendar.
- Mod: Changed allowable points for 5CC handicap adjustment report as per Chris' instruction.
- Fix: #4675: Handle null InvoiceId (when invoice isn't created yet and the user is creating the invoice / previewing the instalments)
- Fix: Remove the RSScore link when deleting scores.  This should have been done in rev 21269 for ticket #4051 but unfortunately was missed.
- Fix: Remove last modification (script that prevents double clicking)--as this script prevents IE users to purchase.
- Mod: Update the NZ Golf powered by DotGolf logo on top left of the public site
- Mod: As suggested by Matt, for simplicity purposes, remove the other information on the upfront payment help file (it could be confusing for the user; we could just move this to a document or user manual)
- Add: Release notes.
- Fix: Addressed possible Redis connection leaks.  This is in response to Rackspace ticket #160111-13339 and the performance issues we had on 15/01/2016 7am-9am.
- Mod: Responsive content control - style-related updates
- Mod: Tournament site - renamed cache keys
- Mod: Responsive content control - styles update
- Add: Basic handicap rollover test fixture with a single test in it - mostly to get some of the base methods in place to we can start unit testing some more complicated stuff (like T-scores)
- Fix: Tournament / responsive site - editing of Content ControlEditor Mod: Style updates
- Mod: Moved as at to the next line.
- Fix: Updated the PlayerDetail control and ConfirmSlots page code (copying the code from the Public solution), but retaining the code unique to them (e.g. cart type code). Bug background: The default selected hole when making/editing a booking is 9 hole, when it should be 18 hole.
- Mod: Only send emails to people that have actually played (use the ID from the table to indicate the next round of emails)
- APP: Add: Login now works, although not a lot is shown on the UI for this. Login works through the MessagingCenter pub-sub library from XF. Current passport is available through App.CurrentPassport.  Logged in properties are on the viewmodel.  In theory I can make those notified properties so we can update the views automatically. Copied and pasted model classes from the API project (and added DataAnnotation reference so they can actually compile) - but we need a better way of sharing the code between the API project and this one - possibly a shared PCL library?
- Mod: Some changes to the 2nd BMW Performance report email content
- APP: Add: JWT for API token auth - this was a struggle as no PCL compatible library I tried seemed to work in both iOS and Android.  Ended up getting the source, compiling in both platform specific projects and building an interface and using the dependency service to access it from the portable library for API access. Mod: Android emulation is actually working on my machine now! Mod: App now has IsNetworkReachable property.
- Mod: Added the "as at" date for the Current and Previous handicap
- Fix: Updated the PlayerDetail control and ConfirmSlots page code (copying the code from the Public solution), but retaining the code unique to them (e.g. waitlisting code). Bug background: The default selected hole when making/editing a booking is 9 hole, when it should be 18 hole.
- Mod: Update the tactic of the month.
- API: Added an endpoint to allow us to get a JWT given a username and password.  This is only accessible to apps with the APP_DOTGOLF_MOBILE (app-dotgolf-mobile) role.
- Mod: If a competition has > 4 players, there is no design for this (to be printed on the scorecard). Skipping this for now until we can accommodate.
- Mod: Changed the text when registering in the tee booking page.
- Mod: Changed the layout of the sponsor logo in the hole details.
- Mod: This was already run in prod so I added a "not exists" condition in case this will be run again.
- Add: ClubCMS js - jquery 1.12.0
- Mod: Tournament site - styles updates
- Mod: Tournament site - registration - code clean up
- Mod: Handle loading of the tournament controls when there's no competition set up yet for the tournament site.
- Mod: Tournament site - styles updates / path update
- Mod: Tournament site - styles updates
- Mod: Tournament site - styles updates
- Mod: When calculating how T Scores would affect a projected handicap, we were not considering the "within the last year" rule at handicap rollover time. E.g. If someone was affected by a T Score, but had not played for months (and some T Scores dropped off from within their last year), the system was not updating their handicap. There is a UTIL function I am committing in this group, but because it is rollover this week, I am going to need to run this manually. This file may change depending on whether we simply let wa_RolloverUpdateMember do the work, or manually update the handicap and score (like it currently does in UTL_RolloverTScores)
- Fix: In this case it seems the CONTROL files should have CREATE statements as these tables don't currently exist in our test database.
- Mod: Performance improvement in TrackerLog writer.  We no longer query the database for the schema version before sending an entry off to the logging server, but instead read it once a minute and cache it.  I don't normally run all the schema scripts at the exact time of updating the SchemaVersion so this value is out of date anyway - this only extends the fuzzy window by a minute.
- Mod: Tournament site - style updates
- Mod: Handle loading of the tournament controls when there's no competition set up yet for the tournament site. Style / layout updates.
- APP: Playing with geolocation and reverse geocoding.  Got something sort-of working for iOS and Android, no WP support yet.  Thinking of using dependency injection and native Geo stuff to do this on each platform. Got a basic infinite scrolling ListView working. Got search bar, date picker and listview on home screen. Implemented basic ViewModel structure with INavigation support.
- Mod: Handle loading of the tournament controls when there's no competition set up yet for the tournament site.
- Mod: Handle loading of the tournament controls when there's no competition set up yet for the tournament site.
- Mod: Handle loading of the tournament controls when there's no competition set up yet for the tournament site.
- Mod: Add Facebook URL field
- Mod: Update the path of the responsive controls from terraces3 to _responsive
- Mod: Handle loading of the registration control when there's no competition set up yet for the tournament site.
- Mod: Update the path of the responsive controls from terraces3 to _responsive
- Mod: Set the Forgot Password Page Name to the default value, if it is null / empty. Hide Forgot Password link if page does not exist.
- Fix: Accommodate association sites (as we are now creating sites for Associations, not just clubs)
- Mod: Terraces3 / responsive Content control - hide edit panels (pnlButton and pnlControlContainer) when not in edit mode
- Mod: Terraces3 / responsive control - correct the CSS file being checked
- Mod: TerracesMod: Terraces3 / responsive controls css - remove comments
- Mod: Terraces3 / responsive control - image slideshow - updated image dimensions and corrected file path
- Mod: Added some help context to inform the user to always use an 18H handicap as the max handicap.
- Mod: Updated the text content of the Upfront Payment help file
- Mod: Fix build error with same numbering of SQL scripts
- Mod: Fix build error with same numbering of SQL scripts
- Mod: Fix build error with same numbering of SQL scripts
- Fix: When already logged in as the requested club, redirect and remove the ?LoginAsClubId parameter from the query string.
- Mod: If you put a parameter of the following format on any query string in DotGolf Live, the system will request the user to login as that club, if they are not already logged in as the club.
- New metric monitor config file committed. Mod: Compare stats against last 5 weeks averaged instead of a single value 2 weeks ago.
- Fix: #4599: If a person makes a paid booking and NO scorecard is printed for them at the club, then the admin decides to refund their booking, and then they decide to capture the booking (i.e. changed their mind about it), the green fee report gets out of whack because the TXLine records stay in their previously refunded state.
- Mod: Preparing for the 2nd BMW email EDM mail send.
- Fix: #4109: For Ambrose cards, don't let the user pick a singles competition type (like Gross) when entering the score by card number.  By extension if this is a one-scorecard-for-team card, we don't let them pick any competition types that are not one-scorecard-per-team.
- Mod: #4105: Don't ever show the Non Playing checkbox in the category screen for NZ clubs.  We have the NZG Category that controls the Non Playing flag (and it is automatically set anyway) so we only use this checkbox in Aus.
- Mod: #4376: When an invoice is voided through DotGolf Live and the Xero update (void/delete) for that invoice fails, un-void the invoice in our system, leaving it in its original state.  This should stop our system and Xero from getting out of sync.
- Fix: #4548:
- Fix: #4601: Improved error handling to ensure user does not get on a stuck screen when the kiosk session has expired (due to a central server reboot or similar)
- Mod: #4537: For accumulative multiround results for competitions with Freeze Divisions turned OFF (so participants can change divs), the Overall Results report gives bad results as the results system currently does not generate "real" overall results.  The report just spits out the results for the first division you went into, so if you changed divisions after that those results are missing.
- Add: App: Skeleton code for something that at least launches and runs in winphone and ios (simulator and device)
- Add: Initial version of the mobile app, using Xamarin to build for iOS, Android and Windows Phone.
- Fix: https://dotgolf.freshdesk.com/helpdesk/tickets/4579 Commented out a code that sets the month index of January incorrect.
- Mod: ImportCreditNoteUpdates: Deallocate / reverse the amounts for the voided or deleted credit notes from Xero.
- Fix: API add member - Another passport missing plug when AUS member record is created. Passport is now created when Member is created in Aus code. - insert passport statement moved out of if statement so to occur for the else, as it also applied there.
- Add: Instalment - added Upfront Payment Amount help link
- Fix: #4512: When a credit note is voided, update the related instalment record/s' outstanding amount (reversing the amount deducted from it before).
- Fix: #4512: When a credit note is voided, update the related instalment record/s' outstanding amount (reversing the amount deducted from it before).
- Fix: #4512: Insert the existing credit notes and payments entries before inserting the upfront payment amount.
- Add: Instalment - Upfront Payment Amount help file and supporting images.
- Fix: #4576 Proper capitalisation for Mackersy.
- Mod: GenerateInstalments_Internal: When inserting instalment records for receipts/payments and credit notes, Instalment.OutstandingAmount should be equivalent to Instalment.Amount (and not zero). This Instalment.OutstandingAmount will be still updated by the AllocatePaidMoneyTowardsInstalments method.
- Mod: Sync cleanup: Removed references to LastSynchronise value, and removed it from any reports that I could find it being used on.
- Mod: AllocatePaidMoneyTowardsInstalments: Added "DeletedDate is null" and code comments
- Mod: Ensure that we are querying valid instalment records--add "DeletedDate is null" in the conditions
- Mod: ImportCreditNoteUpdates: Allocate imported credit notes to existing outstanding instalments (if any)
- Mod: Add "$" to amounts
- Mod: Warehouse build - reverted this one due to performance issues.
- Mod: Cast the DateTo (string) to DateTime
- Fix: An unclosed DIV tag caused issues with the Subscriptions sections in the category area when viewing NONP categories.
- Mod: Direct Debit Export: Allow user to specify a Date To value (so that they could use this to generate future direct debits)
- Mod: Export - hardcode a date for testing only (if we can export records for future dates)
- Mod: just combined insert query of existing credit notes and payments
- Fix: Analytics: An exception was not thrown on connection failure, so the offline page was never shown.
- Mod: AllocateCreditToInvoice - Allocate the credit to instalments, if there's any. Code taken from AllocatePaymentForInvoice
- Fix: RSPrizeTemplateLine GetActiveLines had 2 Gender columns in the select. A Gender1 column was added to the loadedValues collection and save was getting invalid columns Gender1 error.
- Mod: Cast error when we were doing a comparison.
- Add: Calculate player age in years. Add: Warehouse indexes for performance. Add: Bug with IsCurrent field in dim_CMember.
- Mod: Added Paid Date column in the Instalment Preview / table Mod: Now using the Invoice ID when generating the Instalment preview so we can display credit notes and payments (receipts) for the invoice Mod: AllocatePaidMoneyTowardsInstalments - added DeletedDate is null condition
- Mod: Changed "Club Pro" to "PowerPlus Golf" as per Dale's request 17/12/2015.
- Fix: In the Invoice breakdown, query only instalment records that are not deleted (DeletedDate is null)
- Add: Analytics: Better "we're offline" page than the ASP.NET Autumn-colours error screen.
- Mod: "Golf Link score upload – Following upload of scores to Golf Link, the report returned from Golf Link now shows each player’s old and new GA handicap, it also allows the report to be printed." added to release notes for Aus.
- Fix: UTL_stpFreezeHandicaps cleared off the Modified flag for handicaps that were already previously frozen.  We made the compare statements include the current handicap (<= and >=) to ensure the flags stay as long as the handicap is on the freeze limit.
- Fix: Results retrieval performance enhancements (this will benefit the prize report, other competition result reports and also leaderboards)
- Fix: Correct the handicap effective dates indicated during the transition / "grey" period. Previously, it was showing the new / "future" handicap rollover dates; now it's showing the previous period that has just passed.
- Fix: Correct the handicap effective dates indicated during the transition / "grey" period. Previously, it was showing the new / "future" handicap rollover dates; now it's showing the previous period that has just passed.
- Fix: #4528: Update the licence (I believe update of this file was missed during the time all the cute editor licence files were updated on April 19 2013)
- Mod: #4508: Slice some space off the invoice header to try and make Whangaparaoa's invoices fit on a single page with all their extra content.
- Add: Primary key for Settings table.
- Mod: NZ Golf gave an updated Choice Hotels logo with transparent background (the former had white background).
- Fix: Added "has_prod ng" CSS class name to the Cart field wrapper. Having this allows it to be hidden when the club doesn't have the NG product (like what was done in the Cart fields in Settings/Settings.aspx)
- Fix: Corrected the CategoryId value in the redirect URL (after creating a new category)
- Fix: Clubs can't add new categories because instead of using the Add Category sp, we re using the Update Category method / sp. This is basically putting back the old code that was replaced in Revision ID 22269; but I've just added the IsCartIncluded parameter (also correspondingly updated api_AddCategory).
- Fix: In Live, clubs can't add new categories because instead of using the Add Category sp, we're using the Update method / sp. (TabCategories.aspx.cs) Fix: Added IsCartIncluded in api_AddCategory, as this was also recently added in the api_UpdateCategory sp.
- Mod: Updated the Hertz link (as advised by Hertz)
- Mod: New images for the rotating banner. Remove the leaderboard widget from the home page.
- Mod: Update the ticket details for this upcoming years event.
- Fix: Fix for dev build. Add checking if Region ID and Role ID exist before using them.
- REINTEGRATED UF#21 Golflink Handicap Report
- Add: Script that inserts a new association, user security, password records for Southern Country Golf Challenge.
- Mod: Added a few more controls / inserts, update the location of the responsive controls
- Mod: Moved the terraces 3 responsive controls to its own folder so they can be used flexibly / in other templates. It's safe to move them now because we're not using terraces3 at all yet in production.
- Mod: Rename report name to "Direct Debit Member List" report
- Mod: Rename report name to "Direct Debit Member List" report Mod: Add link to the Invoice ID
- Add: Release notes for Monday.
- Add: Master pin for the kiosk - 2385 will let you into any kiosk.
- Mod: Kiosk PIN - modified the keypad so that pin entry is masked with *'s.
- Mod: #4214: Direct Debit Report: Updated the CSS class name of the Preview and View in Excel buttons so they could have the 50px height
- Add: #4214: Subs Direct Debit Report
- Fix: Ok, apparently not - it just existed on Aus Staging for some reason.
- Fix: This should have been an ALTER as the proc already exists.
- Fix: Renamed Carts SQL scripts to be in sequence.
- Mod:Mod: Updated the DotGolf logo to the new one.
- Mod: Updated the DotGolf logo to the new one.
- Mod: Add "Remember Me" checkbox to the Tee Booking login page. Mod: SearchClubDay.aspx: Set a minimum height for the table (so that the boxes will be properly shown even if there's no tee booking slots available in the given date range; it used to look collapsed before).
- Fix: #4474: When creating a new non-affiliated record there was no check being done to see if the requested central member code was already in use (by another non-affiliate or affiliated member).
- Fix: #4278: When bringing back a resigned NonAffiliate record by uploading an NZGA.TXT file, the upload crashes because of the business logic check in Passport.NonAffiliate which filters out deleted records.  The result is that the NonAffiliate property is NULL and that the CentralMemberCode field cannot be read.
- Mod: Added back button mapping for the "enter-pin" page
- Fix: #4464: Add the missing "Stbfd" label / tick (check mark) next to "Net". This is ticked when the competition is a Stableford one.
- REINTEGRATED CARTS - Merged revision(s) 22067-22267 from Branches/Trunk.2015-11-20.carts: Add: Commits previously done against Trunk but reverted due to QA issues.  See email from Matt. ........ Mod: Cart fixes for: - POG Group booking having cart fee selection, working cart slider (linked to number textbox), and working fee summary with cart fees displayed and totalled. - Green fee summary report now has a separate line for group booking cart fees total - POG booking cart fee select options have more descriptive label for distinct fee names - POG bubble shows cart fees on summary tag ........
- Mod: #4345: Add a "Go Back" button on the "Enter PIN" page
- Mod: Updated the KioskPin Setting Description
- Mod: #4345: If the club has a Kiosk PIN set up, ask for this before proceeding to the maintenance mode / advanced menu.
- Warehouse: Export is now 1 week
- Mod: #4345: Add new property KioskPin
- Mod: #4345: Add Kiosk PIN entry in the Kiosk Settings Add: Kiosk PIN help files
- Mod: #4345: If the club has a Kiosk PIN set up, ask for this before proceeding to the maintenance mode / advanced menu.
- Mod: Swapped Analytics and Reports links around, and removed Settings from org (still shown for DotGolf).
- Add: CWPermission_ClubWebsiteId index.
- Add: IX_CompetitionRound_RoundDate
- Add: IX_Setting_Name_DeletedDate for performance.
- Add: 2 indexes as per Rackspace recommendations - applied to NZ1 at 2015-12-09 13:32.
- Mod: Hide Analytics Dashboard for now as it contains test data.
- Add: Analytics menu item in the menu structure for GetMenuItems().
- Add: Warehouse API into AppUrlResolver.
- Add: Link for Analytics from Org, dependent on the ALX product (which only NZGolf has right now). Mod: Refactored all these references to Web.config files to obtain the URLs for our apps - now we have an AppUrlResolver class which takes care of this.  Right now it just reads from the Web.config files as before - but we can easily implement better logic in this class, in a central place, like I've done for Analytics.
- Fix: #4467: Regression caused by rev 21133.  When you click on the "CONFIRM PAYMENT" button (if you were booked into a multi payment booking and you have to pay to confirm), a null reference exception was thrown when you were player 3 or 4 (if player 1 was the guy that booked you).
- Fix: #4263: The Eves logo was disappearing from the 5CC leaderboard when they have their custom stylesheet selected.  This is a perfect example of why I hate UpdatePanels so much :(  My fix is a hack in itself, but we'll be removing it when we get the hybrid working.  At least that's what I tell myself to feel better about this commit.
- Mod: Tournament site: changes related to responsiveness / CSS; fix login; add logo to the menu and contact control
- Mod: Ask the mobile redirect question only if the device is a phone (exclude tablets)
- Mod: Ask the mobile redirect question only if the device is a phone (exclude tablets)
- Mod: Add loading of the Association's Region and Region ID
- Mod: Tournament site: changes related to responsiveness / CSS; make editing of content work
- Mod: Add Association - to handle association sites
- Fix: Swapped OLD and NEW around in the _Log entries.
- Mod: Removed NZE reference
- Mod: Change the new wa_GetMemberHandicapIndex over to use the new one. Still going to do comparisons, just in case we need to recover people affected inadvertently.
- Mod: Change the new wa_GetMemberHandicapIndex over to use the new one. Still going to do comparisons, just in case we need to recover people affected inadvertently.
- Mod: Change the new wa_GetMemberHandicapIndex over to use the new one. Still going to do comparisons, just in case we need to recover people affected inadvertently.
- Fix: When you have a competition off All Markers, you can't change the marker away from the first one in the list when printing cards from the POG.  Technically you can change the marker, but the moment you tick the competition the marker is reset to the first one in the list that matches the comp.
- Fix: When a user quickly does a double click, the quantity becomes 2. Added script to prevent this from occurring.
- Fix: Markers were not showing in the Marker Defaults screen if they expire today.
- Fix: Markers were not showing in the Marker Defaults screen if they expire today.
- Mod: Tournament site: Terraces3: changes related to responsiveness / CSS; allow CWSuperAdmin to edit the site content
- Add: ClubCMS: js for mobile detect and css for terraces3
- Fix: Search clubs and membership offers: fix search by region (Bay of Plenty)
- Add: TabMemberScoringHistory.aspx: If you put ?no-highlight=true on the URL we won't highlight the member scoring history for DotGolf.  Useful for screenshots.
- Add: Rainbow colours for the Score History page (DotGolf Only)
- Fix: #4446: Rounding error in instalments generator caused by unexpected int datatype on @TotalAmount parameter (as it was being passed typeless (null), Dapper assumed it was an int)
- Mod: Doing some checks before updating the core method wa_GetMemberHandicapIndex. Writing to a log to double check the new logic.
- Fix: Analytics: When the warehouse has not been built today, the YTD report returned no data (due to dim_Date not having a row in there for the current date) Fix: Analytics: When there is no report data the chart crashed, leaving the UI in a broken state.
- Add: #4447: ASB direct debit export format as per https://fnb.asb.co.nz/content/fnb_help/pdf/fnb_import_export_guide.pdf.
- Add: Styles for club id 180
- Mod: Tournament site: changes related to responsiveness / CSS
- Add: Terrace 3 Login control (not responsive yet)
- Fix: GetClubDetails: Association IDs are from 1000 to 1360.
- Fix: Accommodate Club ID's for Aus
- Add: This script adds new contact columns to the Association table (for their website e.g. tournament)
- Mod: Reverted this script as the calculation had a few issues.
- Add: This script inserts a new record into CWLayout (terraces3). Also inserts terraces3 controls into CWControl, and their properties into CWControlProperty.
- Mod: Terraces3 template: remove sample content
- Mod: Tournament site: changes related to responsiveness / CSS; added UContent control
- Add: Styles for association id 1019
- Add: Favicon for association id 1019
- Mod: Tournament site: changes related to responsiveness / CSS
- REVERT: accidental fix committed rev 22150
- REVERT: accidental fix committed.
- Add: Styles for association id 1019
- Mod: Tournament site: changes related to responsiveness / CSS; added link button on the slideshow.
- Fix: Testing issue: When you have an unpaid invoice without instalments, then select a payment frequency and instalments are generated (from preview), the Frequency box goes disabled and you can't change your mind - forcing a refresh of the page.
- Mod: #4442: Added BNZ direct debit export file generator.
- Mod: Changed the @PlayDate column. After testing, I found that if I tried to enter a score on 25-03-2015 for MemberId=346999, this was giving me an incorrect handicap. Running some more tests with the new change now.
- Mod: Tournament site: changes related to responsiveness / CSS. Use birthday picker js for the Date of Birth field.
- Mod: Missed some other references to 112 in the SP.
- Fix: While fixing the other bug (Rev ID 22184), I found another bug on removing / deleting of guests. I've update the query in CheckForGuestRegistrations so that the PassportId is retrieved, as this ID is used in deleting a guest.
- Fix: To correctly get the value of the checkbox (i.e. when checked, shows the guest fields), I've updated attr('checked') to prop('checked').
- Mod: OnPar - added the control settings for the hole by hole and hole details.
- Mod: OnPar - added the control settings for the hole by hole and hole details.
- Mod: When doing process renewals, we want to specifically check for the IsBaseSub CategoryItem when renewing. Before, if there was any item that spanned the period, the member was not getting renewed.
- Fix: If there were any unbilled items, it was multiplying the value by the number of renewal items (incorrectly) Added in the fix from revision 22178 in this area too See http://live.golf.co.nz/TabMember.aspx?MemberId=496711 processid = '36A436E5-6411-4C61-8321-D95D8F6D3A6B'
- Mod: Tournament site: changes related to responsiveness / CSS. Make the Full Leaderboard link dynamic.
- Fix: Prevent duplicate clubitem from showing in the "summary item popup" of the process renewals page. It was being returned from both parts of the union.
- Mod: Additional changes for the hole details admin mode.
- Mod: Tournament site: changes related to responsiveness / CSS
- Add: Terraces3: News Article control
- Analytics: Fix: Player age, affiliate and member filters all work now.
- Mod: Log date and time into log files, same as console.
- Fix: Duplicate object name (Markers).
- Mod: Initial commit of OnPar requirements. - created hole by hole list, hole details, and sponsor controls.
- Mod: Initial commit of OnPar requirements. - created hole by hole list, hole details, and sponsor controls.
- Mod: Tournament site: changes related to responsiveness / CSS; trim search text
- Mod: Tournament site: changes related to responsiveness / CSS; form validation script updates
- Mod: Tournament site: changes related to responsiveness / CSS
- --REMOVED THIS CONDITION because now Auckland is ok for us to email their members about bookings: --and (c.ClubId not in (112) or @Country = 'AU')
- Mod: Commit this section back into trunk to make it visible.
- Mod: THIS NEEDS TO BE TESTED VERY WELL BEFORE GOING LIVE!!!
- Fix: The public site was no longer showing any 18 hole men for Akarana, because the start and end dates had no time component for getdate() = 2015-12-02 13:48
- Mod: Find club and membership query: update region query as we're only now showing the region names from CGRegion table.
- Mod: Find club and membership query: update region id query as we're only now showing the region names from CGRegion table.
- Mod: Tournament registration control: remove redundant labels
- Mod: Tournament site: changes related to responsiveness / CSS
- Mod: Tournament site: changes related to responsiveness / CSS Mod: Image slideshow control: update the upload path
- Mod: Tournament site: changes related to responsiveness / CSS
- Mod: Change the report to include the ph number. There was an existing blank address 4 field that I used.
- Fix: Correct the Choice hotel logo
- Fix: Bulk Timesheet generation, club default release times were not applied if the template had previously entered release times, and then set to Use Club Defaults.
- Add: Tournament site - images used for dev / test only
- Mod: Tournament site - style updates; add responsive control
- Mod: #4267: Address labels adjusted to fit better on Avery L7160 label sheets.  Also something got messed up causing the labels to go to a new page after only 6 rows - should have 7 on a page.
- Fix: #4347: Show "Are you a member" question if kiosk only has card printing enabled AND the club has EFTPOS at the kiosk.  Otherwise we stick with the current behaviour.
- Mod: I think we should not be showing any 5Eve newsletter, and other association newsletter subscription types in golf.co.nz. Only ones for their club (if they are a member) and the associationid 1000
- Mod: Add CSS to hide fixes for Aus - only show them for NZ.
- Add: Packages
- Add: Packages
- Mod: WarehouseBuilder: Included DotGolf.Shared as we have too many dependencies lying around.
- Fix: This fixs prevents the user from opening the booking editor in the POG, and without doing anything just holding down the enter key. This posts the btnLoadMessages for some weird reason (update panel problem??) - and because tbSlotDate field was empty it was throwing an exception which caused very high CPU load on the server. We probably need to replace this update panel at some stage too to prevent the posts from continuing to happen, because they shouldn't really be posting here.
- Mod: Analytics: Only build views in debug mode so that we can see syntax errors.  Unfortunately this doesn't work on our build server so we can't do this in Release mode.
- Mod: She Loves Golf - add / link ambassador photos to their respective youtube videos
- Mod: terraces3 - slideshow style updates - to accommodate banner slideshows as well
- Mod: terraces3 - footer menu and contact details style update
- Mod: terraces_mobile menu control - added a target (OpenInNewWindow) to the menu links
- Mod: GetMainCategories - update query to use OpenInNewWindow Mod: GetClubDetails - update query to accommodate association (tournament) sites
- Add: This scripts adds a new column "OpenInNewWindow" to CWMenu table
- Mod: Updated GetParentClubId method to accommodate tournament / association sites
- Mod: Terraces3 style updates
- Add: Terraces 3 responsive controls
- Mod: Terraces3 - updated the js and css paths
- Mod: Moved the bootstrap js and css to the project's js and css folders. Add: New Recent Articles control for terraces3
- Mod: LeaderBoardWidget - responsive layout
- Add: Terraces 3 template (responsive)
- Add: Analytics initial commit - Rounds By Date report is working (proof of concept)
- Mod: GenerateBulkStatementEmailAndPrintJob - modify order by clause -- order by isnull(Date_Resigned, '2050-01-01') desc
- Mod: Invoice Report - added colon to "Total Overdue:" label. Hide this label if there's no overdue amount.
- Fix: #4398: When editing an invoice and adding a payment schedule, instalments are not created, and money previously paid on the invoice was not applied to the instalments.
- Mod: GenerateBulkStatementEmailAndPrintJob - added ClubId in the ClubMember Email query condition
- Mod: GenerateBulkStatementEmailAndPrintJob - update how the Email is queried from ClubMember
- Fix: Handle null Total Overdue Amount
- Mod: Added Total Overdue Amount above the Total Due. Added "Overdue" label beside instalment records that are Overdue (in the "Instalments payable for this invoice" section)
- Mod: Warehouse: Increased timeout to 4 hours as Azure sucks :(
- Fix: #4272 (ported this fix to book.golf): When cancelling a booking, the system also inadvertently saved any changes that you have made to the booking, eg. adding another player etc.  We now reload the booking fresh from the database so we can be sure that the only change applied is the cancellation of the selected players (either ME or ALL).
- Fix: #4272 (ported this fix to ClubCMS): When cancelling a booking, the system also inadvertently saved any changes that you have made to the booking, eg. adding another player etc.  We now reload the booking fresh from the database so we can be sure that the only change applied is the cancellation of the selected players (either ME or ALL).
- Fix: #4272 2 of 2: When cancelling a booking, the system also inadvertently saved any changes that you have made to the booking, eg. adding another player etc.  We now reload the booking fresh from the database so we can be sure that the only change applied is the cancellation of the selected players (either ME or ALL).
- Fix: #4272 1 of 2: Refactored code so that you can't "sort-of" cancel your booking by jumping to the ConfirmNonPayment.aspx page.  By doing this in a browser (while you think you're working with more than a single booking), you were able to skip part of the cancellation process (the part in ConfirmCancelBooking.aspx), and that left the data in an inconsistent state.  By moving all the cancellation code into ConfirmNonPayment.aspx we can be sure that the whole process is always run in its entirety.
- Mod: btnContinue_Click - removed unused variables; used variables for the dates.
- Mod: GenerateStatmentEmailForMember - added comma after "Dear"; added comma and a line break after "Regards"
- Mod: Changed the link of the speed test to be pointed to dotgolf's speed test.
- Mod: Show a list of queried records / statements so that the user can choose which specific statements to email or print. Previously, we were just displaying a summary of the query--e.g. 7 statements were found to email--and the user just has the option to print / email all.
- Mod: Made the subs autoresign proc automatic so I don't have to intervene and do these manually anymore.
- Fix: Correct the case condition for "60 days or older" from 5 to 6
- Fix: WarehouseBuilder: Error grokking "last" FromDate. Add: Auto recalc statistics after bulk loading stage tables. Fix: API: Catch connection errors and emit those to the client.
- Mod: Added a speed test link.
- Fix: Turns out there are many uploaded files with double dots in the name, eg. 20.....jpg.  Changed this check so that it also checks for a backslash, eg. ..\ when doing the security check.
- Mod: Add diagnostic error message so I can see the offending path.
- REVERTED: UF#157 Safari issue reverted as a solution could not be found. MP deciding to wait for API
- Add: Initial script for DW_NZ1.
- Add: Restart marker - from this point onwards we'll just use a newly generated script from DW_NZ1 in dev.
- Add: Missing DW schema scripts
- Mod: Refactored IndividualSubsByCategoryReport so that Grace can get the dataset out directly for use in the email statements code she is writing. Add: CurrentAndOlder, Days30AndOlder, Days60AndOlder options as those will be needed too.
- Mod: Just added this to ensure we only do this free reply and reduction of free txt messages for PUSH notifications...
- Mod: Modify the AddTXTLog SP to accommodate for the txt message duplicate issue we had. We can revert when the total in this new table [TBTXTMessageIssue] is reduced to 0.
- Mod: Add checking for null control id before inserting a new control property
- Fix: UF#163 Competition Prize result added column for Handicap, for special prizes empty handicap data had to be handled.
- Mod: Tournament registration terms and conditions - remove unused code
- Mod: Tournament Registration - create handler for the terms and conditions link
- Mod: Tournament Player control - remove view profile link
- Mod: Tournament site css and js. Updated the js in the score details control (in the leaderboard). Add: New images based on the TournamentCMS solution
- Mod: Put back "System.Net.ServicePointManager.Expect100Continue = False" - This should allow the request and response to be sent and parsed correctly.
- Add: This script inserts tournament controls into CWControl table
- Mod: Tournament leaderboard control - display score details
- Mod: Trackerlog will now start throwing away page hits more than 4 hours old if it can't establish a connection to the trackerlog database.  This was added so that we're safe when we move trackerlog to its new home in the DotGolf Offices, and we're offline for more than just a few minutes.
- Mod: Temporarily hide the clubsetup form.
- Fix: Removed the added try-catch per code review. "...the catch on line 859 will eat all the exceptions, because there is no throw in the same block.  So the rest of the system will not see any exceptions and the email will not be marked as Failed (line 867)."
- Mod: Rename table from ClubWebsiteTournamentCompetition to CWTournamentCompetition
- Mod: Tournament site: Rename db table from ClubWebsiteTournamentCompetition to CWTournamentCompetition
- Mod: Tournament site: Modify the "tournament" folder name to "_tournament" to follow the existing naming convention (i.e. the folder names without the "_" are template folders).
- Fix: Tournament registration - update how the checkbox value is being read (from "attr" to "prop")
- Mod: Deletes the cookie when logging out.
- Fix: The cookie is not being created when redirected from SSO.
- Mod: She Loves Golf video
- Mod: UF#163 ClubCMS competition and prize results column for Handicap - Text aligned right
- Fix: Session expires even when creating a draft email. Added a 'keep alive' function that refreshes the session.
- Add: Tournament registration confirmation control - handles result from DPS Mod: Tournament registration control - update DPS, URL for the confirmation page
- Merged revision(s) 21820 from Branches/Trunk.2015-10-21.unfuddle-141.stableford-scratch-4bbb-comp: Add: Script to set up new competition types as requested by Micropower in Unfuddle #141 - [92059] Stableford Scratch 4BBB comp ........
- Merged revision(s) 19591, 19607, 19666, 21505, 21774, 22007 from Branches/Trunk.2015-01-08.ball-prize-ledger: Add: Balls to prize posting to ledger. ........ Mod: Ball prize ledger service update. ........ Mod: Post ball prizes - Added ledger description into the narration field for the ledger transaction. ........ Add: Balls ledger integration. - 2 new club settings for balls currency id, and balls expiry period in days - Post prizes now processing Balls prizes, and posts them to member accounts with the balls currency ........ Fix: MP settings for ClubLocationId fails to save if the initial string value is null. Defaults now to empty string. ........ Mod: MP balls integration. Description format passed to balls ledger was requested to be changed by MP. New format "Type - Prize Type - Prize" ........
- Mod: She Loves Golf css
- Mod: Modify WhyLoveGolf page to add the She Loves Golf video (replacing the Go Blackcaps video)
- Mod: Changes the recipients list limit to 500 from 200. Fix: When adding recipients, duplicate emails are added.
- Mod: Tournament site - minor style update
- Add: Tournament registration payment images Mod: Tournament registration controls
- Fix: Don't let the registration form enter someone if they have already been entered.  This caused a problem where a registration row would revert back to ManuallyEntered, which causes the financial reports to go off because of manual registrations.
- Mod: Updated NSGC style - for the dev site only. (This isn't used anymore in prod, as we've upgraded NSGC to the new template.) Add: Added styles for 1019 (Association ID) - for testing the tournament site
- Mod: Renamed Registration.ascx to TournamentRegistration.ascx; Add: RegistrationPayment.ascx
- Fix: #4363: Fix for item #4 on this ticket--rephrase: "image on the right" to "image below"
- Mod:
- Fix: Corrected the DotGolf logo path to properly load it on all pages from images/sponsors/dotgolf-grey.png to /images/sponsors/dotgolf-grey.png
- Mod: Update the Love Golf favicon from heart to golf clubs (from the LG logo), as requested by Jan.
- Add: Release notes.
- Mod: BindClubWebsiteCombo - The query now returns both club and association websites (modified the query to left join with Club and Association, as we're now loading tournament sites into ClubCMS)
- Fix: #4324: Allow the user to select a date and jump to that date. Code was based on Public > TeeBooking > SearchClubDay
- Add: This script creates the ClubWebsiteTournamentCompetition table to be used in the tournament sites in ClubCMS
- Mod: Modify a few queries to CWClubWebsite to include a left join with Association and Club tables e.g. to get the Name and ID.
- Add: This script will - Add a new column CWClubWebsite.AssociationId - Alter the column CWClubWebsite.ClubId to make it nullable
- Add: Files (js, css, ascx, images) used for the tournament site - as we are integrating the tournament controls to this project
- Warehouse: Added dim_Category. Add: NZCRDataSID to fact_ScoreCard. Add: Model updated for warehouse API
- Warehouse: Fix: Logging messages were incorrect if second table in a 3 table parcel was empty. Fix: If second table in a 3 table parcel was empty, the third table would get ignored and would not be imported! Add: IsPlayerMemberOfClub, IsPlayerAffiliated columns to fact_ScoreCard and fact_Score. Add: Indexes into dim_CMember build to speed it up.
- Fix: Added an exception log in the bmw email sender.
- Mod: Added the checking for emailid is null in the recipients table so we can resnd the same email compose when it sending failed.
- Add: Warehouse: Build for dim_CMember! Fix: Bug where dim_Club rows would keep getting updated every build. Fix: Bug where dim_Course rows would keep getting updated every build. Add: Build for dim_Member Fix: Bug where dim_Region rows would keep getting updated every build. Add: MemberSID and ClubSID to fact_Score. Add: MemberSID and ClubSID to fact_ScoreCard. Fix: Crashbug with log filename format.
- Fix: Revert Revision 21968. This page should be accessible by the public.
- Fix: Optimized the bwm bulk email sender. It was causing high cpu usage.
- Mod: When someone is no longer an affiliate (resigned), then we need to link to the non affiliateID.
- Fix: Added a condition to check for the ControlID. This was captured in the build (test).
- Mod: Added the BMW EDM sender.
- Mod: Added the BMW EDM sender.
- Fix: Oops, broke the build.
- Add: Ability to log console output to a file with a config file option. Add: dim_Member, dim_NZCRData and fact_Score builds. Add: Ability to have a custom named dateId column on a fact table (in the purge step) Add: More logging. Add: stage_NZCRData build. Add: Ability to specify multiple configuration files on the command line (so you can do an export-import in one run - useful for unattended dev builds)
- Warehouse builder: Mod: Improved logging and inline filenames Mod: Don't fail the whole import if a single filestream fails to load - the data might be incomplete, fair enough, but we'll want to continue running in case we are testing stuff. Add: New stage tables: stage_CMember, stage_CMemberHistory, stage_MemberAudit and stage_NZGALevy.  The stage_Member and stage_MemberHistory tables were dropped, updated and recreated.
- Add: Warehouse: Member history dimension: Modified to pull data from the warehouse stage_ tables instead of OLTP.
- Add: Warehouse: Member history dimension: Very accurate now, within single members 2013-2015 when compared to the levy snapshots.
- Add: Warehouse: Member history dimension: Added ExpiryDate column.
- Add: Warehouse: Member history dimension: Accuracy improved by adding CMember.StartDate into the mix.
- Add: Warehouse: Initial script to calculate member history dimension.
- Add: This script inserts a new control property "IsAutoRedirect" to the "Mobile Redirect" Control. If true, the user will automatically be redirected to the mobile site (when on a mobile device).
- Fix: Just saw that the filename for the css specified in the code is incorrect; Corrected it from "uslideshow.css" to "uquicklink.css". This is just an optional css for club-specific styles on the uquicklink control.
- Fix: #4218 When editing a non-affiliated B9 score, the score entry page came up with 0 gross scores for all the holes.
- Mod: Check deleteddate's for group bookings. Change Is Null check which did not seem correct with the left join.
- Warehouse mother-of-all commits: Mod: We can now handle slowly changing dimensions (SCDs).  This is accomplished by adding the following fields onto each SCD dimension table:
- Fix: Oops, left some stuff commented out.
- Add: ClubProductsHistory table to track when clubs get products (or when they are removed).  I've done a rudimentary insert/update into this table to populate it with some initial values, and also went back to estimate the CP product so that we can tell when clubs got card printing (for the warehouse project).
- Mod: This was not taking into account cyclical categories when determining if they needed to be displayed to the user.
- Add: UF#163 Competition Prize result added column for Handicap
- Add: UF#163 ClubCMS competition and prize results added column for Handicap
- Mod: Updated the app.config because of the binding changes.
- Mod: wa_TwoUnderClub_MemberEmail - Added the DotGolf logo beside the NZ Golf logo
- Fix: Renamed the DeleteDate column in CWMailingList to DeletedDate.
- Fix: Changed the column name from DeleteDate to DeletedDate.
- Add: Release notes.
- Mod: Updated the modica service reference.
- Mod: Bulk Email: Update the cursor style (pointer) for the grey button (cancel button)
- Mod: Bulk Email: Correct the message shown when the user is trying to save an email but there's 1) an open article being edited, or 2) a new article is being composed and not saved
- Fix: Public: Show orphan scores (like how it is in Live > TabMemberScores) - CSS update - have a blue dot indicator for the orphan scores - Correct the CourseHandicap for orphan scores
- Fix: If the user is not logged in, and this page is directly accessed, then redirect to the Login page. Previously, it was throwing an error.
- Fix: Public: Show orphan scores (like how it is in Live > TabMemberScores) - Have a blue dot indicator for the orphan scores
- Mod: Club Setup Request (for MP) - Added three fields: Required to be setup by date, Estimated install date, Notes
- Mod: Bulk Email - Rename button ID from btnSaveArticle to btnUpdateArticle - to avoid confusion - Hide "Add Article" button when editing an article
- Mod: Bulk Email - Update the message that shows when there is an unsaved article during saving of email.
- Fix: Added deletedate column so we can handle the deletion of mailing list.
- Fix: Mailing List updates based on testing. • When I add my first mailing list, it is disabled and I cannot do anything with it? - there was a bug in the selection of dropdownlist • Is there the schema for deleting a mailing list (e.g. is there a “DeletedDate” column)? - done adding
- Fix: Latest proc was not used for the first below mod, now is... Fix: #119683 Opening an eclectic with many rounds (this case had 91) caused a timeout running this proc. One tweak (credit DH) took the proc from 40+ secs to sub sec.
- Mod: Black to black baby!!!
- Mod: She Loves Golf - include past events in the search results (as long as they're tagged as Active / "Show in Love Golf?")
- Add: She Loves Golf - new header
- Mod: She Loves Golf - Instagram feed update
- Mod: She Loves Golf - adjust campaign image height
- Mod: She Loves Golf - update the ordering of offers in the search result (Jan requested that SNAG be put on top of the list)
- Fix: Updates based on code review. 1. It is possible for the user to create duplicate mailing lists of the same name.  Can we stop this via validation please? - added 2. When entering a really long mailing list name, I can produce an error: Can you put a MAXLENGTH on the input box please? - added a 60 max length 3. When I’ve created a new mailing list, can it be selected by default? - selected after postback
- Add: UF#162 Timesheet edit "Set all times read only" tick box, which simply unticks all "Book on internet" and "Book on Kiosk" tick boxes. Effectively making them all "read only".
- Mod: She Loves Golf - Add a partner: Sport NZ
- #9999 Testing Freshdesk ticket comments.
- #9999 Testing Freshdesk ticket comments.
- #9999 Testing Freshdesk ticket comments.
- Testing Freshdesk ticket comments.
- Fix: #4213: Changed to a DISTINCT clause to help the swingers issue - the NOT EXISTS() way was causing issues with normal 4bbb multi round competitions.
- Fix: Reversed rev 21831 (#4213) as it caused a regression with normal 4bbb multiround competitions (this is to fix #4260). I will do another commit shortly to address #4213.
- Mod: Love Golf Promotional Campaign - update help text
- Mod: Love Golf - Allow NZ Golf "club" to view offers from all clubs in PromotionalCampaignList.aspx (without the add and edit functionality) - Rephrase "Show in Love Golf"
- Mod: Bulk Email - update the style of Cancel Edit button (from green to grey)
- Mod: Bulk Email - Prompt the user if there's an "open" article. If the user edits an article, then the user must click "Save Article" or "Cancel Edit" before saving the email itself.
- Mod: Suppress compiler warnings about missing XML comments.
- Fix: #119683 Opening an eclectic with many rounds (this case had 91) caused a timeout running this proc. One tweak (credit DH) took the proc from 40+ secs to sub sec.
- Mod: Love Golf - Rename "Enable?" to "Show on Love Golf?"
- Mod: #119667 related. An error occurring in GolfLinks VisitorDetailsDownload method when the parameter for GL numbers was empty, was causing the preprint of cards to fail. This occurs for team cards. So to accommodate for team cards, if there are no GL numbers to lookup, then VisitorDetailsDownload is not called. NOTE, Golflink seems to now handle no GL numbers passed and returns a friendly message rather than an server error. But this mod still applies as there is no need to call GolfLink if there are no GL numbers.
- Mod: LoveGolf - just added script type "text/javascript"
- Mod: LoveGolf - Club Information - btnSave - put back updating of descriptions in the LGCampaign as this is being used to get the percentage of LoveGolf completion. We can remove this when LGCampaign is not anymore used in LoveGolf.
- Add: She Loves Golf - Instagram green icon
- Add: Love Golf - men's tee image
- Mod: She Loves Golf - remove unnecessary code
- Mod: She Loves Golf - use juicer js without jquery (causes conflict in the interest registration)
- Mod: She Loves Golf - comment trace
- Mod: Love Golf - add LoveGolf Instagram on top right icons, bottom left icons, and in the social tiles
- Mod: She Loves Golf - rename "program" to "programme"
- Add: Love Golf - Add new images (instagram), shop (t-shirts) - Add new control ucShopTiles
- Mod: She Loves Golf - Rename some labels i.e. "Enabled" to "Show on LoveGolf?"; "True/False" to "Yes/No" - Add note about maximum file size e.g. 3 MB
- Mod: Removed username+password from NonAffiliate search area in Adweb, replaced with a grid with all PassportCredentials.
- Fix: #4261: Credit note allocations that are deleted in Xero are now properly imported into DotGolf Live.  Before, credit was incorrectly getting stuck on member statements, with no way to delete said credit without voiding the credit note.
- Fix: Minor API XML documentation issues addressed. Mod: SearchSlots method now allows the caller to filter for only available-for-booking slots.
- Fix: Role insert script was in the wrong place, should be in CreateDB.sql as that runs before all the schema updates.
- Fix: Basic syntax error, argh.
- Mod: Trying to get this building on Dev1.
- Fix: Nuget packages fixes (Newtonsoft and NUnit)
- Add: Insert the SuperAdmin role (for tests).
- Mod: #4259: We can now edit scores more than 4 years ago.  This is done by detecting the exception that gets thrown when the timezone conversion fails - and if this happens we re-calculate the timezone data back from the year 2000 and send that up to the server, before trying to edit the score again.
- Fix: Test scripts failed because AssociationId=1000 does not exist in test databases.
- Add: Initial version of DotGolf Analytics, copied and adapted from the DotGolf.BulkEmail project.
- Mod: Thought I should update this line in the source.
- Mod: #4257: Cleaned up Xero payment interface to speed it up and stop a single exception from terminating the whole export.
- Mod: She Loves Golf - Display the date/s of the offer
- Fix: She Loves Golf - List of offers from the same facility - Include offers with null end date (as long as they're tagged as active)
- Add/Mod: Add more She Loves Golf Partners
- Add: Directory for DotGolf.Analytics.
- Mod: She Loves Golf - change back the link to the search page
- Mod: She Loves Golf - Update link to partners page, as instructed by Jan
- Mod: She Loves Golf - updated the home banner image
- Mod: She Loves Golf - Remove "Save and Preview" button as suggested by Jan (users could just use the “Save” button and the available "View this offer in Love Golf")
- Fix: She Loves Golf search - include null End Dates (as this is optional)
- Mod: She Loves Golf - changes in text (based on comments from Jan)
- Mod: She Loves Golf - add link to the home banner going to the she loves golf search page
- Mod: Add Menu Item "Club Setup Request" under Setup
- Add: Connector: Ability to check for updates from the tray app menu.
- Fix: Extended the script to look up at the controlid prior to inserting.
- Mod: Added an ability to create new mailing list for clubs.
- Mod: #4180: If a card is unsigned you cannot rescan it, you have to back out and re-scan the whole batch of cards.  This mod adds a "rescan" button so the card in question can easily be signed and put through the scanner again.
- Mod: Connector - you can now pass ?fakescan=ask on the query string to have the kiosk ask you how many sides it needs to fake.  We need this to allow testing the card rescan function (to be committed next)
- Fix: File handle leak in Connector (the GC actually cleans this up, so it's not a leak as such - it just takes a while for the GC to get around to the cleanup, and while it's open housekeeping can't clean up these files)
- Mod: Inserts a new control property for the login bar for the terraces2 clubwebsite.
- Mod: Added the forgot password link in the top login bar.
- Fix: #4245: Casual golfer search should NOT show social members from other clubs.
- Ignored some stuff.
- Fix: Killed a few more compiler warnings.
- Fix: Got rid of approx 6,000 compiler warnings.  These warnings don't affect anyone, but they have been slowing down Visual Studio for me when I'm doing builds of DotGolf Live.  We had over 6,000 of them for every build before, now we only have 249.  I'll get rid of the rest over time.
- Fix: The anchor button doesn't have an image attached to it. I just added the imagename.
- Mod: Added the anchor in the cuteeditor toolbar.
- Add: Ability to submit tickets to FreshDesk instead of SmartSheet.  This needs the following app setting to be added to Web.config, otherwise we'll keep sending to Smartsheet:
- Fix: #4225: Hid redundant error message "Could not find current sub period.  Please check that the subscription year is configured properly." when setting a member to a category with subs disabled (such as LIFE).
- Fix: #4231: Regression caused by rev 21796 - cyclical category renewals amounts doubled up if multiple historical years set up in Category Items.
- Fix: #4229: Direct debit hash calculator was not removing non-numeric characters before slicing the account number up - unfortunately hyphens were included in member account numbers and this caused the calculation to get an incorrect total. Add: Test case using real data that was uploaded and accepted by ANZ.
- Mod: Club Setup Request Form (for Micropower) - Data entered on this form are emailed to Matt and David
- Mod: Added a few codes to bypass SSO in org and just use the usual login. http://<url>/loginv1.aspx?v=1.
- Mod: Just made it a bit easier to identify the refunded players in the list (rather than looking for $0 values)
- Mod: Updated Lydia's profile.
- Add: Release notes.
- Subs - Direct Debit Export Mod: Slowed down the progress bar as these Export calls will usually take longer than a second (2 minutes for 120 members - due to Xero API limits) Mod: Increased ScriptTimeout for the service call that does the Export. Add: "Please Wait" message to ask the user to wait.
- Mod: She Loves Golf - text and style update
- Mod: fncMatchReferenceToMemberId - also allow matching by the 7-digit membership code
- Mod: She Loves Golf - Update OtherOffersFromFacility to get offers that are active
- Mod: She Loves Golf - Update menu item "Find a Club" to "Play Golf"
- Mod: She Loves Golf - Update findaclub.aspx to search.aspx
- Fix: Missed a file.
- Add: Missing Dapper package.
- Mod: She Loves Golf - update text, images and styles
- Add: She Loves Golf new images
- Mod: Credit Notes Assignment - When searching for members, do not allow searching by Full Membership Number because this searches other clubs as well - Set AllowSearchingOtherClubsByFullMembershipNumber to false
- Mod: Credit Notes Assignment - style updates
- Mod: Credit Note Assignment - auto check the "CORRECT" checkbox after manually selecting a name
- Fix: #4209: Kiosk: If 2 players' cards were printed at the same time, for players playing different markers, and both players were entering into the same competition, the first player's competition entry would be ignored and they would not go into the competition.
- Mod: Someone with a pending handicap who ends up in the full Eclectic results causes an exception.  I have excluded Pending handicappers from this report.
- Fix: Problem where a ThreadPool unhandled exception would kill W3WP resulting in a serious performance hit while recycling.
- API Fix: A number of compiler warnings sorted out. Mod: Moved the authentication/authorisation calls into their own controller as they are not really tee booking related. Mod: Renamed controllers to remove version number - it is probable that v2 calls will appear within the same controller when we have new versions of the APIs.
- Fix: Typo in filename.
- Fix: Typo in filename.
- API: Cleaned up some crufty stuff.
- API: Add: (untested): Endpoint to allow Micropower to get authenticated JWTs for their own members (by AltMemberId).
- API: Add: Basic member search endpoint.
- API: Add: Friends endpoint - retrieve list of friends and eligibility to book in a specified timeslot. Add: Validation to ensure waitlist methods are not called with incorrect IDs.
- Fix: #4213: Top Dog competition for Russley - total on the multi round results was incorrect for teams with swingers in them.  This is only a problem with multi round team results with swingers.  See ticket #4213 for full history.
- Fix: Added AltMemberId to select statement to avoid merge issue from Balls Integration
- Fix: Missed this schema change for the Vend prizes.
- API: Add: Get/Add/Update/Delete calls for waitlists.
- API: Mod: Improved error message when authentication fails.
- Mod: Schema change to accommodate posting of prizes to Vend.
- Mod: We were only checking the old SPAM club product, and some clubs only have the SPAM2 product enabled for their club.
- Mod: UF#157 Safari issue redirect fix. MP now need alternative solution. Safari redirect DISABLED for them to test in staging.
- API: Add: GetMOTD call - lets the client get the message of the day for any club and date. Mod: API tester app updated with a progress bar as the GetPassportToken call can sometimes take a few seconds (if the app pool is cold)
- Mod: Refactored to move GetMOTD() into TeebookingHelper (so I can call it from the API code).
- API: Add: ApplyBookingChanges call to let the client API create, edit and delete bookings.
- Add: fncMatchReferenceToMemberId - This is used by TabXeroAssignCreditNotes to match the Xero credit note to a Member ID based on the reference entered - The local member code AND the name must be in the reference.
- Mod: - Update function name from fnMatchReferenceToMemberId to fncMatchReferenceToMemberId - Add table labels "Imported from Xero" and "Find and Match in DotGolf" (inserted new top row using js)
- API: Add: Ability to lock and release timeslots from the API.
- API: Oops, missed a file.
- API: Add competitions endpoint (ability to pull a list of competitions for a specific club and date.
- API: Added more documentation for each method. Refactored to move GetRegionsResponse into DotGolf.Shared.
- Mod: Enabled XML documentation file for DotGolf.Shared as we need it for Swagger to work (DotGolf.API)
- API: Add: New SearchSlots endpoint to let the client search for tee times for a date, at a specific club. Mod: Refactored shared classes slightly, moved to have a single APIRoles static class so we don't get confused with all these strings lying around.
- API: Fix: Updated API tester app to use new GET request for getting a passport token.
- Mod: Warehouse will now download entire parcel files into memory before starting processing.  The streaming approach wasn't working unfortunately.
- Mod: Credit Note auto assignment to member - Uses dbo.fnMatchReferenceToMemberId, which matches the number found in the Reference value to
- Mod: Add new property "SearchLinkText" to allow customisation of the search member link text "Search..."
- Mod: Add css class name to hlChange div wrapper
- Mod: Added script that enables the corresponding "Correct" checkbox on the TabXeroAssignCreditNotes.aspx table
- Add: Custom checkbox images
- Fix: #4210: Show a warning if the user does not have suitable Sub Periods set up when they run Process Renewals for periodic categories.
- Fix: Release notes were visible months after they have expired due to the way we publish in /MIR mode (have been doing this for more than a year).  Basically file createdates get updated on every publish, so they'll stay current.
- Mod: Changed the timeout for release notes to 3 weeks, now that we have 2 week sprints.
- Add: Ability to select whether to send invoices through to Xero as Approved (Authorised) or Draft.  There is also a third option, Submitted, available from the API but I haven't included this in the combo as I don't see a need at present.  We could probably use this instead of draft as it seems to do the same thing?
- Mod: #4208 When a member changes category at renewal, if there are any items that are linked to the previous category that do not exist in the new category, don't re-bill these items.
- Mod: #4207 Expected Renewals report now uses the sub period start and end dates to display expected renewal and expiry dates if they cannot be calculated from the member record (eg. if they have no Base Subs item on record).
- Mod: #4206 Option to include disabled categories in the Expected Renewals report.
- Add: #4205 Sub Period combo to the Expected Membership Renewals report.
- Fix: Weird header bug.
- Fix: Auth test was breaking due to a previous change from POST to GET.
- Add: Test suite for DotGolf.API.
- API: Add: Simple tester app that will generate/retrieve Client and Passport JWT's for playing with the API.  It will also serve as an example of how to authenticate against the API. Mod: Allow some model fields to be null (when asked for by specifying [CheckModelForNull(false)] ) Add: New API endpoint to get bookings for the current user - GET /api/v1/teebooking/user-bookings.
- Fix: Broke DotGolf.Live build because of new DotGolf.API namespace.
- API: Add: Tester app that will generate client JWTs for ease of use. Mod: Moved the model classes into DotGolf.Shared so we can re-use them in other applications rather than baking our own every time the API is called. Add: SearchClubDay endpoint. Add: ModelState validation - very clean way to validate data coming into the API, thanks WebAPI.
- Fix: LoveGolf Exclude membership records (LGCampaign) that are linked to Categories of these types: 'DEC', 'UDEF', 'UNF', 'UDF9' Condition copied from Live > LoveGolf > CampaignList.aspx.cs > LoadGrid
- Fix: LoveGolf - Memberships When querying the memberships (from the LGCampaign table), exclude records which are linked to deleted Categories (Category.Deleted).
- Fix: Missing tx parameter caused blocking because we join to other tables now.
- Mod: Fix: MSC#117631 Matchplay indexes label size needed to be increase to fit "Matchplay strokes" in.
- Fix: When paying in the pos, all transactions have a null exception because of a null ClubFeeDetailId.
- Fix: The links to the club website in admin mode is not working because the user security id is not being checked.
- Fix: The links to the club website in admin mode is not working because the user security id is not being checked.
- Mod: Increased the timeout on ProcessResults as I was seeing an endless loop of a result failing to calculate because it took too long, only to be retried immediately after.
- Mod: Experimental code to try and reduce load on the database.  This mod will stop all rounds of a multiround competition being recalculated when entering the score for a single round.
- Mod: Love Golf - hide slideshow if there's no image displayed
- Mod: Don't bother recalculating competitions where there is no ResultClass set - i.e. eclectics!!  We don't do any recalculations for these, so why bother tying up the database?
- Fix: LoveGolf - updated the images mode from CMYK to RGB (reducing their sizes as well)
- Mod: UF#157 Safari issue redirect fix. MP now requires the return redirect to go to teeplusapiV2.aspx and not the original referrer teeplusapi2.aspx
- Mod: Styles updates
- Mod: Add Love Golf tiles. Show them when "clubs and memberships" tab is selected. Show the She Loves Golf tiles when the other tab is selected.
- Mod: Add in the Love Golf tiles
- Mod: Show She Loves Golf teaser image for now
- Mod: - Add She Loves Golf tiles to these specific pages - Style updates
- Mod: Revert to the original / main Love Golf image (Izzy and Lyds).
- Mod: Add She Loves Golf search bar and tiles controls
- Mod: Transferred the LoveGolf tiles to a separate control (ucLoveGolfTiles) instead of embedding to the master page so that we could add the tiles to specific pages.
- Add: ucBannerPromo control - this will be used for teasers / promo banner image so that ucBannerSlider will be used for the main Love Golf image (Izzy and Lyds)
- Add: LoveGolf controls - ucLoveGolfTiles, ucSearchBar, ucSheLovesGolfTiles
- Fix: Mod: UF#157 Safari issue redirect fix. MP required extra parameters needed to be passed from Snippet.aspx, not from Template.aspx (though they are passed through template.aspx)
- Fix: Love Golf - correct the search header text (previously, it's showing "clubs and memberships" instead of "she loves golf")
- Mod: Add $100 option in the Price dropdown
- Mod: Style updates
- Mod: Style updates
- Mod: Style updates
- Mod: She Loves Golf - style updates
- Mod: She Loves Golf - style updates
- Add: Small grey social media icons - used on the She Loves Golf Partners page
- Mod: Changed from an HttpModule to a DelegatingHandler for the authentication.  This works better when used in self hosted mode, so I can run my tests without depending on IIS working. Add: Authentication tests and sample code - the intention is to hand the tests over to whoever will be writing client code against our API.
- Fix: Warehouse endless loop problem.
- Performance mod: Added a priority field to RSResultQueue.  This field is used to prioritise tournament results ahead of club competitions (because tournaments will often use live scoring and are therefore more sensitive to result delays).  By default the RSResultQueue priority is 128, for tournaments that gets bumped to 192.
- Performance mod: Don't poke rows into RSResultQueue for single round competitions - these don't need a background recalc.
- Fix: When printing a non-affiliate card, the TXLine code crashes out because groupFeeOrGreenFeeLine is null.
- Mod: Added the previous and next button in the competition calendar non results view.
- Add: Dapper into DotGolf.Public.Pennants via NuGet.
- Add: packages folder.
- Add: oops, missed packages.config.
- Add: Dapper into DotGolf.ClubCMS via NuGet.
- Add: Dapper into LoveGolf via NuGet.
- Add: Dapper into DotGolf.Public.2012 via NuGet.
- Add: Dapper into DotGolf.Live via NuGet.
- Add: Dapper into DotGolf.Live.Association via NuGet.
- Mod: Moved Dapper package into subfolder of DotGolf.Shared.
- API: Add: New auth based on JWT and contents of the ThirdParty table - see README.TXT for more details. Add: Ability to get a passport based JWT from Client credentials. Add: Comments to README.TXT Mod: Moved to Nuget's version of Dapper rather than the embedded SqlMapper.cs file - which was outdated and didn't support Async.
- Fix: MSC#117631 Matchplay indexes needed to be displayed on the scorecard. The report was missing the fields.
- Fix: Performance issue found in a sql query.  It used a suboptimal plan due to a != join back to the same table - presumably the new CE is choking again.
- Mod: UF#157 Safari issue redirect fix. MP required extra parameters passed back and forth so the portal page would reopen correctly when redirected to.
- Mod: Max age validator xml changed to 120 years instead of 100
- Mod: She Loves Golf - campaign page style updates
- Mod: She Loves Golf ambassador photos
- Add: She Loves Golf ambassador photos
- Mod: Initial commit for the calendar mobile control.
- Mod: Enclosed the image banner in <div class="banner"> so that it'll have a good margin below (it's too close to the contents)
- Mod: Added styles for She Loves Golf
- Add: She Loves Golf New pages - info pages for She Loves Golf New images / replaced some with official images Social icons
- Fix: Endless loop retrying warehouse build.
- Fix: If nothing left to pay on an invoice, don't let the user change the payment frequency/instalments.
- Fix: If nothing left to pay on an invoice, don't let the user change the payment frequency/instalments.
- Mod: Added the prize credit in the members my account transactions table.
- Mod: Xero now supports multiple callback URLs, so this is an experiment to see if it'll automatically redirect back to live.staging.golf.co.nz after an Auth call.  Before testing this I changed our OAuth callback domain value (in developer.xero.com) to "live.golf.co.nz,live.staging.golf.co.nz" from the previous value "live.golf.co.nz".
- Fix: When an invoice has no instalments, you should be able to change the payment frequency.
- Mod: Changed the text loyalty balance to club credit. Fix: "Won’t it keep inserting duplicate rows into PWPageControlSetting every time you hit Save?  It doesn’t seem to check if the rows exist before inserting."
- Fix: Conflict error fix.
- Mod: Added the crediting of prize draw functionality to vend. Also, the Vend tab has been removed and just added the loyalty balance in the membership tab.
- Api: Added XML documentation.
- Api: Added authorization header to Swagger configuration.
- Add/Mod: LoveGolf - Replace the main / home banner with the She Loves Golf teaser image.
- Mod: Build XML documentation file in Release mode (for Swagger)
- Add: Apparently we need the packages folder for builds.
- API work to prepare for new Teebooking API.
- Fix: Accidentally broke the build while adding the Redis dependency to Live competition recalc.
- Fix: #4188: Improved the error text that is reported when the timezone offset cannot be calculated (due to a date that is too old).  This caused a very generic ORNS error when entering a score for back in 2007.
- Add: #4189 Locking mechanism to prevent more than a single T-Score competition recalc to happen concurrently.  The first user submitting their comp will get a recalculating message and progress bar, the second user will get "Waiting for available executor..." until the first process has finished, eg. http://snag.gy/nSJsn.jpg
- Warehouse: Fix: Delete source files after moving into storage. Mod: For ScoreCard export use MAXDOP 1 to try and reduce load on OLTP. Add: Production import/export files (these get overwritten on prod) Add: Automatic retry when a parcel fails to import/download.
- Warehouse: Add: "last" specifier now supported for From date.  This is tracked in the OLTP database in an automatically created table called DWParameter. Mod: Package group errors are recoverable - we will not fail, but try building the group again next run. Mod: DOS exit codes added for various situations.
- Fix: Default due date is +1month, not +1month-1day.
- Fix: "One or more instalments have payments against them, so payment schedule can no longer be changed" message was showing for invoices being created.
- Mod: In some cases the "Load items from category" link wasn't shown (eg. when a member has some sub items from a previous year)
- Fix: Member form didn't prompt user to save changes (before navigating off to Create Invoice) when items were modified previously.
- Mod: Warnings added for when instalment due dates are set outside a member's subscription period.
- Mod: Automatically populate the first and last instalment dates from the member's subscription dates.  This way the user doesn't have to work it out manually.
- Fix: Quarterly means every 3 months, not 4.  Oops...
- Fix: Don't allow the user to clear out the bank account number for a member who has outstanding direct debit instalments. Fix: Don't allow the user to set an invoice as direct debit if the member does not have a bank account number set.
- Mod: Added this so that it will work for clubs who have both cyclical categories and periodic categories.
- Fix: #4185: Needed to check for invoices, and also skipped a deleteddate check.
- Mod: To fix something David found in testing: The previous change works fine, but I think you should not show that message if the user has selected a specific category and that category is not in the list.
- Mod: Statement improved to add an invoice number link for receipts.  Example: http://snag.gy/Dy8hE.jpg
- Fix: #4190: Noticed that the GroupBookingID was being cleared off the newly inserted TXLine - probably not what we want.  Modified so that we keep the ID intact when updating lines.
- Fix: #4190: When finding the existing green fee for a card being printed from the kiosk (which already has a POG booking), we were not considering group fees, and therefore creating duplicate green fee TXLine records.  Changed so that GROUPFEE types are also considered when finding the green fee.
- Fix: Xero redirection for token auth was not happening when the calls were done from inside a webservice.  To get around this I now force the user to auth when they open up the invoice page (where we still have control over the browser).
- Mod: NL was not being shown on the handicap listing report for people over 40.4. However N was showing fine for N hole members.
- Fix: Error bubble should be using "error" class.
- Fix: Properly show error message when invoice creation fails.
- Fix: The twitter control is always reconfigured when the sidebar module is edited. I have added the default twitter settings and fixed the page control id property.
- Add: Warehouse: Documentation added to json configuration files.
- Mod: Aged Subscriptions report now takes instalment due dates into account when working out Current/+30/+60/Older.  This also works for the drill through reports.
- Mod: Cleaned up report names a little and improved CSS for a cleaner looking Reports page.
- Fix: Problem where duplicate "favourite" reports appear when you click the star next to a report name.
- Add: Subs: #4195: Ability to re-print a batch of invoices generated by Process Renewals.
- Mod: #4185 Subs: Include unbilled/uninvoiced items in the subs renewal preview, and also in the detail popup.  This more accurately reflects what the member will be invoiced after the process is run.
- Fix: Better UX when loading up the sub item popup (TabRenewals.aspx) - show an ajax progress bar until the popup appears.
- Fix: When downloading an attached file in composeV2, the file is corrupted because of a null value.
- Fix: #4191 Found a way to make CuteEditor use files that are stored outside the virtual application root.  This meant that I could get rid of the copying of the entire uploads/ folder every time a page is edited, which represents a major performance benefit.
- Fix: #4184 Don't consider RSResultEntryScore records where the RSResult row accidentally got linked with more than one RSScore record.  This caused a problem at Te Marua where they had a comp with 2 rounds on the same day and some scores got linked with more than one round in the same comp.  I don't know how this is possible through the UI, but this mod will exclude the bad records leaving only a single result, making the total correct.
- Mod: Order cards printed using Draw Card Printer utility to print by start tee, then time, so that all the Tee 1 cards get printed out, followed by all the Tee 10 cards.
- Fix: Applied Matt's sql from rev 21558 to all other areas where the same code is used.
- Fix: Test suite will now accept lowercase "GO" statements in SQL schema script batches.
- Fix: upper cased GO
- Fix: When creating an invoice, the "View in Xero" link should not be visible.
- Reintegrated Instalments and Direct Debit feature for Subscriptions.
- Mod: I have changed this slightly to try and always show categories that have no items, but do have LIVE members linked to those categories. Previously, if there was 1 category in the club with items setup in the new subscription year, the other categories would simply have been ignored, and never informed to the user. I think showing it to the user always is probably the better option. Also this was only previously looking at CMember, and I changed this to ClubMember to ensure we get non playing (non affiliate id's > 10000000) in the list.
- Mod: Only show the renewal list items that relate to the relevant subscription period. This is mainly because of Hastings, who have overlapping renewal periods. This links up the renewing categories to the new subscription period, and ignores any categories that relate to a different subscription period.
- Fix: The rounds halved is not displaying correctly because the the isreserved match was not taken into consideration.
- Fix: Added the AssetGroup.Scores to be able to display the scores menu.
- Fix: Because of the way the Performance Counter process naming works (eg. w3wp#23) I have to rebuild all counters when a worker process PID is added or removed.
- Mod: Added a way to reconcile these direct debits in Xero
- Fix: Terraces and terraces2 layout menus updated so visitors do not see menu items that are for members only
- Ignored some stuff
- Initial commit for MP BI datawarehouse export tool.
- 
- Ignored some stuff.
- Add: StatsDPerfMon code.
- Add: StatsDPerfMon service
- Mod: #4178: Calendar control now uses ajax to load competitions a month at a time, on demand.  We no longer load a year's worth of competitions into the control when the page loads.  This was done because clubs wanted to go back more than 1 year (and the default is to only load 1 year future and past).  This originated with Micropower ticket MSC116582.
- Mod: Changed to email me instead of actually running - this way I can leave it until one day we actually get one of these people, then I can check and manually run the proc.
- Fix: We were resigning everyone again - should check for only people with existing subs lines.
- Fix: Bug where pretty much all members at a club would get resigned (because most of them have EndDates in the past)
- Fix: Use wa_DeleteMember instead of api_DeleteMember.
- Fix: Don't let the user remove individual timeslots if there are group bookings on these slots.
- Fix: Possible null issues when checking for group bookings before deleting timeslots.  Also if you remove individual timeslots with group bookings on them, we should stop the user.
- Add: Ability to auto resign members at the end of their subscription.
- Fix: Safari iframe cookie issue with redirect fix TAKE 3
- Fix: Build error because Extensions.cs is not included in DotGolf.WarehouseBuilder.Common.
- Add: Some test code for the warehouse API.
- Mod: She Loves Golf - retain the selected search option / checkbox (Area or Region)
- Add: New A5_Short_200x148mm report to print on our messed up A5 cards at Nelson GC - they are 200mm long instead of 210mm (proper A5) so I had to shave a few millimetres off the bottom by moving everything up and closer together.
- Mod: Allow update-inserts when building stage tables.  This will be used when we build stage tables based on a ChangeDate.  Example included in the import/export json files part of this commit.
- Fix: Safari cookie issue mod to try and get the redirect to work with top.location so it doesn't get a cross domain error.
- Mod: ConfirmSlots player types allowed now has a flag for if visitors are allowed (visiting members). For Aus if visitors are allowed the dropdown item for "Search for member" changes to append "Golflink Visitors" so it is clear this is where you search for visitors GolfLink numbers
- Fix: #4186: North Shore raspberry pi leaderboard was booting up to a white blank screen.  This was because of the way auth is done on the RPi - no UserSecurity.
- Mod: Kiosk Add Player Visitor Golflink number search. Keypad control width increased to accommodate the 10 digit GL number more neatly.
- Mod: Warehouse: Put everything in bin\ rather than Release/Debug folders.
- Mod: Warehouse: Max runtime config setting (for safety) Mod: Warehouse: Updated Todo.
- Mod: Love Golf - Campaign page - styles update
- Mod: Love Golf - She Loves Golf - Add help images
- Add: Love Golf - She Loves Golf - Help images
- Mod: She Loves Golf - Get only offers / programs that are tagged as IsActive and hasn't ended yet.
- Mod: Love Golf - She Loves Golf - Add result summary e.g. "We've found 2 programs for you." just like in the current club search result.
- Mod: Warehouse: Removed unused packages.
- WAREHOUSE: Mod: Extended configuration file formats to allow for parcel based build of dimensions, fact tables and aggregates.  No more hardcoded build calls. Add: New API for querying data warehouse remotely via REST.  This isn't in its final resting place (hehe, see what I did there) yet, I'll move it to a more appropriate location soon.
- Mod: Terraces menubar needed to hide page menu items from visitors for pages that did not have guest access
- Mod: ToProperCase now uses app setting in config file "DisablePropercaseForRegex" and ignores setting words to proper case if the word matches the pattern from the app setting. This was built in as Aus requested because they had members complain if their name was like "Macdonald" and they did not want displayed "MacDonald".
- Mod: Warehouse: Implemented Query<T>() method, renamed namespace.
- Mod: Warehouse: Changed to single table response due to generic typing limitations.
- Fix: Xero invoices in APPROVED state were not being voided by our system, due to an incorrect status code being passed via the API.
- Fix: #4183 ".0000" was appearing after Gross results.  Not proud of this fix (string.replace) but until we can come up with a better plan, this is it...
- Mod: Love Golf - She Loves Golf - Get club descriptions (facility, course, amenities) from the Facility table (previously, it was getting and saving data in the LGCampaign table)
- Mod: Edit script to add also the VideoUrl column
- Mod: Love Golf - She Loves Golf - Get club descriptions (facility, course, amenities) from the Facility table (previously, it was getting and saving data in the LGCampaign table)
- Mod: Love Golf - She Loves Golf - Get club information from the Facility table (previously, it was getting / saving data to the LGCampaign table)
- Add: This script updates the description columns in the Facility table, taking the data from LGCampaign table.
- Add: Adds new columns to the Facility Table In relation to Love Golf - She Loves Golf
- Fix: Show the correct warning style and image when trying to update the password.
- Add: New image files - check (success) and exclamation mark pngs
- Add/Mod: Love Golf - She Loves Golf - Validate start and end dates - Add offer / campaign "preview" link, add "save and preview" button
- Mod: Love Golf - She Loves Golf - Add interest registration csv export
- Fix: When there's a selected scorecard in the pos, it disappears when a new scorecard has been printed. I just added the addClass when the getscorecards method is called. This also includes minor UI fixes.
- Mod: Org was not updating the passport credential for some reason...
- Mod: Love Golf - She Loves Golf - Interest Registration text updates
- Fix: The ordering of the site takeover script is incorrect.
- Add: Trigger - when Club contact details are updated, also update the contact details in the Facility table
- Fix: Problem was a member could not book because the system said their category was not valid - but it was valid. Example was MemberId=155943, category FPL which had a FromDate of Oct 1, and a ToDate of Sep 30. The member was trying to book on Oct 1, and because there was no >= or <=, it would always mean Oct 1 would be out of category.
- Add: Shared Warehouse classes - to prepare for the Warehouse API.
- Add: Shared folder for Warehouse classes.
- Ignored some stuff
- Add: .gz file extensions for compressed parcel files.
- Mod: Scores and GOTG link are now hidden if user doesn't have permission.
- Mod: Love Golf - She Loves Golf - Update campaign file's path. Change the Club ID to the Facility ID.
- Mod: She Loves Golf - search result style updates
- Mod: Love Golf - She Loves Golf - Upload campaign files to Facility folder (using SaveFacilityFile)
- Mod: Love Golf - She Loves Golf - Add SaveFacilityFile - this uploads to a folder called "Facility"
- Mod: Love Golf - She Loves Golf - Campaign page's slideshow style updates
- Mod: Love Golf - Add SaveFacilityFile method - this saves to a "Facility" folder instead of the "Clubs" folder. (Because we will be uploading files for non-clubs, too.)
- Mod: Updated TODO list.
- Mod: Love Golf - She Loves Golf - Add form validation (required, email), input restriction (phone number) - Update styles - Add search filters on the result page - Use region id in the query string parameter - Add setting of search image depending on the selected tab
- Mod: Refactor Config class to read from json configuration files as passed on the command line. Add: Storage handlers, so we can store the exported files on disk somewhere, and also HTTP GET handler to get the files from a remote server.  My plan is to run the exporter on WEB4, export the files to disk under the admin.golf.co.nz site and then run the importer pointing to that folder via IIS. Add: Folder for warehouse schema management.  Current schema version is stored as an extended property.
- Add: Newly issued Xero client SSL certificate.
- Mod: Even if club has VEND, the delete button in the scorecard admin is displayed.
- Add: Love Golf - She Loves Golf - GOTG resized image
- Add: - Script that updates the Facility Names -- to add "Golf Club" - Script that creates the table, FacilityType and populates it - Script that creates the table, FacilityTypeFacility - Script that populates the table, FacilityTypeFacility, inserting a record for each golf club
- Add: Unf#136 Kiosk Tee Booking Add Player to booking now under Visitor can search for GolfLink number and add the result as player and add friend
- Mod: Made the site takeover dynamic. It now looks into the advertising table instead of us publishing each time there's a change.
- Mod: Added additional columns in the Advertising table for the site takeover.
- Mod: Made additional notes for the revised instalments area in the membership tab.
- Fix: When importing credit notes from Xero, also update the DocumentDate as that can be changed from Xero.
- Mod: #115244 is an issue where reservations were being deleted in TTM manually, but the reference was still in PPG so they were out of sync. The PPG on a timesheet edit would fail as it was attempting to delete reservations already removed in TTM and TTM was giving a Not Found error. To fix PPG now ignore the "Not Found" error when deleting reservations, as it is already gone from TTM, so the systems will be back in sync, and PPG does not need to break the Edit timesheet.
- Add: This script creates the table LGOfferRegistration (for She Loves Golf / campaigns)
- Mod: Jennian Homes site takeover (Mon 14 – Wed 16).
- Fix: Safari iPhone hack for working in an iframe from a different domain.  - the workaround is if browser is safari, then the page redirects to page in top.location, which sets the cookie (our case session cookie), and then redirects back to original domain in top location (which then loads the page in the iframe, but now the session cookie should work).
- Mod: Need to keep this because we change the category AFTER creating the ClubMemberItems.  This causes a display issue on the invoice where the category at item creation time is wrong, because it looks at CMemberHistory to get the correct category.
- Add: ClubCMS TeeBooking - GolfLink member lookup as part of the "Search for Member" option when adding a player to a booking.
- Add: Updated partner logos (200 x 75 png) Mod: Partner logos slideshow settings (fixed width), added "powered by DotGolf"
- Fix: #4115: Don't allow user to delete a timesheet if that timesheet as any group bookings on it.  Previously we only checked for individual bookings.
- Fix: Don't allow user to delete a timesheet if that timesheet as any group bookings on it.  Previously we only checked for individual bookings.
- Fix: #4107: While entering a visitors score e.g. Matt Smith at Remuera – removed the “Overseas” label that shows up, even though the course control lists home courses only.
- Fix: #4108: When editing a card, the handicap seems to come up with undefined.
- Fix: #4117: A side effect of the "Could not find current sub period. Please check that the subscription year is configured properly." error message was that the subs dataset was being left in an inconsistent state (it didn't match the items GridView indexes anymore).  This caused an index out of range exception in some rare cases.
- Fix: #112745 Draw report was referencing an Association property which broke for Aus (they have Club Ids >1000). Set to NZ only.
- Fix: API add member - Another passport missing plug when AUS member record is created. Passport is now created when Member is created in Aus code. - insert passport statement moved out of if statement so to occur for the else, as it also applied there.
- Mod: Add a description column header for when showing only 1 sub item in the report.
- Fix: Added colon.
- Add: Love Golf - She Loves Golf - ui updates
- Add: Love Golf - She Loves Golf - js and images
- Fix: Got rid of test file.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Test commit #4103.
- Mod: Removed the Mission Hills site takeover and replaces with Carrus Open.
- Mod: Love Golf - She Loves Golf - search functionality
- Add: Love Golf - She Loves Golf - checkbox image
- Fix: #4103 Clicking on the watermark in the course search control used to chomp the click and not focus the textbox.  It is now impossible to click on the watermark as the watermark disappears when the mouse hovers over the box (the way it was intended originally).
- Fix: #4103 Clicking on the watermark in the course search control used to chomp the click and not focus the textbox.  It is now impossible to click on the watermark as the watermark disappears when the mouse hovers over the box (the way it was intended originally).
- Mod: Love Golf - She Loves Golf - Search functionality updates
- Mod: Love Golf - She Loves Golf - Add functionality to register interest
- Fix: When saving playoff winners in a competition where there are divisions configured, and the playoff winner is for the Overall result, the form does not save properly as it is expecting a division.
- Fix: Error in the draw caused by the newly added columns in wa_GetMemberHandicapIndex.
- Fix: Divide by zero when working with 0% commission.
- Mod: Zero commission Sept and Oct 2015 for Get on the Green.
- Fix: Prevented the settings.cs to throw an error if VendAPIEnvironment is not present in the web.config.
- Add: First iteration of instalments refactor spec (this will be reviewed on Wednesday 9/9/2015 after our meeting with Chris/Remuera).
- Fix: Originally #108754 was fixed, but that club used the API to login and it was updating member details which caused First name to be overwritten. This ULogin had the same issue and was raised with #116084 as another club uses this login method. Now ULogin also has the update member code removed.
- Add: Love Golf - She Loves Golf - Campaign page updates: layout, add right panel, etc.
- Add: Love Golf - She Loves Golf - Remove introductory offer and summer offer left tabs - Update the More Info link
- Add: Love Golf - She Loves Golf - Add campaign image slideshow files; campaign banner image
- Add: Love Golf - She Loves Golf - LGOfferFile class
- Add: Initial version of DotGolf Warehouse Builder.
- Add: DotGolf Warehouse Builder
- Mod: It was showing the members handicap rather than the scores handicap for that score. Introduced with handicap changes for M and P mods.
- Mod: Mission hills site takeover. 7 Sept - 9 Sept.
- Add: Love Golf - She Loves Golf Add Facility and LGOffer classes
- Add: Love Golf - She Loves Golf new pages, and related styles and images: Search Search Result Campaign (Offer) Page Register
- Fix: #115966 Course navigation links were overlapping the heading above them. Removed negative top margin in css to fix.
- Fix: Bugger, SQL error trying to join Passport to Member by PassportId=MemberId.  This caused members to disappear when searching by surname in DotGolf Live.
- Mod: Aus Login code for IsValidLogin method was using old password credential check. Updated to use correct password credential check, which calls proc "api_GetActivePassportForCredentials"
- Mod: Default the IsModified to 0. This is because sometimes the score might be a non affiliate record, and if it is a non affiliate wa_GetMemberHandicapIndex does not run leaving the IsModified flag NULL Mod: Also added the IsModified to the edit/update area of api_AddScore. I am not sure why this was not applied in the last publish, as I thought I committed it ... anyway.
- Fix: Reverted accidental commit.
- Mod: Hide the Mark as Paid button and disabled "set paid" functionality in the SCA and partly the POG, if the club has the VEND product.  See email "RE: Vend areas that need locking down" sent from Matt to David for more info.
- Mod: Forgot to commit this with the last publish - just a minor UI mod.
- Mod: Although not very intuitive, I have added an extra column for the description to the report. If you print the report with 1 item only, the description will show. I did not want to create a whole new report, and hopefully the group by will not be affected by this description item either. There are version number differences here - I hope this does not stuff with Active reports?
- Mod: SQL bug - extra comma...
- Fix: DG-4086: When clicking Edit - Save in SCA the system was incorrectly printing a card even though you didn't click Save and Print.  (This is only when editing scorecards).  This was introduced in rev 21342 where we tried to fix another bug but didn't pass along the player.doNotPrint flag correctly.
- Fix: Optimised SideBarTeebookingSpecials SQL - this was running really slowly and caused a DOS when the widget was accidentally added to the homepage by NZ Golf.
- Mod: Made the offer email template to be in S3 so we can change it without deploying.
- Mod: Made the offer email template to be in S3 so we can change it without deploying.
- Fix: API add member - Another passport missing plug when AUS member record is created. Passport is now created when Member is created in Aus code.
- Mod: Remove the elite (Srixon) link, as requested.
- Mod: Update Srixon images to 1 pixel images (white/transparent).
- Mod: Update Srixon images to 1 pixel images (white/transparent).
- Mod: Changed the behaviour of the print card button, when there are no fees to pay then we are not sending anything to vend.
- Mod: Partner / sponsor img alt value
- Mod: Partner / sponsor images CSS - update path of slick (carousel) gif
- Mod: Replace the static partner/sponsor images at the footer with a scrolling one.
- Add: Sponsor images and slick.js (carousel script) for the scrolling partner images at the site footer
- Fix: This handles the deletion of scorecard in the scorecard admin page. When a club has vend and a scorecard is deleted, the register sale is voided.
- Mod: Text update From: CONSTITUTION POLICIES & BOARD MEETINGS To: CONSTITUTION, POLICIES, BOARD MEETINGS & PARTNER UPDATES
- Add: Missing GO statement in case anyone ever re-runs this script.
- Fix: DG-4056: In a very specific case the member looking at the kiosk could not change the marker they are playing to 9 hole from 18 hole (the default).
- Renamed sql scripts to get them back in order
- Renamed sql scripts to get them back in order
- Mod/Fix: - Add a mandatory Terms and Conditions checkbox if the competition has a T&C. - Update / fix the other required field indicators. - Styling ("required" text indicator too big).
- Mod: Love Golf - Promotional Campaign - Use Help links instead of plain text
- Add: Love Golf - Promotion Campaign - help files for the Date and Enable? fields
- Mod: Love Golf - Promotional Campaigns List (She Loves Golf) - Always refresh table even when there's no records returned. e.g. after deleting an offer, refresh the list
- Fix: The computation for the reserved match halved was still wrong. I was not taken into consideration when computing for won, lost and halved rounds.
- Mod: If a competition has terms and conditions uploaded (TermsAndConditionsAttachmentId), add a T&C checkbox to the Register form, with a link to the document.
- Mod: Remove spinner and also add handicap index for reference.
- Mod: Limit marker names to 20 to match NZCRData.Marker.
- Mod: Limit overseas course and marker names to 30 characters - should be enough.  The database limit is 100 but putting long course names in here causes display issues.
- Fix: Ensure people don't enter decimal values for the total par field.
- Mod: When editing older scores, ensure we get the IsModifiedHandicap from the last score record, rather than the current member record.
- Mod: Love Golf - Promotional Campaign List - add minimum width to the columns.
- Mod: Stuffed up the previous commit. Too eager and did not pay enough attention. Now the report should show UP or DOWN (not the entire word because then it wraps and looks ugly... clarify - uglier than it already does! :-))
- Mod: Love Golf - Promotional Campaign List (She Loves Golf) - Add a Delete functionality
- Mod: She Loves Golf - update help links
- Fix: Typo errors
- Add: She Loves Golf - help files
- Fix: She Loves Golf - show the "Promotional Campaign" tab as selected when on the Promotional Campaign form page.
- Mod: Rephrase as per NZ Golf's terms.
- Mod: Update column (OfferName) varchar size from 50 to 80
- Fix: Include future competitions for bulk email selector. Mod: Exclude competitions where there are no entries pre-registered - no point showing these in the list.
- Mod: capitalise "GO"
- Add: DG-4069: Allow clubs to email competition entrants from Bulk Email.  This basically involved adding another selector control.
- Fix: Since our tests require uppercase "GO" statements in SQL scripts we'll just fix this one.
- Add: Scripts that create the tables for Love Golf - She Loves Golf (Phase 1)
- Mod: Applied the AllowedPaymentTypes settings in the POS page.
- Mod: Kiosk - the loyalty and cash button visibility now depends on the AllowedPaymentTypes settings.
- Fix: DG-4052: Remove duplicate results from the members search (when people have a member and nonaffiliate record linked to the same Passport).
- Fix: DG-4049: Prohibit the user from changing the course/marker for a team scorecard (like when you have an Ambrose/Foursomes competition on).  Changing the course/marker for one of these competitions really stuffs things up so we chose to disable this option.
- Fix: DG-4059: Had to introduce a hack to make this poor excuse of a browser, Microsoft Edge, work with our score input control.  It's not enough that the SIC already works with Firefox, Safari, Chrome and even IE11 - now we have to introduce patches for Edge as well.
- Fix: DG-4052: Members of your own club should appear before country-wide search results in tee booking.  I think we can improve this search quite a bit, and this commit doesn't go far enough, but at least now for the majority of cases (members booking at their own club searching for other members) will work better.
- Fix: DG-4072: Quick win - query was missing a DeletedDate check when loading up the competition rounds for display on UResults.ascx.
- Mod: Love Golf - She Loves Golf - Rename button - Display a message if there's no campaign set up on the Promotional Campaign tab.
- Mod: Love Golf imageservice
- Mod: Added the activate/deactivate payment type settings.
- Mod: New pages needed to have the progress bar indicating x% complete for the LoveGolf section Mod: Updated the Hints and Tips to direct the user to the appropriate tab (now we have separate tabs for various sections)
- Mod: Need to update the handicap modified flag for a score if editing too.
- Mod: LoveGolf - She Loves Golf Update order of offers, date format
- Fix: Cleaned up obsolete method no longer used.
- Mod: When Removing a Redoing, the status now that is being to sent to Vend is "Return".
- Fix: DG-4070: Category maintenance - tightened down the ability for the user to mess around with the non-playing flag.
- Fix: Broken link.
- Mod: LoveGolf ImageService - updated SaveImage method to accommodate other files that could be uploaded for offers (e.g. She Loves Golf), and not just banner and introductory images.
- Mod: She Loves Golf - allow null dates
- Mod: SaveImage method - Remove ImageType from the arguments because it's not used anymore.
- Mod: SaveImage method - Remove ImageType imageType from the arguments because it's not used anymore.
- Mod: Update SaveImage method to accommodate uploading of other files (e.g. She Loves Golf campaign images and documents)
- Mod: LoveGolf tabs modifications for She Loves Golf - Added tabs: Promotional Campaign, Club Information - Renamed existing ones: Club Promo Page to Introductory Offer, Love Golf Get on the Green to Get on the Green
- Mod: Added the activation and deactivation of Quick Key groups.
- Mod: LoveGolf IntroductoryOffer - Remove fields that are related to the club (because those now site on the ClubInformation page)
- Add: LoveGolf Tab - added the following files for She Loves Golf: Club Information - separate the club information. This still gets and saves data to LGCampaign table PromotionalCampaignList - List of She Loves Golf campaigns/offers PromotionalCampaign - She Loves Golf campaign/offer form
- Mod: Changes to the terminology for penalty and disability.
- Fix: Updated the app code and secret to point to staging. Fixed null issues in settings page.
- Mod: Made the redirectUri to be dynamic.
- Fix: Overseas courses: Allow editing overseas markers while editing overseas scores.
- Mod: Redirect away to the members tab after saving (to avoid resaving the form in "New" mode rather than "Update" mode) Fix: The report was not getting the date range correct on the day.
- Mod: Changed a whole bunch of joins from MarkerId+PlayDate to NZCRDataId to help with overseas scores and also general performance.
- Mod: Added the Quick Key Groups settings.
- Fix: When looking at member scoring history we should join from Score to NZCRData on NZCRDataId, not markerid and playdate as the latter could give you incorrect results where an overseas marker was edited multiple times on the same day.
- Fix: LongScanning reports were not showing suffixes on handicap indexes (like N, M, P, L etc), only the numeric part.
- Add: Some help context to the handicap adjustment type meaning.
- Fix: Typo when correcting a typo, argh!!
- Fix: M/P reintegration clobbered some mods to the LoadMemberDetails() method (which was moved to Shared.cs in the branch)
- Fix: Typo.
- Fix: Overseas score entry for Org.
- Fix: Overseas score entry and course maintenance bug list.
- Mod: Updated the register sale and products webhooks. Also added the retailer id in the settings, this is when the club id cannot be provided when a webhook is fired.
- Fix: CREATE table statements caused tests to fail.
- Fix: Build error because of "P"/"M" change to Handicap constructor.
- Fix: A fix from Matt about reprinting scorecards, looks like this code would previously only have worked for non-affiliates.
- REINTEGRATED [Matt] handicap "M" and "P" changes from branch.
- Fix: #113851 Create passport row for member when member record is created. Otherwise member will have various issues in the system from not having a passport (e.g. accessing the Kiosk)
- Mod: Added the following; 1. Open drawer when cash button is clicked 2. Search player in the pos page.
- Mod: Added a webmethod (http://localhost:3673/KickCashDrawer) to kick open the cash drawer.  We auto-detect the receipt printer name, but if required this can be manually specified in the exe.config file (use the CashDrawerReceiptPrinterName appsetting).  Also you can specify the cash drawer kick code (in a comma delimited decimal format) using the CasehDrawerActivationString setting, for example "27,100".  For interest sake the Star TSP-100 drawer code is just "7".
- Mod: Temporarily hide "or email" from the forgot password screen.  Retrieving your password by entering an email address does not work at present as you get "&Username=na" on the URL, which crashes out the verify page.
- Mod: Temporarily hide "or email" from the forgot password screen.  Retrieving your password by entering an email address does not work at present as you get "&Username=na" on the URL, which crashes out the verify page.
- Fix: After the Halved points fix, the Lost count is incorrect. The fix was taking into consideration the isreservedmatch and matchhalved.
- Fix: #114880 American foursomes competition type handicap calculator class needed to be set to 2 decimal places.
- Mod: Reverted site takeover to hills.
- Fix: The halved contest result is incorrect because one of the scripts is using an incorrect column.
- Mod: DG-4046: Modified the casual golfer registration "verify" email link to be a nice short tag, getting rid of the RSA signature in the process.  There are 2 other areas that still use the longer tags - verify live member and also verify resigned member.  Unfortunately for the latter two we may have to create a new table for these tags as we can't identify a passport to link the email to (and we use PassportEmailVerify so we need a PassportId).
- Fix: DG-4066: (How everyone isn't hounding us at the same time about this bug, I have no idea!!)  There is a rounding error in the competition division eligibility code that causes all handicap indexes to be rounded to 0dp.  This means if your division is 0.0-23.9 and you've got a 23.5 handicapper, they will be rounded to 24 and will not be eligible for that division!
- Fix: DG-4067: Sunrise/sunset times calculation was incorrect when you look forward past the DLS cutoff.
- Fix: Vend - Minor UI fixes for the barcode section.
- Mod: Teebooking login forgotten password link now redirects to the forgotten password page found from the ULogin controls ForgottenPasswordPageName property setting (i.e. the club website forgotten password page). If there is no ULogin control or the control does not set the ForgottenPasswordPageName, then the default of "Forgot Password" page is the redirect.
- Mod: Added search product by barcode/sku.
- Mod: ConfirmPayment.aspx removed Logout link as Login is now integrated with Club web user. Mod: Club web user login now handles the visitor state, that is previously there was member (home and secondary) and club non affiliates who logged in. Now the non affiliate user state can also be visiting affiliate members, and visiting non affiliates (casual golfers). These latter users do not have access to member areas in ClubCMS, they are guests. So a new flag is saved to the session to specify if the user is a visitor (authenticated visitor).
- Fix: The club website is throwing an error when logging in from cookie. 1. The creation of the cookie in db is incorrect because of the clubid selection. 2. When retrieving the login details from the websession table, the userid is incorrect because we are getting the username from passport table and not the passportcredential table.
- Mod: Allow multiple course clubs to filter their start sheet report by a single course. Mod: DG-4063: For restricted course ID users (such as what happens at Riverside) default the course combo to the course of the user who is currently logged in (you can still change it to another course though).
- Mod: Product synch from vend to db. The POS now also gets the quick keys.
- Mod: Newstalk site takeover (18 Aug - 20 Aug).
- Fix: Overseas scores: Automatically proper case the course and marker names as soon as the user tabs off to the next field.
- Add: Overseas scores: Form now checks that the country+course or course+marker names don't already exist before allowing the user to click OK.
- Fix: Overseas courses: Don't send overseas courses down to DGE via Sync.
- Fix: Overseas scores: When you select an overseas course, depending on the ajax load speed, you would see Edit links next to NZ courses.  Harmless as you can't really edit them, but a little confusing for a second there.
- Fix: Overseas scores: When you enter a brand new course, the new course+marker were not selected by default, leaving the original (default) marker selected.
- Fix: When entering scores for overseas courses (which normally don't have hole-by-hole information such as par or stroke), the SIC now automatically switches to entry by adjusted gross, even if the score entry screen is in Hole-by-Hole mode.
- Fix: SQL typo caused saving a draw to error out.
- Fix: Teebooking SearchClubDay time filter links did not work as they were floating under the next div. Styled them as inline block.
- Mod: Added the vend settings. The only missing vend setup is Synch Products.
- Mod: Stop clubs loading other clubs' adverts completely at the ImageHandler level.  This means if you're not logged in you won't see any ads, also if you are mistakenly trying to display another club's ads you will get a 400 message when loading up the image.
- Mod: Changed the default computerno for members created from the API (9999910), GL StartOfDay (9999930), and the ClubMember.InsertOrUpdateAffiliate method (9999920). This will help with tracking member creation issues, in particular with MP.
- Fix: Draw where slots were removed from draw were still holding a reference to the time slot, and any new draw creation would not be able to select those slots. This was due to the TBTimeSlot.DrawTimeId still being populated after removed from a draw. Only the deleteddate for DrawTime was being set. So the fix now clears the TBTimeslot.DrawTimeId for draw times deleted.
- Mod: Performance: Don't run this query with a NULL TBTimeSlotEntryId.
- Fix: Overseas courses: Show "Add Overseas Course" at all times, not just when you've searched with no results. Fix: Speech bubble Show() previously made the bubble scroll into view - this was annoying, so turned it off.
- Fix: Got rid of static variable used to store the advertisements for the leaderboard.  This is more than likely the cause of advertisements from some clubs showing on leaderboards of completely different clubs.  The latest instance of this is documented in Smartsheet, DG-1217, from Mt Maunganui, but other clubs like Tauranga have also reported the same.
- Add: When displaying overseas courses, display the flag next to the course name.  Example: http://snag.gy/kiLEl.jpg
- Add: When displaying overseas courses, display the flag next to the course name.  Example: http://snag.gy/iyGpg.jpg
- Mod: Changed the vend settings to test. Added the functionality where the non payment sc in kiosk sits in the unpaid and recent sc list.
- Add: Validation for Course Rating, Par and Slope values. Fix: Use proper Knockout validation instead of silly if..alert method.
- Mod: Fail the build (well, mark it as unstable) if someone commits a broken schema script.
- Fix: A few more NUnit test problems.
- Fix: This insert shouldn't be here...
- Mod: Commented a test out as I don't really understand what it is doing...
- Fix: A number of tests broke because of the Course.CountryId column that is not nullable.
- Fix: A number of tests broke because of the Course.CountryId column that is not nullable.
- Fix: 2 places where Course inserts would fail because of a NULL CountryId.
- Fix: Several problems with the schema scripts preventing test suite from running properly.
- Mod: Reorder schema scripts.
- Mod: Reorder schema scripts.
- Mod: Reorder schema scripts.
- Fix: Test errors due to new schema.
- Fix: Test errors due to new schema.
- Add: Overseas score entry and course/marker maintenance.
- Mod: DG-4051: Also nuke the OOMResult row if the underlying score is being deleted.
- Mod: DG-4051: Allow clubs to delete scores even if they were entered as part of the handicapping score upload from a tournament (usually NZ Golf).  We do this by deleting the ScoreLink.ScoreId reference (nulling it out) before deleting the actual Score record.
- Fix: Draw list of members for Aus now shows DisplayMemberCode instead of ComputerNo
- Mod: Changed the tbtransaction constraint to accommodate both the memberid and txheaderuid.
- Mod: Added the loyalty top up history in the accounts.
- Fix: ConfirmPayment.aspx was missing OnClick binding for Logout button. Caused a parsing error loading page after payment was made. Mod: Special offers label on SearchSlots.aspx style is now is css, and is defaulted to orange instead of yellow, as yellow is harsh on white BG
- Mod: Teebooking/TeebookingBanner.Master wrapped teebooking main content placeholder in div to allow greater css styling options from CustomStyles.css Mod: Teebooking login page and site login controls now perform the same login, so teebooking user authentication is now fully integrated with the site. This means the login state is held across them. Also the site login had to allow non affiliates login if the club had TBP product (UserUtilities.cs). Fix: SearchClubDay green fee popup was not working for terraces2. JS events now bound for terraces2. Mod: CustomStyles.css working with terraces2 to get teebooking labels, layout working for club sites.
- Fix: Vend - fixed the tax computation.
- Fix: Kiosk Teebooking was displaying "Go on waitlist" button for time sheets that had no slots available (empty timesheet). Clicking the button would go to the waitlist page in a odd state. To fix the button is hidden if there are no slots.
- Mod: Vend - Added the park functionality.
- Mod: Cash and Loyalty payments from kiosk now sits in the unpaid and recent scorecards list.
- Fix: Null reference exception when starting localhost server in Connector.
- Mod: Vend - Color change for demo.
- Fix: UI fixes.
- Fix: Optimized the get active scorecards query.
- Fix: Vend - Uncommented the onScorecardsDeleted.
- Mod: - Kiosk button fixes (duplicate buttons) - Vend merge issues in TabMember - Darkened the colour of the tiles for presentation.
- Fix: Crashbug when you try entering a visitor number into the kiosk (because Vend doesn't return a valid customer for visitors)
- Reverted the mixed gender strokes mod as we are not yet going ahead with it. --------------------------------------------------------------------------------------------------- Mod: Results: Instead of using the lowest course handicap adjustment as the baseline, we now use the most popular marker played in the round (i.e. highest number of scores).  This means that if you have only got a few people playing an easier/harder marker, only those guys will get adjusted (up or down) by the extra strokes calculation - and the vast majority of the field will just keep the same scores.
- Mod: Vend Loyalty Topup.
- Mod: Added columns to the vend product table.
- Mod: When paying via loyalty in kiosk, it will now sit in the unpaid scorecard for 5 mins with a saved status register sale in Vend. This will be automatically closed after 5 mins.
- Fix: When the #calendar div (inside Panel1) is NOT present, do not initialise the fullcalendar (js), otherwise, it'll throw an error, "fcDate.getMonth is not a function". #calendar div is only present when the ResultsOnly property value is false (i.e. on the event calendar page of the site).
- Mod: Love Golf - Find a Club - added a condition when getting the Intro Offer - current date must be on/in between the StartDate and the EndDate
- Fix: Use connectorHost for scanning images.
- Don't mess with the local clubCardPrinterUID - reverted.
- Fix: Pass real connector UID through to scanning (by getting it from the connector rather than the kiosk settings)
- Mod: Love Golf: Find a Club - Add the membership category name under the membership price - Also updated the alias used (c -> club, camp -> campaign)
- Fix: Correct clubCardPrinterUID was not being set when using a connectorHost.
- Fix: Argh, missed a file!
- Fix: Error when retrieving the setting for the local network Connector IP.  Casting bug...
- Fix: Bug that was introduced when commenting out (removing references to) the BMW code.
- Fix: Creating a new machine identity (for kiosk) wasn't working due to an EF model problem.  Rewritten EF query in Dapper.
- Add: This commit should enable us to use iPads as kiosks, including scanning and EFTPOS (things we used to require a "real" computer for).  This works by changing the iPad interface to talk to another instance of a Connector running somewhere on the local network.
- Fix: The query that inserts the email times out because of the server upgarade.
- Mod: Uncommented the commitThread.Abort();
- Mod: - Configured the Vend Auth and RegsisterSale to point to StagingPakuranga.vendhq.com. - Modified the tax to 'GST' - Modified the code to send the tax to vend - Added the POS link in the main menu
- Add: Added further comments for MultiPlayerResult fixes for countback issues from revs 20874 and 21116, so the reasons for the change can be seen clearly in code
- Mod: Reverted the site takeover to hills.
- Fix: Missed the VendDeletedDate column.
- Mod: SQL scripts for VEND.
- Mod: Added a code that updates the tbtransaction and sends it to vend when dps is successful.
- Fix: Merge from vend branch fixes.
- Fix: Merge from vend branch fixes.
- Fix: Merge error fix.
- MERGE: Vend branch reintegrated into Trunk for Marco.
- Overseas courses: Some boilerplate stuff that should not affect current production code. - MasterPageOptions - added EnableOverseasCourses parameter so we know whether we're enabled or not (nothing uses this yet) - MasterPageOptions - added CountryName parameter - Course Selector Control Service - now returns IsOverseas field as part of search results (not used by UI yet) - Fix: Don't report XHRAbortExceptions to the console as this is a "normal" error.
- Fix: When reserve bonus point is set, the results table is wrong because we are setting the reserve win point to be the match point and multiply it to the reserve win point.
- Mod: Temporarily hid the green fee by month/year report as it seems to kill production at the moment!
- Mod: Another query needing the legacy CE traceflag.
- Mod: Rewritten course list and search queries to get rid of old EF code (as I'm updating the Course table to add a CountryId soon, this will be painful, so opted to rewrite this before committing the rest).
- Mod: Changes to abroad spec.
- Mod: Use the legacy CE for another badly performing competitions query.
- Mod: Use legacy cardinality estimation for this specific query as it is performing badly using the new SQL2014 CE.
- Add: Spec and Axure screenshots for overseas courses and score entry.
- Mod: The previous ordering was not working correctly in the member statement. The identity was not correctly ordering the values in the temp table, but the new row_number will.
- Add: Index for performance of recurring bookings query.
- Fix: Build error...
- Fix: Optimised Recurring Bookings query to remove unnecessary CTE.  Also removed NumberOfTimeSlots being returned as it wasn't strictly necessary and it caused a big performance penalty (causing an expensive key lookup on TBTimeSlot rows).  Changed TBTimeSlotEntry check to work on TBTimeSlotEntry.SlotDateTime instead
- Fix: Optimised ScoreCard.OtherPlayersInSameTimeslot query for SQL2014.
- Fix: When team match is selected in the setup, duplicate rounds are being displayed in the results page.
- Mod: Results: Instead of using the lowest course handicap adjustment as the baseline, we now use the most popular marker played in the round (i.e. highest number of scores).  This means that if you have only got a few people playing an easier/harder marker, only those guys will get adjusted (up or down) by the extra strokes calculation - and the vast majority of the field will just keep the same scores.
- Mod: Updates to this doco.
- Mod: Competition Setup: Allow other single player competition types to be selected at the same time as Foursomes.  Enabling this lets us run Twos which was what was requested - however any single player competition type like Gross, Net, Stableford, Net Eagles, Hidden Holes, Jackpot and Net Birdies should work just fine.  I have tested Twos and Stableford combined with a Foursomes Gross competition and it did what you would expect.
- Mod: Tee booking transaction processor will now, by default, only send emails if one or more errors occurred during the run.  Adding /alwaysemaillog to the command line will cause it to always send the log.
- Mod: Text change in one of the public site tee booking error messages.  DG-4053
- Fix: Group No sorting on the main players table brought back for 5 Course Classic.
- Mod: Diners site takeover. Aug 3-5.
- [Ported from Public.2012]: Filter the TBTicketEntry.PaidDate update to check for green fees only.  The test case for this is as follows:
- [Ported from Public.2012]: Filter the TBTicketEntry.PaidDate update to check for green fees only.  The test case for this is as follows:
- Fix: Filter the TBTicketEntry.PaidDate update to check for green fees only.  The test case for this is as follows:
- Fix: Testing: Think I had the boolean condition inverted here...curses
- Fix: Testing: Think I had the boolean condition inverted here...curses
- Fix: Testing: Think I had the boolean condition inverted here...curses
- Fix: This is an attempt to remove the added protocols in web config.
- [Ported this fix from Public 2012]:  Fix: Source of the problem where cart fees appeared on the green fee report when they should not (after a non-payment booking was cancelled)
- [Ported this fix from Public 2012]:  Fix: Source of the problem where cart fees appeared on the green fee report when they should not (after a non-payment booking was cancelled)
- Fix: Source of the problem where cart fees appeared on the green fee report when they should not (after a non-payment booking was cancelled)
- Mod: DG-407: Show Already Teamed players at the bottom of the list instead of everything in alphabetical order.  This is for the kiosk score entry so that people don't have to scroll way down to the end of the results when most people have already been teamed up.
- Add: Teebooking Login link on SearchClubDay.aspx and SearchSlots.aspx if user is not authenticated. Add: Logout link on ConfirmPayment.aspx page for visitors logged in. Mod: If a visitor attempts to login and the Club does not have TBP product, then they are denied.
- Mod: Allow the user to remove players in a 2 player team swinger situation (where a player has 2 partners, enen though NoOfPlayers==2 for the competition)  This was done for Russley as they keep getting themselves into messed up teams in their 4BBB competitions - hopefully this will let them correct the problem teams. Fix: When a team is deleted by the SIC (when a player is removed and only 1 left), the last player sticks and because of some missing DeletedDate checks, the team still shows up in some places.  Changed so that the last player in the team is also removed prior to the team being deleted, and that fixes the display issues.
- Mod: ClubCMS Teebooking implemented a terraces2 layout with its own Master page.
- Fix: DG-1190: Reverse Fields draw generation method was not working for clubs (because of the RSCompetitionEntry change we had to do when porting the draw system to Live). Add: New draw generation method: Reverse Order (I emailed some documentation to Matt, Jaime and Jasmine, subject "Draw Generation Methods - Reverse Fields and Reverse Order" sent Wed 29/07/2015 11:13 a.m.).  The basic idea is that this reverses the times that the players are playing versus the previous round, so if you were the 2nd group in the first round, you'll be the 2nd to last group in the next round.
- Fix: DG-4044: Handicap Adjustments Report (for 5 Course Classic) had .0000 appended to the stableford points due to the RSResult.Total column schema change to money months ago.
- Fix: When the images in the image slideshow is less than the slidesToShow, the images were left aligned. Added a code that centres the image slideshow.
- Fix: At Riverside an auto entry competition for the Lochiel course caused Narrows players to get errors at the kiosk.  This was because all players were forced into the comp even though they were printing for another course.  Added code to drop these competitions when printing for another course.
- Mod: Changed the BMW password to prevent them access into the admin login area.
- Fix: Added a width to the slick (slideshow) to avoid the width to extend.
- Mod: Remove BMW icons from appearing next to peoples names on the site. Prevent the BMW control from being chosen (in admin mode) when customising the sidebar controls.
- Mod: Remove the controls from being viewed on golf.co.nz. (please review this query before committing on live) Prevent scores being added to BMW table. (promotion no longer running)
- Fix: #DG-4041 - Tga Golf Green Fee Report
- Fix: Added jquery 1.10 in the Template.aspx. This fixes the jcarousel and slick function issue.
- Mod: Remove the ability to register on the BMW Golf Club site. (they can still login however) Remove the ability to send invitations to other members to join the BMW Golf Club. They can still view past month leaderboard results. They can still view their statistics - performance report.
- Fix: Uncommented the ScriptService because the UploadCroppedImage and DeleteImage can't be called using ajax.
- Mod: Added the image slideshow control. This will be initially used in Redwood Park for the sponsor images.
- Add: Stop Adweb from updating a club with Subs + Xero integration to Edge - because the Xero certificates don't work with Edge and this killed Judgeford's Xero integration in a difficult to troubleshoot way.
- Add: Settings to control whether "mock" pinpad is enabled.
- Mod: Added mock eftpos interface to allow anyone to test the EFTPOS integration without having a terminal nearby.  Testing the hardware abstraction layer is a different story for which you do need a terminal - but at least this code will let you print cards without having a pinpad on your computer. Fix: Minor styling issue on DECLINED page.
- Fix: Issue #113220 - A course change was failing to save with an error "The variable name @Stroke1 has already been declared". The sql parameters has duplicate stroke parameters. The course with the issue had multiple stroke lines (19-36 etc) and the StrokeHeaderTable had the same GUID for each Stroke, so the system would pick up 2 stroke 1's etc. The issue was coming from the initial StrokeHeaderTable being populated with all the same GUID in the BindMarkerInfo method. All that was missing was a drop table for the #a temp table. Once the drop table was added, the GUIDs were correct for the strokes.
- Mod: Removed the MINI site takeover and reverted to the hills bg.
- Mod: Mark scorecards as paid when printed and paid for by EFTPOS via the kiosk. Mod: Refactored PrintCards() method to take a class as its only argument - makes extending it later easier.  This won't break old JS clients because I left the original method in there to remove later. Add: Missing DoCardSwiped event hookup - in case we ever want to support swiping membership cards through the eftpos terminal instead of having another magstripe reader handy. Mod: Save the TBTransactionId onto the TXHeader line in case we need it later.  It doesn't get used for anything right now though, but I'm thinking we may have to separate things in our greenfee reports later as they'll want to know which money came from the terminal(s).
- Mod: Teebooking content css class added to master pages so custom css can be used to style teebooking only
- Fix: #112337 Scorecards scanned require 2 signatures to be accepted when the kiosk setting "Enforce player and marker signatures on scanned cards" is on. It was previously accepting 1 signature. Fix: Kiosk fix relating to #106054, where fix for correct use of CourseHandicapOverride was applied. The fix was also required in scorescanning.
- Mod: Connector and CardPrintWS API changed to send EFTPOS receipt data up to the server so it gets saved in the TBTransaction table (RawXML column, wrapped in an element)
- Fix: LongScanning_AU_Sub Team tick label was referencing the TickStablford field. The tick is now hidden, as this card is printed for individuals as well. MSC#104731 Mod: LongScanning_AU_Sub Gross label updated to "Stroke"
- Fix: Score entry - Editing a score card for a Back Nine hole score was getting an error loading the RSScore (e.g. error #277928829). The marker object being referenced only has holes 10-18, but an iteration through the holes started at 1, so the holes were not being found.
- Fix: MultiPlayerResult Compute countback was throwing a CountbackMultiplierAccuracyException due to the competition being 9H stableford best 3 of 4 scores. The multiplier was getting too low as the MAX_VALUE is set to 12 * best of (e.g. 3). A similar fix was applied previously to 18H, so the fix was replicated for 9H, which is to only include the single hole countbacks when the result is not for gross or net, or best of = 1.
- Mod: Mini site takeover. 23 July - 27 July.
- Fix: Removed the conditions in the query because of redundancy.
- Mod: The categories in the club page is incorrect (displaying deleted categories) because the query was wrong.
- Add: This was added for BMW Mini who are doing a site takeover, and would like an expanding banner on the site. The inclusion of this file allows this to happen. Below is some documentation too. https://support.google.com/richmedia/answer/2408603?hl=en
- Fix: StartOfDay handle transferring member between 2 away clubs. E.g. Player "Bob" with homeclub A (non PPG club), and secondary club B (PPG club). Player "Bob" transfers from club A to club C (non PPG club). Club B does not do a Start of Day quick enough, and player "Bob" either logs into a club websites (creating a new record in the database). (I think it was logging into the website that caused the issues, rather than a GL lookup in PPG). Therefore, a 2nd member and cmember record was inserted, creating the duplicate member. Then Club B runs the start of day, but this never updates the original record for the club (because of the new duplicate that was inserted). Ticket #112233 has some details of a case.
- Fix: 112738 - Waitlist on processing a slot to add a waitlisted member, waitlists from other clubs were being added. ClubId inserted into proc, lines 10-15, 26 changed.
- Mod: Newstalk ZB site takeover. 20 July - 22 July.
- Fix: Settings - Course Changes - Needed to hide this from Aus
- Fix: Reverted the prebuild event so that the version will be seen in prod.
- Mod: Removed Matt's change for BMW as they have "reneged" about ending this agreement.
- Mod: Competition results report - decreased font size for AUS of Member No as the GL number is long and was wrapping
- Mod: ClubCMS teebooking control can be placed in Banner section (e.g. Hastings Production 2 site)
- Fix: Ported Matt's fix from public 2012: Fix the TBTicketEntry deleteddate stuffup. (we are no longer deleting ticket entries)
- Fix: Ported Matt's fix from public 2012: Fix the TBTicketEntry deleteddate stuffup. (we are no longer deleting ticket entries)
- Mod: Fix the TBTicketEntry deleteddate stuffup. (we are no longer deleting ticket entries)
- Mod: Update the contact details for WGA.
- Fix: The deleted template still shows up because of an incorrect sql condition.
- Fix: Altered the column clubid to allow null. This was because the associationid column was added.
- Mod: Subs Club Items - Add "Other", textbox is disabled until the Other tickbox is selected.
- Fix: Subs Club Items - adding "Other" line item was failing
- Mod: In preparation for removing BMW from the site.
- Fix: #111365 Update category was not saving Max No of Rounds if it previously had a number, and was being set to empty.
- Fix: Aus preprint from draw was printing NZ time for the slot time on score cards. Converted nz time to local club time.
- Fix: Teebooking settings allow System administrators to update anarchy mode settings
- Fix: Teebooking settings allow System administrators to update anarchy mode settings
- Mod: Hastings background slideshow control - update the path of the css (the "../" relative url didn't work for the teebooking page in Hastings2)
- Add: Hastings Club Site: weather control css
- Fix: The result being shown for pennants is not correct because the MatchplayPoints_AccumulateTotalPoints was not taken into consideration. The order in the query was hard coded to contest points.
- Fix: The result being shown for pennants is not correct because the MatchplayPoints_AccumulateTotalPoints was not taken into consideration. The order in the query was hard coded to contest points.
- Fix: Subs adding base subs were creating new club items, where they should have been linking to the base sub.
- Fix: In the query which gets the ID of the Page containing the "UTeebookingPlaceholder" control, add "order by p.PageId desc".
- Mod: With the new memberid and nonaffiliateid columns on the invoice table (introduced recently), we need to check this nonaffiliateid too rather than only the memberid.
- Mod: Prevent any update if the nonaffiliateid is not updated. Just trying to improve performance.
- Mod: Fix for the leaderboard to prevent such a large amount of data being posted through the viewstate. We could not see a reason for this to be in the viewstate at all.
- Mod: Added an image link field for adding a link to the article image. The functionality in adding a background is parked because of the complexity of editing the email html template.
- Mod: TBTimeSlot LockingMemberId update moved outside of the transaction to reduce locking.
- Add: Tee booking forgotten password from Login Fix: AUS not allowed to book as guest. Error message reinserted to Confirm slots.
- Fix: Performance fix to book.golf trying to seek on a varchar index using an nvarchar variable.
- Fix: Tee booking - Hide My Bookings for guest access to Search club day
- Mod: Teebooking made available to visitors. - New login page. - Register redirects to public site for registration and returns to login page.
- Fix: Small text change.
- Updated config file to get rid of 5:15 queued requests.
- Mod: Add "unsuppress" toggle.
- Fix: Oops.
- Add: Ability to suppress alerts (all clients on the network obey these requests)
- Fix: Casual Golf: Book-and-print mode did not work for casual golfers trying to print cards at clubs like Aviation who a) requires a tee booking and b) allow the player to book immediately before printing their card.
- Mod: Verify registration redirect now accepts fully qualified urls, to allow for redirects to club web sites with different domains.
- Add: DDL logging trigger and table so I can put lines on the graphs when schema changes occur.
- Mod: Added styles for manawatu site. Fix: Added the knockout scripts for the competition results.
- Add: Stats for sessionping - old and up to date.  Now we can tell how many clients are pinging us and what their versions are.
- Mod: Kiosk loading is a little less messy now - we start off with a blank screen, then the progress bar.
- Fix: Modified GetProductsToFeature query to get only the current deals. Added the condition "DealDateStart <= getdate()"
- Mod: Removed the Diners site takeover.
- Fix: Performance optimisation for this proc took it down to sub 10ms for most instances.
- Fix: Casual Golf: Pre-print: If you click Enter visitor details you'll now get the ASI popup box when focusing the handicap index field.
- Fix: Casual Golf: When printing a casual golfer scorecard with a handicap from the SCA, and entering this card into a comp, the handicap was not put into registrations properly - "null" showed instead of the handicap index.
- Fix: Casual Golf: Eligible competitions keep reloading and this caused a race condition where sometimes the competitions would disappear off the SIC - just depending on how long each calls takes.  I changed the IF statement here to check for a ScoreCardId rather than using the isByCardNo property as the latter seems to change a few times during a load.  Tested OK, hope this doesn't cause a mess elsewhere. Mod: Abort ajax calls before starting replacements - this speeds up the client.
- Fix: Casual Golf: Show "N/A" rather than "Pending" in Kiosk score entry.
- Fix: Casual Golf: When you print a casual golfer scorecard from the kiosk (so it gets no handicap), the SCA defaults to scratch instead of N/A when you edit the card.
- Mod: Casual Golf: Kiosk: "Are you a member of any golf club in NZ?" changed to "Do you have a membership number?" Fix: Kiosk: Go Back buttons on the non-affiliate Male/Female Adult/Junior sequence reinstated. Fix: Crashbug when trying to print an anonymous card (i.e. no passportid)
- Fix: Tightened up validation a bit as Jaime keeps breaking Adweb!
- Fix: Casual Golf: On casual golfer scorecards we've decided not to show "Pending" or even "N/A" but rather blank so that they can fill in a handicap if they feel like it.
- Fix: Casual Golf: When entering scores via the SIC, competition selections were being offered even if the player did not have a handicap index printed on their scorecard.
- Mod: While entering and editing casual golfer scorecards, the printed handicap was not shown on the SIC.  This required mods to a number of deep areas throughout the SIC and ScoreModel unfortunately.
- 
- Mod: In preprint we now also bring up the ASI box instead of the simple handicap index input box. Fix: Bug where if a valid ASI was returned the service would error out.
- Add: Casual Golf: Scorecard Admin now shows the average score indicator and number of cards returned when you edit a casual golfer's handicap. Add: Pre-print now allows you to specify handicaps for casual golfers.
- Mod: Kiosk now allows casual golfers to enter their membership number and get a card printed.  I had to refactor the kiosk code to pass PassportId around instead of CMember.UID - hopefully this doesn't cause any trouble.
- Fix: ScoreOrdinal for Eagles, Birdies, and Twos for multi round results were incorrect. Adjusted scoreordinal calculation to work for single round and multi round results. MANUAL SCRIPT for fixing existing competitions included, though it needs editing for what competitions to fix.
- Mod: Diners site takeover.
- Mod: Allow searching for casual golfers on the main golf.co.nz site search.  Renamed "Members" tab to "Golfers" to reflect that we're searching for both members and casual golfers now.
- Add: NonAffiliate.Code column populated the same way as Member.Code.  For use with golf.co.nz and casual golf.
- Fix: Prevent you from adding yourself as a friend.  No-one is that lonely.
- Mod: Small html update to title.
- Fix: Changed the condition to look for "members." rather than "member" only.
- Fix: Cents were being discarded when calculating previous amounts paid by the user.
- Fix: Cents were being discarded when calculating previous amounts paid by the user.
- Fix: Cents were being discarded when calculating previous amounts paid by the user.
- Fix: When a non-affiliate deletes their own booking, an empty looking row is kept in My Bookings.  This was because we don't delete the TBTicketEntry rows when bookings get cancelled.  Modified the query to check for live TBTimeSlotEntry rows before showing each booking.
- Fix: "already registered" messages made more consistent. Fix: T&C's formatting corrected so it doesn't span the whole page. Fix: Welcome email REGISTER NOW button removed and marketing content added. Fix: Save RegionId, not CGRegionId, into NonAffiliate table.
- Mod: From 11pm until just before 6am (local time of the club) the leaderboard will only page over once every 5 minutes.  We've slowed this down to reduce the load on our central servers.
- Fix: #99533 Upload scores to GL where a member had no score was getting their handicap calculated and it wasn't capping at 36/45. Cap is now included for no scores handicap calculation.
- Add: Error message when we timeout waiting for scorecard images from the client computer.
- Fix: Mod to Fix where has product code needed to be NG and not MPI: #90018 Clubs with only club websites could not create new markers as it was trying to validate Golf link data which did not exist. Condition changed to allow these clubs to save.
- Mod: Change the Request to a Request.QueryString (to only check the querystring for our t parameter) Also, return false from the IsValidTagOfMode method if the t value is empty, so that it can work for instances where Casual Golfers are trying to register from golf.co.nz (this was broken in a previous commit because the or statement for verifylivemember case)
- Fix: The reset password link in the email doesn't work for Manawatu because they're using a subdomain. The url in the club table is www.manawatugolfclub.com but our system is under the members.manawatugolfclub.com subdoamin.
- Mod: Golf.co.nz: Allow casual golfers to be searched and added from tee booking (part 2)
- Mod: Golf.co.nz: Allow casual golfers to be searched and added from tee booking.
- Add: Quick hack to add master-slave synchronisation so that only 1 instance of the utility will send SMS alerts at a time.
- Mod: Change the default setting to False for hiding the enter all button on the kiosk when entering competitions.
- Mod: Oops, committed config.
- Mod: Snooze only activates for alarm/critical measures now.
- Mod: Latest config file and update to txt format
- Mod: When a user's session expires and they are sitting on the tee booking screen (i.e. StartSheetMonitor is running) they keep getting session expired messages and these are saved in our exception log.  Changed so that this is no longer logged - instead we return an error code to the client which then reloads the page, taking the user back to the Login page.
- Fix: ImageHelper was requiring the w and h (width,heigh) request parameters, otherwise an error would occur. But some controls were using the ImageHelper and not passing w and h parameters and getting silent errors. Have modified so if no w/h is passed, then the image is returned in its original w/h.
- Deleted BCL packages and stuff.
- Ignored some stuff.
- Casual Golf: Allow listing and editing casual golfer scores in the members area.  You can also add a casual golfer as a member of your club by using the shortcut button. Fix: Country was not being shown when you book a casual golfer in through the POG.
- Fix: #90018 Clubs with only club websites could not create new markers as it was trying to validate Golf link data which did not exist. Condition changed to allow these clubs to save.
- Fix: Corrected assembly names for staging EXEs.
- Fix: When you select no competitions and hit Continue the kiosk will just let you keep going without flashing the competition list.  This is due to a blank line that got introduced after a return statement - in Javascript this always causes "undefined" to be returned instead of the intended value.
- Add: New TabCasualGolfer.aspx view so that you can actually see useful data when you select a casual golfer from the Member Search screen.  Note that this page is not active yet - I have simply committed it, the search code is not yet in there, so you will still get an error for now.
- Mod: Performance: Refactored 3 queries (Unallocated Credit Notes, ClubMember and Aged Subs Summary report) to take advantage of the new CMember.IsMRU flag to eliminate resigned duplicate members at clubs.
- Fix: Code Review: Just doing code review at the moment, and it seems that this mod just hides the real problem.  Did you ever find out how “true” was being passed into this page, because that is actually an error condition? Changes: Added the parameter "t" when verifying the email. I couldn't find where the ["t"] is being set to "true", it may be a generic parameter in the HttpRequest.
- Fix: Also handle deleted CMember rows.
- Add: CMember.IsMRU column to replace the dreaded Date_Resigned check and multiple resigned records at the same club.
- Fix: Casual Golf: Improved the step-2 form look a little bit by lining up the columns.
- Mod: #108754 commented out updating member and cmember details when authorising tokens from MP API, as requested by MP
- Add: Casual Golf: New casual golf registration form - iteration 1, hot off the grill.
- Mod: Casual golf integration hooks.  These are all effectively invisible and will only kick in when the URL is shaped correctly (once we commit and publish the new LoveGolf stuff) 1. ForgotPassword.aspx takes the "c" url parameter to pre-set the central member code (for convenience when clicking on the email link) 2. Login.aspx will check for the "c" parameter and automatically go into casual golfer login mode, preset the username and focus the password field. 3. A new encrypted login format is supported now which allows us to simply pass a passportID rather than a memberID.  This mod is backwards compatible with the old tag format so it shouldn't break any of the existing behaviour.
- Mod: Subscription Payments widget on the DotGolf Live dashboard was running slow, modified to use the new Invoice columns for speed.
- Fix: Subs Summary Chart (on the DotGolf Live dashboard) updated to use new Invoice columns for speed.
- Fix: TabRptUnallocatedCreditNotes.aspx report updated to use new Invoice columns (for speed), and also refactored to remove reference to the old ClubMember view.
- Fix: Unbelievably, USGACalcDates has no clustered index even though it had a primary key.  This meant that it was a heap instead of a table which meant just about everything was taking just that little bit longer to execute.
- Mod: Added MemberId and NonAffiliateId to the Invoice table for performance.  Before we had these columns you had to join to CMemberItem/NonAffiliateItem (through the slow ClubMemberItem view) to find out which member an invoice was for - no longer necessary, and indexes on Invoice speed this query up quite a bit.  This mod also inserts the MemberId/NonAffiliate values when an invoice is created.
- Add: Staging poller services - we'll need those when we publish the Staging sites.
- Mod: Only run this for NZ for now.
- Mod: Reverted back to the hills background. Removed Samsung site takeover.
- Fix: Finally got it working - it was because of the way I called sub.UnsubscribeAll - this unsubscribed ALL threads messing up the other listeners.
- Fix: Another test to see why my ManualResetEvent isn't firing.
- Fix: Another test to see why my ManualResetEvent isn't firing.
- Fix: The search result is displaying deleted prices it's because the query doesn't filter out the deleted items.
- Fix: Another test to see why my ManualResetEvent isn't firing.
- Fix: Another test to see why my ManualResetEvent isn't firing.
- Fix: Another test to see why my ManualResetEvent isn't firing.
- Add: more logging
- Add: Logging for my testing.
- Fix: Changed to a ManualResetEvent as a Semaphore wasn't working for me.
- Mod: Use Redis pub-sub to send a message to the CardPrint loops to trigger a print.
- Fix: Semaphore wait didn't work properly - had the initial count wrong.  Also now I check before and after doing the wait just in case something came in.
- Mod: Use pub-sub model to check for cards to be printed rather than the previous spinloop approach.
- Fix: The EmailTracking throws an error that $EMAILID$ cannot be converted to INT because the $EMAILID$ is not being replaced in the online email viewer.
- Add: Concurrent connections limiter.
- Fix: The verify email throws an error because the Request["t"] is set to true. Just added a if Request["t"] contains '-' so it can be properly split.
- Mod: Changed Redis Thread.Sleep to 500 instead of 100ms.
- Fix: Reuse ConnectionMultiplexer as it is very performance intensive.
- Fix: Another copy/paste bug caused blank cards to be output as real cards, so they were not printing.
- Fix: Copy/paste problem caused blank cards not to print.
- Mod: When in Redis polling mode, for the first poll if we have no cards to print, return immediately.
- Mod: Changed the Redis polling loop length to be a Web.config setting so we can tweak it. Mod: For the very first poll after a connector has started up, always do a SQL Server poll so we can get all the cards awaiting printing.
- Add: DotGolf.CardPoller service that polls SQL Server for scorecards to print (for all clubs) and then pokes Connector UIDs into Redis for CardPrint.asmx to pick up and relay to the clubs.  Note: We can easily switch between SQL Server and Redis-based polling by a) stopping the DotGolf Card Polling services on the webserver, and b) modifying the live_Connector_Poll procedure, toggling the @LONG_POLLING_METHOD parameter between REDIS and SQL_SERVER:
- Add: Canadian Foursomes Par competition type.
- Mod: Change the landing page for the 2 under club email.
- Fix: Moved again the location of ClubEditor.config.
- Fix: Changed the folder location of ClubEditor.config.
- Mod: Added the .MinCuteEditor class as a switch for the CuteEditor layout. If the class is present then the Custom.CuteEditor.css and minimum layout will be used.
- Mod: Reduced the size of this image as 560k was too large.
- Mod: Sasmung site takeover (15-17 Jun, 2015).
- Mod: Added the code cleaner so we can remove the tags when updating the content.
- Mod: Limited the number of styling tools in the content control's cute editor but added a new css (CustomStyles.CuteEditor.css) for the Css Class formatting dropdown. What's in CustomStyles.CuteEditor.css should also be in CustomStyles.css.
- Mod: Refactored Aged Subs Summary Report query for performance.  Got it from ~35s down to around 2s for my test case (Clarks Beach against Prod)
- Mod: Added a code in cute editor that only accepts the text and removes the inline styles.
- Mod: Added the "out of office hours" section.
- Fix: Applying the same fix as in Revision 19852.
- Mod: Adjusted the from time for the "outside business hours" to 8am instead of 7am.
- Fix: From SCA when you search for a casual golfer, enter a handicap index and select a comp all in one go, you get ERR_NO_HANDICAP.  If you print the card and then edit the card and add the comp it worked fine.  It now works for both cases.
- Fix: You can now print cards and add non-affiliates/casual golfers into competitions from the POG.  Existing bug: editing a booking does not populate the previously entered handicap index value, but I'll fix that in the future. Mod: Added DebuggerNonUserCode to some methods in Extensions - it's a nuisance to step into ToInt() all the time.
- Mod: Performance: Check for CountryCode=="AU" before doing the more expensive product checks - ISG integration is only for Aus.
- Mod: Added a preview button in the list of emails.
- Mod: The conversion of the start and end date are incorrect so the result of the clicks and unsubscribe reports are wrong.
- Mod: When editing a casual golfer scorecard from the SCA the handicap index the card was previously printed with disappears, making the player ineligible for competitions and taking them out of any comps until the user re-enters the handicap.  This mod will grab the handicap printed on the scorecard and keep it in the handicap index box for non-affiliates/casual golfers, getting around the problem.
- Fix: This is a script to update any incorrect CentralMemberCode values on the cmember table. There should be approximately 65 to update.
- Mod: Oops, did not move this statement above the proper update member statement...
- Fix: 108695 Best x of y team gross and net threw exception when the score totals were high as it resulted in the countback int64 conversion overflow. - solution was to limit the countback for best of gross and net team results to only last 9, last 6, last 3, last 1. - recalc is required for historic competitions
- Mod: The CentralMemberCode was not being updated by the trigger in some instances when restoring a member from another club. This was because the date_resigned value on the cmember table was still resigned when the trigger was being run. Also, we noticed ComputerNo was not set to @ComputerNo which was causing memno to be incorrect for these members.
- Mod: Allow searching for bookings by TimeSlotEntryId as well as the other fields.
- Mod: S3 deprecated SSL. Changed the email images to use "http" rather than "https".
- Mod: S3 now uses TLS and deprecated SSL. Replaced "https" with "http" when uploading an image to S3.
- Mod: Made the banner image and latest news items in the homepage a link.
- Mod: Replaced the "No deals found". Added the registration link.
- Fix: Calculating green fees for secondary members in reciprocal club category, fixed so it works for all other cases.
- Mod: Replaced the "No deals found" text.
- Fix: 90 days text is still shown in the create new offer page even if redemption end date is not equal to 90 days.
- Fix: Getting green fees for members needed to recognise secondary members for reciprocal club fees
- Mod: 109123 Kiosk teebooking updated the message text for members only
- Fix: Clubs that don't have tee booking (TB) could not update member records.  This was because we were trying to set the value to NULL (because the checkbox was hidden due to the missing product).
- Fix: Login bug that crashed user out when their session expired.
- Fix: Login bug that crashed user out when their session expired.
- Mod: Hid the themes for non nzg users.
- Mod: Tiiiiiny performance tweaks - but this code flow is run on EVERY Live/Edge page load, so the net effect might be pretty good.
- Fix: Before you can use SPAM2, you have to activate SPAM first. I changed the code so that SPAM2 is not dependent on SPAM.
- Add: More measurements.
- Fix: Syntax error.
- Fix: Connection leak in test page.
- Add: Test page for database connection timings.
- Mod: Refactored some unnecessary SQL
- Mod: Changed the bulk email link to the new bulk email.
- Mod: Added roles and permissions to the menu.
- Mod: Added roles and permissions to the menu.
- Ignored some stuff.
- Add: Missed this commit.
- Add: Missed this commit.
- Mod: Adapted change from Doug for new CMember.AllowedToBook check from his commit for Public.2012.  I had to do it slightly differently but the net result is the same - member cannot book at the club that has revoked privileges.
- Mod: Use the new CMember.TeeBookingAllowed flag rather than the old TBMember one. Mod: UI changed to allow us to change this flag per-CMember record rather than globally for the member. Fix: Score count now reflects the actual number of scores rather than showing 50 if there are more scores than that. Mod: Upgraded to jQuery 2.1.4 (no more IE8)
- Fix: show_for nz/au wasn't working properly in the kiosk which meant "This slot only allows members of Australian golf clubs." was visible in NZ.
- Fix: Code review - the default result for HasProduct was not set properly. Already set the default result and removed the clubid checking because bulk email will bot be used by clubs.
- Fix: Code review - the default result for HasProduct was not set properly. Already set the default result and removed the clubid checking because bulk email will bot be used by clubs.
- Mod: Support site: Outside of business hours, after you create a ticket you are shown the message "Please note that our normal support hours are 8:30am to 5pm Monday to Friday. If this is an URGENT query please give us a call on (09) 447 1970 to ensure your request is dealt with in a timely fashion." Mod: Support: Moved our phone number out into the Web.config as an application setting, as it is now being used in more than one place.
- Mod: Updated the error message.
- Fix: Accidentally committed auto-team functionality that is not working yet.  Commented out the enabling checkbox so that I can fix it sometime in the future.
- Fix: Removed the "Require Club ID" checkbox because it's not needed for bulk email. Use the parameter ClubIdIsRequired when club id is required.
- Mod: Adds association id to the bulk email tables.
- Fix: The online preview is off because of border-spacing in .body-content table.
- Fix: Oops, empty script committed.
- Fix: Welcome emails are html, not plaintext.
- Add: This procedure, if run daily, will send out welcome emails to all new members registered in the system.  Welcome emails are only sent out on behalf of the member's home club and only if they have not already registered with us.
- Add: More columns to PassportEmailVerify to support shorter email verify tags.
- Mod: Allow a method that results in shorter email verify tags.  These tags don't involve the RSA signature we used before (that made the links very long) and instead saves the critical data into our database where we can trust the integrity - so no more signature required.  This is already used by the daily welcome email sent out to new members (I will commit a script for this shortly).
- Mod: Save club attachments in S3 instead of on local disk.  This makes it easy for us to upload/download them via the central adweb interface.
- Fix: When uploading an image with 100px height, the filename textbox and image cropper overlaps.
- Fix: 109123 Kiosk teebooking has a message with a NZ reference that displayed for Aus. Added Aus message.
- Fix: 106054 CourseHandicapOverride is now used correctly if set for scorecards loaded via Score Entry --> View Recently Entered
- Fix: Adweb click-to-call works again now - as long as you're logged in on Adweb.
- Fix: The clubs cannot login the bulk email because the checking for the clubid from the jwt is in the wrong place.
- Add: 107760 Script for updating TeamHandicapCalculatorClass for Foursomes AU and NZ to the new classes created in rev 20805
- Mod: Restricted the header to nzgolf only. Added the clubid in checking the product.
- Mod: Added a checkbox to add a clubid if required.
- Add: 107760 Team handicap calculator for AU foursome to 2dp and NZ foursome to 0dp.
- Mod: Added the clubid as parameter to check if clubs has spam product.
- Add: Metric monitor code.
- Add: Metric Monitor utility
- Mod: TBMember.AllowedToBook has been replaced with cmember.TeeBookingAllowed flag. This is to allow the setting to be on a per club membership basis, rather than a global setting for the member.
- Fix: When run in console app mode, the Xero certificate paths could not be resolved.
- Mod: Ignored some stuff.
- Add: XeroSync project file and ignored bin/obj folders.
- Add: XeroSync console app that we can call instead of using the ashx handler to fire off these processes.  We've decided to do this as the generic handler will tie up the worker process for longer than is necessary (some of these calls take minutes to complete).  It's also easier to schedule a console app in Task Scheduler than it is to call a handler.
- Mod: Commented out Johnny Walker code to speed up the results query. Fix: This query did not join on ClubId and that caused a lot of extra unnecessary work. Fix: Aliased things as they should have been... Mod: Included column on existing index to speed up the DGE results query.
- Fix: TeeBookingAllowed flag correctly checked for the club of the timeslot being booked into
- Mod: TBMember.AllowedToBook has been replaced with cmember.TeeBookingAllowed flag. This is to allow the setting to be on a per club membership basis, rather than a global setting for the member.
- Mod: TBMember.AllowedToBook has been replaced with cmember.TeeBookingAllowed flag. This is to allow the setting to be on a per club membership basis, rather than a global setting for the member.
- Mod: Added the MaxReceivedMessageSize and MaxBufferSize when retrieving tournament entrants.
- Mod: Added the MaxReceivedMessageSize and MaxBufferSize when retrieving tournament entrants.
- Mod: TBMember.AllowedToBook has been replaced with cmember.TeeBookingAllowed flag. This is to allow the setting to be on a per club membership basis, rather than a global setting for the member.
- Mod: Initial commit to allow other than NZG users to use bulk email.
- Mod: Initial commit to allow other than NZG users to use bulk email.
- Fix: This report was showing future tee bookings that were deleted as if they were unassigned green fee scorecards.  I've included a check to ensure that a scorecard exists before reporting it as an unassigned greenfee.
- Mod: Reverted the bulk email link. Other org users are not ready for the new bulk email.
- Add: This scripts adds a new property ("ShowPopupButton") to the existing Terraces2 Course Control
- Mod: Terraces 2 - Course control - add property that'll show/hide the popup button. This would be used for Karori or for other future clubs who want the button hidden (and placed somewhere else). Currently, a workaround is implemented for Karori. - Te Awamutu style updates
- Fix: Search result fixes on golf.co.nz (DG-4038). 1. When in member search mode, order alphabetically by name. 2. Proper cased member names. 3. Highlight the currently selected search mode tab.
- Mod: DG-4036: Show "N/A" for casual golfer handicaps in member quick search control. Fix: Turns out we were checking for an "S" at the start of the number instead of a "C" - this was a late breaking change.  This caused some styling for casual golfers not to work in the search results.
- Mod: Added the "Olympics 2016" page in High Performance section.
- Mod: DG-4037: Removed "for scanning" terminology after discussion with Alan.
- Add: Error messages into "no permission" page so I can troubleshoot an MSP API issue on prod.
- Fix: 107170 Leaderboard on 2nd competition cycle onwards always displayed adverts after each competition page, even if the setting was set to End of Competition for the adverts.
- Add: This script inserts new properties for the existing Terraces2 Course Control
- Fix: 105252 Course Maintenance marker dropdown now displays the latest marker name for the markers.
- Fix: 108730 Category update was not saving "Use weekday limits" option for "Rule for Public Holidays", due to not saving null of the tristate field. This was due to the proc api_UpdateCategory being used by the DotGolf.API where null passed is intepreted as Do Not Change field value. So new optional parameter specifies if null is to be saved.
- Fix: #108852 My bookings for Aus now hides the "Click to confirm booking" link for payments needed. Aus does not do payments.
- Mod: Terraces2 style updates
- Mod: Terraces2 - Course Control: update the layout (bigger hole image), move elements down. - USlideShow and USocialMedia: add checker if custom css file exists - Template: move the page identifier--wrap all the contents of the body into it. Previously, we're just enclosing the middle contents into the page identifier e.g. page-home, page-contactdetails).
- Fix: The saved 'from' field is not loading the correct value because the function that binds the value is in the wrong place.
- Fix: Oops, turns out wa_SelectClubMemberCount_New is used by DotGolf Live.
- Mod: Changed the url of the Bulk Email link to the new Bulk Email app.
- Mod: Drop most of the unused/test/backup stored procedures.  I have scripted these off NZ1 and added backups into this script in case we ever need to get any one of these back.
- Fix: #107748 POG competition list was showing top 1 marker name for the marker, which made it display the wrong marker. Date added to where clause.
- Mod: Added the help button in the Bulk Email.
- Fix: #101471 Competition results report for team comp was showing deleted entries, so looked like wrong pairings
- Mod: Changed the order of the video list (newest to oldest).
- Fix: Added the fullcalendar.css and jquery 1.6 because the calendar has an issue loading the events.
- Add: Quick links to jump between schema versions for each database (to make publishing quicker)
- Fix: The css and js are not loading for the event calendar.
- Fix: When you change a NonAffiliate booking (with an email address) to a friend or member the email address sticks and the notification emails get sent to the previous nonaffiliate who was booked.  This happens even if you put a nonaffiliate in, enter an email, Submit, then go back and edit the booking changing that nonaffiliate to a friend/member BEFORE you have finalised the booking.
- Fix: When you change a NonAffiliate booking (with an email address) to a friend or member the email address sticks and the notification emails get sent to the previous nonaffiliate who was booked.  This happens even if you put a nonaffiliate in, enter an email, Submit, then go back and edit the booking changing that nonaffiliate to a friend/member BEFORE you have finalised the booking.
- Fix: When you change a NonAffiliate booking (with an email address) to a friend or member the email address sticks and the notification emails get sent to the previous nonaffiliate who was booked.  This happens even if you put a nonaffiliate in, enter an email, Submit, then go back and edit the booking changing that nonaffiliate to a friend/member BEFORE you have finalised the booking.
- Mod: Removed Doug's check for TBMember booking privilege as we want to do this with a new flag on CMember instead - otherwise their booking rights get taken away country wide!
- Mod: Removed Doug's check for TBMember booking privilege as we want to do this with a new flag on CMember instead - otherwise their booking rights get taken away country wide!
- Fix: SS#1683: Allow a category with only resigned members in it to be deleted.  All the resigned members are updated and moved to either UDEF or UDF9 (depending on whether the category being deleted is a 9 hole category or not).  We also check for UDEF/UDF9 existence before attempting this (UDF9 only for NZ).  UI modified to show a warning to the user if members will be updated, allowing them to confirm or bail out.
- Add: Util_TimesheetCompare.ashx for iSeekGolf timesheet comparisons.  This will only dump out a text file with all the detail, it does not apply any changes to TTM at all (we haven't written this yet)
- Mod: DG-4025: Drag and drop through POG (with a cancelled paid booking in the same slot) loses payment info for the cancelled booking, so you can never refund it (as it disappears from the payment screen).
- Add/Mod: Te Awamutu CSS
- Fix: 1. The web config can be edited in the css editor because there's no directory checking. 2. Removed the alert when saving css. 3. Added an update panel in the css editor.
- Fix: Since the server move our health page wasn't working as the hostnames have changed.
- Fix: Didn't notice there were 2 loops running when saving recurring competitions, so the progress bar was a bit all over the place when you tick more than 1 day to generate for.
- Fix: MSC#107390: When a score is disqualified the GolfLink Upload screen still defaulted to "Normal" for the GolfLink score status.  Changed this so it's now "Non-Standard Entry (Disqualified)" by default.  The club can change this to "Illegitimate" if they choose.
- Add: Index for performance of Bulk Email "Add Members" function.  DG-4029
- Mod: Ignored status.json and added web.config change.
- Mod: Add a "System Status" section into our Support page so that we can communicate better to our customers.
- Mod: Added a css editor for the club cms.
- Fix: SPAM2 issue. Cute editor was throwing an error when trying to upload a file (System.IO.DirectoryNotFoundException: Could not find a part of the path  - 270790089). I removed the icons that make you upload files in cuteditor.
- Fix: DG-4030: When saving marker defaults for a club where markers have moved from one course to another (something we normally only do manually) the form breaks with an error message "Marker specified does not belong to specified course".
- Fix: The newly uploaded video shows as processed already even though youtube is still processing it. Set the title and video location null after uploading.
- Fix: DG-4033: Loading sub items from a member's category (eg. when creating a new member) did not work for cyclical categories.  Looks like we only implemented this for periodic categories (those with a sub period id).
- Fix: The video uploaded has a bug because google api v2 was already deprecated. Used v3 for searching videos.
- Fix: DG-4029: Broke the build.  Meh.
- Fix: DG-4029: Bulk email refactored the sql query slightly to get rid of the XML DOM requirement - this will hopefully speed it up.  My change is fairly ugly, sorry, but I couldn't use Dapper for this as it needs a DataSet in the output.
- Fix: DG-4028: When you create a booking from the POG (including a cart) and print a card from the kiosk for the member, you get a duplicate green fee TXLine.  This turned out to be because the system picked up the incorrect TXLine when finding the green fee line to update.  When I fixed this we discovered that the Cart Fee line was never being linked to the Scorecard which meant the player wasn't appearing on the green fee report properly.  Added some dedicated code to update the cart TXLines whenever a card is printed from the kiosk.
- Fix: Saving repeating/recurring competitions takes quite some time especially for many repetitions.  I couldn't really improve on the save time much as it is all done by calling the server save method multiple times, but I have added a progress bar to at least tell the user what is going on.
- Mod: TBApplyBookingChanges now checks for Members Allow booking setting in TBMember table
- Fix: Kiosk Card Print - Applied the EnableCompetitionsEnterAllButton kiosk setting to the Enter All button. Note the setting must still be added manually into Setting table for the club. Setting name is DotGolf.Settings.Kiosk.EnableCompetitionsEnterAllButton
- Fix: #108472 My bookings were not showing upcoming bookings for today, and attempting to cancel todays bookings gave a error. Local club time needed to be compared to instead of getdate() Procs now using dbo.fncLocalDateTimeAtClub(ClubId, 0) instead of getdate()
- Fix: DG-4023: There is a specific case where editing a score does not display the member's handicap index/course handicap information on the SIC.
- Mod: IsDotGolfAdministrator and IsSystemAdministrator user test for Matt now also checks the password. In case there are other Matt users.
- Test: Added time zone test case for Perth Western Australia
- Fix: DG-4022: 4th player details don't fit on the screen when 3 casual golfers selected (tee booking confirm slots page)
- Mod: Changed the background back to the hills. Removed the Hertz (smashing ball) site takeover.
- Mod: System Administration given access to DotGolf only section with Anarchy mode settings
- Fix: DG-4026: Booking a friend who is a casual golfer but used to be an affiliated member doesn't work properly as the booking gets linked to the resigned member ID instead of the new NonAffiliateId.  Added LEFT JOINs to the Member and Nonaffiliate records to ensure the right one is picked.
- Mod: Prevent the errors when printing and exporting to excel, when the report does not allow more than 1 marker per selection for handicap printouts with 2 columns. (this restriction was already in place for the Preview, but was throwing an error in the print/export). DG 953 has the steps to reproduce if necessary.
- Fix: #106054 Score entry entering new score for team scorecard was not using CourseHandicapOverride when passed. It is now set before loading the hole by hole data.
- Mod: Added the LoveGolf logo in the header.
- Fix: Race condition where the Friends list would sometimes not appear when booking players through the POG.  I fixed this by only parsing the response from the GetAllFriends call if its ID matches an ever increasing count that we keep in the booking editor class.
- Mod: Added EditorOnPaste="PasteText" to remove the Word text properties/formatting when copying and pasting to cute editor.
- Fix: Non-affiliate friends of a member did not show up in tee booking if there was no MemberID on their MemberFriends record.  This would only be true for old records as we now use PassportID for linking these up.  I think this would only have been a problem for Matt (2900691) because of multiple Passport records - but for anyone with a duplicate passport this could be an issue - added a WHERE DeletedDate is null to sort this out.
- Fix: Refactored Doug's query slightly to make use of indexes on RSResult by joining via RSCompetitionRoundSegmentEntry instead of directly to RSResult.  This got rid of a PK scan of RSResult so it's much faster.
- Mod: Hertz site takeover. Flash with ball smashing screen.
- Mod: There was a problem where bookings made for casual golfers were not being linked up correctly when the casual golfers were logging in and paying for the booking. This prevented the non affiliate from actually paying for the booking (should the person be a member, it was also not linking them up if the original person making the booking booked them as a casual golfer rather than a member). e.g. - Player A home club A logs into home club A and makes a booking for 3 casual golfers - the casual golfer gets the email with the link /Teebooking/CompletePayment.aspx?code=XXXXXXXXX, and logs in as a casual golfer (or a member) to try and pay for the booking. Prior to this change, the system would prevent them from paying for the booking. NOTE: This was only a problem if 4 PLAYERS were booked, anything less than 4 players the system would allow them to continue by shear luck.
- Fix: Quick styling hack to prevent the UL/LI bullets appearing over the top of the tab text.
- Ported these fixes from golf.co.nz:
- Ported these fixes from golf.co.nz:
- Fix: Realised that the 1 minute timeout warning doesn't appear on the ConfirmSlots page.
- Mod: Added a text warning at the top of the ConfirmAmounts page to let the user know they've got 5 minutes to complete the booking. Mod: Log the "Failed to re-reserve timeslot for 10 minutes in preparation for payment." message in the exception log for future debugging.
- Fix: To prevent just anyone called "matt" from seeing all our hidden sections, we now check for the cv..iu password as well as the username.
- Fix: Add "and Date_Resigned is null" in the query
- Fix: Reverted the PreBuildEvent. This was originally here and was just mistakenly removed in my last commit (20630).
- Fix: Issue: 9H Member (3414613) cannot book a 9H slot in golf.co.nz.
- Fix: DG-846: When you have multiple All Competition Types Placegetter lines on a prize template, the checkboxes to pick the competition types were conflicting across the lines.  This meant that if you unticked Gross on the first line, that would stuff up the second line, and often the box will just stay ticked after postback.
- Fix: Haha, we thought committing untested code is bad... now I'm committing code that doesn't even compile!!
- Mod: DG-4019: Implemented the correct American Foursomes handicap calculations for NZ.
- Fix: DG-4018: Lock timeslots when members edit bookings. Mod: Automatically redirect back to the My Bookings page just before the lock expires (both from ConfirmSlots.aspx and ConfirmAmounts.aspx).  I've added a warning 1 minute before this happens so the user isn't completely caught by surprise.
- Mod: drop table statement would have caused runtime errors.
- Mod: Added a spacer image in the text and image layouts.
- Test: Ticket DG-4007 (ignore this commit)
- Test: Ticket DG-4007 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 DG-4002 (ignore this commit)
- Test: Ticket DG-4001 (ignore this commit)
- Test: Ticket DG-4001 (ignore this commit)
- Fix: DG-4001: missing some fixes previously applied to golf.co.nz but not book.golf.co.nz.
- Mod: - Update the standard naming of custom styles for the controls: [controlname].css instead of CustomStyles.[controlname].css
- Mod: Style updates. - Extract the styles that will be customised per site. Transfer to the custom styles that'll be in clubs/[club id]/[control name].css
- Mod: Terraces 2 controls: - Update the standard naming of custom styles for the controls: [controlname].css instead of CustomStyles.[controlname].css - Add this custom css to controls which don't have it yet - UCourse: update naming of some css classes
- Fix: Corrected the date comparison in js, using a new custom function "parseDate".
- Add: Index for performance.
- Add: Index for performance.
- Add: System Administrator asset group for permission checks. Green fee options DotGolf only sections are now visible to System Administrators e.g. webadmin and matt users
- Mod: Move the nine hole logic away from the member record and to the category record for printing handicap reports.
- Fix: POG create booking adding a friend now recognises if they are a nine hole member
- Fix: Queenstown-Frankton course was visible on SCA when it shouldn't be (it has no active markers).  This was originally fixed in rev 16923 but subsequently broken when I did a refactor (for performance reasons) in rev 18703.
- Fix: The dateto in the GetEventsCalendar is wrong. Updated the search link to load the calendar when in list view.
- Fix: DG-969: In rev 19939 I refactored the scorecard reports to add a subreport for the player names and handicap information.  The "Tick to Qualify" box is also on this panel and I missed out a line of code to copy the visible value for this box over to the subreport.  Reported by Muriwai.
- Fix: Oops, stuffed up Live logins with my last commit.
- Fix: #106054 Team score course handicap used for calculations was not using the course handicap override if passed through. Fix: #107365 Display of course handicap for editing team score is now fixed.
- Fix: DG-1008: Entering a score with a not-played hole somewhere on the back nine (for a 9 hole card) caused an error - index out of range.  This was because the pickup checking code never worked for back nine cards.
- Fix: Minor UI fix in the Calendar.
- Fix: Changed the Calendar web service namespace.
- Mod: Change the behaviour of the event calendar. The loading of events is through previous and next button instead of the search button.
- Fix: Show team competitions in My Competitions
- Add: Index for performance.
- Mod: Changed the default background back to the hills - not Lyds.
- Fix: Same as svn 15606 - but not applied to ClubCMS...
- Fix: Same as svn 15606 - but not applied to book.golf...
- Fix: Removed USE
- Fix: Aliased inline query to make it safer (if the ScoreId column on @t ever changed names this query will still run - except it'll update EVERY score record to the same memberid)
- Fix: Error in the @Model.SelectedOrderDetail.Product.RedemptionDateEnd.ToString("dd-MM-yyyy") because product was not initialized.
- Add: Very basic backup functionality to keep copies of files overwritten by renaming/uploading, and deleted files.
- Fix: Another instance where the Continue button doesn't work for Riverside.
- Mod: The scores were not being updated via this "new member" path. (api_AddMember is doing this, but unfortunately we are not using api_AddMember everywhere in the system yet!)
- Add: Wanganui swipecard format 134754000 (no ; or ? - thanks IDS!)
- Mod: This allows vouchers to be redeemed even after redemption date has ended.
- Mod: Removed $EMAILID$ and $CODE$ replaces and UPDATE Email set EmailMessage= statement because the Mailer service now does $CODE$ and $EMAILID$ for us on the fly - this saves an update statement. Fix: Logic bug: If you have an attachment to a bulk email but no inline images, your attachments won't be sent. Mod: Removed an unnecessary temp table. Mod: Added SET NOCOUNT ON just in case this saves us some time (while running this 60,000 times over)
- Mod: DotGolf Mailer will now take care of $CODE$ replaces as well as $EMAILID$ so we don't have to do this while generating bulk emails into the Email table.
- Add: Index to speed up CWEmailComposeAttachment lookups as part of the bulk email send process.  This is an attempt to save some DB CPU, not sure if it has worked though.
- Mod: Remove message about admin username and password. This was removed so not to confuse a 3rd party helping out when building club websites. I don't think we use this admin account any more anyway, but I have not removed it from inserting into UserSecurity just yet.
- Fix: MSC#93629 Portal My bookings Add to Google calendar was not showing for each booking, only the last one.
- Fix: MSC#106487 Waitlisting for < 4 player slots POG was not showing the Waitlist button in the bubble menu.
- Fix: MSC#93629 Portal Confirm non payment Add to Google calendar needed the UTC time converted from the slot time by the time zone of the clubs region
- Add: File Manager area to allow uploading/downloading/deleting/renaming of files in each club website folder. Mod: WebForge username check added and restricted to club websites only.  We need to insert a "webforge" user into ExtUser for this to kick in in production.
- Fix: MSC#95946 Show team competitions in Competition Results My Competitions view
- Fix: Riverside DG-1071: Continue button on kiosk (competition entry page) not working when there is a competition on at the other course to the one we're printing a card for.
- Mod: Reverted the background to Lydia.
- Fix: MSC#106487 Already fixed but this removes unnecessary line in proc
- Fix: MSC#106487 Waitlisting for < 4 player slots was failing.
- Fix: MSC#93629 Portal My bookings Add to Google calendar needed the UTC time converted from the slot time by the time zone of the clubs region
- Fix: MSC#105759 Kiosk required a check to restrict members playing on public holidays if it was out of their category
- Fix: Removed unnecessary null check as GetSqlParameter already does this.
- Fix: Invalid cast exception in green fee timeline report.
- Mod: Site takeover with link. Mission Hills theme.
- Mod: Added in an extra check since we are joining to passport - just to make sure passportid is not null
- Mod: Forgot to include deleteddate
- Mod: Change back to Lydia in prep for Monday.
- Mod: Change the background image on golf.co.nz
- Fix: Left a ROLLBACK TRAN in there.
- Fix: So it turns out that Canadian Foursomes is 40% of the combined handicap, where Aus is 3/8ths.
- Fix: #158 Kiosk adding players to an existing booking was saving added entries with new ticket id. Now the ticket id is passed through.
- Fix: For fixed fee group bookings, don't let the user change the green fee to a "normal" green fee, because this causes duplicates in the green fee reports (because of the duplicate TXLine records all containing the link back to the Group Booking.  For per-person paid group bookings we still allow this as it doesn't appear to cause any trouble.
- Fix: Throws an error when SQL Recipients is chosen in the email details because of a wrong parameter name.
- Mod: Updated comments
- Fix: Error in transforming the null cm.Email to lower case.
- Fix: When you click on a fixed fee group booking in the POG, the green fee that appears in the bubble makes it look like the green fee is for a home member (no green fee) instead of a group fee.  Fixed to show "Group Fee" / "Fixed Price" same as the booking editor does.
- Mod: api_MergeMember was not merging the scores correctly since the 9 hole handicapping change. 1. The passportId was not being updated 2. The rollover calculation was still using the old rollover calculation (this would have been a problem before the handicapping change too!!!) NOTE: Before running on the live system, but after it has been checked for testing, I would like to test it and run the following on prod: exec api_MergeMember @clubid = 401, 	@memberid = 660318, 	@othermemberid = 209810, 	@othercomputerno = 5261221, 	@firstname = 'Brian', 	@lastname = 'McGinniss', 	@FailedReason=@failedreason OUTPUT
- Fix: Kiosk friends and member results lists with new Friend buttons is now responsive and displays one column results when screen width < 1500px
- Mod: Show emails even without links in the clicks report.
- Mod: Show emails even without links in the clicks report.
- Mod: Added the links detailed report.
- Mod: Added the links detailed report.
- Fix: Group bookings with fixed fee - the fixed fee group was not showing in player booking group fees, only per person group fees were showing.
- Mod: Added the open count in the click reports.
- Mod: Added the open count in the click reports.
- Fix: Bulk generate timesheets were always using club defaults for release times. Now uses templates release times if set. MSC #106584
- Fix: The bulk email link in the header lacks "/".
- Mod: Added a preview in the sent items list.
- Mod: Added a preview in the sent items list.
- Fix: Page breaks were not happening correctly.  Oops.
- Fix: Changed draw report to try and keep the fields 2 on a page.
- Fix: Commit 2 of 2: Corrected the ordering of two sql scripts as they were numbered the wrong way round, so errored out when I ran them against staging.
- Fix: Commit 1 of 2: Corrected the ordering of two sql scripts as they were numbered the wrong way round, so errored out when I ran them against staging.
- Fix: The promo banners are throwing an error because of an invalid cast in the entry fee (rounding 0 to 2 decimal places). I have added a checking if fee is equal to 0. Also, GetPassportId() has changed which is used in different areas. I have updated the code to GetPassportId(false).
- Fix: Build error caused by refactor in rev 20511.  Added missing parameter set to false so that it mimics the way it was before the refactor.
- Mod: Added links to the GOTG email.
- Mod: PassportId's were incorrectly being inserted into the database when a member was being created. This resulted in the overnight job not being able to run to cleanup member and cmember records with a date_resigned 1999-11-11. This required quite a bit of refactoring as we moved the insert of passport away from the TabMemberNew page to the TabMember page (on save). But we needed to keep track of whether this person being created was originally a casual golfer, and update/insert passport accordingly. Enjoy testing, but the test cases to try would be a) brand new member (non affiliate) b) brand new member (affiliate) c) new member transferring (restoring affiliate) d) new member adding as secondary/home e) new member previously casual (deleted non affiliate and non deleted non affiliate)
- Add: Ability to print different Message of the Day and Advertising Message values on scorecards for different courses (but not for North Shore as they are "different").
- Mod: Removed the check for if the score was entered on the Wednesday. The example being was @memberid = 599179, his scorecard on the 25/03 printed with a handicap of 16.4, but it should have been 16.5
- Fix: For Best 3 of 4 team competitions, the score ordinal was not being calculated properly (it was taking the best 3 of each hole score across ALL rounds rather than EACH round for the team).  This caused results to appear out of order, even though the total score/points were correct.
- Fix: Reverse Tees draw generation method did not work for clubs.  Remuera reported this under DG-913.
- Fix: Oops, didn't script triggers. Mod: Removed another Debug.WriteLine.
- Mod: Removed Trace output as it clutters my NUnit trace window.
- Fix: When calculating best x of y competition results, pick Withdrawn or Disqualified results only if there is no other option - this is because we have to show DQ or WD for these competitions, otherwise I would have simply excluded them.
- Mod: Updated Results NUnit tests to work on Dev4.  Refreshed root database schema while I was at it, we're up to 1570 now.
- Mod: Added a console.log to display the booking editor load time, useful for diagnostics.  Long term goal is to get this data into Vortex, but currently we have no JSON interface for that. Mod: Cleaned up a bunch of old console.log calls.
- Fix: Optimised query to speed up POG booking editor load time when clicking on a slot that has spaces available.  I changed LEFT joins to INNER joins (because of the where clause they were effectively inner joins anyway), and also removed an explicit null check and replaced with ISNULL(,-1).  This is a bit counterintuitive but it does get a quicker plan.
- Fix: Incorrect competition type name in my script.
- Mod: Re-worded enforce signatures on scanning card setting to make it clearer that we are checking both signatures.  Also the help was pointing to the kiosk "note" help, so I've written new contextual help for the enforce signatures option.
- Fix: Ads were being shown after each page of the last competition in the leaderboard cycle when set to "End of each competition" mode.  Fixed so that it only shows after the last page of each competition now.  MSC#107170
- Mod: Reverted dual mailserver setup to change everything to mx3.golf.co.nz.
- Fix: Invalid cast exception.
- Fix: Added course name into Composite Marker maintenance screen so that this works for multi-course clubs like Taupo and Riverside without us having to guess which marker belongs to which course. Mod: Ignored some folders.
- Fix: When changing a competition setup for different markers for each round back to a single marker setup for all rounds, changes were lost and not committed to the database because they were not properly copied from the first round of the competition.
- Mod: Reinstate the mod to add the fraction into the score ordinal as we need this for Ambrose competitions.  Will need to recalculate Ambrose competitions.
- Fix: SignalR caused scorecard print screen to show cards at both courses when they were entered.  Now when a scorecard is returned it is only updated at its own course.
- Fix: Can't use @MemberId parameter to determine if the member is a 9H Member. If the request is from POG, null value is passed from the PointOfGolf.Services. (And this is because the request could handle up to four bookings/members.)
- Fix: Default/default: When saving a mixed gender multi division comp with different markers for each div, the "Same markers across all divisions" combo comes back as "No" after you save, putting the form in an invalid state.
- Add: UF#151 Kiosk add friend added to Add Player screen member search results. Remove friend added to Add Player screen Friend list.
- Mod: Refactored Connector API code to extract 2 procedures for getting the print queues.  Hopefully this will help SQL get better plans for these calls.
- Mod: There was no clubid check being done here. The example to look at was memberid 492228 where they were trying to use the same code they had previously at another club, for their new club 580. I have also removed the check whether they were live or resigned, because does it really matter? You should not insert if either.
- Fix: Confirm booking pages now pass the Send Notifications flag to Apply bookings. Previously the emails were always sent, even when Send Notifications was unticked.
- Fix: POG slot waitlist dialog, removed Add Waitlist button, and shows message if waitlist is empty
- Mod: Style updates. For Remuera: place the edit mode options at the right.
- Mod: Update the properties of new Image Content control. Update the schema of the new CWImageContent table. Add script for creating and populating CWImageContentTemplate table.
- Mod: Style updates--swap the icon and the text for show/hide options. Use js to hide/show form fields when the layout dropdown value is changed. Make the definition of the template dynamic—use CWImageContentTemplate table. Update the control properties—-leave only one set of Width and Height.
- Fix: When rounding without MidpointRounding.AwayFromZero, rounding 20.5 to 0dp results in 20 which isn't good for Foursomes team handicaps.
- Mod: Image Content control - hide options on load
- Mod: Updated comment
- Add: This scripts add a new table called CWImageContent - This is used by the Image Content Control to save the Image ID, Image Navigate Url, Decription, and Button Text
- Fix: Missed out the course name in the header of the Search Slots page.
- Add: This script inserts a new 'Image Content' control and its properties
- Add: Logging to ClubCMS for iSeekGolf bookings.
- Add: Image Content Control - This new control allows clubs to upload an image (for their banner/header) on their own.
- Fix: The $ONLINEHOST$ was not being replaced. Hardcoded the "org.golf.co.nz".
- Mod: Added links to the social icons in bulk email.
- DFH Reverted as I'm not sure killing off the inheritance is the right way to tackle this: DG-721 Only DNF a multi round result if all the rounds were DNF. A single DNF round no longer causes the multi round to DNF.
- Fix: DotGolf.BulkEmail.Common was referencing the MVC DLL from DotGolf.BulkEmail's bin folder.  Changed to reference packages folder instead.
- Fix: Removed test code.
- Mod: Tee booking emails should include the course name when dealing with separated course clubs like Riverside.
- Fix: Add course name into CostTableControl so you can see which course you're booking for on the amounts page.
- Fix: Media Export for NZ Golf results had .0000 after each total score.
- Mod: Riverside: Green fee popup now works for separated course clubs. Mod: When clicking on a club-course-day to book, you get taken to the SearchSlots page which now only shows slots for the selected course.
- Add: CourseId column to results (for public teebooking filtering)
- Add: Checking for separated courses for multiple course clubs like Riverside.  This effectively means that the WOTIF page on golf.co.nz can now have 2 different lines across for the 2 courses, however I've yet to make a few mods to make this work properly.  At the moment, at least, they are displaying correctly sans les green fee.
- Add: New column to track whether a club with multiple courses has its courses listed separately on SearchClubDay / WOTIF.    TBClubSettings.SeparateCoursesForTeeBooking bit not null default 0.
- Mod: Hardcoded mx1.golf.co.nz for emails > 128 priority (so all the bulk mails), mx3.golf.co.nz for <= 128 (the non-spammy mails so we can build some reputation).
- Fix: Category Member Counts report: Increased the width of the delta columns as they could not accommodate 3 digit figures, leading to wrapping and ugliness.
- Add: Index for performance when querying the Receipt table for balance info.
- Fix: Improved performance of Member Balance report by splitting the query up into 2 parts - the first query gets the list of members into a temp table, the second calculates the balance for each member.
- Fix: Index to speed up member balances report.
- Fix: Performance problem in the Category Member Counts report.  The report was taking minutes to return instead of seconds.  This was due to no filtering being done on the ClubMemberHistory view, which meant that the only way SQL could do this was to evaluate every CMember record joined to @clubId, which was very resource intensive.  Added WHERE conditions and it has sped up - load time down to a couple seconds for more than a year's worth of movement data.
- Fix: Curses, broke the build.
- Fix: When ShowDecimalPlacesForCourseHandicap==0 we should not have any fractional component.  This is the case for Net Foursomes competitions, so if a team ends up with 12.5 they are rounded up to 13 (and the CourseHandicapFraction is 0.0).  For Ambrose (which is to 2dp) we still round from eg. 18.166 to 18.17, and the fractional component is 18-18.166 = 0.166 which is then rounded to 0.17. Fix: The course handicap was simply casted to an int which means it was truncated rather than rounding.  This would have yielded team handicaps that were too low (for ambrose).
- Fix: Javascript exception because of a Chrome specific piece of code.  This caused many JS errors to be logged in the exception log.
- Mod: Removed sorting by Registered date as it is broken anyway.
- Fix: Registration sorting: Date conversion issue because of inlining of viewmodel data (to speed up loading the page initially).  This affected sorting the table, and also some dates appeared as the previous day due to incorrect UTC parsing.
- Fix: The bubble's z-index is higher than the Add New Player popup in Tournaments Registrations.
- Fix: Registrations sorting: Crashbug when a country is to be displayed rather than club/NZ.
- Add: Sortable table headers for tournament registrations, same as the old page used to have. Mod: Changed some fields to computed backend values so that we can sort on the same values that we display.
- Fix: Oops, didn't script this properly.
- Fix: For fractional course handicaps (like foursomes net) the ScoreOrdinal was only based on the rounded score, not including the fraction.  This caused the ordering on the report to be out, like 65.5 net could appear below 66 because they both round to 66.  Ticket was DG-1017 for Pukekohe.
- Fix: DG-721 Only DNF a multi round result if all the rounds were DNF. A single DNF round no longer causes the multi round to DNF.
- Fix: DG-932 Competition eligibility check for category freeze was using the wrong HandicapIndex. It now is calculated against the players HCI from the first round played for competitions with frozen categories.
- Mod: Change out background image
- Mod: Ensure that if the club changes a green fee, we correctly separate them on the green fee summary report. The drill down will also now separate them correctly. Here is an example for Tauranga between 1 Apr and 10 Apr where they changed the green fee. http://live.golf.co.nz/TabRptGreenFeeTimeLine_NG.aspx?ClubFee=G_6381&CheckMode=LINK&tbFromDate=1%2f04%2f2015+12%3a00%3a00+a.m.&tbToDate=10%2f04%2f2015+12%3a00%3a00+a.m.&DetailValue=Y&CartFees=True&GroupFees=True&OnlinePayments=True As an aside, Michelle changed the green fee on 1 Apr, but some green fees were already assigned prior to 1 April meaning they still got the old green fee.
- Add: Waitlistings displayed on My Bookings page UF#155
- Mod: Cache Setting table for @ClubId into an indexed table variable because it is queried often, and these queries multiply pretty quickly when you're doing it for 10+ scorecards. Add: Some comments - specifically --LONG_POLL so it's easy to filter these calls out in Profiler.
- Add: Index for performance.
- Fix: Forgot to script DROP.
- Mod: Added AdditionalCompetitionLines, GreenFeeAmount and ScoreCardAdvertisingImageId to included columns on this index, as looking up these fields from the clustered index caused a 40% penalty in the Connector scorecard printing API call.
- Add: Index to speed up card printing API calls.
- Add: Index to speed up card printing API calls.
- Fix: Yeah, that's what happens when you commit something before testing it...  Crashbug on save fixed, now actually works as intended.
- Fix: Stop Adweb from creating a nationwide holiday (ClubProvinceId==0) and then also a province specific holiday.  See MSC#105819.  Needed because I just removed the Holiday.Date unique key to allow per-state holidays for the same date.
- Fix: Holiday table previously had a unique key on [Date], this is no good as it turns out - Aus has various dates during the year where only some states have holidays, others don't.  I've had a look through the source, and everywhere we join Holiday we normally also check that ClubProvinceId is set to a province OR 0, so I'm hoping this won't be a problem.  See MSC#105819.
- Fix: Performance: Removed superfluous LEFT JOIN, changed to INNER JOIN.
- Fix: The result in the matches page is incorrect because the query doesn't take into consideration if the match is complete or not.
- Fix: The overall results is not correct because of the wrong if statement that checks the in progress match.
- Fix: Pennant results displays the wrong conclusion because it's not taking into account the "in progress" matches. Fixed inline c# code in frontend.
- Add: Indexes for performance.
- Fix: Tournament registrations: When you are not NZ Golf, you can't add players by searching for their member ID.  This was caused by a "feature" where we only show DOB and address/phone number info to NZ Golf, but it broke anyone else trying to do the same, when it should just be hiding the details.
- Mod: Remove the newly added statements in the body of the Password Reset email (i.e. "Someone has clicked on Forgot Password....If you did not request this...") because this is already in the footer.
- Mod: I have broken up a query into multiple selects to reduce lock contention.  This should speed things up as we don't have to get S-locks on all these tables before the (rather large) SELECT query can execute.
- Add: Fix: If the player is not a home member, use the Member table only in determining if the player is a 9H member.
- Fix: If the player is not a home member, use Member.NineHole in checking if the player is a 9H member.
- Fix: If the player is not a home member, use Member.NineHole in checking if the player is a 9H member.
- Mod: Added a link in the logo and few minor UI changes.
- Mod: Style modification for the Support page. Used bootstrap.
- Mod: Just made the query (if member is 9H) consistent--using "if exists", just like in the SearchSlots.aspx.cs code
- Fix: If the member is not a home club member, get the category from their own club.
- Fix: If the member is not a home club member, get the category from their own club.
- Mod: Added TeamUserSecurity table for the AUS pennants user security.
- Mod: SendForgotPasswordEmail - update the content of the email; specify which site the password reset request came from in the body and the subject.
- Mod: Update the way we check if the player is a 9H player. If the player is a home club member, get the category from the home club. Otherwise, get the category from their own club.
- Mod: Add insert into CWControlPropertySetting - inserts the setting of the FlashMovie (e.g. ${club_root}/images/slide1.jpg) for the new pages: Forgot Password and Password Reset
- Mod: If a player is a home club member where the booking is being done, get the category of the player there. Otherwise, get the category of the player from his/her primary club.
- Mod: wa_TBLoadSlotDetails - use Category.IsCategoryNineHole to determine if the member is a 9H player. Previously, we're using Member.NineHole
- Mod: The credential fields when adding a team in pennants settings are now hidden by default but I added a Create and Update User button to show these fields.
- Fix: Extended the client browser timezone data generation and upload to -4 +4 years rather than -1 +2.  This is to allow date conversion for dates way in the past - like this competition that Waitemata is running - http://live.golf.co.nz/Competitions/Competition.aspx?CompetitionId=379605.
- Fix: From David's code review; "I note you added an if statement to check whether you can construct a Competition instance, but in the next line (script +=), you still call c.TournamentCompetition – this will throw an ORNS exception if CompetitionId==0.  So the net effect of this commit is the same – it will still error.  Or am I missing something?"
- Mod: Updated the behaviour when adding and updating user security in pennants. If it is a new Team OR an existing Team without any credentials > Create New User If it is a team with existing credentials > Update User
- Fix: & should be &amp; for valid html.
- Mod: Made DotGolf.Mailer single threaded again as we're going to change to a mailserver that is closer to us.
- Mod: In the Team Maintenance page, instead of disabling the team dropdown list, we are now displaying teams and as referenced to the user security id.
- Mod: Added the add and edit login user in the setup page.
- Fix: Bug that caused searches in autocomplete control to fail if you haven't typed the comma yet, eg. "smith, m" works, but "smith" doesn't.
- Fix: Bug that caused searches in autocomplete control to fail if you haven't typed the comma yet, eg. "smith, m" works, but "smith" doesn't.
- Fix: Bug that caused searches in autocomplete control to fail if you haven't typed the comma yet, eg. "smith, m" works, but "smith" doesn't.
- Fix: Bug that caused searches in ClubCMS autocomplete control to fail if you haven't typed the comma yet, eg. "smith, m" works, but "smith" doesn't.
- Mod: Added an ability to add team user security in the pennants settings page.
- Mod: Initial commit for the new pennant user security.
- Add: Index for performance.
- Fix: Another @TicketNo implicit conversion issue.
- Fix: Performance issue due to implicit NVarChar to VarChar conversion.
- Fix: Prevent memory leaks - dispose of SmtpClient when we're done with it.
- Fix: Can't call SmtpClient.Send multithreaded - must use different instances - http://stackoverflow.com/questions/389709/why-can-smtpclient-sendasync-only-be-called-once
- Mod: Parallel send emails to make things go faster.  The distance between db4 and mx1 is causing us some delay in outgoing email send speed.
- Mod: Added a focus to the SSO's username textbox.
- Add: Test method for checking database connectivity.
- Add: DataTable.ToList<T>() method that converts a data table into an array of objects - useful for sending a DataTable out via JSON.
- Mod: Added a "loading" notification in the clicks report.
- Mod: Added a "processing" notification for sent page.
- Fix: Hide Both courses select.
- Fix: If scorecards are printed for other courses and RestrictedToCourseId is set for a user, don't show scorecards coming in through signalR for those courses.
- Fix: Null reference exception if your session expires and the kiosk is still pinging for a schedule.
- Mod: Added the Email Subscription Type filter in the sent page.
- Mod: Added the Email Subscription Type filter in the sent page.
- Fix: Updated service url from demoorg.golf.co.nz to org.golf.co.nz.
- Mod: Added the link highlight.
- Mod: Changed button names in drafts page.
- Mod: Added new tables for Bulk Email.
- Mod: Changed the default page to templates page.
- Mod: Changed the Bulk Email link to point to templates page.
- Mod: Minor UI changes.
- Mod: Initial commit for clicks reports.
- Mod: Initial commit for clicks reports.
- Add: Very rudimentary ability to start/shutdown Dev3 via the AWS SDK.
- Fix: Error when trying to instantiate Xero certificate containers on Windows 2012 with IIS8 /.NET 4.5.  Source: http://www.checkoutall.com/CodeSnippet/Category/C-Sharp/201501160242537920/IIS-crashing-while-creating-instance-of-X509Certificate2-Windows-2012-IIS8-.Net-4.5
- Mod: Use Category.IsCategoryNineHole in determining if the member is not a 9H member. Previously, we're looking at Member.NineHole.
- Mod: Initial commit for reports - unsubscribed.
- Mod: Initial commit for reports - unsubscribed.
- Fix: Use Category.IsCategoryNineHole in determining if the member is a 9H member. Previously, Member.NineHole was used.
- Mod: Updated a code comment only
- Fix: BuildSlotsTable - Use Category.IsCategoryNineHole in determining if the member is a 9H member. Previously, Member.NineHole was used.
- Mod: userIsNineHoler - shorten code and add comment. Ensure that there is a returned boolean value.
- Fix: BuildSlotsTable - Add condition "and cm.Date_Resigned is null" to ensure we're getting an active member record
- Mod: Ensure that we are joining to an active member record--add "and cm.Date_Resigned is null" in Line 118
- Add: Alter sp wa_TBApplyBookingChanges - use Category.IsCategoryNineHole in determining if the member is not a 9H member (not anymore Member.NineHole)
- Fix: Check if the member is a 9H member using the assigned Category (Category.IsCategoryNineHole).
- Add: Spec doco for changes to Pennant User Security.
- Mod: Changed the prompt button text when saving. Added a create draft in the templates page.
- Fix: Preloading the GroupCompetition when creating a new section.
- Mod: Forgot Password - style update: add margin-top
- Fix: When deleting articles, the order get messed up. Added a condition in the delete article script.
- Mod: Add ForgotPasswordPageName property to Login Control
- Mod: Login Forgot Password link - redirect to Forgot Password page; style updates
- Fix: Changed DOB date format from "yyyy/MM/dd" to "dd/MM/yyyy"
- Fix: Broke the build, oops.
- Mod: Another performance mod - changed ControlSupport.asmx to use BulkEmail.GetEmailSendStatus, changed the latter to a static method so we can get to it, and finally changed the SQL inside GetEmailSendStatus to no longer join to Email as that is not needed - we mirror the Sent, Failed and Bounced values to CWEmailRecipient via a trigger, so no need for this expensive left join.
- Mod: Enclose the checkbox and text "I have read and accept..." in <label> tag so that the user can also check the box by clicking on the text.
- Add: Inserts to PWPageControlSetting - for the Twitter feed on golf.co.nz's home page
- Fix: Removed unused code in bulk email.
- Fix: Corrected the Twitter url / account name from "NewZealandGolf1" to "nzgolf"
- Fix: Get the ClubWebsiteId from the selected item in the "Select Website" dropdown menu.
- Fix: Changed the @InlineImages condition to "AND" from "OR"
- Fix: Added a checking if @InlineImages is not null.
- Mod: Removed XML preparedocument and did the same thing with concatenated/split strings.  Much faster than the XML DOM overhead in SQL, especially because we're looping this call.
- Fix: Specify a date format for the date picker.
- Mod: Removed dynamic sql to take the strain off the database when sending a bulk email.  Changed to use Dapper instead of Database.Execute since this query is being run many times.
- Fix: iSeekGolf code threw an invalid cast exception when you try to add a new block to an existing timesheet.
- Mod: Added a create new draft button in the drafts page. Refactored sent page controller code.
- Mod: Added a create new draft button in the drafts page. Refactored sent page controller code.
- Fix: Performance issue in wa_TBMoveTicketToSlot.
- Mod: Forgot Password / Password Reset -add title to the control -add checking if a page exists (for the Register link) before adding a link to it -update styles
- Add: 1538 - inserts the two new controls and adds a new property/setting for Login 1539 - inserts two new pages to each club site, with the new controls in it
- Fix: Throws an error when the competition = 0. It's because the query for the calendar sets the competitionid to 0.
- Fix: The number of returned members and non affiliates in the recipient list is incorrect. Added a checking for null passportid in the query.
- Fix: Move greenFeeAmount = greenFeeDetail.Amount inside the condition (greenFeeDetail not null)
- Mod: Added create new template in the sent items.
- Mod: Added create new template in the sent items.
- Mod: Added GetEmailRecipients.
- Mod: Added GetEmailRecipients.
- Mod/Add: Forgot Password in the Login Control is now a link to a different page (Forgot Password page). Previously, we email the password itself to the user. Now, we're emailing a password reset link, which brings the user to the club site's "Password Reset" page. The user is asked to enter a new password on this page.
- Mod: Update the title from Constitution to CONSTITUTION POLICIES & BOARD MEETINGS (as instructed by Dean at NZG)
- Mod: Added recipientfrom in GetEmailDraft.
- Mod: Disable recipient from dropdown if database.
- Mod: Added more details to the bulk email notification. Changed the recipient limit to 200.
- Mod: Added more details to the bulk email notification. Changed the recipient limit to 200.
- Mod: Added a notify button and removed the send button when a "database" email has been created.
- Mod: Added a notify button and removed the send button when a "database" email has been created.
- Fix: The shop bubble is appearing even when the shop link is already hidden. Added a checking if user has permission.
- Add: Default for CWGallery.CreateDate - caused problems when creating new galleries in ClubSpace.  Found this while testing Staging.
- Mod: Added the edit details link in the one column theme.
- Fix: Changed the GOTG url in the menu.
- Mod: Changed the recipient list logic on load. Added the recipient id and email in the table.
- Mod: Delete old email compose when updating the draft.
- Mod: Added a clear list button in the recipient list.
- Fix: Removed unnecessary DisplayGreenFeeAmount (added in the last commit)
- Mod: Added a list of recipients in the send page.
- Mod: Added a list of recipients in the send page.
- REINTEGRATED RIVERSIDE MULTI-COURSE ACCESS
- Fix: All Courses / Default wasn't generating any segments.
- Mod: Added a functionality that loads the saved email compose details.
- Mod: Added a functionality that loads the saved email compose details.
- Add: Riverside: Modified competition setup to allow you to choose Default/All/Specific/Composite markers for men and ladies separately in the case of a mixed gender competition.  In the past the competition setup forced markers to Default whenever there is a mixed gender competition.
- Mod: Add the DisplayGreenFeeAmount to the IScoreCardReport interface.
- Mod: Change GreenFeeAmount data type to nullable decimal
- Mod: BeginPingV3 - in the Green Fee Setting query, add condition "and DeletedDate is null". For Blank Cards - add an empty GreenFeeAmount1 return.
- Fix: Print also the green fee amount for competition score cards (CreateCompetitionCard). Hide the Green Fee label if the Green Fee amount is hidden (setting is False)
- Mod: Add green fee setting on the score card printing settings page
- Mod: Minor text change.
- Mod: Added the "All bookings - members only" option in the bulk email tee bookings recipient list.
- Mod: Just updated the description of the setting
- Fix: Scrolling/paging bug where the page didn't get set back to 1 after a new search, so you'd be stuck on a page beyond the end of the search results.
- Mod: Nudged the Green Fee label a bit.
- Mod: Minor modifications on the positioning. Nudged the Green Fee label a bit; added padding to the Green Fee Amount (for the Long reports)
- Mod: Hide the Green Fee label if there is no Green Fee Amount (e.g. scorecards for members)
- Fix: Reprint card - fixed the green fee amount being saved
- Fix: When reprinting a scorecard, ensure that the Green Fee Amount saved is correct. Previously it saves the old amount.
- Mod: Changed the "All bookings..." to "Bookings paid online - members only"
- Mod: Add a Green Fee label on top of the Green Fee Amount
- Fix: Copy/paste bug - it's ClubItem.DefaultAmount, not Amount.
- Mod: Added the update draft when email compose was created.
- Mod: Removed the margin bottom in the header link.
- Mod: Updated the Drafts list. Unified drafts and email compose.
- Mod: Updated the Drafts list. Unified drafts and email compose.
- Fix: When clicking Edit on a waitlist entry, the page posts back and no edit dialog appears.
- Mod: Changed the position of the Recipients list to be on the lower part and added a function that clears the textbox when a member is selected in the member quick search.
- REVERSED CARTS - too many bugs found in QA.
- Fix: Updated the first commit for Allowed NZ Golf to edit when offer is "current and future".
- Mod: Updated the first commit for Allowed NZ Golf to edit when offer is "current and future".
- Mod: Allowed NZ Golf to edit when offer is "current and future".
- Fix: Moved the DotGolf Live link to be the first option.
- Mod: Reverted the bulk email link to the original bulk email page.
- Mod - Terraces2 - css updates
- Mod: Terraces2 - convert the page name (assigned as a div id) to lower case
- Mod: Initial commit for the edit button in the ready for sending list.
- Mod: Initial commit for the edit button in the ready for sending list.
- Add: Scripts related to adding of green fee amount on the scorecard. Add new column to Scorecard. Insert new record into Setting. Alter SP live_CreateCard
- Mod: Printed Scorecard - Add display of the green fee amount (where the Course Name is positioned). This amount will only be displayed if the Course Name is not displayed.
- Mod: Add display of Green Fee Amount (where the Course Name is positioned). The GF is only displayed when the Course Name is not displayed.
- Mod: Add display of Green Fee Amount (where the Course Name is positioned). The GF is only displayed when the Course Name is not displayed.
- Mod: Updated the edit button to be available to nz golf even when the deal has been approved.
- Fix: More instances of RSResult.Total being cast to an int via a ToString conversion.  Caused a crash in the Lawnmaster Classic leaderboard on golf.co.nz.
- Fix: The column names in the query were not the same as the original query. Already updated the column names.
- Mod: Change background image to GoBlackCaps
- Fix: There was an error in the PennantsResults query because of a missing query.
- Fix: PennantsResults query fix.
- Fix: Updated the RetrievePennantsResults to be the same as results in the pennants solution.
- Fix: Another minor request on ticket MSC104703.
- Fix: TBTimeSlotEntry.CreatedBy and TBTimeSlotEntry.UpdatedBy were being set to the UserSecurityId rather than the MemberId - oops.  MSC104722
- Fix: When populating seeded entries, the results are wrong because is reserved match was not taken into account.
- Mod: Left aligned waitlist options as float:right causes trouble with the cursed IFRAMEs.  Hopefully this doesn't annoy anyone too much.
- Mod: Added a confirm popup when a draft has been saved.
- Mod: When update button is clicked, the modal is closed automatically.
- Mod: Made the waitlist editor a little more user friendly as per MSC104703.
- Mod: UI fixes.
- Mod: Added a checking if association id is 1000, it true then display register button that points to golf.co.nz.
- Mod: Adjusted permissions so only Teebooking_StartSheet is required to access admin waitlists functionality, not Teebooking_Admin.
- Fix: Added a checking if competition is a tournament, if true then point the register button to public else point to club website's registration page.
- Fix: Oops, build error...
- Mod: Immediately log a scorecard print as failed if CardPrint API fails to even prepare it to send out to a client.  Omit the card from the dataset and mark it as failed using UpdatePrintStatus(). Mod: Temporarily catch and log exceptions while we try to figure out isTeamScoreCard - maybe that's where the Kogarah exceptions are coming from?
- Fix: Updated the tee booking selector control in Bulk Email.
- Add: This script inserts the competition calendar control for Terraces 2.
- Mod: This does not need to get run against Central as it is a job, but I have committed it so we have some history. This is a step within the job Clean Old Records NZ. I will also apply this to Aus even though they do not use the Bulk Email system (just in case in the future)
- Mod: Since we are not keeping bulk emails forever, (deleting them) we need to refer to the CWEmailRecipient table rather than the email table to determine if sent etc.
- Mod: Add ".btn:hover" to the hover styling
- Mod: Adjust SqlCommandTimeout to 480, but set back to default (240) after / in the finally clause.
- Mod: Add cursor style for btn class
- Fix: Totals for multi round competitions were showing up as .0000.  Only an issue with multi round comps, single round (showing only the Total) not affected.
- Fix: Build error. Added missing files.
- Mod: Update the query of subscribed members / resigned members / contacts or mailing list recipients.
- Fix: Build error. Added missing files.
- Mod: If a member does not have any items existing for the date of renewal, then this item should be renewed. We are no longer only looking at sub periods, but are also looking at the enddate for the items (in case the users manually change the end date for individual items to span longer than 1 year) We are also now checking the ClubItem defaultamount. This is because the items (e.g. Admin Fee) may not be linked with a category, and therefore it was picking up last years billed item rather than the new default amount.
- Mod: Org implementation of SSO.
- Fix: Build error fix relating to SGEN. Turned off the Generate Serialization assembly in the build properties.
- Fix: Build error fix.
- Fix: Build error fix.
- Fix: Build error fix.
- Mod: Implementation of GOTG SSO.
- Mod: Added GetAdminUser for SSO.
- Fix: DG-959 - Warkworth - Member not being added to bulk email list - added the EmailSubscriptionType join in the query when adding the email list.
- Fix: Remove .0000 for total from the Prize Template.  We don't post Net Ambrose prizes anyway so this shouldn't be a problem.
- Mod: Moved the js and css member search query to the control.
- Add: Terraces 2 - Comp Calendar V2. Difference from the shared Comp Cal: reference to fullcalendar css and jquery version 1.6.2.
- Mod: Filtered out the member with no email address.
- Mod: Hid the members that do not belong to the home club.
- Mod: Updated the member search.
- Mod: Added logging using Database.Log
- REINTEGRATED CARTS - Merged revision(s) 19470-19498 from Branches/Trunk.2015-01-13.carts:
- Fix: Total appearing as xx.0000 in Prize Report.
- Mod: Put back the new registrations form.
- Fix: BindDashboard - correct the query - getting of Internet and Kiosk release times
- Mod: Add a confirmation before proceeding to remove a template. Add a confirmation before proceeding to process the templates. Also update the css class of btnGenerate to "btn" so we can add a confirmation. Add instructions above--Steps 1-6. Move up the back to Dashboard link.
- Fix: Add validation - check if there's at least one Day (Mon, Tue, etc.) selected
- Fix: Correct the number of records shown after processing the bulk generation of timesheets (e.g. "3 records were successfully processed.")
- Fix: Replace "concat" with "convert". Concat is not available in sql server 2005.
- Fix: TournamentCMS leaderboard and leaderboard widget controls were broken because of the RSResult.Total data type change from int to decimal.
- Fix: Add index script wasn't an add index script.
- Mod: Save email compose when an initial article is added.
- Fix: If the keyboard was bound and unbound several time in the same browser state, the document binding for the enter key pressed was bound multiple times to the same function.  This caused the effect of "hitting" Enter multiple times even though you only clicked/pressed once.  In the Member Search area of tee booking this caused multiple webservice calls and this impacted on overall page performance.
- Fix: Create Recurring Bookings was using GETDATE() to decide whether to create a booking instead of the timesheet date we're busy creating.
- Mod: Updated the quill text editor code.
- Mod: Hide Max Handicap option for Ambrose/Foursomes competitions.  We really should restrict individual players' handicaps but we'll do this when someone complains.
- Fix: Show team handicap on SCA and pre-print areas for team scorecards.
- Mod: Added validation in adding recipients in the mailing list.
- Fix: Convert booking history create date to local time before rendering to browser.
- Mod: Use TabMemberRemoveUNF.aspx to update the category of resigned members. (Originally, this was only used to "remove" the member from the UNF category.)
- Mod: Added more validations. Also, edited the header and footer to have the email params ($UNSUBSCRIBE$ and view in browser code).
- Mod: Added validation when preparing the email.
- Mod: Added validation when saving email drafts and templates.
- Mod: If the resigned member's category is UNF or DEC, disable the category dropdown (TabMember.aspx) and add a link going to TabMemberRemoveUNF (this page allows members with UNF/DEC category to update this category)
- Mod: Added the bulk email link in the menu items.
- Mod: Minor UI changes.
- Add: Canadian/American Foursomes competition types.
- Mod: Increased width of TEAM HDCP label to get things displaying nicely.
- Mod: Enabled Bulk Generate Timesheets again.
- Fix: Team course handicap is now shown on the SIC for Ambrose/Foursomes competitions.
- Fix: MSC 103354 - Update the value of @NextDayOpensAt if the timesheet has its own release times. This corrects the opening date displayed on the SearchSlots page e.g. "Booking for [TimsSlotDate] will open on [NextDayOpensAt]."
- Mod: Moved the menu function to Utils.
- Mod: Moved the menu function to Utils.
- Fix: Don't try to grok NULL Totals as decimals - causes an exception.  A null score means DNF or DQ, so don't add it into the list of best-of scores.
- Mod: Update the IsBulkEmail flag for any emails that were inserted into the database before the flag was added to the table.
- Mod: Add index for IsBulkEmail to the email table. This will be used when cleaning up emails.
- Mod: "Abnormal Score" warnings removed for team scorecards in SIC.
- Mod: Don't allow user to edit team scorecards from the SCA as it stuffs up the naming for the team (eg. in Aus it kept adding "Visitor" to the team name)
- Mod: Reinstating Lydia for the background image - ready for Monday publish.
- Mod: Changed the passing of passport id in token.
- Mod: Site takeover for the duration of the BMW NZ Open
- Mod: Waipu style updates - Trip Advisor widget
- Mod: Hastings2 - style updates
- Mod: For resigned members, allow to change the Membership Category to UNF or DEC. So the available categories would be: [current category], UNF, and DEC.
- Mod: Added the club name when typeing the clubid in login page.
- Mod: Get on the Green - update the css class of the offer list link
- Mod: Get on the Green - Add a link to the Offer List ("Copy a Previous Offer"). Also removed the outdated Note.
- Fix: _checkBoxes() -> ensure that the checkbox control exists before setting the checked property to true.
- Mod: Added an error page when user doesn't have an access.
- Mod: CartSummary post - Get the Total Amount from the returned order object. This ensures that any changes to the cart have been accounted for. This eliminates the issue where the user could possibly change the quantity (e.g. 2) in another window and submits the cart in another window (e.g. with 1 quantity).
- Mod: Get on the Green Admin - comment out outdated Note
- Mod: Get on the Green Admin - Removed the outdated description "earliest possible date is December 11, 2014"
- Mod: Get on the Green Admin - add functionality to copy an existing Product/Offer
- Mod: Get on the Green Admin - add functionality to copy an existing Product (but with updated Deal Start/End Dates, Redemption Start/End Dates, Cover Image URL)
- Mod: Added the function that checks if user has SPAM access.
- Mod: Minor UI change.
- Mod: Added the function that checks if user has SPAM access.
- Fix: Exchanged the conditions--check first if the user is a Member (just like the other conditions checking first Passport.MemberId.HasValue)
- Fix: Error occurs when the user has both Member and NA records and the user is logged in as a Member. During save, the record is saved in the NA record, and during page refresh / binding of data, it consequentially loads the NA data--and this produces the error.
- Mod: Extended the Marker box so that dual marker name scorecards (for teams) can be printed nicely.  Background email sent from Matt to David Mon 9/03/2015 3:54 p.m.
- Add: Ability to set up public holidays and maintain club provinces from Adweb.  This was built for Aus but will be useful for NZ too.
- Mod: Made the clubid and associationid dynamic.
- Mod: UI changes. Changed the bg color and added a shadow.
- Fix: Pre-print: Keep same card format selected even if you change the printer, so that they don't have to go poke around to find the right format.
- Fix: MSC 103354 BindDashboard sql script- if the Kiosk / Internet Timeslot Release Times are set, get the earliest date/time to determine if the Kiosk / Internet booking are open.
- Add: Waiuku swipecard format: %150082?;154720082?
- Mod: Made the club Id dynamic.
- Mod: Made the club id dynamic.
- Fix: Automatically and silently switch to team card for NZ when printing one-scorecard-per-team competition cards.
- Fix: Validation error when saving mixed gender competitions for non-Ambrose/Foursomes competition types.
- Mod: Hastings2 - image gallery - style update
- Mod: Changed the application url cookie updating.
- Mod: Changes the logout url.
- Add: Script that inserts records into EmailUnsubscribed table (for those members who've unsubscribed before CMember.AllowBulkNewsletters)
- Mod: Added the application logout url in the verify account.
- Mod: Added the logout url when there is already a cookie.
- Fix: MSC 103349 - Handle null Gender in the prize report SQL script. This fixes the ko error "Error parsing column 22 (Gender=<null>). This issue was discovered in a Bayview Golf Club competition prize report (Mens 2BBBB Stableford, 11th February 2015).
- Mod: Updated the logic of logout. Logs out all logged in applications.
- Mod: Updated the logic of logout. Logs out all logged in applications.
- Mod: Banner and video updates. Lyds and Izzy theme.
- Fix: ORG draw broken by rev 19855 fix for clubs.  Added check for @IsAssociationSystem when working with CompetitionEntry records.
- Ambrose: Fix: No Edit link when clicking on Team cards from SCA. Ambrose: Fix: Removed partner select from SIC for Team cards.
- Mod: The WebUserModel is now saved in session.
- Mod: Not yet complete. Updated the application to use session instead of cookie but SSO still uses cookie to store data.
- Mod: Not yet complete. Updated the application to use session instead of cookie but SSO still uses cookie to store data.
- Mod: Commented out code for VerifyAccount for testing.
- Mod: Added validate page to handle the token from sso and hides the token from the query string.
- Mod: Added validate page to handle the token from sso and hides the token from the query string.
- Fix: Ambrose: Card printing was broken for single gender team competitions because the Competition.MarkerId_Men and .MarkerId_Women columns were NULL for single gender comps (by design).
- Mod: Timezones revisited again.  This time I've added a bunch of tests to make sure that key dates/times are converting between NZT and foreign timezones properly!
- Fix: Tee Booking - Player Detail Control - limit the width of the control, cleaned up some css, and add a tooltip on the PlayerType dropdown (so that the user can view the full name on hover).
- Mod: Added invalid login message.
- Mod: Capture invalid login.
- Mod: Added the backurl when submit button is clicked in the forgot password.
- Mod: Added a back button in the forgot password.
- Mod: Added send email functionality to the forgot password.
- Mod: Send matt and email to check how often this occurs.
- Mod: Minor solution changes commit.
- Fix: Handle undefined waitlistid (new waitlist record). Correct a typo error.
- Fix: Add waitlistid to the parameters passed (CheckEligibility webmethod). This fixes the bug wherein the admin can't edit the end time of the waitlist record.
- Mod: Layout change.
- Mod: Added logout functionality.
- Mod: Added logout functionality.
- Mod: Added an isnull around this statement because the report to display the competition entries error'd out. The result of this change means that there will not be a correct course handicap shown (in brackets) in the report - and this is because you cannot calculate a segment for the division for the player. In this case, the players handicap index was outside of the division ranges for the competition. Ticket [DG-936: Bottle Lake - Unable to view pre-registration report]. The alternative would be to prevent the player from being registered in the first place, but more changes will be required here - checks for divisions - checks if divisions are added to a competition that already has registrations - checks for online registrations within division ranges
- Mod: Add an Unsubscribe link at the bottom of the email (non-editable).
- Add: Script that updates all active club email templates to add the $Unsubscribe$ section just before the body closing tag (affects almost 50 rows)
- Mod: Changed the url encryption from rsa to jwt.
- Mod: Changed the url encryption from rsa to jwt.
- Mod: Update naming from club "newsletter" to "communication"
- Mod: Update the jquery selector to the div class name of the "View Online Link" because the contenteditable property is also used by the Unsubscribe link.
- Mod: Add an Unsubscribe link at the bottom of the email (non-editable).
- Mod: Changed the RememberMe Json to bool.
- Mod: Changed the RememberMe Json to bool.
- Mod: Added the passing of token to return url.
- Mod: Added the passing of token to return url.
- Mod: Added the passing of token to return url.
- Mod: Email unsubscription - apply  changes to the old Compose page and also handle replacing of Unsubscribe link in the older newsletter templates (which uses $MAILING_LIST_REMOVE_LINK$ instead of $UNSUBSCRIBE$)
- Add: Add a new function which accepts a string and returns a string in decoded format
- Add: This script populates the EmailSubscription table (one record for each club)
- Add: Edit script in relation to Bulk Email unsubscription - Inserts/update record in EmailUnsubscribed table when a user unsubscribes / subscribes to the club bulk email
- Mod: Bluk Email Unsubscribe - Return AllowBulkMail as bit
- Mod: Edit Profile: "Receive clubnewsletters by email" checkbox now gets its data from EmailUnsubscribed table
- Mod: Exclude those who have unsubscribed (EmailUnsubscribed table)
- Mod: Update the code which replaces the Unsubscribe link.
- Mod: Add EmailSubscriptionTypeId value when inserting to CWEmailCompose.
- Mod: "Allow Bulk Email" checkbox now gets the data from (and saves data to) EmailUnsubscribed table.
- Mod: Referenced Nunit 2.6 from program files\nunit 2.6 rather than from the Libraries folder.
- Mod: Added the article order column in cwemailarticle table.
- Mod: Initial commit for "remember me"
- Mod: JWT package path fix
- Mod: JWT package fix
- Fix: Changed the location of JWT reference.
- Fix: Added JWT in packages.
- Fix: Fix for the added JWT reference.
- Mod: Added JWT.
- Mod: Terraces2 - Course Details control - call imagehelper if there's an image for the hole only; style updates
- Mod: Terraces2 - Course Details control - update popup title, add "More Details" link
- Mod: Added an RSA Decryption to the login controller.
- Mod: Added properties in SSOLogin.
- MERGED AMBROSE and FRACTIONAL HANDICAPS - revision(s) 18941, 19808, 19859-19860, 19900 from Branches/Trunk.2014-12-04.team-handicap-fractions:
- Mod: Terraces2 - Course Details - style updates
- Mod: Terraces2 - Course Details - updated style, removed commented out code
- Mod: Terraces2 - Course Details - show totals on Par and Distance
- Mod: Terraces2 - Course Details - display in landscape layout.
- Fix: Added an if exist in the script.
- Add: Script that inserts a new control property to the existing Weather Simple control
- Mod: If the EmailID doesn't exist (emailviewer) show a nice message to the user saying it was probably purged out from our system.
- Fix: Finally sorted out the stupid pigeon pair competitions bug - it crashed out if there was more than 1 possible match.
- Mod: Added a delete article button in the articles table.
- Mod: 1. Added a confirm in the "Delete all articles" button. 2. Clear textboxes when a new article has been added. 3. Select custom theme if there is only 1 custom theme in the select box.
- Fix: When registering a pro (linked to an AssociationId) the registration form was stuck on Amateur.
- Mod: Added a login funtion to test SSO.
- Mod: Added the FindUserSecuirtyRow method.
- Mod: Reverted changes to immediately delete bulk emails from system once sent, because we need these records present for the EmailViewer page to work.
- Fix: Issue: When there is no emailcomposeid when ordering the articles, the new articles and ordering is not saved. Change: Added a functionality that saves the articles in db when add article button is clicked. This also includes fix for the custom theme dropdown that is not working when page is loaded. Added a new column in the CWEmailCompose to store the template name.
- Fix: Added an alias to the competitionentryid in GetPlayersDataSet method. This fixes the issue where the registered player's name are displayed twice in the competition draw.
- Mod: Changed references to close-button-transparent-32x32.png to the shared folder where we have moved this image.
- Fix: Correctly return CentralMemberCode values in the tournament search control, but only for members, not nonaffiliates. Add: Home club name added next to "Amateur" flag for affiliates. Mod: Cancel button removed and a top-right glyph added to close the registration dialog. Mod: Club Name and Membership No added to registration form (for affiliates only)
- Mod: Allow filtering the diagnostics log by from/to date/time.  This is useful for when you're looking for something that happened more than 500 log entries ago.
- Mod: Hastings2 styles
- Add: Hastings2 styles
- Mod: Weather Simple Control - Updated this to be usable in other sites (e.g. Te Awamutu). The web admin can choose to use the (free) default icons. (Hastings has its own weather icons.)
- Add: Te Awamutu slide
- Mod: Te Awamutu style updates
- Add: Te Awamutu css
- Mod: Terraces2 - Login Bar Control - Instead of displaying a login link, show a login flyout form. This allows the user to login from any page / without having to go to the Member Login page.
- Mod: ALPG have given us a new full leaderboard page. I have already created a link to the full leaderboard page from the home page.
- Mod: Adjust the height of the leaderboard so you can actually see some people.
- Mod: UI updates.
- Mod: Bug when Micropower were trying to add a category. Not null defaults in the database were causing issues with IsCyclical and IsSubsEnabled. Indications here are a missing previous script file, but hopefully this fixes their problem.
- Mod: Added the login page.
- Mod: Bug when Micropower were trying to add a category. It was expecting a parameter which is not in the API. Indications here are a missing previous script file, but hopefully this fixes their problem.
- Add: Hastings2 - Weather Simple - icons (they provided their own icons)
- Add/Mod: Weather Simple Control - Replace the weather icons with free ones; there's also two options now: white or darkgrey. (Note: Transferred the Hastings' weather icons to their club folder.)
- Fix: Change to window.location.href for js error logging.
- Fix: When custom release times are specified on timeslots and they were set AFTER the default release time for the club, the Search Club Day page would still show the full range of dates to be open for booking.
- Mod: Refactored Org to use new IBatchProcess<SHARED, STANDARDPAGE> interface. Included new UpdateTScoreFlagOnCompetitionProcess class from Live.
- Mod: Refactored Live to use new IBatchProcess<SHARED, STANDARDPAGE> interface.  ORG build will still break - will fix soon.
- Add: IBatchProcess to DotGolf.Shared (this will break Live and Org - don't worry, I'll fix them soon)
- Mod: Moved the T Score recalculation out of the save method into a thread as this was taking too long to complete and timing out.
- Mod: Add two more properties to: Hastings2 - Courses Simple, and Terraces2/Te Awamutu > Footer
- Mod: Hastings2 - Courses Simple - Add property to be able to dynamically control the hole image size (used as background)
- Mod: Initial solution commit.
- 
- 
- Fix: MSC#103703 - critical - players on waitlists are being entered into timesheets of other clubs due to a missing where condition.
- Mod: Terraces2 - Member Directory style updates
- Mod: Terraces2 - Footer - Add tooltips. Member Directory - Display picture.
- Add: This scripts adds a "Priority" field to ClubFeeDetail table
- Add: This script adds new properties to existing controls (GF, Contact control for Hastings)
- Mod: Green Fee NG Control - Allow to sort the fees by ClubFeeDetail.Priority (new column) using the new control property "OrderByPriority". If this is false, then the old sorting will be used--which is by "Description".
- Mod: Hastings2 - Contact control - allow to override the email address displayed using the new property "ContactEmailAddress"
- Fix: Loading overall results when division is changed.
- Mod: Excess overhead was being done when recalculating T Scores - added distinct.
- Mod: Bug if the data was longer than 40, but less than 50. Fixed to only truncate if > 50.
- Fix: The halved points doesn't tally with the result. Added the checking for is reserved match points condition in the query.
- Mod: Hastings2 - just edited the div id
- Mod: Hastings2 - enclose this Contact control in a div "contact-details-style2"
- Add: Script that inserts the new Contact control
- Add: Hastings2 - Contact Control Style 3
- Mod: If the email is a bulk email - we are going to delete it immediately to save space.
- Mod: We are now going to track if the email is a Bulk Email in the email table.
- Mod: We are now going to track if the email is a Bulk Email in the email table. We are also going to update the Opened status immediately so we can safely delete the email to save DB space. (the trigger may become redundant in time). This is in preparation for a big email cleanup to save space in the database.
- Fix: Bug DG-862 fix. Added a condition that checks for the competitionentryid.
- Fix: Sunrise/sunset calculation wasn't taking daylight savings into account.
- Mod: We have changed the way this is done, so we can safely delete the email to save DB space
- Fix: Get the MemberID directly from the session (like the PassportID)
- 
- Mod: Changes to the NZ Womens Open site. 1. Lydia new image in the slideshow 2. Tournament external page 3. Tournament leaderboard widget on the home page
- Mod: Added article ordering in SPAM2.
- Mod: Terraces2 - Slideshow - autoscroll, and loop the images
- Mod: Hastings2 - style updates
- Mod: Changed the read more image path.
- Add: Hastings2 site files
- Mod: Hastings2 styles updates
- Add: Hastings2 - Adds a property (CWControlProperty) for the Course Simple control
- Mod: Added ticks to the filename being uploaded to S3.
- Fix: quill editor link fix.
- Mod: Updated the url of the module images.
- Mod: Added the sent email progress report.
- Mod: Added the sent email progress report.
- Fix: When North Shore runs a Twos comp, a random tick mark is overlayed on top of the advertising message as we forgot to hide that along with all the Twos holes.
- Mod: Hastings2 - styles updates
- Mod: Hastings 2 - Add missing script type
- Mod: Reverted to static homepage. Removed the smashing hertz ball.
- Add: Hastings 2 - Course style
- Mod: Hastings 2 - Courses - Add pdf download link, add property to turn on/off the video link, update hole title, styles
- Mod: Hastings 2 - courses style
- Mod: Added delete sent email compose functionality.
- Mod: Added test, delete, send functionality in sender.
- Mod: Added test, delete, send functionality in sender.
- Changed app.config to point to dev3 for EF model updates.
- Mod: Te Awamutu - style updates
- Add: Hastings 2 - images
- Add: Hastings 2 - background images
- Mod: Hastings 2 - updated styles and a few logos
- Mod: SQL Bug preventing the estimated number of entries in the divisions.
- Mod: Update the row number since the 9 hole row is now removed. THis was causing gender change issues when updating in adweb.
- Mod: Added the sender page.
- Mod: Added the sender page.
- Mod: Hastings 2 style updates
- Mod: Added the attachment in the dba and custom recipients method.
- Mod: Added the attachment in the dba and custom recipients method.
- Mod: Added the attachment in CreateEmail.
- Mod: Added the attachment in CreateEmail.
- Add: Hastings 2 - styles
- Mod: Hertz background site takeover.
- Mod: Added file attachment insert to sql.
- Mod: Added file attachment insert to sql.
- Mod: Updated the code when creating the email for sending.
- Mod: Updated the code when creating the email for sending.
- Fix: Program Files fix for Collabnet Subversion on Build1.
- Fix: The summary of results didn't take into consideration the "is reserved match point". It is now included in the query.
- Fix: There was an error in the registration page after the hertz site takeover publish. Changes; 1. Made the swf source url to point to root. 2. Updated the url checking in the window.onerror javascript code.
- Mod: Reversed out NZWO registration form again.
- Add: Terraces2 - Edit Member Details control
- Add: This script inserts two new controls (into CWControl) for the Terraces2 layout
- Mod: Terraces2 - Contact control style update
- Mod: Terraces2 - Updates on news controls' styles
- Add: Terraces2 - More News control
- Add: Styling adjustment to bring the waitlist link back into the iframe for Aus.
- Fix: Don't send emails to do with any booking in the past.  This could happen if someone moved a booking in the past via the POG.
- Mod: Hertz site takeover. Flash with ball smashing screen.
- Fix: csproj for new location of Collabnet Subversion.
- Fix: csproj for new location of Collabnet Subversion.
- Mod: Ensure that you can never have an average HD of >= 100 (our datatypes in the database only support decimal(3,1) - and it would be a bit of a major to change this)
- Mod: golf.co.nz just returns too many errors due to AdHub and others - just not logging these anymore.
- Mod: Put the NZWO new registrations form back into play.
- Mod: DBUtilities.SendEmail - Add EmailReturnPath
- Mod: Changed the menu to get it from service.
- Mod: Added get menu items.
- Mod: Trying to get the grammar correct with this .ToPlural function...
- Fix: TabMembers.aspx didn't always focus on the member search textbox, depending on page load times.  Now we use the onReady option of MQS so it should be reliable.
- Mod: Added an extra class for adding a casual person. This was required to determine whether the person was a casual member or not. Mod: Fixed up some grammar in some display text. Mod: Api_AddMember: Added logic for the use of @OldCentralMemberCode for casual golfers. If this is passed in, (without a memberid) it is basically because you are a casual golfer. There is some new logic in here which converts the passport and passport credentials in the stored proc (removed it from the code) because it was needing to do it in both possible and probable matches in code. There is also a mini rollover done for anyone that has scores - where the projected handicap is calculated, ready for the next handicap rollover to take place. Mod: Added in passing the @OldCentralMemberCode to the api_AddMember stored proc. This is used for the 800 computerno range (casual golfers).
- Fix: The results display 2 rows with the same data when there is a match in progress. Added a functionality that checks for the match in progress.
- Mod: Some changes to this for adding casual golfers 1. Added top 1 (else in the GM interface area it would list all 3 people. This is not desirable as the user could click new member on all 3 and really stuff things up). We did not go into the effort of making it like the member one with options of which to select - just selected the top 1. 2. If there was more than 1 match, we took the one with the most number of scores linked to their record, then the most recent one (as this is the one they most likely have been using).
- Fix: Program Files fix for Collabnet Subversion on Build1.
- Fix: Added C: into wyBuild reference path so that this all works on build1 which uses D: for the Jenkins workspaces.
- Add: Missing script for GM upload casual golf changes.
- Fix: For some stupid reason %PROGRAMFILES% resolves to C:\Program Files (x86) on my X64 machine !!
- Fix: Made all paths absolute for version.txt so it works with Jenkins CI.
- Fix: csproj build fixed to add x64 path to Collabnet Subversion.
- Mod: Bug in preprint where @IsNineHoleHandicap was not being passed into the SQL.
- Fix: Don't put the editing before 12 Feb restriction on 18 hole scores - we're only restricting edits to 9 hole scores due to the handicapping change.
- REINSTATED GM Upload mods for casual golf.
- Fix: When searching for a member, if you type a surname and then sslect a club, (in TabMembers.aspx) you don't get any results.  The fix was to cast clubId to a number before comparing with the AllClubIDs array as inArray() is strictly typed.
- Fix: SQL errors around tournament system due to TWPlayer cleanup.
- Mod: Update the category's to have the correct 9/18 hole flag. Add the extra Settings table in the NineHoleScore table query.
- Mod: Added 2 new SP's to allow the updating of resigned members handicaps.
- Fix: Don't try creating CategoryLimits for clubs who already have them for UDF9.
- Mod: Removed extra select.
- Mod: Hide the membership type option from Aus as they don't do much 9 hole golf.
- Mod: Changed the 9 hole checkbox in TabCategories to a combo box to make this more intuitive to the user - they are choosing between 2 modes, not selecting an attribute. Add: The number of members in each category is now included in the category dropdown - so you can easily see which categories are not being used. Add: Help box explaining about the membership type setting and that it has no effect on the handicap index at all.
- REVERSED GM upload changes for casual golf.  We're looking at adding this back in later in the week.
- Mod: Don't filter by nine hole in scorecard edit mode - we now show all markers to every player since the 9H handicapping change. (and now for the worms that escaped when I opened that can): Fix: When you print a card for a 9H member and you change the marker from 9H to 18H, a greenfee was not charged. Fix: When you print a card for a 9H member and you change the marker from 9H to 18H, the competition selections didn't update. Fix: When you print a card for a 9H member and you change the marker from 9H to 18H, and then ticked a 9H competition (which means the marker has to change back to a 9H one), the marker changed back, but the greenfee stuck.
- Mod: Updated the message when converting a casual golfer.
- Fix: For Casual Golfers being displayed in TabLegacyUpload, show their CentralMemberCode, not the username from PassportCredential.
- Fix: (Missed part of commit) "No" was being used instead of "PlayerNo" and this caused issues when you book into a paid slot with existing players already booked.
- Mod: Removed the ability to change between 9H and 18H handicap types in Adweb.
- Mod: Check if the IsCategoryNineHole on the category table is null (because it is a nullable field in the database). Remember that the value could be passed through as NULL into this SP because the user might be updating something else on the category (or via the API it may be passed in as NULL meaning ignore it).
- Mod: Missed out a where condition for the category nine hole flag.
- Mod: We need to make sure we update the ninehole flag for changes to 18 hole people too! Deleted a script we have already run.
- Mod: Include the old category field in the update just in case, and alias...
- Mod: Safety in numbers.
- Mod: Changedate -> getdate()
- Mod: Stop the user editing any scores older than Feb 12, 2015 due to the 9 hole handicapping change.
- Fix: When the score entry control fails to load, it never calls the Cancelled event, so if you're on the member score listing and a score fails to load up, you are stuck without any edit links.
- Mod: Extra bracket bug
- Mod: Ensure the DateToDay and FromDay / Month's span the entire year.
- Mod: Attempt to speed up the performance of combining scores.
- Fix: Could not grok GetOnTheGreen errors properly, threw an exception instead.
- Add: Completed keypad mode for kiosk card printing.  This commit enables competition selections for keypad clubs, and fixes up a few little problems around the Continue and Go Back buttons.  I've also hidden the other options on the main screen (for keypad clubs only) so that only card printing is accessible (even if set otherwise in the scheduler).  We really need a touch screen for the other functions to work properly.
- Mod: Removed scripts for combining 9 hole scores and doubling member handicaps - we're going to run these in an out-of-band script later.
- Fix: Syntax error in script.
- Fix: Syntax error in script.
- MERGED 9 hole handicapping changes by Matt.
- Mod: This was changed (in discussion with David) because 1 round tournaments were not displaying a R1 or Total value on the www.golf.co.nz leaderboard. E.g. http://www.golf.co.nz/Tournaments/TournamentLeaderboard.aspx?CompetitionId=373037 Updating this (which should really only refer to best of counters) allows the totals to be displayed.
- Mod: Put a log message in there to detect valid golflink numbers searched for and supposedly inserted in our database - but not eventually found through the member search control.  Have a look in the code, there is a comment that explains an example.
- Mod: Change out the old image, and the URL from /layouts/terraces/Template.aspx?page=Golf to http://www.holdenpgachampionship.co.nz/
- Mod: Did not notice it was the wrong dimensions when Jan sent it through.
- Mod: New footer for the NZ Womens Open site.
- NZWO TWPlayer de-duplication mod 2/2 - this changes the TWPlayer table to remove the CompetitionId column (really only renamed to _obsolete_CompetitionId allowing nulls) and to add an AssociationId column.  This means that a passport player profile is now valid for the whole association, not just a specific competition.  It means that we can keep re-using profiles year after year for tournaments such as the NZ Womens Open.
- NZWO TWPlayer de-duplication mod 1/2 - this changes the TWPlayer table to remove the CompetitionId column (really only renamed to _obsolete_CompetitionId allowing nulls) and to add an AssociationId column.  This means that a passport player profile is now valid for the whole association, not just a specific competition.  It means that we can keep re-using profiles year after year for tournaments such as the NZ Womens Open.
- Fix: Problem when searching for a particular name for which only 1 row is returned - but this member turned out to be a casual golfer or social member that NZ Golf can't view at the moment.  Changed search to exclude casual golfers and social members.
- Fix: Error when adding a non-affiliate into a tournament if that nonaffiliate already has a passport record.
- Mod: Increase the height of this ticket widget because Firefox was rendering it slightly differently to Chrome and you could not see the buy tickets button.
- Fix: GM upload undo action now works. Fix: GM upload transfer of resigned member from another club now checks if the member had a casual golfer passport, and updates the username to the new computerno
- Mod: GM upload possible duplicate casual golfer label added, and Find Member opens tab member new with search for name executed and results shown.
- Fix: Transaction disposal error when withdrawing a player from a tournament.
- Fix: POG Waitlist, on cancel do not delete any waitlist for member on the day. Only Bookings delete waitlist entries for the member.
- Fix: Tab Member New search, removes Casual Golfers item in drop down criteria for Aus.
- Fix: Shared project missing email template file for passport registration
- Fix: Frozen handicaps were not being parsed correctly in the Handicap class.
- Add: Legacy GM member upload - Casual golfers are included in duplicates and can be added linking to the casual golfer. - Possible duplicates are also displayed, but can only then be searched for manually or added as a brand new member. - Restored members with casual golfer passport have credentials username updated to new computer no.
- Mod: When changing the category the Save/Cancel buttons are now hidden until the form has finished posting back.  I've also added an ajax spinner for good measure.
- Mod: DG-849 - Allow filtering Member Listing Report by gender.
- Mod: Lydia world no. 1 site takeover
- Mod: Don't take users to the new registrations form.  We're hoping that the old one and refactored code still works fine.
- Mod: Already run this script?
- Mod: UI updates for the header.
- Mod: Terraces2 - Just renamed a div id to make it unique (the old id is used in another control)
- Mod: Initial custom header updates.
- Fix: Always send emails to people who have to pay, regardless of the Send Email Notifications checkbox.
- Fix: Ported fix from rev 18407 (www.golf.co.nz) for an email not present check that didn't work correctly.
- Mod: Added the sql functionality in the creation of email.
- Mod: Added the sql functionality in the creation of email.
- Hid the Bulk Generate Timesheets link for now as we don't want to send this out on Monday - too much untested stuff and possibly questionable business rules. Reverted: Fix: Removed automatic recurring booking generation from Timesheet.aspx because we use the background job for this now.
- Fix: Removed automatic recurring booking generation from Timesheet.aspx because we use the background job for this now.
- Mod: Changed SQL so that it is more apparent that HoleNamesRBGGrayScale is a string.  This doesn't change behaviour, just a syntactical thing.
- Fix: Invalid cast bug in Connector caused by new HoleNamesRBGGrayScale column.
- Mod: Added encoding/decoding to the email address.
- Mod: Added encoding/decoding to the email address.
- Mod: Changed the register button to open registration page in new a window.
- Fix: Spurious "Marker specified does not belong to specified course." when a marker has previously belonged to another course but has now moved.  Millbrook had this problem.
- Add: This script adds the missing PageControlID column to CWVideo table (this column is used in the Video Gallery control query). Side note: as of today 2015-01-30, the CWVideo table is empty / not used.
- Mod: Terraces2 - fullscreen background slideshow - interval changed to 6 seconds
- Mod: Added the mailing list functionality when creating the email.
- Mod: Added delete recipient from mailing list.
- Mod: Added delete recipient from mailing list.
- Add: Script that'll add the new layout (Terraces2) and its controls.
- Mod: Initial commit for the mailing list manager.
- Mod: Initial commit for the mailing list manager.
- Add/Mod: Terraces2 - Image Gallery, styles updates
- Mod: Terraces2 css
- Mod: Terraces2
- Mod: Added a functionality to create the bulk email recipient list.
- Mod: Added a functionality to create the bulk email recipient list.
- Mod: Terraces2 latest news control styles update
- Add: Terraces2 styles
- Fix: Typo.
- Mod: Terraces2 - styles update
- Mod: Terraces2 template - add lightbox reference
- Add: Terraces2 / Te Awamutu - contact and news controls and styles
- Mod: Added the creation of email before sending.
- Mod: Added the creation of email before sending.
- Mod: Added the creation of email before sending.
- Mod: Reverted to the hills background.
- Fix: Added a club and the competition validation for the online comp registration.
- Mod: Added content section in sender.
- Mod: Added content section in sender.
- Mod: Terraces2 - Course and Member Directory styles
- Add: Terraces2 - admin styles
- Fix: TabMembers search fix bug introduced by New Member casual golfer. Fix: New Member search computerno search does not return casual golfers.
- Mod: Added content section in the email sender.
- Mod: Added content section in the email sender.
- Fix: NZWO: Email All / None checkbox changed to a set of links, and they work now.
- Fix: This page has been broken since the casual golf upgrade - TabUserProfile.aspx would not load due to a WebUser property that got removed.  Reported by Mt Maunganui re 5CC, ticket DG-831.  Already hacked into the file on the prod webserver.
- Mod: Terraces2 - Member Directory style updates - move inline styles to external css
- Mod: Terraces2 - Course control - styles updates
- Add: Terraces2 / Te Awamutu - loading gif
- Mod: Get on the Green Admin Site - Correct Jan's email address from "co.nz" to "org.nz"
- Mod: Added the sender page.
- Mod: Added the sender page.
- Mod: Terraces2 / Te Awamutu style updates
- Add: Terraces2 Course control
- Mod: Add New Player - button text updated.
- Fix: Tab member new search fix for casual golf search bug.
- Mod: Tab Member New search for Casual Golfer. Resigned records for a casual golfer are removed from results and ex clubs are displayed for casual golfers
- Mod: Kiosk waitlist disallow adding multiple waitlists on a single day. If member is waitlisted on the day, the Add To Waitlist button is hidden.
- MERGED NZWO new tournament registrations branch.
- Mod: Terraces2 Member Directory
- Add: New Member tab Casual Golfer - Can search for casual golfers to add as new members - A new member created from a casual golfer is associated with the casual golfer passport so scores can be retained
- Mod: Site takeover (ANZ celebrity challenge).
- Mod: Terraces2 template and styles updates
- Add: Terraces2 / Te Awamutu - Member Directory and SubMenuBar controls and styles
- Mod: Changed "apply@golf.co.nz" "no-reply@golf.co.nz" - will test if this is causing the non-receipt of email issue.
- Mod: Updated the service reference.
- Mod: Added the create draft from template.
- Mod: Added the create draft from template.
- Mod: Added get and delete template.
- Mod: Added get and delete template.
- Fix: Handicap report - removed the date range at the top for Aus as they have no rollover.
- Mod: Minor UI changes for the bootstrap columns.
- Mod: Added save template functionality.
- Mod: Added save template functionality.
- Mod: Terraces2 controls and styles updates
- Add: Terraces2 styles
- Fix: Added an order by in the articles.
- Mod: Make sure that Product Names are in proper case (use ToProperCase extension). This eliminates all caps names.
- Mod: Changed table names.
- Mod: Terraces2 on scroll menu
- Mod: Terraces2 / Te Awamutu style updates
- Mod: Terraces2 / Te Awamutu style updates
- Mod: Terraces2 / Te Awamutu - Template updates
- Add: Terraces2 / Te Awamutu - login control and style
- Mod: Initial commit for the templates page.
-  Mod: Added the email test sender.
- Fix: Member search performance tweak 19521 tweak
- Mod: Performance Tweak for live advanced Member searching
- Mod: Added header and footer in the DB.
- Mod: Added header and footer in the DB.
- Fix: TabMembers new member search was not searching with first name parameter, only surname.
- Fix: Paraparaumu left nav style fix
- Fix: UF#9 Green fee summary report indicates fees that are part of a group booking (regular green fees in a pay per player group booking)
- Fix: #99807 Bulk generate timesheet was not setting Book on Kiosk for timesheets created
- Mod: Competition prize options winners grid, added Competition Type column for more clarity of the position
- Mod: Added test functionality in the drafts page.
- Mod: Added test functionality in the drafts page.
- Add: Te Awamutu club site files
- Mod: Terraces2 / Te Awamutu updates
- Mod: Hastings Contact Details - update variable name
- Mod: Terraces2 / Te Awamutu styles updates
- Add: Terraces2 / Te Awamutu footer
- Mod: Upgraded ORG to use the new Edge stylesheets.
- Mod: Added delete functionality in the drafts page.
- Mod: Updated the drafts page.
- Add: UF#58 New membership setting to determine if teebooking checks a members Financial date for their membership expiry, when validating the booking. The default is the check will occur. If the setting is switched off, unfinancial/resigned (date_deactivate) does not affect if a member can book or not.
- Mod: Added try-catch and added panels to the form.
- Mod: Added create functionality to the CopyTournaments.
- Add: Terraces2 / Te Awamutu - template, controls, css, js
- Add: Te Awamutu images
- Mod: Initial commit for the copy tournaments.
- Add: Te Awamutu club site specific files
- Mod: Major performance improvement in wa_TBGetBookingChangesWithMembersSince procedure which is called every few minutes from all DGE clubs.
- Mod: Performance fix in results, because the CalculateCompetitionRoundSegmentForPlayer function call is expensive we only do this once we've filtered down the rows as much as we can.
- Mod: Added the drafts page.
- Mod: Added get active drafts.
- Fix: There's an error when saving the ComposeV2 when editing. The "Custom" theme's drop down has not been bound on page load.
- Mod: Updated the one column editing behaviour.
- Mod: Changed the read more link when updating.
- Mod: Added the save functionality in the side bar template.
- Fix: Missing tx parameter caused client deadlock.
- Fix: Missing transaction caused prize template page saves to fail.
- Mod: Updated the text editing behaviour of the side bar template.
- Mod: Updates to side bar template.
- Mod: Side bar template modal updates.
- Fix: Replaced @nonaffiliateid with @MemberID (which could be either the MemberId or the NonAffiliateId). @nonaffiliateid is actually never assigned a value in the script. This fixes the bug wherein a non-playing member (in the NA table) cannot access member pages (e.g. News) upon logging in.
- Mod: Changed the edit button behaviour for the side bar.
- Fix: Fix to the article id count.
- Mod: Updates to the color scheme.
- Mod: Minor typo change.
- Mod: Modified toolbar to contain the color scheme.
- Fix: Added the app.config in the commit.
- Mod: Added theme (color scheme) picker.
- Mod: Added theme (color scheme) picker functionality.
- Fix: Added the Newtonsoft.Json in packages.
- Fix: Another reference to WebUser.FromHttpContext.
- Fix: iSeekGolf sync courses didn't work in allclubs mode because WebUser.FromHttpContext is null when run from the job.
- Mod: Updates to side bar editor.
- Mod: Updates to the side bar editor.
- Fix: DG-7776 Kiosk teebooking was sending emails for booking for "Today". Changed so no emails are sent if the booking date is todays date.
- Fix: Performance issue caused by Members Directory query.  I chose to stop returning results here because I don't think this is being used much, and even if so it would have been broken for Next Gen clubs anyway.
- Fix: Performance issue caused by Members Directory query.  I chose to stop returning results here because I don't think this is being used much, and even if so it would have been broken for Next Gen clubs anyway.
- Fix: Indexing issue caused scans and high CPU+I/O on DB1.
- Fix: TeeBooking cancel emails were going to email addresses from resigned records.
- Fix: Restructured Email List / Sent Items query to make it run a bit faster - extracted the base table into a temp table, then perform the GROUP BY on that.
- Mod: Updates to the side bar template.
- Mod: Ported Matt's mod in rev 19406 to DotGolf.Teebooking.
- Mod: Updated the right side bar template.
- Mod: Added a function that adds module id.
- Fixed: Typo errors in the voucher template.
- Mod: Added the read more functionality.
- Mod: Changed the text for the save buttons.
- Reverted script change from before as it is working in staging.
- Mod: Changed IFRAME onload to window.scroll to try and make iDevices work properly.  MSC#99362
- Mod: Updated the full width text edit functionality.
- Fix: Another case of MacHell being proper cased incorrectly.  Asked Scott to repro on staging.  MSC#99684
- Mod: Updated behaviour of modules when editing.
- Mod: GetDetailsForVoucherAndUpdatePassportId - join only with transactions that are approved.
- Mod: They changed the content of the widget so we need to update our site
- Mod: They changed the content of the widget so we need to update our site
- Mod: Added a small banner image uploader and tool.
- Add: Hamilton home / splash tile images (resized the first four, added the fifth)
- Mod: Hamilton home page style updates
- Fix: UF#95 iSeekGolf timesheet fix for bug introduced in fix from rev 19401.
- Mod: If someone has already clicked on a link in an email inviting them to play golf (therefore are linked with the booking) - this will prevent anyone else from clicking on the link to update this information.
- Mod: If someone has already clicked on a link in an email inviting them to play golf (therefore are linked with the booking) - this will prevent anyone else from clicking on the link to update this information.
- Mod: This is more a stopgap measure to ensure that the same person does not book into the timeslot twice. This could have happened previously by someone forwarding an invited email (asking for payment for their booking) to someone else who made the booking or is already on the booking.
- Fix: UF#95 iSeekGolf timesheet case when uploading a transaction once opened (reservation deleted on slot) had a possible timing issue. Delaying after reservation deletion to see if solves issue.
- Mod: Added functionality to the toolbars.
- Fix: UF#123 Prize report template options saving copied Special line items was having null SelectMethod. Fixed so SelectMethod was always set.
- Mod: Prize report template options page performance tweaks. Moved some database calls outside of iterations which when there were many competition types was causing the page load to lag.
- Fix: UF#124 POG group booking time slot selector now shows course name for multi course clubs.
- Mod: Fix to the image uploader and cropper.
- Fix: UF#135 POG waitlist warning for adding an unfinancial member
- Mod: UF#132 POG cancel player with waitlisted player warning. Added some further text to clarify what will happen on proceeding.
- Fix: Oops, alias accidentally changed.
- Fix: Oops, removed a couple columns that I shouldn't have.
- Mod: Refactored Registrations SELECT to make it a bit faster (eliminated some of the branches in the query plan by caching in a temp table)
- Mod: Change the code for the image uploader and cropper.
- Fix: UF#135 Kiosk waitlist eligibility check for unfinancials
- Fix: POG Move booking for today (not move ticket) - do not send email notification
- Fix: UF#130 Kiosk waitlist. Eligibility check was returning valid when open slots 0 and if there were any valid slots in timeframe. Logic fixed so it fails if ANY slots are invalid even if open slots = 0.
- Mod: Minor changes to image slicer.
- Mod: Kiosk waitlist reset the times selected whenever the waitlist page is shown. Related to UF #126
- Fix: Waitlist eligibility check was not setting the CanWaitlist flag if the member had a booking in the waitlist time frame, though it was giving a reason.
- Fix: UF#129 Kiosk waitlist. Now any previous add to waitlist fail reason takes precedence over open slot reason.
- Add: Recurring bookings generation handler for JIT bookings creation. Related to UF#109 - usage for scheduled job /api/RecurringBookingsGenerator.ashx?op=run&allclubs=true Mod: Recurring bookings aspx page has a DotGolf only section for triggering the recurring bookings generation for the club logged on.
- Mod: Tauranga - apply max width and overflow hidden to UContent_HTML(so as to not break the layout if the image / table in the content is too wide.)
- Fix: UF#106 Bulk timesheet generation does not need to check for recurring bookings now, as they are done JIT so do not affect timesheet generation.
- Add: Tauranga new logo
- Mod: Tauranga logo update
- Add: Peninsula navigation images
- Mod: Added Update email draft body function.
- Mod: Added Update email draft body function.
- Mod: Added Save email and article functions.
- Mod: Added Save email and article functions.
- Fix: Kiosk waitlist now hides "Add to Waitlist" button on make a booking page, if the member already has a booking on the date.
- Fix: WaitlistControl.js reference versioned so cached file is not used when modified
- Fix: MP Teebooking waitlist dialog top position was far out of position when set to 50% as the iframe height is set large. Fix: MP Teebooking waitlist dialog img style fixed by removing p tag around img tag as an MP style was being applied.
- Mod: Hastings mobile style updates
- Mod: Added missing classes.
- Mod: Added the functionality in calling the web service.
- Mod: Initial commit for the bulk email project.
- Fix: MP iframe width issue with wrapper width difference. Previous fix with media query in css failed as when minified the media query syntax was invalid. Moved media query to internal css in aspx master file.
- Mod: Hastings - remove comment
- Add: Hastings - image link gallery
- Mod: Hastings - style updates
- Fix: Subs invoice report was not always showing the Effective date range for base subscription.
- Fix: MP iframe dimensions can differ from the wrapper div which was fixed at 960px. This could cause elements to be out of the iframes bounds and not visible, e.g. waitlist button floating right on SearchSlots.aspx. Media query added to css to adjust wrapper div width when < 960px.
- Fix: Error when you navigate straight to TXTNotifications.aspx without logging in.  We now take the user/bot to the login page instead.
- Mod: Hastings style update
- Fix: Subs bug in Renewal process. For periodic the new club member item end date was being incorrectly set to the original club member items end date. The end date for periodic items is now simply set to the new sub periods end date.
- Mod: Add if not exists (to ensure that controls won't be duplicated)
- Add: Script that adds Facebook and Twitter URL columns to Club table. Will initially be used in the Hastings club site's contact page. (Can be used for other clubs, too, in the future.)
- Mod: Initial commit for the Bulk Email solution.
- 
- Add: Hastings - script to insert new controls and their properties.
- Add: Hastings images
- Add: Hastings mobile styles
- Add: Hastings personnel and committee
- Mod: Hastings - personnel / club office styles
- Mod: Hastings bg images - reduce size
- Add: Hastings bg images
- Mod: Hastings - add properties to UContactDetailsStyle2, style updates
- Add: Hastings images
- Mod: Hastings style updates
- Add: Hastings image gallery styles
- Add: Hastings bg images
- Mod: Hastings css - transfer image gallery styles and image link gallery styles
- Mod: Hastings dropdown menu style updates
- Mod: Just add "View_Article" css class name - to differentiate this from other divs with the same "UContent_HTML" css class
- Mod: Hastings - Add UImageLinkGallery.css
- Mod: Hastings styles
- Add: Hastings - control styles
- Mod: Content styles
- Mod: Add a new control property called CssClassName - this allows admins to specify an additional css class name to div.UContent_HTML
- Mod: Update navigation script
- Add: UImageLinkGallery. Edit image gallery style.
- Mod: Add photo caption, update styles
- Add: Hastings - icons and photos
- Add: Hastings - Contact Details styles
- Mod: Hastings - style updates
- Mod: GetClubDetails - add FacebookUrl and TwitterUrl
- Add: Hastings - Contact Details control
- Mod: Hastings - style updates
- Add: Hastings (180-2) files
- Mod: Hastings - UCoursesSimple - add video thumbnail. update styles
- Mod: Hastings - remove console.log
- Mod: Hastings - Hole by Hole - edit style, nav, add video link
- Mod: Hastings - remove lblCurrent (not needed)
- Add: Hastings - Courses Simple control
- Add: Hastings - fullscreen background slideshow
- Mod: Remove weather forecast #5 - cannot be used
- Add: Hastings - simple weather control
- Mod: Huapai style updates
- Mod: Muriwai style updates
- Mod: GetProductsToFeature - include those with unlimited (null) quantity
- Mod: Use css to truncate text instead
- Mod: Truncate text (offer title and merchant name) using css instead
- Mod: Remove static time display (not needed)
- Fix: Added "and na.deleteddate" is null in the bulk email script.
- Mod: Changes in the bulk email creator functionalities.
- Mod: "The Hills are alive...."
- Fix: Added a base 64 encoding and decoding for username and password. This resolves the error when a special character is entered in the username or password.
- Fix: Added a base 64 encoding and decoding for username and password. This resolves the error when a special character is entered in the username or password.
- Mod: Update "Love Golf Play" to "Love Golf Get on the Green"
- Fix: Card print greyscale prior sql 2012 fix as iif cannot be used
- Mod: Changed the query to get the top 10 email drafts.
- Mod: Style updates - to align tiles
- Mod: Scorecard print hole name grayscale setting applied to scorecard reports
- Fix: Added a td height in the gotg email region section.
- Mod: Create a separate css class for product name in tile view
- Mod: Make product name text dark grey
- Mod: Update truncate of Product Name. Add link and tooltip using title.
- Mod: Changes to the gotg email template.
- Mod: Show only value if Price is less than Original Price
- Fix: #125 Kiosk Waitlist to show only future waitlists on my bookings view
- Fix: #126 Kiosk waitlist was not clearing error message
- Mod: Update HttpNotFound to RedirectToAction (Error Controller). Comment out Merchant Reviews code (as this isn't used)
- Mod: DealDateEnd
- Fix: GetProductsByMerchant - dealdateend condition
- Mod: Don't show current date in Offer Start Date
- Mod: Added category in the offer list in the bulk email sender.
- Mod: Added category in the offer list in the bulk email sender.
- Mod: GetRegisteredGolferByEmail - add condition where PassportId > 0
- Mod: Styles updates.
- Mod: Hide deal finder if small screen
- Mod: Make the Product Name a link
- Mod: Style updates. Remove Buy button.
- Mod: Show countdown when quantity is unlimited. Update offer end date--to show time 12:59:59
- Mod: Show only the bar (divider) if there is limited quantity
- Mod: Added a role checking in the email page.
- Mod: Added delete draft email functionality.
- Mod: Added delete draft email functionality.
- Mod: Added create and send email in the gotg bulk email sender.
- Mod: Added create and send email in the gotg bulk email sender.
- Fix: Increased Stroke column width to allow multiple stroke display for Aus like the Scanning scorecard has.
- Fix: Upload scores using local time 6am rather than NZ time 6am.  This is because of a problem a third party was having with scores turning up with 3am/4am competition round times.
- Fix: Prize post to ledger via MIS API now handles exceptions from MIS API when getting tax rate and gst code.
- Fix: Prize report saving when no new competition types are selected (like the old way), was getting an error.
- Mod: Getting ready to merge the new site background for the deals sent on Thursday (tomorrow)
- Mod: Edit text to say that the user can go to My Purchases page to download the voucher.
- Fix: Fixed the bank account number count (merchant-suffix) error.
- Fix: Allow deallocation of Green fee from scorecards if the player is a club member.
- Mod: Added an alert when submitting an offer and merchant's bank account is null.
- Mod: Added an alert when merchant's bank account is null.
- Mod: Competition Prize report ordering or prizes. Priority order moved to after Division and competition type, to hopefully make the report look better.
- Mod: Forgot the ChangeDate column.
- Mod: Added email functionalities for GOTG email sender.
- Mod: Added a message when merchant doesn't have an account number yet. Added email functionalities.
- Mod: Muriwai club site - updated slides
- Add: Missing package for Adweb.
- Add: Missing package for Adweb.
- Mod: Arrgh. TheHills2 is the image name...
- Mod: Remove the cobra image from the site Add: The getonthegreen background image for tomorrow to put live
- Fix: #1668 Competition results page now hides 'View in Excel' export button for Eclectic competition types, as they are not implemented for excel export.
- Add: Support for Casual Golf slicing of payments using new API.
- Add: #1653 Schema TBGroupBooking add CreateDate column with default getdate()
- Fix: Whoops, forgot to commit a column I added later (prize competition type reordering mod)
- Add: Ability to rollback a payment batch. Mod: Return DateCompleted value for payment detail lines.
- Add: DateCompleted property to CGPayment to send to Slicer.
- Fix: Changed the external link to 'target="_blank"'.
- Fix: #95 iSeekGolf issue with reservations in editing timesheets. Trialling a fix and logging more info
- Mod: Added a new article and changed the banner to "swing into summer". Banner is until 31 January 2015.
- Mod: Added a new article and changed the banner to "swing into summer". Banner is until 31 January 2015.
- Fix: Oops, missed part of the previous commit to casual golf.
- Mod: Changed SetPaymentsCompleted method to return a string because RestClient doesn't like empty responses.
- Fix: #114 Bulk Generate timesheets now correctly validate if existing timesheets are present for days selected within the date range.
- Fix: Changed the query to get the season year in the pennant tournaments instead of the competition date.
- Mod: Take into account the new DateRefunded column when considering amounts to pay to clubs. Mod: Made error message better so that we can see the Order IDs that are causing trouble, in an error condition.
- Fix: #95 iSeekGolf adding a booking to a reserved row in POG, then opening the row would cause error. Have tried not attempting to update ISG booking when the slot is closed as it is updated upon opening a slot. This may have caused something in ISG. To confirm fix in staging.
- Mod: The passportId change was because we already have the passportId - why should we go and get it again? The example that did not work when going to get it again was 2800109 because this was previously allocated to a different person (now resigned), and therefore it was getting an incorrect MemberId.
- Fix: Kiosk waitlist add to waitlist time dropdowns now have distinct times in list. Fix: Waitlist now handles slots not open to the booking source, and disallows saving a waitlist accordingly.
- Fix: Added a user check when downloading.
- Fix: Added a user check when downloading vouchers.
- Mod: Testing the background image on an ipad
- Mod: Testing the background image on an ipad
- Mod: Testing the background image on an ipad
- Mod: Kiosk waitlist increased visibility of add waitlist fail reason
- Add: Add new column DateRefunded to CGTransaction table
- Fix: Waitlist disallow waitlist when group bookings are in the time frame. And include group booking slots in count for booked slots.
- Mod: Added a bank account checking when approving an offer.
- Mod: Added a bank account checking when approving an offer.
- Mod: Add one day to end date (e.g. 15/12/2014 deal ends at midnight. Just before 16/12/2014 00:00)
- Mod: Add one day to end date (e.g. 15/12/2014 deal ends at midnight. Just before 16/12/2014 00:00)
- Fix: Compare DealDateEnd with date only (don't include time)
- Fix: Deals expiring on the current day (we dont consider the time) should still be included in the results
- Fix: GetProductsFiltered - correct the comparison for DealDateEnd. Deals expiring on the current day (we don't consider the time) should still be included in the results--for current and future query.
- Fix: GetProductsFiltered - deals expiring on the current day (we dont consider the time) should still be included in the results
- Fix: Check for a voucher code when checking for live order detail lines.
- Mod: Updates to the email sender. Test is already working but needs an email input.
- Mod: Updates to the email sender. Test is already working but needs an email input.
- Add: Two Casual Golf API methods to allow the Slicer to call in and get the total amounts payable to each merchant, and also mark transactions and order details as paid.  I'll do the other half next week before we do the actual payment, but at least this lets us cross check the manually worked out values.
- Mod: Site takeover for Cobra.
- Mod: Add checking of cookies
- Fix: Competition type reordering - prize report did not show prizes in the correct sequence if the competition types were reordered.  Needed a join to RSPrizeTemplateLineCompetitionType and looking at the Sequence column for ordering.
- Mod: Updated text about the credit card charging
- Mod: Disable submit button when the fancybox is closed. It'll get enabled again after the page is reloaded.
- Add: CGTransaction.SlicerPaidDate column, CGOrderDetail.SlicerPaymentId column.
- Mod: Updates to email sender.
- Mod: Updates to email sender.
- Fix: Corrected typo.
- Mod: Add OrderDetail.DateDeleted is null in queries
- Fix: Changed the name of the pdf filename for firefox issue.
- Fix: Changed the name of the pdf filename for firefox issue.
- Mod: Update text
- Mod: GetProductsFiltered - add condition to check approval status. GetProductById - add WebsiteUrl (so we can display this on the offer view). GetOrderDetails - add condition to get only valid order details.
- Mod: Search - edit approval status parameter
- Mod: Add a link to the club's website in the club details
- Mod: Update mapzoom from 8 to 9
- Mod: Remove unused code. Remove hiding of menu-main when scrolling (not needed)
- Fix: Kiosk add waitlist required a further check if any slots within the waitlist timeframe were not yet released to kiosk.
- Fix: Kiosk add waitlist screen UI slight improvements Fix: Kiosk Add waitlist saving now adds the waitlist to the My Bookings waitlist list immediately
- Mod: Redirect to getonthegreen.lovegolf.co.nz if the request ends with "/getonthegreen"
- Mod: Kiosk waitlist. Member can add to waitlist on a date, and remove the waitlisting. Fix: Kiosk cancel player now inserts waitlisted players. Member is warned this will happen. Fix: POG waitlist application creates seperate bookings for each waitlisted player applied. They must not be linked.
- Mod: Enclose radio options in label to make the text clickable too
- Fix: Do not allow club to select a past date
- Mod: SendBulkEmail - exclude EmailSubscriptionTypeId 2 and 3 also from making the images as attachment
- Mod: Set up DataCache correctly so it actually works.
- Mod: Cache S3 call to get carousel images for 30 minutes to speed up products query.
- Mod: GetProductById - join with OrderDetail that's not deleted
- Mod: GetProductsByMerchant - edit sorting. update join with OrderDetail
- Mod: GetProductsToFeature - edit sorting (by Discount). Join with order detail that's not deleted
- Mod: GetProductsNearby - join with OrderDetail Date Deleted is null, add sorting
- Mod: GetProductsFiltered - join with OrderDetail.datedeleted is null only
- Mod: Add EmailSubscriptionTypeId to unsubscribe link
- Mod: GetProductsFiltered - order by Discount if query is: current and approved
- Mod: Added text to offer email.
- Mod: Added text to offer email.
- Mod: RoutePrefix to MyPurchases
- Mod: Rename OrderDetail to MyPurchases
- Fix: Competition Type prize allocation reordering mod - this now allocates prizes in the correct order across multiple competition types.
- Mod: Update to DateTime.Today
- Mod: Updated email code.
- Add: Script that renames and reactivates the Love Golf Deals subscription type
- Mod: Update confirm message when enabling a voucher
- Mod: Comment out navbar-toggle's border
- Mod: Removed unsubscribe link from email.
- Mod: Quantity to Qty (to save space)
- Mod: Remove space before Forgot Password
- Mod: Show only the Value (Original Price) if the Price is lower than the Original Price
- Mod: Responsive updates - height
- Mod: Set max scale (so the page won't zoom in and out)
- Fix: Changed the all the links to http://getonthegreen.lovegolf.co.nz
- Mode: Updated links for responsive
- Mod: Responsive fixes
- Fix: Fix to Download link.
- Mod: Add z-index to product
- Fix: z-index
- REINSTATED competition type reordering mod so that I can continue working on it.
- Mod: Put back z-index
- Mod: Removed z-index from menuscrolled
- Mod: Update for responsive
- Mod: Hide Region label if small screen
- Mod: Style updates for Love Golf link with the categories. Hide bar on xs device.
- Mod: Changed the zindex of the region dropdown.
- Mod: Make home banner responsive
- Mod: Center the text
- Mod: Update text/note
- Mod: Update Title
- Mod: Logo updates.
- Mod: Update getonthegreen URL
- Mod: Changed the url to getonthegreen.lovegolf.co.nz.
- Mod: LG GOTG small logo update
- Mod: Logo updates
- Fix: Added ignoreroute.
- Mod: Logo update
- Mod: Update text
- Mod: Text updates
- Fix: Removed routes.IgnoreRoute.
- Mod: Update homebanner
- Mod: Add LoveGolf link
- Mod: Rename My Deal Finder
- Mod: Love Golf link style, update scroll menu opacity
- Fix: Still experimenting on the routing for the html and pdf files.
- Fix: Added routes.IgnoreRoute in RouteConfig.
- Mod: Move OR to the right
- Mod: Add Note under "Already Registered". Remove unnecessary comment.
- Fix: Added a logging when generating a file.
- Mod: Extend cookie also when editing the quantity and when removing an item
- Mod: Added a logging when downloading the voucher.
- Mod: Increased voucher template font size.
- Add: Script that alters CGProduct.ApprovalComment from varchar(200) to varchar(500)
- Mod: Limit Approval Comment (500). Add counter.
- Fix: Voucher ui changes.
- Fix: Increased voucher font size.
- Fix: Add bar only before quantity bought if there's quantity left
- Fix: If item has unlimited quantity, do not show "sold out"
- Fix: Waitlist editor save button disabling during the save
- Mod: Update text, show quantity left only if quantity is not unlimited (null)
- Fix: Added the region name in the home screen.
- Mod: Use cg_search_region instead of cg_user_region
- Mod: Handle expired cookie (show message). Extend the cookie every time an item is added.
- Fix: wa_TBApplyBookingChanges needed to clear the members waitlist for the day as only 1 booking is allowed per day.
- Mod: Waitlist editor hide Cart checkbox as not used yet
- Mod: Updated email contents.
- Mod: Removed "Privacy Policy"
- Mod: Enable the Redeem Voucher link
- Mod: Updated the email links.
- Mod: Update About Us content
- Mod: Restrict input to numbers only
- Mod: Update the validation message
- Mod: Show "You may also like these deals" when there are returned products to feature
- Fix: P.O.G edit booking and removing a player was not applying waitlisted players to the empty slot. The booking editor also now shows a warning when there is a waitlisted player. Fix: Apply booking changes ISG integration to only apply when not run in test mode
- Fix: WaitlistEditor removed extra ClubId sqlparameter to match proc signature
- Mod: Login updates (show validation if incorrect cred), Title update
- Mod: Title
- Mod: Title
- Mod: Add space
- Mod: Add hr
- Mod: Add hr and space
- Mod: Add loading image
- Mod: Update validation message
- Mod: Downgrade fancybox to the free for commercial use version (from 2.1.5 to 1.3.4)
- Mod: Update of Terms and Privacy
- Mod: Updates in terms, faq, privacy
- Mod: Add category name to "no deals found"
- Mod: Add RemoveCache
- Add: Updates a record in CGNavigation
- Mod: Added a new table for email logging.
- Mod: Added the % savings in the email section.
- Mod: Added the % savings in the email section.
- Mod: DotGolf Limited - should be New Zealand Golf Network Ltd.
- Mod: Add links to Privacy Policy and T&Cs
- Mod: Browse - add the category to "no deals found"
- Mod: ClubCMS waitlisting for members, and processing waitlisted players when a booking is cancelled. UF #88, #116, #117
- Mod: Added auto overflow to the preview div.
- Mod: Added the email section in the admin site.
- Mod: Remove commented out code
- Mod: Added Email section in the admin site.
- Fix: My Deal Finder - km value flickering
- Mod: Update DotGolf logo
- Mod: Contact - comment out message
- Mod: Update footer links and contact details
- Mod: Removed fictional "Sales" contact
- Mod: Index - GetNavigation - update parameter
- Mod: update a comment
- Mod: GetProductsNearby and GetNavigation
- Add: CGOrder table alter script
- Mod: CartSummary - Add ModelState IsValid check
- Mod: FeaturedDeals - use cg_search_region and replace spaces
- Mod: Removed Truncate helper (not needed on this view)
- Mod: Map js update
- Mod: Separate the google places js. Update the deal finder code.
- Mod: update Find My Deals button script
- Mod: Update menu on scroll script
- Mod: Add google analytics tracker. Updated _Layout view (put style and script to external files). Update the js bundles.
- Mod: Reduced the file size of the homebanner.
- Add: Updates to CGRegion table
- Mod: Add caching and update GetNavigation
- Mod: GetNavigation - add group param
- Mod: Handle non-affiliate logins--get the correct region, which will be used to create the CGUser record
- Mod: Add try..catch to Score saved notification so that SignalR doesn't take down score entry.
- Mod: GetMerchantByClubId - RegionId from Merchant table
- Mod: Specify the columns - GetMerchantByClubId
- Mod: GetMerchantByClubId - use the correct Region
- Mod: Add Region ID
- Mod: For members logging in for the first time, get the region IDs from CGMerchant to create their CGUser record
- Mod: Add DateDeleted to CGOrderDetail
- Add: Scripts for updating Get on the Green tables
- Mod: Edit - only check permissions if the user is not an admin (NZGolf or DotGolf)
- Mod: Minor UI fix.
- Mod: Add CgRegionId to user. Set Region when viewing an offer
- Mod: Add CgRegionId to user
- Mod: Region updates
- Mod: Make the Region in the navigation a dropdown again.
- Mod: Updates in the OffersEmailTemplate.html.
- Mod: GetRegisteredGolferByEmail - correct the position of FirstName and LastName
- Mod: Updated logo.
- Mod: Added a new email template.
- Mod: Show top 3 deals on the Cart Summary page when cart is empty.
- Mod: Show top 3 deals on the Cart Summary page when cart is empty.
- Mod: Minor ui change.
- Mod: Added an "OR" sign in the deal finder.
- REVERTED Onewhero prize competition types mod as Matt found a critical issue with it.  See David's email.
- Mod: Add Forgot Password link (to golf.co.nz)
- Fix: ORNS error if you try to set up a prize template but you don't check any of the competition types.
- Mod: Changed the order of the filename.
- Mod: Changed the order of the filename.
- Mod: Changed the ordering of the purchased items and the filename.
- Mod: Added HttpUtility.UrlPathEncode before url is encrypted.
- Mod: Text updates
- Mod: Add "Back to Shopping Cart" link
- Mod: Expire the cart id only after payment. (to allow the user to go back to cart as long as the payment isn't successful, and the cart isn't expired)
- Mod: Allow user to go back to cart from the payment page. Delete the cart items only after payment.
- Fix: Use UserSecurity as the source for encrypted credentials to pass over to LoveGolf Admin rather than Passport as the latter is unreliable for DotGolf Live users.
- Mod: Updated GetProductsNearby (used by deal finder)
- Mod: Added the Generate Voucher Code cosole app.
- Mod: Update text - Play to Get on the Green
- Mod: Updated the menu and the homepage GOTG link
- Mod: Get on the Green update - replace one tile on homepage and add link to club's offers on the club page.
- Mod: Update GetProductsByMerchant/Id
- Mod: Email UI updates.
- Mod: Logo update
- Mod: Category path updates (Product/Browse/[Region]/[Category])
- Mod: Remove line spacing from h3
- Add: UF #88 ClubCMS waitlist add/update/removal on search slot page.
- Mod: GetCartItemById - Consider the reserved item when determining the max number (in Edit Cart Item)
- Mod: AddCartItem - do not allow the user to exceed the available slots
- Mod: Cart submission - handle not enough slots left (given the number of quantity in the cart)
- Mod: Cart submission - handle not enough slots left (given the number of quantity in the cart)
- Fix: Changed the location of the font.
- Mod: Update the logo
- Mod: Enclose the Terms in a label so that the text is clickable, too.
- Mod: UI changes. Logo update.
- Mod: Add page titles
- Mod: Allow post back from DPS
- Mod: Add TxnId to the payment request input
- Mod: UI changes.
- Mod: Updated email and voucher logo.
- Fix: Included AjaxControlToolkit binary so that the build works standalone (Jenkins).
- Mod: Created a new email template for the registration.
- Mod: Update to the latest NZG tournament for 2015 (even though I dont think we actually need to do this on local)
- Mod: Updates in user registration in VoucherRedemption.
- Mod: Added a new email template.
- Mod: GetProductsToFeature - Add QuantityReserved
- Mod: Enable date picker for Redemption End Date
- Mod: Make the Redemption Period flexible. Allow 30, 60 days (and for the user to select any date)
- Fix: Creation of an offer now allows same title. Also added datedeleted checking when editing.
- Fix: Don't wrap member quick search table column headers as they cause an offset in the UI which could cause the user to click on the wrong person.
- Fix: "Machell" was still being proper cased as "MacHell" much to the ire of the guy bearing this surname...
- Fix: Fix for handling jpg in CMYK mode. Increased image compression to 95.
- Fix: Deleted competition's results were still being considered in the GolfLink upload screen.
- Mod: Region related updates--Add/Edit Merchant, make the Region (CGRegion) a dropdown.
- Mod: Region related updates--Add/Edit Merchant. Sorting of Regions.
- Mod: Added the club full name into the Email sender name for subs invoices, statements, receipts and credit notes being sent to members. Mod: Refactored SendEmail() method to make a new method SendEmail(DatabaseTransaction tran, SendEmailRequest request).  Subs methods now use the new one and I've added an overload so existing code won't break.
- Mod: Assign current Description to mycontent
- Mod: Removed Region (not needed anymore)
- Mod: Region related updates. Add map-all-offers.js (but this is not used yet)
- Mod: Region related updates.
- Mod: Updated to new MIS API.  To merge this into staging in the morning.
- Fix: Send Booking email notifications Member.Name could have whitespace that messed up name parsing. Trimmed them to fix.
- Fix: UF #71 iSeekGolf group bookings with a player booking within, when the group booking is cancelled the player booking must sync with ISG to show a transaction.
- Mod: Updated the voucher code Encode.
- Mod: Add letter spacing to h3 style
- Mod: Added a url encoding for the voucher code in voucher redemption. Edited the page description format.
- Mod: Center the page title, add hr
- Mod: AddCartItem - consider reserved slots before adding to cart
- Mod: GetProductById - add the Reserved slots in the Quantity Bought to avoid overselling an offer
- Mod: Add the Reserved slots in the Quantity Bought to avoid overselling an offer
- Mod: Blind refactor on old tournament registrations code so that I can avoid copy/pasting while creating my new tournament registrations form.
- Mod: Turn off auto complete
- Mod: iSeekGolf book and update transaction logging
- Mod: CreateOrderAndOrderDetails - Count reserved items as well (5 minutes)
- Fix: Do not display a negative number for QuantityLeft
- Mod: Added the genderize api to set initial profile.
- Fix: UF#107 iSeekGolf locking a slot set for 9 holes only for a player requesting 18 holes Mod: iSeekGolf locking slot only search for slots for start tee 1
- Reintegrated the prize template mod for Onewhero, to allow the user to reorder and exclude competition types from the prize allocation.  This was originally logged as SS#1659.
- Fix: Do not display a negative number for the QuantityLeft
- Fix: Ordered the clubs by name in the SearchMember.
- Mod: update text
- Mod: Added the merchant name in the email and pdf filename.
- Mod: Correct a typo. Change the name to GOTG.
- Fix: Edit Purchase submission
- Fix: Added a checking for the merchant before displaying the product in edit mode.
- Fix: Bulk generate timesheets UF#104 Clicking add template without selecting a template, now gives prompt.
- Fix: Fixed the save error in the image uploader page.
- Mod: Hide download button when voucher was redeemed.
- Fix: Bulk Generate Timesheets - UF #115 404 error. Querystring was too long. Switched to pass Json to batch process using session - UF #114 Existing timesheet check dates required timezone offset removal - UF #112 Email from address adjusted for AU
- Fix: Added a css that resets the added "custom" styles via js.
- Fix: Bulk Generate timesheets - UF #111 Date ranges are now correct, time zone was messing it up. - UF #112 Date ranges fixed, and bug in iSeekGolf upload fixed so email reports correctly - UF #113 iSeekGolf now uploads correct TeeOffIntervals and reservations for closed blocks.
- Mod: Changed the alert when redeeming.
- Mod: Added enable voucher in the voucher redemption.
- Mod: Added enable voucher in the voucher redemption.
- Mod: Refrain from processing a transaction again (e.g. user hits back button and clicks next on payment page)
- Mod: Refrain from processing a transaction again (e.g. user hits back button and clicks next on payment page)
- Mod: Update EditTransaction - only edit the transaction if it hasn't been edited yet before (user may hit back button)
- Fix: UF #110 Bulk Generate Timesheets template day tickboxes are now disabled on the validation step
- Mod: set default country
- Merged from iSeekGolf branch 18840, 18841, 18843
- Mod: Updated the search member code. Removed the passport id and HasPassportCredential in the query and added a new method for this.
- Mod: Updated the search member code. Removed the passport id and HasPassportCredential in the query and added a new method for this.
- Fix: Subs hide Load from Category link when not a SUBS club
- Mod: Live's LG page was changed.
- Fix: Changed the dotgolf live url.
- Mod: Update MerchantReference to "Get on the Green"
- Fix: Deleted "1385 live_FindSocialMembers_Surname_Firstname_Number" and "1386 live_FindMembers_LiveOnly_Surname_Number". Changes caused performance issues.
- Fix: Removed the checking of PassportId and HasPassportCredential in the MemberSearch.
- Mod: Add z-index to .product
- Mod: Update the go live date to 11th of December
- Mod: Update the go live date to 11 Dec
- Fix: Renamed procedure scripts to just be the name of the proc.
- Fix: Renamed procedure scripts to just be the name of the proc.
- Mod: Logo change.
- Mod: Remove border being added if cropping is done from the edge of image
- Mod: Remove border being added if cropping is done from the edge of image
- Add: Help box to Bulk Generate Timesheets page to explain about the recurring bookings limitation.
- Mod: When validating the image file extension, compare in lower case
- Mod: Adjust the earliest Start Date to 11/12/2014
- Mod: Remove highlighting of current date (could be misleading as we can only select Thursdays)
- Mod: Minor UI changes.
- Mod: Add BankAccountNumber to Merchant.
- Mod: Add BankAccountNumber to Merchant
- Mod: Changed the height of the redemption lightbox.
- Reintegrated Branches/Trunk.2014-11-12 iSeekGolf for iSeekGolf interface changes for Micropower.
- Fix: Added the date redeemed in the other voucher table.
- Mod: Changed the logo and removed the Reports link.
- Mod: Add BankAccountNumber as well to CGMerchant table
- Mod: Added validation in the update profile in voucher redemption.
- Mod: GetUserByPassportId - modify the condition
- Mod: Update user region in cookie when the user updates the profile
- Mod: Added a update profile functionality in Voucher redemption.
- Mod: Added a update profile functionality in Voucher redemption.
- Mod: Set "pay with existing credit card" as default selection
- Mod: Removed alter CGRegion (not needed anymore)
- Add: This recreates the CGRegion table, with default data
- Add: This populates the Region ID column in CGMerchant table
- Add: This adds new columns to existing CG tables
- Mod: Added checkboxes onto day names as discussed with Matt and also reported by Mitch (UF#105).
- Add: Recreates the CGBillingToken table (which is still empty) to update the identity seed, rename a column, reorder columns
- Fix: Replaced new school SQL statements with SQL2005 compatible ones as we are running that in production.
- Mod: Add checkbox for the Terms and Conditions in the cart summary view. Require this field.
- Mod: Do not allow the user to update a previously combined 9 hole - the user must delete the existing 9 hole score and add a new one.
- Mod: move the Edit this Purchase link
- Mod: update text and style
- Mod: comment out validation message
- Mod: Add loading image (spinner) while the user is being logged in
- Mod: just enclose the css in the Styles section
- Mod: allow html for the Description
- Mod: use html editor for Description
- Mod: Added the AddUser when a new casual golfer is created in the voucher redemption.
- Mod: Update branding from LoveGolf Play to LoveGolf Get on the Green
- Mod: Update the site to have this years tickets on the page.
- Mod: rename page name to LoveGolfGetOnTheGreen
- Fix: Added the RefRegionId to fix the region issue when a new golfer was registered.
- Fix: Added the RefRegionId to fix the region issue when a new golfer was registered.
- Fix: Whoops, reinstated sync for Express clubs with COMP product.
- Mod: remove comma from redemption date
- Mod: Don't show countdown and offer end date if the offer has sold out already.
- Ignored some stuff.
- Mod: Properly upgraded to new SignalR.  Luckily this works in staging and production, but it didn't work on my dev PC.
- Mod: update user's region in claims when profile is completed
- Mod: Added a message when a voucher is not found.
- Mod: GetUserByPassportId - return null if user isn't in CGUser table
- Add: Patchfile for the start of something to allow you to do inline editing of recurring booking times.  NOTE this isn't in the source, it's just a patchfile, we need to integrate and finish this for it to be of any use.
- Mod: Added exception handling.
- Mod: Added passport id in the member search query.
- Mod: clear the guest First Name and Last Name when the fields are hidden
- Mod: Show decimal places only if the Price is not a whole number.
- Mod: move the separator
- Mod: update the start date to 27/11/2014
- Mod: Added sending of email when a new passport credential is created.
- Mod: Added sending of email when a new passport credential is created.
- Mod: add try catch to new methods
- Mod: rename GetDotGolfPassport to make it consistent. Add exception logging. Remove unused code.
- Mod: rename GetDotGolfPassport to make it consistent. If user exists in CGUser table, get the details from there.
- Mod: add regions and exception logging
- Mod: Show decimal places only if the Price is not a whole number.
- Mod: Show decimal places only if the Price is not a whole number.
- Mod: Add logging. Updates on getting/saving the default Region ID of the casual golfer.
- Mod: Add logging. Updates on getting/saving the default Region ID of the casual golfer. Updated one PassportId param to int.
- Mod: Include the passport id when updating an order detail.
- Mod: Include the passport id when updating an order detail.
- Mod: add logging using Database.Log
- Mod: Added member email update and creation of passport credential.
- Mod: Added member email update and creation of passport credential.
- Mod: GetRegisteredGolferByEmail - update script
- Mod: add DealsPxPayUserId
- Mod: height of login popup
- Mod: add jqueryval to make the validation of required fields work
- Mod: send the credentials on a separate email
- Mod: Remove credentials from the voucher email
- Mod: correct a typo error
- Mod: Add Merchant Name and Redemption Date Start to email
- Mod: update DotGolfUserEmailRegistration - for active members with no email
- Mod: Remove unused code
- Mod: Edit Profile - only Region can be edit as of now
- Mod: Edit Profile - only Region can be edit as of now
- Mod: Rename EditProfile to EditNonAffiliateProfile
- Mod: Rename EditProfile to EditNonAffiliateProfile
- Mod: During checkout, if the email belongs to an active member or casual golfer, save the first name, last name, and passport id
- Mod: add GetRegisteredGolferByEmail - used during checkout, in validating if the email belongs to an active member or casual golfer. It returns the Full Name and Passport ID
- Mod: Updated PassportId to make it consistent (from string to int). Also passed passport id when order is submitted, as this is now saved in CGOrderDetail
- Mod: Removed GetDetailsForVoucher because it's not used/needed
- Mod: Renamed GetDetailsForVoucher to GetDetailsForVoucherAndUpdatePassportId. And update the script to update the PassportId in CGUser and CGOrderDetail (this is called after a successful payment, when the voucher is sent). Removed GetDetailsForVoucher because it is not used.
- Mod: Renamed GetDetailsForVoucher to GetDetailsForVoucherAndUpdatePassportId. And update the script to update the PassportId in CGUser and CGOrderDetail (this is called after a successful payment, when the voucher is sent)
- Mod: Update text and login link
- Mod: CreateOrderAndOrderDetails - save PassportId too with the OrderDetail
- Mod: update email event listener from focusout to keyup
- Mod: Added validation to the reg form.
- Mod: Updates related to user profile update - for newly created casual golfers
- Mod: updates related to User Profile Update - for newly created casual golfers
- Mod: Added SendCredentialEmail.
- Mod: Added SendCredentialEmail.
- Mod: Remove eves and nzwo from leaderboard settings CSS picker.
- Mod: With the where condition, we may as well remove the left joins - I am not sure why they were there in the first place.
- Mod: The green fee loading area was throwing an exception which caused issues when printing the card (TXLines not being saved, and green fee reports not being correct for group bookings). I have added some additional logic to a) return only group bookings from the SP b) check for any null values just in case
- Mod: Added the registration functionality in the redeem voucher.
- Mod: Added region id in the merchant model.
- Fix: Whoops, incorrect column alias caused control brokenness...
- Mod: Replaced some slow EF code with a simple Dapper SQL equivalent.  This should speed up the SCA page load time.
- Fix: Competition Select Control would get stuck in ajax spinner mode if the page has not finished loading when the control starts its first load.  In practice if you edit a card too quickly after the SCA page has loaded up, you get the competition select just spinning and never becoming available.
- Mod: Updates to the RedeemVoucher.
- Fix: Bulk generate timesheets - corrected validation check for recurring bookings between dates. - disabled Next button when no timesheets added for generation - highlighted error message for visibility
- Fix: Silly CSS bug that caused competition type select control to appear with the grid squashed to the left.
- Fix: All scores downloaded from GolfLink seem to be stableford scores; the GolfLinkScoreType value actually refers to the competition type.  Changing this so all Ad-hoc/downloaded scores show as Stableford.  Better than showing stableford points and calling it Gross / Nett and working out the HD wrong!
- Mod: Add IsProfileComplete
- Mod: Add IsProfileComplete
- Mod: Changes for the admin voucher redemption recipients.
- Mod: Changes in the admin voucher redemption.
- Mod: use a different final page for new casual golfers
- Mod: comment out logging
- Fix: For Firefox. Refresh CartSummary view after editing the purchase.
- Mod: Reverted back to original image (hills) background without link.
- Mod: comment out code - setting the cookie region id
- Fix: Ignore club_booked notifications as these are just mirrored back to us by TTM, cluttering our exception logs.
- Mod: send new credentials if newly created casual golfer
- Mod: Add credentials to email if newly created casual golfer
- Mod: table name capitalisation
- Merged revision(s) 18609 from Branches/Trunk.2014-10-08.bulk-generate-timesheets: Add: Bulk generate timesheets. New tab in tee booking that allows for bulk generation of timesheets from selective templates and date options. ........
- Mod: this file isn't needed in this project
- Mod: Changes in saving in CGUser. After a successful payment, register the guest user as a casual golfer.
- Mod: After a successful payment, register the guest user as a casual golfer.
- Add: NewtonSoft Json update for new Shared reference.
- Fix: Compare operators were the wrong way round....
- Fix: Transfer Member call didn't work due to invalid cast of Int64 to String.
- Fix: Removed the server name in the creation of the stored proc.
- Fix: This fix includes first name in the search member.
- Mod: Added a link to the Diners Takerover background. Used previous code - 15676.
- Mod: Background update for Diners Takeover.
- Fix: POG Create booking for Today defaults send email tickbox to unticked.
- Mod: AddCartItem - only add item if it's not sold out yet.
- Mod: GetProductsToFeature - exclude products which are sold out already
- Mod: text updates. removed sample text
- Mod: put additional validation to email address before checking if it's already registered
- Mod: add functionality that'll validate the guest email. if it is not registered yet, then we ask for the First Name and Last Name. (later, this will be added as a casual golfer)
- Mod: update js calls
- Mod: add IsEmailAlreadyRegistered - used in the cart summary page / checkout
- Fix: Removed another overzealous DeletedDate check.
- Fix: Over compensated on the DeletedDate check...
- Fix: ContactDetails page send email, fixed the From email address and To name order in the method call to the correct way.
- Fix: Search and found all RSCompetitionRoundSegmentEntry selects/joins and checked that they all have "DeletedDate is null" clauses (except one or two cases where they really shouldn't have that).
- Mod: Use the CalculatedExpiryDate column on TBStartTeeAllocation to give North Shore a major performance boost (average query time down from 3000ms to around 270ms when I was testing)
- Mod: Applied a hack to make scorecard scan images work even if the scan ping is running on a different process.
- Mod: Added SharedController for all methods related to the shared solution. Updated the MemberSearch to include first name in the keyword.
- Mod: Removed Redis session state provider as it does not give us much of a performance boost at all.
- Ignored some stuff.
- Add: Swipecard format YYCCCnnnn for Hawkes Bay (example 141840486).
- Mod: [Matt] DeletedDate check was missing on RSCompetitionRoundSegmentEntry leading to Scorecard Admin automatically putting people into competitions where they should not be.  This in turn might lead to other problems like the FK error with Scorecard.Id into RSCompetitionRoundSegmentEntryScoreCard.
- Mod: You can now undelete scorecards one-by-one from Adweb.  Primarily done for Aus as we don't really encourage this sort of thing in NZ.
- Add: Small adweb tweaks around casual members.
- Mod: Added SearchClubMembers.
- Mod: Added SearchClubMembers.
- Mod: Add login link (popup) on the cart summary view (checkout)
- Remove folders under Media folder (used for testing only)
- Mod: Added a layout for the admin reports.
- Mod: update claims if user is logged in only
- Mod: changes related to billing token
- Mod: changes related to billing token
- Add: script that creates CGBillingToken table
- Fix: Broken shared page using a ClubId where there was none.  new Club() fails when trying to call it with an invalid ClubId.
- Fix: Broken shared page using a ClubId where there was none.  new Club() fails when trying to call it with an invalid ClubId.
- Mod: Finally turn off sync for DotGolf Express clubs.  If you don't have our card printing product you will now have to use DotGolf Live for score entry and membership maintenance.
- Fix: Added Newtonsoft.Json.6.0.6 to golf.co.nz as it needs this to interface with Shared.
- Fix: When recalculating results for a specific RSEntryId, and when doing this for a team competition, we stuffed up multiple round competitions by only recalculating one of the team players.  This mod will now recalculate all scores for the team whenever one of the players change.
- Mod: Hide Facebook for now
- Mod: GetCartSummary - add CoverImageUrl
- Mod: Throw an exception when trying to save a score for members without a passport.  All members should have passports.
- Mod: show voucher redemption link for now
- Mod: Added an ellipsis css style in the leaderboard name. Removed bold font style.
- Mod: style update - sold out "button"
- Fix: Send email attachments now uses correct NZ/AU email address for organiser in calendar invite
- Mod: format the price displayed on the map info window
- Fix: Missing AspNet.Cors package.
- Mod: Missing Microsoft.Owin.Security.3.0.0
- Mod: Missing Microsoft.Owin.Security.3.0.0
- Add: Owin startup class for SignalR.
- Add: Owin startup class for SignalR.
- Mod: Properly installed a whole bunch more packages to get the upgraded SignalR working - we also need a Web.config change here - check out the web.config committed.
- Mod: turn off autocomplete
- Mod: add product's cover image to cart summary
- Add: Newtonsoft files - also properly installed the Newtonsoft.Json.6.0.6 package from NuGet.
- Mod: For "unlimited" offers, just limit the number of items to 100 per purchase for now.
- Fix: Updated the basic layout to have the header and subheader but not the image.
- Mod: comment out unused code
- Mod: comment out ValidateAntiForgeryToken for LogOff
- Mod: Show only Quantity Left if Total Quantity is greater than 0, which means the quantity is limited. Show only Quantity Bought if it is greater than 0, to not discourage users from buying the offer.
- Mod: Show only Quantity Left if Total Quantity is greater than 0, which means the quantity is limited.
- Fix: News story share send email. From address parameter was passed in the wrong method parameter causing null reference error. Add: Captcha to News story share page for sending emails. Prevent bots from sending crap.
- Add: New DLLs as part of package upgrades.
- Mod: Remove unused code
- Mod: Do not allow an expired item to be added to cart.
- Mod: Upgraded a bunch of other libraries too to get Live.NZ working again.
- Mod: Update in the s3 query.
- Mod: Also upgraded Microsoft.AspNet.SignalR.Redis to v2.1.2.
- Mod: update text
- Mod: update sold out text
- Mod: updated text/validation message
- Mod: remove unused code
- Mod: Add functionality to limit the number of quantity that the user can buy--based on the total quantity and the quantity bought.
- Mod: Add functionality to limit the number of quantity that the user can buy--based on the total quantity and the quantity bought.
- Fix: Updated the s3 folder query. Instead of using "contains", i used "startswith".
- More notes.
- Mod: Upgraded SignalR to v2.1.2 to try and fix the Object reference not set error from pre-2.0.3.  More detail here: https://github.com/SignalR/SignalR/issues/2933
- Fix: Teebooking move player dialog was not being removed, causing an issue with subsequent Move player dialogs Send Email tickbox. The checked value from the first opened dialog was being used for subsequent dialogs.
- Mod: update sold out text
- Mod: update cookie cart id expiration to 30 minutes. update message displayed if item is not available anymore.
- Mod: Minor UI changes.
- Mod: Removed EnableLeaderboardColourSettingsUI setting - everyone gets it now.
- Mod: check if the item is still available before purchase
- Mod: rearrange order
- Mod: check first if the item is still available before purchase
- Mod: check first if the item is still available before purchase
- Mod: update CreateOrderAndOrderDetails - check if the item is still avaialable before purchase
- Fix: Fix for the partial view error when paying.
- Mod: Added exception handling in public.
- Mod: Added exception handling in public.
- Mod: Added exception handling in public.
- Mod: Added logging for public site.
- 
- Mod: Booking email invite attachment. Duration of calendar invite increased from 3 to 4 hours. As that is the standard length for a golf game.
- Fix: Booking from ISG now does not sent email notifications. ISG would send their own, so no need for us to send more.
- Mod: Update max length of Description
- Add: scripts for Love Golf Play. 1365 - Add BillingTokenId column to CGTransaction. 1366 - alter CGMerchant.Description column length. 1367 -  populate CGMerchant.Description column, getting data from LGCampaign.MainDescription.
- Mod: Display Merchant Description in raw HTML
- Fix: I clobbered some changes in my latest commit (scripted a proc from Aus1)...
- Fix: We should be checking CMember for club membership, not just Member.ClubNo (which only indicates the home club of a member).
- Mod: update the viewmodel used
- Mod: Removed return statement.
- Mod: Checked the query in getting the club details.
- Fix: Stop StartSheetMonitor unhandled exceptions from spamming web1's event log.
- Add: New full schema script for database v1356.
- Mod: Include the FTS script for deployment
- Mod: updates in Cart Summary and added saving of Billing Token ID
- Fix: Added a checking to account approved transactions.
- Mod: update Cart Summary and add saving billing token
- Fixed: Removed silly base64 encoded inline image transfer and instead used the handler we've already written to preview advertising images in the Manage Logos area.
- Mod: Added FAQ content.
- Mod: Hide buy button when offer has ended.
- Mod: Detail view UI changes.
- Mod: style update
- Mod: cart summary updates. allow use of existing card (billing token) for dotgolf users.
- Mod: cart summary changes. add code related to using the existing billing token for dotgolf users.
- Mod: Added checking if transaction is approved in the order detail query.
- Mod: Alternative way to create/destroy connections.
- Mod: Added a checking for edit page when already approved.
- Mod: TrackerLog now works with a different connection string so we can poke its data into a separate database that is away from Prod.
- Mod: Added s3 bucketname in web config.
- Mod: Added exception logging.
- Mod: Added exception logging.
- Mod: Added exception logging.
- Fix: Handle the case where Club.Email is null.
- Add: new sponsor image
- Mod: Added exception logging.
- Mod: Allow full text indexing on the new FullName column. NOTE: Because David was working with a new NZb database, I developed against NZ9 for this test.
- Mod: Change to ensure Non Affiliates (casual golfers) are returned if they are also linked to a resigned member. Also, show the "Ex" club name if this is the case. Another mod to come with SQL to help with the full text indexing.
- Add: Aggressive caching to ComputeHoleScore() method.
- Mod: Progress scoring calculations disabled for all club competitions - we only need this active for competitions in ORG (with a TournamentCompetition link)
- Mod: Updated to multiple vouchers in one email.
- Mod: add [Authorize] - only logged in users can use this controller
- Mod: AddUser - add comment
- Mod: GetDotGolfUser - use GetLiveHomeClubMember to get the correct member details
- Fix: Green fee day time limits fixed to show distinct and not duplicates for each fee in the time list.
- Fix: Catch unhandled exception in Leaderboard and log it instead of spamming the event log on Web1.
- Mod: Update Voucher Redemption link
- Mod: Added download link in the orderdetail.
- Mod: Added download link in the orderdetail.
- Mod: GetDetailsByVoucherCode - add ProductId to CGProduct
- Mod: removed ValidationMessage (not used)
- Mod: add field
- Mod: validation of voucher code - show "invalid voucher code",
- Mod: Update page title and note
- Mod: Add validation - do not allow the user to redeem if outside the redemption date. Show message.
- Renaming sql files to sequence
- Fix: Teebooking move slot, the check for if there are no other players in the slot now only checks for players in the slot with the same ticket as the moved player Renamed to sequence
- Mod: Update description
- Mod: different datepair initialisation for gf and other categories
- Mod: allow selection of the same redemption start date
- Fix: Allow select of the same date.
- Mod: consider the prod category selected when computing the offer date end on change event.
- Mod: for Merchants / Clubs - hide the voucher redemption lnks in the menu for now
- Mod: offer date - update default date delta to 3
- Mod: offer date - update defaultdatedelta to 3
- Mod: remove comments
- Mod: date limits update - add 90 days dropdown for redemption date. when editing, make sure rules are in place
- Mod: Some of the names in our DB had a lot of white space at the end of the firstname, surname - causing this to fail because the string was too large. E.g. memberid = 134875
- Mod: Offer Date - change option to 4 days (from 24 and 48 hrs). Also, change Offer Start Date to Thursday (from Monday).
- Mod: Offer Date - change option to 4 days (from 24 and 48 hrs). Also, change Offer Start Date to Thursday (from Monday).
- Fix: Tee booking move players with payments were losing payment reference. New tickets are now generated for moved players.
- Mod: Bigger area for the voucher code textbox
- Mod: remove console.log
- Mod: Add registration promotion if user is a guest.
- Mod: Show "Sold Out" if quantity bought >= quantity
- Mod: GetDotGolfUser - NA - get user region instead of city
- Mod: "Sold Out" for items that have reached maximum quantity
- Fix: Added the "cat.deleted is null" for the introductory offer and club details.
- Mod: Remove "Back to List" link
- Mod: PopulateSubscriptionList - update sql script to show NZ Golf Newsletter too (EmailSubscriptionTypeId 1)
- Add: Scorecard Admin Read only for ISG booked cards. This disables Edit and mark as unpaid for cards.
- Mod: GetOrderDetails - add merchant name
- Mod: display merchant name along with item name
- Mod: text update
- Mod: reorder columns
- Add: alter cgorderdetail script - adds three new columns to CGOrderDetail
- Add: creates the table CGVoucherCode
- Mod: add styles section
- Mod: add min height to dd and dt
- Mod: add voucher redemption functionality (with report)
- Mod: add voucher redemption functionality (with report)
- Add: POG move ticket (multiple players) send email notification to players
- Mod: style updates - to ensure the whole date can be read
- Mod: Minor UI change.
- Mod: Added price in the voucher email.
- Mod: Added an email template for vouchers.
- Mod: Added the voucher creation and sending.
- Mod: Added the voucher creation and sending.
- Mod: Add Display Names
- Mod: added date end style
- Mod: removed "!important" from disabled style
- Mod: show Mondays only for deal date start. add readonly attribute (so that user can't manually enter the date).
- Fix: Apply booking email notification for non affiliates pending registration was sending 2 emails
- Mod: update the style ("warning" to "danger" colour) used for the Preview Note.
- Mod: update display names
- Mod: handle membership days limit. update option text (24 and 48 hours). add option values.
- Mod: Update option text (24 and 48 Hours), add values
- Mod: Renamed sql scripts.
- Mod: Disabled date picker on load.
- Mod: apply 7 days defaultdatedelta if product category is Membership / Stay and Play
- Mod: Subs Maintain line items does not allow duplicate lines to be added.
- Mod: Added the 7 days offer ends dropdown.
- Mod: update field description
- Mod: update disabled property to readonly. prevent end date calendar from popping up.
- Mod: update disabled property to readonly. prevent end date calendar from popping up.
- Fix: ISG POG hide Cancel All for slot if an entry is Read Only (e.g. ISG booking) UF#74
- Mod: Add restriction to deal date end (24/48 hours) and redemption date end (+90 days)
- Mod: Disabled the offer ends on dropdown on load.
- Mod: updated Description
- Mod: Update the description of RedemptionDateStart
- Mod: ensure that disabled fields are greyed
- Mod: Restrict input to Redemption Date End. Auto-populate it based on Redemption Start Date (+90 days)
- Mod: Changed the OfferStart and OfferEnd behaviour.
- Mod: Added GetDetailsForVoucher.
- Mod: Added VoucherCode in OrderDetailModel.
- Mod: Added Recipient details in OrderDetailModel.
- Mod: add comment
- Fix: Removed accidentally committed code.
- Fix: Also applied the !string.IsNullOrWhiteSpace(email) fix to members and non-affiliates, these checks had a similar problem.
- Mod: AddCartItem - increment quantity of cart item if the same product is found to be in the cart already.
- Fix: Friends were always deemed to have email addresses due to res.Any() always returning a row.  We now check for !string.IsNullOrWhitespace(email) instead.
- Mod: Add LastName
- Mod: edit CartSummary - include FirstName and LastName of logged in user, so this can be saved in the OrderDetail record.
- Mod: edit CreateOrderAndOrderDetails - save first name, last name and email
- Add: Final view for unsuccessful payment.
- Mod: edit CreateOrderAndOrderDetails - create one order detail record per quantity. edit EditTransaction - assign voucher code only if payment is successful.
- Mod: add code comments. Add OrderId as TxnData2.
- Fix: The Members Search on golf.co.nz (the autocomplete callback) is broken when running against SQL2014.
- Mod: Add comments to code. Edit the method EditTransaction - assigning of voucher code to each item (OrderDetail) purchased.
- Add: Release notes.
- Add: fnCalculateDistance
- Mod: update the text
- Mod: Add MerchantName as hidden field
- Fix: Correct the "Category" column name to "Name" (EmailSubscriptionType table)
- Add: Green fee check for tee booking and score card admin, ensuring a non affiliate green fee is never assigned to an affiliate player
- Merged Email Notifications, https://dotgolf.unfuddle.com/a#/projects/2/tickets/by_number/70 Revision(s) 17619-18347 from Branches/Trunk.2014-09-10.email-notifications: Add: "Send notification emails" checkbox to booking editor as per spec. Mod: wa_TBApplyBookingChanges proc changed to save SendNoticationEmails value. Mod: wa_TBApplyBookingChanges_SendEmails proc changed to send additional emails as per spec (email text to be revised)
- Mod: Knobbled a script so it doesn't accidentally get run again.
- Mod: Added new videos in the Why Love Golf section.
- Add: Remuera Golf Club - new image for splash page
- Mod: Change an image from find a dealer to find a retailer Change the from sendername in the email to be Toro Mower Challenge
- Mod: add condition to handle null
- Fix: Save first the text changes before redirecting/going to the action when user clicks on 1) Submit for Approval 2) Upload Cover Image 3) Upload Carousel Image. Added a note saying that the changes must be saved first before it will be reflected in the preview pop-up.
- Mod: Updated text only
- Add: Subs club items new Add Item dropdownlist and tickbox for Other to use textbox entry
- Fix: Competition results report ordering for Stableford not best of, no longer orders by RoundsConsidered.
- Mod: Revert back to the normal background image for end of Les Mills promo.
- Mod: edited Description max length to 3000
- Mod: update the length of CoverImageUrl also
- Del: remove these renamed files
- Mod: renamed the three files and added 1348
- Mod: For the LoveGolf Play public site - updated GetProductsByMerchant and GetProductsByMerchantId to add new columns
- Fix: ISG move booking now cancels ISG the origin timeslot if no entries are left, and books if target slot has not been reserved.
- Mod: Permanently fix the "Error: Column 'R6' does not belong to table Overall." message.  This is no longer a problem for new competitions since we've fixed it on database level.
- Mod: ISG bookings marked as paid UF #75
- Mod: Added an error handling page.
- Mod: Added a front end validation when uploading files more than the maximum limit.
- Mod: Added a favicon.
- Fix: Green fee Day Time limit saving for all fees in the group so it now works for Non Affiliates
- Delete duplicate (I renamed the file because there's another 1344)
- Delete duplicate (I renamed the file because there's another 1344)
- Add: updates for Love Golf Play - CGMerchant table
- Mod: updated CancelOffer
- Mod: Removed the responsive menu button in the login.
- Mod: Added "Deactivated" status in the search area.
- Mod: Changed the sorting of products after adding "Deactivated" status.
- Mod: Added "Deactivated" status.
- Mod: Added "Deactivated" status.
- Mod: updated email body text, updated condition
- Mod: Added version in the dotgolf link url.
- Mod: Added version in the dotgolf link url.
- Add: This is part 1 in the jigsaw for fixing some of the Start Sheet loading speed issues.  Because the TBStartTeeAllocation table has no ExpiryDate, it is really expensive to filter it down to a single row.  This mod adds a kind of calculated column to the TBStartTeeAllocation table which contains the Expiry Date (inclusive) for that row.  Whenever rows are inserted or updated, the trigger takes care of updating the Expiry Date on all rows affected.
- Mod: added number of rows and maxlength for description field
- Mod: updates description number of rows from 8 to 5
- Mod: Redirect to home page after editing the merchant details
- Add: 2 scripts - adds WebsiteUrl field to CGMerchant table and populates it
- Mod: Marginal performance improvement in live_NG_GetStartSheetAndEligibility.
- Mod: Add WebsiteUrl, add merchant name
- Mod: Add WebsiteUrl field, field description, update style
- Mod: Add WebsiteUrl field
- Mod: Add WebsiteUrl to CGMerchant
- Fix: LGPlay - fix to the image uploader. Somehow, an image was not properly resized.
- Mod: LGPlay - email is now being sent when status was changed from "draft" to "for approval" to jan of nzgolf.
- Mod: LGPlay - added a functionality that resizes uploaded big images.
- Mod: update text
- Mod: Add EditMyDetails (used by Merchants only)
- Mod: Allow Merchants to edit their basic details (that'll appear on the offer page)
- Mod: Add field descriptions and multiline option for Description
- Fix: Added "and cat.deleted = 0" when querying the club membership in LG.
- Fix: Fees limited by times now are not show outside the times. NOTE there is still an issue for Non Affiliates. It is only working for members.
- Mod: Update text, add controller name
- Mod: Show confirm window before cancelling an offer. Rename the link to "Deactivate"
- Mod: Updated the image uploader javascripts.
- Mod: put back/uncomment date pairing script (ensures that start date is less than end date). comment logging.
- Add: ISG booking contact phone no added to booking information, ticket #84
- Mod: preview style updates
- Mod: Added an app setting for the s3 bucket name.
- Mod: Added S3 bucketname in web config.
- Mod: Checked and renamed Doug's scripts 1600+1601.
- Mods: Minor changes to Toro project sent from Jan at NZG
- Fix: delete product
- Add: Error logging to notification call.
- Mod: edit condition (for nzgolf and dotgolf users)
- Mod: LGPlay - added width to the column offer in index.
- Mod: Change it to use the AppBaseURL in the web.config file to determine whether to use the ScorecardNotificationHandler call.
- Fix: Incorrect URL in scorecard printed notification handler.
- Fix: LGPlay - fix when searching offers as 900.
- Mod: For NZ, bounce scorecard printed notifications through another HTTP call to try and get around the SignalR routing issues with cn-api.golf.co.nz.
- Mod: update Create. fixes creating an offer by nzg on behalf of a club.
- Mod: Try and force SignalR to initialise (and point it to Redis) when CardPrint.asmx is first invoked, as I don't think the standard Owin startup class is being called from ASMX services.
- Mod: LGPlay - fix on the merchant dropdown.
- Mod: LGPlay - updated the code to not always get merchants on products load.
- Mod: Force a connector update for testing cn-api.golf.co.nz.
- Mod: LGPlay - fix in approving when nzgolf is logged in as 900.
- Mod: update text
- Fix: Copy/paste bug in SetEdgeURL.
- Add: Connector update wyp file for cn-api.golf.co.nz.
- Fix: NeedsRestart bug in connector - if there is also an EnableScanning update the NeedsRestart flag would be set to false, stopping the service from restarting properly.
- Mod: LGPlay - fix for the delete button in the image uploader.
- Mod: update "IntroductoryOffer.aspx" to "LoveGolfPlay.aspx" (landing page for clubs not on NG)
- Mod: add price range (must be at least $10). show validation message.
- Mod: LGPlay - added a query string in the uploaded image to avoid caching when uploading.
- Mod: Return ClientConfigurationXmlOutdated flag if the ConnectorAPIEndpoint setting changes.
- Add: Setting to allow me to switch connectors to the http://cn-api.golf.co.nz/ endpoint instead of live or edge (independently of whether the client UI is using live/edge).
- Mod: rename a style class
- Mod: Removed commented code
- Mod: Add note
- Mod: Add note
- 
- Mod: LGPlay - changed the login to accept 900 and assign it as NZGolf.
- Mod: add note
- Mod: LGPlay - fixed the validation when a file greater than 2550kb was uploaded. Edited the default selection of the image uploader.
- Mod: update "keypress" to "keydown"
- 
- 
- Add: ConnectorAPI project.
- Mod: LGPlay - modified the header of the preview.
- Mod: update price format
- Mod: LGPlay - fix when uploading images.
- Mod: LGPlay - added try catch in SaveFile.
- Mod: Show number of char left for Short Description
- Whoops, stuffed that up - reverted the revert.
- Removed Les Mills on the site. ........
- Mod: added UserResponse
- Mod: Added GetUserByUserId
- Mod: Added PaymentExpress.PxPay1 and removed connection string
- Mod: update tex
- Mod: update display of name
- Mod: Removed UserLocation method (not used anymore)
- Mod: Add GetUserByUserId
- Mod: Updated Login - add region. Updated SignInAsync - add FirstName and Region
- Mod: update display name of merchant id
- Mod: add FirstName and Region - extension for identity
- Mod: Rename UserLocation to _UserLocationPartial and update code
- Mod: LGPlay - added image selection in the carousel image uploader.
- Mod: LGPlay - added a selection image feature in cover image uploader.
- Mod: LGPlay - added a functionality that crops the cover image when uploading.
- Mod: update the Love Golf link landing page to "LoveGolfPlay.aspx" (if love golf is activated for that club)
- Mod: correct the email address. make it a mailto link.
- Mod: edited home page contents (add Jan's info) and style
- Fix: removed space in "NZGolf,DotGolf"
- Mod: edited the condition so that it'll loop through all values (NZGolf and DotGolf)
- Mod: line height of field description
- Mod: Add link to View Offers
- Fix: Changed the session clear for logout.
- Mod: "Membership Offers" to "Membership Rates"
- Fix: correct a typo "Redeem" and remove a link "Market (Bulk Email)"
- Mod: added GetUserByUserId and updated query for GetProductCategories
- Mod: edited descriptions of dates
- Mod: set start date to Dec 1 2014
- Mod: add maxlength to title and short description
- Mod: SQL changes for Toro changes.
- Fix: Modified the way that PassportModel is being serialised and stored into session so that we can enable StateServer sessions.  We need this because otherwise if we publish (with InProc sessions) everyone's sessions go away!
- Add: TabMember.aspx membership tab added display field for Date Started from cmember table
- Mod: Changes for the 2014/15 Toro Mower Challenge. Added divisions into the competition (based on handicap ranges) Added some registration questions Changed images/text on pages Changed email templates
- Mod: Category Member Counts report now displays category name instead of narration
- Mod: Publish Les Mills on the site for 3 days
- Add: LoveGolf Play tables
- Mod: Search by the rounddate - not the competitiondate to find competitions for the calendar. (these could be different)
- Mod: edit GetDotGolfUser to handle casual golfers
- Mod: style updates
- Mod: RemoveCartItem - add CartId
- Mod: LGPlay - fix for the image size limit when uploading.
- Mod: RemoveCartItem - add cartid in the condition
- Mod: style updates
- Mod: LGPlay - Updated the image requirements.
- Mod: update format of prices
- Mod: update original price format
- Mod: edit fancybox dimensions, edit text
- Mod: comment one line to allow setting of height
- Mod: minor updates. removed comments
- Mod: update price format
- Mod: update price format
- Fix: Email template fix with image spacing.
- Mod: removed SubTotal
- Mod: Added callout (note) style
- Added: Microsoft.jQuery.Unobtrusive.Ajax
- Mod: added GetCartItemById and EditCartItem
- Mod: added CartItemEditForm
- Mod: added js
- Mod: Added EditCartItem, EditCartItemPost. Updated CartSummary
- Mod: fancybox, totalbill
- Added: js, css, fancybox, EditCartItem.cshtml, _LayoutBasic.cshtml
- Mod: Renamed RemoveCartItemResponse to CartItemResponse
- Mod: added EditCartItem and updated RemoveCartItem
- Mod: updated GetCartItemById and added EditCartItem
- Fix: Email layout fix when adding an left or right image in the article.
- Mod: Added the LoveGolf Play in the LoveGolf section in Live.
- Fix: Competition result report further change for Par best of
- Mod: LGPlay - updated the role when page is loaded from live.
- Fix: Transaction deadlock if you update a member's password.
- Fix: Start sheet ISG bookings are now read only. They cannot be edited, moved or cancelled. The read only flag can be used for other purposes in the future.
- Fix: There was a bug in editing the profile because MemberID is -1. Fixed by getting the MemberID from the session.
- Mod: LGPlay - Fix for the item left/bought in public site.
- Mod: LGPlay - UI changes.
- Fix: Locking didn't work properly after ServiceStack library replacement.
- Mod: LGPlay - updated the image file size. Added a small leeway.
- Mod: LGPlay - fixed the issue when saving in edit mode.
- Fix: Send gender into tee booking helper as M when processing iSeekGolf bookings; we are not provided with a gender and we can't use NULL anymore (I think this was caused by the casual golf changes a while ago).
- Mod: LGPlay - added a validation that doesn't allow users to upload images that is not the same as the specified values.
- Mod: updated status
- Mod: edited GetProductsFiltered
- Fix: Kiosk was showing timeslots that had not reached their specific release time #94080
- Mod: simplify raw html code
- Mod: display description in raw html
- Mod: updated total bill
- Mod: LGPlay - updated the carousel image uploader. Now contains maximum image upload validation.
- Add: Golf link start of day handler can process start of day for all clubs. New querystring param allclubs=true
- Mod: Added StatsD logging into iSeekGolf so I can see what the heck is going on with this.
- Mod: Blank cards print now prints strokes 19-36,37-54 if the course contains them
- Fix: On exception, report 500, not 200.
- Merged revision(s) 18147 from Trunk: Fix: Small change to methods - should be pushing in the right, popping off the left. ........
- Mod: Added DPS / payment config
- Mod: Payment / transaction related updates
- Add: TransactionController
- Add: CGTransaction model
- Mod: Payment related updates
- Add: Transaction
- Fix: Small change to methods - should be pushing in the right, popping off the left.
- Fix: ServiceStack.Redis turns out to be crippleware - SO frustrating.
- Fix: Settings country code check now uses Database.CountryCode
- Mod: Timesheets disabled delete all slots if a booking exists. A message is now displayed if the delete link is clicked.
- Mod: Need to add a different case for a logged in Non Affiliate -  LoginState.AuthenticatedNonAffiliate
- Mod: add payment functionality
- Mod: add payment functionality
- Add: style for cart summary
- Add: PxPay.cs - used for payment
- Mod: Non affiliates were getting errors when trying to register through the club website. I am not sure how this ever would have worked previously for Non Affiliates because Null values were being passed into this method for username and password.
- Mod: LGPLay - added cancel offer method and other ui updates.
- Mod: LGPLay - added cancel offer method.
- Mod: If the person is a nonaffiliate, the passport is not inserted when creating the membership - so we will add it here (slightly different process to members) I did not want to change that process in the creation of the nonaffiliate record, because they could be registering via golf.co.nz too, and there are different types of nonaffiliates (casual golfers etc) that also are done through this pathway
- Mod: LGPlay - updated the quantity to accept null.
- Mod: LGPlay - updated the quantity to accept null.
- Mod: Cleanup for the DisplayClubCode issue with the sql script 1335.
- Mod: LGPlay - search filter updates and UI changes.
- Mod: LGPlay - search filter updates.
- Mod: DisplayClubCode was being updated for members as blank if only sending an update of an address or phone number. Now, we ignore this for NZ, and only consider it for Aus.
- Merged revision(s) 18113-18116 from Branches/Trunk.sprint-2909: Fix: Group booking Remember me checkbox setting to false after true ........ Mod: Competition Prize report dropdown removed date created from report names ........ Mod: Group booking added a clear favourite details button to reset fields if a favourite was selected ........
- Mod: LoveGolf Play - minor UI changes.
- Mod: add margin bottom to search filter
- Mod: Display description in raw html
- Mod: Disable/remove action from Buy link
- Mod: LoveGolf Play - modified the search filter layout.
- Mod: add char count for terms
- Mod: Roll back email notification specific changes as that is still in a branch yet to be merged.
- Add: Release notes.
- Mod: add comment
- Mod: replaced hardcoded label for Product Name
- Mod: Removed "shorter" class (not used), display char count on load
- Mod: updated calendar icon
- Mod: Add char count / char limit
- Mod: Only show Membership Settings (the grace period setting) to Aus.
- Mod: Update Descriptions
- [Matt] Mod: If the member is a member of that club (secondary or home) we should only have a look at the category for that club. If they are visiting members, we need to look the categories of the other clubs, ordered by the FullPlaying flag descending (in case they are a member of many other clubs, with different FullPlaying rights at the different clubs)
- Mod: LoveGolf Play - changed the default view for the products/offers table.
- Mod: LoveGolf Play - changed the behaviour of submit for approval button in edit page.
- Mod: LoveGolf Play - added preview button in the edit page.
- Mod: LoveGolf Play - Updated step 2 and 3 in the edit page.
- Mod: Changed cleanup wait duration to 12 hours instead of 2 days - the temp folder is using up too much disk space.
- Merged revision(s) 18089 from Branches/Trunk.sprint-2909: [David] Committed these missing files - unclear as to whether they really should be part of this but the build wasn't working... ........
- Mod: LoveGolf Play - Added steps in create and edit pages.
- Mod: LoveGolf Play - Added email template in solution.
- MERGE Sprint-2909
- Mod: Add rich text editor toolbar
- Mod: Add cssform
- Add: quill.snow.css
- Mod: This is the new logo with the correct dimensions.
- Mod: Update the srixon logo. It is not exactly the same size, but since it has a white background you cannot tell. I have asked her for the correct size one in the meantime.
- Add: quill.js
- Mod: rich text editor for description
- Mod: Display raw html for description
- Add: quill.js
- Mod: style for rich text editor
- Mod: segregate js
- Mod: update js reference
- Mod: Allow HTML - Description
- Mod: LoveGolf Play - Added a new email template with the NZ golf logo.
- Mod: LoveGolf Play - Minor UI change.
- Mod: LoveGolf Play - Changed the create offer button in the admin home page. Added a note section in the approval box.
- Mod: LoveGolf Play - updated the Get Products method in fetching S3 objects.
- Mod: LoveGolf Play - Updated the delete page.
- Fix: Waitlist ClubId reference. Also displayed message on waitlist save if no slots are loaded for the time frame, or if time slots were available.
- Mod: LoveGolf Play - added edit link in the list even if it's declined.
- Mod: LoveGolf Play - added submit for approval functionality in the list and preview.
- Mod: LoveGolf Play - added submit for approval functionality in the list and preview.
- Mod: form style updates
- Mod: Update description and display name
- Fix: Noticed the SignalR upgrade was never done to Org, so it was reporting errors in the console.  I don't think this would have affected production as the SignalR stuff doesn't really apply to Org anyway (apart from the recently entered scores which is broken anyway due to the ClubID dependency). Fix: Web.config adjusted so it works on my PC.  This file is not deployed to production.
- Mod: LoveGolf Play - Added merchant and status filters.
- Mod: LoveGolf Play - Added merchant and status filters.
- Add: AjaxControlToolkit added to packages folder to make my build work.  Hopefully this won't upset Jenkins. Fix: Ignored some stuff.
- Fix: update min width of the dropdown menu (for the long page name under Visitors menu)
- Mod: LoveGolf Play - Price sorting fix.
- Mod: use datepair, disable past dates
- Mod: add description and update styles
- Mod: LoveGolf Play - after saving the offer, redirect to edit instead of index (list).
- Mod: style and text updates
- Mod: LoveGolf Play - added offers count checking to displaying table.
- Mod: LoveGolf Play - changed the get inactive offers code.
- js updates
- Add: jquery.datepair.min.js and jquery.timepicker.min.js
- Mod: Added descriptions
- Mod: Renamed Image.cs to ImageModel.cs and added Extension.cs
- Mod: Add field descriptions, add script for date pairs
- Mod: added reference to timepicker and datepicker js
- Fix: SQL issue caused null @MemberId causing a CHECK constraint error trying to insert into Passport.
- Mod: LoveGolf Play - UI changes.
- Mod: LoveGolf Play - Updated the Add products function to the new schema.
- Mod: LoveGolf Play - Link updates.
- Mod: LoveGolf Play - UI changes to Details page.
- Mod: LoveGolf Play - added security in preview page.
- Mod: LoveGolf Play - UI changes on admin site.
- Mod: config updates - added DotGolfLiveUrl for Dev
- Mod: LoveGolf Play - Added the "Preview" functionality in the admin site.
- Mod: UpdateProductApprovalStatus - added join to CGProductCategory (Category column in CGProduct is obsolete)
- Mod: cleaned up config
- Fix: Error appeared when trying to add a new Non-Affiliate member (socials at Clarks Beach).  Helpdesk ticket DG-570.
- Mod: Add Local - GTC config
- Mod: removed AdminMediaFolderUrl
- Mod: LoveGolf Play - Added preview page for the admin site.
- Mod: LoveGolf Play - updated approval methods.
- Fix: For some reason RSCompetitionRoundSegmentEntry rows can have NULL CompetitionRoundSegmentId values.  I'm at a loss to explain why we built it this way, but common sense dictates that if you don't have a CompetitionRoundSegment then the Entry itself is meaningless.  So I've excluded it in the WHERE clause.
- Fix: Scores uploaded to GolfLink were being duplicated for the same player if you have that player in 2 competition rounds for which the round no's are different.  For example, a Stroke competition for the day (R1) and another long running comp, say R3.  A grouping issue caused this to be turned into 2 scores uploaded to GolfLink.  The intent of the grouping was actually to handle rounds on the same date, but this situation is already taken care of by the fact that the ScoreId (also in the GROUP BY clause) is already different.
- Mod: Insert a passport for MSP members if they don't have a passport.  This is to fix sporadic member login issues presumably for guys that have been created since the casual golf upgrade (they don't have passports and we've missed this insert)
- Mod: LoveGolfPlay - Changed the coverimageurl to look at db instead of file system.
- Fix: Kiosk tee booking, when adding a player, removing them and then saving a booking, a cancel entry was being sent even though the player was never "saved" to the booking. This caused the booking to fail. Now if removing a player that has not been previously saved to the booking, the entry is simply removed.
- Fix: Oops, missed a file!
- Fix: BestOfOverallResult type was not paying any attention to the LessIsBetter property on ScoreLogic, which meant that Stableford results were ordered upside down.
- Mod: LoveGolf Play - changed "Pending" to "For Approval".
- Mod: LoveGolf Play - changed "Pending" to "For Approval".
- Mod: LoveGolf Play - do not send email when status is changed to "pending"
- Mod: LoveGolf Play - Added table sorting.
- Mod: LoveGolf Play - Added a functionality that sends an email when a deal is submitted.
- Mod: LoveGolf Play - Added sending of email functionality when a deal is submitted.
- Fix: The javascript countdown timer on the tee booking page "Booking for Tuesday 4 Nov 2014 will open on 20 October 3:00 p.m." did not work correctly in that it didn't take into account the timezone of the club at all.
- Add: Quick spec for Prize Competition Type Ordering Mod (smartsheet #1659)
- Mod: Added deal approval.
- Mod: Added deal approval.
- Mod: Group bookings will now correctly be sent up to iSeekGolf.  Unfortunately at present I am unable to test this because I can't find a working login to TTM.  But in theory it is done and should work.
- Mod: Added Filters for Deals. Added User Permission and Roles.
- Mod: Added Filters for Deals. Added User Permission and Roles.
- Fix: Home members only for posting prizes
- Fix: Subs correct current sub period selected allowing for grace period
- Mod: Better ajax error handling in the kiosk code to help Onewhero and their dodgy internet connection.  Now if the browser can't connect to our API it will throw an error blaming the internet connection instead.
- Add: Missing library DLLs preventing build from working.
- Mod: Added AWSDK package folder.
- Mod: Added ImagesModel.cs in project.
- Mod: Added admin login functionality.
- Mod: - Changed image repository to Amazon S3. - Added login page - Added link to Edge
- Mod: Removed obsolete Grace Period club setting
- Fix: Recompressed the Hills background image to save approx 500kB.
- Fix: Alt Member number corrected for integration with MIS
- Fix: DotGolf only parts to hide
- Fix: SaveImage - added slash to the product path
- Fix: Scores for Aus were incorrectly going into the RSScore table instead of Score.  Technically all golflink lookup members should get passports, but they don't have any right now - we need to go back and fix this too.
- Fix: 2 methods found to update so CategoryItems filtered by DeletedDate
- Fix: TabCategories call to FindCurrentSubPeriodId. This methods sql adjusted to return correct order of subperiods with items
- Mod: When a round is deleted, all entries for that round will now be automatically be deleted so that results are no longer kept for these entries. Fix: When a round number is updated in competition setup, the results will be recalculated to update the AsAtRoundNo in the reports.
- Fix: When saving the profile, handle null email in the comparison / condition for sending the verification email.
- Mod: For the webservice polling loops (scorecards and scanimages), we will now sleep for 30s if the webservice call fails for any reason.  This is to avoid a runaway retry loop when the server goes down or unreachable.
- Fix: Don't start housekeeping thread if C:\Card Images does not exist (indicating this isn't a scanning club)
- Fix: Added a code snippet to hide the .dg-only-section when the user is not DotGolf.
- Fix: Added (ComposeV2)Page to email selectors. Fixed the issue "Unable to cast object...".
- Mod: Category hide Copy sub items if sub period overlaps with current period Fix: TabMemberPage hide Load sub items if category has no sub items. Fix: Does not show warning and continues loading sub period items if there is no current sub period - for categories with no sub items e.g. UDEF
- Mod: Quick hack to enable casual golf score entry when we give NGSE to all DGE clubs.  With this mod we should be able to enter new scores by member ID using the new SIC, but no card no entry, and also editing scores will still use the old SIC.
- [Matt] Add: api_AddScore fix to sort out duplicate passportIDs being put onto scores for the same member.
- Fix: Member Subs sub items loading Mod: Sub line items Add made DG only
- Fix: Added AWSSDK package in Shared solution.
- Mod: Sub line item add DG only
- Mod: Removed hiding the pnlNAFilter because the logic seems to be done from within the meganav items for MyGolf anyway Fixed an error that was happening when you tried to navigate to MyGolf/Competitions if you were not logged in. When validating if IsValidSocialMember, I removed the left join (not sure why it was being used) and also checked they were not a valid live member. This is for the case when a member is reinstated at a club, after being a CasualGolfer. (Nothing has been done for this yet in DotGolf Live - but it needs to very soon)
- Add: Settings Subs line item Add Fix: TabMember load correct current period Fix: TabMember load correct period subitems from category period sub items on category dropdown change Fix: TabRenewals now set correct end date for periodic sub items Fix: TabMembers now only auto set end date is javascript if category is cyclic Fix: TabCategories show correct sub period label on initial load Mod: TabCategories disable Add Sub Item for a sub period if there is a current sub period already with items that overlaps
- Fix: Added Article class file which is causing a build error.
- Fix: Added AWSSDK package.
- Fix: Fix for the build error due to amazon dll.
- Fix: Changed the path of the Amazon dll path due to build error.
- Mod: Changed Amazon S3 to point to Syndey server instead of US.
- Mod: Added sql script for the BulkEmailV2 changes.
- Mod: Added EmailLinksReport files.
- Mod: Change the background for the launch at 4pm today for the NZ Open.
- Mod: Additional code changes for the Bulk Email V2. Committed email link reports, additional SPAM2 - BulkEmailV2 asset group, help file.
- Mod: Initial commit for Bulk Email V2. Added images, css, cuteeditor config, templates for the Builk Email V2.
- Mod: Added Amazon S3 Service in the Shared BusinessLogic.
- Fix: Incorrectly sliced CentralMemberCode value to get the CentralClubCode.
- Add: Cachebuster tags for js and css files.
- Fix: Make Twilight competitions work (where both the F9 and B9 are set up for play in the same comp).  To make this work I had to hook up the nineHole property in the viewmodel to both the marker select control and the competition select - they weren't listening to each other before.  Also I have introduced some code to stop the marker selection from being reset to the default marker for the comp once a comp is selected - it will now only do this if the competition marker list does NOT include the currently selected marker.
- Mod: Subs: Changed so that if you have a renewal amount set on the member record, that will always be used before the category default amount.
- [Matt] Mod: Rather than join (and potentially return multiple rows for the passportcredential table), this has been changed to an exists statement.
- Mod: Reference the passport not p.
- Mod: Prevent people clicking on the link twice (if there are 2 people in the combo box to choose from), and then selecting 1 person in 1 tab, and the other person in the other tab. This should block that from happening again. Also, added a deleteddate on passport.
- [Matt] Removed the left join to category - not sure what that was being joined for? Added join to passport and passport credential so we only return these registered people
- Fix: Multiple deleted competition rounds were appearing on www.golf.co.nz under my competitions (for the All Competitions option)
- Mod: Add http:// to the email. This will hopefully make it appear as a link now in some email clients which were not before (e.g. Yahoo/Xtra) There were return statements previously, but the password form was still visible - so to the user, it appeared they are good continue (but it broke on the post). I have hidden the password boxes and displayed a message for everywhere I could see a return in the verify area. Put a try catch around the RSAVerifySign in case the user does not copy the entire contents of the string
- Mod: Added CasualGolf page and edited the home page to promote casual golf.
- Mod: Added source=lg in login screen to change the background if source is lovegolf.
- Fix: Retained the color of the name when the result is halved in the details pennant table.
- Fix: The team results team names don't match the scores and players. Added an team name property and include it in the table eval.
- Mod: Rename Image to ImageModel. Upload image functionality.
- Mod: Removed tracer path
- Fix: UI updates for pennants tables.
- Mod: Updated the indexV1.aspx javascript methods.
- Mod: Pennants. Re-factored index.aspx to make the loading faster. Instead of loading all the details at once, it is now divided per client click.
- Fix: Invalid cast bug?
- Mod: Just added the ToString() like it had previously.
- Mod: (Matt) updated the SQL script - category insert
- Mod: Did not like the previous error message. It was not very good English and typo too. I did not say golf club just in case it is not a "golf club". Nomads/Aussie (even through Aus probably use a different login - just in case).
- Mod: Can't believe this one was missed - but seems it was... PassportCredential is required to be joined to determine if they are registered.
- Mod: Prevent others from seeing people with Privacy setting enabled on their records. This is copied from the way it is done on MyFriendsSummary.ascx.
- Mod: Updating the clubid was a BAD move. We are now inserting a dummy cmember record for the new home club (like api_AddMember does) if it does not exist. In the original change in this area, we cannot tell if the member has resigned or not from the original homeclub - so we will just keep them at that club as live (not update the clubid as we were doing previously)
- Fix: Tee booking multiple release times not working for tee times on the same day.
- Fix: Removed "and cm.Date_Resigned is null" as we send emails to resigned member, too.
- Fix: When RSEntry links are gone from a results report (because the team has been broken up etc.) just show the Name+Othername values from RSEntry.DisplayName rather than the members' names as we try do do.  This doesn't look the same as the rest of the report but it's better than nothing at all.
- Fix: Crashbug stopped waitlists from working at all!  Zendesk ticket 92932.
- Fix: Timezone problem - club could not save a comp in Brisbane for 5 October 2014 - after the NZ DLS start (28 Sept) but on the date of the Brisbane DLS start (5 Oct).  Zendesk ticket #94029 and others.
- Mod: Load the default amount when adding items to renewals.
- Mod: Return the GUID now for failed AddMembers. The SP was always meant to return the GUID, but the return statement failed to return it.
- Mod: Copy paste alias bug. Hmmmm...
- Mod: Added date_resigned.
- Mod: Mod: Moved some business logic out of the flexible validator and into api_AddMember (for Aus only). Also
- Mod: Moved some business logic out of the flexible validator and into api_AddMember (for Aus only). Also updated some codes to try and make them unique and helpful for debugging.
- Fix: Add another level of checking whether the user has unverified email. Sample scenario: User changes the email via MyProfile and this email isn't yet saved in the CMember/NonAffiliate record; the new email is found only in the PassportEmailVerify table.
- Fix: For bug: The "Email not verified" warning shows for a NonAffiliate user (8014970) even if the email has been verified. Cause: the code uses  "na.EmailVerifiedDate" which is obsolete. Fix: simply enclose the code which hides/show the warning in the other existing condition having a similar purpose.
- Mod: Added where conditions for date_resigned (cmember) and deleteddate (nonaffiliate) to ensure that resigned people are not shown on the friends list.
- Add: Index for performance.
- Fix: Performance problem in Competition Calendar V2 due to the way that we checked whether a person is already registered (now using EXISTS instead of COUNT and got rid of a superfluous CompetitionRound join).
- Fix: for NonAffiliates, also compare the emails (old and new) in lower case
- Fix: Compare the emails (new and old) in lower case
- Fix: Checking guest permissions did not work properly due to the casual golf upgrade.
- Fix: Don't keep the total column font BOLD after we've had a DNF.  Reported by Ian-Waitemata 24/09/2014 - sample screenshot http://snag.gy/tqkQC.jpg
- Fix: Don't show "View Registration Options" to Aus.
- Fix: Cast error in FriendedByOthers.
- Fix: api_GetPassportCredentialIdForCredentials was not filtering PassportCredential records for deleted ones.
- Mod: Email Subscription: show Casual Golf option for Members too
- Mod: Just show Casual Golf option for now.
- Mod: Display Casual Golf Newsletter option for Members too.
- Mod: Reset Password functionality in Public2012 refactored to use shared class reset function, and also changed to reset the password for ALL credentials rather than the one we've selected (by username).
- Mod: Refactored passportcredential password reset code so we can call into it from the Public project also.
- Fix: When deleting PassportCredentials we won't bother joining on username anymore, especially when the Member record is being resigned.  Different story when the member stays live and only a single CMember is being resigned, then we do join.
- Fix: Performance improvement in POG - getting the FeeReason was not using indexing because of a rogue ISNULL() function around one of the predicate columns.
- Mod: Added a "source=lg" in the query string so that we can dynamically change the background of public registration page.
- Mod: Added a casual golf registration link in the header. This link adds "source=lg" in the query string so that we can dynamically change the background of public registration page.
- Fix: Aliased table names properly as there was a bug where it selected all 10 million rows from TBTimeSlotEntry because TimeSlotId == TimeSlotId !!
- Fix: In some cases people can't login to ClubCMS getting an Object reference not set error.
- Fix: In some cases people can't login to ClubCMS getting an Object reference not set error.
- Fix: Missing join condition was causing timeslots from other clubs to be returned in the Teebooking API search method (which is only used by iSeekGolf right now).  This bug luckily didn't cause any data corruption due to some defensive coding further down the line (a check is done to ensure the timeslot belongs to the requested club, phew!)
- Mod: Dump any sessions where the CWMPMemberSessionID was not set.
- Fix: Clubspace login issue caused by boolean refactor error.
- Fix: Updated the confirmation text for forgotten password and member id.
- Add: Logging to iSeekGolf API call so that I can tell which timeslots are being requested.
- Fix: Removed course handicap fraction stuff.  Dammit.
- Add: Logging to iSeekGolf API call so that I can tell which timeslots are being requested.
- Fix: Changed the email subject for forgotten password.
- Fix: When you have a release time set later than the default release time for clubs (eg. you normally release sheets 1 year in advance, but this particular block you want to release only 1 week in advance), the booking system was just letting the sheet open and didn't care about the specific release time.  Zendesk ticket #93417.
- Fix: Removed the name when sending the forgot password email (passport.cs) if multiple ids were found.
- Mod: Only update the clubid for the actual club. Make sure the localmembercode is padded with "0"s because GolfLink does not return it 5 digits long
- Fix: Edited GetActivePassportForPasswordResetRequestUID to not include the checking if computerno = username.
- Mod: update the try catch coverage in Page_Load
- Mod: Simplify the query in PopulateSubscriptionList. For members and contacts: show NZ Golf Newsletter. For non-affiliates: show NZ Golf Newsletter and Casual Golf Newsletter. (In the next phase, we'll be adding the Club Newsletters for members.)
- Mod: Add constraints and index
- Fix: Account Settings page (TabUserProfile.aspx) was crashing due to WebUser class changes. Fix: Password change form was not working correctly (only updating UserSecurity row) - fixed to also update PassportCredential.
- Fix: WebUser class didn't handle club admins logging into DotGolf Live very well - passport credentials don't always exist for these guys so we have to create them as required.
- Add: Micropower competition fee and prize setting for LocationId
- Fix: Reinstated clobbered changes from 1303.
- Mod: Because we insert Dummy members where we do not have their club on PPG, but the member is a home member at that club, we now insert the UDEF category code for these members.
- Mod: If there is not displayclubcode or displaymembercode (e.g. Dummy members who are inserted into the database where we do not have their club on PPG, but the member is a home member at that club) - we should return the centralmembercode.
- Fix: Fixed the error message for users with email but not yet registered in the forgot passsword/username.
- Mod: Increase the speed performance of the BMW report.
- Fix: Found that empty passwords are accepted (because they are equal--server side validation just checks if the two are equal)...so I added a client-side validation which checks if the trimmed values of the two password fields have length greater than 5 and if they are the same. Also edited the server-side validation, just in case.
- Mod: Add padding to the form (the controls are too close to the left.)
- Fix: Hide the Password form if the link is invalid.
- Fix: Added email validation in the Forgot Member id. Added a validation if user is previously registered.
- Fix: Oops, accidentally committed something else I shouldn't have.
- Fix: Oops, accidentally committed something else I shouldn't have.
- Add: Paraparaumu's new sponsor images.
- Fix: Oops, accidentally committed something else I shouldn't have.
- Fix: player.DisplayCode == null wasn't handled properly - and sometimes you do enter nonaffiliates into team comps.  Oops.
- Fix: Updated 50c to $2.00 as we have changed our charges.
- Mod: Just a nicer way of getting them to get to the registration page with a hyperlink.
- Mod: Comment testing code
- Add: Waipu new rotating slide
- Fix: The nonaffiliate id value must be greater than zero. This bug was found when the Nomads web admin was trying to access their site--the NonAffiliateId was -1 and this was throwing an error (e.g. Exception ID 203015396)
- Mod: Replaced EmailCategory with EmailSubscriptionType. The EmailSubscriptionType is the new table used for email subscriptions (New Zealand Golf Newsletter, Casual Golf, etc.)
- Mod: dsRecipient - add rId and rType in the result. rId is the ID of the member/na/contact. rType indicates the rId type--m for Member, n for NonAffiliate, and c for Contact. Use them in the value of the id parameter passed in the unsubscribe page. Replace the unsubscribe page with "UnsubscribeMe.aspx"
- Mod: Replaced cbReceiveEmails with cblSubscriptionList. Users can now unsubscribe from specific newsletters (see EmailSubscriptionType table). Member table's Receiveemails column and NonAffiliate table's AllowBulkMail column won't be used anymore.
- Mod: Add styles for UnsubscribeMe page
- Mod: Update the button text from "Send Verification Email" to "Send Email And Proceed To My Home Page"
- Add: UnsubscribeMe.aspx - This is the new "Unsubscribe" page.
- Mod: Updated the image on the splash page. Adjusted the corresponding style for the image.
- Mod: Added "Forgot Member ID" functionality. Updated "Forgot Password", can now enter email address.
- Mod: I have removed this check because all this is supposed to be doing is getting a passportId. These should be unique for a member (1 to 1) so I do not see the reason why we need to match the username. Also, the usernames sometimes will not match, because when members move between clubs, the old home club username can hang around, but is linked nicely for them when they log into golf.co.nz. We probably need to change this at some stage too, so the usernames can match up.
- Add: Inserts records into EmailUnsubscribed table based on current unsubscription data: Receiveemails [Member table] and AllowBulkMail [NonAffiliate table]
- Add: Alter script for CWEmailCompose table to add a new column "EmailSubscriptionTypeId"
- Fix: For NonAffiliates: use CentralMemberCode instead of ComputerNo
- Fix: If a linked casual member and non affiliate exist, we need to check that they cannot register again. NOTE. We cannot check on firstname as well in this method, because first name is not supplied in the NO/YES combination - and we must absolutely check firstname and surname for nonaffiliate records.
- Fix: A lot more readable now to find a resigned member who is also not live.
- Mod: Modify the inserts
- Fix: Handle old non-affiliates with unverified email addresses also.
- Mod: Adweb upgraded to look at new PassportCredential table to find member and nonaffiliate usernames and passwords.
- Mods: There are a lot... Firstly, for resigned members that are looking to register as casual, we have removed any passport information that is inserted before the email is sent - because at this point we do not know 100% who they are (there may be multiple with the same email address and details). So this is now done when they return to the page and confirm a password. When there are duplicates with the same information, it does not show any members that have been made casual already. The checking for CheckResignedMemberIsNotLive has been overhauled, because not enough checks were previously being made. There is a new check implemented, if someone tries to click on an email link again, that has already been registered with a casual golfer or member. When a social member tried to register, and we match the firstname, surname and email address with someone in our database, we do not let them continue but prompt them to try either forgot password, or register with their previous club credentials.
- Fix: When we only have the "Other" competition type set up you can't get to the competition dashboard to do anything as the results widget crashes.
- Mod: Change error message to be more obvious.
- Fix: Check PassportCredential.DeletedDate also.
- Add: Create table scripts - used for Unsubscribing
- Mod: Oops. Stuffed up previous commit which was a join preventing the passportid from coming back.... Tired...
- Fix: Duplicate passports were being inserted (when only the passport credential should have been inserted)
- Fix: Reset Password link didn't work as it didn't update passwords for other computerno's (not at this club).
- Mod: Turn off telephone number detection for iOS Safari
- Mod: Text changes to terms and conditions.
- Mod: Bumped the script timeout on the RecalculateCompetitionResults.ashx page as some competitions can take hours to recalculate - extreme case though.
- Add: Index for performance of the bulk results recalculate feature.
- Mod: Added a terms & condition checkbox in the registration form.
- Fix: Missing CourseHandicapFraction column - specified in EF model but not in db.
- Fix: Missing some columns from an EF scripting gone wrong.
- Fix: Make ClubCMS work with club admin logins (eg. northsho / course27 for north shore).  This does not work anymore because of missing passport rows.  We are also going to run the following script to add in the missing Passport rows for these UserSecurity records.
- Fix: Check for credentials before trying to access them.
- Fix: Emergency fix to try and make auto-login Live sessions work.
- Fix: Emergency fix to try and make auto-login Live sessions work.
- Fix: Emergency fix to try and make auto-login Live sessions work.
- Mod: For resigned members becoming casual, we are not going to insert a PassportCredential record before they have entered a password. The main reason for this, is because if there is more than 1 person with that email, surname at that club - how do you know which passportid to choose?
- Mods made while publishing to NZ1.
- Fix: Didn't save the damn file before committing.
- Add: Cachebuster tags.
- Fix: Use the table PassportEmailVerify in checking if the user has already verified.
- Fix: Refactored client code to remove concatenated JSON objects.  Added ComputerNo searches to avoid registration of a currently already live member as a casual golfer.
- Mod: Wipe out nonaffiliates where they have email addresses that conflict with resigned affiliated records.
- Fix: Oops, left the SET NOCOUNT ON commented out before.
- Return statement to stop Page_Load from continuing on.
- Add: Some logging around the place as these page methods don't automatically log through Global.asax and we want to know about any errors.
- Fix: Use CentralMemberCode for computer no display for non-affiliates.
- Fix: Casual golf registration minor fix.
- Fix: Fixed the background when an error message appears in the casual golf registration.
- Fix: Disable buttons when casual golf registration is successful.
- Mod: The reason why we removed this is because we never want to lose the link between the passportid and the member/nonaffiliateid (else we could lose all the scores too).
- Mod: Add Where ClubID is null for insurance.
- Mod: All existing non-affiliate users will get computerno's assigned by the upgrade script.
- Fix: Scenario: Choose No-Yes. Enter details and an invalid old Member ID. Result: an error message will appear. Then enter a valid Member ID and the error message is still there even though the form is accepted. Fix: Clear the error message when there's no error.
- Fix: Select Option "Yes". Enter a valid NonAffiliate ID instead of a Member ID. A blank error message appears. Fix: In IsMemberNoAndSurnameLive method, handle a null cm.
- Mod: Update all the resigned members to have resigned passportcredential rows
- Fix: I removed the dependency on having a username for passportcredential (because some do, and some do not have a passportcredential - it depends whether they were previously registered or not)
- Add: Yet more indexes.
- Fix: When the MemberID entered is invalid, the tooltip or error message should point to that field not to the Surname field.
- Add: More indexes around member friends (these were a problem even before casual golf)
- Add: Index on TBTimeSlotEntry for performance.
- Fix: Missing DeletedDate checks for the Passport table was causing errors when editing bookings for Matt.
- Fix: After registering as a casual golfer, people don't get taken back to where they left off - this also caused trouble for pending registration bookings.
- Ignored packages folders.
- Mod: Renamed Non-Affiliate to Casual Golfer for Pub2012 tee booking.
- Fix: Do not replace the email in the NonAffiliate record if there's already an email saved. For Bug: the old email from CMember replaces the new email in the NonAffiliate record.
- Mod: Ensure they verify their email address again
- Fix: Don't allow registration of resigned members who have already registered as casual golfers.
- Mod: add back upper function for LastName
- Fix: Trim LastName - Friends List. This fixes display of "Davey, Mark"
- Fix: Don't insert NonAffiliate messy rows.
- Mod: Copy and paste error
- Add: Turn on Social Golf Enabled flag.
- Fix: Deleting Passport and PassportCredentials the wrong way round.
- Mod: Resigned Member related updates. Use of computer no in query, if provided. Correction on checking if the user has verified already.
- Mod: Edit text; Average Score to whole number
- Fix: wa_deletemember was using DisplayClubCode and DisplayMemberCode (CMember) for logic - not quite right.  Changed to use ClubId+LocalMemberCode instead.
- Add: Trigger to wipe BillingTokens for security when 1. a passport credential username changes, 2. a passport credential is deleted and 3. a new passport credential is added for an existing passport.
- Mod: This change is to delete other usernames to help us get a unique key for username. Basically, we want the username to be unique, but we did not know which password to choose when we did the merge for duplicate passports. This way we will find out which password they use, and delete the others.
- Fix: This will now take care of actually deleting passports and credentials when a member/cmember record is resigned.
- Fix: When resigning a member we should be updating PassportCredential.Username, not Passport.Username.
- Add: Indexes for anticipated performance issues.
- Fix: "ResignedParms.Email" -> "ResignedParms.OldEmail"
- Mod: Added sorting
- Mod: Added "Top 1" in the query for getting the PassportId
- Mod: Edit BuildMemberPick method - modify the condition a bit so that along with the Surname condition, it'll use the ComputerNo, if it is provided. Otherwise, use the email or old email in querying the resigned member.
- Mod: RegisterResignedMemberForCasualGolf - use ComputerNo also in querying the resigned member
- Fix: When you have the "Other" competition type enabled on a competition, the results widget stopped working properly on the competition dashboard.  Also the results report didn't work properly as the Competition Type combo failed to bind.
- Fix: Got the "booking privilege suspended" message incorrectly due to an unassigned memberId variable.
- Fix: Style issue found in Chrome. This puts the First Name and Last Name fields in one row.
- Mod: Add Region field in Casual Golf Registration (Options: No No and No Yes). If "No No", it's only required when the Country selected is New Zealand.
- Fix: Book.golf Login.aspx nexturl wasn't being passed to Register page.
- Fix: Properly build up JSON using an object and ko.toJSON rather than concatenating strings. Mod: Allow automatic redirects to other sites (for book.golf integration)
- [Casual Golf] Mod: Replaced book.golf.co.nz password/login checking code with standard calls to Shared/Passport.cs rather than checking NonAffiliate.Username and Password, and also wa_IsValidPassword for members. Mod: Replaced book.golf registration form with a link to www.golf.co.nz.  This should be reasonably seamless in that sessions should be kept across the two sites. Fix: Passport.cs IsValidPassword updated to look at PassportCredential.
- Mod: BuildMemberPick - format date resigned to short date string
- Mod: BuildMemberPick method - display also 1) number of scores 2) date resigned.
- Mod: Updated CheckResignedMemberIsNotLive - Check also the NonAffiliate table. Updated RegisterResignedMemberForCasualGolf - If there's an existing passport, use that and don't insert a new one.
- Mod: Added ResignedMemberWithPassportToCasualGolfer - use this when a resigned member (with passport, passport cred) returns as a casual golfer. Use the existing passport and passport cred.
- Mod: Bump subs renewal process sql timeout as it takes a little while longer now with Templeton and Howick.
- Mod: Bumped SQL timeout for handicap listing report.
- Mod: Add the insertion of passportid for new members for NZ
- Mod: Replaced ClubMember references with CMember to try and get a performance gain behind the Member Handicap Listing report.
- Mod: Final cleanups - this script has worked against a stock NZB database so should be ready to go.
- Mod: Casual Golf: Merged most of the structural/dedupe SQL into a single file for handhold running.
- Mod: Casual Golf: Merged most of the structural/dedupe SQL into a single file for handhold running.
- Mod: Casual Golf: Merged most of the structural/dedupe SQL into a single file for handhold running.
- Mod: Display "N/A" as average score if there's no scores yet.
- Fix: If user is a content admin, redirect to Home
- Mod: btnMyGolfLogin_Submit_Click - add curly brackets
- Add: New SP wa_GetScoresCasualGolfer
- Mod: Rename sp, method, some variables
- Fix: Corrected the positioning of <div class="profile">
- Add: profile image for Casual Golfers (Love Golf logo)
- Mod: Show Score History for Casual Golfer using Highcharts
- Fix: Timezone check caused a major performance issue for NZ.
- Fix: This was incorrectly adding duplicate members of the home club, because the club comparison was being done inside the not exists statement rather than separately.
- Fix: Hide NZ user manual for Aus.
- Mod: Updated casual golf background image
- Mod: Added a dynamic line height setting in the Leaderboard page. Increased the Leaderboard font size validation to 50.
- Mod: Revert to previous code
- Fix: Revert previous code
- Mod: For non-NG clubs, use Score\Entry.aspx but hide mode "Score Card Entry"
- Mod: Add the deleteddate on the passportcredential table
- Mod: Update texts: 1) from "S" to "C" 2) "Non-affiliate" to "Casual Golfer"
- Mod: Allow Logins of Tournament CMS to still work with the new passport credential table
- Mod: Update text from "Non-Affiliate" to "Casual Golfer"
- Fix: TopBannerIsActive should not be nullable either.
- Mod: Allow Logins! of BMW Golf Club to still work with the new passport credential table
- Fix: Competition.SideBarIsActive should not be nullable but on NZ9 it was, messing up the model.
- Mod: Focus on Username when clicking the tabs
- Mod: Allow registrations of BMW Golf Club to still work with the new passport credential table
- Fix: When a new casual golfer is verifying/finishing the registration, update the passportcredential record (newly created during registration) instead of inserting a new passportcredential record.
- Mod: Project file exclude vend files
- Mod: Make the link clickable. Added a new parameter used to determine if it's only verifying an email (not the registration).
- Add: MIS integration for Prizes and Competition fees
- Mod: Update "S" to "C"
- Mod: Add "C" before the Casual Golf member id textbox. Update text from "Social" to "Casual". Removed "Username". Reduced the textbox width.
- Mod: Edit style for Casual Golf users (use casual golf bg image)
- Fix: @RoundDate was set to the last round of the comp (due to an ordering bug and not joining back to the DrawId) so it turned out that we were trying to calculate handicaps for people in the future, which gives everyone PENDING.  (Org tournaments)
- Mod: Remove footer white background--it conflicts with the Casual Golf background image, making it look cut.
- Add: Casual Golfers' background image
- Mod: Modify FindEmail--so it'll also look at the PassportEmailVerify table (because those without previous email address won't have an email yet in the Member or NA table)
- Mod: Style updates on message showing that the email verification has been sent.
- Mod: Changes in handling an empty/null email. User will now be redirected to Email.aspx instead of going straight to this page (Default.aspx)
- Mod: Redirect the user to Email.aspx if user has no email or if email is unverified
- Fix: Hide the password form if the user is just verifying an email (not completing a new registration).
- Add: Email Form - user is redirected to this page when 1) email hasn't been verified yet. 2) when user does not have an email in the database.
- Fix: Updated the product checking for the Competition setup - view registration options link.
- Mod: Insert Score.PassportId value when inserting a new score.
- Fix: Build errors from casual golf merge.
- Fix: Build errors from casual golf merge.
- [MAJOR] Reintegrated the casual golf branch (/Branches/Trunk.2014-07-07.clubcms-passportid-refactor) back into trunk.
- Fix: CourseHandicapFraction change slipped into production - dammit!
- Mod: Added "(optional)" in the Member No. text box in the visitor details screen.
- Fix: Added .ajaxStop in the recurring code to wait for all the ajax calls to complete before enabling editing again.
- Mod: This was a fix because secondary members were not being treated as members of the club. The example was PAYP members at Mangawhai Golf Club. 2401722
- Add: Folder for TeebookingReceipt job.
- Add: Covering index on NonAffiliate to speed up building subs data.
- Fix: Old score entry crashed out if editing a score for a marker which has expired.  This is sort of a band aid fix as we will be upgrading everyone to the new control anyway.
- mod: Changed "Repeat" to "Recur" text in the Competition_NG.aspx.
- Mod: Changed "Both" to "Mixed" for "All / Men / Women / Mixed" selector on ClubCMS.
- Fix: Because Results.RecalculateResults is called from a background thread, if it happens to throw (and not handle) an exception this is able to take down the whole worker process!
- Mod: Display all the club site's url. Removed the checking for HasClubWebsite in the club detail page.
- Fix: As an NG club, editing scores played for one of your own members who played at an away NG club, you can't edit any scores because "the scorecardid is invalid for your club".  We should be able to edit any score for a member, so I added a check to allow this to happen.  Not sure what will happen to competition results when this is done, but at least it will now work for non-competition cards.  Smartsheet Row ID 1646.
- Mod: This mod was because the dummy member record was not being linked up correctly - because the dummy member had a categoryid. Removing the reference to categoryid should allow the linking to go ahead.
- Fix: "No" was being used instead of "PlayerNo" and this caused issues when you book into a paid slot with existing players already booked.
- Fix: "No" was being used instead of "PlayerNo" and this caused issues when you book into a paid slot with existing players already booked.
- Fix: "No" was being used instead of "PlayerNo" and this caused issues when you book into a paid slot with existing players already booked.
- Mod: Evening should start at 6pm.
- Mod: Nicer error message when scanner fails to acquire (previously OpenDs = false (StartAcquire)).
- Various updates: image viewing; Admin: image upload, nav, view titles, edit product updates, admin proj - add js scripts, product duplicate, css updates, bundleconfig updates
- Mod: Update the value of AdminMediaFolderUrl
- Mod: Add AdminMediaFolderUrl
- Add GetInactiveProducts
- Mod: Casual Golf - CGProduct updates
- Fix: Drop UX_MarkerDefault because it causes issues when saving the Marker Defaults form and making changes to multiple rows at the same time.  We have now got some pretty good consitency checking in the form so shouldn't get any duplicate rows being inserted.
- Fix: Make the leaderboard styles appear less like .css files.
- Add: New setting to control the default look and feel of the leaderboard.  If you don't specify a ?css= option on the leaderboard query string, the value from this setting will be used.
- Add: New DotGolf-only setting added to allow us to adjust the left and top margins of printed scorecards.
- Mod: Hid the "Enter ticket no" option on the non-affiliate card printing view as I am pretty sure no-one uses it, and if you go there and use Go Back it dumps you into a blank screen rendering the kiosk unusable.
- Fix: Standardised Go Back button in most places (apart from the self score entry screen as the design doesn't allow for it there)
- Mod: Make the kiosk back button a bit more obvious.  I've had this request one too many times from clubs. Fix: When displaying on a 1366x768 screen (such as the Shuttles) the keypad is just a little bit too large.
- Fix: Google Chart in Subs widget - now has a transparent background instead of the old school blue-purple colour.
- Fix: No more silly repeating y backgrounds in status widgets on dashboard.  Example of what it used to look like: http://snag.gy/1Rni4.jpg
- Mod: Moved Invoice Options to a page of its own so that the Settings / Invoice Options link now works.  This was done in a way that non-NG clubs will still see the old options in the Club Settings page; only NG clubs will have access to the new page.
- Fix: Don't capitalise Machell as MacHell.  Ticket 92487.
- Mod: reset cg_category when using search
- Map updates
- Map and location updates
- Style updates
- Mod: Add order by in GetProducts
- Search Box related updates. Minor footer fix
- Mod: updates related to making the UI responsiveness
- Fix: Another case of the "Cannot insert duplicate key into RSCompetitionRoundSegmentEntry" error.  This one happens from the start sheet when you print cards and add people into comps from there.  We have previously fixed another case of this bug (see revision 16029 for LOTS of detail) but it looks like the fix was never applied to the code behind the POG, as it is slightly different.  Zendesk ticket #91624.
- Add custom 404 page and add customErrors tag in web config
- Mod: Enable dev values
- Add: sample images
- Mod: Original Price display
- Mod: Price display updates
- Fix: Changed "repeating" word to "recurring" in the competition setup.
- Mod: map icons
- Mod: update redirect page on login
- Mod: user region updates
- Mod: map related updates
- Mod: user region related updates
- Mod: Added repeat functionality in the competition setup.
- Mod: Added repeat functionality in the competition setup.
- Mod: Update on mapzoom and user region
- Mod: Config updates
- Mod: Config updates
- Mod: GetProductById and GetMerchantReview
- More style updates - footer, etc.
- Fix: Stuffed up the build in previous commit.  Whoops.
- Mod: Updated EF model to include new Competition.CopiedFromCompetitionID column.
- Mod: viewbag updates
- Mod: styles, product details page
- Fix: When checking if a member has a booking later today, we were not taking into account the timezone of the club.  This caused the member to get a prompt "You will need a booking at xxx to print a card" when they already had a valid booking.  Ticket #92063 for Mt Gambier, SA.
- Mod: Transfer the Web API URL to the web.config
- Fix: Manawatu - added width to the News page centre panel
- Add: Russian Roulette help for competition type will now appear as Multiplier in Aus.
- Mod: Updates on navigation, correction in Home Index
- Mod: search and map related
- Mod: Updates on Search, My Deal Finder, Deals display
- Fix: Added a checking in registration options. If logged in club has product cw then show banner settings if not hide.
- Fix: Added the My Competitions dropdown filter in competition results v2.
- Mod: Casual Golf - comment non-affiliate code
- Mod: Casual Golf - comment non-affiliate code
- Mod: Casual Golf - updates in Navigation
- Mod: Passport - handle non affiliate. Text updates. Routing updates.
- Mod: Added offer title in the club page.
- Mod: LoveGolf. Added OfferName in the LGCampaign table to accommodate the summer offer or other future offer names.
- Fix: jquery fix for checking name search checkbox in calendar v2 if null.
- Mod: To ensure we correctly link up these members, we need to add a dummy record to the cmember table (for the other club who we do not have their members). We are already doing this in api_AddMember (adding in these dummy cmember records) - but since this is trying to link up an existing member portal login created record, this dummy info was not being done.
- Add: More missing Nuget packages. Mod: Changed another 2 DLL references to project references.
- Add: Packages for build.
- Fix: Changed DLL reference to DotGolf.Shared to a Project reference to get it building on Dev1.
- Fix: Forget it. I am losing it. Again, found before hit production.
- Fix: Wow. That sucks to have to fix this one - but lucky it was never applied to production before we found it
- Mod: If the person being linked is an away member, we must link them to the away club.
- Mod: Updates related to styling
- Mod: Removed the per week section in the results page items.
- Fix: Fixed competition v2 name string issue with quotes.
- Mod: DisplayClubCode was never being used in the updatemember api
- Fix: Don't automatically collapse multiple rounds on the same day (same number) into the same record - because if they are both genders we never see the womens' ones on the SIC.  This should only affect the score entry area, not bulk card admin - need to test.
- Fix: Changed the SideBannerIsActive and TopBannerIsActive columns to not null.
- Add: Alter competition to add columns (SideBannerIsActive, SideBannerUrl, TopBannerIsActive, TopBannerUrl) for calendar v2.
- Mod: Added Description to the CategoryId and change the searched price to display the closest maximum searched price.
- Mod: Added lovegolf progress checking in categories settings.
- Fix: Error when trying to construct ClubId==0 for ORG on tournament dashboard.  I have manually copied this ascx file to production to skip a merge+publish.
- Fix: ClubId not ClubNo for Cmember
- Mod: Added a delay into PingV2() to stop clients running away.
- Mod: Added a delay into PingV2() to stop clients running away.
- Fix: Minor calendar v2 fixes. Spelling check, list date sorting, list view as default when by name search, logout visibility, date format.
- Various updates - styling, navigation
- Add: Indent() utility function.
- Mod: Don't return members with no CentralMemberCode in member search results.  This is so that we can get rid of the guys inserted by ClubCMS (Aus).
- Mod: Changed to look at the member record...
- Mod: Hopefully this will fix any member stuffups for the following scenario.
- Fix: Pennant results were rounded off to 1 decimal place only. Change code to round off to 2 when necessary.
- Fix: Pennant results were rounded off to 1 decimal place only. Change code to round off to 2 when necessary.
- Styling related updates
- Fix: Pennant results are being rounded to 1 decimal point. Changed to 2.
- Add: Utility to send all bookings between specific dates to iSeekGolf - this is to get around the fact that they've created timesheets at Lakewood GC without having ISG integration turned on - it's a one-off.
- Fix: Kiosk. If the marker colour cannot be determined by the system, it will just display transparent.
- Mod: Casual Golf updates
- Deals' admin functionality, Common project
- Mod: Update to allow empty players when score is halved in score entry.
- Mod: Quick hack to show the speed test graphs from Vortex on Adweb for Louise/Jasmine.  This way we have some history so they can get a feel for how a club's internet connection actually performs.
- Add: Added Help for the side and top banners for competitions.
- Mod: T Score change because we misunderstood the definition of what an "Eligible T Score" was. We were thinking it was T Scores where the differential was greater than or equal to 3 - but - in fact an Eligible Tournament Score is any T Score that has been played in the last 12 months or the last 20 scores.
- Mod: Include "real" projected value in member score listing for DotGolf IP addresses.  This will help us when we're debugging T-Scores.
- Mod: Added GetSqlParameter method to handle double data type
- Mod: Updates on Merchant Reviews
- Mod: Correct the spelling of Address
- Mod: text content
- Mod: Updates related to the deals' Admin Site
- Add: Controllers: MerchantReview, Navigation
- Mod: Add/edit properties
- Mod: Updated queries, add queries for the deals' Admin Site
- Add: CGNavigation model
- Add Merchant, Merchant Review, Navigation, Product Category
- Fix: Added the missing TScore images.
- Fix: Added statuscode in Registration.Create in the RegistrationDetails.
- Fix: Minor UI fixes for registration promo
- Mod [MEDIUM]: Refactored CardPrint.asmx code to get rid of the duplicated bunch of SQL in the PingV2() method.  We've replaced this method with BeginPingV3() - an async method, but have left the SQL duplicated to allow us to modify things separately.
- Mod. T Scores was forgotten for Org. I have made it visual only for them (not allowed them to enter scores in the score entry area for now).
- Fix: This fix was applied to the public site a LOOOOONG time ago (rev 15647), but never to book.golf.co.nz (or ClubCMS). Now it is.
- Fix: This fix was applied to the public site a LOOOOONG time ago (rev 15647), but never to book.golf.co.nz (or ClubCMS). Now it is.
- Fix: Fix for the register button in the top banner is clicked, the registration popup doesn't appear.
- Microsoft.AspNet.WebApi.Client.5.2.0
- Update text, remove unnecessary links
- Mod: Admin - Product - Add, Edit, Delete
- Mod: Loading seeded entries was not picking up the correct seeds.
- Fix: Calendar V2 search text changes.
- Fix: Text updates for calendar V2.
- Fix: Fix for the registration promo carousel. When there is only one promo, the carousel still rotates. Added code to check for the banner count.
- Fix: GolfLink page title was incorrectly set to "Process Renewals"
- Fix: If manual registrations are made prior to the week that the Nomads payment for a competition happens, and they then subsequently delete competition entries (also before payment week) - those deleted competition entries are still charged manual registration fees. Updated the slicer to also import deleted RSCompetitionEntry rows so we can ignore these when generating the payment.
- Fix: When the save changes button is clicked, no event is triggered. Removed the banner settings in the pnlEditOption.
- Updates on the solution - Admin and Common
- Mod: Updated Web API URI
- Add Navigation Model, use this for the navigation items instead of Prod Categories
- Mod: Update the Category Name
- Add: Css changes for calendar v2 competition list.
- Add: Added the calendar v2 competition list and control settings.
- Fix: Team based score entry fix. Fixed the incorrect checkbox behaviour when selecting players from empty.
- Fix: Wording corrected to say $2.00 instead of $0.50 cancellation fee on public site.
- Mod: Updates on Product model and queries
- Mod: Updated images
- Mod: Add google places script
- Mod: Add QuantityBought and QuantityLeft
- Mod: Add placeholder and map script
- Fix: Guest Form validation
- Mod: Updates on marker icon and text
- Add: Added something for ParNZ emails (since we are now trying to use www.golf.co.nz for the registration area). For now, I simply went by associationid - get it done - and if it becomes something that is commonly done further down the track, we will have to refactor.
- Fix: Fixed the issue when rsentryid is null for team selection in the score entry. Also removed the validation when less than 2 player is selected.
- Fix: Levies tab was visible for Aus.  They couldn't do anything when clicking on it (brought up an error) but it shouldn't have been visible.
- Fix: "who pays" off-by-one error in tee booking when booking a home member where there is already someone else in a slot.
- Fix: "who pays" off-by-one error in tee booking when booking a home member where there is already someone else in a slot.
- Fix: "who pays" off-by-one error in tee booking when booking a home member where there is already someone else in a slot.
- Add: Test batch process to have an example to show.
- Mod: Changed the wording of the email for the 5CC. Although the change is not specific to the 5CC - no one else uses this for registrations at the moment (not the NZ Womens Open) and so for now that will be ok.
- Fix: Cast error in adweb with average country download speed.
- Fix: Text change for the calendar v2 list view.
- Fix: Added the status code "Accepted" when registering in the calendar v2.
- Fix: Kiosk was timing out when entering a member number into tee booking.
- Fix: Was not taking into account if the match was a draw when considering the reserve matches.
- Fix: Login fix when an error occurs. Added a try catch and an error message.
- Fix: Fixed build error. Added ImageServerPath in Web.config and Shared.cs.
- Mod: Referenced the new /Shared/api/ProcessResults.ashx.
- Mod: Referenced the new /Shared/api/ProcessResults.ashx.
- Add: Added the "View Registration Options" link in the competition setup for the clubs with code "CW". Added Side and Top banner activation for competitions.
- Removed Org/ProcessResults.ashx - we are now using /Shared/api/ProcessResults.ashx.
- Mod: Moved Live/ProcessResults.ashx to the /Shared folder so that we can use it from Live and Org.
- Mod: Merged code from ORG into the Live ProcessResults.ashx.cs file in preparation to make these the same file.
- Fix: Performance issue in the GetCourseHandicapAdjustmentForMultipleMarkersBasedScoresEntered() method of results - we were not filtering by CompetitionId meaning index use was suboptimal.  This caused a bit of a system meltdown on 13/08/2014 PM.
- Use the radius selected when querying the products to feature on the product detail page
- GetProductsToFeature - add radius in the parameter
- Use the radius selected when querying the products to feature on the product detail page
- Minor cookie updates
- Mod: Update text only
- Fix: map center, zoom
- Mod: Edit link text
- Mod: Remove limiting the Google Places Autocomplete to cities only. Fix map minor bugs.
- Add: Added the QuestionText in the registration control.
- Mod: Update the member record for away members when they change home club. David - please check before deployment as this is untested!
- Add: CGRegion model
- Update AddUser, GetProductCategories, GetCartItemsById. Add GetRegions, GetProductsByMerchant and GetProductsNearby.
- Add Region
- Add Region
- GetDotGolfUser - add Region
- Add GetProductsByMerchant and GetProductsNearby
- Allow places autocomplete on cart summary page
- rename wheretoplay to searchbox
- moved map options
- My Cart link
- Add My Cart link
- Rename partial view
- Rename partial view
- Mod: location, category, search updates
- Mod: Add region to user
- Mod: Add region to user
- Mod: Handle no deals found
- Add: Added side and top banners control for competition calendar.
- Updates on location/map, search deals with Google Place Autocomplete
- Fix: Count of other deals of the merchant
- Navigation - Dynamic display of Categories. Use marker clusterer. Allow viewing of deals per Merchant (optional: Category Name)
- Created new controller for the navigation
- Mod: updates on the location selector
- Fix: rendering of guest form
- Mod: update redirection
- Add: Region code
- Updates on the location/map, navigation
- Fix: Small bug fixes for calendar v2 and registration.
- Add: Added a new list view to the competition calendar v2.
- Mod: use OverlappingMarkerSpiderfier for the maps
- Fix: The results were not taking into account the reserve match points. There has been some refactoring within some of the SQL queries to hopefully simplify things.
- Fix: PlayDate can sometimes be null for players in Aus (from wa_GetMemberHandicapIndex) - so the handicap report would not list anyone who we don't have a score record for.  Ticket #91085
- Mod: use infowindow for the marker info pop-up
- Add map view with markers and infobox.
- Mod: Apply Web API new design, User / External Login updates
- Mod: Apply Web API new design
- Mod: Apply Web API new design
- Fix: Team overall round summary was not taking into account reserve matches. Individual round summary was incorrectly calculating the points for each round/contest.
- Mod: Incorrectly including MatchesPlayed in the condition when it had not yet been calculated.
- Mod: Reserve points were not being correctly allocated for Golf NSW. In particular @CompetitionId = 1581
- Add: Casual Golf models
- Mod: apply Web API new design
- Mod: apply Web API new design
- Mod: apply Web API new design
- Add: Added images for calendar v2.
- Add: 200MB (default) upload quota for leaderboard images.  UI changed to show the quota: http://snag.gy/uChen.jpg
- Add: Added UCompetitionRegistration, UCompetitionsCalendarV2, and URegistrationPromo (not yet finished).
- Mod: Removed Username (update related to use of new passport)
- Mod: Display first name instead of the username (email address)
- Fix: api_AddMember was updating the ClubNo but not the CentralMemberCode on Member.  This caused problems where the Member record has a null CentralMemberCode which in turn caused GolfLink lookup issues when it comes to adding a player to a competition.  Zendesk ticket #90603 is one example of such a problem.
- Mod: Remove unnecessary functionality
- Mod: Add fields
- Changes related to Navigation, Login, Deal Details, Location
- Changes related to Navigation, Login, Deal Details, Location
- Mod: Web API changes.
- Add: Login related code.
- Mod: Changes to CasualGolf Solution and api for user.
- Mod: Support .gif files in leaderboard advertising. Fix: Build error.
- Oops, revert.
- Mod: Support .gif files in leaderboard advertising. Fix: Build error.
- Add: Leaderboard auto-reload when settings are saved (via signalr).
- Fix: 1. Fixed the issue that doesn't allow a match to be changed from individual to team or vice versa even if the results/scores were deleted. 2. Fixed TeamMaintenance issues when a match is changed. The players and teams get mixed up. 3. Fixed the "Remove" button in the score entry page.
- Add/Mod: Add Merchant Review on details view
- Fix: When transactions were being reversed by the user cancelling their booking (and releasing funds back onto their credit card) - the TBTicketEntry was not being updated accordingly. The result of this was in the capture payments screen, you could see bookings which had been deleted, but not appeared to be authorised or refunded yet (nothing in the radio box) - even through it had been refunded through DPS.
- Add: ProductsToFeature for the details view
- Add: GetProductsToFeature (for the Details view)
- Mod: Add properties
- Mod: Updated param type
- Mod: Modified the nav bar
- Mod: Add property
- Mod: Comment change password
- Add: new folder
- Add/Mod: Updates on detail page
- Mod: Set the default controller / action for the homepage
- Mod: Don't check for scorecards printed at other clubs (we don't think this is rife, and if it is we can always retrospectively report on the data).
- Mod: Added 25km in the search by area options and edited the search results by club name.
- Mod: Removed the check for the deleted scorecard or tee booking entry. This was preventing deleted scorecards from appearing on the report. The original reason this was put in was because of a support email from Titirangi Golf Club. Matt is currently looking into how this happened and trying to replicate it. Adding this line is not necessarily the answer.
- Mod: links and site title
- Mod: User CheckoutViewModel, handle authenticated user.
- Mod: properties
- Add: GuestForm
- Add: ViewModels
- Mod: Updates on routing
- Mod: CreateOrderAndOrderDetails
- Mod: Updates on routing
- Add: CartViewModel
- Mod: GetAll
- Mod: Added Merchant properties
- Mod: Updated AddCartItem and CreateOrderAndOrderDetails
- Add: packages
- Mod: Ignore the age check when using bulk card admin. The age checking is done later after clicking confirm for each individual card.
- Mod: I think we should report on both scorecards AND timeslotentries that are not deleted. However, I have emailed David a change to ensure when scorecards are deleted, the corresponding timeslotentry is marked as "unpaid".
- Mod: Updated display name of username to "Email"
- Fix: Problem where a resigned/deleted member is picked up as the MemberId for an AltMemberId being passed in - we should be looking only at Live members.  Zendesk ticket 90532.
- Add: packages
- Mod: Remove unused packages
- Mod: Updates on external login
- Add: "My Purchases" / OrderDetail
- Mod: connection string
- Add: "MyPurchases" / OrderDetail
- Mod: Updated site name
- Mod: Email as UserName
- Fix: Somehow a club was able to change their kiosk mode to keypad - we're not exactly sure how this happened, but I've introduced code to only load/save this setting if it is DotGolf doing this.
- Mod: Replaced Wingdings based "tick" mark on scorecards (for competition types) with an image equivalent.  We now no longer need Wingdings installed on every Connector PC.
- Mod: Don't allow people to get cards from the kiosk if they have already been pre-printed earlier.  If a person already has a pre-printed competition card for the day, they will get a message saying "Card Pre-Printed" - "Please see staff to obtain your card".
- Mod: Account/login related updates
- Mod: Account/login related updates
- Mod: Account/login related updates
- Fix: When using the ENTER ALL button for non-teebooking multiple course clubs like Harewood, the selectedCourse property was not being set and that caused an ORNS error serverside.
- Fix: For Brisbane time (which does not observe daylight savings) we were posting back no timezone data which meant that the server could not convert to Brisbane time at all, rendering it as NZ time.
- Fix: Bug where if you change the category type from Club Member to Non Playing and back, the Non Playing checkbox remains checked and hidden - so you are inadvertently creating club members non-playing.
- Fix: Fixes for the following: - Under Find Clubs & Offers the checkbox labels are not clickable. Adding a FOR=”chckByArea” into the label tag will fix this (do this for each checkbox respectively) - If I search for a club near “Browns Bay, Auckland” and then hit the Back button in the browser (because I didn’t find the club I was after), both “Find by Region” and “Find by Area” boxes are then checked.
- New Connector installer built to include the OpenVPN tap adapter mac address fix.
- Mod: Visitors were allowed to go into home member only slots on the kiosk when you're in book-and-print mode.  This was because we never did visitor tee bookings on the kiosk until now.
- Fix: Use paymentId that came back from DPS rather than our BookingDocument one - as the booking document could have changed if the user has multiple tabs open.
- Fix: Use paymentId that came back from DPS rather than our BookingDocument one - as the booking document could have changed if the user has multiple tabs open.
- Fix: Use paymentId that came back from DPS rather than our BookingDocument one - as the booking document could have changed if the user has multiple tabs open.
- Add: Trigger to detect frequent computer name changes on connector PCs - possibly pointing to a copied/duplicate identity.
- Fix: Connector: Don't consider OpenVPN TAP adapters when determining the MAC address for a connector machine.  Because OpenVPN MAC addresses aren't "real" we can't use those to keep track of a connector machine.  This caused duplicate conflicting GUIDs being set up on different active machines, causing dropped printer configurations and other issues.
- Add: Leaderboard: Various options for controlling the colour of text, rows, titles, backgrounds etc. on the leaderboard.  NOTE: This UI must be enabled in the Web.config by setting the EnableLeaderboardColourSettingsUI appsetting to true (this is so that I can control when this gets released to Aus without having to branch and merge). Mod: Removed "leaderboard activation" as we're not selling hundreds of Raspberries right now...
- Fix: Corrected the spelling of "Suburb".
- Ignored some stuff.
- Add: Initial version of Casual Golf (Web)
- Ignored some stuff.
- Add: Initial version of Casual Golf API.
- 
- 
- 
- 
- 
- Mod: Don't allow people to untick the "non-playing category" checkbox when setting a category up as sub category NZG Non Playing. Mod: Force new categories in NZG Non Playing to be non playing categories.
- Mod: Updated the banner cms. Added a new list for the active banners.
- Mod: Increased print timeout for preprint service - times out when you print heaps of cards.
- Add: Keypad Kiosk: Setting (dotgolf only) to enable the kiosk numpad mode - go to Settings - Kiosk to change this.  Note that keypad functionality is not yet complete; eg. tee booking, score entry and competition entry functions do not have key bindings yet; I need to finish these before the system is ready for production.
- Mod: Increased timeout for CSV import process; people starting to get timeouts when importing large (100+ player) CSVs.
- Mod: Added geo location and google maps api in the find a club page to search via range.
- Mod [MAJOR]: Changed the way browser timezone detection works.  The previous way we did it was based on a webservice call that happened from the browser to tell the server what "new Date().getTimezoneOffset()" was.  This works fine for when you're passing dates up to the server that are within the same daylight savings period, but it unfortunately breaks when the date you're sending up is in the next daylight savings period.  A practical example of this is creating a competition 6 months in the future (only seemed to be a problem for Aus timezones) - it breaks with an error saying that the competition date has a time component when we were expecting midnight 00:00.
- Add: (ClubCMS version) Email notification so we can sanity check the DPS paymentId against the booking document's one.
- Add: (book.golf.co.nz version) Email notification so we can sanity check the DPS paymentId against the booking document's one.
- Add: Email notification so we can sanity check the DPS paymentId against the booking document's one.
- Fix: Stop the email link click tracking code from interfering with anchor links (#blah).
- Fix: With some team competitions the course handicap is available later than with individual score entry.  This caused a crashbug when you click Edit on a team score.  Not sure how wide this problem was but Aus reported it first.  Zendesk issue #89881.
- Mod: I do not think EntriesRestrictedByHandicap was being considered for tournament registrations.
- Fix: Overzealous caching was causing a problem where the course handicap adjustments were not done (because a cached value was being used for the number of results) Fix: The NUnit tests needed a RecalculateAllResults call because we're not running the ProcessResults.ashx call in testing.
- Add: Secret Recalc for results if necessary
- Add: Unique identifier added to DatabaseTransaction so we can see it in the debugger.
- Fix: DatabaseTransaction was not passed into the GetCourseHandicapAdjustmentForMultipleMarkersBasedOnAllCompetitionMarkers method, leading to locked sql processes.
- Fix: Changed the code for the score entry team selection. Used RSTeamPlayer table to store all created teams.
- Fix: Changed the order of the rounds dropdown. Order by IsRelegationCompetition desc.
- Fix: Bug in stroke allocation calculation for Aus where if you have a course handicap > 18 there is an off-by-one error.  This would have caused strokes to be printed incorrectly on high handicap cards in Aus. Fix: Test debugged for extra strokes calculation for same genders (competition results).
- Add: Script to drop FKs referencing ExceptionLog table so that we can delete some data.
- Mod: Include processeddate check which I forgot.
- Mod: Change the way the course handicap adjustments are calculated to be based on scores entered rather than all the competition markers. Therefore if an easy marker is not played, extra strokes will not be added on unnecessarily. It will only consider markers for scores entered.
- Mod: Removed duplicate Create Registration code in Public 2012 project.  This piece of code is already present in the Data.Registration class, so I've changed Public to use that instead.  I have compared them, they are effectively the same line-for-line apart from a few parameters that did not allow null values (I have changed those in shared hoping I won't break the tournament CMS System)
- Fix: Oops - copy and paste bug.
- Mod: Allow an entire competition to be recalculated in the results area (if necessary). An example could be when someone plays off an easier course/marker then all the other existing results need to be recalculated to be given extra strokes.
- Fix: Alters the CompetitionContestMatch table to allow null in the RSEntryID_A and RSEntryID_B.
- Mod: Just some tweaks to permissions around some areas of the system. In particular, getting the system ready for clubs that may only want to use it in a competition only environment.
- Fix: By Marco. Added competition deleted date checking for the rounds dropdown in the score entry page.
- Fix: The green fee report was reporting incorrect counts (see ticket DG-327). In summary, when looking at the detail of a specific green fee category, it was appearing incorrect in the report because it was reporting on bookings (that were checked in and marked as paid) - but they did not have a scorecard. This meant they were being grouped together as opposed to individual green fee items (scorecards or tee bookings).
- Add: Test for same gender, add extra strokes, but with multi courses (more than 2)
- Mod: This extra stroke was working well for competitions with 2 markers. However, when multiple markers are considered for the competition (e.g. Titirangi with 5 markers) - this was taking the incorrect value (min rather than max). David wants to do a test case for this :-)
- Fix: Added code to get the default venue when no value was entered in the schedule page.
- Add: Add a setting per club to enable/disable the AllowExtraStrokesSameGender option. Specifically for Manawatu (script to run for that too)
- Fix: Fix for the select round dropdown venue issue in the results entry.
- Fix: Added a code to display "--" in the results area when a player is saved as null for DNP.
- Fix: - Reverted original code where teams area created in the team maintenance page. - Added the functionality where a user can enter an empty player when DNP.
- Fix: Venue is not displaying correctly in the Draw view. Changed the sql join for the teams.
- Mod: Accidental mistake in previous commit Rev 17015 - cause meant no TXT messages were being sent out. This was because the previous SP was performing a DATEDIFF (day) = 1, and the new SP does a DATEADD (1) which always considers the time component.
- Fix: Fix for detailed Results table to display null players.
- Fix: Deleted the DisplayNameID in RSEntry.
- Mod: Commented out the "Print Cards" option in the Bulk Card admin screen.
- Mod: Adds DisplayNameId in RSEntry table.
- Fix: Fixed the table layout in the team maintenance page. Added group by for the teams.
- Mod: Removed "All about open rates" help box as this was blatantly copied from http://help.campaignmonitor.com/topic.aspx?t=89.  Sorry, but this isn't good enough.  If you want to rip off someone else's stuff, at least read it and rewrite it in your own words, come up with your own graphics.
- Fix: Bulk Email Sender Name issues: 1. When sending as a golf club we should be uaing the full name rather than just Club.Name, eg. "Akarana Golf Club" instead of just "Akarana".  There is the Club.FullName column which can be used for this. 2. When sending a bulk email from ORG and you select "Dave Mangan" from the sender list, the bulk email should go out from Dave, not from New Zealand Golf Inc. 3. Moved the sendername query to outside the transaction. 4. Removed the if-null "DotGolf Mailer Service" - no point storing this as the mailer service will automatically substitute that if it finds NULL in the SenderName column.
- Fix: Bulk Email Sender Name issues: 1. When sending as a golf club we should be uaing the full name rather than just Club.Name, eg. "Akarana Golf Club" instead of just "Akarana".  There is the Club.FullName column which can be used for this. 2. When sending a bulk email from ORG and you select "Dave Mangan" from the sender list, the bulk email should go out from Dave, not from New Zealand Golf Inc. 3. Moved the sendername query to outside the transaction. 4. Removed the if-null "DotGolf Mailer Service" - no point storing this as the mailer service will automatically substitute that if it finds NULL in the SenderName column.
- Fix: Don't do a speedtest if the browser is logged on from a DotGolf IP address.
- Mod: Show the sender and recipient names in various places in Adweb (for debugging/testing purposes).
- Mod: - Changed the view for the Pennant Team Results entry. Changed it to be able to choose players in the results area. - Removed the creation of team in the team maintenance page. - Added a validation in the setup page. You cannot change the scoring mode if there is already an entered score.
- Fix: Kiosk: Tee booking member login keypad zooms the same as the card printing one on widescreen monitors. Fix: Kiosk: On the hole-by-hole scanning edit screen the keypad is also a bit bigger now on wider screens. Fix: Kiosk: Ditto for the self score entry hole-by-hole entry screen.
- Fix: Kiosk teebooking: Allow NZ clubs to also only enter the last 4 digits of their membership number (when in keypad mode)
- Fix: Because pickups are now properly handled in 4bbb results, the totaling code failed if only 1 of the team players has returned a score and that score contains a pickup.
- Mod: I have now made the mod introduced in rev 16699 the default because Tauranga has experienced the same problem with their "Eves - Phelps Mixed Combined Series".
- Fix: Live fix. Added a code to insert the association or club name into the SenderName column in the email table.
- Fix: Association fix. Added a code to insert the association or club name into the SenderName column in the email table.
- Mod: Allow clubs control over the Swipecard Not Required setting for kiosk tee booking.  Fix: Setting did not save properly.
- Mod: Allow clubs control over the Swipecard Not Required setting for kiosk tee booking.
- Mod: Mangawhai - updated the size of the sponsor images
- Add: Trace output to troubleshoot Tauranga combined results problem.
- Fix: Styling adjustments.
- Add: Quick hack Announcements widget so we can put something on the dashboard when disasters like this internet speed thing happens.
- Add: if you put trace=true on the RecalculateCompetitionResults.ashx query string, you'll get the results system trace output in the response.  Useful for debugging.
- Fix: Results tests: I have fixed most of the tests and disabled the ones that don't work (due to the refactor we've done ~2 years ago).  This means you should now always get a GREEN bar when running the results tests. Mod: Updated the CreateDB.sql script to latest production schema.
- Fix: Results: If both team players pick up in a 4BBB Gross competition, they should be DNFd. Fix: Results: If one of the team players pick up in a 4BBB Gross competition, the other player's score should count as the best score, not the 0.
- Mod: Increased script timeout to get the page to work.
- Mod: Increased sql command timeout for bulk email screen SEND link - this caused a problem at Royal Auckland.
- Mod: Fix for 0 gross scores being allowed when calculating 4BBB results for a team. This should now ignore a 0 gross score.
- Add: DotGolf Live will now automatically run speed tests for clubs.
- Mod: Upgraded "Email This" and "Contact Us" pages to use the new SenderName and RecipientName columns in the email table.
- Add: Index for performance.
- Fix: Competition_NG TScore popup changes. - Used jquery alert instead of the normal popup. - Added a checking for .
- Fix: When making group bookings, if the club has multiple different group fees active (for different group sizes/bulk discounts) only 1 of the fees get displayed, but duplicated x number of times.  I think this is jqxListbox being unhappy about something and unsure how to fix - but have gotten around it by storing the array of green fees and indexing into it with the item selectedIndex rather than trying to track the actual object as part of the listbox.
- Fix: A provisional handicap like 14.0P fails to parse when trying to put a provisional visitor into the tee booking sheet (Aus).  Ticket #88325.
- Add: More detail added (cardnumber and clubid) to exceptions  " System.Exception: RSScore 488742 has no segments.  This is an irrecoverable error, we can't determine the marker played for this score. "
- Mod: Change IsTournamentScoreEnabled property to be cached for 2 seconds rather than 24 hours - for testing pre go-live.
- Fix: iSeekGolf: Prevent ISG booking from being edited in the POG.
- Mod: Improve performance for cases where competitions can have a lot of earlier rounds, with a lot of earlier scores, and the T Score flag is changed.
- Add: T Score changes into the system. Refactor api_AddScore to allow the calling of updating T Scores in bulk from the competition setup T Score flag
- Add: iSeekGolf: Using some Redis skullduggery we now have a queue where requests from iSeekGolf wait in line patiently.  They only execute once all the requests that have previously been received have been processed.  Hopefully this will keep the order of things in place with these lock/cancel requests.
- Add: iSeekGolf: Lock globally to try and stop these threading issues.  This is a nightmare for performance but we're not expecting 100s of transactions per second anytime soon.
- Add: iSeekGolf: Delay cancellation of a lock to try and fix the threading issues.
- Add: iSeekGolf: Delay cancellation of a lock to try and fix the threading issues.
- Fix: When exporting to excel, we were losing some lines of results. Commented this line, and ensured the streamwriter is closed, else you begin to have packet loss with a max of 7168 bytes
- Mod: T Scores not allowed to be made retrospectively.
- Add: iSeekGolf: Experimental Redis locking for iSeekGolf API notification calls to us to force them to go single-file.
- Add: Loggly logging to iSeekGolf code to get things in a single output for troubleshooting/diags.
- Mod: This is a short term fix to allow Marco time to refactor the code to use 1 set of results - as opposed to many different areas using slightly different queries.
- Fix: No rows returned from wa_GetMemberHandicapIndex on the grey day where there is no initial handicap.  This caused errors in the member details screen and also SCA (Edge).
- Mod: Added popup when TScore value is changed in competition setup.
- Add: iSeekGolf: Implemented the previously undocumented "release lock" notification.  Sample JSON for this request included below.
- Fix: Reverted to David's fix.
- Fix: TScore competition update and kiosk copy competition error fix.
- Fix: Updated the code that changes the result position.
- Fix: FlexibleValidator was passing in a string value as an int causing all sorts of issues when validating a golflink number that is larger than int.MaxValue. Fix: FlexibleValidator had some sql injection vulnerabilities which were fixed by using parameters rather than string concatenated values.
- Fix: Obscure EF error when trying to determine the current t-score setting for a competition we're copying.  It used to throw an error "Referential integrity constraint violation. A Dependent Role has multiple principals with different values."
- Fix: Obscure EF error when trying to determine the current t-score setting for a competition we're copying.  It used to throw an error "Referential integrity constraint violation. A Dependent Role has multiple principals with different values."
- Fix: Kiosk TScore fixes.
- Fix: Fix for the Member.ProjectedHandicap for TScore
- Fix: Check BookingSource to ensure that we're not looping ISG bookings back to TTM.
- Mod: Removed AssociationId fields from EDMX and designer file as we don't have these on Central yet and we won't be adding them until the hybrid branch is merged in.
- Fix: Nowrap for score entry total score column to keep the T on the same line as an adjusted score.
- Add: Help content for T-scores.
- Mod: Added TScore column in competition table
- Mod: David corrected me that NZG do not charge 50c for people who do not make the field. NZG absorb this.
- Add: Logging to the iSeekGolf integration code.
- Mod: iSeekGolf: Added the ability for the user to set a cart count for every day of tee booking.  iSeekGolf does carts on a per-club basis, not per course, so I'm pretty sure the way this is implemented is flawed from the get-go.  Oh well, that's what we've got to work with.
- Fix: Removed the code that changes the result position.
- Fix: Updated SQL to update TXLines when paid bookings are made through ClubCMS tee booking.  This fix was ported from the same one made to book.golf.co.nz (rev 13319).
- Fix: Results laddering fix.
- Fix: In a rare case, if there are 18 hole competitions on at the same time as 9 hole comps, AND there is a 9 hole auto-entry competitions, AND the markers align just-so, you get into a situation where the 9 hole autoentry comp gets removed from the list because it conflicts with the 18 hole comps (even though the player is not allowed to enter it).
- Fix: Corrected the results laddering. Added ORDER BY [ContestPoints] DESC, [RoundsWon] DESC, [CountBackPoints] DESC.
- Mod: Added T-Score functionality in the org competition setup and bulk update for handicapping.
- Add: Updated EDMX and designer file from VS2013.
- Mod: Reverted changes to EF model as they caused a build error.
- Mod: TScore updates for activating and deactivating the tscore in the competition setup and score entry. For the new handicapping changes.
- Mod: Added T-Score display functionalities.
- Mod: Updated the end of the document with some meeting notes from May 26
- Mod: Dave Mangan wanted the email content changed when people register online for tournaments.
- Add: Scripts for NZ1 performance - there was a dodgy where clause in wa_TBSelectNotification which stopped it from using indexes.
- Fix: DNP reports fix. Now displays DNP, DNF, or DQ instead of -1, -2, -3.
- Fix: Fix for results when DNP is entered.
- Mod: Added ImageHelper.ashx for the correct image cropping for search results.
- Reverted: Fix: Results: When a person moved from one division to another during a multi round competition, the overall results did not include all their results, only the results that came from the last division the person played in. -- this fix caused a bug where division results would not appear on the accumulative report correctly.
- Add: Live and Edge page response times to Adweb Health page so Louise can see these.
- Fix: Results: When a person moved from one division to another during a multi round competition, the overall results did not include all their results, only the results that came from the last division the person played in.
- Add: Rejigged the hybrid document slightly to reflect work done so far.
- Mod: The Mailer Service will care about the new Email.SenderName and Email.RecipientName columns.  If these columns are left blank it means that we'll do what we've done in the past which is to, for the recipient, use a blank DisplayName (i.e. just send the message to david@example.org), and for the sender use "DotGolf Mailer Service" (to the ire of many of our clients).
- 
- Mod: Added new tiles in the "WhyLoveGolf.aspx"
- Mod: Made the club tile background image to be "center center"
- Fix: USE statement.
- Fix: Multiple Release Times did not work on the kiosk because the valid booking dates procedure was not returning all possible valid booking dates (didn't check to see if any individual timeslots had earlier opening times).
- Fix: When you scan a card that is not associated with a tee booking and there are many candidates for a team partner, the partners often don't get saved as only the first 3 options are taken into account.  This is not a problem if you have a card in a tee booking as then there are only 3 possible partners for 4bbb.
- Mod: Added more info to the exceptions logged by ProcessResults.ashx so that we can find the source of these IX violation and timeouts when calculating competition results.
- Add: Waipu - add new sponsor image
- Add: Match Stroke column to scanning scorecard (other scorecards to be completed in a future commit).  This was done for Queenstown but should work for any club assuming they have their NZCRData records set up properly (this is something we do for them manually).
- Fix: Error in schedule when a team was deleted
- Add: Micropower staging/production keys.
- Mod: Mobile Site - just updated the message when prompting the user to bookmark the site.
- Fix: Hole 7 hole name and distance columns were out of line on the scanning scorecards.
- Fix: Stop people from resubmitting the Course Changes [Save] button post.
- Fix: Stop people from resubmitting the Course Changes [Save] button post.
- Fix: Stop people from resubmitting the Course Changes [Save] button post.
- Fix: Stop people from resubmitting the Course Changes [Save] button post.
- Fix: Typo in Redis Web.config appsetting names.
- Mod: If someone has recently changed from 9 to 18 (or the other way) they have their score history cleared. However when looking up their handicap from an earlier rollover period, it was calculating the incorrect handicap. This extra check was being done in api_AddScore, however we have moved this into this SP because the SP is used in many other places throughout different solutions.
- Fix: Missing IF AU section from wa_GetMemberHandicapIndex.
- Mod: Fieldname was changed and not updated SQL script.
- Fix: Orphan pages are pages that are not linked to any menu.  Unfortunately if a whole menu gets deleted, the pages attached to that menu are not shown as orphans as we only checked the deleted date on the PageMenuMap (the link table).  Extended this to check for deleted menus also.
- Mod: Not deploying this monday - more testing required.
- Mod: Scary commit. Needs to be tested!!!
- Mod: Scary commit. Needs to be tested!!!
- Fix: TScore passed into bgu_02 is a char (Y/N) where we need to pass a bit (0/1) to api_AddScore.
- Fix: Aliased wa_GetMemberHandicapIndex TScoreAdjustmentProjected column to be TScoreAdjustment just in case this could cause any issues with the INSERT INTO .. EXEC statements we've got lying around.
- Mod: Removed the RETURN statements as I have to run these scripts against 4 databases on Monday...
- Mod: Added social and love golf shopify in home page.
- Mod: Added images for homepage.
- Fix: Kiosk Scanning: When you have a number of incomplete/misread holes in the hole-by-hole edit screen, the focus now jumps to the next incomplete hole once you hit a key on the keypad.  This makes it quicker for the user to fill out all the misread scores without having to touch the holes one by one.
- Fix: In a hidden holes NET competition if you pick up on any hole that is NOT a hidden hole (so doesn't apply to the competition), you were previously DNFd and did not get a result.  Now we'll only consider actual hidden holes when calculating the DNF flag, so you can pick up on any other hole without disqualification.
- Fix: In a hidden holes NET competition if you pick up on any hole that is NOT a hidden hole (so doesn't apply to the competition), you were previously DNFd and did not get a result.  Now we'll only consider actual hidden holes when calculating the DNF flag, so you can pick up on any other hole without disqualification.
- Fix: In a hidden holes NET competition if you pick up on any hole that is NOT a hidden hole (so doesn't apply to the competition), you were previously DNFd and did not get a result.  Now we'll only consider actual hidden holes when calculating the DNF flag, so you can pick up on any other hole without disqualification.
- Fix: iSeekGolf: Whoops, broke some builds.
- Add: iSeekGolf: More logging to troubleshoot the purchase-cancel problem.
- Mod: iSeekGolf: Added a semaphore to queue up iSeekGolf notifications so they happen synchronously.  Otherwise we may get a booking cancellation before the purchase has fully completed, leading to a half-cancelled booking.  This situation commonly occurs where a card payment fails, so ISG calls us with a purchase followed immediately by a cancellation.
- Fix: Silly grammatical errors in DateTime.ToFriendlyString().
- Fix: Operator precedence error, meh.
- Add: Connection diagnostics speed/ping display to Club Dashboard so that Louise doesn't have to use a pen and paper to do this.
- Add: Another commit for T Score calculation additions to the handicapping system!!!! This is for Golf Manager/Autoscore (bgu_02) and DotGolf Enterprise DGE (dge_ProcessScores). Everything is now controlled ON or OFF via api_AddScore and the TournamentScoreEnabled flag in the database.
- Add: Oops - forgot to commit this file too for TScores. (TournamentScores)
- Add: T Score calculations to the handicapping system!!!! NOTE: IsTScoreEnabled should be turned off when publishing until we are ready to turn the setting on. For testing purposes, the flag is on in the Dev database. I suggest testing with it off to make sure that is does not affect live when we publish.
- Mod: Remove courses from the dropdown list on golf.co.nz if they are no longer valid courses.
- Fix: Silly GROUP BY bug in my tee booking sql for multiple release times.
- Fix: Pennant Team Maintenance object error fix.
- Fix: Get rid of Org menus from the Live menu bar for superadmin users.
- Fix: Cache key was not unique when caching page custom attributes, leading to incorrect asset groups being checked for pages.
- Fix: Whoops, sql bug.
- Add: Timezone code to wa_TBGetValidBookingDateRangeAndOpeningTime.
- Add: Timezone code into wa_TBSearchSlots.
- Add: Scripts for fncLocalDateTimeAtClub and wa_TBSearchByClubDay for Multiple Release Times mod.  This will also help fix the opening/closing time bug for South Australia clubs - Zendesk #86533, but still needs a few more mods.
- Mod: Updated the text for the "Shop Love Golf" section.
- Fix: Error when using BCA to add cards to a competition.
- Fix: Try another fix for the login redirect loop.
- Mod: Fix to hopefully allow the eclectic results to work for the back 9. I am not sure why this was ever like this, but it makes sense to make this change.
- Fix: Fatal error behind the course search control, caused by the new active markers restriction.
- Mod: Did a diff on central, and there was some DOB stuff missing locally which needed to be added back in.
- Fix: Replaced the code for the live_GetAvailableGreenFeesForMemberAndDate. Added a condition for restricted date range (Row# 334).
- Fix: I have hidden TabRptMembersVsVisitors.aspx for now as it is too slow for production and I'd like to look at an aggregate table/warehouse structure to try and speed this up.
- Mod: Did a diff on central, and there was some DOB stuff missing locally which needed to be added back in.
- Add: new AppSetting, EnableMultipleReleaseTimes.  Multiple release times will only be available on the UI if this setting is set to true in the Web.config file.  This is so that I can a) disable it for NZ until we're ready and b) only enable it for Aus once they have tested it.
- Fix: When a course has expired (i.e. no more markers active for that course), we should hide the course from the card printing and tee booking areas.  This is for Queenstown where Frankton has been removed leaving only Kelvin Heights.
- Add: Insert one record into CWControlProperty (LabelProShopEmail) for the Contact Details control.
- Mod: Added ProShopEmail column to GetClubDetails method.
- Mod: Added ProShopEmail to Contact Details control if it's not null. Also added a property which will allow setting of its label.
- Mod: Add left padding to username and password textboxes
- Fix: NSW was hard coded to query the clubs for the dropdown list. Fixed the code to make it dynamic.
- Mod: Show the exception number on the kiosk when one is thrown.
- Add: Documentation for the TZBuilder.exe utility which we use to populate the TimeZoneInfo table with time zone data.
- [MAJOR] Merged the multiple release times mod for Aus (this will hopefully work for NZ too but is untested - we may need to do a few more mods before go-live on this)
- Add: Script for new TimeZoneInfo table (I have already run this against all databases as it doesn't impact on anything)
- Mod: Changed to .Net 4.0 because Dev2 has an older version of Windows Server which does not support .Net 4.5. Mod: Allow multiple database names to be passed on the command line so that we only have to schedule 1 task for all our databases. Mod: Automatically decrease thread priority to keep server happy.  The thread is only bumped up to AboveNormal while we insert records into the DB (to keep the transaction as short as possible). Fix: Put newlines in the log file to make it easier on the eyes. Mod: If an unhandled exception occurs, send an email to David to investigate what the story is.
- Add: TimeZoneBuilder utility (first version)
- Add: Folder to hold TZBuilder utility for populating TimeZoneInfo table.
- Mod: Added text in /PlayGolf/JuniorDashBoard.aspx page.
- Fix: MembersVsVisitorsReport bug fix when regionid = null
- Fix: GolfLink: When the Away Score Download process fails (with a timeout on the Tier3 side in this instance) we don't get a nice error message back on the console.  This fixes that problem and hopefully we'll get a message back from GolfLink soon explaining the timeouts.  Zendesk ticket 86581.
- Fix: In a hidden holes competition, if you have no hole score that qualifies (such as a pickup on the hidden hole), the total turns out to be NULL which wasn't properly handled in the results system.
- Fix: Oops, I meant 50.
- Fix: Team name limit to 25 characters as that is all the RSEntry.DisplayName column allows.
- Fix: Fix for Green Fee Date Range problem (RowID 1616). Added a condition for restricted date range.
- Mod: Added TabRptMembersVsVisitors for the members vs visitors count report.
- Mod: Gulf Harbour mobile slideshow images
- Add: New images for the Gulf Harbour slideshow
- Mod: Use the Settings.IsTournamentScoreEnabled flag to enable T-Scores rather than Database.CountryCode=="CA".
- Fix: Styling problem with [Calculate] button on Courses page (Edge).
- Fix: Connection leak in /api/CardPrint.asmx async calls.
- Mod: Competitions set up as PAR exclusively (i.e. no other types like Stableford or Gross added) will now be handicapped as Stableford == Par + 36.  This is according to GA rules; we should not be sending up the stableford score because people will be picking up once they go over -1 (par), but that is still 1 Stableford point.
- Add: Script for missing column on Aus Competition table - now that we've refreshed the EF model we need this table to agree everywhere.
- Fix: Missed a silly linq reference.
- Mod: LocalisationFilter change to see if this helps the possible connection leak which started happening with the 4.5.1 upgrade.
- Mod: Fixed an earlier bug introduced with a mod when I added whether the member has a handicap below 10. Eva from twenty plan to do a random draw for the top golfers in the club (handicaps below 10).
- Mod: Prevent away clubs updating other club scorecards when updating a score entered at another DGE/Edge club
- Add: New field in preparation for the T-Score handicapping change
- Fix: Rounds played by member & daily scorecard by members. Does not allow from/to dates to be the same (thus can’t get 1 day report).
- Mod: Added "Scoring mode" dropdown in the Pennants settings. Added a "Match Teams" in the Team Summary section in the Team Maintenance.
- Fix: Added the styles in the UI for the logo fix.
- Fix: Logo width/height fix for the reports.
- Mod: Changed the date format of the reports to dd-MM-yyyy
- Add: Caching of the course changes bubble to speed up page load times for Live.
- Mod: Changes to the 2 under club email template
- Add: Logging to find out why we're loop redirecting to Login.aspx on prod.
- Add: Logging to find out why we're loop redirecting to Login.aspx on prod.
- Mod: fixed the layout of the social control and added the facebook section
- Fix: SourceTimesheet.aspx had a problem where, every time a user saves one of these draws, the DrawTimeId links on ALL timeslots in the system get wiped out.  This basically meant that every time anyone else went to re-save their draw timesheet, that draw is then stuffed (duplicate slots, players, the works).
- Mod: Cleaned up permissions code - removed some old comments.
- Add: Index to speed up page load time for Live.
- Add: Index to speed up page load time for Live.
- Ignored some stuff.
- Ignored some stuff.
- Ignored some stuff.
- Fix: Don't count the current scorecard when considering number of rounds played - this is a problem when editing cards in the SCA.
- Fix: On the start day of the category from-to date range the from-to range was 2 years in length due to a boundary error - meaning 2 years' worth of scorecards were being counted.
- Fix: Upgraded to the latest jquery.signalR library (2.0.3) as the 1.0.1 one pointing to the new SignalR hubs crashed out my browsers (both FF and Chrome).
- Ignored some stuff.
- Add: Card Holder Name and Card Number to transaction search results to prevent confusion between different card numbers and holders.
- Mod: Bumped the web.config Owin version.
- Add: Microsoft.Owin.Cors so that SignalR can work cross-domain.
- Fix: When checking the category MaxNoOfRounds when calculating whether a member is in category or not, we were always looking at the number of rounds played in the current calendar year when we should actually be considering the category Valid Date Range instead.
- Mod: Add EnableJSONP to the hub configuration for SignalR to make cross-domain calls work properly.
- Add: Useful comments to Database.cs.
- Fix: in Extensions.cs the GetSqlParameter() method for DateTime wasn't doing the right thing - in SQL we got a parameter typed nvarchar(8000) when you pass a null datetime in.
- Fix: Members permission not required to view handicapping reports.
- Fix: Make ORG go back to the legacy competition setup until we move over to the NG product.
- Mod: Disable cache for results on Dev1.
- Fix: Make ORG go back to the legacy competition setup until we move over to the NG product.
- Add: Documentation for a web.config mod that needs to be made for Owin to load up after the upgrade.
- MAJOR: Upgraded to .Net 4.5.1 and SignalR 2 [added packages folder]
- MAJOR: Upgraded to .Net 4.5.1 and SignalR 2 [missing some DLLs]
- MAJOR: Upgraded to .Net 4.5.1 and SignalR 2 [missing Startup.cs]
- MAJOR: Upgraded to .Net 4.5.1 and SignalR 2
- Fix: iSeekGolf: Modified the auth header slightly.
- Mod: Kiosk: Added an optional query string parameter to simulate an arbitrary date/time while printing cards from the kiosk.
- Mod: Send back the User API Key rather than the Club API Key from the notification call.
- Mod: Send back the User API Key rather than the Club API Key from the notification call.
- (Missed a few files from this previous commit)
- 
- 
- 
- 
- Made a branch to commit Chris's unfinished tournament players search control so we can pick up on it later.
- Mod: Ignored packages folder, removed .suo file from svn.
- Mod [MAJOR]: Connector update to make it use the new asynchronous PingV3 methods.  This should give us a major performance gain on the central server.
- Mod: Added an asynchronous version of the PingV2 method (BeginPingV3 and EndPingV3) to the CardPrint.asmx service.  Using async webservice methods means that IIS can "sleep" the request while we're waiting on a result from SQL Server, meaning that we're not tying up a worker process thread.
- mod: added social control
- Mod: iSeekGolf: Append authorization header to response going back to ISG (NotificationHandler).
- Fix : Was not re-adding a team if the team was removed.
- fix : when removing a player then adding that player it gives a "player is already in [team name]" error.
- Mod: Bug fix where a deleted timeslot entry was still being shown in the green fee summary. We still want to show it if the green fee was paid online however, but if not, we should be hiding these.
- Fix : Updated overall positioning to include the accumulation mode total points
- Mod : Added team based scoring to Pennants.
- Fix: Build broken due to deprecated DGSystem enum.
- Add: New Login code to allow associations to login to DotGolf Live (by leaving out the club ID) Mod: Deprecated the DGSystem enum as we don't differentiate between ORG and LIVE anymore.  For backwards compatibility we can use the DOTGOLF_LIVE_ASSOCIATION conditional. Mod: Allow associations to pick courses from anywhere in the country, not just the home course. Mod: When creating a tournament, use the next gen competition setup for associations.  This also involved adding the correct TournamentCompetition link when saving these competitions. Mod: Use the next gen player registrations page for entering tournament players.  This page needs to be upgraded to accommodate all the other fields in the ORG registrations page (including questions etc)
- Fix: Avoid duplicate TXLine rows when we print a card, then reprint it removing and entering the person back into a greenfee included competition.
- Fix: Due to code refactor around Registration.RegisterPlayer this build stopped working.
- Fix : Updated hover styling and changed header titles.
- Mod : Updated to show both contest and match points in the overall results
- Mod: We have found 1 case in the past where the BMWScore could not be inserted. The reason for this was because the nzcrdata marker information had changed where previously the hole information was on holes 1 to 9, and now they are on holes 10-18. In such cases, ignore!
- Mod: Added whether the member has a handicap below 10. Eva from twenty plan to do a random draw for the top golfers in the club (handicaps below 10).
- Mod : updated to include the accumulated points total.
- Fix : Fixed halves points error. Results were being rounded.
- Mod: Kiosk: Rejigged the final summary screen to make it look more like a dialog where you have to take an action.  Hopefully this will reduce the number of people walking away from the screen forgetting (or not noticing) to touch "Print Card[s]".
- Fix: iSeekGolf: Removed OK status message from Authorization response as it may be causing issues on the other end.
- Fix: iSeekGolf: Locking fails because timeslotid is not unique.
- Fix: iSeekGolf: Authorization posts stopped working properly since the last commit that adds the AuthorizationUrl.
- Fix: iSeekGolf: Authorization posts stopped working properly since the last commit that adds the AuthorizationUrl.
- Fix: iSeekGolf: Post the AuthorizationUrl in addition to the NotificationUrl.
- Fix: iSeekGolf: The last TeeOffInterval we create went until 23:59 - added 2 minutes to that so that it doesn't create that minute-before-midnight tee time.
- Fix: iSeekGolf: Immediately rebind reservations when deleting one.
- Mod: iSeekGolf: Improved registration area with some timepickers and validation. Fix: iSeekGolf: Cancelling a booking in the ISG admin now cancels it in our system too.  Just needed the PlayerNum field passed in along with the request.
- Mod : Added the $$SVN_REVISION$$ tag to the end of the script files.
- Mod: iSeekGolf: When creating 2 bookings in separate transactions in the same timeslot, the second booking would not be created, silently failing with an error "booking already created previously".  I believe this is because of the same PlayerNo being supplied in the second ApplyBookingChanges call - so have changed this to check the TBTimeSlotEntry table for already-in-use PlayerNo's first.
- Add: Revision A of Social Golf
- Add: Revision 1 of TMS upgrade
- Fix: Composite Marker Selector control did not pay attention to the CompositeMarker.DeletedDate field.
- Fix : Fixed the vs text on Pennants match results
- Add: iSeekGolf: The ability to create block reservations from the Timesheet.aspx screen.  Unfortunately once GMS is set to true on a club, we can't use the iSeekGolf UI to create reservations so there is no way for clubs to take certain periods of times away from iSeekGolf - this feature allows them to do just that, even if it is a bit of a kludge (you have to do it manually for every timesheet)
- Fix: iSeekGolf: When creating a timesheet in iSeekGolf we have to adjust the initial TeeOffInterval (the one from 00:00 to say 06:00) if the day is at the start or end of daylight savings.  This meant that I had to construct a TimeZoneInfo class and detect the daylight savings offset for that date and adjust the IntervalMinutes.  Hopefully I got this the right way round...
- Fix : Updated Points on Team Results
- Fix : Updated countback points, they were slightly incorrect.
- Fix : Updated sql field names
- Fix : Updated result totals.
- Fix: iSeekGolf: We didn't send a cancellation request when a booking is cancelled in DotGolf.
- Mod: iSeekGolf: Change email address.
- Mod: iSeekGolf: Change "Reserved Reserved" text to "Club Booking"
- Mod : More changes to improve performance.
- removed hardcoded competition id
- Fix : Updated TeamResult Query to do sums of totals.
- Mod : Updated the pennants results to include more ajax calls than loading the results on first load.
- Reverted Compression change.
- Add: Subscriptions system documentation and a help link to take you to the PDF download.
- Mod : trying to compress the json result to increase load time.
- Fix: Aus: GolfLink upload: When people enter two comps on the same day with different round numbers their scores get uploaded to GolfLink twice in the same batch.  I had to add another level of grouping here because you can't group on an aggregate - we should have been grouping by RoundNo only if the competition in question has multiple rounds on the current date - but it was always grouping just on the roundno regardless of the number of rounds on the same date.
- Mod: Another refactor around the Registration class; we now pass in a WebUser reference for authentication/tracking rather than a club ID.
- Mod: Leaderboard: Catch and log exceptions in the button postback (to refresh the screen) to try and find the stuck RequestAcquireSession problem with IIS.
- Mod: Changed a bunch of references to Master.Shared.Club to Master.Shared.Organisation to try and get the Org and Live solutions closer together.  This, in theory, won't affect the current Live or Org solutions in any substantial way as it is basically just a code refactor - I have not included any of the dangerous login code changes in this commit.
- Mod : Updated the scoring to include negative CountbackPoints for GolfSA
- Mod : Updated the pennants ordering for GolfSA manually. This will be swapped out for some flag in the section setup.
- mod : Updated the Hertz banner
- Fix: Don't allow resubmits by doubleclicking the submit button.
- Mod : Added draw and result links to pennant dashboard.
- Fix: Enforce a minimum password length of 6 characters for new registrations to My Golf.
- Fix: Adweb: MailerStatus page was never upgraded to send ?Code rather than ?ticks to the shared EmailViewer.
- Fix: TabLegacyUpload.aspx uploader control .TXT validation only worked on first page load (validation did not survive a postback)
- Mod: Moved the Status combo to be above the member name so that you pick that first if you want to search resigned members - this way I can turn off the quicksearch control for resigned members. Add: onBeforePopup option to the quick search control.  You can use this to stop the control bringing up its search box - just return false from the function.
- Add: Release notes.
- Mod : Updated Guid to be more readable
- Add: Change tracking.
- Add: Basic formatting.
- Mod : Login error message.
- Mod : Updated the SendForgotPasswordEmail to return an error if no passport is found for a username, this is because the user has not registered. Mod : Updated the Login error if there is no passport found.
- Fix: Greenfees: In the generic options script we were still checking play date for fromdate < todate.  For Summer payp memberships this doesn't work as the from and to dates cross the end of the year - so I've removed the validation that enforced this.  Note that in testing I didn't get the green fee prior to the from date but I did get it AFTER the to date (in the POG) - so there may be a problem in the green fee checking code here.
- Mod : Added Xero Settings change
- Mod : Updated XeroSync to be more robust, and included a last sync date for invoices.
- Add: Grep for Windows to the build tools directory so we can check for the correct wyBuild version.
- Add: Grep for Windows to the build tools directory so we can check for the correct wyBuild version.
- Fix: Adding scores to an OOM tournament times out if many scores (>150 or so) are added.  Increased sql command timeout to accommodate.
- Fix: Reference the new version of AutomaticUpdater.dll as wyBuild has updated itself
- Mod: Pakuranga style update
- Mod: iSeekGolf: Default course interval set to 1441 to avoid ISG creating its own tee times.
- Updated the doc.
- Add: Spec for multiple release times for tee booking.
- Added doc about the bulk email process
- Fix: GolfLink: RemoveGolfLinkMember crash because status returned is not what we were expecting.
- Mod : removed the reference to date.js as it is included in the master page.
- Fix : removed a reference to Date.js. This is included in the masterpage. Seems that if you have a double reference to the Date.js it throws an error - Uncaught RangeError: Maximum call stack size exceeded.
- Add: iSeekGolf: Implemented booking cancellations from iSeekGolf - but this is not working due to a problem with ApplyBookingChanges (still working on this). Fix: iSeekGolf: Don't try to recreate a booking with the ISG API when it is already an ISG-owned booking (created via ISG)
- Mod: iSeekGolf: Save the ISG transaction ID on the TBTicket table so we can cancel these bookings later when asked to.
- Mod: Added top 1 to prevent multiple round 1's returning. David and I have looked at this to try and prevent having to do a top 1 but for now, we cannot see the harm in it.
- Mod: iSeekGolf: Added code to "fill the gaps" with blank TeeOffIntervals so that we don't get tee times on iSeekGolf that don't exist in our system.  This is also the only way to keep the start times in sync with our system.  Overlapping DayTemplateBlocks will not work in ISG either, not sure how we are going to handle those.
- Add facts on 9 hole membership;
- Mod: Make it more obvious to search on surname
- Add: Revision 1 of 2014 Handicapping Review document
- Fix: iSeekGolf: Another little problem with the locking of timeslots - IIS was showing a custom error page instead of our raw error (500 or 501), and also the Nofitication post wasn't in the exact format I was expecting.
- Mod: Add more logging to the DotGolf.API project around GolfLink golfer deletes.  There is something going on when we try to delete a golfer through the API.
- Fix: The American Stableford competition type had a bug in it where a player who have picked up on a hole would be awarded 3 points instead of 0.
- Mod: TabLegacyUpload.aspx: Force NZGA.TXT files to have .TXT extensions and be less than 500kB in size.  Otaki tried uploading a 20M binary to us which caused high CPU on the webserver.
- Mod : Updated the LoveGolf profile to exclude the Introductory Offer Price as part of the profile completion.
- Fix : Updated Stephen Flemings name. Was spelt incorrectly.
- Add: Error logging to API so we can troubleshoot ticket 84507.
- Mod: Scanning: When editing a scanned card hole-by-hole, we used to only show the Gross and Stableford values.  Now we show the gross value and also up to 2 competition scores as per the competition setup.  If the card is in a competition which is set up for Gross+Net+Stableford+Par we will show only Gross, Net and Stableford due to screen size limitations (we have to design for 1024x768).
- Mod: Aus Kiosk Scanning: When scanning cards printed using the new LongScanning_AU or LongScanning_CenterTray_AU cards where the stroke column has been resized, the total boxes are not where the kiosk scanning code expects them to be.  This mod allows us to customise the scanning code to read the boxes from the right areas on the card depending on the card format name (which we know since we've saved that on the Scorecard table).
- Mod : Updated the XeroSync to check for invoice changes up to 6 month prior. This is needed to check for invoice changes when the XeroSync may not have been running during the deployment phase. This will get changed to use a last check date saved as a setting.
- Mod: Clubs sometimes need to be able to get to a deceased member's record, especially in the few weeks after they have passed away, for various reasons (see email from Janet - long story).
- Mod : Updated The LoveGolf UI to hide the Activation dates for the clubs LoveGolf Profile
- Add: Google Analytics for Support site.
- Mod : Updated the LoveGolf compilation video to the new link.
- Fix: Put back the SVN revision tag but make it opacity 0.5 so it's less conspicuous.
- Mod: Support: Change support link to open in a new tab/window.
- Mod: TEMPORARY WORKAROUND for this weekend.
- Add: iSeekGolf: Small mod to hopefully make carts go - not sure if this will pay off but hey, it's worth a try.
- Add: Release notes.
- Fix : Teams not showing when there are no complete contests
- Add: DotGolf.Support: API endpoint for running a few sanity checks.  This is designed to work with something like Pingdom which can email us if the Smartsheet integration ever breaks, for whatever reason.
- Fix: iSeekGolf: Handle the slightly different call (resource_data) we get after a slot is initially locked.
- Add: iSeekGolf: More logging around TimeSlot lock acquires as there seems to be something up with this interface.
- Fix: iSeekGolf: Tee booking LockEx mechanism wasn't using the correct LockID and therefore timeslots never got locked correctly.
- Fix: iSeekGolf: the resource_event, resource_type and resource_data properties seem to have disapppeared from the notification post from ISG.  This is a bit annoying because it just randomly started breaking for me.
- Fix: Updated help link to http://support.golf.co.nz/
- Fix: Whoops, broke the build, sorry guys.
- Fix: iSeekGolf: Notification handler was using the User API Key instead of the Club API Key as we were working from incorrect documentation. Mod: Refactored some code to make a central place to create the TTM HttpEntityClient.
- Fix: Adweb Contracts section was not visible if you don't have any contracts for a club, so it was not possible to upload any.
- Add: Waipu mobile site images and css
- Mod : Updated Why Love Golf page with new videos and styling.
- Fix: Broken build because of Club class changes in Org.
- Mod: Added a base class to inherit both Club and Association from, called Organisation.  Added the HasProduct() method into this base class so that we have a single place to maintain this.  We can now also have Shared.FromHttpContext.Organisation instead of Club and Association which means more portable code across the Org and Live projects.
- Mod: Moved a few things into the /shared folder so that ORG can also use the Competition_NG.aspx page for competition setup.  Note this is NOT working properly yet, there is still a lot of work to be done - but hey, I can load up the 5 Course Classic competition in it by just changing the URL from Competition.aspx to Competition_NG.aspx - that counts for something!
- Add: Templeton mobile images and css
- Mod: Edit style (improve spacing) of big home page text
- Add: Helensville mobile images and css
- Fix: Added 9H/18H/All filter to BCA too (we previously did it for SCA but forgot about BCA)
- Fix: Subs: We no longer care about the IsRenewalDefault flag at all - we always renew at default rates now (if specified).  The only time we won't renew at default rates is if the category item does not have a default specified AND the member was already billed for that item in the past - in this case we will use the amount the member was billed last time.
- Add: Waipu new sponsor image
- Mod : Update the pennants setup, if there are no divisions created for a tournament and a new section is created a new division called 'No Divisions' is created. All new sections are joined to the new division
- Add: iSeekGolf: When bookings are created in the POG, we now automatically reserve those slots in iSeekGolf.  Also when bookings are cancelled, the reservations are cancelled in ISG.  At the moment as soon as we book a single person into a slot, the whole slot becomes unavailable on iSeekGolf; we don't do partial slots as this just gets too complex (then we need to track multiple transactions per slot)  This could be looked at in the future because the API seems to support it.
- Mod: iSeekGolf: Since it seems like you can get the Club API Key from the clubs/me.json call, I have removed this from the Settings.aspx page and only require the User API Key to be entered now.  This will hopefully cause less confusion in the future as not even Bill is sure which one is which.  API calls tested as far as I could go without a response on my latest question to Bill.
- Mod : Hid the Rev tag at the bottom of the master page.
- Fix: Added the Mobile Number and the Fax Number in the e-mailed details.
- Add: Mobile - Green Fees List NG control
- Mod: Just removed the test css class names used
- Fix : Removed sorting for Score entry in Pennants
- Add: Support: LogMeIn Support Connection down the bottom of the page.
- Fix : Removed sorting for contest matches in Pennants
- Fix : Removed sorting for Score entry in Pennants
- Add: Redwood Park mobile images and css
- Fix: Support - should be http://support.golf.co.nz/.
- Fix: SMS charge import does not work in Adweb because Clickatell is nulling out the ChargeCredits field.
- Fix: Oops, didn't have help.golf.co.nz in there.
- Mod: Moved some images into the shared folder.
- Mod: Moved some images into the shared folder.
- Mod: Support: Make DotGolf logo clickable to get back to the home page.
- Add: Peninsula slideshow images; mobile site images and css
- Add: Support / jump to help link for the new Customer Service Portal.
- Add: Levin mobile images and css
- Add: Maraenui mobile images and css
- Fix: Casting AltMemberId to a string incorrectly (it is actually a long).  This caused the DeleteMember API method to always fail.  http://service.micropower.com.au/tickets/84507
- Add: Christchurch mobile images and css
- Add: Judgeford mobile images and css
- Fix: MOTD did not appear correctly for clubs with kiosks outside the NZST timezone.  Whoops.  http://service.micropower.com.au/tickets/84540
- Fix: In normal mode (show multiple comps) the leaderboard didn't properly work out the SingleRound protected property which lead to the Crse Hdcp column disappearing.  This upset some Aussies, and I think Ian at Waitemata also had an issue with it in some situations.  http://service.micropower.com.au/tickets/84548
- Mod: Don't let users enter players directly into one-scorecard-per-team competitions via the SCA or POG.  These types of competitions have to have their teams built up via the Player Registration screen instead.
- Mod : Update the pennants overall results to not include any results which may still have matches in play or which have not started/completed
- Mod: Helensville login style updates
- Add: Gulf Harbour login new image
- Add: Christchurch login new images
- Mod: Gulf Harbour login style update
- Mod: Christchurch login style update
- Mod : removed role security for reports.
- Reverted change for Report security for a pennant club user.
- Fix : Updated the Levy Invoice to use the Document Date, not the created Date.
- Updated the permissions for the pennant Dashboard.
- Fix: iSeekGolf: Course synchronisation does not work if the ISG club has no courses (initial setup).
- Mod: Christchurch login style minor enhancements
- Mod: Gulf Harbour login style minor enhancements
- Mod: Hamilton login style minor enhancements
- Add: Validation to support centre. Add: Bit of styling.
- Mod: North Shore login and submenu style updates.
- Mod: Changed to .net 4.0 to try and make it build on dev1.
- Add: Packages for Dotgolf.Support.
- Add: Initial version; we'll see if we can build it without the Nuget packages in source control...
- Add: DotGolf.Support microsite project.
- Fix: Fix: Mark As Paid on SCA commit from rev 16451 stuffed up the dollar icons for the POG.
- Fix : Matches in progress should have the status of "All Squared with" instead of "Halved with"
- Fix : Live Scoring matches were not displaying the live scoring dropdowns on initial load.
- Mod: login control style enhancements
- Fix: Mark As Paid on SCA commit from rev 16451 stuffed up the dollar icons for the POG.
- Mod: club site login style enhancement
- Fix: Staging club fee types were not updated.
- Add: Huapai mobile site images and css
- Fix: Backstop fix to stop the system breaking when the Hole table isn't populated for a marker (only really applies to Aus2Stage in some circumstances).  This won't affect production systems.
- Fix: Missing GO statement.
- Add: Ability to delete a club contract from S3.
- Fix: Aus: When searching by local member code, correctly search on the number including padded zeroes.  Also filter by the current club when we're searching local member code only.
- Fix: Changed the leaderboard to use club short names rather than the full names.
- Mod: Huapai style updates
- Fix: If a club is in Anarchy mode we no longer send the timeslot down to the kiosk to have the 9/18 option checked.  This means that the user now gets the option of playing 9 or 18 whenever they don't have a booking and the club is in anarchy mode.  Example 9/18 hole select screen: http://snag.gy/Jn4YZ.jpg
- Fix : Joint winner was not taking into account the points for matches won and halved. Added this to the calculation.
- Added Tournament Member Quick search control html
- Added Tournament Member Quick search control service
- Added Tournament Member quick search control
- Mod : Updated the pennant results to include Joint Winners. Now teams that are on the same points are considered join winners.
- Mod : Updated the pennant results to include Joint Winners. Now teams that are on the same points are considered join winners.
- Mod: Manukau mobile site style update
- Add: Manukau mobile site images and css
- Add: Titirangi mobile site images and css
- Add: Allow multiples of certain ClubFeeGroups to be added into a club's green fees.  This is now controlled with some database fields rather than a hardcoded identity value.  http://service.micropower.com.au/tickets/83810
- Mod: Add a position indicator to the ball rundown section of the prize report.   https://micropower.zendesk.com/agent/#/tickets/83476
- Add: Pupuke mobile site images and css
- Mod: Team card format for Aus polished a little bit, it appears as though we've never quite finished this in the past.  The team handicap and course handicap is now clearly visible, and the names are no longer clipped within their rectangles. Fix: One-scorecard-per-team cards did not print properly due to the RSEntry (already being a team) not relating back to a different RSTeam record.  It would have worked OK for 4BBB etc competitions through.
- Fix: When querying GL and not getting a response, the pre-print area would crash while printing cards.
- Add: Waitemeta mobile site images and css
- Fix: Mobile site - Contact Details - Google map link: exchange concatenation of latitude and longitude to fix link to google map app.
- Mod: Bump the timeout to 120s for the RegistrationDetails.aspx page to get NZ Golf working again - but this is only a band-aid and we need to redesign and simplify the way players are being withdrawn.  It is not always necessary to recalculate the results and entries for the whole competition when a change like this is made.
- Fix: Was not checking for null DOB in the Age limit check. Added isnull around the @DOB setting
- Add: Mangawhai mobile site images and css
- Mod: The link on the Finalise payments page for tournaments only refunded rejected and withdrawn players - extended this to include waitlisted players too.
- Mod : Updated LevyInvoiceReport to reflect the correct invoice date.
- Mod: Pakuranga site style update
- Mod: Templeton club site - hide the "Prizes" text in the comp result page
- Fix: When editing a scorecard (loading it by card no), the additional strokes were not included in the Score object which meant that they were not considered when calculating strokes.  As far as I can tell this was only a problem with editing scorecards, not the initial entry (although not confirmed).  Scanning may or may not have been affected.  Results would not be affected - only display in the Score Input Control.
- Fix: Small styling adjustment to stop "GolfLink" from wrapping to a new line on the "Send Scores to GolfLink" button.
- Mod: Omanu style update
- Add: Omanu mobile site images and css
- Add: Even more logging to try and troubleshoot this stupid token problem for Ballarat.
- Add: Tauranga mobile images and css
- Mod: Added clubId to the cache key to see if Micropower are passing us the same token but for different clubs.  This could be invalidating the cache which would be stuffing up future logins for a person. Add: More logging to try and troublesheet when these tokens get created.
- Mod: Update on Paraparaumu's style
- Fix: Return '1' (string) after an update or insert--this indicates a successful save. This fixes saving of custom result content.
- Fix: Query the Custom Result table to get the value. This fixes the display of content after saving changes (cute editor).
- Mod: Paraparaumu's mobile site style updates
- Mod: Mobile site comp result - only add arrow link if there is a scoreid (used in the hole by hole score page)
- Mod: Mobile template - wrap center panel in div (with ID, like the terraces template)
- Add: Paraparaumu's mobile images and css
- Mod: Pakuranga submenu style
- Mod: Logout button style
- Mod: Pakuranga login and style
- Mod: Pakuranga logo header and style
- Add: Pakuranga's images and styles
- Mod : Updated the Pennant admins to Role based and not on a username basis
- Fix : Teams were not being shown on the report if there are no matches.
- Fix : Teams were not being shown on the report if there are no matches.
- Mod: Huapai styles updates
- Mod : Updated sort order of matches to reflect the same order in Org.
- Fix : made the Matches Won use points rather, including halve points as well.
- Mod : Changed the sort order of the contest matches to order of creation.
- mod : removed decimal formatting.
- Fix : made the Matches Won use points rather, including halve points as well.
- Mod: Huapai style updates
- Mod: Huapai style fixes
- Mod : Updated team summary matrix rather use team points rather than overall win/halve count.
- Fix :Fix : Sorting order of score entry. error in knockout how the scores were being sorted.
- Mod: Removed sddm styles (moved to 197 > UDropDownMenuBar.css)
- Mod: Use default image if the menu's image is not available
- Fix : Fixed the team positioning on the team matrix summary Fix : Sorted team names alphabetically in team matrix summary
- Mod: Updated Huapai slides
- Mod: Updated Huapai styles
- Fix : Sorting order of score entry. error in knockout how the scores were being sorted.
- Fix: New Marker button styling.
- Mod: Do not recalculate results after every update (withdrawn, dq, division handicaps etc) but only after all the updates have been done for a registration.  Previously we were recalculating results up to 4 times!
- Fix: SQL error in bulk email sending code, parameter @DateCreated does not exist.
- Fix: Changed the name of Micropower's logo image to make sure it shows properly in browsers that aggressively cache things.
- Mod: Made changes that we need to keep the member quick search controls working (after the refactor done in Live)
- Mod: Refactored Member Quick Search control into two separate controls, QuickSearch and MemberQuickSearch.  This new structure lets us take the base searching functionality (popup, cursor keys, etc) and add our own backend search logic, for example what is just about to happen with the Tournament Registrations area.
- Ignored some stuff.
- Fix : draw report now only shows the courses for each round, not all the courses
- Mod: Huapai styles update
- Mod: Huapai styles update
- Mod: Huapai images
- Mod: Mangawhai. Add bottom padding to header
- Mod: Remove commented code.
- Mod: Huapai style changes
- Mod: Removed commented styles
- Add: Hastings new sample site files
- Mod : Added Effective Measure to masterpage.
- Fix: Exclude non-affiliate (social) members from the Add Member search, they should not be included in the list.
- Fix: Oops, should not affect ClubSpace clubs.
- Fix: Scaled MP logo down to fit in the new smaller Edge titlebar.
- Add: Edge styles for Australian clubs.
- Add: Kiosk self score scanning will now also show you the stableford/par/net scores for cards that are in these competitions.
- Add: Kiosk self score entry will now show Par and Net competition scores if the card being entered is in a competition of those types.  We'll always show Stableford as we've always done that - maybe we can make this dynamic too one day.  We can show up to 3 types, so at the moment we'll show a maximum of Stableford, Net and Par.
- Fix: Bulk email crash when sending if you include a link without any href attribute, eg. a bookmark: <A name="_test">blah</a>.
- Mod: Added WITH RECOMPILE to live_ValidateRoundForMemberOrNonAffiliate.  I believe the random performance issues we have with this proc are due to parameter sniffing.  See https://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/ and http://stackoverflow.com/questions/16811679/stored-procedure-runs-fast-after-recompile
- Mod: Hole List competition result reports will now show the holes that the competition type pertains to, for example "Twos Results for All Par 3's, 4's and 5's"
- Fix: In development it's always been really annoying how the browser renders a blank page when you change DB connections between Aus and NZ (because UserSecurityIds don't match between the databases).  This commit fixes that by expiring the session once a database connection change is detected.
- Add: A framework and a basic implementation of keypad support for the DotGolf Kiosk at clubs that do not have touch screens. This is a development feature for now, as it is disabled in code.  We need to come up with a product and/or setting to enable this per-club.
- Add/Mod Huapai club site images
- Add: Omaha Beach Golf Club mobile site images
- Mod: Get rid of any weird characters from the scorecard report name.  In some cases, with some printer drivers, funny characters can crash the print driver resulting in queued cards not printing.  This happened today at Howick.
- Mod : added accumulative score to Draw Report.
- Add: SCA now has the ability to filter by 9H/18H/All cards.
- Fix: Removed a bunch of annoying console.log() calls.
- Add: Release notes.
- Fix: Nomads members were not being resigned automatically when they resign from their home club (secondary members only for T2 clubs).  This is because we renamed the product from SMO to T2 and never updated wa_deletemember.
- Fix: Nonaffiliates printing cards using a ticket number.  We still have issues around this but at least the normal use case works with a quirk. - Could not print cards at all because the player did not show up in the list after the ticket number was entered (turns out this was missing green fee info) - Once the above was fixed, I started getting Object Reference Not Set errors because of a missing course ID. - Now I'm able to print cards, but after the card is printed the SCA still shows the player as having to pay a green fee (not marked as paid even though it was paid online) - Also once the card has been printed and deleted, if you go back to the kiosk and enter the same ticket number again, things get really weird, the name of the player no longer shows, the green fee info is completely missing, errors appear when you try to re-print the card.
- Mod: Hide the diagnostics text bottom right when we're not on the home screen.
- Mod : Only show the division combo if there is more than one division available.
- Fix: Reverted Grace's commit because I've just done the same thing for Aus (and I like having the DeletedDate check on the LEFT JOIN row better)... :)
- Fix: Competition prize report was not considering CompetitionDivision.DeletedDate.
- Mod: Huapai styles clean-up
- Mod: Huapai styles
- Reverted to leprechaun.
- Fix : Report was including Vs Mode matches in the over results grid.
- Mod: Added back styling for internal dev environment so we can tell it apart from production.
- Fix : Report was including Vs Mode matches in the over results grid.
- Mod: Enabled YUI compression. Mod: Disable concatenate for dev computers - makes debugging hard. Mod: Removed script from pog that no longer exists (this caused a JS error before)
- Updated query to exclude vs mode results
- Mod: Don't crash out the whole concatenate output if only a single script fails to render out properly (due to 404 or compressor exception)
- [MAJOR] This commit will combine styles and scripts into a single download, the same way we do it on Public 2012.  Some of the pages in live were getting really slow because of the number of individual scripts and style files that needed to load; this avoids that problem.
- Fix : Pennant results were including deleted TeamPlayers Entries
- Add: Concatenate control from the public 2012 project so that we can roll js and css files into 1 for DotGolf Live (browser speed enhancement).  This commit is superficial and won't do anything to the html being rendered, I will commit the refactored script tags in a moment - these do the real work.
- Fix: Non-affiliate card printing was broken by the kiosk nine hole printing refactor from last week.
- Mod: Typo - should be upper case "I"
- Add: Diagnostics output on kiosk lower right corner.
- Mod : Refactored sliding banner images to a UserControl.
- Fix: Where we have an operating system that is confused about whether it is a tablet or a PC (read Windows 8 with older resistive touch screen drivers like 3M), the OS seems to want to send us the touch events (so document.ontouchstart is present), but no touch events ever arrive, only mouse events.  This means we have to handle both classes and deduplicate them on the fly.  Annoying.
- Fix: Oops, stuffed up the club dropdown sql.
- Add: Composite marker maintenance screen for Adweb.
- Add: Huapai files
- Add: Waipu sponsor images
- Mod : added sql for 'vs mode' in pennants
- Mod : added Vs mode to score entry. this allows the user to enter contests before the score is known.
- Fix: Join only with valid (DeletedDate = null) CompetitionDivision. This fixes the duplicates in the Competition Prize Report of Napier (Competition ID 329641).
- Fix: http://service.micropower.com.au/tickets/83107 - Prize report was not giving ball rundown winners their prizes if they already won placegetters, even if all the "Can win other prizes" boxes where ticked.  Turns out there was a mod done to add Ball Rundown which wasn't fully implemented to take placegetters into consideration.
- Mod: Multi-threaded the CompetitionSelectorControlService.ValidateRoundForMember method to try and speed up eligibility checks from the SCA.
- REVERTED: Multi-threaded the CompetitionSelectorControlService.ValidateRoundForMember method to try and speed up eligibility checks from the SCA.
- Mod: Multi-threaded the CompetitionSelectorControlService.ValidateRoundForMember method to try and speed up eligibility checks from the SCA.
- Fix: CompetitionRepository.GetCompetitionsForDate() was not filtering on DeletedDate which caused duplicate comps on the Competition Fees report.
- Added nsw org logo.
- Fix: When loading up a scorecard for a non-affiliate, not-played scores (gross=-2) caused a problem in the SIC because they were not being correctly loaded with the Played flag set to false.  Instead the gross score was being interpreted as -2 which the score model does not like.  This is only a problem with non-affiliates, affiliated members handle this scenario fine as far as I know.
- Add: Basic health page to Adweb with graphs on it to give everyone a basic idea of system performance.
- Add: Golf Australia logo for ORG.
- Add: Configurable logo image path (DotGolf only setting) for ORG.
- Mod: Smartsheet #1566. Added a "Mark as Paid" button to the SCA card printing dialog, default ON.  This is checked by default and means that any greenfee cards printed from the SCA will default to being paid.  Also, any card that is edited will be marked as paid too (this is a change from the previous behaviour, where you had to click Mark as Paid as an extra step).  Unchecking the new Mark As Paid checkbox will un-pay the scorecard too.  This mod involved a change deep in the scorecard transaction logic where the markAsPaid flag was being ignored when editing an existing card, which meant that a reprint was never marking a card as paid.  It would be a good idea to test the kiosk as well as the pre-printing area to make sure we haven't broken anything.
- Mods : Removed using declaration that is not needed.
- Added AssociationImage.ashx
- Mods: Added pennants report to dashboard Mods: updated report with new styling.
- Fix: Increased the font size on the little player details tile that pops up when you click the block alias in the POG.
- Add: Ability to bulk email ALL players registered for a tournament, regardless of their status (accepted, rejected, waitlist, etc).
- Mod: Because the ?ticks= parameter is vulnerable to brute force and guessing of a known datetime value, I have changed this to use a random code instead.  Backwards compatibility will be kept until April 15th 2014 (i.e. emails created earlier than that date will be able to be loaded by using the ticks parameter, after that point any new emails will require a code.
- Fix: Handle getting of LastScoreId for edge eclectic competitions (whose ClubCompetitionId is 0).
- Add: Ability to hide membership numbers from the handicap report via a new checkbox on TabRptHandicapListing.aspx.
- Fix: Broke ORG build by removing includeDeletedScores parameter from Member.GetScoreListing.
- Fix: When reprinting scorecards with multiple browsers open and looking at SCA, you can easily produce multiple live (non-deleted) ScoreCard records with the same CardNo.  Changed the reprint sql to stop the ability to reprint a deleted card.
- Add: There is now a filter box at the top of the Competition Types box in competition setup, allowing the user to quickly find and select competition types.
- Mod: Remove "Show deleted scores" option in TabMemberScores.aspx as this wasn't properly implemented and will need significant work (and introduce significant overhead) if we were to make it work properly.
- Mod : Updated styling to report.
- Mod : Added pennant results page, this will have the reporting details for each section.
- Fix: Small styling annoyances.
- Mod: Updated release notes.
- Mod: Improved "Recently Viewed" in members area.  Added a "last viewed" and this also now keeps the recently viewed list for your user, even across sessions.
- Fix: When you search for members before the home club member list is loaded (in the background), you only get a "Searching" popup and member results never appear.  This is because the code never checked back to see if the local members were loaded at the time that the search was first triggered. Fix: Member Quick Search: When filtering by home club members only, don't show "Searching other clubs" with a spinner.
- Fix: Aus: On the members page, filter the search control to only show members of the current club.
- Add: Release notes.
- Fix: When dealing with a 9 hole booking, we should never show 18 hole competitions on the kiosk.
- Fix: Always show 18 hole comps on the kiosk regardless of the start tee (obviously still filter if the player has a 9H booking or is a 9 holer - but that is done in other code)
- Fix: Forgot to put a CAST in to return a bit value from GetMarkers() sql.
- Mod: [MAJOR] For 3 tee starts at clubs like Tauranga (who start on hole 3, 7 and 12) we reworked the way that the kiosk determines which marker you're playing, in both with-a-booking and without-a-booking with/without competition modes.
- Fix : Fixed the score entry AbeatB option.
- Fix: Left a $root in there instead of self.  Oops.
- Fix: For Foursome competitions (and the like where there is a single team cart), the kiosk passed a team array consisting of a single null value - the SaveScore code didn't like that too much.  Filtered it so that null values don't get through.
- Fix: We were not showing the 18 hole cart availability on the booking editor.  This means that if you have more carts available for 9H play (because of a later booking that is stopping another 18H cart from being booked), you can possibly overbook carts if you make another 18H booking.  The editor was changed to display both 9H and 18H cart available counts so that the admin can decide.  We could not show only 9h or 18h depending on the booking because each TimeSlotEntry may be for 9h/18h.
- Mod : Fixed Selected boxes default. now defaults to '--Select--'
- Mod : Updated result totals styling.
- Fix: This fixes the query of hole by hole scores for eclectic competitions (edge), whose ClubCompetitionID is 0.
- Mod: Refactored live_ValidateRoundForMemberOrNonAffiliate to make some speed gains.  There were some error selects that did not have RETURN statements so a lot of this proc was running unnecessarily when the results would have been discarded.  I also refactored the @AutoEntry select code to short circuit it when we obviously won't be doing auto entry - so we don't have to run the expensive query every time.
- Fix: This fixes the pop-up style. Previously, the bottom part goes beyond the pop-up's white background/box.
- Add: Index for performance.
- Mod: Removed "As At" from the competition prizes report heading and replaced it with either the competition date (for single round comps) or a date range (for multiple round comps).  The As At date is still available in the footer of the report "Report produced at...", it just makes more sense to have the comp dates at the top rather than the printed date.
- Mod : changed the match count on contest matches
- Fix: In the case of a trusted Member ID (as what is passed in from MSP) we don't try to lookup the central member code anymore to complete the login.  While this is technically not necessary in production, we need it in staging because they want to test MSP integration before the bulk upload from PG7 has been completed (Coomealla has a blank membership database at present).  New members inserted via MSP don't have CentralMemberCodes and this stuffs up the tee booking control.
- Mod: Better error message for when a ClubCMS page is not found. Add: Ability to skip doing the redirect after ChooseClubWebsite.aspx is run, so that cookies are set properly even if the nexturl is not found.
- Fix : Fixed the saving of matches
- Mod: Added Clubid onto the where condition for the Group Booking area of the carts calculation - shows how many clubs use Carts (or Group Bookings)
- Mod : Changes to styling and grammar changes.
- Mod: Added a condition because the control will be added to the _GlobalMobile page and we to show the "pop-up" when on the mobile home page only
- Mod: Fix for displaying prize reports for single round competitions. Basically added back a condition that was used before: competition.CompetitionRounds.Select((cr) => cr.RoundNo).Distinct().Count() > 1)
- Mod : added live scoring to pennants results.
- Mod : Added Live scoring to Pennnants
- Fix: ClubWebUser was called with trustedMemberId=false when it should have been true.  This caused failed user logins for MSP clubs (Ballarat).  Ticket http://service.micropower.com.au/tickets/82940
- Add: 2 and 3 player Ambrose competitions for Aus.
- Fix: for some reason you can't add 400 minutes to a smalldatetime, but you can to a datetime - so I've converted the smalldatetimes here to datetimes.
- Fix: Aus ClubCMS: If you login with a valid member ID but incorrect password, you'll get the "invalid login" message but any subsequent page load results in an error message.  To get rid of this you have to clear the ASPNET session cookie.  This is usually a fatal error for users, they have to use another browser to get around this.
- Mod: auto generated fields Td10, Td11, Td12 were added
- Mod: remove "Excl. Public Holidays" from description
- Mod: GetGreenFees_NG method - correct the isnull usage for ShowOnClubWebsite
- Mod: Changed the cart query when there are group bookings on the day to accommodate carts to be taken later in the day (or earlier in the day depending on when the group booking time is). This is based on the minimum group time, because that is when the carts will begin to roll in from the group. Fringe cases could cause issues like ShotGuns, but that is a very fringe case, and Queenstown specifically asked for this so I let it pass to try and get them.
- Fix: The kiosk wasn't paying attention to the "Inactive" setting in Marker Defaults.  For Maungakiekie this meant that all courses were being shown on the kiosk even if 2 of them were marked as Inactive.  This could be a bug in the POG as well, I'll check that soon.
- Fix: "Book on Internet" / "Book on Kiosk" boxes were only shown for the template editor, not the timesheet slots editor.  Oops.
- Mod: added style
- Mod: for mobile only - added link to Playfair Display SC font
- Fix: Members of Australian clubs could not print cards based on their local member code.
- Mod: Add marker-gold style
- Mod: Edit styles
- Add: Muriwai's mobile style and images
- Fix: Combined result wasn't calculating DNF properly - for anything but Stableford if a player picks up, the team should be DNF.
- Fix: Casting a null to a decimal - not a good idea.  GL started passing us NULL NewHandicap values for people who are frozen.
- Fix : Team schedule now only brings back the schedule for the selected section.
- Add: Muriwai header image - tee booking
- Fix: Build error due to GolfLink webservice change.
- Add: Muriwai style and images
- Mod : Updated the status messages in the sections. They not reflect the correct status of the Section.
- Fix : Schedule was not loading the team names correctly.
- Fix: AllowKeypadAccessToTeebooking default should be FALSE.
- Add: Release notes.  (Look at this for Aus/NZ as they are different)
- iSeekGolf - just added something to the TODO list.
- iSeekGolf integration work. Fix: When a previously created lock expires you can never make any bookings again with the same AuthorizationGuid.  This was only a problem in dev, but an annoying problem... Mod: SynchroniseCourses() will now handle the "primary" ISG course and turn that into the main course for the club upon first sync.  This is done because we apparently can't delete this course when we set up the link, so we just take it over, rename it to eg. "Horton Park" and set the ForeignSystemId so that we can use it for bookings. Fix: We had a few timezone stuff ups when receiving booking notifications from ISG. Add: We now create a ClubFeeDetail (and all parent records necessary) for the incoming booking and link it up properly so bookings appear in the POG with green fee information. Add: Release timeslots when ApplyBookingChanges succeeds.
- Mod: Updated table background color
- Fix : Updated hertz sidebar to the NZ url.
- Add: Gulf Harbour mobile site images
- Add: Gulf Harbour mobile style
- Add: Kiosk keypad tee booking (no swipecard required).  New setting for Aus clubs (for now); KioskAllowKeypadAccessToTeebooking.  You can turn this on from Settings > Kiosk.  The default is OFF meaning a swipecard is required, however if you change this to ON, members are presented with an on-screen keypad where they can enter their membership number and gain access to their bookings.  This obviously means very little security, but we'll cross that bridge when someone abuses this.
- Mod : Fixed the generation method in the schedule to order teams by points.
- Fix: Correct the isAccumulative value. This fixes the Competition Prizes report--round specific. Overall report was also tested.
- Add: CMemberHistory table and associated triggers updated to include the following new columns: DisplayClubCode, DisplayMemberCode, LocalMemberCode, CentralMemberCode, AltMemberId, AltMemberNumber, Address3, State
- Mod: Change api_AddMember to correctly link existing member & cmember records in our DB that were initially created by ClubCMS or a GL lookup.
- Fix: Removed test code.
- Fix: Oops, compile error.
- Fix: Build status mods.
- Fix : Removed duplicate selected team from schedule.
- Mod: Changed build status indicators to look at the Jenkins status.
- Test build
- Test build
- Test build
- Test build
- Fix: Oops, somehow corrupted these .wyp files doing the last build.  Reverted to see if that helps the build scripts.
- Add: CardPrint.asmx code to enable additional stroke indices printing on Australian cards.  This should not change anything for NZ as we don't have any data in the NZCRStroke table.  http://service.micropower.com.au/tickets/81355
- Mod: ISG: When saving the API keys for ISG integration the system will also synchronise the courses to ensure that the foreign_system_id's point back to us properly. Add: ISG: We now accept bookings created in ISG.  This is untested as I am having trouble with ISG and some corrupt course records on their end (blocking).
- Fix: TabMembers page doesn't properly focus the search box.
- Mod : Fixed some odd styling issues in firefox with the contest results. Mod : Display the Semi/Final/Relegation Draw at the after the section draws.
- Mod: Updated arrow image used by news topic control
- Mod: Updated arrow image used by sub menu control.
- Fix: GolfLink Tier3 API changed without us knowing.  In this mod they made the DOB optional, and this broke the webservice parsing code.
- Fix: GolfLink Tier3 API changed without us knowing.  In this mod they made the DOB optional, and this broke the webservice parsing code.
- Mod: New Connector installer built to force per-machine mode for the embedded MSIs - this will hopefully get around the UAC problem we're currently experiencing on Windows 7 x64.
- Fix: Typo.
- Mod : If it is a finals round and there is only 1 round, do not show the "Round 1" text
- Fix: Moved the ComputeCountbackOrdinal() implementation from RussianRouletteResult up to the MultiPlayerResult ancestor so that we get the "team" countback calculation for all multiplayer competition types.  Ian from Waitemata reported that a 4BBB Both Genders competition (with the extra strokes calculation for playing different markers turned ON) wasn't doing the correct countback calculation.
- Mod: Restored "Book on Internet" / "Book on Kiosk" settings for Aus.  http://service.micropower.com.au/tickets/82253
- Fix: CardPrint.asmx crashes when you don't have all 18 holes in the HoleDetail table.  This was the case at Paraparaumu Beach, probably because ClubCMS didn't save all the holes into the db.  I have fixed the exception handling so that the real exception will get logged, and also updated the code to handle the case where one or more holedetail rows are missing.
- mod : added 1 plays 4, 2 plays 3. ordered teams by entry, not by name.
- Mod : Finals contests were showing in normal sections
- Mod: Club Contracts are now stored in Amazon S3 so that we can access them from both the internal and public Adweb instances.
- Add: Upgraded the member search page to include a member quick search control so you can quickly jump to a club member.  About time someone did this.
- Renamed file.
- Fix: Stroke allocations were not being printed on cards properly for PLUS handicappers.  In fact they were designed not to print at all, but we parsed the course handicap incorrectly due to the plus in front.  I have fixed that problem and also enabled + strokes to print on the cards.  This needs testing for NZ as our stroke calculation is different and may yield incorrect results (why was this hidden in the first place I wonder?) Fix: SQL error in ScanImagePing().
- Mod: Updated styles of course details main table. Also includes fix for displaying one marker only.
- Mod: [NEEDS TESTING] Removed the EnableScanning option from the Connector configuration file, and instead start up scanning for all computers.  This gets rid of the problem where someone changes the SCS product for a club and then they have to restart the connector/reboot the computer to get scanning working.  I have built some sleep time into ScanImagePing so that clients that don't scan will only ping the server every 30 minutes rather than keeping the loop alive.
- Fix : changes to the for the TUC email
- Mod: Removed the UpdatePanel in the GLTest.aspx page as it was throwing weird JS errors in some cases.
- Fix: MemberQuickSearch: If you type a letter, then quickly backspace and type another, the popup disappears and you can't search until you try again slowly.  Probably not an issue for people in production but it sure pissed me off.
- Fix: api_AddScore: Adjusted scores were not calculated properly for PLUS handicaps.  Zendesk ticket http://service.micropower.com.au/tickets/80968.
- More iSeekGolf integration work.  Some of this affects existing systems (POG locking of timeslots); please read below. Add: New mechanism for locking timeslots based on a string unique identifier.  This involves the new TBLockEx table which maps LockingMemberId values to unique strings.  We need this because there is no "int" field that identifies an ISG user. Mod: Refactored the timeslot lock code in PointOfGolf.Services and extracted it to TeeBookingHelper so that I can use it for the ISG integration.  Eventually we'll put this in a shared API but at the moment I haven't completely cracked the architecture yet, and ISG needs to keep moving.  The way the code is structured now will make the introduction of the API service reasonably easy. Fix: Club API and User API were being confused; I've gone through these now to ensure the right value is stored in the right parameter, passed over to the correct ISG endpoint.
- Mod: Updated styles
- Mod: Append br in between home club names
- Fix: Layout issue because of the ad space in Members tab.
- Mod: Updated image
- Add: Hastings mobile style
- Add: North Shore mobile style and images
- Mod : Updated Rounds to Contests
- Mod: Under terraces_mobile, removed UResults.css. It's not needed.
- Mod: comment line of AddMouseOverHighlightScript (not needed)
- Mod: used bootstrapcdn instead of own font awesome css
- Mod: added .club-message
- Mod: Add UResults.ascx
- Mod: add knockout--used by UResults control
- Add: Create a copy of UResults control for mobile site. This is used to display new competition results. Also modified styles, etc.
- Mod: Add css class to message
- Mod: removed style for button
- Added competition Columns
- Mod: add class for a button
- Mods : Updated score entry sorting and added (R) next to match seed
- Removed test span for jenkins
- Testing Jenkins build
- Mod: Updated image
- Mod : updated queries.
- Mod : updated score entry to have contest numbers. Mod : updated setup to include number of contests per round and number of reserve contests per round.
- Add: Hastings mobile site images
- Mod : added for and against stats to results table. also added contest numbers and a reserve contest indicator on the contest results.
- Mod: Updated image
- Add: Hamilton's mobile css and images
- Mod: There was not commit tran after beginning the tran in api_AddMember and calling off to UpdateMember
- Mod: Since we changed api_AddMember, we also need to change this. We possibly could remove this from the validation, but at this stage with so many other changes we left it here for safety.
- Mod: Added header info into ISG notification handler for debugging.
- Mod: Changed proc name from sp_ to wa_.
- Converted the script to a proc to run in a SQL Job.
- Fix: [Remove from Competition] button broken by Edge styles - had to remove the help bubble from this button as that was what was causing the trouble.  When I have time I'll come back and put the bubble back...
- Fix: Removed set height of controlContainer (which makes the contact details control overlap with the footer area)
- Mod: Updated Templeton logo header
- Mod: In ClubCMS we now look up member and cmember records based on the AltMemberId rather than the passport username.  We now don't create duplicate members and cmembers, just a duplicate passport record pointing to the original member records (in the case where the same person logs on to the club website with a new username or NWA)
- Fix: simple typo...
- Fix: Modified the way that api_AddMember conditionally calls api_UpdateMember to update a) old GolfLink-retrieved CMember+Member records and b) old ClubCMS login CMember+Member records.  This is so that the bulk upload from PG7 happens more seamlessly and our data stays nice and deduplicated.
- Mod: 1) Put the Pro Shop phone on top 2) Rename “Pro Shop Phone” to “Pro Shop and Tee Bookings Phone” 3) Rename “Phone” to “Club Management Phone” 4) Hide the Club Management Phone and Fax label rows if they’re empty.
- Fix: When booking a Non Affiliate with a guest online - they were getting charges the non affiliate junior green fee. This is because they neither have a memberid or nonaffiliate id, and it was never being initially set in the SP.
- Fix: Put ads back.  Oops...
- Fix: Edge styles: Tee Booking Template Create button styles.
- Added sql script for baseline insert for TUC email job.
- Added sql for tuc email log table.
- Fix: Make the disabled button style look a bit better by getting rid of the blurry text shadow and the remnants of colours from the underlying styles.
- Fix: Edge styling: Show cell borders in the draw generator - the draw sheet looks silly without them
- Mod: Changed @currentaltmemberid to bigint to match CMember.AltMemberId definition. Mod: Added explicit ORDER BY statements to the @UID selects so that we get consistent CMember records returned (eg. if there are previously resigned records at that club, or duplicates without AltMemberIds created by ClubCMS)
- [For mobile pages only] put back ScriptManager control
- Remuera mobile site images
- [For mobile pages only] Handle admin users.
- [For mobile pages only] Handle admin users. Display only links to mobile pages
- For mobile pages only: removed edit page link and admin controls not needed. Because "Edit this page" is already available at the footer control for admins)
- For mobile pages only: removed edit page link and admin controls not needed. Because "Edit this page" is already available at the footer control for admins)
- Added sql for Two Under email job.
- Mod: Updated DotGolf Live User Manual with new screen shots.  I have also removed/updated outdated sections of the document as necessary, including the NGSE score entry control among others.  As part of this I have extracted the Bulk Email and Tee Booking documentation to put in another document which is more targeted to Next Gen / Edge clubs (and can also be Aus compatible).
- Fix: hide competition settings for non-NG clubs.
- Fix : Member stats on home page were not totalling up correctly. wrong fields in the dataset were being used.
- Fix: Added SetClientBrowserParamaters to the kiosk master page so that kiosk tee booking works in other timezones.  As part of this I moved the code into the Shared/js/Standard.js library.
- Mobile Site - Remuera updates
- Add: Release notes.
- Fix: Restrict S3 upload to NZ only for now as we only have 1 api key.
- Fix: Edge styling: Display issue with buttons in popup dialogs.
- Fix: When you pre-print cards for a single-card team competition (OneCardPerTeam==true) the team names are automatically entered into the Pre-Registrations list as if they were individual players.  This opened up a can of worms because there are currently other problems with Foursomes etc competitions, such as the inability to edit a score.  Looking into these soon.
- Test: LoveGolf build.
- Test: LoveGolf build.
- Fix: Oops, error in handicap index fix.
- Fix: Player Registration was not parsing plus (+) handicaps correctly.
- Fix: Score card viewer wasn't showing Aus scanned cards due to a hardcoding to live.golf.co.nz.
- Fix: When importing players from a CSV file and the country code is invalid or cannot be found, the line errors out with "Sequence contains no elements".  This is now working properly (nulling out the country when the code cannot be found), and it has been improved to also match countries by name. Mod: An error code would appear ERR_ALREADY_REGISTERED instead of the proper English error message.
- Fix: Added replacement tag into release notes to support Aus.
- Fix : Aus Pennants - members were not being found because the members category has not been assigned. Updated the query in a left join on the category so that the member can still be searched.
- Fix: Aus: Removed the Next Gen check for ULogin to allow us to upgrade existing PG7 clubs to NG without their members being blocked from logging into the club website.
- Add: iSeekGolf Tee Off Interval sync based on the idea that we will only create tee times in ISG when we first create our timesheets - and only update ISG when the timesheet is completely deleted.  Any individual timeslot updates won't be sent over as ISG simply doesn't support that model. Mod: When you save the Club and User API keys in the iSeekGolf settings, we will automatically call to TTM and update the Notification URL so that ISG can start talking to DotGolf for making bookings.
- Add: iSeekGolf Notification Handler which currently only logs requests.  We need this in production so that I can grab the notification messages being sent to interpret them properly.
- Mod : defaulted email and print flag to false. Also made the emails address to the club email, now Dawyne@golf.co.nz
- Mod: Ensure we return the correct UID if we successfully call api_UpdateMember
- Mod : Added message to show when cutoff date has passed.
- Mod : Hidden link when cut off date has passed.
- Mod : Updated levies to include the cutoff date for levy changes. Mod : Updated some levy queries to exclude any deleted changeset history
- Mod : updated XeroSync query.
- Mod: SCARY COMMIT! This change was made for Aus, to allow an already existing member in the database to be linked to PG7. So rather than Adding a member, it calls through to api_UpdateMember
- Fix: Show "Override opening day/time for kiosk" option for everyone, not just NZ.
- Mod: Change the way S3 Exception records are deleted as the bulk delete didn't work very well for me.
- Fix: Further problems with older pages like the New Member wizard (continue buttons)
- Fix: Styling improved for LoveGolf pages in DotGolf Live, and also corrected some typos.
- Edge styling fixes. - Delete button styling - Button alignment in bubbles for POG and SCA
- updated image
- updated image
- junior golf nav image
- Mod : Updated XeroSync to rather do one request to xero for all invoices recently modified.
- add css class "contact-email" to email address
- smaller font size for RAGC's email address
- Fix: Removed release notes style again as we need a proper gradient one.
- Fix: Use tag replacement for product name in release notes widget.
- Fix: Release notes box styling for edge.
- use bootstrapcdn for font awesome
- Up'd the thread sleep
- Mod : changed certficate contructor
- Mod : Updated the process of sending invoices to Xero. added a Thread sleep(1200) and more error logging.
- Mod : Fixed Checkboxes not checking all items. and removed any other MYOB references.
- sponsor images 400px width
- Fix: Remove the empty brackets () when a tournament is for men only.
- Fix: Bulk Card Admin wasn't picking up on an existing RSEntryId for players pre-registered into a competition (via RSCompetitionEntry), leading to duplicate players in the player registrations list.
- Fix : Updated sql for fetching Invoice details.
- Add: Edge rebranding v1.  At the moment we've still got a problem with some of the buttons that appear misaligned (particularly ISG Save Changes; BCA add to competition etc).
- Added XeroApi.dll
- royal auckland mobile pages images
- changes in relation to personalizing the club mobile site pages' colours
- Mod: Change the getdate() to the date for comparing the maximum number of rounds.
- Mod: Change getdate to the actual date
- mod : added update for the correct xero consumer key.
- Fix: Aus: GolfLink card swipe wasn't working because it was matching one of the NZ generic swipe card regexes further up the chain.  Modified the code so that AU has their own dedicated swipe regexes now.
- Add name of Competition Type. It'll be used instead of the ID (ID not the same for all db's)
- just make padding 1px less--to make it fit the body
- Use name of Competition Type instead of its ID (ID not the same for all db's)
- Fix: Removed silly ROLLBACK from script.
- Mod : reverted Golflink webservice url to the sandbox url.
- Mod: Add in checking for age. This was not working for any Edge clubs, for either online booking or green fees in the SCA/POG
- Mod: Show marker name next to competition name.  We've done this for all clubs even though only Tauranga really needs it - but at the time we felt it's a nice feature so all clubs can just have it for now.
- add condition to handle scores for 9 holes only
- ddlRound - append back the date with the round number
- Mod: Change default number of days in the grid to 16 for Aus.
- mod : added loading wheel to page.
- csproj changes
- Mod : Changes to the Levies System.
- mobile styles
- close the link and meta tag
- updated for the mobile site theme personalization
- updated for the mobile site theme personalization
- updated for the mobile site theme personalization
- Fix: GolfLink swipe cards have the format ;xxx? and we were not looking for the semicolon and question mark.
- updated style for new topic / new article icon
- news - new topic icon
- removed
- updated/added News and Facebook Like styles
- Add: 4 player combined stableford competition type.
- REVERTED Mod: Try to fix build on dev1 - sgen.exe is broken for whatever reason.
- Mod: Try to fix build on dev1 - sgen.exe is broken for whatever reason.
- Add: Index for performance.
- Fix: Added back a regression - isnull statement gone missing.
- renamed love golf image - for quick navigation links
- quick nav love golf image
- Fix: Stripped out the old book.golf.co.nz administration functions completely and replaced by links and auto-redirects to DotGolf Live - clubs should have been using Live for these functions since a looooong time ago.
- Fix: Invalid cast exception when viewing an exception that is not yet uploaded to S3.
- Fix: wa_DeleteScore proc was missing the call to BMW_ProcessScore due to a scripting stuff up in November last year.
- removed link to Droid Sans
- added slash to close the link tag
- removed the css class added. not needed anymore.
- Fix: Oops, left a select in there.
- updated styles
- Mod :Updated the Lovegolf toolkit URL from http://lovegolf-toolkit.de-construct.co/ to http://toolkit.lovegolf.co.nz/login
- Mod: Refactored Competition Type help boxes to use a HelpUrl stored on the CompetitionType table rather than CompetitionTypeIDs that may get out of sync between databases. Add: Gross Stableford (Off Scratch) and Gross Stableford (Handicap Adjusted) competition types to get rid of any possible ambiguity with the current Gross Stableford type.  Help boxes were also added for these 2 types.
- use Club Full Name for the page title instead
- add cssclass to lblNoArticles
- fix for handling eclectic results
- maxJsonLength
- fix for displaying eclectic results
- add link to font
- updated image
- cleanup, added weather styles, updated font
- Mod: (finally!) Allow users to use the keyboard while searching for a member with the Member Quick Search control.  Cursor keys up/down will move a cursor over the result set, and Enter will select the person currently under the cursor.
- Add: Course name to the top of the draw report.  If multiple courses, we show a list of courses.
- Fix: Clubs should not be able to access NZ Golf (association) competitions, much less change things in Competition Setup.  This will now throw an error if a club tries to go into an NZ Golf competition dashboard.
- Fix: SIC crash when trying to edit a score for a member for a date when their handicap was not yet available (eg. before they joined/played their first score).  In this case the Member.CalculateHandicap() method returned NULL which crashed out the code looking for a string in the handicapIndexText property.
- Merged revision(s) 16123 from Trunk: Fix: Delete code wasn't working. ........
- Fix: Delete code wasn't working.
- Add: AWS SDK libraries.
- Add: Oops, missed exception log uploader.
- Add: Oops, missed exception log uploader.
- Mod: iSeekGolf: Course sync now works properly; TeeOffInterval sync is not but that is because of the performance test failing on their end.
- Fix: Stroke allocation was being calculated incorrectly for + handicappers, for Aus.  This was because of changes introduced with the Additional Strokes mods.
- added sponsor logos
- Fix: We were expecting "female" but getting "Female" in the member services api.  This caused female members to be switched to men when they log in to the club website.
- Fix: Log method not working correctly.
- style updates
- mangawhai pagination arrows
- mangawhai arrow down
- slideshow images
- Add: more logging.
- Fix: HTML tag brackets stuffed up the table structure for the log viewer.
- Add: Extra logging to troubleshoot ladies gender fields changing to male.
- Fix: Workaround for problem with IE where tee booking doesn't get logged in correctly after a Set-Cookie and Location header is passed in the same response.  Stupid IE!
- Add: Release notes.
- Fix: Back link showing as "undefined"
- Add: Function to nuke all subscription system membership data from the database for a club.  At the moment only Walton is allowed to use this as they basically use our subs system as an invoice printer.
- Add: Log Add: _log viewer (Diagnostics Log).
- Add: More detailed logging code for MSP stuff, upgraded Database.Log and _log to log the IP address of the client also.
- Add: _log.IPAddress column.
- removed unused code
- code clean up
- mobile styles for remuera
- Mod: Competition Entries report extended to have a "pre-registrations" mode which will list players even before they have entered into a segment.  This will be useful for clubs to do the division splits.
- Fix: Aus: When a player is in at least 1 4bbb comp where there isn't a singles comp type, their score will never be sent to GL, even if they are part of other singles comps with the same scorecard.
- Test: Build fail?
- Fix: Missed this file commit out somehow.
- Add: iSeekGolf: Settings page to change ISG API keys (user and club) as well as storage of these values in the database against a club. Add: iSeekGolf: Product ISG added for Australia.
- Add: ExceptionLog.UploadedToS3 column in preparation for S3 storage of exception text.
- Fix: Removed method from ScoreLogicStableford - should have been removed before.
- correct the date format from "d" to "dd"
- Mod: Refactored ScoreLogic code to move the CalculateAdjustedPar method up to the base class - because it is used by both Stableford and Net calculations. Fix: As part of this mod I got rid of the old Net adjusted par calculation which wasn't updated for the new additional strokes (Aus).  This now uses the new function so should work properly.
- removed unused files
- 
- added roboto regular
- used Roboto Regular font
- added Roboto Regular font
- Add: ExceptionLog.UploadedToS3 column and index.
- Fix : Halved now spelt correctly, Removed HcId from the team maintenance.
- Fix : updated to allow nsw to update scores after the 48h
- Fix : Search link at the bottom, and added "Golf" into the results page for found clubs
- Add: Quick spec for Org Levies Xero integration.
- Mod: Just added basic div tags to the welcome message for admins.
- updated arrow
- updated
- updated homeimage
- style updates
- Fix: Removed accidental project file reference to TTMRepo.cs.
- Add: System.Net.Http.HttpEntityClient packages and references to allow us to add REST clients into DotGolf.Shared with some type safety.  This is in preparation to adding the Tee Times Manager (iSeekGolf) client libraries, but I'm not ready to commit those yet.
- Add: Trigger on CMember to delete any recurring bookings at the club if a member is resigned.  Also added an index on TBRecurringBooking as it was table scanning whenever accessed.
- Fix: Clubs using the MSP token based auth (Ballarat) members could not login due to int overflow and a logic bug.
- Mod: Prior to committing the transaction that saves the draw timesheet, we now do a check on the resulting data to make sure that it all makes sense (specifically to ensure there are always <4 players in a slot).  If not, an error is displayed.  This will hopefully avoid the "GUID5" problem in the future by stopping the garbage going into the database in the first place.
- Open Sans font
- add checking if competition is multi player. add link to hole by hole score if not multi player.
- Fix: Stroke calculation in SIC was wrong for Aus clubs with no additional strokes configured.
- Mod: Give stroke allocation boxes different shades of colours depending on how many extra shots a player gets on a hole - so it's easy to see for checking scores.
- Fix: Avoid the "Duplicate key violation in RSCompetitionRoundSegmentEntry" error by checking for existing records before attempting to insert another.
- Fix: Connector Installer: Make Arial Narrow fonts permanent. Mod: Make Stroke Index boxes slightly larger, and reduce font size so that Aus style "1/19" strokes will fit.
- Fix: Kiosk was crashing for non-affiliated visitors entering scores (where there is a null surname).
- files for Mangawhai. copied from Waitemata (used as template)
- add link to hole by hole score for single player only
- added fonts
- added one line - link to font awesome css
- added fonts
- 
- Fix: Error in SIC while working out the adjusted gross for Aus for the 19th stroke hole (where additional stroke indexes are configured).  Talk about a fringe case!
- Add: new Green Fee Snapshot view.  This is intended to give us a view of DGE greenfees while in the Next Gen upgrade process.
- Mod: "Ring Support Only" for phones.
- Add: New "master installer" for Playtech to allow them to install a connector a) prior to a club getting the LCP product and b) using a Club ID and Code rather than a username and password.
- Fix : PageAssetGroup was changed to Pennants when it should not have been
- Mod: Don't check for LCP for master installer (Playtech) installs - because clubs won't be set up with LCP or NG at the time of the PCs being installed.
- Mod: Show Code column on club dashboards so that Louise can send that over to playtech for connector installs.
- Add: A "master installer" mode for the connector installer.  This works by accepting a Club ID and Code rather than username and password.  We now only need to provide Playtech with a club ID and code to allow them to set up a Connector PC.
- Fix: Missing WHERE condition on green fee by year report (the silly chart one) - this caused data from other years to be superimposed on the single year report.
- Add: Error message for the case where a course has a 0 slope.  This happens occasionally for Aus and presents as a divide by 0 error - not very helpful for troubleshooting.
- Fix: For composite markers without a proper marker colour (like Plains - All Markers) - show a grey marker box so that everything stays lined up properly.
- Fix: Don't show the silly alert() box when we try to click away from the old start sheet while it is still busy loading.
- mod : removed some unnecessary console.logs.
- Add: WyBuild project file for live.staging.golf.co.nz.
- Mod : Changed the way schedules are loaded. to try and boost page load performance.
- Fix: The previous fix from rev 15610 (below) had a problem where it used the "No" attribute instead of "PlayerNo", this meant that if there were other players in the slot not related to the current ticket, those players would be considered when disabling the combo - this left it enabled for some bookings.
- Fix: The previous fix from rev 15610 (below) had a problem where it used the "No" attribute instead of "PlayerNo", this meant that if there were other players in the slot not related to the current ticket, those players would be considered when disabling the combo - this left it enabled for some bookings.
- Fix: The previous fix from rev 15610 (below) had a problem where it used the "No" attribute instead of "PlayerNo", this meant that if there were other players in the slot not related to the current ticket, those players would be considered when disabling the combo - this left it enabled for some bookings.
- mod : favicon... because i can.
- Mod : Taken out the Lydia image and replaced it with the Ask a question section.
- Mod : Updated menus to highlight green when page is active.
- Mod : Ordered matches by IsReservedMatch asc.
- Mod : introduced the 48h time limit to enter scores. Score entry will be disabled, but the user can still view the matches.
- Mod : added check for if the GL number is invalid, and returning a new visitor with the Surname as the FirstName.
- update checkbox image
- add remember me
- add map
- js updates
- added checkbox image
- Fix: Display problem when trying to edit a stroke allocation.  Example: http://snag.gy/tak0Z.jpg
- MSP fixes: Fix: Scroll to top when navigating in the iframe. Fix: Hide references to DotGolf system and website in the AU solution.
- Fix: Stroke Index calculation fixed for Australia.  This was broken when you have multiple stroke indices for different ranges of course handicaps (i.e. through the NZCRStroke table).  This needs to be tested fairly well because it affects the SIC, results and api_AddScore for both NZ and AU.
- remove meta tag
- Fix: Add missing fullcalendar.css stylesheet for mp_snippet template.
- Fix: Changed width to 725px.
- Mod: changed snippet iframe width to 825px for Ballarat.  We'll figure out a way to do this permanently/via a setting later.
- fix : Spelling mistakes and knockout error fixed.
- Fix: A threading issue was abandoning the session before the tee booking control could load, causing a user to appear anonymous rather than logged in.
- Fix : Bug fixes and styling changes
- Fix: Send scores from the same competition but 2 rounds on the same day up to GolfLink as different DSR groups, because they don't allow players to have 2 or more scores in the same group.
- Fix : blank users were being returned for golflink numbers that do not exist. added an extra check for nul GLVisitors.
- images for the slideshow
- Fix: Mutex should not be initially owned because we do a WaitOne().  Doing this with an initially owned mutex will cause abandoned mutex exceptions when subsequent cache calls happen.
- Mod : added in back links for the different Views. easier navigation.
- Fix : During the refactor, I broke the scores on the match results. now fixed. Also removed some unnecessary js code.
- Comment two widgets - FB and NZWomensOpen
- Mod : refactored the way Match results are loaded. now loaded on demand and not at page load. Performance tweak.
- sp for mobile pages deployment
- mod : If the webuser is in the PennantsClubEntry role. hide the account settings link. Because all the clubs share one login, we do not what a club changing the password.
- Mod : removed reserved matches from any scores
- Mod : Updated results styling.
- Fix : Fixed the dropdowns, they now update... woohooo! Mod : did some performance changes as well.
- update CuteEditor from 6.6.0.0 to 6.7.0.0
- update CuteEditor from 6.6.0.0 to 6.7.0.0
- added slideshow
- added slideshow
- for the slideshow
- added slideshow control
- fix : broke JS
- 
- Mod : Updated News Events.
- Fix: Course Handicap was tiny due to mods in Aus stylesheet.
- Add: Aus: New product CWTP to hide the ClubCMS tab for clubs where the 3rd party integration is used (with Member Services Portal integration).
- Mod : Updated Why Lovegolf images.
- Fix: CreditNoteInvoice records were being duplicated causing ever-increasing outstanding balances being shown on invoices.  This needs a publish and some cleanup.
- footer style update
- Fix: green fee report (the badly implemented chart one) was not showing all the years in the dropdown, and it was not considering next gen green fees when filtered by year.  Also there were display issues with fitting the chart on the page - I have addressed these with a slight hack with a zoom style, but this won't work in all browsers.  This really needs to get dumped and rewritten from scratch using a proper javascript chart rather than the activereports stuff.
- separate the mobile items
- mod : Updated search
- Mod : fixed links on Club Page.
- Mod : Updated News article.
- clean up style
- clean up
- Mod: Refactored MSP code to extract the simple REST client into a separate file so we can re-use it for TTM/ISG/RITA.
- minor css updates
- Mod: Add datefirst to ensure the correct category days are being checked. Can't believe this has never cropped up before now - especially the OLD TB, not even NG!!!
- Mod: Add datefirst to ensure the correct category days are being checked. Can't believe this has never cropped up before now!
- updates based on code review
- updates based on code review
- updates based on code review
- updates based on code review
- updated filename
- Mod : Added Links to bottom of FAQ
- Mod : Updated FAQ and Social Links
- Mod : Added banner image slides.
- club specific css
- Mod: added article image.
- Mod : Added news & events section back. Mod : More styling changes for Jan
- images for the mobile pages
- Removed Cobra site take-over
- updated settings
- Mod : updated the display modes to have a draw & results mode.
- Mod : Added PennantsClubEntry = 38
- changes related to the creation of mobile pages
- changes related to creation of mobile pages
- changes related to the creation mobile pages
- changes related to the creation mobile site pages
- Fix: Avoid an error message when trying to edit the registration details (tournament registration) for someone who used to be an affiliated member but is no longer active.  Because of a call to Member.GetLiveHomeClubMember() this page would not load.
- changes related to the creation mobile site pages
- changes related to the creation mobile site pages
- changes related to the creation mobile site pages
- 
- mod : Styling changes
- Mod : Updated Getting started styling.
- Mod : Removed the hard coded Competition name. Mod : Some css Styling changes.
- Add: Final version that exported results to the ALPG for the NZ Womens Open 2014.
- Add: Birdies competition type.
- Add: Birdies competition type.
- Added table Sql Script for lgCampaignEmailLog.
- Mod : Updated the GettingStarted pages with the 3 banners at the bottom. Mod : Fixed the way club emails were being sent.
- Add: Net Birdies competition type; this is a hole list competition type just like Net Eagles, except this one will give you a point for every birdie or better.  I.e. Stableford points of 3 or more on a hole.
- Fix: GL: Uploading ladies scores did not work when the first batch uploaded contains mens scores.
- Fix: News page was showing duplicate news articles.
- Fix: Handicap parsing didn't handle "Unallocated" handicaps (Aus)
- Add: Retry upon deadlocks when calling GetResults().
- Fix: GolfLink Upload page was incorrectly setting all scores to Non Standard Entry the first time the user opens the page.
- Mod: Changed footer logos.
- Fix: News page was showing duplicate news articles.
- Fix: Front page was showing duplicate news articles.
- Fix: Only show GolfLink tab to Aus clubs.
- Add: Output statistics into ProcessResults.ashx - enable queue length output by adding &stats=true to the query string.
- Fix: Changed ExecuteScalar() to ExecuteNonQuery as a result is not always returned.  This caused a crash in the GolfLink StartOfDay.
- Mod: Add WITH(READPAST) into RSResult cache check for TournamentCMS
- Mod : Added Why LoveGolf video.
- Mod : Site take-over - Cobra (1 feb - 3 feb)
- Mod : added links on getting started pages
- Mod : Updated the Clubs user security to work from the users role and not by username.
- Mods : general bug fixes.
- Mod : Updated content on getting started sections Mod : Changed the order in which the memberships are shown, by membership price desc Mod : Added the new google tracking & adroll tracking.
- Fix: SIC - enforce maximum course handicap of > 36 (men) or > 45 (women) - for Aus, as per GA Handicapping rules. Fix: GolfLink upload screen was showing course handicaps greater than the maximums.
- Fix: Stop scorecard printing a course handicap of > 36 (men) or > 45 (women) - for Aus, as per GA Handicapping rules.
- Fix: Stop results working out a course handicap of > 36 (men) or > 45 (women) - for Aus, as per GA Handicapping rules.
- Mod: Changed the site config to have Lydia's image being first. Had to do this quickly, with so many fires on at the moment!
- Mod: Intentionally broke the password so that someone doesn't accidentally run this from dev.
- Add: Missed files, and ignored bin and obj folders.
- Add: Initial version of ALPG Results Export to FTP utility.  This is designed to be run from the command line every 2 minutes.
- mod : Updated Results Queries
- fix : Fixed bug that was introduced when refactoring the breadcrumbs
- 
- 
- Mod: Add permissions for ClubUser on Pennants
- mod : updated to use web.config db keys.
- Mod : added the one IFrame version of the results page.
- 
- Added nsw watermark
- Mod : Updated pennant breadcrumb styling. Mod : Updated DotGolf Logo to include NSW logo as well. Mod : Added page watermark image.
- Fix : fixed the way NSW clubs are being filtered.
- Fix: GolfLink upload errors are now correctly reported to the client and shown in a jAlert box so the user can decide what to do with them.
- Fix: Scores were appearing for other clubs in the GolfLink Score Upload area.
- Fix: When clicking CANCEL on the Marker Defaults screen, nothing happens.
- Add: tournaments import from CSV spec.
- Fix: If you save course changes using the /ClubCMS/CourseUpdate.aspx page, the Slope would be replaced with a default value of 113.  This used to be okay before we moved to slope, but it sucks now.
- Add: StartOfDay data logging so that we can troubleshoot the incorrect Slope/Scratch ratings for Aus courses.
- Added Sql Scripts.
- Added pennant dotgolf image
- Mod : Updated Styles to Pennant Style for Aus
- Mod: Hide "Create new member" link if you have the API product.
- Fix: Another stroke mod problem - should be modding by 19, not 18.
- Mod: Print Scratch Rating and Slope on Australian scorecards. Mod: Hide GolfLink Upload JSON output from everyone but DotGolf.
- Fix: Changed NZ handicapping terms on leaderboard to use the localisation filter.
- Add: Index for performance.
- Add: Call to MSP token expiry API endpoint if the user clicks the Logout link.
- Add: UMSPLogin control to allow calling MSP API for authentication. Mod: OMSFrame can now read the TeePlus API URL from the Web.config file.  This is so that we can call the staging environment for testing. Fix: JWT parsing wasn't working all the time - padding wasn't the right length.
- Fix: In some cases the Net Eagles competition type caused an int overflow in the ScoreOrdinal calculation.
- Mod: Changed DataCache locking mechanism to use the datakey for locking rather than a static object - this should let multiple threads only lock up the particular item in the cache rather than every cache request.
- Added SQl Mods
- Mod : Added Withdrawn for teams. Mod : Added tournament heading to breadcrumbs
- Fix: Removed more code being called for no reason - stuffed in a variable that was never used.
- Add: Indexes for RSResults performance.
- Fix: Cleaned up - removed a few bits of code that are just wasting CPU cycles.
- Fix: When a competition is in the future, allow user to load up the leaderboard showing only the first round.
- Mod: Only process the latest existing RSScore for a result rather than processing all of them in sequence.
- Add: ?quickrefresh=n parameter to Leaderboard query string - you can control the number of seconds to wait between refreshes manually, for testing.
- Mod: Store LoveGolf image service url in the web.config file instead. Add: some indexes for performance.
- Mod: Changed webservice reference to the production URL - Chris will make a mod later to fix this for dev.
- Fix : Updated Lovegolf progress control to use new LoveGolf ImageService
- Removed unnecessary key.
- Fix : Added Web references
- Fix : Updated the LoveGolf Service Name
- Add: IX_DrawCompetitionRound_DrawId_CompetitionRoundId_DeletedDate for performance.
- Add: IX_RSPlayer_RegistrationId for ORG registrations.
- Fix : Updated the way images work, because of Live/Edge, images where the clubs are on edge are not saving to the correct location. Modified to use the new ImageService in the LoveGolf project.
- Fix : Added an image service to upload ClubImages to the site. also to get the status of an image.
- Fix: Removing players from Competition Entries did not work if the player being removed is part of a deleted drawtime.
- Add: Cache buster tags for jqWidgets upgrade.
- Add: Upgraded jqWidgets to version 2.8.3.  License key 9E81AE6C-7048-4031-AE23-5E23846A4EB0.
- Mod: Removed jqwidgets in preparation for upgrade.
- Fix: Erroneous message when entering teams into a foursomes (or other teams comp) and trying to print cards where the comp is set up not to allow nonaffiliates.  (Teams were seen as non-affiliates because they don't have a central member code)
- Fix: For clubs with the NPM product - they should be able to change members to Non-Playing in Levies.  This SQL had a logic problem where Non-Playing would never be shown if ShowHidden=0.
- Fix: For clubs with the NPM product - they should be able to change members to Non-Playing in Levies.  This SQL had a logic problem where Non-Playing would never be shown if ShowHidden=0.
- Fix: Add ?token parameter to IFRAME source as we don't get the X-Auth-Token header.
- Fix: A little refactoring and tweaking to make the Member Services Portal integration work with the fixed up tokens.
- Fix : Fixed some Pennants issues that werent working on the production enviroment.
- Fix : Fixed some Pennants issues that werent working on the production enviroment.
- Mod : Added Pennants Changes
- Mod: Removed GolfLink competition round upload widget and page; we don't need this for the new GA Handicapping.
- Fix: Stableford points not being calculated correctly on the 18th stroke hole.
- Add: Logging to _log so we can grab hold of the tokens being sent to us.
- Mod: Changed to use the new memberid claim in the tokens as per new MP spec. Mod: Applied changes to match new API spec by MP.
- Debug: Add token details.
- Mod: Use the token as passed in the X-Auth-Token header.
- mod : Added link to LoveGolf toolkit
- fix: Oops, URL typo broke this.
- Mod: Accept a ?token parameter as part of the /Menu call so that we can pass it through and include it in the links rendered for the menu.  This parameter is optionsl and the client may choose to append them later. Mod: Render out the fully qualified links rather than just an absolute path.
- Fix: Global search actually works now. Mod: Filter page controls on the controls for the current layout, otherwise we get errors if the _Global page uses a different template than the page we're editing. Add: Capability to search for a score card by player name, card no and club.  Clicking through on the detail shows all the data from the card, competition entries, and the scanned image (if club uses DotGolf Edge scanning)
- Add: Member Services Portal code for Micropower.  This adds both a service which can be called by Micropower to get menus, expire tokens and load control snippets, and also a special template we can use to only render a specific control out to Micropower.
- Add: Show "(open to ladies only)" for women-only tournaments on golf.co.nz.
- Fix: Some things in the course maintenance areas, like NZCRData inserts being done without column names, Slope / CourseRating getting transposed. Fix: Start of day was inserting a course with a blank name into Course for clubs with single locations (GolfLink being silly passing us a location node)
- Fix: api_AddScore was using Stroke % 18 so the 18th stroke hole would get a stroke for anyone.  Stroke % 19 is better because 18 % 19 == 18, not 0. Fix: SIC was also doing the above, only in js.
- Mod: Increased GolfLinkStartOfDay script timeout to 15 minutes.
- Mod: Cleaned up unnecessary schema script.
- Fix: Pre-print: Incorrect join on RSEntry.DisplayCode caused an int conversion problem when running for Aus.
- Added script files for Pennants
- Mod : Added pennants mods so far.
- Add: Newtonsoft.Json.4.5.11 package into DotGolf.Shared to get rid of the build errors.
- Add: Newtonsoft.Json.4.5.11 package into DotGolf.Shared to get rid of the build errors.
- Mod: Cleaned up the schema scripts to apply to other databases.  This has now been applied to the NZ9 dev database.
- [MAJOR] Merged 2013-09-25.golflink-new-handicapping back into Trunk after preliminary testing.  This changes Trunk to work with the new GA Handicapping system.
- [MAJOR] Merged 2013-09-25.golflink-new-handicapping back into Trunk after preliminary testing.  This changes Trunk to work with the new GA Handicapping system.
- Mod: Removed the Ring Everywhere setting and put some text in there explaining that you now dial *40 for OFF, and *41 for ON.
- Fix : Updated the query to ignore categories if they get deleted so that they do not show on LoveGolf.
- Fix: Date_Deactivated being set to a future date means that the member will be inactive on that date, not that they are already inactive regardless of the value - changed IS NULL checks to compare the date against GETDATE() instead.
- Fix : Keywords were not being removed/editable when clicking back from the results page.
- Add: Looks like the category was never being deleted through the API. Added in a delete statement, with a clubid where condition just in case...
- Add: IX_RSResultEntryScore_RSScoreId_DeletedDate for live scoring performance.
- Add: Indexes to speed up live scoring for 5CC.
- Fix: Catch broken club logo for Score Listing by Day report.  Really need to port this mod (or a better refactored version) to all reports, but committing it only for this report (for the record).
- Fix: Need GO statement in there for this script to execute successfully.
- Mod: Improved look of ViewTicket page to make it easier to troubleshoot these TBP payment issues.
- Add: Initial version of the Payment Reconciliation report.
- Mod: Check whether the timeslot has been deleted too for the group booking
- Mod: Make scorecard creation thread safe by adding WITH(UPDLOCK, HOLDLOCK) to the CardNo, CycleNo and ScoreCardId selects.
- Mod: Send TransactionFee value into NZGreenFeeData so we can use it for calculations.
- Fix: Null start tee caused an exception when viewing the tournament dashboard for Toro Interprovincial.
- Add: "Site" attribute to the booking document so we can easily tell where a booking was created from.
- Add: "Site" attribute to the booking document so we can easily tell where a booking was created from.
- Add: "Site" attribute to the booking document so we can easily tell where a booking was created from.
- Fix: Aus: Wasn't subtracting the client browser offset for calls go GetTimeSlotsForDayAndMemberEligibility() for the kiosk tee booking component.
- Mod: Exclude /email/link/xxx/xxx/index.htm from TrackerLog for space considerations.
- fix : defaulting the date broke other parts of the report. Just applied a Case statement to check the type of booking it is, and default the greenfeecount to 1.
- Mod: Reverted Toro site takeover,
- Fix : report was counting bookings for 'Group Fee' bookings instead of showing 1. I have defaulted the slot date for Group Fee bookings to the same date, this will force only distinct rows for Group Fee bookings.
- fix : checking dates was incorrect.
- Mod: Moved the Visitors Report into the Card Printing section of TabReports.aspx
- mod : added Under Construction to pages for which we have no content yet.
- fix : rather check vitual flag on scorecard, not printed.
- Mod: TrackerLogDetail.aspx now shows the IP address.
- Add: Patch file to keep a record of my performance optimisations to be applied in the new year - RSResultEntryScore saving deferred until result save.
- Add: TrackerLog.IPAddress column and code to save the client's IP address for every request.
- fix : updated report name and added subtitle.
- fix : updated report name and added subtitle.
- fix : reverted CuteEditor License files.
- Mod: Bunch of performance optimisations to the ScoreModelService - mostly to do with holding on to variables once they've been loaded and initialised, but also taking advantage of Parallel.Invoke when doing a number of long running queries. Mod: Always return NZCRData.StartDate and EndDate when loading as these fields are used often. Mod: Cache DisplayMarkerName once it has been loaded.
- mod : added svn version to footer
- mod : added logging to Email form. Still no email being sent so far.
- mod : added google analytics code to master page.
- Fix: Oops, missed "GO"
- Add: Indexes for performance of course retrieval for SIC.
- Mod: Use WITH(READPAST) to stop SQL locking when there is a result being inserted into RSResult - instead this will now retrieve the maximum unlocked CreateDate for us to check.
- Mod: Use WITH(READPAST) to stop SQL locking when there is a result being inserted into RSResult - instead this will now retrieve the maximum unlocked CreateDate for us to check.
- Add: Stats timer to Result.GetResults() method so that we can get a baseline for how long this takes.
- fix : Side menu was appearing over popups. updated position:static
- Mod : Updated the Embedded Images Option in Club Settings to be DotGolf Only Section.
- Mod : added a Club Setting, EmbedImagesInBulkEmail, this is a global setting for Bulk Emails to either embed the images in the email or to leave them as Http Urls.
- fix : updated image sizing.
- Fix : Seems that its looking for an invoice in the BookingDocument, when there shouldn't be one. I checked if the invoice is null.
- Fix : CuteEditor was hardcoded to use a specific version of CuteEditor. removed this.
- Emergency fix to stop unauthorised access to web directory files via the UStyles.ashx script.  This commit is a test, I have to fix a few other places too.
- Emergency fix to stop unauthorised access to web directory files via the UStyles.ashx script.  This commit is a test, I have to fix a few other places too.
- Emergency fix to stop unauthorised access to web directory files via the UStyles.ashx script.  This commit is a test, I have to fix a few other places too.
- Emergency fix to stop unauthorised access to web directory files via the UStyles.ashx script.  This commit is a test, I have to fix a few other places too.
- mod : excluded Nomads from seeing the LoveGolf link.
- Fix: Committed another GLMember.GetDetails method to mimic the obsolete one to avoid breaking DotGolf Live.
- Add: Ability to do GolfLink member lookups as an Association.  You just need the GL clubID and Des Key set up in the Settings table against your AssociationId.
- 
- Fix : Group Bookings, Fixed Fee, now show on the report even if no players have been booked in the Group. This does not affect Pay Per Person Group Bookings
- fix :pdf print now works.
- Fix : Club image now showing.
- mod : added TabRptVisitorCounts to project file.
- mod : added Visitor report to project
- Mod : Added a Visitor report, showing number of visitors to a club over a time period
- Fix: Reverted an accidental change that should not have been committed.
- Fix: Bug where the TBTransaction.Amount would be over-represented.  We've previously fixed this bug in DotGolf.Public.2012 but never patched DotGolf.Teebooking.  Oops.
- Merge: Booking Fee code from Public 2012.
- Fix: Syntax error.
- Add: Best 2 multiplied by 3rd stableford competition type.
- Fix: Had to introduce a distinct into the wa_TBGetAuthorisationsToCapture query.  We now include deleted ticket entries and timeslot entries in the query and because of this, if a person is added, removed and added back to the same ticket, we got the same entry on the report twice - causing a crashbug in the Payments.aspx page.
- Mod : Updated CuteEditor to latest Version.
- Fix: Problem where the TBTransaction.Amount would not be saved including the transaction fee (from book.golf.co.nz)
- Merge: Ported $2 booking fee mod from golf.co.nz tee booking code in Trunk.
- Mod: Removed Version.cs.
- Add: Missing app.config, apparently this is required now.
- Mod: Improved ticket view in Adweb to include log and ticket entries.
- Fix: Don't let the user change the charged player from "ME" to anything else once the transaction has been authorised against the credit card.  We did this because we were getting too many issues caused by the test case where the charged player was changed (and the pog kept showing the dollar icon for the previously charged player).
- Fix: Don't let the user change the charged player from "ME" to anything else once the transaction has been authorised against the credit card.  We did this because we were getting too many issues caused by the test case where the charged player was changed (and the pog kept showing the dollar icon for the previously charged player).
- Fix: Don't let the user change the charged player from "ME" to anything else once the transaction has been authorised against the credit card.  We did this because we were getting too many issues caused by the test case where the charged player was changed (and the pog kept showing the dollar icon for the previously charged player).
- Fix: Don't let the user change the charged player from "ME" to anything else once the transaction has been authorised against the credit card.  We did this because we were getting too many issues caused by the test case where the charged player was changed (and the pog kept showing the dollar icon for the previously charged player).
- Fix: Member A books A and B in for a round of golf at North Shore.  A is a member, B is a visitor and gets charged a greenfee.  A pays online for that with his credit card.  Then later B can't make it any more and A cancels him out, saving the booking.  An hour later A comes back into the booking and adds visitor C.
- Fix: Include deleted ticket entries in the capture payments warning bubble - because we are now including deleted bookings in the Payments.aspx screen also, and don't want the two to get out of whack.
- Mod: Capture payments warning email will now show the count of tickets to be authorised, not transactions - this is so that it will now match the payment warning bubble and also the count on Payments.aspx.
- Fix: DFH+MBS If this is a paid transaction line (i.e. the booking entry is paid for by a credit card in TBTransaction) we don't allow LSS to update anything on the booking except for the Refund Requested fields (nocharge and nocharge reason) This is to avoid a bug where the user would click "Request Refund" on the LSS for a non-affiliate, and because of the code in the other branch below the Ticket Entry records would get nuked from the ticket - therefore losing the transaction information.
- Mod : Updated Results banner image to have background behind text Add : added Exception page.
- Mod : Added ImageHost key. All images were pointed to localhost. Now they will be redirected to the correct location
- Fix: Payments.aspx was skipping lines if the auth radio was disabled - it should have been checking the refund radio too.
- fix : took out hardcoded clubid.
- Fix: People erroneously shown as being "In Draw" on player registration when they were actually in another draw linked to this draw sheet.
- mod : removed all php links.
- Fix: In some cases if you load Score Card Admin as the first page in your session, the Client Browser Offset would not be loaded in time resulting in competition lists not appearing (due to timezones in Aus). Fix: Add client browser offset to scorecard play dates as rendered from GetScorecards() in the SCA webservice.
- added images.
- added all work done thus far to LoveGolf
- Mod : Updated styling on Lovegolf Memberships to show yellow on memberships that have a null value. Mod : Allow nulls when saving the memberships. this will update the deleted date on the membership. Mod : All memberships still have to have an amount entered before they earn the extra profile points.
- Fix: Removed warning box popup when Authorise radio is clicked.
- Mod: Disable authorise radio button for deleted bookings.
- fix : Disabled 'Save' option on CuteEditors. it was creating some confusion.
- Add: Warning in Payment Capture screen to alert user if they try to capture the payment for a deleted booking. Mod: "Authorise All" link modified to not capture payments for deleted bookings by default - user has to decide individually. Mod: Never return $0 as the Amount Due, even if booking was deleted.
- Fix: Pre-print crash when trying to print team cards.  This was because of the handicap calculation not being implemented on Team level (by round date) - only by round id.
- Mod: The public site was checking the block 9 hole status before checking the 9 hole booking status. I have changed this so it checks the 18/9 hole booking first, then if there is no booking it will check the 9/18 hole status of the block
- Fix: Ported a mod that will save the GL handicap onto the member record when a member is looked up from the MemberQuickSearch or Player Details controls.
- Fix: Problem when members use the Cancel My Booking Only button to cancel a booking - crash because there is no Invoice node in the booking XML, and also showing an incorrect message once the booking was cancelled.
- Reverted Peter's change from rev 15462 because it didn't consider secondary memberships, and also joined between ComputerNo and DisplayCode which should not be done.  Looking at the original smartsheet issue MBS+DFH were not even sure what the problem was - so reverting this until we can replicate and fix properly.
- Fix: Removed SubtractClientBrowserOffset call from the CompetitionSelectorControlService as we're only passing a date with no time component.
- Mod: When a TBP transaction is refunded because the competition fee includes the green fee the user will now see a note on the Payments page stating this, so that they can refund the line.
- Fix: Header bar looked crap with Settings tab wrapping to the left for Gulf Harbour and Templeton (both of which have many tabs)
- Fix: Header bar looked crap with Settings tab wrapping to the left for Gulf Harbour and Templeton (both of which have many tabs)
- Fix : ImageCheck for Lovegolf profile check was not being done.
- mod : updated height
- mod : Toro take over link fix.
- Fix: Don't show the booking fee when in Pay At Club mode.
- Fix: When you print a card for a person where the competition fee includes the green fee, don't delete greenfees that were previously paid online - rather refund them by deleting the line and creating a refund line.  This avoids the situation where a person is lost from the Capture Payments page.
- mod : made the site take over link to 'http://www.toro.co.nz/home-lifestyle/'
- Fix: Remove test code from sql file.
- Mod: Added a new global parameter (Settings.TBPTransactionFee) which will allow us to charge a fixed, non-refundable transaction fee per booking made through TBP (paid bookings only).  This part of the mod is to allow the transaction processor to charge the booking fee instead of a refund fee, if set.
- Mod: Added a new global parameter (Settings.TBPTransactionFee) which will allow us to charge a fixed, non-refundable transaction fee per booking made through TBP (paid bookings only).
- Mod: Slicer now works for Louise to be able to view reports when clubs query them.
- Add: Louise to Slicer ACL
- Mod : added Terms and conditions for lovegolf on WhatIsLoveGolf.aspx
- fix : was too complicated styling. simplified LoveGolf button.
- fix : fixed some more styling issues regarding the lovegolf button on the menu bar
- Fix : only allow images for banner and small image.
- Fix : Was checking deleted markers as well. fixed.
- Mod: PrePrint - If the member or visitors does not match the competition Eligibility, prevent the user from printing the members or visitors card Mod: PrePrint - When Non-Affiliated visitors have their card print, the printed message is shown next to the member.
- Fix : Updated CuteEditor to Arial font, adjusted google ads up for NZ on TabMembers
- Fix: Typo
- Mod: Small UI cue to make it seem quicker to navigate to another tab.
- Fix: In some cases the club logo does not render correctly because the bitmap can't be loaded by .Net.  Ignore these errors and render the placeholder image instead.
- Fix: Hide type 2 clubs from the golf.co.nz club search results.
- Fix : removed character checking. as it was not allowing the Offer Description to be saved.
- Fix: Don't allow user to upload scores to GL that have already been uploaded via another competition.
- Mod: Club Website - Changed the height of the videos to a more "wide screen" style instead of a square. height - 85% of the width
- Fix: Should not show the Start Tee ID on the green fee visualiser for timeslots in specials - show the Start Tee from TBStartTee.
- Fix: Left some debug code in there.
- Fix: Permissions/assetgroup caching was too aggressive - toned it back to keep a datetime per-assetgroup.
- Mod: Club Website - Changed the hieght of the videos to a more "wide screen" style instead of a square
- Mod: Changed minimum course rating for 18 hole courses to 45.
- Fix: Accidentally also hid the Save Changes button.
- Fix: When cancelling a booking don't check the amount due - when we're cancelling we won't ever take a payment.
- Mod: Club Website - Corrected the issue with the saving and changed the instruction to have the same style as the help boxes that show in the current site
- Add: Support for Gross Stableford competition type where stableford points are calculated as if you were off scratch, and then your course handicap gets added after the fact to get the total stableford score.
- Fix : moved "cancel By booking only" to appear first
- Mod: Club Website - Changed the image hover to use the description and not the title
- Mod: Club Website - Prevent the control from over lapping on another control.
- Fix: When clicking CANCEL MY BOOKING / CANCEL ENTIRE BOOKING buttons we now go straight through to the trash can screen, unless the $0.50 charge will be levied. Fix: When a player is removed via the cancel screen, their XML node gets corrupted in a way that, if you hit the Back button, weird stuff happens like IIS crashes.
- Mod : LoveGolf. changes to image size and not to be shown on Aus site, and changes to WhatIsLoveGolf welcome text.
- Mod: Club Website - Changed the description when there are no videos Mod: Club Website - Add a control to set the number of videos in a row Mod: Club Website - Each video gallery is PageControlID depend Mod: DotGolf - Changed the description when there are no videos Mod: DotGolf - Each video gallery is PageControlID depend
- Mod : Love golf styling changes and enabled activation email to jan.
- Mod: Reload kiosk between 1am and 2am rather than 11pm and 2am.  This will hopefully get around the "Are you a member?" question popping up at North Shore occasionally.
- Fix : lovegolf menu button was not showing correctly.
- Mod : LoveGolf Sql Scripts
- Mod : LoveGolf addons.
- fix : Updated teebooking to hide "Cancel My Booking" if the person is not in the booking.
- Mod : allowed the person who booked in another person to remove their entire booking as well.
- Add: ClubCMS - Added new control - Video Gallery Add: DotGolf - Create new section under the club website to add, modified or delete videos.
- Fix: Countback for Russian Roulette competitions was not implemented, so it was using the single player countback instead.  This caused the results for a competition at Waitemata to come out with pos. 1 and 2 reversed, even when pos 2 had the better back 9 competition result.
- Mod: Removed "Golf Club" from the name - because it seems GolfLink returns GC with all the clubs, and GC Golf Club does not make much sense...
- Mod : Toro site takeover
- Add: IX_RSResultEntryScore_RSEntryId
- Fix: Don't log email tracking beacon requests - too much spam in TrackerLog. Fix: wa_TBIsEditingAllowed wasn't restricting people from editing bookings for others.  While this effectively had no impact in the UI (other restrictions stopped these guys from doing any harm), it had a significant performance overhead due to the clustered index scans required to do this check.
- 
- Fix : working on Cancel booking buttons
- Add: DeletedDate to IX_GreenFeeTypeTimeSlot_TimeSlotId.
- Fix: Session expiry caused errors in permission caching system.
- Add: TBTicketEntry indexes to speed up wa_TBGetBookingChangesWithMembersSince
- Fix: Permissions caching wasn't quite working properly.
- Mod: Removed ClubCMS page preview button as it causes severe blocks in the database due to the time taken to produce these preview copies.  We'll have to get back into this and fix it in the future, but for now the idea is to remove it until we do.
- Fix: Don't send Live competition types out to DGE.
- Performance: Index added to config table to avoid clustered index scans.
- Performance: Cache user permissions for an hour or until they abandon the session.
- Fix: Reverted accidental commit from Reference.cs.
- Performance: Changed references from Master.Shared.Club.Region.Country.Code to Database.CountryCode for speed.
- Add: Index for performance.
- Fix: When deleting scores, don't run rolloverupdatemember for any country but NZ.
- Fix: Added the AR6 license file to the TrayApp executable so that we don't get the evaluation message printed on the cards when we're in user-mode printing (Whangarei reported this - I have already manually deployed the new EXE to them)
- Fix: Corrected code that sent 3 divisions up to GolfLink as differnent competitions.  Oops.
- Add: Various indexes, SP mods for performance of DB1 CPU.
- Add: Diagnostic utility for looking at what we're about to send to GolfLink in terms of competition round uploading - /api/GolfLinkSimulateRoundUpload.ashx?CompetitionRoundId=xxxx (remember to login first)
- Mod: Insert the club as retrieved from GolfLink if we look up a member and we can't find their CentralClubCode in our database. Mod: Insert club category UDEF when inserting a new club record so that members may be joined up properly.
- Mod: Waipu - Changed the club header logo
- Fix: Subtract client browser offset when printing cards from SCA.
- Add: DateStart to allow null value. Do we really need this as mandatory?
- Mod: Pre-Print(1555) - When a competition is setup to allow Non-affiliated players to play and your try to pre-print the cards for the competition, it does not allow you too. Only when the competition is auto entry will it allow you to print the cards from preprint. This has been changed so that it will allow you to pre-print the cards without the competition having to be auto entry.
- Mod: POG - When the enter the Booking Editor, the cursor is now focused on the search bar so that the use can see the active text box. This will allow if there are no members booked into the timeslot, if there are members booked into the timeslot and if you try to print a card directly.
- Mod: Connectors that are NOT configured as card printers (i.e. not set to be a printer in the Score Card Printing settings area of Live) will now "sleep" for 60 seconds after doing a call to get scorecards.  This is to try and reduce the number of long-polling connections to the database and webservers.
- Fix : Incorrect Spelling "StStart"
- Mod: Bulk Email - When editing an email template, previous uploaded images were not showing in the image gallery for this template.
- Fix: When a page bound to a top-level menu item is deleted the menubar control would crash trying to find the page name.
- Mod: Changed the preview text for the High Performance section on www.golf.co.nz
- Add: Tools directory with WypRevisionUpdater.exe to Connector folder.
- Mod: Changed hintpath for AutomaticUpdater and WiX to absolute rather than relative so that the builds work a bit nicer when not building in C:\Builds\...\
- Mod: Added more notes to the document
- Test automated build
- Test: Automated build
- Fix: Pre-build didn't run the correct Collabnet svnversion.exe.
- Add: Initial skeleton project for LoveGolf.
- 
- 
- 
- 
- 
- 
- Created folder for LoveGolf project
- Fix: Show deleted ticket entries and timeslots in the Payments.aspx page - even if you delete a timesheet you should still be able to authorise transactions on there.
- Mod: Waipu - Resized the banner image
- Fix: Show the user permissions section in UserAdmin.aspx for Aus-NG clubs. Fix: Aus: Hide the "Interface" box from the members search screen as it is only for NZ.
- Mod: Corrected the Waipu center panel width so that it does not overlap the header banner width. Changed the profile banner image.
- Mod: Changed the Waipu header banner for the online Tee booking.
- Mod: Performance improvement on TBLog trigger to update the ClubId.
- Fix: Bug where transactions for pending registration players would be refunded when the booking is edited and saved.
- Fix: Pending registrations did not get joined up properly while authorising transactions leading to TBTransaction records that could never be captured.
- Fix: When there are captured transactions, don't allow the CreateScorecardTransactions() method to change the TXLines at all, just return without doing anything.  Note that orphan TXLines are still assigned to new scorecards when they are reprinted, this hasn't changed.
- Mod: Waipu - Changed the club website header banner
- Fix: ClubSetting join was joining on the member home club rather than the club printing the cards.  Oops.  This meant that Ian wasn't seeing Opposite Gender Stroke on his cards for visitors.
- Add: Missing files - FileUploader.aspx.*
- Fix: When clicking the "View Site in Administrator Mode" the user is presented with a blank page.
- Fix: Order TXLine grid by CreateDate.
- Fix: Moved sic-delete-link style to the right place - any SIC specific styles should be in dotgolf.score-entry-control.css because we use the control from other pages.  This style caused the delete link to be in the wrong place on Member Scoring History.
- Fix: Pre-print page - full screen ajax spinner was broken when loading up.  This is a problem with bigger comps where the load takes a while. Add: SignalR progress updates so that the user can see how the load is doing. Future: When printing cards, it would be great to use the same signalR hub to inform the user how the print is progressing. Testing: Create a comp with a large number of players (100+) and create a few rounds (4 or so) for it.  Confirm the spinner shows properly and names flash past as it loads.
- Mod: Improved performance of loading the pre-print screen (PrePrint.aspx) for multiple round competitions, especially those that extend beyond the end of the current rollover period.  I have done this by 1) keeping each player's handicap index cached for any date in the current rollover period, and 2) not trying to calculate the handicap index if I already know that it is beyond the last day in the current rollover period (it will come back as unknown anyway).  This should speed up Louise's case when loading competition 309388 for Omokoroa up by around 400%.  Unfortunately this won't be fast enough yet as there will still be a delay when loading up the page (due to the size of the competition) but at least it will be usable.
- Mod: Changed the way that GolfLink visitors get put into the database.  Instead of creating a NonAffiliate+PersonClubDetail row, we now create a Member+CMember row (and possibly later on a PersonClubDetail, depending on whether we need to store any additional contact information).  This means that the competition system works much better, and also it was a lot easier to implement GolfLink integration in the kiosk for Mooroopna (as we only carry around a MemberId, for nonaffiliates we don't do anything - which made this tricky)
- Test committing USE
- Test committing USE
- Test committing USE
- Test committing USE
- Test committing USE
- Test committing USE
- Test committing USE
- Removed test sql file
- test USE
- test
- Fix: Removed USE statement.
- Mod: When a card has been printed for a group booking and view on the SCA, it highlights and shows the correct group fee for the printed card.
- Mod : added overflow to Comp Selector to show Scroll bars when there are many comps. Mod : Comps now show 'Both' when its a multi gender comp
- Mod : Default Markers now validate that the same courses do not have the same active days.
- Mod: Added validation checks to the prize setup to check if the member has enter a prize type and not left it blank "-- Select --".
- Mod: Removed the actual position of the player and only show the position of the player per prize type.
- Mod : When the owner of a booking clicks "remove booking" this was removing all players from the booking, (this was creating confusion amongst players). A new button has been created, "Remove My Booking" will only remove the players booking, and "Remove All Boookings" will remove the entire booking.
- Mod: Russley - Corrected styling issue for the club website
- Mod: Corrected the issue with the course image uploader and saving images for the selected course on the club website.
- Fix : Page_IsValid was being checked on load. which causes the validation to fail when adding recipients by category/age etc.
- Mod: Ensure that the current GolfLink Handicap is looked up prior to a card being printed from the kiosk.
- Add: GolfLink integration added to Kiosk - we previously omitted building this in there, oops.  This piece of code was copied from the MemberQuickSearch control.
- Mod: Re-Cropped the slide image for Waipu club website
- Mod: Advance Green Fee Setup - When making changes to the Green Fee amounts, click save and finish. Then clicking the save button will display the confirmation message to the user.
- Mod: Added column names to the NZCRData table. This is only temporary until we move to the new GA handicapping system so ignored the NZCRStroke table for now.
- Fix: Possible casting bug causing an error when you create club products for a club for the first time.
- mod : added height to EmailCompose CuteEditor
- mod : added height to EmailCompose CuteEditor
- Mod : Disabled Categories that were not applicable for Non-Playing members when creating a Non-Playing member
- Fix: When competition is set up for both genders, the CalculateCompetitionRoundSegmentForPlayer function does not return any eligible segments because of the recent change to competition setup (and segment generation) which now generates divisions with Gender="A".  This meant that no player ever matched an "A" division.  SCA, POG and kiosk could not print cards into these competitions.
- Fix: Performance: Indexes added to speed up the green fee setup area.
- Mod: Waipu - Changed the flash Pictures and the header image. Add: Waipu - .net header image incase any changes need to be done.
- Fix : Card now gets marked as paid when GreenFees are included in Comp.
- Refactored the AutoCompetitionPaid
- Mod: SCA - When entering a scorecard into a competition and trying to print the card, a reference error appeared on the system. This has been corrected as there was a try catch that was not put in place.
- Mod: Removed the @PassedDate parameter as it is not being used.
- Add: StatsD timer to ScoreService.SaveScore() so that we can start building a baseline for 5CC score entry timing.
- Mod: Check for Both gender competitions configured for ALL markers.  This situation is no longer supported in Next Gen, and when we upgrade clubs we need to manually review each of these competitions to see what to do about them.
- Mod: SCA and POG(1544) - Removed the function, if the player is pre-registered into a competition and he prints a scorecard or makes a Tee Booking, the competition selection will not be ticked.
- Mod: Improved the gender combo on the Competition Setup page - now only requires a single click to select a gender.
- Mod: Summary: Both gender competition division handling improved to allow Both gender divisions to be created.  As part of this mod we have removed the ability to create Men/Women divisions in a Both genders competition.  (After investigation we found this is never done, and DGE also didn't allow it)
- Fix: Insert a ClubSetting row with the golflink club id (aus only)
- Mod: Removed caching feature for club names as that causes more trouble than it's worth.
- Add: Ability to create new clubs (DotGolf only feature).  This won't currently work on the NZx databases because we don't have an identity on the Club table PK.  Apart from this problem it was written to be NZ-compatible so we could use this rather than the manual process in the future.  Anyway, for Aus it works great.  Creating a club this way sets it up just far enough so that you can login to DotGolf Live and continue the setup there (i.e. gives the HC product and sets up a user account). Add: When you give a club the API product, an apiadmin account with a random password is automatically created in the background, the password is shown to the user.
- Fix: ClubDashboard no longer crashes when the contracts folder is not available (this is the case with Aus in the development environment)
- Add: New procedure to allow Adweb to create clubs.
- Changed UI
- Mod : Enabled the Kiosk to include the AutoPaidCompetitions
- Fix : SkypeCall2Click browser addon was killing the email tracking image.
- Mod: SCA - Changed the check for competition entry. If there is a competition that has more than one round one, this will stop the member being able to entered the second round one if he has been already entered into the first round one.
- removed CampaignEdit thats not ready for release.
- Mod : Added a help link to explain Opened Status on Bulk Email
- Fix : BulkEmail > Checked links for Tokens before stripping them out
- Fix : BulkEmail would break if no links are added to the html.
- Fix : Un-subscribe is breaking the email.
- Add: Added a new page, ExcellingWithinTheProgramme, in the National dashboard. Mod: Changed the names in the National Development Dashboard to the new requested names, Please see the changes below.
- Mod: Green Fee Setup - When saving a green fees, in the green fee setup area, an information message will be shown if the save was done correctly or if there was an error.
- Add : new column in Clubsettings > "AutoPaidCompetitions"
- Mod : added Auto Competition Paid flag to club settings. This will be used in the kiosk to mark scorcards as auto=paid if they have this flag enabled. Fix : Fixed OpenedEmailReport to show NonAffiliate Ids
- MOd: Reverted changes to this SQL procedure to the original version
- MOd: Reverted changes to this SQL procedure to the original version
- REMOVED: Removed the change regarding the multiple round one competitions as it was causing issue with SCA and competition eligibility.
- Mod: Remove the NZ Women's open facebook feed and replace it with the NZ Golf facebook feed. Mod: Adjusted the height of the controls to the same height.
- Mod: SCA - Change was made to check for players that have been entered into a round one for competition and not allow them to be entered again into round one if there are more than two round one's for the competition.
- Fix : Was duplicating selected guests.
- Fix : Duplicate guest members
- Mod: KIOSK, Online Booking, POG, SCA - When the advance green fee is setup with a round restriction and date range for the next year, Eg: 2014, it was still showing the fee as acceptable for year 2013 as the month and days were correct. (Changed to skip the year check the custom year selector method if the year is set for the advance green fee)
- Mod: If the IncludeCSS setting is used to import a stylesheet from Micropower - only do this if the currently logged in club does not have the NG product.  (This means that the unauthenticated login page will still have the import - but oh well.  "meh" in Matt's words.)
- Mod: Removed reference to 290 in the blocktimeslot setup area. Now the blocks are no longer reliant on a club's blocktimeslots.
- Mod: Online Booking - When booking online and there is an advance green fee setup with a maximum round no and date range, it will only show this fee when the correct parameters are meet.
- Fix : Session is now being cleared when starting a new registration.
- Mod: SCA, POG, SCE - Added a extra date check incase the passed in date for the CompetitionRoundCheck is null.
- Removed: Checked in incorrectly.
- Mod: SCA, POG, SCE - Added a extra date check incase the passed in date for the CompetitionRoundCheck is null.
- Forced Rebuild
- Mod: SCA - Corrected the SCA section, when you try to print a card, as it was not checking the number of maximum rounds correctly for the restricted rounds and date range settings.
- Fix : Checked if the guest has already registered for the competition, ie to stop the same guest being entered in more than once. Fix : Updated the sorting for searched members, now sorting based on name. Fix : The Search query for quest players was selecting duplicate members.
- Mod: KIOSK - When using the Restricted rounds setting for a green fee, don't show the green fee on the KIOSK if it is not within the start and end date.
- Fix : Was ignoring guests if they were previously deleted.
- Fix : Guest registration if guest does not have DOB, default it to 1900/01/01
- FixFix : Guest registration null DOB
- Test: Rolled back my earlier commit.
- Test: check if I can commit a non-conflicting SQL script.
- Fix : Guest registration null DOB
- Fix : Changed "StStarts On" to "Starts On"
- Fix : When entering a registration, was checking for guests when no registration was entered.
- Fix: Reverted mod done in rev 15230 as I don't believe we should be driving this from the CourseId being present or not.  I have changed the GetEligibleCompetitionRounds() method to accept a null value for isBackNine, which basically means "don't care, return both".  This is now used in the cases where we don't have a tee booking and we don't know which 9 the player will be playing.  In this case we have to list competitions from both nines.
- Add : Add guest players when registering for Competition
- Fix: Don't allow returning/entering deleted cards.
- Mod: Course Rating Variance report now takes advantage of the new NZCRData columns ( Count{Member,Visitor}Scores; Average{Member,Visitor}Differential ) for performance - it runs in a few milliseconds now. Mod: If the overnight job hasn't run recently, a warning is shown at the top of the report. Mod: Changed the "Average Differential" display at the top of the report to "Median Differential" as it makes more sense from a mathematical/statistical point of view. Fix: Course Rating Variance report crashed with an exception when the filters caused the dataset returned to be empty (this was a pre-existing bug)
- Add: SQL changes necessary for the ORG Course Variance Report.
- Fix: When loading a scorecard which is not valid for handicapping up for editing, and the card is for a 9H marker, the handicap is loaded as 9H even if it was an 18H handicap.  This causes stableford calculations etc to be wrong as the course handicap is double of what it should be.  Test case - production, card 3435 for Clarks Beach, appears with course handicap 36 instead of 18.
- Add: Peninsula club website - Added the new images and styles sheets for the club website to SVN.
- Add: Peninsula Club Website - Created new Tee booking page for the peninsula and online booking
- Add : Entered Order to PrePrint, will print the cards in the order the entries were made.
- Fix: When checking for incomplete results (when teams smaller than the NoOfPlayers field is not allowed), we never considered Best x of y competitions where a team of 3 could still return a valid result (in a Best 3 of 4 Stableford competition, for example).  This lead to teams of 3 not showing up in the results.
- Mod: Green Fee Round Restriction Widget - The round restriction will save the month correct even if the year is not set. Mod: POG, SCA, KIOSK and Online - When the user has exceeded the number of rounds for a specific green fee, that green fee will not be seen in the Online booking, KIOSK, POG and SCA and the user will not be able to give a member that specific green fee.
- Mod: POG & SCE - When there is a competition that has two round ones but on different days, the member will not be able to enter the second round one if he has been entered into the first round one
- Mod: Throw an exception if someone tries to activate TBP for a club that is not present in the NZGreenFeeData..Club table.  This is so that we can prevent the non-payment of green fees to clubs because they don't have bank account details configured with us, as was the case with Onewhero and Whitford Park discovered 23/10/2013.
- Add: NZ Women's Open - Create the facebook and Ticket widget for NZ Women's open. This is found on the home page and can be seen be everyone.
- Add: Connector supports 2 new application settings - DisableAutomaticUpdates (true/false, default false) which disables automatic updating completely, and also DisableAutomaticUpdatesUntil (datetime) which disables the updates until the specified datetime has elapsed.
- Mod: Green Fee Round Restriction Widget - The widget was not preforming date checks correctly. When selecting a ToMonth that was less than FromMonth but for different years, it was not saving the restriction.
- Removed: As this is a duplicate number with 1035.
- Mod: Renumber this item as it was matching with 1035
- Mod: Player Stroke Average report - has been modified to display the Total Stroke Avg correctly.
- Force new build.
- Fix : Reverted Changes for ignoring the milliseconds
- Fix : Different DateCreated was being using in the Online Viewer.
- Mod: Because we are having some trouble with DocuPrint 340A printers on Windows 7 32 bit, I have added a printing mode which creates scorecards on the Tray App thread instead of the service thread.  The 340A 32 bit driver doesn't seem to like being run as the SYSTEM user, and this gets around that.  To enable this hack you should set the PrintUsingTrayAppProcess key to true in the exe.config file for the service.  This key is not in there by default.  I will send a HOWTO around too.
- Fix : updated email viewer to ignore milliseconds in ticks
- Mod: Login Control - the PagetoShowAfterAdminLogin setting was not being called when you login as admin. Add: Logo - Added the Logo for Russley
- FIX : updated ticks.
- Fix: Calculation for Nomads Competition Registration Fee report was not quite right - there were players appearing in both the online and manual sections, the totals did not add up after a payment was created, and the total deductions did not match those generated by the slicer.  (The slicer also had a bug but that was fixed in a separate commit)
- Add: Ability to import manually created registrations from Nomads competitions (which use RSCompetitionEntry records instead of Registration records for manual registrations)
- Mod: Club Website(Tauranga) - Increase the font size on the home splash
- Mod: Club Website(Tauranga) - Repositioned the back link to the bottom left of the image instead of the top right
- Mod: Club Website(Russley) - Added a back link on the header. Completed the rest of the website setup.
- Add: Club Website(Russley) - Create a members section for the Russley golf club. Designed the template to match the existing website
- Mod: Club Website(Tauranga) - Modified the News feed to not show on the right but under the news feed. Increased the font size on the home page.
- Mod: Building a club Website. Added more detail regard the news feed
- Fix: Nomads: Prevent multiple transactions against the same card caused by clicking the PAY button multiple times.  I have done this by a) replacing the button with an ajax spinner and "PLEASE WAIT" text immediately before starting the postback, and b) preventing further transactions for the same RegistrationId as soon as there is a successful transaction on record.
- Fix: When doing draws for 9 hole competitions off both the front and back 9's, pre-printing the cards did not produce B9 cards, only F9, even if the players are starting off the >= 10th tee.  Now pre-print will correctly print B9 cards when printing for holes 10-18.  Need to test that this doesn't cause problems at North Shore when doing a multiple course 9H competition, eg All Courses White 9.
- Fix: Don't restrict 18 hole members from playing in 9 hole competitions (player pre-registration)
- Fix: Hole Play Times were not being printed correctly for 9 hole shotgun cards.
- Mod: KIOSK(1475) - When a competition is setup for B9 marker, it will not appear on the KIOSK. This was only an issue with the B9 markers and not F9. Mod: KIOSK(1508) - When there is a marker setup for both marker, F9 and B9, it will order the markers correctly. Eg: F9,B9
- Add: Club Website (1519) - Create new club website for Tauranga and checked in all the images and style sheets.
- Mod: Tee Booking(1519) - Added a new tee booking section for Tauranga which will be used by their new club website.
- Fix: 9 hole handicaps were not interpreted correctly when pre-printing cards for players already in a draw.  This is related to Ian's email "More Software Bugs" 19/10/2013 7:03pm.
- Mod: POG(1521) - When creating a group booking, the list would jump to the first record when you scroll down and click on another time slot.
- Mod: POG(1521) - When you create a fixed or Pay Per Person group booking and book in a Affiliate and non-affiliate member. When moving between the GreenFee and GroupFee tab, the correct total amount is shown in the summary.
- Fix: Accidentally left a USE statement in my SQL script.
- Mod: POG(1521) - When you have the following, One member that is booked twice on the same day and is entered into two separate competitions that don't overlap round times. When you move the second booking outside the competition round time, the player is booked in, it would remove the competition for both booking. The change has been made so that it will only remove the current booking competition(s)
- Fix: Ex-members of a club would not get the ribbon (visitor indicator) on the POG and SCA, even though they are charged green fees correctly.
- Fix: Generate.aspx (part of the draw) was always assuming handicaps to be 18 hole.  This caused a problem where you couldn't put a 9H player into a draw if the competition is set up with a division with handicap index restrictions - the 18H handicap would often fall out of range of the division handicap limits, causing the draw to show an error message.
- Mod: POG(1521) - Moving one person from a ticket booking caused moving issue for the rest of the member on the ticket booking when you try to move the group. The member would just load and not move.
- Fix: Card printing was not working for a shotgun start at North Shore, because of IsReverse returning NULL for start tees other than 1 and 10.
- Added bulk email STK
- Mod: Levies System - Modified the document.
- Add: Added the notes from the Levies system, share the knowledge meeting.
- Mod: POG (1520) - Then there are two bookings for the same member on the same day. If the second booking is moved, it will not affect the first bookings details(EG: if the first booking is booked into a competition)
- Fix: When an exception is thrown from the background process which recalculates results, the logging code to save the exception to the database crashes out because HttpContext.Current returns NULL.  Normally this wouldn't be a problem, but because there is no HttpContext, the exception ultimately bubbles all the way up to W3WP.EXE and takes that down - forcing IIS to recycle the app pool!!  I have introduced another way of logging exceptions for these background processes so we don't run into this problem.
- Mod: Wording change in draw generate page to make it obvious that we are talking about accumulative results UP TO the selected round (this is for seeded draws)
- Mod: Email tracking will now store the email useragent into the Email.OpenUserAgent column when the email is opened.
- FIX : National edm not including inline images, and unsubscribe was not correct.
- SQL: TBReportGreenDetail - changed to use the temp SQL table instead of the TimeSlotEntry table.  [DFH edit: This is because of a discrepancy I found when comparing the production code to that on dev2 after making a hack direcly on NZ1]
- Fix: When you load the tee booking green fee detail report by Captured date, some bookings would be excluded if their SlotDateTime values don't also fall within the captured date range.  Oversight, and unfortunately fixing this made the query a good deal slower.  Will have to come back to this if it becomes an issue.
- Mod: GroupBooking (1474) - When creating a new group booking, the list would jump to the bottom of the list when you click on it (This was only happening in chrome) Mod: POG (1474) - When there are no group fees setup on the system and you create a fixed group booking. You will be able to see the fixed group fee when you add a member in the POG. Mod: POG (1474) - When you book a member in a group booking slot, fixed or pay per person, only the correct fee group fee will be seen. SQL: GetAvailableGroupFees - Only pulls back the group fees for the one club as it was pulling all the group fees. SQL: GetAvailableGroupFees - Added the ClubFee.ClubFeeGroupClubId and Limit.IsAffiliated information to be returned from the database.
- Mod: Redirect to try and combat the page not refreshing due to the update panel in legacy upload.
- Add: Draw Generation methods updated to work with RSCompetitionEntry records.  This code is also used in ORG but has been checked so it doesn't affect them.  Basically this means we can now use the following draw generation methods in Live as well as Org:  By Handicap Index, By Results (Reverse U) and By Results (One Tee Start).  I haven't tested the other ones too deeply as this should be all we need to sort out Waitemata this week.
- Added the HtmlAgilityPack packages
- changed HtmlAgilityPack to nugetpackage
- Added HtmlAgilityPack -  I Broke the build :(
- Add : Show more link to the Sent Items - Bulk Email.
- Fix, If the email is a National EDM, we do not want to show all the recipients, as there could be over 50k.
- Fix: SQL syntax error in tee booking search.
- Fix : Error when creating an email from a template. EmailCategory was not included.
- Fix : Issue with "Back to List" not working.
- Fix : Issue with "Back to List" not working.
- Mod: Start Tee Sheet Report - The line does not work on the Konica Minolta PagePro printer when the line weight is 0.25. The line height has been increase 1 to be seen.
- Add: Release notes.
- Mod: In Bulk Card Admin, when you enter a member number or name and it filters the results down to a single record, you can now hit ENTER to select that record, rather than having to grab the mouse and check the checkbox.
- Mod: Leaderboard - When the Leaderboard is started before any scores have been entered, the Club/Column is show as soon as the first score is entered. The Club/Country column should only be seen when less than 80% of the scores are not home members.
- Fix : forgot to commit this for the email attachements
- Fix : Bulk email was adding the embedded images as attachments. Not showing them inline.
- Mod: Club Website (Manukua) - The google map, "Contact Us", was not being displayed correctly and causing the map to be cut-off. This only happens in chrome.
- Mod: Club Website (Contact Form) - When the "Send Anonymously" setting is on, which shows check box on the contact form, the email will be sent as now as it was having an issue with validation.
- Mod: Mod: Club Website - When a club admin logs into a club website and the user has UserSecuirty details but does not have affiliate or non-affiliate details any page with the UCompetitionsCalendar will not load. There was missing error handling for this control.
- Mod: KIOSK - When there is a competition setup, with adult and junior markers, the member that is login at the kiosk should only the markers that they are allowed to enter. (Example - Te Puke, Captions Choice)
- Fix: In the NextGen upgrade utility we should have been setting MarkerId=0 for both gender (hence default markers) competitions in addition to doing the CourseId=0.  This wasn't done before and that caused the rainbow problem for about 11 competitions at Te Puke.  Bug is now fixed and I have regenerated the segments for Te Puke on production.
- Fix: When printing scorecards we were using the RSEntry displaycode before the CentralMemberCode, even for affiliated members.  This meant that if you entered a multiround tournament and your original membership number got resigned half way through, you will still get that number printed on subsequent cards.  Changed so that your Member.CentralMemberCode (your home club membership number) is always printed.
- Add: Connector Status report to show when printers are offline.
- Mod: KIOSK - When saving scores on the kiosk, via manual score entry screen, to prevent a two scores from being entered for the same card number. I have added a check so that if the card is returned already, you will not be able to save the score. When checking for the second card, this should only happen on the score entry and not when you are editing a score.
- Mod: Club Website - For Royal Auckland club website, it is throwing the center panel text out of alignment. This is only happening in the latest version of chrome. (Corrected the typo in the code)
- Mod: Club Website - For Royal Auckland club website, it is throwing the center panel text out of alignment. This is only happening in the latest version of chrome.
- Mod: KIOSK - When saving scores on the kiosk, via manual score entry screen, to prevent a two scores from being entered for the same card number. I have added a check so that if the card is returned already, you will not be able to save the score.
- Mod: Club Website - When a club admin logs into a club website and the user has UserSecuirty details but does not have affiliate or non-affiliate details any page with the UNextEvents will not load. There was missing error handling for this control.
- removed the Parallels.Foreach, opt'd for a simple for loop. Seems the parallels locks up the ui a bit.
- Added Show more link to Email Sent items.
- Fix: Crash in Kiosk caused by leprechaun.
- added a Thread.Sleep(1000) so that the ui can get a response back asap.
- Mod: Feedback Control - When the setting, AllowSendingAnonymously, is set to false. The logged in user name and membership number will be sent with the email.
- Mod: Make the dev environment look significantly different from the live one.
- Added changes to the Bulk Email. Added a popup for the test email link to supply another email address, for nzgolf login only.
- Reverted chenges for the Hertz site takeover. The campaign has ended.
- Fix : Opened report was not showing the printable PDF version
- Fix: The ClubCMS Search control for the Micropower template wasn't working as it was missing a parameter (introduced when we added the CWSite layer)
- Fix: Deleted competition rounds were also considered when checking for rounds with overlapping start/end times.
- Mod: POG - When entering a competition for a non-affiliate that already has a booking in the POG, the competition fee was not being added the TXLine table and when printing from the SCA, it was taking another green fee (the selected green fee when editing)
- Mod: MeltWater Widget - Renamed the header of the widget to - "NEWS AROUND THE TRAPS"
- Fix: Accidentally left code in there allowing printing 1 blank card!
- Add: Stats timers into POG and Events tab to gauge slowness of these pages loading up.
- 
- Added unsubscribe token to bulk email
- removed HtmlAgilityPack, as it is in Shared
- Mod: NZ Women's Open - Change the Content editor to have the compact mode, which show more controls than in simple mode. This will affect the BMW NZ open, Five Course Classic and NZ Women's Open website as this is a shared control.
- fix : Throwing error on page load
- 
- added HtmlAgilityPack.dll
- Add : Bulk emailer to incorporate national edm
- Mod: Reciprocals Green Fees - Error checking when creating new reciprocals green fees, because if they don't exist it was causing the system to fail.
- Fix: Relative path reference for swfobject.js.
- Fix: Performance issue with publishing a draw.  I think the optimizer actually got it wrong in this case, so we use an intermediary temp table to store a small result set.
- Set expiration date for hertz cookie
- Add: Event Tracking for hertz display.
- Mod: Use a global variable declare on Home.aspx rather than detecting it with Javascript (IE sucks)
- 
- Fix: Stop warning HTML1415: Unexpected character: U+002D HYPHEN-MINUS (-)  in IE.
- Fix: Moved jquery.cookie to the top as well to try and combat IE issues.
- Fix: Moved jquery-ui-1.8.16.custom.min.js reference to HEAD because IE10 occasionally refuses to load it properly with it at the bottom.
- Reverted UContactForm changes.
- 
- Mod: DASH Ticket Booking Widget - Increase the height of the widget so the "Powered by Dash Tickets" is not cut off.
- Mod: Tee Sheet Report - Corrected the issue, where the dollar sign was showing on the printer view but not on screen view.
- Mod: Current and Upcoming Tournaments - Change the date format to be ddd MMM dd eg: Sun Oct 21th
- added hertz change for ie
- Fix: Don't put the Hertz widget on every page - we will do this manually for the My Golf section on Monday.
- Fix: Don't put the Meltwater widget on every page - NZ golf has to do this.
- Removed console log.
- Add : Hertz takeover.
- Mod: Club website - on the UContactForm, Feedback or Contact us, you will have the option to send the message anonymously when you are login. This will hide your name and email address from being sent.
- Mod: Tee Sheet Report - The dollar sign will be seen when the booking was made online and paid for. This is using the same code as the POG
- Mod: Hertz Widget - Corrected the Description at the bottom of the widget.
- Mod: Allow printing a single blank card if the CTRL and SHIFT keys are held down while clicking the Blank Cards button.
- Mod: Tee Sheet Report - The dollar sign will only bee seen when you create a online booking and have authorised the payment.
- Mod: BMW Site - Change the image banner on the bottom of the page.
- Mod: Current and Upcoming Tournaments - Added the closing date for the competition below the "Register Now" button.
- Mod: Hertz Widget - Added extra left padding for the hertz discount note
- Mod: DASH Ticket Booking Widget - has been added above the facebook widget on the Home and Ticket Page.
- Mod: Tee Sheet Report - The online payment was not being displayed on the report correctly. Change the dotted line to a solid as Chrome will not directly print the dotted line. (solid Line Weight:0.25)
- Mod: Group Bookings - Try and catch incase the minCount is passed through as null
- Fix: In rare cases duplicate cards were produced when a player is entered into a competition where there were several different RSEntry rows.  A distinct select was causing duplicate scorecard rows to be produced when it should have been a TOP 1.  I have not found the reason for these RSEntry records being inserted the way they are, but at least this fix will stop the scorecards from being duplicated.  Don't bother testing this (apart from ensuring that cards still print), it is an extreme fringe case.
- SQL: Meltwater - Added the insert SQL for the new meltwater newsfeed widget.
- Add: Meltwater Widget - Created the newsfeed to display on the public website. You don't have to be logged in to see the widget.
- Mod: Hertz Widget - Added the correct background colour for the description.
- SQL: Hertz - Removed the old SQL insert and renumbered the SQL to the correct version.
- Mod: Hertz Widget - Created new styling for the widget. Added the description below the widget
- Mod: Don't crash out the site if modules don't exist - show a warning message instead.
- Fix: When there is a segment in a multi-segment competition which has no entries, the blank segment gets counted as a single score card rather than 0.
- Fix: Members appearing as resigned on the score history page but active on member details page.  Related to the Date_Deactivated change we've done for Micropower in rev 14992.
- Fix: Members appearing as resigned on the score history page but active on member details page.  Related to the Date_Deactivated change we've done for Micropower in rev 14992.
- Add: Ability to search for tee booking tickets by member number or nonaffiliate username (this has slowed the query down a bit unfortunately) Add: Amount and CapturedAmount columns added to ticket search results so you can quickly locate a paid booking by amount.
- Updated, rather count grand total on emails than memberid.
- Updated widths on Sent Items
- Updated widths on Sent Items, and fixed the grand total on the BulkEmailStatusReport
- Add : Added OpenedEmailReport
- Add : Updated the opened mail status to link to a report showing all opened recipients.
- Mod: Green Fee Settings - Added a new setting option, "Show on Club Website" for the Standard, Reciprocal and Advance Green Fees
- Test: Just want to make sure autobuild still works.
- Test: Just want to make sure autobuild still works.
- Mod: Added safety check exceptions to stop round dates with time components from being saved (stop the whole save if this happens). Fix: Exceptions thrown as part of the competition SaveChanges() code were not being displayed to the user at all - just a generic error message.  This fix should show the exception message so that user can know where to look to correct the problem.
- Fix: Use GetUTCOffset() instead of BaseUTCOffset so that we take daylight savings into account.  the Javascript function takes it into account so we should also do this server side.
- Mod: Check for nulls before setting openDate in the Email table - only want to do this the first time the email is viewed.
- Add: Some comments into the Switch statement so we actually have a reference to use it.
- update, wrong parameter name
- updated regex for links as it was not finding some URLs
- updated regex for links as it was not finding some URLs
- Added CWEmailComposeLink create script.
- Update EmailComposeLink to CWEmailComposeLink.
- Fix: RSCompetitionRoundSegmentEntry records with NULL CompetitionRoundSegmentIds crashed out card printing at Russley.  Still not sure how they are able to get competitions with NULL ID's like this but we'll have to diagnose that problem on Monday.
- Fix: RSCompetitionRoundSegmentEntry records with NULL CompetitionRoundSegmentIds crashed out card printing at Russley.  Still not sure how they are able to get competitions with NULL ID's like this but we'll have to diagnose that problem on Monday.
- Add : Added link tracking to bulk emails.
- Fix: Opposite gender stroke on scorecards broken by weekday recurrence check in CardPrint.asmx.
- Fix: Syntax error in CartPrint.asmx.  This would have crashed and burned all Edge clubs!
- Fix: Syntax error in CartPrint.asmx.  This would have crashed and burned all Edge clubs!
- Fix: Removed throw previously added as a test.
- Mod: Leaderboard - Correct the leader board from reload after every second.
- Fix: (Oops, missed another file) Only remove competition results for the competition being removed in Bulk Card Admin.  Previously we were nuking results for all competitions for the scorecard in question.
- Fix: (Oops, missed some files) Only remove competition results for the competition being removed in Bulk Card Admin.  Previously we were nuking results for all competitions for the scorecard in question.
- Fix: Only remove competition results for the competition being removed in Bulk Card Admin.  Previously we were nuking results for all competitions for the scorecard in question.
- Mod: Leaderboard - The leader board will show adverts when the leader board is running single competition Mode.
- Debug: Add throw so we can see if an error is occurring in Application_Start.
- Mod: Stop Adweb from marking emails as READ if we open them from the Mailer Status page.
- Mod: Revert the previous change from 15002 - that was indeed correct. Fix: The graph report was actually the report which was showing as incorrect - because it was reporting on unpaid green fees.
- Mod: Removed the condition for returning on greenfeepaid = 1. Not sure why this was ever added - maybe the report used to only be online green fees? Not sure - but I think it should be every green fee.
- add : added read/opened tracking to bulk emails. Also added URL routing into global.asax to handle the 1x1 pixel in the email
- add : adde read/opened tracking to bulk emails. Also added URL routing into global.asax to handle the 1x1 pixel in the email
- Fix: CartTurnoverMinutes was not summing correctly if there was no value set. Added an isnull(,0) around it. I have left the CartPlayMinutes as nullable, because you always have to have a cart play duration - and did not want to isnull this and possibly cause any possible performance issues this could have on the POG (as I know carts have affected the POG in the past)
- Mod: Leaderboard Adverts - Removed the Leaderboard adverts form the leader board page and created a new page. Adverts are showing full screen on the leader board depending on the size of the screen.
- Fix: Typo.
- Mod: Reverted and re-done revision 14354 a better way.
- Add: New Xero Entrust certificate as issued.
- Mod: Mod: Changed the behaviour of putting a future date into the Date_Deactivated column on CMember - NULL or a future date means active, a past date means inactive.
- Fix : all competitions were being removed on returned Scorecards when you intended to only removed a few competitions.
- Fix : all competitions were being removed on returned Scorecards when you intended to only removed a few competitions.
- Add: Two previous share the knowledge documents bulleted by Peter
- Fix: When you have multiple recurrences of duplicate markers set up the opposite gender stroke sometimes prints the wrong marker's strokes on the card.  This was for Wairakei Int, and the workaround was to delete the unused recurrence (which was empty anyway).
- Fix: Tweak new style report header font colour to make it contrast better when printed on grayscale printers.
- SQL - Renamed the SQL proc for deployment purposes.
- Mod: Rename Hertz control script to avoid getting published on Monday.
- SQL Hertz Side Bar - insert for the database (For all pages on the website)
- Mod: Removed debug text from proc. Add: Control copy for wa_TBreportGreenFeeDetail.
- Fix: Distinct the ticket count for the capture payment warning bubble - as it is possible to have the same ticket joined in twice and we only want to count them once.
- Add: Index to make ExceptionLog deletes a bit quicker.
- Mod: Leaderboard - When there is only one competition setup and there is an advert setup for the end of the competition. It will show the advert at the end of the competition cycle.
- Mod: Reverted the check. We probably need to allow our system to look at the date and determine if they are unfinancial or not.
- Fix: Rephrased one of the error messages to make more sense.
- Fix: For members where the passport username corresponds to a resigned CMember record but they still have another record that is live elsewhere, the forgot my password page would incorrectly report that their membership number is resigned.
- Fix: When saving the handicap overrides for a professional player, if you don't specify a handicap, the page fails to save because RSCompetitionRoundSegmentEntry.HandicapIndex does not allow nulls.
- Mod: GreenFeeListNG - Added a new section for rates, this shows any rates setup in the future.
- Fix: Javascript errors causing massive amounts of data being logged into the ExceptionLog table.
- Mod: Do not allow an unfinancial date in the future to be entered
- Mod: TwitterFeedWidget - Instead of using https going to use http to load the twitter feeds. (Need to test on the LIVE site)
- Fix: Crash when entering Nomads scores - where there is no partner selection in SIC.
- Mod: Remove @memberid from not being used in sp
- Fix: When capturing partial transactions the TBTransaction.CapturedAmount was set to the last batch captured, not the sum of the whole ticket.  This caused lost money for Manukau Golf Club where 4 nonaffiliates booked but only got charged for 1 green fee.
- Mod: GreenFeeList_NG - Change the green fee list NG control to show the group name rather than the description on the club website.
- Mod: Green Fee Detail - Worked on the loading time off the report.
- Mod: Resign Member - When resigning a member, if the member is an elite player, he will be removed from the elite list.
- Mod: Green Fee Detail - Report is able to select the "same day" for the from and to date.
- Mod: Fix for multi course clubs to correctly show at the top of the combo.
- SQL: This procedure has been deleted.
- SQL Hertz Side Bar - insert for the database (Duplicate SQL number)
- SQL Hertz Side Bar - insert for the database
- Add: Hertz Side Bar - Added the widget to the project for public site use. (Corrected the Issue with the Drag and Drop Function)
- Add: UTL_Rollover modified to include a date/time check so it can only be run on rollover Tuesday.
- Add: POG booking editor now lists friends of players already booked into the slot so that the user may easily click on one of them to book them in.
- Add: Hertz Side Bar - Added the widget to the project for public site use.
- Mod: Leaderboard - When displaying a StableFord type for a competition on the LB for the following setup, (2 Comps [Comp 1 - StableFord, Comp 2 - StableFord,Net Medal]), the LB was displaying the "Handicap Index" column header, which was not suppose to be displayed. Only the Position, Name and Total should be seen.
- Fix: Join issue where competition TXLines would be joined in and duplicates would appear in ticket entries in adweb.
- Fix: Because of the mods to the payment bubble to bring it into line with the capture payments page, we lost the bubble for pre-nextgen clubs.  This has been corrected by introducing left joins and a link to the legacy green fee table.
- Add: We now show TXLines on the View Ticket page.
- Fix: Rewritten subs summary chart query to minimise use of views - for performance issue on central for Gulf Harbour.
- Add: Index for performance.
- Fix: When logged in as a nonaffiliate, payment status is not saved onto the ticket entries and TXLines because an exception is thrown trying to parse the (null) memberId.
- Mod: Leaderboard Advert - UI for the leaderboard adverts under the leaderboard setting area. Mod: Leaderboard - Created a new advert popup for the leaderboard to show the adverts setup in the leaderboard settings. SQL - Created a new leaderboard advert setting table
- Mod: Make the handicap index field mandatory when registering non-affiliates.
- Mod: Make the handicap index field mandatory when registering non-affiliates.
- Fix: Replace standard confirm() box in SCA with jConfirm - when deleting cards.  This is because the new chrome alert box style blends into the background too easily and users don't see it's there.
- Fix: Merge issues from last commit for twilight hack.
- Merge: Change from DotGolf.Public.2012 to allow paying at club for twilight tournaments.
- Twilight: Add: Allow bookings to be created without paying when booking between the start and end times for a competition round where the competition is configured:\
- Twilight: Add: Column to support allowing "pay at club" for twilight competitions.
- Mod: Updated DotGolf Live Connector installer to automatically set the service to restart on failure.
- Mod: Found 2 more places where an exception could potentially cause the whole service to die.  One place is in the Twain code (which won't be affecting Waitemata), but another is in the HttpListener code for the local service - and if the kiosk talks to the connector over http (which would be happening at Waitemata), this may cause the service to crash out if requests are timed /just right/, or calls come in very quickly.  I have load tested it on my machine but could only crash it out using Twain calls, so could not reproduce the suspected error at Waitemata.
- Add: Show edge/stable version breakdown on Adweb Versions page. Add: Allow searching by non-affiliate email addresses in addition to usernames.
- Mod: Leaderboard Settings - Added the Leaderboard round settings UI to source safe. Not showing until the Leaderboard changes for this setting has been done. (Checked in as this was causing me issue when trying to development)
- Fix: Small errors in schema update scripts.
- Add: CardPrint.asmx will now create connector GUIDs if they don't exist - this means that if we reattach a dev database and our guids are not in there, they'll be created as soon as each Connector pings the first time.
- Mod: Hide $0 items from invoices for subs.
- Fix: ClubMember category check wasn't checking the "Always charge a greenfee" flag for categories eg. Pay as you play or SOC.
- Fix: Error "This is a multi player competition but the specified RSEntryId does not correspond to a team or a player in a team." appeared if you tried to enter a 4bbb card where there is no team partner (and there are no teams defined in player registration)
- Performance: Speed up the hole name/play time form save time by not calling EF SaveChanges() multiple times.
- Add: Release notes.
- Deleted: Removed an added SQL procedure
- Fix: Problem where the Unbilled Member Count on the subs widget over-represented the number of members with unbilled items (or no items).  It now matches the Unbilled Members Report.
- Mod: Subs: No longer include resigned members in the Unbilled Member Report and the unbilled warning in the subscriptions widget on the home page.  You can still see the full list including resigned members by checking the Include Resigned Members box on the report itself, but by default this is turned off.  Judgeford was seeing huge numbers here because when a member changes their mind about renewing (after receiving their invoice) they would simply void the invoice in Xero.  Of course this voids the invoice in our system too, but the member items still stay there even after the member is resigned, causing this report to keep listing them.
- Mod: Results: When a person is entered into a 4BBB competition but their team mate didn't show up, they can play on their own and still be eligible to win (if they play ridiculously well), and this should put a result on the result report.  Previously this wasn't happening.  This fix should also allow multi round 4BBB competitions to work properly when a team partner doesn't show up for a subsequent round.
- Fix: Extend hole name length to 50 characters instead of 20.
- Mod: Moved the Copy Competition link over to the right of the page to avoid people accidentally clicking that instead of the Back to Calendar link. Mod: When you're in competition setup in Copy mode, display "Copy Competition" in green in the title bar instead of the usual Competition Setup.
- Fix: When a category check is invoked and it is asked to NOT check the time limits (i.e. time of day played) the weekday limits are also ignored!  This means that for the preprint mod I just did, we would have never checked the weekday limits when not printing for a draw (this particular one would not affect anyone in production as it is a new mod anyway).
- Fix: Pre-print was not doing category and home member checks when assigning Complimentary green fees to all cards printed.  People who are eligible to play for free should not be assigned a green fee when pre-printed.
- Mod: Competition Setup - add new column to the Competition table (ShowTodaysRoundOnly)
- Fix: Hide the ugly "ERR_PLAYERS_BOOKED_AT_CONFLICTING_TIME" message and show an explanation of the situation instead.  This happens when publishing a draw and existing bookings exist that conflict with the draw.
- Fix: When retrieving multi round results for past rounds, eg. you have a 25 round comp and pulling accumulative results for R20, players who have played in rounds 21 to 25 do not appear on the results.  Not sure if this would have affected competitions that were not best-of but it was certainly a problem for best-of comps. Fix: When a person is taken out of a competition through SCA and (how this happens I don't know) the results don't get recalculated for some reason (deadlock?)  they get taken out of the results in a broken way, and that means that none of their best-of results show up anymore.  This would have been a rare thing.
- Fix: When editing a score that has auto-completed holes on it, the auto-complete link is visible even when all holes have values entered.  Clicking the link does nothing, but it still shouldn't have been visible.
- Mod: Add an error message for scores with more than the allowed number of auto-completed (not played) holes.  For 9 hole scores <= 2 not-played holes are allowed; for 18 hole scores <= 5.
- Fix: The "Last Payment" field on the subs widget wasn't working because receipts no longer have the IMPORTED payment type on them by default.
- Fix: Validation Rules tests were not running because of an incorrect path to the ValidationRules.xml file.
- Mod: CompetitionRoundSegment - When generating round for Specific course but default markers, it was not generating the new segments for competitions that were taken over from DGE.
- Test: Added test to check scenario where a competitionround with a course ID (specific course, default markers) didn't get any segments generated in the production system.
- Fix: UpdatePanel was not including the litErrorMessage control used to display batch errors after processing the NZGA.TXT file.
- Fix: UpdatePanel was not including the litErrorMessage control used to display batch errors after processing the NZGA.TXT file.
- Mod: Green Fee Summary Report - Corrected the issue with Fixed Group booking not showing correctly.
- Fix: Changing the combo to change the shown tournament on the leaderboard widget (www.golf.co.nz) now actually works.  I've rewritten the EF save code to get around this problem.
- Fix: When you try to login as a non-affiliate (i.e. registered via golf.co.nz, NOT a social member) to a club website, an exception is shown instead of "incorrect username or password".  Non-affiliates should not be able to login to club websites unless they are social members of the club (i.e. NonAffiliate.ClubId == website.clubid)
- Mod: ProCommission Setting - The default pro commission value was set to zero.
- Mod: ProCommission Setting - The default pro commission value was set to zero. Mod: Green Fee Summary Report - If there is no pro commission or zero pro commission set, the Less Pro Commission line will be removed from the report.
- Mod: Shared.FromHttpContext.Club has been removed and replace with WebUser.FromHttpContext.Club
- Mod: Forgot to also do the "Refunded area", not only the "Uncaptured Area" (Not summing the green fee count correctly in the report (because these are online payments, they do not have a scorecard associated, therefore will not be affected by the group by))
- Mod: Not summing the green fee count correctly in the report (because these are online payments, they do not have a scorecard associated, therefore will not be affected by the group by)
- Mod: Ignore competition fees, only green fees, cart fees and group fees.
- Fix: Speed up the top section of the Score Listing by Day report which shows the summary counts per day.
- Mod: Speed up Score List by Day report in Entered mode by a) modifying the query to allow it to use an index on Score.CaptureDate and b) creating said index.
- Mod: Online Booking - When a non-affiliate member creates a booking online, the default 18 holes will be selected not the 9 holes.
- Fix: Make back links work properly when linking through to the SIC to edit a score from the ScoreListByDayReport.
- Fix: If you have a green fee and a refund on a ticket, the Payments.aspx page crashes because of a duplicate key.
- Fix: Capture Payments was splitting up the transaction for refunds multiple times when the user keeps clicking Submit.
- Mod: Score Listing By Day Report - When changing between the Round type combo the selected date will keep.
- Fix: The kiosk score entry didn't page the partners the same way that scanning now does (when scanning/entering cards without tee times)
- Fix: Don't allow importing players into pre-registration if they don't have a handicap.
- Fix: When reprinting a scorecard, there is code in there that transfers TXLines from the old scorecard to the reprinted one.  The CreateDate information was lost when this happened, which stuffed up the online refunded transactions in turn - because the new green fee record was being created before the orphans were transferred.  Modified so that the original transaction createdates are now kept.
- Fix: Correct the order by clause on SCA so that refunded tee booking transactions combined with competition show up properly.
- Fix: Pre-print wasn't ordering cards by name at all as a bit of old code was left in there that forces tee time ordering.
- Fix: Pre-registration import will now deal with FirstName LastNamt format as well.
- Ignored some stuff.
- Mod: Remove the Payments.aspx "Change" link for Next Gen clubs, as changing green fees now happen from the POG/SCA.
- Fix: When editing the green fee from SCA for a refunded online payment card, in some cases we edit the online green fee instead of the locally assigned one. Fix: When changing a green fee in the POG the change would not save.
- Fix: When (for an online paid booking) a card is printed, THEN the payment is refunded using Payments.aspx, the resulting TXLine for the scorecard was marked as an online payment when it is not; and also the create dates were in the wrong order.
- Mod: A5 Cards - When the card has no tee time the start time will be removed.
- Fix: When TXLines are updated they are all created with the same CreateDate (to the millisecond).  This is a problem if the online refund line is created at exactly the same time as the locally assigned green fee line - then SCA doesn't know which one came first, and doesn't display the right one.
- Fix: Don't perform the team size check when pulling a person out of a competition.  This shouldn't have affected anyone in production, just my testing where I had a broken competition (that was deselected) as part of a card I was entering.
- Fix: Progress scoring ordering was incorrect for Gross tournaments - people who have started the last round were being ranked above everyone else regardless of the Overall To Par score.  This was because the IsFinished column was used to detect progress scoring, and this meant only the in-progress rows were ranked properly.  I now changed this so that we have a variable used to detect whether the results are in the process of being progress scored - this way all results may be ranked correctly.
- Fix: When progress scoring and the results for R1 are in (final entry) and you start scoring R2, the Overall Progress to Par column only shows R2's score.  This was because the Total column for R1 was being set to NULL when the R2 scores were considered.
- Rev 14836 broke the project file for the pre-print CSV import.
- Fix: Error deleting schema update folder.
- Fix: Problem where test db schema changes were not being applied properly, so some tests were failing. Cleanup: removed the wa_TBApplyBookingChanges_Test proc from CreateDB.sql.
- Mod: KIOSK - For the maintenance screen, if there was no IP the screen does not load. If there is no IP, the printer log just shows "No jobs in printer log"
- Mod: Testing framework will now automatically apply schema updates when tests are run against the TestDB. Add: Tests for live_GenerateOrUpdateCompetitionRoundSegments procedure.
- Fix: Removed incorrect assertion in Results - we can in fact have multiple scores considered in a single round competition - eg. Best 3 of 4 Gross - 4 scores considered.
- Fix: In some cases where there is a null pigeon pair, the cache fails with the resulting null.
- Mod: Pro Commission Setting - Added a Type, Type="Double", to the Range Validator else it will not work correctly for decimals values.
- Mod: Hole Statistics Report - Corrected the Range Validator for the ToDate textbox, returning an error message when the selecting a date before the current date for an ongoing marker. (Created Custom functions to handle the date compare)
- Mod: Hole Statistics Report - Corrected the Range Validator for the ToDate textbox, returning an error message when the selecting a date before the current date for an ongoing marker.
- Mod: Setting - Changed the percentage range between 0 and 100 and corrected the issue with saving button not checking the validation.
- Fix: The NZ Age Group champs are being run at different clubs so we can't go ClubId=ClubId for the pigeon pair query.
- Add: Ability to pre-print cards in alphabetical or tee time order.
- Mod: Green Fee Summary Report: Added the new two lines to report, the Pro Commission percentage and the total after the pro commission percentage. Add: Settings: Created a new settings area, where you can add the pro commission percentage and include or exclude online payments.
- Fix: Correct a bit of text referring to a button that doesn't exist.
- Mod: Adjusted scanning algorithm "signed" cutoff value to be less sensitive so we can ignore the side of the boxes when the printed lines cut into the signature areas (eg. when the card is pulled through skew)
- Add: Feature: We now allow importing CSV files into the pre-registration area of competitions.  The format is the same as the DGE CSV file format so this is backwards compatible.  Both members and visitors (non-affiliates) are supported in the imported files.  We don't have any support for defining teams in the files; these have to be done manually using the Live interface for now.  Imported players are shown with a little [CSV] tile next to their name in the pre-registration area, once imported.  Duplicate checking happens for members, but not non-affiliates.
- Fix: Problem where a live and resigned record would be returned from ClubMember.  This was because of a change I did in rev 14776 to eliminate duplicate resigned records.
- Add: "MENS" and "WOMENS" tabs to the competition leaderboard summary widget for golf.co.nz.  This is fully automatic and is driven off the existing pigeon pair code we've got in DotGolf Live.  If a competition is set up with the same round dates but inverted genders to another one (and the name only differs by a gender string), we will show tabs on the widget to allow the user to easily toggle between the two competitions/tournaments.  Screen shot of this: http://snag.gy/uyU3o.jpg
- Mod: Refactored the pigeon pair code so that I can use it in the Public project to implement the leaderboard widget tabs.
- Mod: Removed timeslot integration (for partner selection) from score entry when using the manual SIC, and changed back to the way DGE did it - i.e. have an Exclusive checkbox again which filters on people that are already in teams.
- Add: Green Fee Commission spec.
- Mod: Add signalr subdomain redirection for live.staging.micropower.com.au.
- Fix: In rare cases marker holes were loaded in an arbitrary order, resulting in holes appearing on the score input control out of order.
- Add: Ability to put arbitrary text in the Competition box of score cards printed through the Pre-Print area.  This is to avoid having to create "Other" competitions and having to build the functionality to add multiple competitions to a card in pre-print, as this is quite hard to do.  This feature is primarily needed on 12/09/2013 for Ian and the Interclub tournament he is running - he needs the team names on the scorecard.
- Fix: Removed more dead images; added JavaScriptErrorLogger to project file.
- Fix: Removed obsolete style causing 404.
- Add: JavaScriptErrorLogger to public project so that errors are logged and not 404'd.
- Fix: Use Exceptions.LogException instead of the obsolete Shared library equivalent.
- Mod: Copied map0 to map8 to avoid display errors when requesting map8.
- Fix: Removed /img/ajax2.gif preload reference as it was causing 404's on the public site.  It wasn't being used for anything anyway.
- Mod: When printing cards with pre-print (and players are in a draw), the expected play times were not printed on the cards.
- Fix: Release note crash when we haven't had any for 2 weeks.
- Mod: Explicitly set pre-printed card greenfees to Complimentary.
- Fix: JS error in kiosk.
- Fix: TBTimeSlot.SlotTime is always in local time so don't need to convert it.
- Mod: Upload NZGA File - Removed the styling from the button as the nospinner class was causing issues. Created a new progress loading that will show once the file has been uploaded.
- Mod: Pre Print - When printing cards and the player does not have a handicap, the system will return null for the member and not allow a card for that player to be printed. This is done to prevent the screen from failing and not loading the results.
- Mod: Scanning will now page through the partners list for aus.
- Mod: Make Luke Thompson's membership card scan as someone else (or ?lukeiamyourfather=xxx to specify any GL number)
- Fix: Performance fix for passport check on golf.co.nz when a blank password is entered.
- Mod: Allow Aus to see the draw widget - just to test and see if this works!
- Mod: Show the "Always charge green fee" box for Aus.
- Fix: Aus: MemberID not detected properly in tee booking area of ClubCMS.
- Fix: Try to make member logins with with the GolfLink number for Aus demo.
- Mod: Confirm Booking - After a non payment member, Home Member, has finalise his booking and clicked the logout button, it will not reload the confirmation booking page and will not redirect the use to the home page.
- Add: Ability to show the leaderboard from the kiosk.  If you touch the leaderboard, it returns to the kiosk home screen.
- Add: ProcessResults.ashx added to the Live project so that we can use this for the Aus demo.
- Mod: Return the NonAffiliateID from wa_TBApplyBookingChanges and check that when we try to determine the TimeSlotEntryId for competition entries.
- Mod: Return nonaffiliate CentralMemberCodes for non-affiliate bookings (aus)
- Fix: Header change from previous commit didn't quite work.
- Mod: Change "Are you a member of any golf club in NZ" to "Are you a GolfLink member" for aus.
- Mod: When printing cards for visitors that are in the CMember table, their tee bookings were not being picked up by the kiosk.
- Mod: Small report column width adjustment to fit GL central member code.
- Mod: Gulf Harbour - Changed the height of the sub menu bar. Modified the highlighted sub menu colour to the match the colour theme. Corrected the height with other background menu items.
- Fix: Any visitor was being branded a non-playing member for Aus.
- Fix: When searching with a full GolfLink number of a home member, don't poke a row into PersonClubDetail for that person, they are a home member! Fix: When searching for full GolfLink numbers the MemberQuickSearch control went off to the server instead of pulling results from the local cache - because we didn't include the CentralMemberCode field when loading the initial list up to the client.
- Mod: Small style change to make GL number fit in the Mem No box.
- Mod: Gulf Harbour - Changed the height of the menu bar.
- Fix: When you subsequently change this double-TXLined booking from the POG, further TXLines are created.  Modified so that the locally assigned line is updated instead, and no duplicates created.
- Fix: When you print a card from the kiosk after your online payment has already been refunded by the admin, the online payment TXLine is set to a green fee even though the ticket is still marked as Refunded, stuffing up the green fee report.  Modified so that a new line is now created with an unpaid locally assigned green fee.
- Mod: Use the existing online payment status when refunding.
- Fix: Fix: Did not see the CardDeleted could be null now we consider bookings marked as paid (without a scorecard) when looking at the LINK option
- Fix: Did not see the CardDeleted could be null now we consider bookings marked as paid (without a scorecard)
- Fix: Add the check for a deleted booking to not show on the report also.
- Fix: Include the green fee in the report if the scorecard was never printed (handed a blank card) and the tee booking was simply marked as paid.
- Fix: Card deleted was not being checked for unassigned green fee score cards.
- Fix: When printing score cards from the POG, nine hole members entering nine hole competitions got their handicap in the RSCompetitionRoundSegmentEntry table set as an 18 hole index.  This caused their course handicap to be halved on the competition entries and results reports, as well as on the leaderboard.  This did not affect results, it is only a display issue.
- Fix: The ClubMember view returns duplicate resigned records if these exist with the same Date_Resigned.  Changed so that the latest CreateDate one now gets returned instead of the duplicates.  This caused a problem in the subs/invoicing area of the system where invoice lines would display as duplicated.
- Add: Waipu(457) - Added the newly created change for the Waipu club website. Mod: UTeeBookingRedirect - Added comment, for testing the booking locally.
- MOd: Competition Setup - When a club is running anarchy mode, the "Allow printing scorecard without a tee booking" check box will be removed. If the club has already the box checked, the club will be able to see it and it will disappear once the check box has been unchecked.
- Capture Payments area for online credit card payments: Mod: When refunding an online payment for a booking for which a score card has already been printed, create a copy TXLine which will keep the green fee currently assigned.  This is because we believe the guy showed up, so we will show him on the green fee report both under online refunds and the greenfee group. Mod: When capturing a previously refunded online payment for which a card has already been printed, we need to recombine the previously duplicated rows, and assign the previously removed green fee back onto the online transaction. Add: Show "Card Printed" in the status column if this is the case for the booking line. Mod: Qty column removed, Player Name displayed instead. Mod: When a payment was refunded but pending processing, show "Refunded, pending processing" instead of "Authorised, pending processing". Fix: When a payment is refunded it disappeared from the grid, now that we're using TXLine.IsOnlinePayment.  Apparently refunds are not online payments.
- Fix: Scanning had the same "parameterless constructor" error as entry had.
- Fix: Passport performance/locking issue - keep the base case fast and if the passport is not found, then do the expensive queries to try and locate it.
- Mod: SCA will now no longer let the user change the green fee it a captured transaction exists for the booking the scorecard is for.
- Add: Index to speed up passport lookups for users.  I believe this was causing high CPU on DB1.
- Mod: the POG will now let you change a green fee even if it is an online payment - but not if it was captured (only refunded or no decision yet).  When the green fee is changed and the booking was previously refunded, we will create another TXLine to track the newly assigned green fee, and mark the online one as refunded.  This way a booking will end up with 2 TXLine records, one refunded, one current.  This is intended behaviour though.
- Fix: Start sheet monitor broken by top 1 change.
- Fix: We need to look at scorecards as well (when printing from the kiosk) not only for scorecards with timeslotentries.
- Mod: Because online green fees can be refunded, but still assigned ($$ taken by the pro), we need to be able to allocate 2 green fees to a scorecard/timeslotentry. We also need to be able to report on these 2 TXline options.
- Fix: In edit mode the kiosk self score entry form would load up with "*"'s in all holes. Fix: The client would incorrectly pass a Number object to the server for the gross score, causing the json deserializer to fail when saving the score.
- Fix: Use TXLine data for determining whether a booking was paid online instead of the TBTicketEntry.PaidDate column.
- Fix: When editing a paid tee booking which was made by a visitor and originally had a second visitor and a home member on it, if you change the home member to a third visitor, the system would not ask the user to pay any green fee, the booking becomes free and the POG does not show any dollar signs.
- Fix: When editing a paid tee booking which was made by a visitor and originally had a second visitor and a home member on it, if you change the home member to a third visitor, the system would not ask the user to pay any green fee, the booking becomes free and the POG does not show any dollar signs.
- Fix: When editing a paid tee booking which was made by a visitor and originally had a second visitor and a home member on it, if you change the home member to a third visitor, the system would not ask the user to pay any green fee, the booking becomes free and the POG does not show any dollar signs.
- Mod: SCA - The ordering of the SCA has been corrected to be ordered in the following order: Unpaid GreenFees, CycleNo (desc), CardNo (desc) then Paid GreenFees, CycleNo (desc), CardNo (desc)
- Mod: Added the reference to check IsOnlinePayment for txline to check whether it is an online payment or not.
- Mod: Pre-Print - This is change so that the pre-print logo will appear on the scorecard when printing from the pre-print screen.
- Add: Release notes.
- Mod: WT-1000: Leaderboard: If more than 80% of the competition results are from home club members, don't show the Club/Country column on the leaderboard.  This will become a setting once Peter has finished his Leaderboard Options page, but for now it is automatic and a good band-aid for Waitemata for the weekend.
- Fix: The leaderboard was checking the Show Overall Results (i.e. the one that pertains to by round or overall) setting when trying to figure out whether to show divisions or not.  Changed this behaviour so that if a competition has divisions, the overall result is never shown.
- Mod: UCompetitionCalendar Control - Added an extra javascript, to resize the columns of the calendar correctly on page load.
- Mod: UCompetitionCalendar Control - Added an extra javascript, to resize the columns of the calendar correctly on page load.
- Fix: Pre-print will now print cards in tee time/start tee order rather than alphabetical.  When someone asks for alphabetical order I'll build that, because it isn't straightforward to do (data isn't available at that level)
- Fix: (1446) Scores by day report: This can return all the scores in the country if run twice. Steps to reproduce are - Run the report with the playdate changed to a couple of days ago, and  click update (should give your clubs scores only). If you run update again, it returns all scores.
- Fix: When you go to the Register URL manually, check the registration dates to ensure people can't prematurely go to the page and register.  Not sure why this wasn't committed before as we found this with the 5CC.
- Fix: Wording change when login fails on the Register control.
- Fix: Asterisk integration was broken with upgrade to new PBX.  Forgot to commit this one a long time ago, it's been live in the local adweb for months.
- Fix: Adweb: Don't show deleted clubs in contact search.
- Mod: If a club hasn't synced in the last 10 minutes, show a warning next to the NG product.
- Add: Indexes for performance of ClubCMS.
- Mod: Changed handicap report from dotted lines to alternative line shading.  Reduced margin/footer sizes and line sizes.
- Mod: Commented out the automatic throttling code as this was placing too much load on DB1 cpu.
- Fix: If a person has joined a new club when they were already a member of a club AND registered as a member to golf.co.nz, and they subsequently try and login using the secondary club number and their original password AND there already exists a passport for their secondary ComputerNo (but for a different resigned member), they would not be able to login.  The system will now look at all your active CMember records and allow using any of the ComputerNo's combined with your Passport password when checking credentials.
- Fix: Don't do Response.Redirect with EndResponse=true, that causes ThreadAbortExceptions in the logs.
- Mod: Removed exception logging for search engines hitting MyGolf/Default; just redirect them to home.
- Mod: Optimised the Competition Summary query. - Merged the two branches of the union for eclectics and next gen results by using a LEFT join for RSResult - Eliminate the Competition join in the final query by adding columns to the table variable to pull the data we need once (in the quick query)
- Fix/Mod: In the competitions summary control in My Golf, if you played in an Eclectic competition in DGE and now your club has upgraded to Next Gen, you would sometimes get missed out of rounds in the competitions list.  Originally I believe this control was only supposed to show the latest round you played in, but this got changed (in a half baked way) to show every round played.  This would have been okay, but due to the groupings when checking your competitions, some rounds would get duplicated too.
- Fix: Competition Registration Fees report was not showing the summary section because it was joining to the Association table - Nomads is a club so has no Assocation row. Fix: Registrations marked as COMPLETED were not being counted in the summary report.
- Add: SIC now has an auto-complete link to make DGE users feel more at home.  It is STILL FASTER to hit * the required number of times than using this link.  (i.e. move your hand from the numpad to the mouse, position the cursor over the Auto-Complete link, click it, then move it over to the Save link and click that).  This link is purely there to show people that you can enter asterisks, as that is what it effectively does.
- Add: Leveraging the new Xero API data passed to us wrt credit note allocations, we now automatically allocate credit note amounts to invoices, so the users no longer have to do this manually. Add: Skeleton code for handling cash refunds, but this got too hard so I commented it out and left it.
- Mod: Add a warning dialog to the Adweb Edit Products screen - it is all too easy to stuff up product changes and apply them to production by accident.
- Fix: Changed the way the category is changed (if renewal category option is set) because the way we did it had history written out of order - which in turn caused a display issue where the item on the invoice would still appear to relate to the previous category rather than the renewal category.
- Fix: SIC: When editing a score previously entered by member ID, competitions previously selected were not shown, instead the "No eligible competitions" message was shown.
- Add: "Go Home" button to permission denied page.
- Mod: Changed the "permission denied" dialog to look different to the Login dialog to make it obvious that this is an error condition.  They can still go back and login as someone else, they just don't get the login option by default now. Mod: Modernised the Live login box a little bit.
- Fix: Generate Draw page - clicking on the Cancel button takes you away to the ORG tournamentcompetition page, resulting in an Permission Denied page.
- Fix: When editing a score and toggling a hole from a score (or pickup) to "*" (not attempted) or vice versa, you get the "Adjusted gross doesn't match calculated value" error from api_AddScore because the Played flag is not being passed to the server correctly. Fix: When loading a score from the server the Played flag was not being used to display an "*" when viewing or editing the score, resulting in not-played holes showing up as a normal score.  They should show as "*" when they were saved that way.
- Mod: KIOSK Schedule (1443) - Change the KIOSK schedule so that the off function works on the KIOSK. If there are no settings setup for that machine and all settings are set to "Off", the KIOSK will show all the buttons as there is not schedule settings. If you want the "Off" setting to work for a specific machine and function, you must setup the other functions for a "Time Range" or "All Day" and the function to "Off" that you require to be off for this machine.
- Fix: Don't truncate course names for North Shore as they use REVERSE courses.
- Fix: When entering scores by member ID (including competition results) - we now check the RSCompetitionEntry table for an entry before creating a new one.  This was done primarily for Nomads who found that while entering scores, new "AUTO" entries were created in the player registration area.
- Mod: Small update to basic data insert script for tests.
- Fix: Because the DPS async post doesn't post with the ASP.NET cookies, we cannot rely on any Session data during a DPS post.  Because of this, Nomads DPS posts were failing so if anyone didn't hit NEXT on the DPS hosted page, we never got told about the payment.
- Fix: Undo mark as paid works in IE too now, but the tick mark is broken. Oh well.
- Mod: Website Tee Booking - Created a new Tee Booking style for Waipu. Include the back link in the picture.
- Fix: Brought back "Undo mark as paid" text on paid button.
- Mod: Website Tee Booking - Created a new Tee Booking style for Waipu. Include the back link in the picture.
- Fix: Make the SCA buttons line up in Chrome.
- Mod: Website Tee Booking - Created a new Tee Booking style for Waipu. (This club does not have Online Tee Booking)
- Fix: CompetitionRegistrationFeeReport manual registrations was not showing for players that started to register on-line but never completed by paying Fix: CompetitionRegistrationFeeReport members that had a passport for more than one club were duplicated on the report
- Fix: RoundsPlayedByDate report does not report on cards that were assigned greenfees via NextGen
- Add: Release notes.
- Fix: Unpaid scorecard count bubble was not showing due to dbo.fncLocalDateTimeAtClub called with dateonly parameter set to false and returning the time at the club with the date, comparing this to the scorecard playdate which is always midnight will return nothing
- Add: Text to card printer names on Settings form to indicate whether the particular printer is offline or not.
- Fix: Make the friends list slightly smaller when running on 1024x768 touch screens so that it fits on the screen.
- Fix: Fee Summary showed the previous fee when switching between Member and Non-Affiliate mode, this was obvious in the Booking Editor where the same control is used for all 4 players in the slot and the fee select is still busy loading the current fees, so now we don't show the fees until they are loaded and ready
- Fix: GolfLink start of day - security - any club could run this just by changing the URL.  We now enforce a session check. Fix: GolfLink: UploadCompetitionRound should never show the MemberId or NonAffiliateID, these are internal to our system and means nothing to a user. Fix: GolfLink: When creating a PersonClubDetail and NonAffiliate record we should store the DisplayClubCode and DisplayMemberCode as derived from the golflink number. Fix: TabMember: Removed the annoying space - (No Scores ) Fix: Member score count was incorrect when counting GolfLink scores, and this was also done in a weird way.  Fixed and refactored. Add: AU: Show the score status on the member scoring history Fix: GolfLink: The player detail control should always look up the member handicap from GolfLink prior to returning handicap information to the client. Fix: GolfLink: When entering a score when the scorecard was already previously sent as "No Score" (to golflink) - we should send a score correction so that GolfLink gets the score and the new scorestatus. Mod: We now link ScoreCard records to their respective GolfLinkScore records to make things easier when sending score corrections. Fix: Removed a strange double union of the same query in RSResult.cs Add: In debug mode, throw an exception if we ever get duplicate scores from GetScoresRelevantToResult() in single round result mode - this should never happen but I'm not confident enough to put this assert into production... Mod: Don't allow the user to upload a golflink competition twice (they could do this before by simply refreshing the batch process page - resulting in a GolfLink error) Fix: When doing a score upload to GolfLink and dealing with a nonaffiliate RSScore - use the DQ flag from the RSCompetitionRoundSegmentEntry rather than going to the score level as is done with affiliated scores in Score. Fix: When sending score corrections the OldScoreStatus was hardcoded as "O". Fix: When sending score corrections we never updated GolfLinkScore to the same as the data we just sent to GolfLink.
- Fix: Scorecards that are not linked to a teebooking fall out of category and returned a green fee due to the fact that the Playdate of the card has a midnight time and not all Categories are set up with 00:00 - 23:59, so now we look at card created timestamp but only for cards printed on the day of play if we cannot find a card for the day of play we ignore category checks and assume the card was pre-printed
- Fix: When an error is reported from the connector scanning code, show it to the user properly.
- Add: Error catching to Twain acquire call to stop the Connector from crashing if something fails in Twain.
- Add: Waipu Images and styles
- Add: Waipu Images and styles
- Mod: Updated the doc with some extra steps
- Mod Aus Only: NewMember Page better styiling to fit with the rest of the site
- Mod: Connector now does a whole lot more logging when the Debug setting is turned on in the configuration file.
- Add: Ability for the connector to connect to Konica Minolta PagePro 5650 printers and retrieve the done job list.  This list is displayed on the kiosk when you enter maintenance mode.
- Mod: Don't try to wake up the printer when using the kiosk - this may be causing the printing problems at Clarks Beach?
- Fix: Broke public build because of Shared reference.
- Mod: MemberQuickSearch no longer shows Aus clubs a "filter by club" combo box.  Aus can only search their own members OR players who have previously visited their club (PersonClubDetail linked)
- Fix: When saving visitor details in player registration an empty DOB would crash out the save process, which caused gender and handicapIndex not to be set properly. Mod: Send the displaycode to the central system to be stored in the CentralMemberCode field on NonAffiliate, when searching/entering visitor details into player Registration.
- Add: golfer info document
- Add: Warnings added to GolfLink upload page to warn user about ad-hoc 4bbb scores. Add: Warning added to GolfLink upload page to tell user if some scores were already uploaded before (possibly as part of another competition) Fix: GolfLink upload page was showing duplicate scores due to deleted scorecards (flag wasn't being checked) Mod: Changed the upload page to look at ScoreCard.Returned instead of the presence of RSResult records for the comp.  For example you could have one of the partners in a 4bbb comp return their card but the other partner doesn't return theirs - in this case we will send the score that was returned. Mod: SIC: Get rid of "Competition" score entry mode for Aus. Mod: In debug mode allow us to get to TabScores.aspx. Fix: Always call GolfLink to get the latest handicap when entering scores. Fix: GolfLink upload - GLCompetition wasn't using the correct CompetitionTypeId when multiple competition types are present on the same comp - eg Gross+Net. Fix: When uploading 4bbb ad-hoc scores, we sent the gross score instead of the Net - in Ad-hoc mode for 4bbb comps GolfLink only accepts the Net score. Fix: When sending ad-hoc scores GolfLink expects a competition date with a midnight time component, not the round time. Mod: Removed the NotImplementedException from isValidForHandicapping as we haven't built this yet - just going to send all ad-hoc scores for now.
- Mod Aus Only: NewMember Page better styiling to fit with the rest of the site Mod Aus Only: NewMember Help Mod Aus Only: TabMembers change help for clubs that don't have MPI product
- Mod: Score Card Entry (1315) - When entering a score for a Non-Affiliate that has been entered into a competition, the "Recently Entered" section below will update once the score has been saved.
- Mod: Removed 'live.au.dev1.internal.golf.co.nz' from signalr switching for now, it doesn't work and reports: XMLHttpRequest cannot load http://een.live.au.dev1.internal.golf.co.nz/signalr/negotiate?_=1376370200149. Origin http://live.au.dev1.internal.golf.co.nz is not allowed by Access-Control-Allow-Origin.
- Mod: Prize Report List Special prizes at the end of the report not at the top with the First Overall section
- Fix: Oops, broke the build with my Ellipsis() mod.
- Fix: In Anarchy mode if you select NO to all competitions, the kiosk crashes and won't let you choose a course or marker.
- Fix: POG display does nasty wrapping things when working with a multi course club with long course names like "Centennial" - truncated course names so they fit better.
- Mod: Timesheet will only show 1 set of 18 start tees now.  Given the draw doesn't support multi course setups at the moment this is better than showing multiple sets of start tees, one for each course, and having it ignore half the data when saving.  We can remove this distinct once multicourse support is added.
- Add: Automatically create missing TBStartTee records when we run the Next Gen upgrade utility.
- Mod: Show Course on the kiosk tee booking if running for a multi course club like Harewood or Taupo (but not North Shore - they use Course Allocations)
- Fix: PrizeReport Division Grouping was not grouping save divisions together Mod: PrizeReport right align Prize heading and details
- Fix: When creating new bookings, the POG was incorrectly showing the warning that some transactions were already captured, stopping the user from changing the green fee.  Introduced by my commit rev 14653 today.
- Mod: Allow different card printing destinations for each course at a multiple course club (eg. Taupo, Harewood, but not North Shore - they use Course Allocations).  This mod refactors the logic around finding out the default card printer driver, changing it to use a central method, Scorecard.GetPrintDestination().  This method includes logic to deal with the different courses.
- Mod Aus Only: change to allow member creation without specifying a AltMemberId
- Fix: New AddMember_DGOnly was not creating any GolfLink Members
- Upgraded solution to VS2012 Add: Method and validation to create member/cmember data from GLMembers, this also required separate validation Add: Method that can be used by DG Live to create a member and send the details up to GolfLink
- Mod: duct-tape solution to allow Aus to search with their 5 digit local member code
- Add: Ability to set up different printers for each course at multi course clubs (except North Shore - they won't use this, and they won't get the option).  The code that consumes these new settings will be written soon.
- Fix AUS Only: ORNS error when no errors are returned from the add member call to the API
- FIX: Website Dashboard - Corrected my initials in the store procedure.
- Mod: Website Dashboard - Corrected the issue with the duplicates that were being shown on the My Golf Dashboard for the Members Tee Booking. There were no duplicate entries on the POG. Just an incorrect SQL join missing an extra and statement.
- Mod: Do not let the user change a green fee through the POG if a transaction has already been captured/refunded for the ticket.  This is to avoid green fee reports going out of whack with the tee booking payment report (sent by the slicer).
- Fix: Fee selector control now shows a gray bar to depict a selected item, when in disabled mode.
- Add: Script for Pingdom Real User Monitoring.
- Mod: The prize column on the prize report is really confusing can we look at truncating the Value,Prize and Description in a way that makes more sense, added a PrizeQty column and left the PrizeValue column for future use
- Fix: When making a tee booking on the fly on the kiosk (before printing a card) competitions offered were always off the F9, even if the competition allows playing the B9 AND your booking was for start tee 10 to 18.
- Fix: All bookings from a Multi payments booking were showing as Paid Online on the P.O.G. when the member creating the current booking paid only their own booking
- Fix: All bookings from a Multi payments booking were showing as Paid Online on the P.O.G. when the member creating the current booking paid only their own booking
- Fix: Webdrive have changed something, and because of this the bounce tracker stopped working, throwing an exception every few minutes.
- Mod: wa_TBGetBookingChangesWithMembersSince will no longer return any data for clubs with the NG product.  This is to stop them from using Card Print Admin from the DGE product to do pre-printing and draws, as this stuffs with Next Gen.
- Mod: Rename "Affiliates" to "Affiliated Visitors" on Rounds played by Date report.
- Fix: Removed immediate update of division cutoffs - you have to click away from the field now.  This is because the validation stuffed with the updates if I have it set to after keypress.
- Add: Release notes.
- Fix: When you book and print from the kiosk and you book tee 10..18, you should default to the back 9 marker.
- Fix: If a category allows playing outside of limits, don't stop the user with the categoryCheckResult message - they can still print a card (paying a green fee)
- Add: Ability to add a competition message, used for general competition info e.g. Rain delay
- Add: IX_UserSecurityRole_RoleId_UserSecurityId_DeletedDate for performance.
- Mod: Performance gains using the ClubHasProduct view.
- Add: ClubHasProduct schema bound view and index.  This will help speed up the CardPrint.asmx ping SQL.
- Add: IX_Products_ProductCode for performance.
- Fix: a zero gross score should translate into a NULL net score (and blank totals), not -2!
- Mod: When done with the results recalculate, jump to 100% progress so that the client knows the process is finished.
- Mod: Recurring Bookings - The recurring checks has been modified as the Duplicate entry check and Entry TimeSlot Member count check on this page was not excluding dates that have a ToDate in the past.
- Fix: Eclectic report was extending beyond the right hand margin of the page in preview mode.
- Fix: Problem in Eclectic summary results where GETDATE() is used to determine the marker slope rating rather than the RoundDate, even if the marker has since expired.
- Fix: Left some debug code in BCA.
- Mod: P.O.G. KIOSK - 9 Bookings should default to B9 for tee's 10-18 not just 10 Mod: P.O.G. KIOSK - 9 Hole comps should also consider tee's 10-18 not just 10 for going of the Back 9
- Fix: Competition results widget was not loading properly when you have an Eclectic competition combined with a normal type eg. stableford.
- Fix: Removed some of the suck from Bulk Card Admin by a) increasing the script timeout so that we don't get those annoying unknown error messages, and b) adding a progress bar to give the user some feedback.
- Mod: Leaderboard - Reverted the Twos changes and not showing as it is causing format issues when there are no records. Need to revisit this issue and found a correct method of handling this.
- Fix: Both of these SP's are live and being used in the system. api was not updating the projected handicap on the member table which could have caused some doubling/halving issues when entering a score, then changing 9/18 hole status within a handicap rollover.
- Mod: Because we are using the initialhandicap for anyone with less than 5 scores, we need to update the initial handicap at the same time as changing 18/9 hole status, see Rev 922
- Add: Ability for Net and Par scores to be shown in the score entry control.  These are only visible if a competition of said type is selected (so by inference will only be visible to Next Gen clubs with our competition system) Fix: Odd bug where PartnerSelections would not be present in the SIC, and that would cause bindings to fail.  In this case there was no partners comp so I felt it was safe to just check if the array was defined before iterating over it. Fix: Small styling issue corrected in SIC.
- Mod: Media Export Report changes - Remove "(Pro)", "Golf Club" and only show country for Non-NZ players
- Fix: Broke Org with the last commit
- Fix: Cache buster tag for competition setup css.
- Mod: Players' segments will now be recalculated when the divisions are changed in competition setup even before scores have been entered for the competition. Mod: Competition Setup now displays an extra column "Estimated Entries" under the Divisions section, which displays the number of players in that division, using the new division splits.
- Added comment for the BestOfCompetitions competitions (Line 1510)
- Add: Nomads Sponsor image
- Add: Nomads Sponsor image
- Mod: Put back code to ensure clubs cannot run the registration fees report for each others comps
- Add: Registration Fees Report Mod: Changed TournamentRegistrationsWidget to show a link for the Registration Fees Report
- Fix: Competition Entries Report - Changed the report to handle Non-Affiliates that have been entered into a competition.
- Mod: Have a "Select All / Select None" link next to the start tees (draws) to make setting up shotgun starts easier.
- Fix: Disable the "Go to registration options" link if a competition is in copy mode and hasn't been saved yet.  This stops NZ Golf from inadvertently updating past competitions' registration open/close dates.
- Fix: Forgot to commit this on the previous commit
- Add: Documentation on building a new club website
- Mod: Allow filtering by category when bulk printing invoices.
- Mod: Rename "Print" button to "Generate PDF" to stop users hesitating.
- Mod: When a booking is cancelled, send emails saying "Cancelled booking" rather than "Updates to booking".
- Fix: Send emails to nonaffiliates who have pending registrations again.  This was broken by the change to split the email sending code out into a different procedure.
- Mod: Show the competition message with the leader board if it's set
- Add: Quick summary on slicer documentation
- Add: Ability to add a competition message, used for general competition info e.g. Rain delay
- Mod: Xero invoice create requests are now limited to 60 every minute, so we have introduced a tarpit in our code to stop requests going out faster than this (otherwise we get exceptions like 100907481 - ServiceUnavailable back from the API.
- Mod: FeeSelect Control - Added ability to disable control
- Test: Feeselect issue with PC at Southhead GC
- Fix: Rebill transcation was stored with a 0 value Mod: Set DPSCompleted and CapturedDate fields for successful transactions
- Repository for system documentation (Share the knowledge reviews etc.)
- Fix: Scorecard.DatePrinted could be null in some cases due to a bug in the update trigger.
- Fix: Added a space between the input and "px" on leaderboard settings.
- Fix: So IE8 doesn't support array.indexOf.  Damnit!
- Mod: Optimised getting the number of unpaid scorecards as this code gets called a LOT (on every page view of Live, and then some)
- Add: WEAsset indexes to speed up DotGolf Live page loads.
- Add: Release notes for 7/08/2013.
- Add: Setting to control leaderboard font size, so that Louise can modify this for clubs.
- Fix: More test bugs.
- Fix: Validator tests now working too.
- Mod: Removed MainFuncTest as it wasn't really a proper test (and it was breaking...) Fix: Some errors in Progress scoring tests, as well as ambrose gross/stableford.
- Fix: Removed broken test from Live project.
- Add: Unit test status added to Live header. Mod: Fixed the Single round best 3/4 overall gross tests (they were not adding players into the competition properly) Mod: Increased timeout in database setup.
- Mod: Increased delays in TestConcurrentFetching test - think this may have been failing because of Dev1 being a bit slow.
- Mod: Leaderboard - Changed the Leaderboard to increase its font size depending on the font size in the settings table. (DotGolf.Settings.Leaderboard.IncreaseFont) Revert all the changes for the font size that was set at a static value.
- Add: Hideous looking new "white" style for leaderboard.
- Fix: Could not team swingers up when the players were not already entered into a round of the competition (failed to retrieve the players' handicap indexes)
- Fix: If, however unlikely, there is only a single DNF person on the results, the dashboard should have (DNF) next to their name, because they are the leader...
- Fix: P.O.G. Booking Editor when selecting a Ninhole Only member and then changing the slot to a 18 Hole member the editor remains selected for 9 Hole
- Fix: SignalR tab restrictions for Chrome users, so that Matt can stop using Internet Explorer.
- Fix: KIOSK - Issue when entering a card by card no when the card is not in any comps, KIOSK stays on "The system is currently processing your request.  Please be patient." with a JavaScript error in the console
- Fix: P.O.G. Issue when Booking a player that is required to pay a green fee and then changing this booking to a player that is not required to pay a fee, this resulted in the new booking to still have the previously assigned fee
- Mod: Rounds Played By Date Report - has been corrected to not show NaN but show 0.00% when there is no %GreenFee cards
- Add: Competition types list added to dashboard so that you don't have to go into the setup to see what they are.
- Mod: Issue with the watermark causing the players registration screen on the Org site to break.
- Fix: P.O.G. Dragging and dropping bookings on the same ticket that were paid on-line was not showing on the payments PageNumber Fix: P.O.G. Dragging and dropping bookings on the same ticket that were paid on-line should not be split e.g. "Move Player" option as this splits the ticker and creates a nightmare in terms of payments, so for paid bookings we no longer allow this
- Fix: Leaderboard: Twos are no longer shown in divisions.  This also fixes my earlier fix which only showed the first division of twos (which was even worse than what we had before - at least all divisions were being shown!)
- Fix: Results were not being decached properly because we update a result record and there is no way to tell that this has happened.  I have put some code in there to update the CreateDate (ugly I know) - but at least this will nudge the cache back into life.
- Fix: S.C.A. Creating a booking from golf.co.nz and then printing a card and then deleting the card created duplicate Payment lines and this causes the booking editor to fail as-well as the Payments page
- Fix: P.O.G. Non-Affiliate bookings created from golf.co.nz with only a Last-name shows the last-name as both first-name and last-name
- Mod: Removed results stats logging code - this would generate too much traffic on production.
- Fix: Slight change to DataCache to ensure stale cached objects don't stay hanging around in webserver memory.
- Mod: DataCache strategies improved and tests added to validate.  In the past, when the cache has expired an item, any further requests for that key will all fire off a refetch (which runs the DataCacheMissedDelegate in turn fetching the data/object/whatever).  When this fetch takes a while all further requests to the cache were blocked because there was a lock(cache) statement.  This unintentionally blocked /ANY/ access to the cache, regardless of whether it was related to the current fetch (data key), causing a performance bottleneck application wide.
- Mod: Try another way of alleviating cache locks.
- Test: try using per-cache key locks rather than locking up the whole cache.
- Mod: Reverted DataCache mods for the most of it.
- Add: More stats logging to DataCache - also changed the IF slightly.
- Try removing locks from DataCache to see if that helps concurrency.
- Fix: Oops, it wasn't even compiling.
- Mod (TESTING ONLY): Change some stuff in the data cache to try and reduce results code stress on DotGolf Public.
- Fix: Booking's that were paid online and then moved via the P.O.G. does not show in the "Tee Booking Payments" area for authorisation
- Add: StatsD debugging code to check results caching.
- Mod: Try a NOLOCK to stop locks when reading the CreateDate off RSResult.
- Fix: cast null to an int accidentally.
- Fix: Another EF performance issue with the tournament results widget.
- Mod: Temporarily comment out to test performance.
- Fix: Object reference error due to Tournament Web service user differs from the PX Pay user
- Fix: Billing token was not retrieved due to user not found as the Tournament Webservice user differs from the PX Pay user
- Fix: Was storing registrationId with Billing Token instead if transactionId
- Fix: Missed these images on a previous commit
- Mod: Performance: Replaced more frequently used EF code with Dapper equivalents.
- N/A - this was only a line break change but I only realised after I committed this :)
- REVERT: Fix: Clear the greenfee for the selected entry to try and avoid the wrong fee from saving for full playing members
- Fix: Clear the greenfee for the selected entry to try and avoid the wrong fee from saving for full playing members
- Mod: Changed out a very slow EF call (for getting page controls from the database) with a Dapper equivalent which is much faster. Mod: Other small performance tweaks.
- Mod: Added new DPS_PXWS_USER_ID for Token billing with Competition Registrations Mod: Changed the way the BillingToken is stored due to the fact that the DotGolfTournament web service user does not match the PX Pay user
- Fix: Don't show divisions for Twos competitions.
- Emergency fix: Don't exclude immediately recalculated entries from background recalculate process, as these entries may form part of a multiround result which was not calculated initially.
- Fix: Score input control was immediately calculating way too many results because it wasn't checking whether people were in teams already before removing them.  This caused a performance issue at Waitemata when entering 4BBB Stableford scores with 70+ teams.
- Mod: Leaderboard - Change the outstanding count for the latest round for the same competition and only show the number of outstanding cards for that round.
- Mod: SideBarTwitterFeed Control updated to use the official twitter widget due to jquery.twitter not working with twitter api v1.0 any more Add: SideBarTwitterFeedConfig page to configure the twitter feed widget
- Mod: Competition Players screen now supports creating teams with swingers.  To do this, hold the CTRL key while selecting players to team - you'll be able to select 3 players and 2 teams will be created.  This is only valid for 2 player competitions.
- Fix: Connector dropped a card every time the printer list was sent to the webservice.
- Mod: Player Registration (1391) - When there is no draw setup for a team competition, the "Auto-Team for Draw" link will not be seen.
- Fix: Error when printing cards for a club that has no holenames & playtimes
- Undo: we do import eclectics from DGE
- Fix: (Connector missing cards to be printed) After detecting the IDENT_CURRENT change, also check the table directly to ensure we don't get a ghost read and drop a card this way.
- Mod: Leaderboard (1428) - For Twos Competitions, the "There are not results" overall screen has been removed. This will still show for the Org site and and all other Competitions types.
- Fix: Cannot insert value null Error or ScoreCardNonaffiliate table when re-printing a card from the P.O.G. for a visiting member
- Mod: Added Hole Playtimes to ScoreCards as they were not showing on any of the cards from the connector project
- Fix: After the most recent changes to live_GenerateOrUpdateCompetitionRoundSegments some DGE Legacy competitions did not generate any segments, for consistancy and avoiding to break the well tested NextGen comps we now update these DGE competitions before we run the segment generation script, two of the main game changers here is that we now allow marker selection by round and we introduced a composite marker. Since we always have rounds the segment generation script relies on getting it's marker information from the rounds so the markers on the rounds should always be set / updated accordingly e.g. crse=0 mrkr=0 : default / crse=0 mrkr=-1 : all / crse=1234 mrkr=4567 specific, unless we have markers set on the Divisions then segments are generated based on this or we have a composite in which case we generate segments for the composite
- Mod: Bake the connection string into the DLL rather than putting it in a config file.
- Mod: Try to remove the NUnit version dependency.
- Add: Proper exception for missing connection string.
- Fix: NUnit tests fixed and upgraded to latest.  Removed a lot of broken/old tests. Add: Automatically run tests against a separate database created on the fly (in Release mode).  In Debug mode we keep the database around (you can always delete it when you're done).  Currently we don't automatically run schema upgrade scripts yet, but this is going to happen soon.
- Mod: POG (1433) - When a competition includes the GreenFee, the GreenFee record will be removed from the system to show the correct Fees for the current member. Mod: SCA (1433) - When removing a scorecard that has competitions that include GreenFees. If the member should get a GreenFee, it will check if there is a current GreenFee else get the last GreenFee that was removed before entering into the competition. Mod: Developers note: Added to columns on the TXLineBasic Class (PaidDate and DeletedDate) Mod: Developers note: Created a method that returns the last GreenFee for a TimeslotEntryId even if it is deleted or not. This was created to return the last GreenFee that was deleted when a competition included the GreenFee in the setup.
- Fix [MAJOR]: Multi round 4BBB results were being combined into a grand total incorrectly - we were getting the best score for each hole (across all rounds and players), and adding these 18 best scores together to come up with a total.  Instead we should be summing together the team score for EACH ROUND.
- Fix [MAJOR]: Results system was not using the correct handicap index or course handicap when calculating multi round team competition results (eg. 4bbb).  Instead of using each individual player's handicap to work out their points, the first player in the team's handicap was used for both players, as if it was a team handicap.
- Mod: Better Marker.ToString() method which highlights expired markers. Mod: Updated Results class diagram.
- Pennants: - Fix: don't show a score next to the grand final winner.
- Pennants: - Rank by rounds won, lost, then points.
- Pennants: - Drop the "S"
- Pennants: - drop the S
- Mod: Online Bookings (1415) - When players that were booked by other players, log onto the public website and add third player to the timeslot. The first player who booked will not be able to change the third player.
- Pennants: - Fix: Relegation wasn't picking up the loser of a division properly (using no. -1 seed)
- Fix: P.O.G - Players booked of Tee 10 did not get the correct marker for 18 Hole competitions when the competition marker is different from the defaults for the day, changed CalculateCompetitionRoundSegmentForPlayer to ignore the ForceBacknine flag for 18 Hole Comps
- Mod: Results: Don't DNF people in Twos, Jackpot or Net Eagles comps.  I have also reverted Peters rev 14472 which added this logic to the base class.
- Pennants: - We're DotGolf, not Dot Golf.
- Pennants: - Add link to public site for demo.
- Pennants: - Bonus points now calculated on the contest level as we're no longer ranking by Points.  This means that the RoundPoints now includes bonus points and you don't have to go to the overall level to get these.
- Pennants: - Results calculation should not award Rounds Won/Halved/Losses based on Points ranking, instead use matches won greater/equal/less than matches lost.
- Pennants: - Watermark for GolfNSW
- Fix: Registration options page did not let you save if you only filled one of the From or To handicap index restriction fields (had to enter something in both fields)
- Pennants: - Added "x teams are without players" text - CSS cache buster tags.
- Pennants: - Cache buster tags.
- Pennants: - Better headings on ResultsByTeam.aspx
- Pennants: - Add Teams and Rounds columns to tournaments grid.
- Add: New sideshow image's
- Mod: Registration Class - Ability to only update details for a particular club upon registration Mod: URegistration control - Change "Update my profile with these details" to "Update my [CLUBNAME] details with these details" Mod: URegistration Control - When registering for a competition from a Club website and the player chooses to update their details we need to pass through the ClubId as we only update details for the club of the website they are logged into not their entire profile like golf.co.nz
- Mod: Results calculation (1423) - For Competitions that have more than one competition type, I have created a method that looks for specific competition types, (Eagles, Twos and Net Medal), that will not DNF the specific competition types if the other competition types have been DNF. This will only be for single player score entry. (Please note this is a test check in as the method is not working when running form my machine)
- Pennants: - Don't allow players to be added to a team (or the competition) twice, causing duplicates.
- Pennants: - Display per-contest venue text correctly. - When there are no results, don't let user drill into the Contest view.
- Pennants: - Per-contest venues (primarily for home and away scheduling)
- Pennants: - Round robin mode - Venue is usually the BYE team for odd numbers of teams.
- Pennants: - Add Home and Away schedule generator.
- Mod: Changes to BillingToken table, we only look up Billing tokens from the DotGolf user for Teebooking
- Pennants: - Add a round heading to the draw display so that finals are more obvious.
- Pennants: - Don't link up the seeded entry teams any more, just copy the teams (link the players because of laziness).  This makes the demo code much easier to deal with.
- Fix: Prize report - Ball rundown % of players does not allocate any prizes in the case where the calculation returned a value of < 1 so we just select 1 in this case
- Mod: Leaderboard (1432) - Make the Leaderboard automatically show the LB Banner if there is one. Please note if the "noheader" is selected it will show no banner. Mod: Leaderboard (1432) - If a player has been DNF, the LB will show the DNF instead of the round total for the member. Mod: Leaderboard (1432) - Removed the old banner load method. Mod: Leaderboard (1432) - Show the outstanding scorecards for the round for that day only if it is a multiple round competition.
- Pennants: - Could not update team name from division comp.
- Pennants: - More work around the tree view in results.
- Pennants: - Ability to have finals competitions as part of a pennants tournament.  This includes the ability to load entries for the final competition straight from the seeds for the other competitions in the group.
- Mod: Enabled copy competition again Fix: Comp Setup - Copying a DGE Legacy comp will set the round markers from the Competition Defaults, if there are no defaults or we are unable to determine the defaults we just set all rounds to use the default of the day, this was done to avoid these old competitions from being copied and causing invalid segments or none at all!
- Pennants: - Moved results code into DotGolf.Shared. - Finals are now displayed under Draws, for each division. - First beta version of the results tree added; this is mostly only for layout, going to bind it all up later when I've done the ORG side of things.
- Fix: TournamentDrawWidget (1431) - For the Org System and using the user, 5eve, the widget breaks as it looks for products but the user has no ClubID.
- Mod: DPS Re-Bill transactions cannot bill across user accounts and we now have two DotGolf for teebooking and DotGolfTournament for tournaments so we need to store a BillingToken for each account that has been used to process a payments Add: New Buttons for Pay using existing card and using other card
- Fix: Leaderboard - Move the settings form the Kiosk section to the Leaderboard section for the IncreaseFontSize on the Leaderboard. - Committed new line to rebuild solution for DEV
- Fix: Leaderboard - Move the settings form the Kiosk section to the Leaderboard section for the IncreaseFontSize on the Leaderboard.
- Mod: DPS Re-Bill transactions cannot bill across user accounts and we now have two DotGolf for teebooking and DotGolfTournament for tournaments so we need to store a BillingToken for each account that has been used to process a payments Add: New Column to BillingToken for DotGolfDPSUserId
- Mod: Leaderboard - When the setting table has the "DotGolf.Settings.Kiosk.IncreaseFont" value set to "true" the Leaderboard font size will be increased. This will only happen for the LIVE system.
- Mod: Aus - ULogin control | Set focus to username when page loads
- Pennants: - Don't show "Venue: null"
- Pennants: - Don't show "Venue: null" - Change "Remove" link to "Delete Round" - more descriptive. - Improved styling on Round boxes; Schedule.aspx. - Fixed binding accumulation mode on Setup.aspx - Highlight selected team in Team Summary grid (TeamMaintenance.aspx).
- Pennants: - Ability to delete competitions and competition groups (can only delete a group once all the competitions have been deleted) - Removed "Rank" column as it does not get populated anyway. - Default Gender to men.
- Fix: URegistration control was using details like Phone / Email etc. from the CMember of the HomeClub
- Fix: KIOSK - entering a card by card no for players that have been pre-teamed resulted in a black screen due to no parters being returned for selection
- Fix: Player registration should not allow registration of players with a pending handicap
- Mod: Copy Competition - We needed to stop clubs from copying DGE Legacy comps as it currently creates comps without segments that require running of manual scripts to resolve
- Pennants: - Removed "Copy" link as it doesn't work anyway.
- Pennants: - Work around navigation for org site.
- Pennants: - Hacked in a bit of navigation, it's not great at the moment but it's better than having nothing at all.
- Fix: Use DotGolfTournament user for DPS billing from URegistration control
- Pennants: - 1 point for team win - accumulation did not work properly because 0.5 was allocated (per rounds) to teams that did not even play. - Bonus points are no longer allocated if you tie with another team for first position.
- Pennants: - Add bonus points for round win.
- Mod: Prize Report (1411) - On before the report results are shown, the system will recalculate the PrizeAllocations to ensure the correct player is leading on the prize report.
- Fix: Rounds Played By Date - The report was showing reporting incorrect counts for each player type when you filter the report.
- Mod: Read ASSOCIATION_ID from web.config as well.
- Mod: Read connection string from web.config.
- Fix: Don't start recalculate method if we don't have any entries to recalculate - this ran a pretty expensive query to get a list, then filters the list and finds zilch.  Waste of time! Add: Included strategic columns with 2 indexes to speed up segment calculations and result recalculations (when they need to happen).  These are on CompetitionRoundSegment and CompetitionDivision, tables that don't change too often.
- Fix: Unhack the Waitemata hack - apply to all clubs.
- Mod: Quick hack to make Waitemata's partners appear in alphabetical order on the SIC.
- Add: Index for performance.
- Mod: Green Fee Future Summary Report (1419) - Corrected the below issues: Added an extra filter to include and exclude online payments. Corrected an issue with the Deleted amount on the scorecard not showing the correct amounts. Corrected the plural of Green Fees when there is more than on 1 unassigned Green Fee. Corrected the state of the check boxes when you click update, preview or back to summary on the report page. For unassigned Green fee, some of them were blank but these were competition fees and were changed to show the user that these of outstanding comp fees. Corrected the Online payments amount captured at the bottom, when you check and uncheck the include online payments on the report screen.
- Mod: Green Fee Summary Report (1419) - Corrected the below issues: Added an extra filter to include and exclude online payments. Corrected an issue with the Deleted amount on the scorecard not showing the correct amounts. Corrected the plural of Green Fees when there is more than on 1 unassigned Green Fee. Corrected the state of the check boxes when you click update, preview or back to summary on the report page. For unassigned Green fee, some of them were blank but these were competition fees and were changed to show the user that these of outstanding comp fees. Corrected the Online payments amount captured at the bottom, when you check and uncheck the include online payments on the report screen.
- Fix: If there is no MOTD the Tee Booking section in the kiosk will crash out with ORNS.
- Fix: If there is no MOTD the kiosk will crash out with ORNS.
- Add: Index to fix card printing performance issue on production.
- Fix: Show Gross, Net, Stableford, 4BBB *, etc before the Twos (hole list) types, in DisplaySequence order when picking a CompetitionType to show on the dashboard widget (for results). Mod: Add the competition type name so that it is obvious which result you're looking at. Mod: Let users go through to the results report even if there are no results.
- Fix: Pre Print with Logos - The incorrect logo information was passed to the printer when trying to print with a logo on pre print.
- Mod: Manage Logo - For big resolution images, the preview image will not overlap the right margin.
- Mod: Kiosk - Messages on the Tee Booking will display correctly when there are special HTML characters in the message.
- Mod: Kiosk - Messages on the kiosk will display correctly when there are special HTML characters in the message.
- Mod: Handicap and Course Handicap override - when you add a course or Handicap override for a player on the org site, this will reflect on the results report correctly.
- Mod #1426: KIOSK - We need to show the post-it note when the KIOSK is in single function mode e.g. only used for printing cards and only the keypad is visible Mod #1425: We need to hide the back button when the KIOSK is in single function mode e.g. only used for printing cards and only the keypad is visible
- Add: Release notes for rev 14403.
- Mod: Next Gen Comp Upgrade - We need to consider Competitions with future rounds and not only Comps with future dates, added a join to round to use RoundDate instead of Competition Date
- Add: Ability to save swinger scores. Fix: Score Entry: Recalculate swinger team results immediately upon saving to avoid having weird results until the job runs to recalculate them. Fix: First remove players from teams, then add new players - this is to avoid the stupid ERR_TEAM_IS_FULL error which happens sometimes. Mod: Score Entry will now show both partners when editing the swinger's score.  At the moment you can't change the swinger's partners at all (because this stuffs up the results) - at the moment you can edit the other players' scores to change the swinger. Add: RSEntry.ToString() convenience method - really nice for debugging. Fix: Bug where if there is only 1 non-teamed person left in the comp, that person would be selected as the partner for anyone whose score is being edited.  Oops...
- Add: Score index IX_Score_CapturedDate_CapturedByClub for performance.
- Mod: Prize Report - Don't show the words "None" or "Custom" as part of the prize description
- Mod: POG - Message board that appears on top of the POG screen has been changed to handle special HTML Characters.
- Mod: SCA - When a player is already pair into a team this will allow the user to reprint the card from SCA correctly without returning an error.
- Mod: Create the following settings as part of the NextGen upgrade for clubs - TeeBookingRequiredToPrintCard, AllowPrintAfterFinalTeeTime, AllowBookingsFromKioskWhenPrintingCard
- Fix: The results system was not tracking whether a handicap index was a 9 hole or 18 hole handicap, leading to all sorts of issues in the Entries and Results reports.
- Fix: Recalculate results method did not take into account 9 hole handicaps.
- Pennants: SQL scripts.
- Reverted the change below and introduced a variable to include all potential partners, the default is true and when querying partners from the kiosk we set it to false so that we only get the partners from the same timeslot, pre-teamed cards should never get the team selection from the kiosk so they will never see any partners
- Fix: Missed these files on the last commit
- Mod: If, at the time of printing the scorecard, we have teams already set up (i.e. done through the pre-registration area), do NOT use the team card, instead print a singles card.  This is so that we can avoid the player ticking other players on the scorecard and stuffing up scanning teaming that way.
- Pennants: - Don't try to validate rounds that are invalid and deleted client side.
- Pennants: - Error when trying to change competition name (and team contact info is left blank) - When creating a new Finals comp you don't get the divisions listed under the "based on results" option, until you save and refresh first.
- Pennants: - When adding a new pennant tournament, hide the tournaments grid. - Change "competition" to "division", all areas. - Hide the "based on results" option in setup if there are no other competitions set up in the group. - Various terms changed on some forms. - Removed date from tournaments grid. - Team summary count was including deleted players. - When adding team players, check the gender. - Score entry - player names should be proper case. - Don't show "halved" option in score entry if halves are not allowed. - Don't show Playoff holes if halves are allowed.
- Fix: KIOSK - When the partner of a team competition scans their card they get a list of all players entered into the round, the change that caused this problem was commented with the following "Fix: When changing teaming on the score input control, when removing a team player you could not add other players in the competition, only the pre-teamed players.  Oops." we cannot remember exactly what this change was supposed to fix and have removed it so we will need to do testing with the S.I.C.
- Add: Token billing for URegistration control
- Fix: DGE Comp Upgrade - NextGen comps that are for both genders now needs a DefaultCourseId = NULL on the comp record and a CourseId = 0 on the round records for the segment generations script to generate the correct defaults for Men and Women
- Fix: Only validate Min/Max handicap fields if the are visible, this is was causing Nomads comps to not save as these fields are hidden
- Fix: Partner cards printed player name for all the partners
- Fix: Connector - partner selection was not detected when the mark was too dark
- Mod: TournamentRegistrationsWidget (1422) - Modified to handle users with no ClubId when viewing the Tournament details.
- Pennants - small tweaks for demo.
- Pennants - Small tweaks for demo.
- Mod: Green Fee Summary Report (1419) - Added an extra filter to include and exclude online payments. Mod: Green Fee Summary Future Report (1419) - Added an extra filter to include and exclude online payments.
- Pennants: - Allow viewing match details when clicking on the crosstabbed All Teams view points cells.
- Pennants: - Hyperlinked the team name in All Teams view.
- Pennants: - Ability to view results for All Teams, crosstabbed for the points scored in each round.
- Pennants: - Ability to view results overall, by team and match detail.
- Fix: KIOSK - Maintenance Logo was not appearing on the top left corner for the Kiosk.
- Fix: Pre-print - When one of the players are not entered into the draw, the Pre-print screen fails to load completely.
- Add: Newtonsoft Json package.
- Add: Newtonsoft Json package.
- Pennants Public Site: - Draw display functional. - Work on templates for future extensions. - Linked to DotGolf.Shared, enabling database access. - Various styling/other tweaks.
- Pennants: - Finals series are now supported where the teams are entered automatically seeded from other competitions. - Times can now be specified for contests, for display on the draw (public site) - Competitions can now be grouped together (Stored in CompetitionGroupCompetition table).  This is in preparation for promotion/relegation and the pennants public facing site. - Various minor tweaks
- Fix: Comp Dashboard - "Outstanding Card" count showed 1 before the comp had any entries
- Fix: ScoreCardImage Retrieval - The first image that is scanned for the card was also returned. Correct the call to return the latest scorecard image.(Checked in with an extra column)
- Fix: ScoreCardImage Retrieval - The first image that is scanned for the card was also returned. Correct the call to return the latest scorecard image.
- Fix: ORG - Show "Outstanding Cards", I hid this on a previous commit due to the fact that ORG does not have card printing but realistically this actually works of results and not score card records Fix: ORG - "Outstanding Cards" was calculated as negatives for rounds that had Disqualified of Withdrawn entries Fix: Live - "Outstanding Cards" was calculated as negatives for Team Comps
- Mod: Tournament Registration (1383) - For override handicaps, if the player has change the handicap for round 1, then we should show that handicap for the “current handicap”
- Fix: Blank scorecards wouldn't print from computers without a working Connector.
- Mod AU Only: Results link was hidden from the Comp Dashboard for AU back in 2011, since there is no good reason commented and it is required we will enable this now
- Mod: Don't add Connector UID to LogMeIn Rescue computername as it uses up a lot of real estate in the LMI Rescue Console.
- Fix: Leaderboard (1412) - Left aligned the Name and Club header to match the data below.
- Fix: Remove time limits on leaderboard refreshes as it was stuffing with Raspberry leaderboards (because these run on UTC!)
- Mod: Edit Players in Draw (1414) - For the Org site, Auto Generated players will not appear in the players list.
- Fix: Leaderboard should not show the Course Handicap column for 4BBB competitions.  The rule is now: Only show the course handicap column if this ia a non-holelist competition AND it is a single player competition.  Also show the course handicap column for team competitions where there is a team handicap (like Foursomes/Ambrose).
- Fix: CompetitionEntryFeeReport - Report crashing for single round comps due to IndexOf on the HeaderRow formatting failing to find "(Round" string
- Fix: P.O.G. / C.P.A. - Preregistered players entered into competitions were created as new entries and the RSCompetitionRoundSegmentEntry_Inserted trigger did not fond these entries in the RSCompetitionEntry table and created them as "Auto" entries on the Player Registration Page
- Fix: DrawReport (1408) - The report has been fixed for draws that have been setup on the LIVE site where the customer needs the report to see the draw schedule and for draws that have one draw but multiple competitions within that draw. (This was producing a display issue on the report).
- Add: Statistics code to log logins (by cookie or form post) and also sessions created in total.
- Fix: Played / Captured dates were not appearing on the Tee Booking Green Fee Detail report at all, making it very hard to read.
- Fix: Tee booking green fee report did not match the slicer email.  This was originally a problem caused in both the next gen and legacy report caused by performance improvements in rev 13460.  The problem was subsequently fixed in rev 14237, but only in the next gen part of the procedure.  This commit fixes it in the legacy part too.
- Fix: P.O.G. - Entries were duplicated when booked into a group slot due to missing where condition for the timeslot entry
- Fix: Show Card Type and Payment date on the Success registration screen Mod: Do not redirect from the ProcessDPSResponse page if it is a DPS Post
- Add: ProcessDPSResponse.aspx for processing the DPS Response after player registration Fix: After payment wrong status screen was displayed
- Fix: Errors when processing bounce messages without a message body. Mod: Missed a few bounce message formats - added those in.
- Mod: DrawReport (1408) - Change the report to not look for entries that have been already printed. Mod: DrawReport (1408) - Corrected the issue with the report if no rounds are selected
- Mod: DrawReport (1408) - Assigned the report group if there is records for the report else the report breaks Mod: DrawReport (1408) - Corrected the issue with the report if no rounds are selected
- Mod: Connector now installs .Net 4.0 rather than 4.5, tested on Windows XP.
- Fix: Missed out a (non crucial) project file.
- Fix: PrePrint (1397) - Change the cache to the CompetitionRoundId instead of the Round Date.
- Mod: PrePrint (1397) - Modified which method is use the competitionRoundId instead of the competitionRoundDate.
- Fix: URegistration - Change ConfirmPaymentPage property to DPSResponsePage
- Fix: Org broken due to using Shared.FromHttpContext instead of Webuser
- Fix: Comp Setup - No segments are generated when changing between 9/18 hole and then selecting a marker and then adding a division
- Mod: Comp Setup - Don't allow adding of divisions untill we have fixed divisions for Both Genders
- Mod: UNextEvent - Only show link for Draw and Registrations is a user is logged in
- Fix: Comp Setup - Selecting all markers and then adding divisions shows the correct markers in the dashboard but does not load the correct selection when opening the setup
- Add: Ability to set the slicer email address directly from the Live settings area.
- Fix: UViewDraw & UViewRegistrations - Left Align headers for IE10 Mod: Added links and properties for Draw and Registrations on the UNextEvent control
- Competition Entries Report tidyup: Fix: Title was saying "Competition Results" Mod: Hide the "Group by Divisions" checkbox if the selected competition has no divisions. Mod: Show "Round 1 - 1/1/2000" in the subheading rather than "As At <today's date>".  When displaying rounds with multiple dates for the same round no, list all the dates for that round. Add: Link on the Member No column to take you to the member details screen.
- Fix: Players registered via DotGolf live did not show as registered in ClubCMS Mod: Added Setting for DPS Payments Fix: Don't show players text on UViewDraw control when there are 0 players Fix: Don't show date on UViewDraw control if no draw has been created
- Fix: Adding a division to a comp that is set to marker selection by round creates a division for a default marker resulting in a default segment generation
- Fix: Marker selection by Division was generating segments for default's
- Mod: Comp Select - don't show dropdown for marker selection by round/division unless we have multi round and multi divisions
- Fix: Pigeon Pair sql was missing a deleted date for the Competition record
- Mod: POG (1403) - When deleting or restoring a competition, a log record will be created.
- Fix: Russian Roulette results were not being ordered correctly.  The score ordinal was calculated by adding the ordinals for the two team players' rounds together, rather than working them out on a hole-by-hole basis and multiplying each hole together before adding.  This requires recalculating the results for all Russian Roulette tournaments - David will run a script for this Monday after publishing.
- Fix: Leaderboard (1393) - Corrected the issue with the Round not showing when look at a specific Round Details. Mod: Leaderboard (1393) - Modified the UnreturnedCardsCheck to taken in a CompetitionRoundID if needed.
- Fix: Comp Setup - Issue when saving Single round multidivision comp with All-courses Specific marker was generating defaults with specific
- Mod: Leaderboard (1393) - Branched the EDGE and LIVE Leaderboard from the ORG Leaderboard for the timer settings.
- Fix: Bug where if you have default markers set on a day, then setup a competition with divisions which use different markers to the default, the division segments will have the correct markers, but another segment (or segments) with default markers would also be created.
- Fix: Hidden holes (or any hole list competition) does not work for the back nine if you select the individual holes in competition setup.
- Fix: Comp Setup - Saving a comp with All courses Specific Marker was generating segments from All courses Default Markers and All courses Specific Markers Fix: Comp Setup - Selecting a Composite marker and then changing "Same marker for all rounds" to "No" was still generating segments for the composite marker
- Fix: Tournament registrations widget was broken due to a Shared.Club reference (from Live)
- Fix: KIOSK (1402) - Maintenance Logo was showing under the left advert Image on the kiosk
- Mod: Leaderboard (1393) - Changed the timer for the first screen to 30 seconds and the rest of the competition to 10 seconds Mod: Leaderboard (1393) - Removed the overall results for competitions that have divisions setup Mod: Leaderboard (1393) - Removed the round one label if the competition has more than one round
- Mod: Upgraded Asterisk.Net library in Adweb, upgraded to .net 4.5.
- Fix: Scorecard Entry (1401) - Display the nine hole member handicap index correctly when capturing the score.
- Fix: UViewDraw.ascx - removed round selection for now
- Add: Competition Draw Control
- Fix: UViewRegistrations - Show registrations from DotGolf live
- Add: New columns on TBTransaction to allow searching for specific card numbers (quickly).
- Mod: TournamentRegistrationsWidget - Don't show the outstanding cards column for clubs that don't have the CP product
- Fix: CompetitionType (1400) - Update the competitionType for the "Best 3 of 4 Team Overall Stableford" to have a descending sort order.
- Mod: PrePrint (1397) - Modified which method is use to calculate the handicap for the player or team.
- Mod: Score Entry - we no longer need to be able to search away courses for Nomads as this is driven from the selected competitions
- Fix: MemberQuick Search - when filtering home members only typing a full computer no still returns a visitor
- Mod: Competition Fees Report (1396) - Change the way the report Header is displayed. Eg:  [Date] (Round 1 of [Total Round])      [Competition Name]
- Mod: Score Entry - Allow score entry by selecting default competitions, currently the course and marker are driven from the 1st selected competition, this is only used for Nomads and cannot handle multiple courses and default markers right now
- Mod: Competition Fees Report (1396) - Changed the As at to the Round Date for the selected Competition Round Date. (The print date was already at the bottom of the report)
- Mod: Print ScoreCard (1395) - Opposite gender stroke is being correctly displayed for Non-Affiliate players.
- Fix: Oops, broke the login page by checking for the PENN product.
- Mod: TXTNotifications (1394) - Added the text to the Register and Cancel buttons
- Fix: Don't show pennants if you don't have the product.
- Mod: Leader board (1392) - If the competition Type has the ShowHoleList activated, the list will be order by the Players Name. Mod: Leader board (1392) - The outstanding scorecard count has been modified to match the competition results report.
- Fix: Build error in ORG caused by Shared reference.
- Fix: Creating a booking from the KIOSK for a 9 Hole only slot creates a 18 Hole booking although the KIOSK shows 9 hole Fix: Bookings created from the KIOSK show in the booking history as created from golf.co.nz
- Fix: Added a PaidDate check in there so that we don't count non-paid ticket entry lines when checking whether to capture a transaction.
- Fix: Scorecard Listing by day (1384) - Corrected the report for the Nomads club showing incorrect scores. Fix: Scorecard Listing by day (1384) - Added the All Courses to the drop down for clubs that don't have courses.
- Fix: LoginPage - Corrected the typo for the login expiry date message.
- Add: Release notes for the week.
- Fix: TournamentRegistrationsWidget accidentally removed the "5 players registered for this competition." message when fixing a bug where the "WARNING: Only these 5 players are eligible for this competition." was always showing
- Fix: Kiosk - When there is no current timeslot for a non affiliate member, set the markers to 18 holes default.
- Fix: Kiosk (1375) - Set the observable to a value of true or false and not null as the kiosk does not know if it past the final timeslot for the today. Fix: Kiosk - When printing a card for a non-affiliate member is printed, the forcebackNine is set to false as you don't know the starting course.
- Mod: Type 2 Clubs should only see the Score tab if they have NextGen Score Entry and Competitions
- Mod: Tee Booking Terms and Conditions (1382) - Creates new page for the old terms and conditions
- Mod: Tee Booking Terms and Conditions (1382) - Changed the link to the new page.
- Add: Another method to let user code get hold of buckets directly (for timing info etc)
- Add: Explanation to the auto-team link as it doesn't currently work for 4 player competitions.
- Mod: Cache the machine name and UID when it is retrieved from the Connector the first time, as this method gets called a lot.  We may need to extend this later to use pubsub because I'm not sure it'll be quick enough to fix the JS errors we've been getting on SCA.
- Fix: Exclude missing css file.
- Add: Exception count.
- Add: System Prefix for statistics.
- Add: System Prefix for statistics.
- Add: Project Vortex: Start of code to track various statistics across the system.  It's about time that we start finding out how our system is being used.
- Fix: KIOSK (1381) - Prevent the member from entering in a competition, with No TB allowed, twice. Allow the member to enter a second competition, with No TB allowed, later the same day.
- Mod: UViewRegistrations style changes
- Mod: UViewRegistrations style changes
- Mod: UViewRegistrations style changes
- Mod: Login - Added a extra check to notify if the username has expired.
- Add: Registration (1383) - Added new combo to change handicap between "Current Handicap" and "Handicap at Registration"
- Add: UViewRegistrations control
- Add: UViewRegistrations control
- Mod: Kiosk (1375) - The screen, "Are you a member of a golf club?", will appear if the club has the product TB with the following: (a) there is no Tee Sheet for the day (b) Current time is past the last TimeSlot on the TeeSheet. - Forgot to checkin the cs file
- Mod: Kiosk (1375) - The screen, "Are you a member of a golf club?", will appear if the club has the product TB with the following: (a) there is no Tee Sheet for the day (b) Current time is past the last TimeSlot on the TeeSheet.
- Fix: SIC - Only the first player of every slot that are entered and partnered into the 4BBB comp using the SIC are showing on the results
- Fix: Public build was broken due to a change to ScoreModelService (referencing CompetitionSelectorControlService which wasn't included in the build)
- Fix: When a scorecard is deleted (or you remove someone from a competition), they should be removed from the players list if they were automatically added before (RSCompetitionEntry table).
- Fix: Error with the Captured column I just added.
- Add: Captured column to ticket entry view.
- Mod: Payment Screen - Changed the SQL to authorize the ticket if the one member did not receive a GreenFee.
- Deployed script.
- Mod: Tee Booking Green Fee Detail - Change the way the tables are joined to return the correct data
- Mod: Draw - Show timeslots list by default when it is the only option Fix: Draw - Nomads, when clicking create draw from group booking it does not create the draw from the Group Bookings and does not show the player list Mod: Draw - Some warning message style changes Fix: Draw - Clicking the All link at the top of the slots grid selects disabled checkboxes
- Mod: Draw - Show a Warning when there are group booking slots that are outside of the rounds start / end times - Message should only be show for group bookings
- Fix: KIOSK - Entering a comp that includes a green fee from the KIOSK was still creating a greenfee TXLine record
- Fix: Draw - Show Timeslots when a default group booking is selected Mod: Draw - Show a Warning when there are group booking slots that are outside of the rounds start / end times
- Mod: CompetitionSelectorControlService - Added ValidHandicapping for use with ScoreModelService when entering by memberNo Mod: Comp Setup - Allow values > 99.99 Fix: TournamentRegistrationsWidget - Comps was always showing the warning for "Only these players can enter" Mod: MasterPage - Added novalidate to the form to stop STUPID IE10's HTML5 maxlength validation from breaking some of our ajax calls, this happens when a textbox is set using script and the value exceeds the maxlength Mod: MasterPage - small change for AssetGroup.Scores to use Davids new and improved HasProduct logic
- Mod: KIOSK (1385) - The kiosk will show the advertising logos even if the machine is setup for one function only. Eg: Printing cards.
- Add: Basic changes.
- Add: Basic changes.
- Add: Pennants system so far.  We can set up tournaments, competitions, rounds, teams and players, as well as enter scores.  No results available yet.  We are also about to change the way that competitions are grouped to account for the NSW multi division finals format.  Schedule generation - only Round Robin works so far.  Various links are not implemented; this is very much in beta.  Need to turn on the PENN product to see any of this for districts.
- Fix: HasProduct() function didn't work for queries with more than 2 products and the same operator, for example "TB & CP & HC".
- Fix: KIOSK - Clubs using the Anarchy setting was not showing competitions that are set to print without teebooking
- Mod: UNextEvent - Added message for event's that has no registration options setup yet
- Mod: RegistrationOptionsEdit - Do not show products for DotGolf live
- Mod: URegistration - Remove Residency Status Mof: URegistration - Changed login Message
- Mod: Ignored user files and folders.
- Add: Initial Golf NSW site template as created by Peter.
- Add: Initial Golf NSW site template as created by Peter.
- Mod: Score Entry - Course select was wrapping to the next line Mod: Score Entry - Removed some log messages Mod: Score Entry - Changes to allow Type 2 Clubs to select any course Mod: Score Entry - Changes to load competitions by memberId when entering by member Fix: Course Marker Select - Do not load markers unless we have a selectedCourse, this was needed for Type 2 Clubs that doe not have a Default selectedCourse Fix: Score tab not showing due to HasProduct method not able to handle multiple & statements Fix: live_ValidateRoundForMemberOrNonaffiliate - Had to add a check if a member has already entered the current round as the last change to this proc only checks for another round with the same number
- Mod: New background image for NZ Golf promo.
- Mod: Hide Pre-Print Card links for clubs that don't have the "LCP" product Mod: Draw changes for Type 2 Clubs (Nomads) - Show Timeslots from the club where the round is played if the club has only TB Mod: Draw changes for Type 2 Clubs (Nomads) - Show Group bookings from the club where the round is played if the club has TB & NG Mod: TournamentRegistrationsWidget hide Tournament entries for DG Live system Mod: Hide the Scorecards tab for clubs that do not have LCP Mod: Show Scores tab for clubs that have T2 and NG and NGSE Add: Method to get the ClubId for a particular competition round
- Mod: Score Entry Control (1374) - Remove the spacing between the handicap index and nine hole handicap index
- Mod: Score Entry Control (1374) - The control will show a "N" next to the players handicap index if he is a nine hole handicap.
- Fix: Bootstrapper build won't work on WEB1.
- Fix: Release notes widget crashes if we haven't done any release notes for 14 days.
- Fix: Kiosk (1376) - When a club only has one function for the kiosk, Eg. Print Card, the maintenance logo on the top left does not appear.
- Mod: UNextEvent small style changes Mod: URegistration wording changes after payment as entries are automatically accepted
- Mod: Bootstrap installer will now detect and remove DGE icons if the user requests.
- Add: Start of a Wix Burn bootstrap project for the Connector installer - this should enable us to make the .Net framework part of the installation.
- Fix: Player Registration - Registering a member via the visitor details area created and registered a Non-Affiliate with the details of the member
- Fix: Payments Bubble - Corrected the payments bubble to show the correct amount of uncaptured payments
- Fix: Scorecard Handicap Differential Report - Corrected the HD and Course Handicap values on the report.
- Fix: Another problem where if you print a card without a tee booking (SCA) the validation didn't fire properly because the round date wasn't set.
- Fix: When multiple competitions are considered to be invalid, the live_GetInvalidCompsForMemberOrNonAffiliate proc would only return 1 of them (in the multi R1 scenario)
- Fix: Bug where you could enter a player into a second R1 on another date.
- Fix: Competition Entries Report - Corrected the way the course handicap is calculated.
- Fix: Subsequent entries into rounds would still be enforced even if a player was deleted from all previous rounds (missing DeletedDate check)
- Fix: When dealing with competitions where there are multiple R1's, the kiosk allowed people who have entered the previous round to enter into the round again (on the next date).  This is a problem where there are multiple rounds displayed on the same day, and would have caused some really weird behaviour out there.
- AddAdd: Adding release notes for this week. Also, just checking to see what the dotgolf only section looks like after uncommenting David's testing.
- Mod: Added cache buster tag for the .js reference
- AddAdd: Adding release notes for this week. Also, just checking to see what the dotgolf only section looks like.
- Mod: putting the markup <!--DOTGOLF--> blah blah <!--/DOTGOLF--> in the release notes will show the html in between the tags only to DotGolf IP addresses.
- Fix: Error when creating a draw and there are Non-Affiliates that were created without a handicap, reason being we do not create Non-Affiliate records unless we have at least a Name, Surname and Handicap     - Few more issues around creating draw and publishing to the tee sheet all due to Non-Affiliate Visitor booking without a handicap not creating a nonaffiliate record and this was where it was trying to get the gender
- Mod: SCA, BCA - When deleting a card that has been entered into a competition, the scorecard will be removed from the competition correctly.
- Fix: Error when creating a draw and there are Non-Affiliates that were created without a handicap, reason being we do not create Non-Affiliate records unless we have at least a Name, Surname and Handicap
- Fix: Ninehole members were entered into comps as 18Hole handicappers and the Results were showing the wrong course handicap
- Mod: removed log message
- Fix: C.P.A - Non-Affiliates cannot select a 9 hole fee - another problem when cancelling the print card the marker goes back to 9 holes but the fees still show 9hole fees
- Fix: C.P.A - Non-Affiliates cannot select a 9 hole fee - another problem when cancelling the print card the marker goes back to 9 holes but the fees still show 9hole fees
- Fix: C.P.A - Non-Affiliates cannot select a 9 hole fee - missed this file on the last commit
- Fix: C.P.A - Non-Affiliates cannot select a 9 hole fee
- Fix #1366: Leader board does not work when launching from chrome application shortcut
- Mod: Score HD Comps Report - Formatting the report.
- Mod: Score HD Comps Report - Corrected a join as it was pulling in extra incorrect data.
- Add: Score HD Comps Report - Create new detail report showing all the comps and non comps that a member is linked to. Mod: Score Handicap Differential Report - Added the new links for the Non comps and comps.
- Mod #1369: Add two new fields to the member data extract TotalScoresLast30Days and TotalScoresLast12Months
- Fix: Fees were not being returned to scorecards when cards were retrieved individually (this was working when retrieving all cards for a date however)
- Fix: Bug where items that were manually added to a mambership would not be renewed when processing subs (unless they were in the category items with a default amount - which is not normally the case for things like cart trail and bag storage).  This was done for Jannene at Clarks Beach where their cart fees did not renew automatically causing them increased queries from members, and them having to manually invoice the extra amounts.
- Fix: C.P.A / B.C.A - Made a change to use the RoundId instead of the CompId+RoundNo as this was causing cards entered into comps with multiple rounds of the same number to enter into all rounds of that number, at the time of this change we have tried our utmost best to think of any reason why we could not use the RoundId and nothing came to mind, since we are adding a card to a round and all validation has passed there should be no reason why we could just enter the card into the round for the given RoundId
- Fix: Advanced Greenfee - Weekday fees are showing as Weekend when editing the fee and vice versa
- Mod: Moved css into shared css file.
- Mod: Moved some css into the shared css file.
- Add: Omanu Header logo with add banner
- Mod: UFlashMovie - Changes to allow Multiple controls to work on the same page
- Fix: Competition Setup - Enable the Round Date for a competition that has been copied from a competition with entries already in.
- Mod: URegistration - Call RegisterPlayer upon payment success to create RSEntries
- Mod: Clearwater style changes
- Mod: Make dgGetUrlParameter function case-insensitive.
- Mod: Move spinner style into shared css.
- Mod: Player registration - Moved RegisterPlayer Method, Classes and Exceptions into the registration Data Class so we can use it from ClubCMS
- Fix: Competition Entries Report - Corrected the Course handicap, value in (), to display the correct value using the following equations = Round(Handicap Index * (Slope of Course / 113))
- Fix: Performance issue when loading up a competition in ORG.
- Fix: When changing a nine hole member to 18 holes (and this member is currently a junior handicapper), the handicap limits don't get enforced.
- Fix: Do not send emails to NULL email addresses
- Mod: Group Bookings -  Don't show the 'ERR_NO_CART_FEES' alert box for clubs that don't have cart fees
- Mod: C.P.A / B.C.A - Better tool tips for card statuses
- Fix: Green Fees - Allow changing a green fee to $0.00
- Mod: Competition Setup (1085) - Disable round dates if there are players already entered into the competition
- Mod: Extensions GetDayName - Allow for weeks that start on a Sunday
- Fix #1360: Green Fees - Advanced green fee Hours Of Day options days are duplicated Fix #1361: Green Fees - Advanced Green fee display is out by 1 day in the summary
- Fix: api_AddScore and wa_RolloverUpdateMember procs updated to refer to initial handicap rather than the NZGA_Handicap field when there are less than 5 scores.  This should get rid (or reduce the frequency of) the "Adjusted gross doesn't match calculated value" error.
- Fix: Payments Screen - Corrected the issue for Clarks Beach not showing the screen.
- Fix: Get rid of the stupid Dapper metadata error.
- Fix: Wording - changed cards unreturned to cards not returned.
- Fix: Wrongfully committed these Config Files
- Mod: Kiosk (1353) - The "Are you a member of a golf club" screen will appear for clubs with the follow settings, (1) Anarchy Mode on, (2) no TB or TBT Product and (3) with EFTPOS
- Mod: Competition Results - Added the option to hide or show unreturned scorecards.
- SQL: Removed the SQL indexes
- Mod: Results.cs (CalculatePrizeAllocations)  (1364) - Added extra filter to remove DNF records from the list.
- Fix: P.O.G DateCarousel - Utilisation was including all clubs group bookings :(
- Fix: Comp Select - Non-Affiliate Auto entry is not updated when name / surname is supplied after the handicap Mod: Comp Select - Added message for when name = "Visitor" or "Guest"
- Fix: A SQL bug caused the inconsistent results when looking at a member's scoring history, as there is no implicit order to the table when the identity(1,1) column was added.  This caused the ordering stuff up when the number of rows exceeded a SQL data page, presumably...  Changed the sql to use ROW_NUMBER() rather than the identity trick, and this solved it for my test case.
- Fix: Comp Select - Non-Affiliates were auto entered into comps regardless of the AutoEntry flag
- Mod: Score Listing By Day (1074) - Selected the default load to Played rounds
- Fix: Compe Select - Disabled competitions were being checked for auto entry
- Fix: C.P.A - Comps were disabled for printed cards due to non-affiliate validation being called for members
- Fix: ControlSupport reference wasn't working properly.
- Fix: ManageLogos - Remove the number "290" after the return JavaScript.
- Add: Clearwater Clubwebsite images and styles
- Add: Clearwater Teebooking banner
- Mod: Score Listing By Day - Add the Entered/played drop down Mod: Score Listing By Day - Modified the course drop down when Entered is selected to include "All Courses" and "Away Course". If the club is a multi course club, then add "All Home Courses" Mod: Score Listing By Day - Changed the layout of the filters. Mod: Score Listing By Day - Changed the header for the summary to change depending on selected round drop down. SQL: Added to create indexes on the score table to run faster.
- Mod: Try to keep the session alive for kiosk computers by pinging every half hour.
- Fix: Build error after changes for Club CMS Registrations
- Fix: Build error after changes for Club CMS Registrations
- Mod: POG (1210) - Competition Entered automatically, if in competition setup is checked "Auto-Entry into Subsequent Rounds" and the player has been entered in a previous round. Mod: SCA - Top section, for clubs that don't have the TB product (1210) - Competition Entered automatically, if in competition setup is checked "Auto-Entry into Subsequent Rounds" and the player has been entered in a previous round. Mod: KIOSK (1210) - Competition Entered automatically, if in competition setup is checked "Auto-Entry into Subsequent Rounds" and the player has been entered in a previous round.
- Fix: URegistration Handicap error
- Add: Missed these images on the last commit
- Fix: Build error after changes for Club CMS Registrations
- Add: URegistration Control Mod: Login Control - Allow members to login with any one of their Computer Numbers Mod: UCompetitionsCalendar - Show my registration link when already registered Mod: UNextEvent - Show my registration link when already registered Mod: Moved some methods into the Registration Data class
- Add: Competition Entries report can now group by division, and also order by handicap index.
- Fix #1358: Advanced green fee max rounds played does not validate max rounds played
- Mod: Hide the country flag icon on the leaderboard for clubs.
- Mod: Leaderboard now has a course handicap column for clubs (not NZ Golf).  For Net competitions it turns out that the handicap index is also displayed.
- Fix: Green Fees - When you confirm to deleting an item, the grid will remove that item.
- Fix KIOSK: Women's Comps with divisions created from DGE has Male divisions by default and this was causing some women comp to not show
- Fix: When changing teaming on the score input control, when removing a team player you could not add other players in the competition, only the pre-teamed players.  Oops.
- Add: New version of the Next Gen upgrade utility.  This now automatically uploads the extracted data to the central system, ready for us to run the import.  (The file got too big to go on the clipboard so I switched to a webservice call).  This new version of the utility also supports scores not valid for handicapping - these will now be uploaded and imported as RSScore records, and their results generated properly.  (Twilight for Clarks Beach) Mod: Imports are now stored in the ExtNextGenClubExport table, along with an imported timestamp and the full log file for the import, in case we need to refer back to it. Mod: May the Force be with you.
- Fix: Fee Select - Member out of category check should only consider cards/rounds played before current tee time or the play date of the supplied scorecardId Mod: Added some spare parameters to fncTBIsMemberOutOfCategory for future use Mod: Comp Setup - Just added extra comment for reference when we finally get to doing not valid for handicapping changes on a comp level
- Mod: When working with 4 player teams (actually teams where the number of players match the number of players on a timeslot), we now use the tee booking system as a source for the teams.  This combined with the way pre-registration now gets populated with cards printed will make running best 3 of 4 comps etc. a lot easier.
- Fix: When competition results are recalculated and people are moved between different segments, the ResultEntryScore links were never updated, which caused cards not returned to show up on the results report, when they were actually returned.
- Fix: Silly DISTINCT was causing duplicate rows returned because someone else added a column to the query result which broke the distinctness of the data.  Replaced by a GROUP BY statement to make this a bit more explicit.
- Mod: Only show Twos holes for par 3's, not 4's and 5's also.
- Mod: Ignored some stuff.
- Mod: Players are now automatically entered into the registrations list when they are entered into the competition.  This won't affect existing competitions as the players list is now non-exclusive by default.
- Mod: Added Competition.IsPlayerListExclusive default=0 and DGE record fix script.
- Mod: On the POG, SCA and kiosk you can no longer go into competitions if they have the IsPlayerListExclusive option ticked, even if the RSCompetitionEntry (aka players list) is empty.
- Mod: Publish Draw - Added the product TBT, to allow the user to Publish screen.
- Fix: When working with players list exclusive competitions, the POG doesn't allow even eligible players to enter.
- Fix: Tournament registration - Added the JavaScript that was lost in translation with the 2012 redesign, the registration questions was ignored completely Mod: Tournament registration - Optimized some of the code around how the questions are saved/loaded
- Mod: Improved the hideous yellow warning bar style.
- Mod: Competition Setup: Players list is now non-exclusive by default in the competition setup.
- Mod: Bulk import utility will now use the printed handicap index off the scorecard for results generation, rather than the calculated handicap for the play date.  The handicap on the card is more reliable as this is what they played off and what was (probably) used for results.  Scores and handicaps on the handicap record don't always match up with this printed handicap index due to edits, deleted scores and the likes.
- Mod: Scorecard ScanImage - Checks if the connector that scanned the image is Offline. If so, display a message to the user, the connector is Offline. SQL: Add the NoConnectorImage to the AdvertisingLogo Table
- Fix: C.P.A - Non-Affiliate Cards did not load the course marker correctly Fix: C.P.A - Non-Affiliate Cards did validate the comps when the Handicap / DOB changed, this is required to determine the Course/Marker Fix: C.P.A - Changed Non-Affiliate Cards to create a NA record and link the card to this record when required to enter a comp Fix: B.C.A - Card added to a pre-reg only comp returned with in valid marker changed to show appropriate message
- Mod: When modifying the tee booking timesheet and you have more than 1 slot selected, when changing the time the system now keeps the offsets between the selected timeslots constant, but changes the times on each slot.  This means you can very easily accommodate a frost delay by selecting a range of times and shifting them all by a set amount of time (eg. 1 hour)
- Add: Pennants: Initial spec and brain dump for Pennants system.
- Fix: KIOSK TeeBooking - All day's only shows slots after current time at club
- Fix: Build Error due to Org not having a Master.Shared.Club property so we have to explicitly check the product for the current clubId - missed this page on previous commit
- Fix: Wrong message shown for enabled/valid competition types
- Fix: Every free booking was showing the error about only allowed 1 free booking per day
- SQL: Payments Screen - Will not show any future transaction on this screen.
- Fix: Didn't set BestNoOfTeamScores=3...
- Add: Best-of overall competition types.  As far as I can tell, no code changes required for this.
- Fix: Build Error due to Org not having a Master.Shared.Club property so we have to explicitly check the product for the current clubId
- Mod: Leaderboard - The logo will update according to the logo set in the setting screen. Mod: Kiosk - Resize the logos in the kiosk correctly. Mod: Settings screen - Corrected the issue with the Deleted Buttons in IE.
- Add: Adding release notes for this week.
- Mod: Player Projected Scores - Hides the null values scores from the graph.
- Fix: Prize Templates - Only show for Next Gen
- Fix: DatePicker - Only set the day text if we have value in the textbox Fix: Competition Registrations - do not validate dates on first load if the textboxes are empty
- Fix: Calendar - View more missing on first load
- Fix: C.P.A - Non-Affiliates can always see both 18 and 9 Hole Markers
- Fix: Comp Registrations - Back link is lost after save clicked
- Fix: Comp Registrations - Date pickers showing wrong day on first load Mod: Comp Registrations - Combined duplicate $(document).ready(...
- Fix: UNextEvent - Order comps by registration open date first
- Mod: Put the competition division handicap/age ranges on the results report.
- Fix: UCompetitionsCalendar error when no registration start or end time has been specified Fix: UNextEvent - Show event's on the same day
- Fix: Rounds newer than the current round were being considered with freeze divisions.
- Mod: P.O.G - Tidy up some extra && conditions
- Mod: P.O.G - Added handicap as part of the min requirements for creating a non-affiliate record
- Mod: Kiosk - Added the two logos on the home screen Mod: Leaderboard - Added the option for an advert in the banner Mod: Settings screen - Create new links for the Maintenance for the logos management. Add: Generic Advert Handler SQL: Changes to the Advertising Table
- Mod: CalendarControl - Show Register Now Link Mod: CalendarControl - Property to set default view
- Mod: CalendarControl - Show Register Now Link Mod: CalendarControl - Property to set default view
- Fix: UNextEvent Control - Fee amount's showing 4 decimal places
- Mod: UNextEvent Control - Show registration states and Register Now Link
- Fix: Make the Events tab light up when you're on Competition Setup.
- Mod: Draw system modified to improve the link between tee booking and draws.  Introduced an in-between step after Create Timesheet (for draws) to ask whether the user would like to create a standalone draw, or link it to some tee times (if the club has TB|TBT and/or some group bookings).  Linking the draw to a timesheet like this changes the behaviour in that the timeslots are no longer destroyed and recreated by the draw publish routine, but instead players are added into the existing timeslots.  This means that group bookings are not clobbered, and green fees etc. should/may stay intact when the draw is published (although I didn't look deeply into the latter).  This stuff is all from /Specification Documents/Draw System.docx.
- Add: Validation to Settings/CardPrinting.aspx to stop the form being submitted if no default printer and format is selected.
- Fix: Chrome was not properly detected by the tray app on machines running Windows XP 32 bit.
- Fix: P.O.G / C.P.A - Comps set-up to use any marker are being forced of the first available marker
- Mod: Comp Registrations - Show Fee and Visitor Fee for Next Gen Clubs
- File renames
- Removed desktop.ini file.
- Add: Specs from quick specs directory added to svn.
- Mod: Allow T2 Clubs to access Tournament registration area's -  Missed out RegistrationAnswerStats on previous commit
- Mod: Rename SMO Product to T2 Mod: Allow T2 Clubs to access Tournament registration area's
- Add: UNextEvent Control Script
- Add: UNextEvent Control
- Mod: Kiosk will now automatically reload its settings and schedule when these are changed on the server side (using the settings screen).
- Fix: Show scanning for AUS
- Fix: News - Restrict title length to 254 as this is causing golf.co.nz to throw a "String or binary data would be truncated." error
- Fix: Removed USE NZ8
- Mod: More of a complete spec now we are doing the complete project in 1 hit.
- Mod: UFavouritesIcon control - Changes to allow gif and png icons - Left out the SP Changes
- Add: Nomads Styles and Images
-  Fix: Payments Bubble - Corrected to match the Payments screen.
- Mod: Freeze Divisions across multiple rounds setting is now taken into account when calculating segments for players.  When the setting is turned ON, players are kept in the division that they first played in, i.e. the first round they entered (this may not necessarily be round 1 in the case of a best-of competition).  When the setting is OFF, players are put into whatever division they are eligible for on the day (this causes overall results to go invalid, but that is another story).  When you change this setting or any of the division configuration in Competition Setup, players are automatically moved to the correct division, i.e. turning Freeze ON will move players into the division they first played in; turning it OFF will move them into the division they qualify for using their handicap index and age on the day. Fix: Competition Setup never initiated a recalculate when the divisions changed. Add: Competition Setup now initiates a recalculate when the Freeze Divisions option changes. Add: RSCompetitionEntry.DivisionId column.  There is no UI for this yet, but when a division ID is specified on a competition entry (eventually this will be done from the Pre-registrations area), that player is forever after forced into the selected division.
- Fix: Green Fee Summary Report - Prevented the extra blank page. Mod: Green Fee Summary Report - Shows which record that have been deleted for online booking. Fix: Green Fee Summary Report - Corrected the records that are not suppose to be online payments
- Mod: Further changes to spec given complete build rather than phases.
- Fix: Show the draw start tees properly regardless of the Competition.ClubId field (eg. if Nomads creates a draw they need to see the tees for the course the particular round is on) Mod: If a club doesn't have start tees configured, show 1-18 by default.
- Fix: UFavouritesIcon - Not working in Chrome
- Mod: UFavouritesIcon control - Changes to allow gif and png icons
- Fix: A few bugs around fancy radio buttons where they didn't show up properly, and didn't allow clicks in ASP.NET mode.
- Fix: wa_TBGetAuthorisationsToCapture: Show deleted bookings as they should be able to capture/refund these. Fix: wa_TBGetAuthorisationsToCapture: When in by-date mode, show ALL transactions for the date, even finalised ones (as the radio boxes get disabled the user can't do anything with them anyway).  When in uncaptured mode, show all transactions that are not CAPTURED/REFUNDED, even complimentaries.
- Fix: C.P.A - Trailing comma after comps on the Price Tag
- Mod: Comp Dashboard - Show Course names for Nomads
- Mod #1332 : Comp Setup - Get Nomads to be able to set up comps for any course and marker
- Fix: Course Select - CourseId cleared after course lookup due to wrong property, added CourseId to ensure backward compatibility
- Add: Christchurch favourite's icon
- Fix: didn't calculate ping properly.
- Mod: Comp Setup - Don't reload viewmodel when cancel is clicked
- Mod: Player Registration - Modified the visitor details to look like the POG.
- Add: Simple speed and latency test page.  Access it via /Diags.aspx or the link down the bottom of every page next to the legal notice.  Results are stored in the new SpeedTest table.
- Mod: Player Registration changes to work with Player Details control
- Mod: Some minor changes/additions to the draw system doc
- Mod: Player Resignation - Modified the Visitor player registration to use the Player Control.
- Mod: Comp Setup - Moved round order function into reusable function as it also needs to be called after a successful save
- Fix KIOSK / C.P.A / P.O.G: Members limited to a number of rounds returned a greenfee due to a missing clubid on the where clause
- Mod : Green Fee Summary Report - Ordering of records on the report. (Description, Date, Player name) Mod : Green Fee Future Summary Report - Ordering of records on the report. (Description, Date, Player name)
- Mod : Green Fee Summary Report - Corrected the Description to exclude the amount and include the expiry date. Mod : Green Fee Summary Report - Corrected the uncaptured count Total. Mod : Green Fee Summary Report - Modified the Extra information to show even if there is no records for the data range. Mod : Green Fee Future Summary Report - Corrected the Description to exclude the amount and include the expiry date.
- Mod: Mod to release notes.
- Mod: Small changes to the wording around competition pre-registered player exclusivity.
- Add: Adding release notes for this week.
- Fix: Default the "Played At" box to your club instead of all clubs (score hd report)
- Mod: Added some further logic to exclude scores which are not for your normal handicap type, e.g. 9 hole scores for 18 hole handicapped people. The problem here is the HD for the 9 hole scores can get very confusing with combined scores, and also if 1 9 hole score is part of a competition and the other 9 hole score not being part of a competition - is this a competition counter?? - > So just removed them all together.
- Mod: Stop members owning more than 1 free booking on a day.
- Mod: Competition Setup - Typo change from None to Non
- Fix: Don't crash the page out if the Twitter feed fails loading.
- Fix: Error when competition setup is loaded up in "New" mode, caused by competition round sorting introduced yesterday.
- Fix: In some situations you can get duplicate partners on the partner select screen.
- Add: Hole names now printed on the scorecard if configured using the Hole Details page. Add: Next Gen import utility now imports XML data including hole names and MOTD/ad messages. Fix: Settings - Hole Detail link wasn't linking through to the hole details page. Fix: Connector tray app will now no longer crash if the UID doesn't exist server end.
- Fix: Christchurch Events Calendar
- Fix: Comp Setup - Sort rounds by Round No and Date
- Fix: C.P.A - Markers remain filtered for 9 hole even after changing to a 18 Hole member
- Fix: New Comp results - Error when loading a Single round comp Fix: New Comp results - Add text "Rounds not included as best of" above rounds that are not part of the best of rounds
- Fix: New Comp results - Error when loading a Single round comp Fix: New Comp results Add text "Rounds not included as best of" above rounds that are not part of the best of rounds
- Fix: for all-rounds-count gross and net comps we don't want to hide players who have not completed all rounds, but rather rank them on the number of rounds considered for a result (DESC). Fix: Because of the above fix, progress scoring results may have been broken, so I added a change to make those work (should test org live scoring)
- Fix: Comp Setup - Wrong marker selection shown after saving a comp with multiple divisions
- Fix: Parentheses missing on observable call caused partner selections to never appear.
- Fix: When looking up the RSEntryId for a scorecard, we picked up any RSEntry rather than the one for the competition we're trying to select.  This caused RSEntry cross contamination between competitions, where an RSEntryId is supposed to be linked to one (and only one) competition at a time.  This in turn caused the results report to miss out certain results. Fix: AddOrUpdateResult was being called unnecessarily because of a type cast error.
- Fix: Some Calendar Styling issues Fix: Some ' apostrophes where not replaced correctly in the event's and event details
- Mod: Confirm Slots (1323)  - Displays the default hole correct for the booking. Please see the below logic: a) 9 Hole Player and creating Booking - will default to 9 holes b) 18 Hole Player and creating Booking - will default to 18 holes c) 9 Hole Player and editing Booking - will default to 9 holes for any added players (even if the player is limited to 18 holes) d) 18 Hole Player and editing Booking - will default to 18 holes for any added players (even if the player is limited to 9 holes)
- Mod: Competition Results - Corrected the over lap issue when displaying the report in with the results type, "Twos"
- Fix: Kiosk running on 1024x768 did not layout properly with the pinned note visible.
- Fix: When we only have schedule entries for "All" computers, the kiosk didn't hide buttons properly.
- Mod: Competition Setup - Added the new setting, with help option, to include or exclude none pre registered players into a competition. This new setting is checked by default. Mod: Player Registration && Dashboard - Remove the warning messages if this setting is off. Mod: SCA && POG - The competitions, that have pre registered players and this setting off, will not be greyed out. Mod: KIOSK - The competitions, that have pre registered players and this setting off, will be seen be players that can enter the competition. Mod: CentralModel - Change the DB connection (Developer Note) Mod: CentralModel - Added new column Competition Table (Developer Note) SQL: Modified the ValidateRoundsForMember procedure.
- Fix #1087: KIOSK - Changes for score entry on wide screens
- Mod: ScoreHD report can now filter scores considered to those played at the club requesting the report.  By default all scores (country wide) are considered.
- Fix: Show RoundNo for Overall results not round index
- Fix: Show RoundNo for Overall results not round index
- Add: [Important to verify!] Matt's wa_TBCalculatePlayerGreenfee mod from 2013-03-27 - this never got committed and recently got clobbered by new changes to the proc.
- Mod: Setting Sub Menu (1321) - The Kiosk Schedule link will not be seen unless you have the NG and CP product.
- Fix: Another legacy competition issue where divisions where set up as male, but the competition set up as female.  This caused players not to be able to go into the resulting segments, because the division genders did not match.
- Fix: For Gross/Net competitions if you haven't finished all the rounds (or busy with the last round - progress scoring), you don't get shown on the results.
- Fix #1090 : C.P.A - Selected Marker was not cleared when Player Gender/Ninehole changed
- Mod: POG and SCA - When you reprint a scorecard, this will remove the old scorecard record from SCA.
- Mod: POG and SCA - When you reprint a scorecard, this will remove the old scorecard record from SCA.
- Mod: POG and SCA - When you reprint a scorecard, this will remove the old scorecard record from SCA.
- Mod #1290 : Overall results for multi round competitions
- Mod #1290 : Overall results for multi round competitions
- Fix: Typo in schema script.
- Fix: Course search input box would lose focus if you click it a second time (after it already had focus before) - this is because the watermark div caught the click and caused the input to lose focus.  For some reason some simple on('click).focus().select() jquery wouldn't fix it for me, so I've just styled it so the watermark is hidden while the user is hovering it.
- Mod: Green Fee Summary - Change the Green Fee Summary report to look at scorecards and not Tee Bookings Mod: Green Fee Summary - Date Range selection must not be greater than the current date. Add: Green Fee Future Summary - Created report to look at Tee Bookings for the future. Add: Green Fee Future Summary - Date Range selection must be greater than the current date.
- Fix: Bubble menu close button float issue in some cases Mod #1318 : Add a close button to the bubble menu
- Fix #1316: Fee select needs to show the assigned green fee if we cannot get it from the list (Forcedfee) option
- Fix: P.O.G - Price tag had hard coded tool tip Fix: P.O.G - $0 fees should not not show the Paid flag
- Fix: UCompetitionsCalendar - Error for non-comp event's due to gender/ninehole being null
- Fix: Comp Setup - Single round multi Division comp off default markers does not create segments from every division
- Mod: Show the error from wa_TBApplyBookingChanges rather than just "No booking entry was found for printing a card" if the booking could not be created when printing cards without a teebooking (from the kiosk)
- Fix: My drag/drop fix didn't quite work right because @Del==getdate() if the query ran quite fast.  Added -1s to the getdate()s to get around this.
- Fix: When dragging/dropping people around, wa_TBValidateEntryForSlot did not take into account the new EndTime column on CompetitionRound, instead using StartTime + 6 hours.  This caused problems for us in testing.
- Fix: When dragging/dropping people around, wa_TBValidateEntryForSlot did not take into account the new EndTime column on CompetitionRound, instead using StartTime + 6 hours.  This caused problems for us in testing.
- Add: Release notes for Monday's publish.
- Fix: Small typo in wa_TBApplyBookingChanges.
- Fix: Home club was being pulled from the ClubId column instead of the HomeClubId column.
- Fix: There is no such thing as NULL in javascript.
- Fix: Comp Setup - Default markers saving as All Markers
- Fix: P.O.G - Remove Hand cursor for price tage
- Fix: Error when saving bookings for members that have already printed a card
- Reverted changes made to UBanner as it was already doing the right thing
- Fix: When kiosk was set to show tee booking screen only (no others), member swipe cards don't work.
- Fix: When card printing is turned off on the kiosk, swiping your membership card could still get you to card printing.
- Mod #1091: Add price tag to the POG like in the SCA - Made space for Prices > 99.99
- Mod #1091: Add price tag to the POG like in the SCA - Prices was missing the $ sign
- Mod #1091: Add price tag to the POG like in the SCA
- Mod: Changed green fee timeline report to use the embedded PDF viewer again, same as our other reports.  The popup approach really isn't the right answer as it causes "popup blocked" messages in most browsers, and people often don't see the little button which means they just think the system is broken.  Also, when clicking the Print(PDF) button, the page posts back breaking logo images (because they don't rebind properly).  We should find a better solution to this preview/print problem; one that doesn't involve target=_blank.
- Add: Connector installer now contains and will install the Arial Narrow fonts required for our scorecards. Add: Connector installer now checks whether .NET 4.0 is installed before letting the user continue installation.
- Mod: You can now have multi line MOTDs and advertising messages.  Reverted the earlier code that used 5 single line boxes as it really wan't that pretty.  We should really build an automated scorecard previewer in this area rather than trying to make it WYSIWYG.
- Fix: Fee Select - Left a debug select statement in the proc
- Mod: iPhone style toggle : Removed white border from mask to display better on backgrounds that are not white
- Add: Ability to show Twos (and other hole list competition types like Jackpot, Net Eagles etc) on the leaderboard.  This involved hiding the position column and showing the HoleListHoles column instead of the Total column. Mod: Hide the R1 column on the leaderboard if this is only a single round competition.  Only show Rx columns for competitions with multiple rounds.
- Fix: Fee Select - Added check for AffiliateIsFullPlaying setting used for Advanced fees | ignore null and 0, applied changes for golf.co.nz
- Fix: Added basic Gender and Nine hole checks into pre-registration screen as we previously allowed women to go into mens competitions etc!  We can't really do proper validation here because we may not have the segments configured properly as this is way in advance of the competition.
- Fix: LongScanning_CenterTray_AU report was based off the NZ one, not the AU one.
- Mod: Hide Twos for North Shore until we can redesign the score card to modernise it.
- Fix #1308 : P.O.G - We need to give a warning when players are trying to create bookings for member that have printed a card in the last hour
- Fix: Fee Select - Added check for AffiliateIsFullPlaying setting used for Advanced fees
- Mod: Allow Kiwi handicaps to play other markers if the current club does not have any Kiwi markers.
- Fix: Kiosk: Don't allow members to cancel bookings that they don't own (previously you could cancel out anyone in the slot, regardless of whether you made the booking yourself or not)
- Mod #1278: Comp Setup - Can we have the default for competition setup and markers to be "Default Markers" rather than "All Markers"
- Mod: Don't let kiosk, SIC or POG select competition segments that are flagged for deletion - i.e. when you get rid of a segment from competition setup, the results and current entries for deleted segments will stay there, but no new entries into those segments will be allowed.  The system will automatically delete the segments when all entries have been deleted.  (We may want to build a warning message and some UI to alert the user to this - but eventually they'll see it on the results, so may not be a high priority)
- Mod: UCompetitionsCalendar - Dark border for details popup
- Mod: UCompetitionsCalendar - Removed some debug code
- Mod: UCompetitionsCalendar - updated to latest version Mod: UCompetitionsCalendar - Re-skin
- Fix: Someone didn't alias a bloody column.
- Add [MAJOR]: CompetitionRoundSegment.DeletedDate (datetime) and CompetitionRoundSegment.Deleted (bit calculated).  Modified SQL (where appropriate) to take this new field into account.  Modified live_GenerateOrUpdateCompetitionRoundSegments proc to update DeletedDate instead of really deleting.  Need to still build some UI to allow user to update (and reprint) segments on cards that have been printed for now deleted segments.
- Mod: Competition Results (1314) - The round combo box refreshes correctly when changing from round to round.
- Fix: Fee Select - Some reciprocals not working due to wrong HomeClubId Retrieval for members that belong to more than 1 club
- Mod: The kiosk scanning system can now verify that scorecards have been signed.  This is controlled by a new setting on the Kiosk Settings page, defaulted to OFF (i.e. don't require signatures)
- Removed conflicting file for adweb build.
- Add: Red and green bars to the top of Adweb for production and dev databases.
- Mod - Tee Booking Dashboard (1313) - Empty Timesheets will not display booked numbers in the TB Dashboard.
- Fix: Fancy checkboxes and radios now work with .NET controls too.  This was a problem because .net renders them inside a SPAN (with the fancy style), and the LABEL doesn't contain the INPUT.  In pure html we just have a LABEL (with the fancy style on it) which contains an INPUT.
- Fix: Connector strange error when no scanned images could be located in fakescan mode.
- Fix: Connector: Sometimes scanned images get stored in the folder for a previous day (when the service keeps running day after day the twain profile folder never got updated, only the default was set)
- Mod: Skip the partner select screen if there is only 1 valid selection and the player can't change it. Fix: If there is one or more invalid card on the list when you touch [Save Scores] (scanning), the server throws an Object reference not set error.
- Fix: Bug where the partner scorecard would not always get used if a player is in multiple competitions. Fix: In the case where a partner is already selected, you could not hit the Select button to get to the next screen. Mod: Removed debug display from the partner screen.
- Mod: Confirm Slots - Added a last and first name text box Mod: Confirm Slots - If you have booking, default the hole to the booking hole. If you don't a booking, default the hole to the last hole selection.
- Fix: Object reference not set error in some cases where 2 players in a slot are part of a partners comp and the other players are not. Fix: Enter All button does not work on kiosk following Kenith's compsPager mod. Mod: Reduced delay on "Your cards are being printed" screen as it just holds people up.
- Fix #1311 - When enabling only the tee-booking button on the KIOSK Schedule nothing shows
- Add: new image for member benefits image on the home page.
- Add: Prototype switch to results widget to allow quick access for the user to turn the leaderboard off/on.
- Mod: Connector didn't scan partner boxes properly due to offset errors. Mod: Better debug image generation from scanning library. Fix: Team selections were not roundtripped properly resulting in empty teams and no results. Mod: When selecting partners (even from SIC) only people in the same timeslot are shown now.
- Fix: ClubCMS Promotions - Creating a new Promotion timed out
- Add: ChromeDesktopNotifications function could be use full some day
- Fix: Remove bit that restarts the service as we don't have permission.
- Fix: Disable service url box as we don't save changes to it anyway.
- Fix: Don't try to update the XML file as we don't have permission, and we're not changing it anyway.
- Fix: Incorrect extension on exe.config path.
- Mod: Left hardcoded exeConfig path in there...
- Fix: KIOSK - Ridiculously long comp names creates layout issues on 1024x768 displays
- Fix: Moved frmRegisterClient into trayapp binary to avoid Wix dll dependency on clients.
- Fix: Dammit, stuffed up the club name menu item enabledness.  No use if you can't click it!
- Mod: Allow the tray app to easily reconfigure the Connector to point to another club (got sick of manually doing this) Mod: Connector configuration will now automatically be updated to enable/disable scanning based on the SCS product code - no need to manually edit the configuration file anymore.
- Fix #1307: P.O.G - Replacing a Visitor booking and clicking save&print prints the correct card but does not create the booking Fix #1310: P.O.G - Replacing a member with a printed card keeps printed card linked to the new booking
- Mod: Change back out the Les Mills banner to normal...
- Mod: TeeBooking Payments - Corrected the Teebooking payments error as it was bring Complimentary Fees into the Payments Grid
- Mod: Competition Fees Report - Corrected the issue when displaying the report for North Shore, Womens Mini Tournament ( 1/06/2013 )
- Fix: Removed some randallcode which caused a crash when Org users try to upload tournament scores for handicapping.
- Mod: From pre-registration, don't allow the user to remove a player if that player is already in a draw for the competition.  This causes a strange condition where old removed preregistered players appear as though they are still in the draw, but when you publish to the tee sheet you don't see any names.  Pakuranga reported this one.
- Add: KO Binding alternateCssClass
- Fix: When you go back from Comp select after selecting a tee time, you lose the Up/Down arrows in the booking sheet Mod: Hide "Your bookings at <GOLFCBLUB>" for BookAndPrint mode
- Mod: Results Report (1285) - Added the member code to the report.
- Mod: Results Report (1301) - The results report will show the non-affiliate handicaps when entered from the SCA, POG or preprint
- Mod: Scorecard Setting screen (1303) - Images for the scorecards formats are now being displayed for all clubs
- Mod: Club Website (1291) - Competition Results screen will only show active competitions and no deleted competitions
- Fix: If you have a both genders comp with divisions by gender (i.e. separate mens and ladies divisions), no-one could enter the competition because they are ineligible for any segments.  This was due to the way the segments were generated (technically a comp setup bug but it's easier to patch on this level).  This affected the "proshop.co.nz open day" competition at Pakuranga (to which the workaround was to create separate mens and ladies competitions and get results out separately)
- Fix: EF model had the ClubCardPrinter.Code column as a regular column when it should be computed.
- Fix: UBanner stylesheet reference
- Mod: A5_LargeAd Report - shows the start tee and start time on the report.
- Mod: Oops, reverted SLN file change which compiles scanning in debug mode.
- Fix: Corrected SHR operator precedence bug which caused elevated card alignment markers damaged errors.
- Fix: KIOSK - Do not show ask-is-member screen when only cardpriting is enabled for the kiosk show enter-member-number
- Fix: KIOSK - Hide bookings list in bookAndPrintMode
- Fix: Typo in schema script.
- Fix: The ClubMember.Create() method did not take secondary members into account and was only searching for members by their home club number (CentralMemberCode).  Instead, we now search using the split-up member number by CentralClubCode and LocalMemberCode.
- Mod: POG/BookingEditor (1228) - Corrected the issue where the Fee Reason was not being displayed when only a TimeSlot was booked and no scorecard was printed.
- Fix: KIOSK / C.P.A - Allow printing of cards on day's that have no tee sheet regardless of the "Allow cards to be printed ONLY IF after final tee time of the day" setting
- Fix: KIOSK / C.P.A - Allow printing of cards on day's that have no tee sheet regardless of the "Allow cards to be printed ONLY IF after final tee time of the day" setting
- Fix: Eliminate leading comma when printing nonaffiliate cards with only a firstname.
- Fix: Eliminate leading comma when printing nonaffiliate cards with only a firstname.
- Mod: Change out a pic on Remuera's home page
- Fix: Comp setup - 2 Round 9 Hole Womens comp won't save when Use same markers across all Rounds? = No
- Fix: Fee Select - Layout problem on P.O.G KIOSK: Wrong comps showing when in Book and Print Mode
- Fix: Typo
- Mod: Mod to release notes.
- Mod: Hide "General Settings" and "Carts" under tee booking settings - they are not implemented anyway.
- Mod: Temporarily hide scanning partner selection functions for publish.
- Mod: Les Mills site takeover for 1 day.
- Fix: Regression: Removed the PreviewFeature setting (again).
- Mod: High Performance Players (1298) - When log in as NZ admin, you will have the ability for them to remove “untag” these players from being academy or development players.
- Mod: Small styling adjustments to the release notes widget.
- Mod #1297 - Setting for teebooking required to print cards A.K.A "Anarchy setting"
- Mod: Kiosk Settings (1295) - Enable clubs that only have only the TBT product to see the Tee Booking setting.
- Mod: Mod to release notes. See - told ya!
- Fix: When the leaderboard rolls over to the next day, showing the "Coming up soon" message, the labels and footer from the last competition shown stick and stay visible.
- Mod #1294 : Fee Select Control - Add ability for admin to list all fees applicable to current member criteria | Display issue in C.P.A    - Also swapped icon and text around just looks better
- Add: Adding release notes for this week. (still probably going to make some changes for these, just want to see what it looks like)
- Fix: Another performance issue in live scoring interface when in Live Scoring mode.
- Mod #1294 : Fee Select Control - Add ability for admin to list all fees applicable to current member criteria | filter 18 / 9 hole fees
- Mod #1294 : Fee Select Control - Add ability for admin to list all fees applicable to current member criteria | Changed text
- Fix: Performance issue in live scoring interface when in Final Gross mode with heaps of players (150+) - page takes too long to render and browser chokes (even Chrome).  When testing on my PC the load time doing an * search over 108 players was 6.8s; now down to 1.0s using the same parameters.
- Mod #1294 : Fee Select Control - Add ability for admin to list all fees applicable to current member criteria | Small style tweak
- Mod #1294 : Fee Select Control - Add ability for admin to list all fees applicable to current member criteria
- Mod: Increased CSV file download padding to 4.5k to try and get IE to download them properly.
- Fix: C.P.A - Non-Affiliate gender not showing when printing from the P.O.G Mod: P.O.G - Don't create NA records for names that start with "visitor" / "guest"
- Fix: When the leaderboard is loaded up with the "No competitions to display" message it never refreshes when scores start coming in for the next competition.
- Fix: Found 2 performance bottlenecks in the leaderboard causing refresh times of ~10s per page for larger competitions.
- Mod: POG - Printing cards for comps that include a greenfee and have different Member/visitor fees from the P.O.G gives visitors the Member fee (Removed the changes from the first attempt)
- Fix: Rank by countback is now ON for clubs by default.
- Fix: P.O.G - Allow Non-Affiliates to enter comps without a Email or Phone no
- Removed old tag.
- Fix: LastOrDefault to stop errors in leaderboard.
- Fix: Leaderboard doesn't work when launching from the dashboard and all rounds are in the future.
- Mod: BookingEditor - Reverted the check that is required for a Visitor to enter his email address on the POG (Issue 1269)
- Fix: KIOSK - Book and print, removed logout button from select booking time screen Mod: KIOSK - Print without TB Comps should not default to yes if player has the option to book and print
- Fix: Don't show duplicate R1's for competitions with multiple rounds of the same number.  This happened in 2 places in the results flow. Mod: Removed paging for results, can be confusing when you search for a surname using Ctrl+F.
- Mod: KIOSK - Flashing Buttons modified on competition entry screen to only flash once all competition entries have been selected.
- Fix: KIOSK - Book and print back button mapping from comps back to choose tee time
- Fix: Removed releasebomb.
- Fix: Reinstated files I accidentally clobbered while trying to commit 4bbb.
- Add: 4BBB Scanning alpha version.
- Fix: Undo commit, stuffed it up...
- 
- Mod: KIOSK - Flashing Buttons modified as there was an issue with the button on the Competition Entry. The button was just flashing even thou no selection was made.
- Fix: KIOSK - Book and Print set booking 9/18 hole based on selected competition
- Mod: KIOSK - Book and Print : Allow member and visitors to create a booking from the kiosk in order to print a card
- Mod: KIOSK - Flashing Buttons modified to use a style sheet and not javascript function (Competition Entry: Continue btn; Summary Screen: Print Card)
- Add: KIOSK - Orange flashing button
- Fix: New Comp Results - Next Gen Results control showing wrong number total rounds
- Fix: New Comp Results - Next Gen Results control showing wrong number total rounds
- Fix: For multi round competitions the leaderboard was incorrectly omitting competitions from the "coming up soon" display list, because the last result was entered more than 2 hours ago (for a previous round).  Added joins to filter by the round date to get around this one.
- Mod: Smartsheet #1277 - Merge the 2 entries on the main menu to "Enter Score" with the 2nd screen being "Scan Card" and "Enter manually".  Testing: Turn off SCS for a club and see how the buttons react; there should only be an "Enter Card" button on the home screen, no mention of scanning.  Likewise if you turn off self score entry on the schedule; there should only be a scanning option. Mod: Removed blink from the scanning prompt - this screen only has 2 buttons on it, a bit OTT.
- Mod: Don't have a position column on any Hole List results (Twos, Net Eagles, Jackpot).
- Fix: MAJOR: Multi round results were not correctly DNFd.  In this example a Net result was still being counted (and ranked first) for the 54 Hole Classic.  Individual round results were not affected, only multi round.
- Fix: Draw Report (i.e. the Print Draw link in Publish Draw) now works for clubs.  It's an ugly report but it works and is easier to use than the start sheet print function.
- Fix: Better exception logging for ActiveReports report script errors.
- Mod: Allow choosing which return address to print on the labels.
- Add: New release notes widget.
- Mod: Increased the folder size to 200 MB. Aus require 200MB so NZ get it too.
- Mod: Increased the folder size to 200 MB. Aus require 200MB so NZ get it too.
- Fix: Added filter on DeletedDate to speed up the updates for legacy uploads.
- Add: Index to speed up legacy upload page.
- Mod: When a club gets NG they automatically have composite markers created based off the marker name.  If they are unused or inaccurate (which should be the exception rather than the rule) we'll fix them after go-live.
- Mod: Better validation messages Fix: Unable to save a both gender comp that does not use One Scorecard for team
- Fix: Don't insert 0 into NZGACategoryId on CMember - crashbug
- Mod: SearchSlots - Added the ClubId to the redirect to ensure the correct clubId is being worked with.
- Mod: KIOSK - Flashing Buttons on the following screens (Competition Entry: Continue btn; Summary Screen: Print Card; Start Scan: Start Scanning)
- Fix: golf.co.nz - Greenfees priced the same as a special should always show first
- Mod: ConfirmSlots - Default the number of holes to 18.
- Mod: Competition Screen - Remove the deleted competitions from the List. Mod: Competition Screen - Prevent the drop downs from entrying duplicate values.
- Mod: CompetitionSelector Control - Added a new observable for comps that have a Visitor Fee. Modify the SQL to return true if the visitor entry is not zero. Mod: Extensions - Created a new Knockout Mod to focus and select all the text on a textbox. Mod: Booking Editor - On Saving, for a Non Affiliate Member into a comp, perform a check that the email needs to be entered. Mod: Booking Editor - Set Focus and highlight the First name for a Non Affiliate Member Mod: Booking Editor - On Saving, for a Non Affiliate Member into a comp, perform a non affiliate memberid check else the comp fees will not be saved.
- Fix: golf.co.nz - Public Holiday's does not show any fees for NextGen Clubs
- Mod: PingV2 - When a score is printed for a NA Member, the First name will be displayed on the card
- Mod: OOM calculations to support pulling Next Gen results.  Part 2/2
- Mod: OOM calculations to support pulling Next Gen results.  Part 1/2
- Mod: Renamed internal variable to make more sense
- P.O.G: Next Gen GreenFees - Wrong green fee showing for affiliate visitors playing as members guest
- P.O.G: Next Gen GreenFees - Wrong green fee showing for social members playing with another home member
- Fix: Next Gen GreenFees - Wrong green fee showing for social members playing with another home member
- Fix: Next Gen GreenFees - Wrong green fee showing for social members due to home club being checked against NonAffiliateId rather than MemberId
- Fix: Member popup search now ignores trailing blanks.  Finally!!
- Fix: Next Gen GreenFees - Unable to determine green fee for player Error when booking members on a public holiday
- Fix: Page fail to load if the RSS Feed fails for some reason
- Mod: Show Performance Tracker and Schema Version for DotGolf.
- Add: Wyupdate file for live.micropower.com.au.
- Fix: Have the same menu restrictions on dev1 as we do on the production system.
- Mod: Moved Legacy out of trunk as it has nothing to do with the central shared stuff.
- Mod: Moved DGE out of trunk as it has nothing to do with the central shared stuff.
- Mod: Moved Database out of Trunk as it has nothing to do with C# shared stuff.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Mod: Removed old tag pointing to invalid shared folders.
- Fix: KIOSK Teebooking - Future day's only show times > than current time
- Mod: Allow user to print cards for a specific course only using the new [Print Cards for Course] button.
- Fix: KIOSK - Missing DeletedDate check when checking Comps set to allow printing of card without teebooking Mod: KIOSK - Simplified check for Comps set to allow printing of card without teebooking
- Mod: Added a comment to a confusing unused variable
- fix: CardPrintedAlreadyForCompetition should exclude RSEntries, Rounds and Comps that have a deleted date
- Fix: P.O.G - Fees not loading when loading player forced fee due to missing [ReasonLabel]
- Mod: GreenFee Summary Report - Removed all the (nolocks) from the report.
- Mod: KIOSK - Allow printing of scorecards from the kiosk, but select a tee time from the screen within the print a scorecard menu. See specification document: Tee Booking Required
- Fix: When switching between clubs and loading the POG up, the North Shore "Course" column sticks even when going to single courses like Pakuranga.
- Fix: Generate.aspx wasn't checking the DrawCompetitionRound.DeletedDate column when loading a list of players, resulting in all players in the list duplicated when there is a deleted one.
- Fix: Don't try to insert ClubId=0 into the Draw table, we have already got an AssociationId. Fix: Duplicate DrawCompetitionRound record was inserted when creating timesheets for multi course rounds.
- Mod: Member Quick Search - I have finally had enough and disabled auto complete on the text box
- Mod: GreenFee Summary Report - Added Font styling to the links in the group rows
- Mod: Payments Screen - Shows the change link not matter if the timeslot is in the past or future. It will only been hide if the DPS has been authorized.
- Mod: GreenFee Summary Report - Added Font styling to the links below
- ModMod: Golf Dashboard Screen - When you click on the player name, under my tee bookings on the screen, it will check if you can edit the slots. You need the TBP or new to be a home Member
- Fix: golf.co.nz Teebooking - added missing Category Limit check for Next Gen Clubs
- Mod: TeeBooking Screen - When you click on the player name on the screen, it will check if you can edit the slots. You need the TBP or new to be a home Member
- Mod: CourseId Limits was doubled up in the where clause
- Fix: Subnavbar wasn't highlighting POG when we're on the POG.
- Fix: When a draw is published and there are players on the timesheet playing off the other 9, the conflicting players message is displayed.  For example, we have a draw going off the F9 while there are normal bookings off the B9, it would not let you publish the draw.
- Fix: Subnavbar wasn't highlighting POG when we're on the POG.
- 
- 
- Fix: golf.co.nz Teebooking - Non-Affiliate cannot create a booking "Could not find a Member with ID -1." error after selecting a slot
- Fix: golf.co.nz Teebooking - Booking with a members guest for a Next Gen club does not get the right fees
- Mod: Removed test file.
- Mod: Test auto build.
- Mod: Test auto build.
- Mod: Test auto build.
- GreenFees - Re-commit changes reverted in rev 13590
- Mod: Payment Bubble - Modified to match the number of payments of the payments screen Mod: Payments Screen - Modified the way the records are displayed and that the Captured column has three states SQL: Changes to the saving of the Transaction, the Finalise status of each item, alter script for the TBTicketEntry table, script to update all the transaction that have not been touched
- Mod: ConfirmSlots Page - If club does not have the product TBP and the member is not a home member of the club, where the booking is made, the member will not be able to modify the other slots and his slots. He will only be able to cancel the booking.
- Mod: Ignored some folders.
- Mod: Ignored folders.
- Mod: Ignored some folders.
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- 
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- 
- 
- 
- 
- 
- 
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- Mod: Repository restructure - introduced /Trunk/ level.
- Mod: Repository restructure - introduced /Trunk/ level.
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- Final commit for v1.0296.
- Add: Built-in export for NextGen competition exports.
- Mod: Removed the "Don't print cards" box
- Final commit for v1.0295.  Mod: Harewood - only let PLNS category members play the Plains course, not Woodlands.
- Final commit for v1.0295.
- Final commit for v1.0294.
- Fix: Blank out the Fee and Description and only apply where necessary (the DIY was putting the information on the card for members "None" and visitors too)
- Final commit for v1.0293.
- Add: New setting to allow green fee to be printed on the scorecard. This has only been implemented on the standard scorecard.
- 
- 
- 
- 
- 
- lock_override test
- 
- 
- Test locking.
- Final commit for v1.0292.
- Mod: Installer now supports 64 bit machines.
- Mod: Change to hopefully stop backups from being deleted, when they were not actually being deleted.
- Final commit for v1.0291
- Mod: Update Course handicap only if necessary. Also, speed up the query to get all markers played.
- Final commit for v1.0290
- Fix: Change for Print Cards area for clubs that do not use GF product.
- Mod: Extra strokes for scores were not being added when the scorecard was not marked as returned (which when entering scores it will not be yet) - therefore no extra strokes were being calculated.
- Final commit for v1.0289.
- Final commit for v1.0288.
- Fix: Collapse mod messed up green fees for existing clubs because the visible check was in the wrong place.
- Final commit for v1.0287.
- Mod: PG7: Removed heartbeat timer to try and combat communication issues.
- Mod: Collapse forms where the green fee select control is invisible - to avoid blank space. Fix: Odd bug where country combo has no values and NonAffiliate card print crashes. Fix: DIY terminal no longer crashes if GF product is turned off. Mod: DIY terminal no longer shows green fee information if GF product is turned off (competition fees are still shown however) Mod: DIY terminal now scales course select button and font sizes if course names get too long. Mod: rptScoreCardElectronic now reduces font size on the course box if the course name doesn't fit. Mod: Score card reports now automatically trim the course name if it starts with the club name; eg. North Shore Gold gets turned into Gold.  This used to rely on a hardcoded hack for some clubs, now it's automatic and across the board. Add: Millbrook now also gets the course name printed on the card (same as harewood, taupo and north shore)
- Fix: PG7 scanning broken because of mod to read the partner boxes from the card (which PG7 cards don't have).
- Mod: dge_ProcessScores procedure now uses the new ScoreSync table to eliminate duplicates.  This mod to DataProcessor is to pass the local ScoreId value into the central database so we can use it to track duplicates.
- Final commit for v1.0286.
- Fix: Accidentally stuffed up the F9/B9 sort order on the diy terminal.
- Fix: SQL bug in last 2 updates.
- Final commit for v1.0285.
- Mod: Remove $1, $2 green fee for Pakuranga... again.
- Final commit for v1.0284.  This adds the ScoreCard.PrintCount column to track the number of times a score card is printed, including syncing this value to the central system.
- Fix: Missing Pauanui's local member green fee hack from this procedure.
- Final commit for v1.0283.
- Fix: Crashbug when loading up a competition with a NULL CompetitionTypeDataId.
- Final commit for v1.0282.
- Fix: Menu tabs disappeared from DotGolf Live embedded webbrowser control.
- Final commit for v1.0281.
- Fix: When a secondary member prints their card from the DIY, their secondary club ID + home club member no is shown on the card.
- Fix: Oops, forgot to increase the line spacing for the score card message.
- Add: New score card format (rptScoreCardStandardLargeAd) for Titirangi.
- [MAJOR] Fix: Course handicap adjustments for mixed gender competitions playing off different markers would sometimes reduce a player's course handicap rather than increasing the course handicaps for the other players in the field.  This would happen if a woman is playing a course with a similar course rating as the men, but a higher par (therefore an easier course overall) - reducing her course handicap.  We have now introduced a base adjustment value which will work out what the lowest possible adjusment is, and add that to everyone's course handicap so that we effectively never have negative adjustments.
- Fix: Password changes
- Final commit for v1.0280.
- Mod: Ignored some folders.
- Mod: Sync and display estimated tee time for each hole on the scorecard.  This is done if the "Show estimated tee time for each hole" option is enabled in the Card Print settings form.  All scorecards have been modified to have the new tee time fields. Mod: Changed password for sql to cv37iu. Mod: Removed password check for matt, it's not necessary as Login already does it against the UserSecurity table. Mod: Sync now downloads the sync data using WebClient rather than Bits - but only in DEBUG mode.  Bits doesn't work on my PC for whatever reason, so this was the only way I could test sync.
- Add: HoleDetail table added to sync server library.
- Mod: Merged back in the check for max no. of scorecards check (wiped out accidentally by 265 version)
- Fix: Old commit never committed - dammit.
- Fix: Webservice for start sheet loading (Tee booking service) was broken after matt's password change.  Downgraded DotGolf.Webservices project to .Net 2.0 to make the deployment easier - will upgrade it to 4.0 again later when I have a chance to edit the web.config properly and test sync.
- Oops, missed schema script for 279.
- Final commit for v1.0279.
- Final commit for v1.0278.
- Add: Ability to un-sync cards - only for the "matt" logon.  Click on un-sync cards in Bulk Card Admin.
- Mod: Remove most of the Category screen logic from the local app.  We now maintain categories in Live, except for the prohibited green fees section.
- Fix: The check for scores from the same batch appears to never have worked.  We only (accidentally) deployed it today, and discovered a bug which crashed sync out!!
- Fix: Compile for All CPUs or webservice crashes with incorrect format error.
- Mod: Pass UploadToWebsite node into dge_ProcessCompetition procedure when syncing competitions, in preparation for a mod that will mark competitions marked with UploadToWebsite=false as deleted (so they don't show on the site)
- Final commit for v1.0277.
- Mod: Automatically NULL out CardContentsXML from the ScoreCardScan table after 24 months.  This is done to reduce pressure on the SQL Express 4GB database limit (this table grew to 3.2G at North Shore, causing a failure of the whole system on 24/05/2012).
- Final commit for v1.0276.
- Mod: Added CardPrintingDIY back into the solution so that the AR6 license could get embedded.  Kaiapoi and Mercury Bay are getting the Evaluation Version message printed on their DIY cards because of the AR upgrade.
- Fix: Green Fee Report not showing correct figures
- Fix: Oops, syntax error in regex.
- Add: New swipe card format for Fairview.
- Fix: When you have markers only off the back 9, the DIY will not offer some of the markers for selection.  Eg. if you have Yellow B9 and White B9, but no front 9 markers, the DIY will hide all but the last B9 marker.
- Ignored some stuff
- VS updated DotGolf.WebServices to 4.0
- Final commit for v1.0275.
- Fix: Only call home if the backup was successfully replicated to another computer, not to the database itself.
- Final commit for v1.0274.
- Mod: Backup now posts an entry to the central system to tell DotGolf when a backup is successfully replicated to a non-database pc. Mod: DIY Terminal now also does backups.
- Final commit for v1.0273.
- Final commit for v1.0272.
- Final commit for v1.0271.
- Fix: The old ANSI/unicode thing caught me again with these Sql delta scripts.  #facepalm
- Final commit for v1.0270.
- Mod: Performance and UI response enhancements to Card Print admin, especially around creating/deleting/moving bookings. Add: ComputerNo (4/7 digits) now displayed on live start sheet.
- Fix: Could not preview a scorecard from the card print settings area
- Final commit for v1.0269.
- Mod: Include updating of divisions for recalculating competition results
- Mod: Include updating of divisions for recalculating competition results
- Mod: DIY terminal in scanning-only mode now jumps straight to the "Scan a card" screen. Mod: 9 hole score scanning works now, tested F9 and B9, including 9 hole competitions; stableford points mode also tested.
- Mod: Show the individual rounds for multi player, multi partner competitions on the Leaderboard Change to make sure the last column for the ordering of the columns on the leaderboard remains the last column for the first page
- Mod: Removed all unused references and usings (ReSharper)
- Fix: Upgrade to active reports 6 - not sure why the project file references are different.
- Final commit for v1.0268.
- Fix: AR6 introduces a check to ensure Height is positive for some report elements.  In the upgrade some heights were negative - I have removed these and retested all reports.
- Add: Show stableford points on self scanning interface when scanning for a stableford competition.
- Final commit for v1.0267.
- Final commit for v1.0266.
- Mod: Upgraded solution to VS2008.  Upgraded from ActiveReports 3 to ActiveReports 6.
- Mod: Added gross totals to scanned card score confirm page if the card is not in a competition.
- Mod: Call to dge_CheckForPartialBatchSync procedure to stop batches from syncing if scores already exist in the database for the batch.  (Central deployment only - this also requires a stored procedure which is in the sql folder)
- Mod: Add hidden gross as a new competition type for a competition at Manuwatu
- Final commit for v1.0265.
- Mod: Change for Pakuranga to $1 and $2 pay as you play green fees
- Fix: Bug where teams do not have computerno's in the prizes area.
- Final commit for v1.0264.
- Mod: Removed beta logic bomb from the code.
- Final commit for v1.0263.
- Mod: Harewood changed the name of their courses, and did not fit on the card.
- Final commit for v1.0262.
- Mod: Harewood changed the name of their courses, and this prevented the club from printing.
- Final commit for v1.0261.
- Fix: CRCMode was not being saved into the ScannedCard xml blob, meaning that checking the CRC in the UI fails and causes the Accept Card button to go disabled.
- Final commit for v1.0260.
- Fix: Error when handicap index is null and trying to cast for course handicap
- Final commit for v1.0259.
- Fix: Removed reference to localhost:... from DIY terminal GetMemberInfo call.  Oops. Mod: Changed DotGolf.WebServices build to AnyCPU otherwise it won't run on central system (due to other DLLs being AnyCPU built we can't build this in x86 as we do the other binaries)
- Add: New indexes for results (to speed up sync when lots of results are generated on the client end).
- Final commit for v1.0258.
- Fix: Hidden holes not displaying correctly on the leaderboard.
- Mod: Rename file for version
- Final commit for v1.0257.
- Mod: Include no. of rounds check for limited members on the DIY Terminal
- Final commit for v1.0256.
- Fix: Mod to allow correct front 9 calculations for comp scores
- Final commit for v1.0255.
- Mod: Hidden holes can have prizes associated with them.
- Mod: Mod to Tom's 2's results at Auckland. Hopefully this does not upset any other club who liked the report in the previous format. The only major difference being you do not know which round the 2 was scored on.
- Fix: Partners were incorrectly selected on the scanning screen if boxes were ticked on the card. Fix: When ticking the boxes on the card, partners were shown as selected, but not really selected in the backend.
- Add: Local members printing cards using the central database as source - Pauanui. Add: NonPlayingMemberInfo method in the webservice.
- Fix: Designer wouldn't load because of what was probably a merge issue between DPS and self score scanning.  Reversed changes, re-merged and all fine now (except for the usual glitches)
- Mod: Allow partner selection by ticking boxes on the scanning score card.  The partners score card is enabled when you pick the appropriate "Partners" layout from the score card format box in card print settings.  The system automatically reverts to the normal scorecard (without partners) if the card is not part of a teams competition.  As an added bonus, the course handicaps for your team members are automatically printed on the partner select card.
- Fix: Bug where if the multiplayer comp isn't listed first in the competition setup, the self score scanning UI wouldn't see that it is a teams card being scanned. Fix: Teams comp scores were not properly calculated, instead of working with each player's scores, the system worked on duplicate copies of the same player's scores. Add: When you pick up on a hole, the system now (in NZ) displays the adjusted score surrounded with parentheses. Mod: When clicking "Scan Another Card" the scanner immediately scans another card and doesn't wait for you to click the Scan button again.
- Fix: Style update to remove green taskbar.
- Fix: Self Score Scanning did not retain existing partners on scanning a team card.
- Fix: American Stableford formula updated to score 5 points for an eagle and 6 points for albatross or better.
- Add: New competition type - American Stableford.
- Fix: Self Score Entry: Problem where you could not deselect partners once selected. Fix: Self Score Scanning: Could select more partners than competition type allowed.
- Final commit for v1.0254.
- Oops, this was going to be v1.0254, but not quite.
- Fix: Score card scanning DIY menu limits were not being saved from DotGolfGUI. Fix: Added missing Card Images folder to Enterprise installer.
- Add: svn:ignore properties and a missing file.
- MERGE: Added all changes from the Trunk.SelfScoreScanning branch.  This adds self score scanning and self score entry team selection, as well as a lot of mods to the sync ui (see log) and the installers.
- MERGE: Merged changes from Trunk.DPSEftpos.20110413 to add DPS EFTPOS functionality with Ingenico unattended terminals.  We have been certified by DPS for using this version of the DIY terminal with their EFTPOS equipment.
- Add: Indexes to stop nasty table scans and other stuff for multi round competitions (discovered at Mt Maunganui)
- Final commit for v1.0253.
- Add: Time component into the GreenFeeType table (for green fee prices at specific times of the day)
- Add: Time component into the GreenFeeType table (for green fee prices at specific times of the day)
- Fix: Late build error mod.
- Final commit for v1.0252.
- Mod: Pakuranga now wants TO BACKOUT the $1 and $2 green fee round charge
- Mod: Pakuranga now wants TO BACKOUT the $1 and $2 green fee round charge
- Final commit for v1.0251.
- Final commit for v1.0250.
- Mod: Pakuranga now wants the $1 and $2 green fee round charge
- Add: missing file - NetworkServerPort.cs
- Mod: Change the way the scorecard handicap is retrieved within Bulk Card Admin to use the scorecard handicap rather than calculating the handicap
- Mod: removed temporary greenfees call to central.
- Final commit for v1.0249.
- Fix: Change to Helensvilles payp green fee mod
- Final commit for v1.0248.
- Mod: Allow Helensville to use the Pay as you Play like Pupuke ($1 per round)
- Final commit for v1.0247.
- Add: Fix to script 246 which was accidentally saved in Unicode.
- Final commit for v1.0246.
- Mod: Added an option to hide the Enter All button from the DIY competitions screen.
- Add: ScoreCard.IX_ScoreCard_TimeSlotEntryId index to speed up North Shore's start sheet.
- Mod: Show a meaningful error message if you try to show more than 20 rounds on the landscape results report (it is limited to 20).
- Final commit for v1.0245.
- Mod: Removed member administration forms from DGE and replaced with a web browser control pointed at DotGolf Live.
- Final commit for v1.0244.
- Mod: Major performance optimisation in Card Printing Admin predominantly, but should improve things in general as a few crucial indexes were added to the local DB.  Also got rid of a number of evil for-loop-sql calls.
- Final commit for v1.0243.
- Mod: Removed "Please Wait" panel from web browser form and replaced with a small ajax spinner top right.
- Mod: Oops - forgot the commit to 242.
- Final commit for v1.0242.
- Mod: Change ShowPlayerInfo to outside of "MemberID" condition so that the player info can also be updated for CardNo entry. This is important for updating the play date when editing scores.
- Fix: Caching of the handicap index occurred per member and did not include the playdate as key.  This could conceivably cause a bug where if you tried entering a score for a member 2 weeks ago (with an old handicap), then enter a current score (with a new handicap) within 20 seconds (or scanned within 20 seconds) the new score could get the old handicap assigned to the CompetitionHandicapIndex.  Matt discovered this one at Waihi.
- Mod: Tee booking to login directly to DotGolf Live.  Added src tag so we can give Enterprise people a better stylesheet.
- Mod: Don't show Stableford tick on scorecard for hidden holes competition type.
- Mod: Allow the club to export the missing scorecard report.
- Final commit for v1.0241.
- Fix: Object reference not set when trying to save a competition.
- Final commit for v1.0240.
- Mod: Some code inserted to try and prevent duplications of divisions and competitiontypes. This will at least tell us whether or not the bug is happening in 2 passes or not. If the problem still happens after this, then obviously the application is not saving the data to the database before creating the duplicates!
- Fix: When a competition is set to Exclude Green Fee, don't show the green line for members.  I think this will actually hide the green line for visitors too, but hey, that shouldn't be a biggie...
- Mod: Leaderboard now puts any error dialogs BEHIND the main window - they only show up on the taskbar now.
- Final commit for v1.0239.
- Fix: Added index to FullName on the Results table to speed up the getting results query dg_GetCompetitionResultsMultiRoundMultiPlayer
- Mod: Twos results were returning for all divisions, but the pages were still scrolling through the divisions. Now twos are lumped under "All Divisions"
- Mod: Ensure that all backups are deleted, not only successful backups.
- Fix: (Finally!) That green fee setup bug where if you delete a green fee, you can never add that green fee type again.
- Final commit for v1.0238.
- Fix: Oops, change was not applied to previous script.
- Fix: Visitors getting error at DIY when printing a card on a public holiday.
- Mod: Do not allow the user to set a green fee value less than $5
- Final commit for v1.0237.
- Fix: Do not allow "any" stableford competitions (previously is was individual Stableford only) to be setup in conjunction with non stableford ones when competition allows the extra stroke calculation Add: Hidden Hole Net competition type
- Fix: "New" button is not enabled for Special green fees if all normal green fee types are already allocated.  The work-around is to add a dummy green fee type to the club so that the New button remains enabled.  This commit fixes the enabled problem.
- Final commit for v1.0236.
- Fix: Added in additional competition types to be "ticked" on the scorecard.
- Final commit for v1.0235.
- Fix: Update the results and divisions when updating the "Freeze Category" flag in the competition setup.
- Final commit for v1.0234.
- Fix: Partner problem with last version including all partnered cards, not only partners for the group.
- Final commit for v1.0233.
- Fix: Scanning and Self Score Entry - Partners not being calculated correctly Fix: Scanning - Recalculate the results if different markers played
- Fix: Change to allow a Net 0 to be included in the results and prevent DNF
- Final commit for v1.0232.
- Fix: Mod North Shore for the alias change 2 revisions ago. They are slightly different because of course 1,2,3 rather than start tees. Add: Best 2 of 4 stableford
- Final commit for v1.0231.
- Mod: Login to DotGolf Live rather than the old admin site.
- Final commit for v1.0230.
- Mod: Print the correct hole alias on the score card, not just hole 10. If no matching alias, print what the start tee number was.
- Final commit for v1.0229.
- Fix: Alignment of member fees and visitor fees in the competition setup.
- Final commit for v1.0228.
- Fix: Pairs competitions were calculating incorrectly when played off the back 9 markers for different genders.
- Mod: Allow /noremoting switch to turn off the remote control service in the leaderboard.  This is for Remuera whose domain is causing me grief.
- Final commit for v1.0227.
- Fix: Leaderboard was stuck on splash screen.
- Fix: When a member's ClubNo points to a resigned CMember record, but they do have a live CMember record at the local club, retrieving their nine hole status fails and takes down the DIY.  Issue fixed by retrieving the nine hole status directly from the Member record without a join to CMember.
- Final commit for v1.0226.
- Mod: Hack for Pupuke for the $1 and $2 pay as you play green fee
- Fix: Found and corrected small typo.
- Mod: Show the splash screen if no competitions to show on leaderboard.
- Fix: Change to the logic for counting the maximum number of rounds for a category. Rather than referencing the End Of Subscription year, it should reference the category limits and determine the start and end dates.
- Fix: Bug fix for 9 hole scores when entered by adjusted gross and editing before any other event after opening DGE. Add: Min and Max scores for members when entering in DGE.
- Fix: Join on CategoryId rather than CategoryCode in dg_CalculatePlayerGreenfee.
- Final commit for v1.0225.
- Add: Best 4 of 4 for each hole for Stbl, Par, Gross, Net competitions. (For the Mount Net competition)
- Final commit for v1.0224.
- Fix: Bug with maximum handicaps for a 9 hole member.
- Final commit for v1.0223.
- Fix: 9 hole cards were not printing correctly from Card Print Admin.
- Final commit for v1.0222.
- Fix: Non affiliate bug for 9 hole when recalculating...
- Final commit for v1.0221.
- Fix: Include the label (18 Hole Index) on the print card admin screen
- Fix: We have now made the standard to always enter an 18 hole handicap for a Non Affiliate card.
- Fix: Holes like "2A" were being word wrapped on the long scorecard.  Adjusted hole name boxes to be slightly larger.
- Mod: Allow cancelling the print job if any players could not be entered into a competition.
- Fix: Change the text on the Self Score Entry terminal for incomplete holes used to be "holes not played"
- Final commit for v1.0220.
- Fix: Hole 6 was not updating in the course updates.
- Final commit for v1.0219.
- Mod: Change to the competition fee report to only show fees on the round, and the correct round date at the top of the report.
- Fix: Critical: When entering cards by member id, the score input control throws an exception (eg. #31200816) when entering the SECOND card in a row (just after changing the club ID for the second member).  This was discovered by Skippy (The Grange) and deployed to his machine manually.
- Final commit for v1.0218.
- Fix: Invalid cast bug when printing results/players for a competition by course handicap.
- Final commit for v1.0217.
- Fix: Scanning cards not allowing 18 hole members to enter 9 hole cards
- Final commit for v1.0216.
- Deleted script because renamed...
- Mod: Rename file
- Fix: Print the correct handicap index on the reports for 9 hole golf
- Fix: Competition handicap index was using the halved handicap index which is wrong.
- Final commit for v1.0215.
- Mod: Gulf Harbour changed the format of their cards slightly.
- Final commit for v1.0214.
- Fix: To the previous version: (Selecting 9 hole competitions was disabling other 9 hole competitions. Now fixed.)
- Final commit for v1.0213.
- Fix: Selecting 9 hole competitions was disabling other 9 hole competitions. Now fixed.
- Final commit for v1.0212.
- Fix: Change to the default marker for competitions for 9 hole golf.
- Fix: 9 hole update for using comp.nine hole rather than the member
- Fix: Some bugs from the 210 build and a sql script missing
- Final commit for v1.0210.
- Add: 9 hole handicapping for 18 hole members
- Add: 9 hole handicapping for 18 hole members Mod: Add date change event to reload markers in the Score Entry area (in case marker was recently changed) - FrmScoreEntryTab Mod: Update the scorecard ninehole property to NOW mean the nine hole marker of the scorecard everywhere!
- Mod: Change to Gulf Harbour swipe cards mag code
- Final commit for v1.0209.
- Fix: Couple of changes to the live start sheet change. (Shading and Not Available)
- Mod: IsStandardSlot property added to timeslot and used in StartSheet to change row BG Fix: StartSheet - disable cells when slots available < 4
- Fix: Green fee calculation was done incorrectly; if a club has a greenfee taking effect tomorrow, the current green fee could not be returned due to the time component of the @PlayDate.
- Final commit for v1.0208.
- Mod: Don't do home member category checks if they have a tee booking.
- Fix: Schema script for 207 had a bug in it...
- Final commit for v1.0207.
- Feature: Support for special greenfees for the tee booking system.
- 
- Add: Missing Reference.cs file.
- Add: Sql to update CategoryGreenfeeType.ChangeDate for old rows so that they get properly populated at central (fix went in before 3pm on 2009-08-05).
- Mod: Added update to touch Competition dates on clients - to fix CompetitionTypeCompetition sync bug.
- Final commit for v1.0206.
- Feature: Group Booking
- Schema mod: Altered TBTimeSlotEntry.Gender to nullable
- Fix: Not setting defaults for handicap, countrycode for members.
- Mod: Add a setting "AllowSameGenderAdditionalCalculation" to allow whether a club would like the Men versus Men or Women versus Women extra stroke calculation in the system. Just need to manually add it to the settings table.
- Mod: Changed to the latest hotfix of ActiveReports.
- Final commit for v1.0205.
- Fix: We had a "RoundNo" null issue which clubs who were using Pairs competitions, and it was not tidying up the scorecards results properly.
- Final commit for v1.0204.
- Update: Active reports references to latest version.
- Fix: Called slots were not always locking the grid row. Fixed.
- Fix: Changing club via opening dropdown, using arrow keys to change club, then moving focus away from dropdown - was not repopulating the club members. Fixed.
- Mod: For Card Print Timesheet
- Mod: Start Time Sheet includes a dropdown for friends once a member is entered in a time slot, subsequent entries in the timeslot can select a friend.
- Fix: Prevent results going up to central with no round number
- Mod: Small score card reading optimisation.  This handles cases where the card is fed through the scanner skew as well as rotated on an angle.  It only optimises reading of the data dots on the card, nothing to do with the score grid.  Waihi are trialling the new CardReader DLL for us at present.
- Final commit for v1.0203.
- Fix: Incorrect ClubGreenFeeId being assigned to people printing cards under the 3-club passport deal.  $0 is being assigned, but Card Print Admin is showing the full affiliated amount.
- Feature: Subs warning dialogs on Card Print Admin, Live Start Sheet, DIY terminal card printing and tee booking.  This talks to the dg_ShowSubsWarning procedure on local which is a stub for now - until we get proper schema in there and get the secret sync working.
- Mod: Changed Digitial Learning Solutions to DotGolf.
- Final commit for v1.0202.
- Mod: When printing a card from the live start sheet - do not look at resigned members, only live members.
- Mod: Allow the moving of people on the Tee Sheet if they have already printed a card. Warn the user first.
- Final commit for v1.0201.
- Feature: If more than 10 rounds are being reported on in the competition results, a new landscape version of the multi round results report is produced.  This is for Auckland, issue #102443.
- Fix: Draw now works with >8 character passwords. Fix: Corrected issue where Hole Selection form wouldn't remember the selections unless you first click Save.
- Final commit for v1.0200.
- Feature: Competition setup dialog now has a "Website" tab which allows entering competition details.
- Mod: Central webservice changed to allow Competition.DetailsHTML syncing.
- Final commit for v1.0199.
- Fix : Don't allow dropping on non-player cells.
- Fix: More fixes around the live start sheet.  This version is a release candidate.
- Add: Missing image.
- Add: Missing image.
- Debug: Hacked version of Card Print Admin to test threading issues.  DO NOT DEPLOY.
- Final commit for v1.0198.
- Mod: Hidden Qualifying Round button on competition setup since this doesn't work properly.  (Issue #102359)
- Fix: Start tee not appearing on the scorecard rptScoreCardLongDocuPrint.cs
- Add: Missing schema script (part of v1.0197)
- Final commit for v1.0197.
- Mod: DIY terminal now uses the ClubGreenFeeId calculated online by the tee booking system rather than the locally calculated one. Fix: Tried to fix the bug where you'd enter someone's name into the live start sheet, only to have that name disappear and reappear when the sheet is synced again.
- Fix: Allow backspace in the player select textbox on the LSS.
- Final commit for v1.0196.
- Fix: Add in the round date to the 2's (Hole information) report Fix: Change to the leaderboard so that if "show todays round only" is ticked, then only the 2's for that day are shown.
- Feature: International Stableford competition type added.  Paul Barlow from St Clair requested this.
- Mod: Set the print job name to "DotGolf Score Card #1234 (ID 36544)" when printing score cards.  "DotGolf Blank Score Card" is set for blanks.
- Fix: Scanning: On nine hole cards, the "inactive" 9 scores should be completely ignored.  This was not the case before; the Total Adj Gross column saved to the database would include any scores entered into the inactive 9, so if someone accidentally made a mark in one of those rows, they would be added to the adjusted.  This in effect would take the handicaps for these players out pretty quickly.  Reported by Steve Hinton at North Shore.
- Fix: Removed extra columns from the members form - category combo.
- Fix: Bug with 9 hole competitions, and hidden holes, twos, eagles etc. (Competitions with extra data for the holes). The back nine was never calculating correctly for individual holes.
- Fix: Course Information Detail form now shows markers for current date rather than the date of the course information, because we typically only use this form to update rather than look at old data.
- Fix: Bug where a non-affiliate's handicap would not get printed on their score card, even if you print it from the live start sheet.
- Final commit for v1.0195.
- Fix: Just a minor fix if a club has no active members
- Fix: Bug introduced by the fix for entering multiple rounds twice.
- Fix: Print start sheets for days other than today. Fix: Corrected the date top-right. Fix: Correctly crosstab reports where there are multiple start tees.
- Mod: Include the Men OR Women option for Kaiapoi Golf Club.
- Feature: Printing of the start sheet from Card Print Admin, including automatically printing the sheet when changes occur.
- Fix: Annoying bug that forces you to delete HomeClub.xml every time you change databases.
- Cleanup: AssemblyInfo.cs.
- Cleanup: Moved enums to the bottom of FrmMain.cs so that the designer works properly.
- Final commit for v1.0194.
- Fix: Leaderboard displayed the wrong round date if displaying a single round in a multi-round competition.
- Fix: Order by name, not date played.
- Mod: Added warning dialog to Valid for Handicapping checkbox, as well as some help links to explain what it does.
- Final commit for v1.0193.
- Mod: Added 194 stuff to 193 since it should have been in the first place.
- Mod: Rolled 194 into 193.
- Fix: Prevent 9 hole members printing 18 hole cards (happened when selecting course, and then going back and forward again)
- Fix: Added the timer synch to the LIVE start sheet, not just the DIY Terminal
- Fix: Mod to tee booking deleted timeslots and deleteddate.
- Fix: Mod to the deleted timeslots deleted date.
- Mod: Card Print Admin allowed the user to enter a score card into the same round twice, if they had 2 round 1's played on different dates.
- Mod: Set CancelButtons properly so that you can hit ESC to get out of most dialogs in Card Print Admin.
- Mod: Competition Players on DIY terminal did not allow people to enter a round if they missed a past round.  Eg. Enter round 1, miss round 2 and try to enter round 3.
- Fix: Do put the PrintedHandicapIndex on the ScoreCard table row even if Don't Print Cards is ticked in the settings.
- Mod: Added message to Add/Remove Competition popup to say why it's disabled.
- Final commit for v1.0192.
- Fix: Irish stableford for 9 hole competitions working properly now.
- Fix: Issue #101498: Multiple marker blank cards each prints a second card with absolutely nothing on it.
- Fix: Issue #101624: In the live start sheet when you are entering a booking, clicking on a member in the player search dialog, then clicking Ok with the mouse does not enter the member - you have to double click on the member, or enter a computer number.  An error is presented to the user if they simply click the name and click Ok.
- Fix: Issue #101617 where Card Print Admin does not remember the window geometry, and always starts maximised on the primary screen.
- Mod: resized the score card printer name on the card print settings form.
- Mod: Added trigger to stop non-zero time components for TBTimeSlot.SlotDate field.  Non-zero times usually indicate that the system timezone is incorrectly set.
- Mod: Competition select dialog in bulk card admin adjusted to a bigger size. Fix: Bug where Enterprise would open up in a 160x25 window when it was previously terminated while minimised.
- Mod: If the club has multiple courses - but only 1 course is active - then do not have the course selection option.
- Final commit for v1.0191.
- Fix: DIY tee booking crashes if a non-affiliate name doesn't have a comma in it.
- Fix: Clubs without TBP should not have verification prompts.  This has been causing a problem at Whitford.
- Fix: Multi round competition automatic entry bug on DIY for Aviation.
- Final commit for v1.0190.
- Fix: Allow the extra stableford calculation to apply to all stableford competitions, not just the individual stableford competition.
- Final commit for v1.0189.
- Fix: Stop duplicate public holidays from being inserted while syncing to the client.  This will mean we can now update ChangeDates for public holidays after a club has updated to 189.  This fixes issue #100147.
- Add: Added the report for Men All and Women All to the Handicapping reports. Someone requested this for DGE.
- Fix: Bug occured in the Bulk Card Admin area when trying to print - was looking for CourseName which was not returned.
- Final commit for v1.0188.
- Fix: AppStarter does not upgrade the computer if InitialSyncDone is false in HomeClub.xml.  This is a problem for PCs where DotGolf Enterprise was never run, such as some DIY terminals.
- Mod: Changed logic on DIY terminal Enter All button so that if there are multiple competitions forced off the SAME marker, the button is still enabled.
- Final commit for v1.0187.
- Mod: Rejigged Exception Viewer dialog so the last few lines of the summary page aren't cut off.
- Fix: Sync bug where green fees cannot be synced from central to local.
- Mod: Misc Enterprise installer updates.
- Fix: Sync bug where green fee cannot be synced from central to local. Mod: Added TBClubSettings.AllowMembersToBookVisitorsFromDIY to disallow visitor/non-affiliate bookings from the DIY.
- Final commit for v1.0186.
- Final commit for v1.0185.
- Mod: AppStarter mods to increase reliability of Express installs. Fix: Added missing syncProcessCategory procedure.
- Mod: Change to the user accounts area to hide "alan"
- Mod: Remove duplicated "Out of Category" display on DIY when green fee type name also includes that phrase.
- Mod: Include the DatePrinted in the missing cards report (North Shore requested this)
- Added missing files.
- Feature: Full Playing Category support for both DotGolf Express and DotGolf Enterprise. Feature: MaxNoOfRounds limits on a greenfee.  Note that this only works for bookings online as of now. Feature: Green fees may now be limited to Full Playing categories only - useful for reciprocal clubs, but only works online right now.
- Fix: Various bugs around editing bookings on the live start sheet. Mod: Changed icons for male and female to proper ones. Mod: Changed booking information dialog to have a multi line editor. Fix: The OK button didn't use to work when selecting an affiliate to add from the PlayerSelectDialog in the live start sheet.
- Fix: If you're a resigned secondary of a club, the club cannot add you as a secondary again; message "Already a secondary" appears from the New Member Wizard.
- Mod: Added sanity checks to users' DateExpiry when they are saved, to avoid timezone problems on Express clubs.
- Feature: Added UI to DGE to allow running SQL if you logon with user Matt; or enter "sql" and "zx26po" as your username into the logon box.
- Fix: This time public holidays on the DIY terminal are fixed.
- Fix: DAL bug which stopped Ignore Public Holiday categories from being saved to the database.
- Final commit for v1.0184.
- Fix: Handicap Low to High did not work properly after the change for the Mt. I have reverted how this option works, however the No. 1 Seed plays last change is still there.
- Fix: Sometimes when marking a timeslot as Called (in the live start sheet), a null reference exception would be thrown (eg. exception #29360908).
- Mod: Added setting to choose whether TBP greenfees are included on the local reports.  The default is False, so unless you set the setting (Settings > Miscellaneous > Include ...), you won't see the Online Payments section on the green fee reports.
- Mod: Show ticks on the scorecard for the combined competitions also (previously a tick would be visible for Stableford, but not Combined Stableford).
- Fix: Small bug where 9 hole non-affiliate players entered in the pre-print wizard would be picked up as 18 holers.
- Mod: Reserve timeslots when booking people through the live start sheet.
- Final commit for v1.0183.
- Fix: Sometimes the live start sheet will pick up a resigned number if you right click-print card, then retrieving the scorecard details would fail and you can't print a card. Mod: Added exception wrapper so I can see which TimeSlotIds are failing to delete.
- Fix: Course insert wasn't working on synchronise.  Fixed typo in sync procedure.
- Fix: Corrected bug in dg_CalculatePlayerGreenfee SP where a public holiday would be out of category.
- NOTE: Had to move this checked to false to after the assigning of DateTime to today. Else - it defaults the control to checked when you set it to today.
- Mod: The Grange wanted "Markers" taken out of here - because it is only for different Genders in DotGolf. Probably should update the wiki at some stage too. [DFH 2009-02-16 Wiki edit done.]
- Final commit for v1.0182.
- Mod: Changed the Draw Generation to begin filling from the last Tee Time if No. 1 Seed plays last (or Handicap High to Low), and to fill from the first Tee Time if No. 1 seed plays first (or Handicap Low to High) Add: Entered order option for Titirangi and other clubs to use for upload of csv file. NB: This should not have been submitted to 181 before the final commit - is actually only part of 182.
- Final commit for v1.0181.
- Fix: Revert back the public holiday change in the members category area. Needs to be fixed properly in a later version
- Mod: Changed the Draw Generation to begin filling from the last Tee Time if No. 1 Seed plays last (or Handicap High to Low), and to fill from the first Tee Time if No. 1 seed plays first (or Handicap Low to High) Add: Entered order option for Titirangi and other clubs to use for upload of csv file.
- Final commit for v1.0180.
- Mod: Display the SlotKey in the DIY Terminal if the BlockName is different to the SlotAlias.
- Final commit for v1.0179.
- Fix: Stupid quote bug in sql script.
- Mod: Just a couple of comments as warnings for the ShowOnPublicTeeBooking...
- Mod: Added filter to the Marker and Course columns in Bulk Card Admin.
- Mod: Changed the disabling of the course combo to enabled. This was becoming annoying for North Shore - and if you are the admin person you should be able to change the course if necessary. They were having to print the card, and then reprint the card to change the course.
- Fix: Don't show members with no TBMember row as unverified.
- Mod: Only bitch about unverified members if the club has the TBP product.
- Final commit for v1.0178.
- Fix: Member not verified error message not supposed to allow them to continue printing a card.
- Mod: Fix to verified prompt on DIY terminal - all booked members used to get the verification prompt.
- Mod: Major: Added Public Holiday handling to categories form, and added fields and sync code to replicate to central. Also changed greenfee calculation in DIY terminal to honour the setting for restricted members.
- Final commit for v1.0177.
- Fix: Missing SP for matchplay stroke mod.
- Fix: Bug in 175/176 where @MemberId wasn't passed to a procedure when printing a green fee card.
- Final commit for v1.0176.
- Fix: Reciprocal greenfees set up for someone's secondary club would not work from Card Print Admin.
- Final commit for v1.0175.
- Fix: Moved Matchplay stuff from 176 schema script to 175.
- Reverted final commit.
- Feature: Automatic member account verification when printing a card from the live start sheet. Mod: Don't allow unverified accounts to print cards from the touch screen. Fix: Typo in MultiPlayerSelect control.
- Mod: Tooltips on greenfee categories form. Mod: Fixed exception that happens when you edit a booking while the live start sheet is in the middle of refreshing.
- Add: Print out the stokes on the scorecard for MatchIndex. Also - mod to the TeeMarkerDTO for the extra properties.
- Add: Process marker MatchStokes in the DALMarker synch.
- Add: Process marker MatchStokes in the DALMarker synch.
- Add: Add in a setting for 18 Hole Men/Women, and 9 hole Men/Women. This setting allows the system to print a MatchPlay stroke on the scorecard.
- Add: Added in the MatchStroke in the TeeMarker table and also changed the synchProcessMarkers SP
- Mod: DIY Terminal: Ticket Number entry visibility is now controlled by TBP product. Mod: Fixed card printing from a ticket to now work off the course defaults (for non-affiliates) Fix: Small formatting issue for the ticket entry prompt.
- Mod: DIY terminal to reflect whether a booking was paid online. Mod: Greenfee report to group greenfees by Paid Online as well.
- Final commit for v1.0174.
- Fix: Bug where if the date is the end date of a category limit, any members in that category are not allowed to get a card.  This manifested itself quite nicely on 31 December 2008...
- Fix: Bug where sync service would not set ScoreCard.TimeSlotEntryId properly.
- Fix: If a member has scores not valid for handicapping and the user edits that member, the system says that the member has unsynced scores and refuses to update.
- Fix: Bug in the exception logging code for a duplicate scorecard-competition.
- Mod: Changed handicap report to say "Handicap Index" rather than "Handicap"...
- Mod: Added safety net to DIY terminal score card printing to stop duplicate competitions on the same scorecard.
- Fix:  Formatting error in 172 schema script stopped the clubmatrix cleanup from happening.
- Fix:  Exception #29276684 and friends, where a member is missing a Cmember record and a card was printed for that member, Card Print Admin would not start up at all.  Also improved exception detail around the DALScoreCard.RowToDTO method.
- 
- Mod: Implemented drag&drop and read-only rules for paid-online bookings in the Draw system.  Added icon for showing which bookings are paid.
- Mod: Sync PaidOnline flag for tee bookings. Mod: Implemented drag/drop rules for paid online bookings.
- Fix: When re printing a card - the Handicap is looking at the wrong handicap on the "Grey Day". Changed now to look at the PrintedHandicapIndex.
- Fix: The preprint ignores the marker check until the swap of the competition select and the marker select is done - like the DIY Terminal
- Final commit for v1.0173.
- Fix: Exception #29268018 and friends.  This one happens when you hit Enter in the member search grid in the Members area, like you usually would when selecting a member.  If the grid has no members in it, an exception is thrown.
- Fix: Change to the dg_GetCompetitionsForPlayer SP - to prevent multiple markers being returned for a competition with divisions.
- Fix: Exception #29270867 and friends. When typing a partial club name into the Detailed Member Search dropdown dialog, then entering a surname.  This would cause the members grid not to be fully populated, causing the FullName column not to exist, causing the Key Not Found exception.
- Fix: Exception #29269488 and friends, where if you click Add/Remove/Delete on the Bulk Card Admin form, the application would crash with an index out of range error.
- Fix: Bug where a newly created member record would not be synchronised if the client clock was set to the future and database server clock is set in the past.  Even small drifts of 2 minutes would cause this to happen if a sync was done too quickly.
- Mod: Added tip for round selection in competition select dialogs in pre-print and standalone.
- Mod: Changed behaviour of Shift+Click slightly - Shift+Click if enabled, now skips the pin entry.  Pin entry is enabled always, if a Pin is specified in the settings.
- Fix: Bug when a non-affiliate has no name on the start sheet, the DIY would crash when loading My Bookings.
- Fix: Overlapping greenfee bug - ChangeDate is now updated so that the newly set ExpiryDate for an old greenfee will be sent to central.
- Final commit for v1.0172.
- Add: Added in a Delete field to the club matrix table to allow us to delete clubs from being controlled by other clubs.
- Add: Added an advertising logo to all scorecards. Also added in an extra 2 twos holes to accommodate for 12 twos holes. Also, made the preview work in the card print settings for the logo.
- Fix: Remove club matrix records from clubs where it is not their home club. Mod: Change the process club matrix to allow a "delete" flag
- Final commit for v1.0171.
- Add: Fix for calculate player green fee - Waitikiri noticed the problem with Green Fee's and categories.
- Mod: Turned Shift-Reprint hack into a real feature with a proper menu. Fix: Stopped shift-reprint from printing historical cards.  Also stopped it from reprinting returned cards. Fix: Shift-Reprint should never print receipts.
- Mod: Save the font name and size as default for the machine for the handicap reports.
- Fix: Allow Prizes to be printed out for BEST OF Competitions. Fix: For clubs with multiple courses, when they create a new competition, and change the course, it should in turn change the course on the round tab also.
- Add: A new report which for handicap index - to go with a course handicap report.
- Fix: Mod to the basic handicap report to make the Print Categories checkbox work.  It now actually includes a column with members' categories in there.  This works off the new CategoryId though...
- Fix: Fix bug with CategoryID and Null for visitors - thanks Matt (lucky it went out to no one!!). Fix: Updated the synch process for screen totals
- Final commit for v1.0170.
- Fix: Added CategoryID into the ProcessCMember SP
- Fix: Include CategoryID being downloaded from the central database. Only ever used to download the CategoryCode.
- Final commit for v1.0169.
- Fix: Prevent score cards from being Added to the same competition more than once - e.g. If the competition has 2 rounds on the same day - cannot enter the same scorecard into round 1 and 2.
- Add: Added competition types for Irish Stableford, Russian Roulette, Best 2 multiplied by 3rd (Mt Maunganui)
- Mod: Changed scroll style to immediate for better UI response.
- Fix: Don't lose the scroll position after doing something with a card in Card Printing Admin.
- Fix: Bug where the live start sheet would crash if a non affiliate name doesn't contain a space.
- Fix: Fix for Multi Club bug where changing the home club (Waikato), does not update Club Name, ID, and Course information in the score entry TAB.
- Add: Included 2 reports for Competition Players now, 1 for Course Handicap and 1 for Handicap index.
- Fix: Bug which prevents users entering a 2nd round of a 2 round competition on the same day. Introduced in version 163.
- Fix: Do not automatically select the competition (for players setup in a competition) when editing a card from the Card Print screen.
- Fix: Live start sheet crashes when printing a card for a non-affiliate with a name without a space in it (so splitting into firstname//lastname fails)
- Nothing.
- Mod: Updated AssemblyInfo.cs to 2008. Mod: Added changelog link to about dialog.
- Fix: Bug where ALL members would be shown even if ACTIVE is selected, after viewing a member's details in the member area.
- Final commit for v1.0168.
- Mod: Throw a proper exception when a PlayerId==0 is detected.
- Feature: Show only cards scanned on this computer (setting) for multi scanner clubs.
- Fix: Update DLL fixed and reverse-committed for 167.
- Final commit for v1.0167.
- Fix: Throw inner exception so that the message that the system time is incorrect is shown to the user. Mod: Resized Sync window slightly so that it will fit on 800x600 displays once more. Mod: Changed UI update interval from 50 to 23 to give the illusion of speed. Mod: Modernised Exception dialog slightly; it was bothering me.
- Fix: Stop exception #29234369 from happening if the Hole-in-1 button is hit on Self Score Entry when the user has already entered 18 scores.
- Fix: When Teebookings.cs sync code inserts non-affiliates at Aviation, it fails with a silent exception.
- Fix: Don't check for updates automatically when we're running on a development PC (DotGolf.AutoLogin.txt exists)
- 
- Fix: Prevent error message from appearing when trying to book in the start sheet when someone is already booked
- Mod: Added UpdateProcessor for 1.0167 upgrade (to add PlayerId to TBTimeSlotEntry table locally).
- Fix: Bug when entering players into the start sheet - PLAYER ID added to the local database and code structure.
- Fix: Bug fix for handicaps being updated on the Grey Day prior to doing a synch. (Tee Booking integration enabled)
- Fix: Fixed bug for multi player competitions and prize allocation. Was printing a blank sheet previously.
- Fix: Fixed error which occurred when reprinting a card.
- Final commit for v1.0166.
- Fix: Change to prevent multiple competitions being shown on the DIY Terminal - around competition division markers Fix: Change to CopyCompetition to prevent any old competitions which may have been created being copied. Fix: Update any competitions already created in the future to have DEFAULT markers if set to ALL with UseCourseHandicap
- Fix: Ensured that you can click NEXT when there are some competitions that get disabled when selecting from the DIY Terminal.
- Fix: Enable Enter All button properly when there are multiple competitions on the selection screen.
- Fix: Do not allow a competition to be setup for multiple divisions set off ALL markers.
- Fix: Changed the sort order back to how it should be - Green Fees in RED at the top, and then in card number order.
- Fix: Buttons for background color set to white. This allows you to see it on old computers where the default backgrounds of TextBoxes seem to be black. Thought it was fixed in revision 2146 - but no.
- Fix: Public holidays didn't work on the DIY terminal if you have WeekEnd/WeekDay rates.
- Mod: Increased central sync CommandTimeout to 500s.
- Fix: Prevent the duplication of Green Fees when assigning a Group Green fee to a previously "chosen" green fee from the DIY Terminal
- Fix: Don't throw an exception if the ScannedCardsFolder appSetting isn't set properly - just disable the relevant rows in the report.
- Fix: Bug stopped people from modifying competitions via Add/Remove Competition through Card Print Admin. Fix: Stop the reprint of a card when adding/removing people from a competition.
- Mod: Enterprise installer project update.
- Final commit for v1.0165.
- Fix: Bug stopped people from entering competitions through Card Print Admin.
- Feature: Automatic behind-the-scenes printer error logging for DocuPrint 240A via a webservice call from the DIY terminal.  See the ExtPrinterLog table at central.
- Fix: Turned word wrapping off on the home club column to fix Whangaparaoa's electronic scorecard.
- Fix: DIY terminal already running check - never ask whether to kill the other copy; just kill it.
- Fix: Changed overnight file builder to correctly insert RolloverDateId on all members.
- Final commit for v1.0164.
- Fix: Added rollover calc date table Fix: Don't call rollover calc date on overall process count - and do not allow divide by 0
- Fix: Calculate green fee for player needed an adjustment on the category date check for Always charge fee clause
- Mod: Script for getting multi club syncs to start working.
- Fix: Preprint was not saving the marker id to the scorecard object which is used to determine what competitions can be entered and therefore some competitions were being disabled when they should have been enabled. Fix: Preprint back to marker from competition select was not keeping the marker selection and was setting the marker dropdown back to default.
- Fix: When issuing fee and card grid refreshed in background, due to a card change elsewhere in system, an error would occur (e.g. http://adweb/ViewExceptionDetail.aspx?Id=29203443) when attempting to refresh the row of the card issued a fee. Fixed to check for this case.
- Fix: When loading an existing non affiliate card into dialog the marker dropdown was not populated if the player type option was left on default (therefore not firing a change event), this caused the marker to not be set and the card was getting 0 for markerid. Fixed to load markers and select marker of card.
- Mod: Start sheet showing slot key with slot alias as tooltip, also booking information shown and editable. Time slot key, alias and booking information is synced but not currently used locally.
- Final commit for v1.0163.
- Fix: Multiplayer results needed to sort the names making the fullname on adding the results as the results are grouped by the fullname for multi rounds - to prevent 2 round results being recorded as e.g. rnd 1 Smith, M; Beisly, D - rnd 2 - Beisly, D; Smith, M
- Fix: Terminal to handle paged competitions with disabling competitions off different markers etc
- Mod: Member search now has toolbar with New, Edit and view member options.
- Fix: Page margins so extra page not printed
- Mod: Changed order of sequence of screens in DIY terminal, it is now Course select (if multi course) --> competition select (if competitions for player) --> marker select (if no competition forces off marker). Fix: Card print admin was not refreshing competition grid when changing date.
- Mod: Setting for the grayscale of the hole names on scorecards.
- Added: COMP and LB products throughout the system. Enabled / Disabled various parts of the system. Enabled: Reports for Competitions, Card Print Admin (with Pre Print only), Bulk Card Admin, Competition Setup area in Enterprise, Score Entry menu, Leaderboard tabs, settings, and Leaderboard App,
- Fix: Just return out of the app.
- Fix: so this can run to drop/add constraint multiple times without failing.
- Final commit for v1.0162.
- Fix: Default for member table column RequiresSyncForScoreEntry is changed to 0 and on insert member (dge_InsertMember) locally 1 is set
- Final commit for v1.0161.
- Fix: New Members last full sync are now synced with the teebooking sync to prevent constraint error for bookings by new members. Mod: Terminal teebooking sync is now run at the start of the print card sequence instead of the point in time of getting the booking information.
- Mod: Added 'ESC' to scorecard reports for club Aviation
- Fix: Leaderboard multi player multi round display of results.
- Fix: Category check in calculate green fee and get member extended info was not handling categories with date range spanning the new year (summer category)
- Mod: Changed a number of collection usage from GenericCollection to use List Mod: New property Exclude Green Fee for competitions, when printing cards from DIY or Card Print Admin with a competition that has fees and this Exclude flag, then the standard fees are not added to the competition fee. Mod: Replaced some grids population from the old datasource events technique to use List objects. Removed a couple more redundant classes from DataAccessLayer.
- Fix: Bug when entering in hole 18 if dual number was entered and then a 1 the hole number was changing to 19 causing exception e.g. http://adweb/ViewExceptionDetail.aspx?Id=29189275
- Fix: Hopefully fixed the intermittent bug - http://adweb/ViewExceptionDetail.aspx?Id=29189261
- Fix: bug when you click on leaderboard advert preview twice causing exception like http://adweb/ViewExceptionDetail.aspx?Id=29189254.
- Mod: Adjusted anchoring of controls so it looks nicer on resizing
- Fix: When there is only 1 round in a competition the competition select no longer shows "Round 1" after competition name Mod: Auto ellipsis competition name so it is not cut off, and when no players are displayed in the panel next to competition name then the competition name now grows to use that blank space.
- Mod: Added Abort-retry-ignore dialog to the initial database builder.
- Fix: Did a few fixes so that pre-initial-sync code will still work properly even with the multi country stuff.
- Mod: Group bookings have been put into groups to show groups with no assigned cards, with deleted cards and assigned cards.
- Final commit for v1.0160.
- Mod: Exception handling on syncing teebookings for start sheet in background worker.
- Mod: Hole names for score cards new files to commit.
- Mod: Score cards now can have hole names printed on them, this is setup from the Card Print Settings area.
- Mod: Wrapped FillStartSheet() in a SilentException so that if there is a persistent error the user doesn't get an exception dialog in their face all the time.
- Final commit for v1.0159.
- Mod: DIY terminal now disables the Enter All button when you've picked at least 1 competition on the DIY terminal.
- Fix: Stripped time from getting markers for handicap report as it was causing errors if a marker was changing on that date as they don't have time. Mod: Added 1 day to when to get markers so if a rollover day it will always pick up markers in the next rollover period (usually when the report is printed)
- Mod: Removed redundant methods
- Fix: A reference to the CourseName column in card grid that was wrong is now correct.
- Fix: When printing a card entered into a competition with ALL markers allowed, the marker selected was always being overridden by the default marker. Now prints original selected marker.
- Mod: DAL - Removed all redundant dge_ classes
- Mod: Card Print Admin - Added link to wiki from start sheet for help
- Final commit for v1.0158.
- Missed file
- Mod: Card print start sheet new features - Add bookings, move bookings, delete bookings, refund online payments, card admin from start sheet. Fix: Disallowed text entered into computerno textbox on MultiPlayerSelect
- Fix: Handled error when long number is entered for card no, nice message shown now.
- Mod: Added product to HomeClub for TBT and TBP Mod: Enabled Draw for TBT Mod: Draw - Added to selecting players for new competition to allow selection of players with cards printed.
- Mod: This was renamed to FrmMembersByCategory
- Fix: Just changing the reason for an error message.
- Mod: New report for Members by category
- Fix: Allow friends without handicaps to be booked on the DIY terminal.
- Mod: Preprint - made processing player types fast by using member extended isSecondaryMember property instead of making sql calls. Fix: Division check for handicap now not done for competitions with frozen divisions if player has previous results in competition.
- Mod: Disallows multiple exes of DIY Terminal from running
- Mod: Changed order of sending so scorecards are sent before scores
- Final commit for v1.0157.
- Fix: Score entry edit uses CanAddScore, this recently had a check for if scorecard already has score entered but didn't take into consideration score edits. Mod: Teebooking methods add for use.
- Mod: Added Images
- Final commit for v1.0156.
- Mod: Accept Time Slot called with no flag - always setting true.
- Fix: TotalAmount is no longer a column of TBTicket, removed from Syncing StartSheet
- Mod: Setting changedate on scorecard when score entered and return flag is set on scorecard Mod: Ability to set Called flag on booking to true OR false.
- Mod: Server code for syncing ScoreCards
- Fix: Check for if terminal is exe starting is now case insensitive
- Mod: Enabled empty pin to be entered. Mod: Removed Show All Competitions tickbox
- Mod: Added syncing of Scorecards - client side code only
- Final commit for v1.0155.
- Mod: Added player select textbox and dialog control
- Mod: On pin entry buttons do not show being pressed
- Mod: Added CategoryGreenFees to Categories setup, to sync, and the extra logic for getting players green fees Mod: Changed using arrays for categories to use Lists.
- Fix: Prevent scores being added for a scorecard multiple times
- Mod: Changed label for show unassigned fees checkbox
- Mod: Add competition type for 4BBBPar
- Mod: Competition setup extra stroke calculation help now goes to wiki page
- Mod: BIG CHANGE to AdjustedGross - to affect scores from 1st Oct midday.
- Mod: Grouped green fee summary report into Deleted|Unassigned|Assigned cards. Added option for showing/hiding unassigned cards in report.
- Fix: Default for competitions was ticked whenever the player was able to play in competition, this was introduced by mistake when checking competition players. Now fixed to only default to ticked if the competition has exclusive player list and the player is on that list.
- Mod: Added Course Handicap to single round competition results report. Fix: Competition players report now uses PrintedHandicapIndex to calculate the course handicap, instead of current member handicap which could be wrong.
- Fix: Typo on assign a membership id.
- Mod: Static day course information now defaults the date to the date selected in the calendar instead of todays date.
- Fix: Getting ScoreCard by card no now only ever gets a card within the LAST FULL cycle
- Fix: Auto restart timer event had check for current screen logic wrong
- Final commit for v1.0154.
- Fix: TotalAmount column is NOT NULL so always insert a value in the tee booking sync.
- Fix: Added caching for getting member handicaps, minimises any calls to web service when method called multiple times within 20 seconds.
- Fix: Bug not populating competition players for seeded draw when competition has no divisions.
- Mod: Added showing of Hole-in-1 scores, shown at start of advert cycle
- Fix: If no clubid entered in score member entry and search member tab is opened, the home club will now be the default selected club. Previously error occurred as the code was trying to set the club dropdown to the clubid entered (which was empty).
- Fix: Button style set to XPOffice for buttons caused the buttons to be invisible on Win2k machines, fixed by setting button style to default.
- Mod: If player is competition player then the competition is ticked by default
- Mod: Pin required to enter maintenance is optional security now. If no pin setup then simply allow access.
- Mod: Showing Course Handicap instead of Handicap Index on Competition/rptCompetitionPlayers
- Fix: dg_GetMembersExtendedByClubID needed DateFirst setting to Monday
- Fix: dg_GetMembersExtendedByClubID needed DateFirst setting and DayOfWeek +1 adjustment as its stored 0-6 (Sun first) in the category limit whereas sql is 1-7
- Fix: Multiplayerselect control had a default date set for category checks, this needed setting to competition date.
- Fix: Multiplayerselect control had a default date set for category checks, this needed setting to card print date.
- Fix: Dropped column TotalAmount from TBTicket as it is not used and caused exception in SyncTeebooking
- Final commit for v1.0153.
- Fix: When a member is in a category with Always Pay a Greenfee but not Allow Play outside Category Limits, the system would crash because the dg_CalculatePlayerGreenfee stored procedure would not return a valid greenfee, even if there are valid ones.  Thanks to Doug for spotting this one.
- Fix: Partial fix to memory leaks in DIY terminal.  It's about 70% better now, but not quite solved yet.
- Final commit for v1.0152.
- Add: New images for CardPrintAdmin teebooking page
- Feature: Teebooking start sheet on CardPrintAdmin Fix: Cards printed by card print admin when no competitions are on the day were not setting the Printed flag to true for the card.
- Feature: DIY terminal - allow non-affiliates to enter ticket number to print their cards.
- Mod: Made Competition name column in frmCompetitionSelect to sizable width
- Mod: Added SPs for getting TBtimeslots and TBTimeSlotEntries
- Mod: Added PaidOnline column to TBTimeSlotEntry
- Fix: Exception 29163683 - Column 'DateExpiry' doesn't belong to table Table - when trying to redeem a round off a concession ticket from the DIY.
- Mod: Sync TBTicket, TBTicketEntry and TBTransaction tables so that the Live Start Sheet system can tell whether bookings were paid or not. Fix: DIY terminal reports error "Error displaying My Bookings:" when there is no error.
- Mod: Changed "Installing Updates" message so that it won't show if there are no updates to install.
- Mod: Script for the sync green fee and transaction changes. Plus a touch on the ClubGreenFee records to make them sync again - this will pick up Junior info.
- Mod: Added syncing of Junior info for green fees Mod: Added syncing of Transaction Journal table
- Aesthetic: Saving Category now uses savingLabel1 instead of showing a messagebox.
- Mod: Card Print exes are now only included in updates for clubs with the Card Print product.
- Mod: Increased Width of computer name in DIYMenuSettings Mod: Added to Draw Wizard reverse U seeded draw. Mod: Fixed seeding issue with Matchplay draws when players have the same score.
- Add: New resource files for the competition calender control
- Fix: 0 score holes now will force actual gross for scores to be saved as null (and not a lower score)
- Mod: Changed CompetitionCalendarControl full list view from using a list box to now using an ultra grid, with the display leaderboard column editable.
- Mod: Used savingLabel1 when saving instead of messageboxes
- Mod: Option to hide membership no (Computer No) from reports
- Mod: Throw exception in DIY terminal if the central server sends an error message back upon retrieving bookings.
- Nothing: Added the new controls project to my solution file.
- Mod: Changing buttons to use new button which doesn't store extra images in resource files. Merged a couple of images used as global resource images.
- Mod: ALL HANDICAP determining for members is changed to be using Rollover Date IDs in the member table to work out which handicap to use from the rollovers. Mod: Tidied up new ShadowSkinnedUltraButton2 for enabled/disabled and commented out unused code.
- Final commit for v1.0151.
- Fix: Moved setting delete flag in database for backup to be in same try catch as the deleting of actual physical file. Prevents flag from being set if the file deletion failed.
- Mod: Changed "No handicap" message for adding Non Affiliates.
- Mod: Aligned ShadowSkinnedUltraButton2 shadow more to the alignment of the old shadow button. Mod: Timer on pin entry, if no pin has been entered within 20 seconds then it closes. Mod: Merged "Cannot add player" messages for MultiPlayerSelect LoadPlayers into single message.
- Feature: Pin code entry to access DIYterminal Settings Mod: ucMemberNumberEntry made to be reused, so pin entry can use control. Mod: Terminal settings buttons use new shadow button which uses global property images without creating new image resources. Mod: Preprint now show start tee times on cards printed from tee booking start sheets. Fix: Scorecard reports caused a CLR bug on occasion from using custom dashstyle when drawing the line to the start tee. Avoids bug by using standard dashstyle.
- Mod: Draw Player select now uses combo for country.
- Final commit for v1.0150.
- Mod: Set non affiliate country default in frmNonAffiliateCard, Draw/FrmDrawWizard.cs and MultiPlayerSelect. Mod: Sync now processes rollover period first. Fix: Inserting countries in a sync
- Mod: Table of countries is now used for selecting countries on non affiliates details, used in MultiPlayerSelect and Draw/FrmDrawWizard.cs. The Countries are synced from the server. Mod: Competition and competition divisions can be set for ALL markers, when printing a card competitions for ALL markers will always be available to player no matter what marker they select. Fix: Group green fees in PreprintWizard/frmPreprintWizard.cs were not being correctly allocated. Mod: PreprintWizard/frmPreprintWizard.cs now uses MultiPlayerSelect control.
- Mod: Removed extra images from settings buttons
- Mod: Added explanation of course par differences affecting stableford calculations in help text on Competition setup.
- Feature : Competition Players - Select players for a competition in competition setup, the MultiPlayerSelect control was created fore this. When printing cards in terminal or card print admin the competitions with players selected are validated. Draw wizard and preprint can select a competition with preselected players for the draw or preprint. Feature : Terminal can start windows keyboard from the setup page. Fix: Competition setup now allows different markers for divisions WHEN divisions are set by handicap index.
- Final commit for v1.0149.
- Fix: AppStarter text in fullscreen was barely visible; changed to Silver. Fix: Automatic restart of DIY terminal when also running a leaderboard was broken; didn't restart the terminal. Mod: AppStarter fullscreen now remains open until the DIY terminal closes it; akin to the way DotGolf Enterprise does it. Feature: Added "Run Leaderboard" button to the settings area in the DIY terminal.
- Final commit for v1.0148.
- Fix: "Membership does not match to marker" error changed to a nicer message. Added Member Info Service for realtime handicap retrieval. Canada: Added Canadian ESC calculation. Fix: Changed CourseId to an int in Markers.cs. Mod: Changed handicap calculation routines to always use the central (webservice) handicaps rather than the local handicaps. Fix: In some areas the Member.IsNineHoleMember flag was being inferred incorrectly from the type of scorecard printed.  Fixed this to load the proper member record and retrieve the flag from there.  This involved a mod to all the ScoreCard retrieve procedures to get the ninehole flag from the associated marker, rather than from the ScoreCardNonAffiliate or Member tables. Fix: DALMember.GetClubMemberByID threw an exception if the given member id did not exist. Mod: Only ever enter Adjusted Gross entry mode automatically if country is New Zealand. Mod: Score entry works for Canada now.  New Zealand code is still the original.
- Mod: Added exception when adjusted gross of 0 is inserted from scanning.
- Fix: Small typo on error message in scanning.
- Mod: Set min width for fullname column and altered min for home club so columns look better on 800x600 resolution
- Feature: Leaderboard, CardPrintAdmin and DIYTerminal now check for when updates are ready to install and if so restart themselves (and any other dotgolf exe running on the pc). Appstarter can now start more than one application as it accepts multiple files to start in its parameters. Aesthetic: Splash screen in appstarter changes to black fullscreen if the application starting is DIY Terminal.
- Added MemberInfo.asmx webservice for handicap retrieval.
- Fix: New Plymouth: Mod DIY terminal marker select so that up to 8 markers may be shown (by reducing button heights).
- Mod: Added tracking of the handicap printed on the scorecard.
- Fix: When adding members in Draw manually by computer no after selecting a competition, there is now validation for if the member is able to be added for that competition.
- Fix: When competition type is added for a competition with results the results for the new type are now added. Same with removing a competition type removing any result types. Fix: On saving competition the results are only recalculated when fields are changed which affect results. E.g. previously when adding a round it caused a recalculation which is not required, now it doesn't. Mod: Warns user if they are deleting a round with scorecards already printed or entered Results. Fix: Disabled editing rounds if round has scorecards printed or entered results.
- Mod: Track the RolloverCalcDateId and correctly determine which handicap to use while in the middle of a sync.
- Feature: New report for Green Fees for Club
- Aesthetic: Date of competition added to title of CompetitionPlayers report. Feature: Enabled export of Green fee summary and audit reports.
- Fix: Got the print receipt flag working for non affiliate cards printed.
- Fix: The dg_GetRoundsPlayedByMember query was returning scores played on the day after the ToDate. Fixed to use 23:59:59 of the ToDate in where clause.
- Feature: Leaderboard Adverts - setup in DotGolfGUI settings, and implementation in leaderboard
- Fix: datefirst problem in greenfee calculation procedure for DIY terminal.  Showed weekday greenfee on the weekend.
- Mod: Canada: Implemented ESC for Canada.  Did superficial testing.
- Final commit for v1.0147.
- Fix: Canada: SyncData URL changed to Canada based on a setting.  Sync tested and confirmed working.
- Fix: Standard scorecard date format - printed in US before.
- Feature: Canada: Added warnings when running DotGolf with a Canadian database. Mod: Canada: Made Sync work against the Canada database.  Note that tee booking, version checks and exception logging still work against the New Zealand database.
- Mod: Canada: Added Country setting. Mod: Disable T-Score entry for nine hole markers.
- Mod: Had a little cleanup in the GUI project.  Removed some forms that we don't use anymore, and fixed up the about dialog.
- Mod: Properly restart DIY terminal if the Restart button is clicked.
- Fix: Paraparaumu matchplay stroke ratings on their card. These needed to be changed.
- Removed a reference not seen as needed.
- Final commit for v1.0146.
- Fix: DIY tee booking - the second swipe of a card containing the number 5 fails to read.
- Mod: added WingDings 2 and 3 fonts to installer packages.
- Mod: Disallow multiple instances of the DIY terminal.  This is done through AppStarter, so you can still start multiple instances by running the EXE straight. Mod: Changed form title to "DotGolf DIY Terminal".
- Fix: Index out of range exception thrown when opening Card Print settings and there are no printers installed on the local PC.  Eg. exception 29143411.
- Fix: If an update fails to apply on a host and the update tries to reapply, the system crashes and never proceeds to apply the update.
- Final commit for v1.0145.
- Fix: greenfee and category check for DIY terminal wasn't passing the time component into the database, so FPM categories at Auckland and the Grange wouldn't work because they start at eg 7am instead of midnight.
- Mod: Default "Public Holidays" to checked on the greenfee setup form.
- Mod: Handicap report with course handicaps: Abbreviate "North Shore-Red" to "NS-Red".
- Fix: Adding secondary members to the home club was broken due to an invalid call to HomeMembers.IsExistingMember.  Added new method to only check members of the home club.
- Fix: Allow magstripe cards with a percentage in them (%) to scan properly in the DIY terminal.
- Fix: North Shore: start tee was appearing as 2 when you play off course 2, and 3 when you play from course 3.  Can't believe they haven't noticed this earlier.
- Fix: Added new swipecard format for Formosa (%081581012?;081581012?)
- Fix: Typo on User Accounts screen.
- Final commit for v1.0144.
- Fix: Blank standard cards which had no play date were showing min date, fixed to show nothing.
- Fix: Leaderboard no longer shows Eclectic and Other competitions (only competitions with CompetitionType.DisplayResults=1).  Unfortunately this change is written in a way that a competition with any visible competitiontype associated with it will still be shown - so the leaderboard will show an Other results page on a Gross competition, if this is set up that way.
- Fix: Card Printing Admin will now correctly default the greenfee if the DIY terminal has already selected an appropriate greenfee for the scorecard.
- Fix: DIY terminal: if two players printed their cards in the same session and only one player is a greenfee player, the other player's card would be marked as a greenfee card as well, even if it is a home member.
- Fix: Changed Paraparaumu Beach match play strokes
- Fix: Searching for member by name was broken in the score entry tab due to the int HomeClubId mod.  Also removed stupid astrix.jpg resource dependency.
- Final commit for v1.0143.
- Fix: DIY terminal: if a player is out of division, don't allow them to enter the comp. Fix: DIY terminal: allow player to enter multi round competition if they haven't played round 1.
- Fix: DIY terminal: don't rewrite the concession cards setting if the checkbox is disabled.
- Fix: Categories set to always charge a greenfee will force the terminal to show the out of category greenfee.  This is a bit of a hack, but better than not charging a greenfee at all.
- Fix: The Rounds.Count was being used to get the total round count which when used here could be a problem as there may have been 2 round 1's for example, so changed to use MaxRoundNo property of Competition class.
- Fix: Got a Multi round multi player report going, previously the multi round single player report was being run which was not sufficient. Aesthetic: Multiround best of report now shows B1, B2.. instead of R1, R2. Also if the competition is not finished results for all rounds played will be shown even if players have played less rounds than others.
- David said delete the DownloadServicevd.cs file as it's a duplicate of DownloadService.cs.
- Fix: Scorecard reports integrated with the start tee set from teebooking was not complete.
- Fix: DIY terminal no longer sets greenfee paid = false when the competition fee is nonzero.
- Aesthetic: Change date format from 08 to 2008
- Final commit for v1.0142.
- Fix: Date formats for Date and Start Time fields on standard reports. They were not formatting correctly when date was above 12 days in NZ format.
- Feature: Hidden Holes (Stbl) new competition type
- Final commit for v1.0141.
- Final commit for v1.0140.
- Fix: build error with Competition.GetPlayersEntered method signature change.
- Mod: Get competition players now takes parameters competition ID and round No instead of just round ID.
- Dud final commit; build did not succeed.
- Feature: (Committed for Doug) New updates system which saves update binaries into the database rather than into the folders.  This also includes a mod to the webservice which prohibits older version update engines from getting new update files.
- Fix: Draw threw error when generating draw with empty slots at end of draw, it was doing something for preview when it shouldn't have been.
- Fix: DIY Terminal now works with the Show Marker Select option in the Card Print Settings area, and also honours the Hide Marker Selection bit in the course defaults.
- Fix: Show all competitions in calendar for Competition Players and Fee reports
- Removed comment of method being obsolete because its not
- Mod: Get competition players now takes parameters competition ID and round No instead of just round ID. Mod: Twos comp type is allowed for stableford comps for gender ALL with the extra calculation.
- Mod: Added pointer and shade to start tee Mod: Show start time when flagged to.
- Aesthetic: Changed header back colour from purple to white.
- Fix: check for memberid is null in IsValidInput in if statement for unsynced scores. Bug was preventing new members being created.
- Fix: SET DATEFIRST 1 in dg_GetCompetitionsForPlayer to avoid the off by one when having multiple recurrences for course defaults.
- Fix: FrmUserLogin.cs - if multi club the login form will default the club dropdown to the last home club loaded. Fix: UserLoginController.cs - moved were the applicationController.HomeClub was being set to straight after the login so it will be set correctly when the controls (i.e. scorecardentrytab) are loaded. Fix: when the homeclub is changed it is now refreshed in FrmScoreEntryTab.cs
- Fix: when user logs out the admin website is now navigated away from to ensure the next user logging in will force a fresh login to the admin site
- Fix: bug in sync start - it was not setting lockedby by clubID, all sync records were being set.
- Fix: Green fee count showing for received data in sync
- Fix: Stops scores entered by adjusted gross for scorecards in competitions
- Fix: DIY Terminal crashbug when from/to tee booking limits cannot be determined. Fix: Return to home works properly in tee booking area now.  Efficiency improved wrt database calls. Mod: Exception catching improved if exe startup fails.
- Fix: Don't try to access the database for the internet connectivity check before the initial sync is done.
- Feature: added gender, affiliation and nine hole filters to the Course Utilisation by date report
- Feature: Pin positions (missing SQL script)
- Feature: Print the pin position of the day on the scorecard by tag replacement in the Message of the Day and Advertising Message fields.  See http://admin.golf.co.nz/wiki/Search.aspx?Query=pin%20position&FullText=1&Categories=DotGolf%20Enterprise,DotGolf%20Express, for documentation on how this can be enabled.
- Fix: Front nine twos competitions caused exception as the check for twos iterated through 18 holes. Fixed to only check 9 if only 9 holes in hole array.
- Fix: When a static day overrides course defaults in a recurrance, don't duplicate competitions on the DIY terminal.
- Feature: Course Handicap is now an optional column for leaderboard
- Fix: ALL being selected for computer was causing error, the grid was returning null, set grid to return string.Empty when null. Fix: Returns all menu items now, it was using method which only returned items for ALL and that PC.
- Mod: Script for GetCompetitionPlayers SP to use RoundNo and CompetitionID rather than RoundID
- Fix: Competition players report to print out who is in Round X only. Mod: Changed the calendar property from RoundID to RoundNo as it actually meant RoundNo not RoundID
- Fix: Bugs in 138 schema script fixed for Doug.
- Fix: Update to nine hole men pending
- Final commit for v1.0139.
- Fix: Disable Concessions tab if club doesn't have the CC (concession cards) club product. Fix: Settings class now produces the default setting if the machine and global settings don't exist. Removed the 139 schema script since it is empty.
- Final commit for v1.0138.
- Feature: ClubProduct for concession cards.  Cleanups to make a build.
- Fix: When closing the competition form with unsaved changes the dialog now gives the cancel option to not close
- Moved: script from 139 to 138 where it should be.
- Feature: added print and export function to the draw system
- Fix: populating nine hole checkbox on edit
- Fix: isdirty flag when fields changed
- Fix: added validation to the saving
- Fix: Prevents scores for competitions not valid for handicapping from syncing. Fix: Stops scores being entered for members who need changed details synced first, and stops members details being changed if the members has unsynced scores. Fix: Allow the users to enter scores by adjusted gross - this was a recently introduced bug
- Aesthetic: Saving shows label instead of dialog
- Fix: Disallow adding a home club member as a secondary member, previously just threw an error.
- MAJOR Mod: Changed HomeClub.HomeClubID to be an int, not a string.
- Much lashings to be had.  Removed ConcessionType table and friends from previous schema script.
- Fix: Best of rounds now only will show the best of rounds with the column headers being "B1" etc.
- Aesthetic: Saving shows label instead of prompt.
- Feature: Hack version of Concession Cards in DIY terminal.  This is deployable, but just don't enable the concessions feature from the settings dialog.  There is a lot of hardcoding in there right now which I'll fix in upcoming commits.
- Cleanup: removed obsolete concession files.
- Cleanup: Merged concessions code between me and Doug.
- Feature: ConcessionType added to green fee setup
- Fix: Best of competitions not printing correctly when only best 1 of X...
- Fixed 137 post-commit.  Oops...
- Final commit for v1.0137.
- Added missing Utilities resx for Doug.
- Added missing SavingLabel.* for Doug.
- Feature: Redemption of concession cards.  This feature can be turned on or off from the Settings area. Mod: Changed the way swipe and RFID cards are being recognised - some of the keypresses were being caught by other controls.  Hopefully this doesn't break any of the swipe cards out there.
- Feature: New DIY Terminal mod replacing old Card Printing and old DIY Menu
- Aesthetic: Changed ShowConfirmation and ShowInformation to use system messageboxes
- Fix: DIYMenuLimits was buggy, changed grid to use List as datasource and not the ultradatasource with events
- Aesthetic: changed to look more like terminal, black backgrounds etc
- Change: DIY Terminal - if self score entry is not found then an exception is now thrown.
- Added self score entry opening code to the button click - the form is kept in memory for use as well
- Don't release this revision!  Partial commit for concession cards.
- Fix: In draw wizard when selecting members the selected list now does not sort after adding each member so they stay at end of list. There is now a sort button which the user can click to sort the selected members.
- Final commit for v1.0136.
- Fix: DIY Terminal: Bug fixed around editing times not owned by a player.
- Fix: added result recalculation to FrmMain
- Fix: 10 more lashes for me. Junior age fix.
- Fix: 10 lashes for me for committing some code later after a release...
- Fix: Add the Update of all existing competitiontypes to have results = true
- Final commit for v1.0135.
- Fix : When the last competition showing does not show all its results (TopX < total results), it all gets confused. So clearing the result set if its to start the comps over seems to have done the trick.
- Add: RestartActivityTimer to the make a booking button
- Fix: DIY: Handle the UI case when the user hits Finish without making any booking changes.
- Added: For competition recalculations
- Add: Change the status informing the person making the booking from update to Updated.
- Fix: Showing deleted players in the booking line summary Fix: Updated the error handling in frmMain Fix: Book updates as well as inserts
- Feature: Competition types Eclectic and Other added Feature: DisplayResults flag added to competition type, used to suppress certain competition types from showing in the client results - where handled centrally. Feature: Extra calculations for course handicap now available for competitions. Results are recalculated when these extra calculations are affected by scorecards being added or removed from competitions, or when adding/deleting or editing scores. Fix: BulkCardAdmin/FrmBulkCardAdmin.cs now restricts deleting of cards to only those not yet returned. Fix: CompetitionCalendarControl: when to many items are on a day in month view and the icon appears to indicate so, now when the icon is clicked it will switch to day view so all items can be seen.
- App.config fix
- FIX: Add the DOB into the overnight file builder for juniors...
- RC1 - DIY Terminal Tee Booking
- Mod: Insert DIY Menu Limits for club database if they don't exist already.
- Fix: Added missing mods to greenfee procedures.  Fixes exception 29127794 and friends.
- Final commit for v1.0134.
- Feature: DIY terminal adaptive monitor power control. Feature: Allow bypassing internet connectivity checking.
- Mod: Added the cool icons to the DotGolf Enterprise and Express installers. Added some missing images.
- DAVID SAID IT WAS OK TO DO THIS :-)
- Fix: Changed resizing logic in Card Print Settings to size to 176x82 rather than 176x176.  Works better for the new DIY terminal layout. Periodic commit for DIY tee booking. Feature: Added DIY terminal option to configuration dialog.
- DIY terminal commit - tee booking iteration.
- Fix: To prevent double digit scores being entered into the last hole... Enable the btnAddScore and allow the focus to move off the last hole if hole by hole scores are incomplete. Fix: Add informative error message to the user on "Add Score" button.
- Unbroke the build
- Fix: Hide marker selection works properly in DIY terminal. Periodic commit for My Bookings screen on terminal.
- Feature: Draw system preview is a true preview of the data now, the static images are removed from the resources (exe downsized 1 MB). Also the draw can be grouped by either start time or start tee.
- Grid Header Checkbox filter - added property to set if disabled items should be checked when header checkbox is checked, defaults to false
- Final commit for v1.0133.
- DIY Terminal Teebooking iteration in preparation for v1.0133.
- Mod: Added RequireVerification flag onto GreenfeeType so that we can exclude greenfees like Golf Guide from being allocated on the DIY terminal.
- Final commit for v1.0132.
- Added reverse course support to the DIY terminal.  Periodic commit for tee booking stuff.
- Fix: BulkCardAdmin now checks if player was already entered into round (if 2 round 1's were on different days), stops same player being entered into the same round (but on different days) twice.
- Fix: dg_GetGreenFeesCurrentForClubForDate needed junior fields in select
- Feature: Reports now can have a start tee for the scorecard passed and an arrow will be displayed to that tee (for scorecards with bookingIDs only), reverse flag for the scorecard implemented - when set to true sets the start tee to tee 10 otherwise 1.
- Mod: Removed Preview property from frmCompetitionOptions.
- DIY Terminal Teebooking iteration: * Date headings at top of screen work now. * Only show relevant dates in the calendar. * Sort friends by name regardless of booking eligibility. * Finish screen logs out in 5s. * Back takes you to My Bookings. * Don't allow bookings on the day for now. * Handle crashbug when someone beats you to a slot. * Privacy mode - can't book friends with this enabled. * Remove a.m. and p.m., turn to 24hr clock. * Implement Remove button.
- Fix: Inverted parameters in BLL/Members.cs had aftershocks.
- Fix: Line 218 of BLL/Members.cs two parameters were inverted... DIY Terminal Teebooking iteration.
- Fix: SQL script for new Junior fields Editing green fee details was not looking at the new junior green fees
- Fix: Made the Green Fee ID column hidden on the grid
- Final commit for v1.0131.
- Fix: DIY Terminal exception 29124098 when Combined is enabled on Pauanui Pines and they click 9 hole.  (Combined doesn't have 9 hole markers).
- Change: Just extended the length of the course allocations box so it was easy to see - R (indicating reverse)
- Added missing files.
- Fix: Reversed the order of DIY terminal greenfee calculation so that players are always charged the cheapest rate - this is for reciprocal vs members guests for Morrinsville.
- Final commit for v1.0130.
- Fix: Dropped indexes from initial database and included index drop script in schema updates. DIY Terminal: Another teebooking iteration.  Teebooking currently disabled for release version.
- Fixed typo in the schema script.
- Fix: If no course defaults are setup for a multiple course club, and the club is switching courses when entering scores - a score could be entered against an marker which does not exist at this course.
- Mod: Change the scorecard headings and the PUTTS to the card for Maungakiekie.
- Feature: Course allocation reverse
- Feature: Course allocations reverse option in settings, plus a reverse property added to scorecard.
- Fix: Competition reports were not allowing competition names to grow, now they can grow and wrap to multiple lines.
- Added missing image.
- Added missing image.
- Fix: added timer to check if current date changes from the max date on the play date control, and changes the max date if it is different
- Fix: Now Shows total of blank scorecards printed on the green fee summary report
- Fix: When 9 hole memberID entered while 18 hole course with no 9 hole markers now warns user and asks if they want to change the course and if so sets the focus to the course combo.
- Fix: Course handicap is now showing "+" for plus handicappers
- Added script for SP dg_GetClubsGreenFeeTypes, with IsJunior added to select
- Fix: Left out comment from last commit - for fix to show Course column in BulkCardAdmin for multi course clubs
- Fix: BulkCardAdmin to show same round on different days. Fix: BulkCardAdmin report now prints with same order as on screen.
- New SPs for bulk card admin fix for same round different day
- Fix: The check for if the greenfeetype was for juniors was only iterating through non allocated types, so for edits the junior section was always disabled. The iteration has been changed to loop through all the clubs types to find if the greenfeetype is a junior.
- Final commit for v1.0129.
- Mod: Added option to remove the Add Player button (max players per session) Mod: Optional require booking to play. Other fixes for North Shore.
- Final commit for v1.0128.
- Mod: Allow multiple preset courses per terminal. Fix: Fixed formatting which caused tee time to be displayed incorrectly on the DIY screen. Feature: Half baked enabled/disabled buttons on tee booking (DIY). Some work done on tee booking/disabled member slots.
- Final commit for v1.0127.
- Fix: DIY Terminal: Better threading on syncing the tee booking info. Improved messages regarding tee times.  Show tee off time after membership number entry. Feature: Junior greenfee types.  Help link on the greenfee setup dialog. Fix: Fixed standard scorecard so that hole 16B doesn't get word wrapped (Whangaparaoa).
- 
- Feature (committed for Doug by David): Junior age field on club greenfees.
- Updated PollScorecards to include a check for rollover date and if changed the calls CheckRolloverDate.
- Fix: Opposite gender stroke now has correct heading on score card when printing from DIY terminal. DIY Terminal: work on back/next buttons for tee booking.
- Fixed bug in PrizeList property when there are no prizes, was returning null - now returns empty collection.
- Fix: Removed the pesky astrix.jpg error.
- Final commit for v1.0126.
- PART 1 of DIY Terminal teebooking function - half baked right now. Added server webservice support for downloading start sheet and booking information. Fix: DALScorecard crash when loading a null timeslotid.
- Fix: Another mod to the script with the TimeSlotEntryID in the scorecard table.
- Fix: Changed a field name from BookingID to TimeSlotEntryID
- Fix: Switched an alter table and alter SP around for the BookingID column in the scorecard table.
- Feature: Added GetTimeSlotsForDayAndMemberEligibility method to tee booking webservice (for the DIY terminal tee booking)
- Mod: ShadowSkinnedUltraButton has more control over the font now. Added scrollbarless Panel control.
- Feature: Added "Entered Order" sort order to the pre-print wizard.
- Final commit for v1.0125.
- Fix: DIY Terminal: Properly display the marker colour and text. Feature: DIY Terminal: Allow multiple wizard modes (card printing, tee booking, score entry).  This works off DIY menu limits currently, but this fact may change.
- Reverted Doug's schema changes temporarily for 126.
- Mod: DIY Card Printing - Change prompts to "Press Men or Press Women" for Matamata.
- Updated syncProcessMember
- Added TempMember table and dg_UpdateMembersFromTemp
- Feature: Allow saving the player list as a CSV from within the pre-print wizard.
- Feature: Tee booking integration with the DIY terminal.  This includes syncing the booking information to the club from central, and adding a start time field to the scanning scorecard.
- Fix: DIY terminal and Card Printing DIY applications now both accept the Lakes Resort Pauanui card swipes properly  (%Z006400070215PM131P?;5580420?) where 5580420 is the computer number.
- Feature: Added monitor power control to utilities - will use this to schedule turning the DIY screen monitor on and off.
- Fix: New member issue fixed where it is popping up a new member screen. (Caused by LocalMembers at Pauanui)
- Bump: To get the utilities DLL out there again.
- Fix: Scores synching (again).  Stop Synch from operating if the local software version mismatches the database version. Mod: Server side sync: correctly reprocess files if a previous sync failed.
- Feature: North Shore Course Allocations dialog.
- Fix: Don't allow different division markers to be set in the competition setup if the division split is done by course handicap.
- Final commiFinal commit for v1.0124.
- Fix: Accumulative Twos now work properly and don't just return the last round. Fix: Leaderboard Twos are no longer distinct across rounds, so if you have a two in round 1 on the 17th, you can have a two in round 2 on the 17th and get two entries on the leaderboard showing.
- Final commit for v1.0123.
- Fix: Don't allow automatic entry into subsequent rounds to happen from Card Printing Admin if the entry time has passed for the subsequent round.
- Fix: Don't needlessly recalculate results on the competition setup screen if irrelevant options are changed.
- Fix: Leaderboard - resolved exception 29109433 and friends - one of the top 200 annoyances.  This is where the leaderboard would throw the "Index was outside the bounds of the array" exception every cycle.
- Fix: Moved card number on receipt area for Pauanui where they have a hole punched in the card.
- Mod: Display course name on card for Pauanui. Mod: DIY Terminal: Immediately respond to JRN,A from Cadmus terminal so that transaction is accepted.
- Final commit for v1.0122.
- Mod: Moved pesky astrix.jpg into the embedded resources rather than having it as a separate file.
- Added missing files.
- Mod: Added Help button to Basic Details settings of the Competition Setup screen.
- Fix: DIY Terminal: 18 hole marker selected properly if clicking 18H, then Next. Mod: DIY Terminal: Added debug setting. Fix: DIY Terminal: Fixed null reference exception when clicking Remove in some situations.
- Feature: Added another combination for pre printing cards - this time grouping by Home Club - which is good for when pre printing pennants cards.
- Fix: Prohibit DIY Terminal from using any Complimentary or Competition Day green fees. Fix: Removed cards display from front screen of DIY (oops in testing...)
- Final commit for v1.0121.
- Fix: DIY Terminal: Clear EFTPOS receipt data when a new transaction is started.
- Feature: DIY Terminal: Allow customising the cards available for payment on the payment screen. Fix: If EFTPOS serial port initialisation fails, show appropriate error without crashing.
- Mod: Updated solution file.
- Mod: Changed wording on scanning scorecard to "Mark THE score here"
- Fix: Show Deleted Competitions button now visible.
- Mod: Increased SQL update command timeout to 5 minutes.
- Fix: Allow multiple course clubs to set up the competition for ALL courses and then allow members to enter off any course.
- Mod: Resized the greenfee setup dialog to fix greenfee type names being cut off.
- Mod: Updated wiki link to point to the live wiki site.
- Fix: Endless loop on the score entry screen.
- Fix: Properly find competitions with a course change on the day in the DIY terminal.  Properly find competitions when the day is a public holiday.  Fixed EFTPOS exception when failing LRC.
- Final commit for v1.0120.
- Fix: Aesthetic fix to exception viewer solution list.
- Final commit for v1.0119.
- Feature: "Suggested Solutions" tab on the Exception Viewer window.  This integrates with the Exception Logger webservice and checks the database for solutions to the given error.
- Fix:  Spelling error on New Member wizard.
- Fix: Don't allow members to click Back while the scorecard is being printed.  This could be the bug behind the magical disappearing touchscreen problem!
- Feature: Replication of backups to local machines now controlled by a new setting on the Misc settings form.
- Final commit for v1.0118.
- Fix: Updates system fix to copy files if a move fails. Mod: Sync CMember insert now fails silently but still logs to central.
- Final commit for v1.0117.
- Feature: Reinstated "Show Deleted" button for full list in competitions.  Added per-machine default setting for remembering whether the deleted competitions are shown or not.
- Fix: Don't recalculate competition results for multiplayer competitions, because the result groups would be lost.  We need to find a permanent fix for this later on; see the score entry form and associated code for the correct way to resave results.
- Feature: New score card with receipt for docuprint and pagepro printers (Pauanui).
- Fix: Sync: Don't crash sync if the software update fails for any reason.  Just log silent exception and continue.
- Fix: DIY Terminal: Handle DECLINED transactions properly.
- Fix: Setting class stores data type correctly in the [Setting] table.
- Fix: 4BBB Nett now doesn't DNF the team when one of the players have a pickup on a hole.
- Fix: 9 hole competitions now calculate combined stableford results without crashing.  This is a temporary fix for Sherwood Park.
- Final commit for v1.0116.
- Feature: New competition type: 4BBB Nett.
- Fix: Silent exceptions.
- Feature: Silent Exceptions.  The backup system will no longer throw an exception in the user's face when the automated backup fails; but rather log it to central and continue as if nothing happened.
- Feature: Screenscraping support for the PagePro printer in the DIY terminal.
- DIY Terminal: Adjustments for local members. Reduced EXE size by fixing up duplicated resources.
- Scanning: Slight card data calibration adjustment.
- Fix: Sizing on some forms in DotGolf. DIY Terminal: Fixed some 9 hole issues.
- DIY Terminal: Swipecards work now, even from the main screen with no affiliation preselected.
- Mod: Competition reports now have the day name as part of the date, eg "Sat 12/04/2008" DIY Terminal refresh.
- DIY Terminal: added proper tax invoice to scorecard.  Only print invoice on first card.
- Reversed oops.
- DIY Terminal: Automatic restart on exception.  Also cleaned up some junk code.
- Fix: Competition crashes with null casting problem when you print Best Of multiround results and a member has entered some rounds on one computer no and other rounds on another number, causing NULLs to appear in R1 but not in R2.
- Final commit for v1.0115.
- Fix: Stretched round score columns on multiround results reports so that 100+ scores don't wrap to the next line.
- Fix: Don't produce results for scores entered by adjusted gross.
- DIY Terminal commit.
- Just updating the example config file to the latest.
- Feature: Local Members Fix: EFTPOS transaction timeout now a setting. DIY Terminal: Fixed eftpos timeouts and retries. Added other player ticks to competition select lines.
- DIY Terminal
- Added sound.
- DIY Terminal refresh: EFTPOS mods, player selection mods, implemented most of the competition select screen
- Feature: Added Settings class for ApplicationSettings per-machine.  Some sql scripts from greenfee mod.
- Fix: Home club courses now appear correctly when there is a course change today.  (Symptom: Can't see courses when printing handicap reports and checking the Include Course Handicap checkbox).
- Feature: Include the date in the header for the competition report for prizes
- DIY Terminal: Removed comments.
- DIY Terminal: Further work on EFTPOS integration.  Added receipt perforated score card report and code to print the EFTPOS receipt on the scorecard.  This includes a small fix to the method calls from within CPAdmin (method signature change in ScoreCards.cs)
- Fix: Changed username combo to a read only dropdownlist (and ditto for Report Type on Reports tab) to prevent null reference errors when people try to create users incorrectly.
- Fix: Invalid Operation exception when closing preprinting wizard before member list has completed loading.  Example exception #29087005.
- Feature: Added the date and cardno to the Green Fee report - as requested by Paraparaumu Beach.
- Aesthetic fixes to About form.  Added local and DB versions.
- Added missing icon files.
- Added missing files for Green Fee Audit Report.
- Feature: Green Fee Audit Report and associated card print logic for maintaining the audit log in the database.
- Aesthetic: Added new icons.
- Added missing build files.
- Added missing build files.
- Fix: Instalment 4 of: Scores not being synched if a sync process crashes and scores are entered between the crash and a new sync started later on.
- Fix: Instalment 3 of: Scores not being synched if a sync process crashes and scores are entered between the crash and a new sync started later on.
- Fix: Instalment 2 of: Scores not being synched if a sync process crashes and scores are entered between the crash and a new sync started later on.
- Fix: Scores not being synched if a sync process crashes and scores are entered between the crash and a new sync started later on.
- Fix: Bulk card admin: When deleting (or adding/removing from competitions) cards from the grid, sometimes the first row gets left behind.
- Fix: Pre-print wizard bug - won't allow home members to go into a home-member-only competition under certain circumstances.
- Final commit for v1.0114.
- DIY Terminal: Added EFTPOS payment functionality supporting the Cadmus AC8000K terminal in keylink kiosk mode.
- Fix: Allowing the reprint of a card if it has been deleted from the Admin Card Print
- Added ShadowSkinnedUltraButton.
- DIY Terminal - finished multiplayer; added greenfee calculation and totalling.
- DIY Terminal: Added multiplayer selections and summary screen (before Pay Now).
- Bug: Fix Taupo problem in Bulk Card Admin when trying to add to a round which is not today (a couple of days ago). Bug: Fix Taupo problem with Multiple course when trying to add a competition to a round off a specific course.
- Fix: The swapping of hole by hole to adjusted gross when changing the date. Fix: The disappearing of the member details (and the course handicap remaining in view) when changing dates and not hitting <enter> off the memberID.
- DIYTerminal: Done up to marker selection.
- Feature: Help link for CSV format in Draw system.
- Initial commit for new DIYTerminal project.
- 
- Added DotGolf.DIYTerminal
- Fix: Show competition date in heading on Competition Fee report. Fix: Corrected spelling error on Reports form.
- Fix: Greenfee report now groups by Course/Greenfee Description so that different greenfees' (for different courses) Unit Costs are noted correctly.
- Fix: Card Printing: Multi course greenfees don't cause reprint card to crash.
- Fix: Added some missing files from the updater mods.
- Fix: Multi-course greenfee editing works properly now (harewood)
- Fix: Backup check timer adjusted to 6 minute initial interval.
- Feature: Backup system.  This is a fairly rudimentary one as far as UI is concerned; probably needs a bit more work.  However, it should fix the immediate problem of our servers in the field not having a reliable backup.  Backups are only triggered by DotGolf Enterprise right now, and checks are done every 4 hours.
- 
- Fix: Paraparaumu fix for column on card
- Final commit for v1.0113.
- Fix: Check USB disks for the SQLExpressFiles folder too.  Feature: Use initial database from install media if it exists there. Fix: Only download updates after the initial sync has completed.
- Feature: Added Paraparaumu Beach match play column to scorecard instead of the opposite genders stroke.
- Fix: Removed old web reference from DotGolfGUI.
- Fix/Feature: Updates system refresh.  This version will check for updates and force a download before syncing (modem users).  It also changes the temp folder usage and file copy/rename method used to put the files into the update tree so that people can't get broken half-updates or overwrite each others' updates with rogue files.  Eg. 2 people downloading updates at the same time should be absolutely fine now.  The timer still runs every hour (or depending on the config file setting) so that behaviour hasn't changed.  Only necessary files are now sent to clients, so we no longer have to clear out the updates tree on the server.  Framework laid down for sending down compressed files, but not complete yet.
- Feature: New Score Card Lookup report.  This one doesn't need to sync a Report row from central since the schema script deploys the new report row.
- Fix: Don't allow people to delete, restore and change the date on competitions when they should be using the Copy function instead.
- Final commit for v1.0112.
- Fix: Fixed bug for club with multiple printer and splitting machine name and printer name
- Final commit for v1.0111.
- Fix: Pre-print: Allow home/secondary members to go into non-visitor competitions. Mod: Auto focus the computer no box when you go to manual player selection screen. Also a bit of code commenting and cleanups.
- Final commit for v1.0110.
- Fix: Actually print when you have multiple printers selected...
- Final commit for v1.0109.
- Fix: Pre-print: Don't print call the cards as round 2 when printing multi round competition cards.
- Fix: Don't throw exception when printing a non-affiliate card from the touch screen.  Example #29072298.
- Fix: Mod insert greenfee proc to update changedate on obsolete greenfee row to get both the rows up to central.  Also update all historic greenfee changedates so they get synced up and fix central.
- Final commit for v1.0108.
- Fix: Fixed exception 29070772 for Titirangi (Preprint wizard - changing the queue causes an exception)
- Mod:  Auckland:  Allow machines to have separate printers by a tweak to the printer name setting.
- Final commit for v1.0107.
- Feature: Twos results report now shows the ComputerNo. Mod: Focus the Number of Results box on competition options when unchecking the All checkbox.
- Fix: Scanning: Correctly reload card when CRC fails and card number is edited by the user.
- Fix: Preprint wizard - allow CSV import to have single-field rows for affiliates (only computer no)
- Fix: Hide inactive courses on DIY, preprint and card printing admin. Fix: Pre-printing: Disable eager caching of member list.
- Feature: Selected x of y cards on bulk card admin screen.
- Fix: Mod to multi course green fees for editing green fees. Did not show course combo previously.
- Fix: Best 3/4 par scores property compared.
- FIx: Change to accomodate for multi course clubs and green fee assigning to different courses.
- Feature: New competition types - best 3 of 4 par and best 3 of 4 gross.
- Feature: New competition type - Combined Par.
- Fix: Prize draw for single round competition - was not working properly
- Final commit for v1.0106.
- Fix: competition setup dialog - only recalc results if we have to.
- Fix. Update the CSV file for Affiliates only needing ComputerNo
- Fix: Ignore automatic entry for pre-printing. Fix: Don't allow non-affiliates to be entered without a gender.
- Fix: Preprint - automatically pick the default markers for the selected course.
- FIx: Round number being assigned correct number, for scorecard on Pre Print
- Fix: Corrected title of Member Address List criteria form.
- Fix: Changed logic around whether players can enter competition rounds to look at RoundNo/CompetitionId instead of RoundId/DatePlayed, so that a round 1 happening on 2 different days is handled correctly.
- Fix: Null reference exception when printing a card which was pre-printed.  This is broken if you don't have default markers setup...
- Fix: Countback for Best Of competitions now work on the last best round.
- Fix: Leaderboard to show multiple rounds when best x of y is active.
- Fix: Prerelease bug fixes to pre-print wizard.
- [Preprint Wizard] Added some more missing files.
- [Preprint Wizard] Added some missing files.
- Feature:  Pre-Printing Wizard.  Also some bug fixes around passing non-affiliates through from tee booking and draws.
- Fix Bug: When printing report for missing cards - the date would include tomorrows date also, just a smalldatetime issue with milli seconds.
- Fix: only save the Date component of the play date when inputting scores.
- Fix: Scanning: Moved orange bars slightly to the left.
- Mod: Scanning: better recognition of card data blocks where the card has been rotated/skewed in the scanner.
- Feature: Bulk Card Admin now prints the grid using a proper report.
- Fix: Exception when cmember has an invalid category id and you edit the member from DotGolf (happened at Northland).  Eg. exception #29064682.
- Final commit for v1.0105.
- Fix: Correctly calculate stableford scores for 9 hole courses when recalc happens. Fix: Correctly show hole aliases on the Twos results when you recalc.  Recalc happens when you resave the results by a) saving the competition or b) using bulk card admin.
- Fix: No longer throw an exception when people set Best Of to 3, then delete 2 rounds, close and open the competition form.
- Mod: Revamped Competition Results criteria form to have: Individual rounds, Accumulative Rounds, Best Of rounds.
- Feature: Member Address List report.
- Final commit for v1.0104.
- Mod: Drop extraneous indexes on the Member/CMember tables.  Read: speed up sync.
- Removed temp BITS folder.
- Added new temporary BITS folder.
- Feature: Recalc competition results when you re-save any competition.
- Fix: Draw system to allow Unavailable timeslots to be selected when doing a draw.
- Feature: Draws: Allow people to import players from a CSV file.
- Fix: Invalid cast when adding more members to a draw with non affiliates in it. Fix: Draws for competitions with no divisions. Fix: Inverted array order for stableford competitions  (This is a hack for the presentation day) Fix: Properly control refresh button visibility in Draws.
- Final commit for v1.0103.
- Fix: Annoying bug where logon dialog wouldn't logon if you hit Enter.
- Feature/Fix: Card Printing Admin no longer throws an exception when the server times out when polling for scorecards.  However, this feature kills the grid when the connection is lost.  It's better than throwing an exception dialog, however...
- Fix: Null Gender causes exception when loading score card.
- Final commit for v1.0102.
- Feature: Hack: Allow reprinting cards from a card number range by holding Shift and clicking Reprint in CP Admin.
- Final commit for v1.0101.
- Fix: Draws: Initial grid sort order by Time/Tee. Fix: Draws: Time sort works properly now. Feature: Draws: Refresh button to refresh the grid.
- Fix: Change the adjustment for a 27 hole comp to go into the Competition Round table
- FIX - just changing drop and create
- Feature:  Added TotalScoreAdjustment column to competition.  This value, if set, is added to the total score for any single round competition.  This is to enable Wainui to run their strange tournament on 19 Jan.
- Fix: No longer throw an exception if you try to enter a blank gross score.  This fixes exception 266332 and friends.
- Fix: Nudged dotgolf logo up slightly on gui logon form.
- Mod: Changed DIY screen colours not to use the dark green when selecting competitions. Mod: Handle large card numbers correctly - don't throw an exception.
- Feature: Ability to allow printing off other clubs courses (if another course is added to the coursematrix table in the local database)
- Fix: >4 week old scanning cards - accept Pending handicaps now.
- Fix: Don't allow DIY to print cards for members who have negative MemberIds.  Members have to be synced with central before cards can be printed.
- Feature: Added ApplicationSetting to control the number of holes required to be entered before AutoComplete will function.  This affects both manual score card entry as well as score card scanning.  It is a hack for Wainuiomata so that they can run their strange tournament on the 19th of January.
- Fix: DIY now shows "Pending" if your handicap is pending, not 0.0.
- Fix: Preprint printing of the correct competition markerid.
- Final commit for v1.0100.
- Fix: ScoreCardId being cast to int16 crashed the Mount.
- Fix: Print scorecard off correct competition marker, if no divisions for comp and a marker set on the competition.
- Remove the Yes and No buttons from the Keypad screen
- Fix: Bug where card printing admin would crash if not started up properly and tries to refresh card lists. Fix: Problem where you don't hit enter after entering the member id in score entry, then click Add Score... boom!
- Fix: Authenticate user with ValidateUserSecurity SP rather than the old one.  This now allows matt/zx to work in preprint too. Fix: Aesthetic fixes to the report form. Fix: Draws module only available if club has card printing AND tee booking.
- Final commit for v1.0099. (Scratch the previous one)
- Mod: Refactored print preview -> Export feature.  Added ability to export the Course Utilisation by member/date reports.
- Final commit for v1.0099.
- Added Rounds Played By Member report and export to Excel function.
- Fix: Issue where searching by name in the card printing admin window would return a resigned computer no instead of the live one (Aviation)
- Kaiapoi - fix the keypad entry for "*" causing errors
- Fix: Draws: don't throw a null reference exception if the user doesn't have access to teebooking admin. Fix: Draws: default the teebooking service URL in case it isn't present on the club config file.
- Removed extraneous file.
- Final commit for v1.0098.
- Mod: throw a more useful error if a scorecard doesn't have a marker set (on entering the score)
- Feature: Allow user to enter the course handicap if a scanned card is too old.
- Feature: Rounds played by member report (huapai) first version.  This needs a line in the Report table - "Rounds Played by Member" for report type Course Utilisation.
- Fix: Aesthetic fixes to the images on the logon screen.
- Fix: On startup of GUI, don't muck with the window size.
- Final commit for v1.0097.
- Feature: Creating a file C:\DotGolf.AutoLogin.txt and putting your username and password in there (username on the first line, password on the second) will cause DotGolf to automatically logon without asking for your username and password.
- Fix: Competitions: default new competition date to the currently selected calendar date.
- Fix: When throwing the exception dialog, focus the OK button so that you can just hit Enter to close it.  (Useful for keypad DIY clubs which would otherwise have to grab the mouse to close it)
- Fix: No longer crash card printing DIY when entering non-numerics into the member id using a keypad.
- Scanning: Enabled Haar-like feature detection for cross marks.
- Final commit for v1.0095.
- Renamed sql script 96 back to 95 (going to do the full build as 95)
- Scanning: Added Haar-like feature recognition for cross marks - but the cross recognition is disabled for now; just needs to be turned on once tested.
- Hopefully - last change to prizes and Each and overall!!!
- Prize draw - change the setup for the Prize grid.
- Fix: DotGolf now loads card printing admin through AppStarter so we have a splash screen while it's loading up.
- Update for the Prize draw system for Judgeford.
- Changed division dropdown to allow Each and Overall prizes mixed
- 
- Making way for an artificial 95 as David says
- Added a Prize sp
- Change for the DIY Card print to prevent the back button closing the App.
- Scanning: Preview of unreadable card works properly now. Scanning: Remove multiple cards by selecting checkboxes on grid. Scanning: Strict checking of whether a card may be accepted or not - no longer accept it regardless if you hit Enter.  (Hack: If you hit Shift+Enter it still accepts it - this is in case of the rules not being quite there yet... I'm going to remove this in a few versions' time.) Scanning: Better handling of card numbers manually changed by the user.
- New Prize changes - no priority grouping on division or round
- New CompetitionType Net Eagle
- Merged Doug's schema for draw system.
- TeeBookingWebService reference
- Draw DTOs
- Draw system
- Feature: Added Antique leaderboard colour scheme (courtesy of the Mount)
- Feature: Leaderboard settings dialog now shows a preview of the leaderboard in both local and remote control mode.
- Feature: Auto Complete for card scanning.
- Fix: Preprinting cards now works for multiple genders at the same time (course defaults bug)
- Feature: Added custom fields to electronic scorecard.  This will make the ESC heading come back for Huapai.
- Nothing.
- Feature: Automatic recompression and deleting of old scanned images.  Defaults are OFF so it shouldn't nuke any existing customers.  This change is BREAKING, so if you deploy it be sure to restart systems on other machines (ApplicationSettings table changed).
- Fix: Member UNF and DEC categories now visible immediately when resigned is ticked.
- Final commit for v1.0094.
- Fix: Don't allow someone to enter a competition if they are playing off another course and the competition round is forcing a course.  Read: Danger, danger!
- Fix: When entering and withdrawing from a competition that forces a division marker, no longer override the user marker selected on the second screen. (Sherwood)
- Scanning: Inverted cards now handled correctly.  Kung Fu getting strong.
- Feature: rptScoreCardStandard clubs may now print up to 2 markers on a blank card.
- Feature: Added gender filter to competition result and prizes reports. Scanning: Originally scanned scores now saved in the XML as well for reporting and statistical purposes.
- Final commit for v1.0093.
- Greenfee report: honour "Show Deleted Cards" setting for group bookings also. Preprinting cards: Allow preprinting competition cards the morning before the competition (i.e. same day)
- Fix: Course information calendar entries now stay visible after clicking and closing the form. Fix: No longer allow creating static days with no markers. Fix: If competitions have no default markers, and there is no default markers for the day in the course information, no longer overwrite the selected marker on the scorecard with zero.
- Fix: Leaderboard shows top X of the second to last competition correctly if the last competition is set to show All.  Another symptom of this bug is that if the second to last competition has >X players, the last competition will never be shown. Fix: No more null reference exception when right-dragging a row off the card printing admin window.
- Renamed 92 to 93.
- Fix: Cards on Course and Missing Cards reports now include non affiliate cards. Fix: Cards on Course and Missing Cards reports now ordered by last name.
- Feature: DIY Card Print: Show marker colour. Mod: Better colour scheme for selected courses and markers. Feature: Show player handicap on marker select screen.
- Bug fix: Change to the division so that they print off the correct markers when the competition forces handicap ranges off specific marker.
- Final commit for v1.0092.
- Fixed crashbug when editing a score - caused by the new View Scan button.
- Handicap Report: Fixed multi course bug where course handicap for incorrect marker is shown.  Some formatting fixes to make Taupo's report look better with the long marker names. Scanning: Improved scorecard - added example correction and resized hole labels for Huapai's hole 1A to show correctly.
- Card print settings: No longer allow users to change the printer if there are multiple printers specified (using |).
- [Handicap reports aesthetic fixes] Fixed font size bug (entering a non-integer throws an exception). Decreased margins to fit more on a page. Fixed label sizes so larger font sizes don't look too bad. Tweaked word wrapping so names don't get cut off.
- Fix: Removed the time aspect of the date bug for saving Group Green Fees putting the time into the database because of the date time picker control inserting the time.
- Fix for Green Fee receipt to show the message for Non Affiliates.
- Final commit for v1.0091.
- Scanning: UI threading to make it appear more responsive. Scanning: Can now view the scanned image from the score entry screen after clicking on the card in Verify Scores. Scanning: Changing the card number of a misread card no longer puts the changed row at the bottom of the grid. Scanning: View Card form now allows printing the card, and displays it landscaped. Scanning: Score Entry control focuses first invalid hole correctly.
- Allowed Muriwai to print 2 x receipts from their receipt printer.
- Kaiapoi: Add in the fact that they are a Green Fee keypad club, so added 206 to the "if statements" Kaiapoi: Fixed the public holiday problem with the Green Fees automatically choosing Kaiapoi: Added a "Delete" on the keypad for them to click the decimal to delete on the keypad
- Annoyance: Removed prompt when exiting DotGolf. Scanning: Added warnings when you click Select Source or [V] until I can build a scanner settings form. Scanning: Lazy load bitmaps rather than keeping 200M worth of data in memory, maxing out John Crow's swap file. Scanning: Changing a card number now puts the row in the right place in the grid rather than on the end (largely untested though - don't have a scanner in the office yet) Fix: Cards on course report no longer cares about deleted cards.
- Card scanning: Card entry control now jumps straight to error holes, and also manages cursor movement better (no tabbing!)
- Added comment to scanning.
- Fix: Fixed the forcing off markers from within the card print admin screen.
- Final commit for v1.0090.
- Hack: Allow printer names like PrinterOne|PrinterTwo which will cause the score card printing code to find the first printer which exists on the box, and print to that.  This is so that we can accommodate USB printers such as at Wainuiomata.
- New methods for Draw to access tee booking time slots
- This fixes the competition select problem with multiple rounds and selecting the correct competition rounds
- Final commit for v1.0089
- Fix: DIY no longer crashes when misreading swipecards. Scanning: Tweaked algorithm for Huapai
- Scanning: Lots of scanning tweaks for Huapai.
- Fix: Added prompt to restart running leaderboard if it is already running.  This is to avoid exception #253060.
- Mod: Added better error message for when a swipe card crashes the DIY card printing screen.
- Fix: Score card reader correctly reads the card number for >255 cards. Fix: Score card reader instantiates ScoreCard by CardNo now, rather than Id.
- Bulk Card Admin: Added bulk card admin SP for doug.
- Scanning: Added example cross to the printed card. Fixed the fix to the fix to the fix for copy competition.
- Final commit for v1.0087.
- Score card scanning:  Added functionality to change card number once scanned. Fix: Crashbug when viewing reports on non-card printing Express clubs. Score card scanning:  Fixes to add/remove buttons enable/disable.
- Feature: Leaderboard colour scheme dropdownlist.  Can now pick from 2 colour schemes.
- Final commit for v1.0086.
- Fix: SoftwareVersion class now reads version.xml in the right place.
- Fix: Leaderboard no longer corrupts LeaderboardSettings.xml.
- Fix: Stop leaderboard from wrapping the competition name if it is too long.
- Fix: Entering a large number into the card number on the score entry screen no longer crashes the app.
- Final commit for v1.0085.
- Fix: Correctly calculate prizes for competitions where there are no divisions setup.
- Feature: Added "DIY screen - Show Select All for competitions" setting. Fix: Updated help text on the score card printer host setting.
- Fix: Added standard exception handling and logging to leaderboard, card printing admin and card printing DIY.  Moved the exception viewer into the Utilities class.
- Final commit for v1.0084.  This is also an Express build - v1.0084.
- Fix: Correctly apply permissions to Program Files folder on Vista. Fix: Don't show card print related reports to Express clubs.
- Fix in BulkCardAdmin for removing multiple cards from competition and deleting multiple cards
- Feature: Added status display to Card Print DIY for DocuPrint printers.
- Cleaned up obsolete code.
- Score card scanning update: Turned off DeltaY correction because it's buggy.  Adjusted tick grid to compensate.  Improved histogram white detection (now has a threshold for white peaking).  Increased black mark detection luminance threshold because DocuPrint doesn't print as dark as the Lexmark.  Turned off diag log output on the diagnose function in TestScoreCardReading because it obscures the bottom middle marker blob.
- Fix: don't crash card printing admin if you enter an incorrect username/password for Load From Teebooking (in pre-print).
- Feature: Electronic scorecard printing on DocuPrint printers. Mod: Improved scanning algorithm - tick box optimisation tries to keep to square boxes now.
- Mod:  Improved error message when you forget to pick the twos holes in competition setup.
- Fix: Don't keep adding competition fee on to the total if user goes Back, Next, Back, Next on card print DIY.
- Fix: Score card scanning grid no longer crashes DGE when you remove rows, and scan more cards. Mod: Score card scanning: Added mean luminance filtering; no longer pick arbitrary cutoffs if the card is slightly shaded to one side. Mod: Score card scanning: Improved recognition accuracy of +10 combined with other numbers.
- Fix: Force data types in ExceptionLogger so that Sql2000 doesn't moan about them. Fix: DotSync BITS job priorities now set to Foreground rather than High. That ought to do it for modem users.
- Fix: Corrected Teebooking and ExceptionLogger webservice URLs to point to central. Fix: Fixed crashbug when reinstating a lapsed member and searching by computer no.
- Fix: Always load HomeClub.xml from the application startup directory. Fix: Remove score cards from competitions before deleting.
- Fix: Don't submit errors if we're offline.
- Added comment to DALApplication.cs. Added exception logging to webservice for everything using FrmExceptionViewer. Added ExceptionLogger webservice.
- Fix for the tax number problem when printing on the green fee receipt.
- Final commit for v1.0082.
- Fix: Fix: No longer allow users to reinstate additional cmembers where the memberid is already live under a different computer no.
- Fix: No longer allow users to reinstate additional cmembers where the memberid is already live under a different computer no. Mod: Changed score card 2nd column from Partner to Marker.
- Final commit for v1.0081.
- Fix: AppStarter now correctly sets up folder permissions under Vista.
- Feature: Best 3 or 4 net and stableford competitions.
- Fixed duplicate CMember non-resigned bug when saving member details in DGE for members with 2 or more CMember records (live or not). Removed some old dge_ procedure wrapper classes. Added computerno to most of the update procedures to eliminate the duplicates. Fixed leaderboard to show rounds for competitions with rounds on days other than the competition base date.  (only if Today is ticked) Fixed crashbug when you search for a member by name, then hit enter when there are no results in the grid.
- Feature: Load pre-print member selection from start sheet at central (tee booking). Removed MemberDTO and its dependencies from DotGolf.Utilities. Added webservice (to be installed at central).
- Updated prize setup so only All divisions OR specific divisions can be set for prizes. Plus prize report now handles prizes for ALL divisions in a way where a prize is allocated to each division now.
- Fix: Leaderboard crashes when displaying Twos.
- Fixed bug for when multiple competition rounds are on the same day, plus switching between competition and date filters.
- Final commit for v 1.0079.
- Fix: Bug when printing non affiliate cards (broke when introduced the 9 hole handicap printed on the card for an 18 hole member)
- Changes for printing non affiliate cards for multi courses of different courses.
- Added missing report SP.
- Card Scanning: Partial fix for upside down cards - but doesn't display correctly yet.
- Final commit for v1.0078 (same as v1.0077).
- Final commit for v1.0077.
- Added total row to Rounds Played by Date report.
- Feature: Rounds Played by Date report.
- Taupo: Fixed multi round 'All' selection Taupo: Fixed multi division select. Taupo: Fixed Twos for non-affiliates. Taupo: Fixed non-affiliates on Competition Fees report.
- Added proper SQL exception handling in DALBase. Scan cards:  Fixed the annoying exception we got when demoing the thing to Wayne Hart. Scan cards:  Added capability of reading 9 hole cards. Fixed issue where missing cards are missing off the missing cards report.
- Final commit for v1.0076.
- Comment added - TODO
- Fix for multi course name bug
- Features: Missing Cards Report, Cards On Course Report. (For central the new report type, Score Cards, is 5; the new names are "Missing Cards" and "Cards On Course").
- Added missing score card reading files.
- 
- Added missing FrmViewImage.
- Added missing ScoreCardScanning.cs.
- Added missing DALScoreCardScan.cs.
- Fix for Taupo - changing course without the green fee system
- Fix for Taupo - changing course without the green fee system
- Removed Close button from BulkCardAdmin/FrmBulkCardAdmin.Designer.cs
- Calculated the correct 9 hole handicap for an 18 hole handicap member on a 9 hole card - both course handicap and the little numbers on the card - but the handicap index stays the same
- Score card scanning update - now works with Infragistics grid, and saves scanned cards to the database (images go in a local folder according to the new ScannedCardsFolder setting) Added some schema scripts from Doug for Bulk Card Admin and others.
- Competition Prize report can now be filtered on division selected
- Only Name is now shown for recurring, and only Date field shown for static
- Adjusted the competition prize width on the report.
- Updated the methods for printing scorecards in DIY for a) checking if a scorecard has been printed (created) in the last hour b) getting the first card for the member for the day which is not yet printed - if one exists (preprinted card)
- Shows round no in competition list for the card, when the competition is multi round
- new images for bulkcardadmin
- 
- New BulkCardAdmin classes
- Added missing CardPrintingDIYException.cs.
- Added missing ScoreCardScanDTO class.
- Prize results report fix for position No reseting for divisions. Enterprise Review modify bulk cards added.
- Cleanup: Removed unnecessary ScoreInputController from project. Fix: Course Info form now shows all courses and markers, past and future.  This means people can now check on new markers starting in the near future.
- Final commit for v1.0075
- Improved exception logging in CardPrintingDIY - now logs the member id and state in the UnhandledEx.log file. Added /restartonexception command line parameter to CardPrintingDIY - restarts app on crash. CardPrintingDIY - entering 99123499 and clicking Enter launches LogMeIn Rescue Calling Card if it is installed. Card scanning - Cards with unrecognised card numbers don't crash the system anymore. Card scanning - OptimiseTickBoxes - improved tick detection algorithm.
- Fix: Exception where there is no data to show on the report. Feature: Added course name to handicap reports for clubs with multiple courses.
- Fix: Multi-course multi-round pre-printed cards now have the correct courses and markers on them (Taupo). Feature: Select members by member id on pre-printing cards. Fix: Course name absent from Taupo and Harewood's cards. Fix: Formatting fix for scorecard and long course names; no longer wraps around.
- decreased the margin for the green fee report so it does not print on 2 pages.
- Added competition date fix for 75 upgrade.
- Fix: Golf Club -> Country Club on handicap reports for Pakuranga. Fix: Leaderboard: turned remote errors on in config file; added Ping to keepalive GC. Fix: Corrected icon on InputBox form.
- Just put some comments into the code.
- Fix for copy competition - remove the time component from the date from the form. Fix for pre printing card - that are for competitions with divisions - it should not check handicaps for many selected members in the pre print.
- Fix: Remote control class being garbage collected. Partial feature: Splash when no competitions are running (disabled until i'm sure it's stable)
- Append the .Date to the competition dates to ensure no times are inserted into the database Fixed the 9/18 hole receipt problem for Non Affiliates.
- Feature: remote control the leaderboard.  Run leaderboard with /remote <host> or just /remote (prompts you for the hostname). Feature: settings now save properly in LeaderboardSettings.xml. Fix: background image and transparency works correctly and even saves to xml. Known issue: some of the settings like the caption colours don't work yet. Also cleaned up a lot of crappy code. Fix: inputbox now focuses on the text box when shown.
- Added course name to standard score card.
- Added isnull check for homemembers.
- Final Commit for 1.0074
- Fixed bug where HomeMembers.ToCMemberCollection would break if any of the dates are set to null. Fixed bug where a new member would incorrectly be assigned a MembershipID of -1 (note this isn't the MemberId, which is still correctly assigned -1, -2 etc.)
- Fixed bug for pre printing cards into a competition, (and not printing the card so the member can optionally go into other competitions) which is for multiple days.
- Added colour settings for leaderboard.  Known bugs:  Cannot set caption colour, also the colours aren't saved when exiting.  This is a work in progres...
- Added PUTTS to standard scorecard.  Currently only enabled for Taupo.
- Half way through committing scorecard change for Taupo = adding Putts to the scorecard.
- Changed a few things to include courseID's and course names for Multiple course clubs.
- Changed and tested margins for rptScoreCardLongDocuPrint so it prints okay on the docuprint.
- Feature: disable scanning and hide reports and scan tab if the club doesn't have the SCS ClubProduct.
- Removed app.config from ScoreCardReading project.
- Major: Score card scanning added.  This version prints and scans cards, but doesn't save scores to the database.  Some known score calculation bugs.  Scanning and printing is visible to everyone (no club products yet).
- Fixed bug when only having 1 user security option e.g. Reports, and it threw an exception error Delta script to include the course name for multiple course clubs Fixed bug for adding scores to competitions from the Card Print screen for a 9 hole competition Added column to the Card Print window for course name for multiple course clubs Fixed bug with Course Information and for multiple course clubs - so they are saving correctly Added CourseName to the ScoreCardDTO
- Fixed bug - for editing scores an error message was popping up (Scoreinput control was null)
- Added missing inputbox files.
- Scorecard project for new long scorecard. Fixed flashing Finish button on DIY screen when yes/no dialog is visible. Fixed DIY score entry not to disappear if the yes/no dialog is visible. Added InputBox to utilities project; this is part of the new long scorecard.
- Added long scorecard for DocuPrint printers - this one prompts you for the left hand margin for troubleshooting at Aviation.
- Fix for the selected marker when playing 9 holes and an 18 hole member (card print screen)
- Added fix for date conversion problem when loading the leaderboard at Peninsula.
- properly assigning 9 hole markers to the marker select form in card print
- Change to include "todate" for the getlivemember, getresignedmember, cmember etc.
- Change to the print receipt for reprinting a card and not selecting "Print Green Fee Receipt"
- Feature : Round is now selected automatically on the competition report options form when you click on a particular round in the calendar.
- Post 72 Fixed crashbug on Card Printing DIY screen exit to DIY menu. Added database waiting prompt on AppStarter, cancel connect button.
- Changed the tooltip to the whole line Changed the DIY screen to correctly display green fees for Non Self Clubs and Self Clubs... hopefully.
- Added missing licenses.licx (part of 71)
- Final commit for v1.0071
- Added pulsating Enter and Finish buttons to self score entry screen to aid users - they sometimes don't seem to realise that they have to hit the button...
- Shows tooltip for reason of competition being disabled in competition select form
- added return of reason from CanPlayerEnterCompetition
- added keypad functionality for affiliation selection and in a few other places like labels etc
- Fixed Copy Competition bug where multiple CompetitionTypeCompetition rows are introduced when a competition is copied, then saved.  This is because the CompetitionUserDataId goes to 0 instead of NULL for some reason.
- Fixed bug where recurrences for course information could be saved when no markers are selected; causing the bug where multiple recurrences are saved in the database for the same day, messing up the marker selection.
- Removed GO from 67 schema script.
- Stop the DIY screen from opening multiple instances.
- Fixed bug with allowing best 1 of x rounds to be printed out.
- Self score entry reset screen on [Back To Main Menu] or timeout.
- Final commit for v1.0068
- Dispose the active report with a Using statement.
- 
- Deleted DownloadSevrvicecs.cs because it had been created with the proper name.
- 
- Card Printing: Update the screen before we go off printing the scorecard, or else it looks broken.  This bug only happens when you have the show cancel/print buttons enabled (The Pines, Walton)
- Final commit for v1.0067
- Added dg_GetGroupGreenFeesForDate procedure to schema script for Doug.
- 
- Renamed
- added WebUpdater project
- Added Print || Cancel buttons to FinishCard dialog on card printing.  Optional - only enabled for Walton right now. Fixed members being charged greenfees problem at Walton. Added scorecard printer host ApplicationSetting, and added LCD display to DIY card printing screen.
- Removed file/folder
- Green Fees for public holidays fixed to show and Group fees for the date are now only shown in CardPrintAdmin. Also ensured anywhere DatePlayed for a scorecard is set that the date does not include time ie. DateTime.Date is used.
- Resized the self score entry dialog slightly so the card not found message wouldn't wrap.
- Fixed crashbug where appstarter would go into a perpetual restart loop when started on anything where we're not an administrator. Added code to automatically create DotGolf shortcuts on the desktop.
- REMOVED DotGolf.Configurator - it is part of AppStarter now.
- Commit to cleanup
- Final commit for v1.0066
- Changed standard scorecard to have thick lines in the Partner columns.  Extended the lines to touch the top thick lines. Fixed Copy Competition function to also copy competition prizes. Added ESC heading to Pakuranga's standard ScoreCard. Added Womens' stroke and Mens' stroke to the scorecard.
- Final commit for v1.0065
- Added Country Club heading for Pakuranga (this is a hack and needs to be done properly later) Fixed inactivity timer to work properly with the DIY menu when loading CardPrintDIY.
- Added back DotGolf.Configurator after losing the source and decompiling the binaries...
- Made help menu items invisible.
- Corrected the Date at the top of the competition reports.
- Final commit for v1.0063 This is the build to be installed at Pakuranga tomorrow 2007-10-11.
- mod for the womens report
- interim change for womens handicap sheets. David to continue...
- Final commit for v1.0062. Crashbug fix for 61; there was a minor problem with the inactivity timers on the CPDIY screen.
- Fix for timer
- Fixed bug in schema script for Inactivity.
- Fix for GST
- Added customisable inactivity timeout setting for Card Printing DIY screen. Added schema script fix (59,60) for default scorecard formats at Auckland, Peninsula and Helensville. Added default marker hidden code to course information select screen.
- Fix for GST number
- Fixed problem with TaxNo or GST number not appearing on receipt.
- Moved sql updates from 60 into 61 and added dg_GetCourseInformationMarkersDefaultHidden procedure.
- Moved sql updates from Matt into 61
- Added Hide Marker selection to the DIY card print screen.
- Walton Fixes: Added timeout to gender select form. Added timeout to card printing DIY screen to take user back to home screen. Messed with Confirm buttons on frmPrintMessage and frmPrintNonAffMessage forms.
- Made the totals at the bottom of the page bold.
- Delta v1.0060.sql - Mod for including division for "All" for competition results.
- Looked into fixing the Print Receipt problem. Hopefully this is all fixed now.
- Changed the fee report to have the competition name properly at the top. Also, stopped the Competition Players report from minimising when previewing the report.
- Final commit for version 1.0059
- Change to Pre Print to back out computerno and also add in the references to the ClubID and MemberID length
- Fix to the fix for shift+click.  Dain bramaged doing boolean logic.
- Added IScoreCardReport, part of last commit, but missed it...
- Added option to select score card format; modified score card printing to get the right card.
- Added Shift+Click feature to card printing DIY screen.  You can now prohibit people easily closing the card printing screen from the touch screen if they don't have a keyboard.  Useful for unmanned clubs like Walton.
- Fixed handicap report to shrink rows for John from Huapai
- Allow entering computer no to add members to the selected members list.
- Made club combo asynchronously reload members lists so that you can use typomatic selection in the club combo box.
- Added selected members count to Select Members form.
- Feature: Scroll the just added member into view in the member select form.
- Made pre-printed scorecards show home club name and computer no.
- Fixed incorrect marker problem where you have a competition with no divisions and a marker different from the default for competition days.  This fixes the following problem at Titirangi: "Even though a competition was set to Black markers, and the selected marker in pre print changed to black, the cards still came out with white. We had to change the default markers to be black in the course information recurrence to overcome this problem."
- Fixed the fix to make unticking green fee receipt printing work correctly for Titirangi.
- Applied group green fee fix to SP from Matt.
- Added update for CompetitionLeaderboardColumns.
- Added custom headings to scorecard for Huapai.
- Added logic so R1 only appears for competition that have more than 1 round Changed Even to Ev on leaderboard for diff to par
- Added Twos tick to all score card reports.
- Added the Preview Competition button to the competition setup form for Divisions.
- Made Print Green Fee Receipt checkboxes do what they promise.
- Moved the handicap column slightly
- Fixed DIY Card Print to return to affiliation screen correctly after printing a card.
- Changed confirm button to the DIY Confirmation dialoag for non affiliates
- Added confirm button to the DIY Confirmation dialoag for non affiliates
- Changed the Course Handicap in the leaderboard setup area Added logos to the DIY resourses for Male and Female gender select option for clubs with no kiosk staff
- Added "pressed logos" for Male and Female
- New buttons for the DIY menu for Non Affiliates
- Added dg_GetCompetitionResultsSingleRound procedure from Matt/Doug.
- Removed WebUpdater Service from my solution
- Added the webservice reference.cs for completeness.
- Change for Leaderboard to include handicap index Added Date for competition results reports Added Handicap for competition results (single round report only) Changed the font for the prize listing for competition type.
- Added in the competition date to the competition reports
- Fix to round column order
- Added schema changes for 58 from Doug.
- added columns handicap and difference to par
- Fixed bug where leaderboard would crash if loaded with a WindowGeometry.xml which doesn't contain the fullscreen setting.
- Fixed bug with selecting or deselecting all leaderboard columns
- Added round no displayed next to competition name
- Changed the DIY menu limits to read the machine name.
- Added competition title "Prize Listing" to the report
- Added a count to the columns, and also added a grand total to the report.
- Leaderboard now remembers its position and fullscreen settings.  Hopefully this doesn't cause too much confusion...
- Added some more info to the dreaded error when the initial database download fails.
- Leaderboard now remembers its window location and state.  This rev is broken, I'll fix shortly.
- Fixed bug so scorecomplete event is NOT fired when movetonextcontrol method runs from hole 18
- AppStarter: Fixed doubletake on the configuration dialog if we have to elevate privileges on Vista.
- Fixed hangbug in Copy Competition (stored procedure fix - already applied at Howick)
- Fix for visitor competition fees and autoentry
- added Print functionality
- added Print functionality
- Save MaxNoOfRounds when nothing entered to null
- New competition players report
- Final commit for 57 - fixed some bugs in AppStarter, updated version.xml.
- New Competition Players report
- New Competition Players report showing divisions
- New Competition Players report
- Get Competition Players method
- Competition Players
- Added code to restart in elevated privileges when installing SQL Express. Added schema changes from Doug for prizes - to go in 57.
- Fixed spelling mistake on the Course Information Detail grid.
- [BREAKING CHANGE] AppStarter: Removed Win32Security classes and added new security code for setting folder permissions.  This is INCOMPLETE though, and should not be deployed.
- New application DIY settings and DIY limits now have pc names
- new network utility for listing computers on the network
- Return to menu timers interval set to application setting
- pc name added to limits
- new settings for DIY
- new settings for DIY return to menu inactivity, and Card print DIY show affiliation select screen
- added non affiliate card printing, using an application setting whether or not to have the option.
- Changed timer interval
- Added initial config dialog to appstarter - if $UNCONFIGURED$ is found in the database setting in DotGolf.exe.config, the user is prompted with a configuration dialog rather than being forced to hand edit the config file.
- Timer placed to close main form when inactive for 10 mins
- Fix plus handicappers score totals in scorecard entry
- Fixed holiday bug
- Added Matt's fix to dg_GetCategoryOfClubMember.
- Change for divisions when there are all 5 divisions included in the competition.
- if no computer no is entered -1 is returned
- updated webservice references
- Deleting out file not required
- New project files for Dougs merge for Prizes
- Moved everything into trunk
- Creating Trunk: Added trunk and tags directories.